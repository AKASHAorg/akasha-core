"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var Url=_interopDefault(require("url")),buffer$1=_interopDefault(require("buffer")),os=_interopDefault(require("os")),Stream$1=_interopDefault(require("stream")),util$j=_interopDefault(require("util")),fs=_interopDefault(require("fs")),path$4=_interopDefault(require("path")),crypto$l=_interopDefault(require("crypto")),assert$t=_interopDefault(require("assert")),child_process=_interopDefault(require("child_process")),http=_interopDefault(require("http")),https=_interopDefault(require("https")),net=_interopDefault(require("net")),vm$9=_interopDefault(require("vm")),tty=_interopDefault(require("tty")),events$1=_interopDefault(require("events")),constants$j=_interopDefault(require("constants")),dgram=_interopDefault(require("dgram")),bufferutil=_interopDefault(require("bufferutil")),zlib=_interopDefault(require("zlib")),utf8Validate=_interopDefault(require("utf-8-validate")),tls=_interopDefault(require("tls")),string_decoder$1=_interopDefault(require("string_decoder")),cluster$1=_interopDefault(require("cluster")),dns$1=_interopDefault(require("dns")),extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function __awaiter(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}c((n=n.apply(e,t||[])).next())})}function __generator(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}function getCjsExportFromNamespace(e){return e&&e.default||e}var bottle=createCommonjsModule(function(e,t){(function(r){var n,i=0,o=Array.prototype.slice,s=function(e,t){var i=e[t];if(i===r&&n.config.strict)throw new Error("Bottle was unable to resolve a service.  `"+t+"` is undefined.");return i},a=function(e){var t;return this.nested[e]||(t=n.pop(),this.nested[e]=t,this.factory(e,function(){return t.container})),this.nested[e]},c=function(e){return e.split(".").reduce(s,this)},u=function(e,t){return t(e)},f=function(e,t){return(e[t]||[]).concat(e.__global__||[])},l=function(e,t){var n,i,o,s,a;return this.id,o=this.container,s=this.decorators,a=this.middlewares,n=e+"Provider",(i=Object.create(null))[n]={configurable:!0,enumerable:!0,get:function(){var e=new t;return delete o[n],o[n]=e,e}},i[e]={configurable:!0,enumerable:!0,get:function(){var t,i=o[n];return i&&(t=f(s,e).reduce(u,i.$get(o)),delete o[n],delete o[e]),t===r?t:function(e,t,r,n){var i={configurable:!0,enumerable:!0};return e.length?i.get=function(){var t=0,n=function(i){if(i)throw i;e[t]&&e[t++](r,n)};return n(),r}:(i.value=r,i.writable=!0),Object.defineProperty(n,t,i),n[t]}(f(a,e),e,t,o)}},Object.defineProperties(o,i),this},d=function(e,t){var r,n;return r=e.split("."),this.providerMap[e]&&1===r.length&&!this.container[e+"Provider"]?console.error(e+" provider already instantiated."):(this.originalProviders[e]=t,this.providerMap[e]=!0,n=r.shift(),r.length?(a.call(this,n).provider(r.join("."),t),this):l.call(this,n,t))},h=function(e,t){return d.call(this,e,function(){this.$get=t})},p=function(e,t,r){var n=arguments.length>3?o.call(arguments,3):[],i=this;return h.call(this,e,function(){var e=t,o=n.map(c,i.container);return r?new(t.bind.apply(t,[null].concat(o))):e.apply(null,o)})},b=function(e,t){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,value:t,writable:!0})},m=function(e,t){var r=e[t];return r||b.call(e,t,r={}),r},g=function(e,t){var r,n;return"function"==typeof e&&(t=e,e="__global__"),n=(r=e.split(".")).shift(),r.length?a.call(this,n).decorator(r.join("."),t):(this.decorators[n]||(this.decorators[n]=[]),this.decorators[n].push(t)),this},y=function(e){return!/^\$(?:decorator|register|list)$|Provider$/.test(e)},v=function(e){return Object.keys(e||this.container||{}).filter(y)},_={},$=function(e){var t=e.$value===r?e:e.$value;return this[e.$type||"service"].apply(this,[e.$name,t].concat(e.$inject||[]))},S=function(e){delete this.providerMap[e],delete this.container[e],delete this.container[e+"Provider"]};(n=function e(t){if(!(this instanceof e))return e.pop(t);this.id=i++,this.decorators={},this.middlewares={},this.nested={},this.providerMap={},this.originalProviders={},this.deferred=[],this.container={$decorator:g.bind(this),$register:$.bind(this),$list:v.bind(this)}}).prototype={constant:function(e,t){var r=e.split(".");return e=r.pop(),function(e,t){Object.defineProperty(this,e,{configurable:!1,enumerable:!0,value:t,writable:!1})}.call(r.reduce(m,this.container),e,t),this},decorator:g,defer:function(e){return this.deferred.push(e),this},digest:function(e){return(e||[]).map(c,this.container)},factory:h,instanceFactory:function(e,t){return h.call(this,e,function(e){return{instance:t.bind(t,e)}})},list:v,middleware:function(e,t){var r,n;return"function"==typeof e&&(t=e,e="__global__"),n=(r=e.split(".")).shift(),r.length?a.call(this,n).middleware(r.join("."),t):(this.middlewares[n]||(this.middlewares[n]=[]),this.middlewares[n].push(t)),this},provider:d,resetProviders:function(e){var t=this.originalProviders,r=Array.isArray(e);Object.keys(this.originalProviders).forEach(function(n){if(!r||-1!==e.indexOf(n)){var i=n.split(".");i.length>1&&i.forEach(S,a.call(this,i[0])),S.call(this,n),this.provider(n,t[n])}},this)},register:$,resolve:function(e){return this.deferred.forEach(function(t){t(e)}),this},service:function(e,t){return p.apply(this,[e,t,!0].concat(o.call(arguments,2)))},serviceFactory:function(e,t){return p.apply(this,[e,t,!1].concat(o.call(arguments,2)))},value:function(e,t){var r;return r=e.split("."),e=r.pop(),b.call(r.reduce(m,this.container),e,t),this}},n.pop=function(e){var t;return"string"==typeof e?((t=_[e])||(_[e]=t=new n,t.constant("BOTTLE_NAME",e)),t):new n},n.clear=function(e){"string"==typeof e?delete _[e]:_={}},n.list=v,n.config={strict:!1};var E={function:!0,object:!0};!function(i){var o=t&&!t.nodeType&&t,s=e&&!e.nodeType&&e,a=s&&s.exports===o&&o,c=E[typeof commonjsGlobal]&&commonjsGlobal;!c||c.global!==c&&c.window!==c||(i=c),"function"==typeof r&&"object"==typeof r.amd&&r.amd?(i.Bottle=n,r(function(){return n})):o&&s?a?(s.exports=n).Bottle=n:o.Bottle=n:i.Bottle=n}(E[typeof window]&&window||this)}).call(commonjsGlobal)}),DIContainer_1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(bottle);t.default=class{constructor(){this._sp=new n.default("RuntimeDIContainer")}get serviceProvider(){return this._sp}getService(e){return this._sp.container[e]}register(e,t){this._sp.service(e,t)}}});unwrapExports(DIContainer_1);var iterator=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}},yallist=Yallist;function Yallist(e){var t=this;if(t instanceof Yallist||(t=new Yallist),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}function push(e,t){e.tail=new Node(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function unshift(e,t){e.head=new Node(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Node(e,t,r,n){if(!(this instanceof Node))return new Node(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null},Yallist.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},Yallist.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},Yallist.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)push(this,arguments[e]);return this.length},Yallist.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)unshift(this,arguments[e]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},Yallist.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},Yallist.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},Yallist.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},Yallist.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},Yallist.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},Yallist.prototype.map=function(e,t){t=t||this;for(var r=new Yallist,n=this.head;null!==n;)r.push(e.call(t,n.value,this)),n=n.next;return r},Yallist.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Yallist,n=this.tail;null!==n;)r.push(e.call(t,n.value,this)),n=n.prev;return r},Yallist.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},Yallist.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},Yallist.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},Yallist.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},Yallist.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new Yallist;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)r.push(i.value);return r},Yallist.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new Yallist;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&n>t;n--)i=i.prev;for(;null!==i&&n>e;n--,i=i.prev)r.push(i.value);return r},Yallist.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{iterator(Yallist)}catch(e){}const MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=e.max||1/0;const t=e.length||naiveLength;if(this[LENGTH_CALCULATOR]="function"!=typeof t?naiveLength:t,this[ALLOW_STALE]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[MAX_AGE]=e.maxAge||0,this[DISPOSE]=e.dispose,this[NO_DISPOSE_ON_SET]=e.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[MAX]=e||1/0,trim(this)}get max(){return this[MAX]}set allowStale(e){this[ALLOW_STALE]=!!e}get allowStale(){return this[ALLOW_STALE]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=e,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(e){"function"!=typeof e&&(e=naiveLength),e!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=e,this[LENGTH]=0,this[LRU_LIST].forEach(e=>{e.length=this[LENGTH_CALCULATOR](e.value,e.key),this[LENGTH]+=e.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(e,t){t=t||this;for(let r=this[LRU_LIST].tail;null!==r;){const n=r.prev;forEachStep(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[LRU_LIST].head;null!==r;){const n=r.next;forEachStep(this,e,r,t),r=n}}keys(){return this[LRU_LIST].toArray().map(e=>e.key)}values(){return this[LRU_LIST].toArray().map(e=>e.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(e=>this[DISPOSE](e.key,e.value)),this[CACHE]=new Map,this[LRU_LIST]=new yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(e=>!isStale(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[LRU_LIST]}set(e,t,r){if((r=r||this[MAX_AGE])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,i=this[LENGTH_CALCULATOR](t,e);if(this[CACHE].has(e)){if(i>this[MAX])return del(this,this[CACHE].get(e)),!1;const o=this[CACHE].get(e).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](e,o.value)),o.now=n,o.maxAge=r,o.value=t,this[LENGTH]+=i-o.length,o.length=i,this.get(e),trim(this),!0}const o=new Entry(e,t,i,n,r);return o.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](e,t),!1):(this[LENGTH]+=o.length,this[LRU_LIST].unshift(o),this[CACHE].set(e,this[LRU_LIST].head),trim(this),!0)}has(e){if(!this[CACHE].has(e))return!1;const t=this[CACHE].get(e).value;return!isStale(this,t)}get(e){return get(this,e,!0)}peek(e){return get(this,e,!1)}pop(){const e=this[LRU_LIST].tail;return e?(del(this,e),e.value):null}del(e){del(this,this[CACHE].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[CACHE].forEach((e,t)=>get(this,t,!1))}}const get=(e,t,r)=>{const n=e[CACHE].get(t);if(n){const t=n.value;if(isStale(e,t)){if(del(e,n),!e[ALLOW_STALE])return}else r&&(e[UPDATE_AGE_ON_GET]&&(n.value.now=Date.now()),e[LRU_LIST].unshiftNode(n));return t.value}},isStale=(e,t)=>{if(!t||!t.maxAge&&!e[MAX_AGE])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[MAX_AGE]&&r>e[MAX_AGE]},trim=e=>{if(e[LENGTH]>e[MAX])for(let t=e[LRU_LIST].tail;e[LENGTH]>e[MAX]&&null!==t;){const r=t.prev;del(e,t),t=r}},del=(e,t)=>{if(t){const r=t.value;e[DISPOSE]&&e[DISPOSE](r.key,r.value),e[LENGTH]-=r.length,e[CACHE].delete(r.key),e[LRU_LIST].removeNode(t)}};class Entry{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const forEachStep=(e,t,r,n)=>{let i=r.value;isStale(e,i)&&(del(e,r),e[ALLOW_STALE]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};var lruCache=LRUCache,Stash_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.cache=new lruCache(e)}get entries(){return this.cache}get(e){return this.cache.get(e)}set(e,t){this.cache.set(e,t)}}});function isFunction(e){return"function"==typeof e}unwrapExports(Stash_1);var _enable_super_gross_mode_that_will_cause_bad_things=!1,config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;_enable_super_gross_mode_that_will_cause_bad_things=e},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(e){setTimeout(function(){throw e},0)}var empty={closed:!0,next:function(e){},error:function(e){if(config.useDeprecatedSynchronousErrorHandling)throw e;hostReportError(e)},complete:function(){}},isArray=Array.isArray||function(e){return e&&"number"==typeof e.length};function isObject(e){return null!==e&&"object"==typeof e}function UnsubscriptionErrorImpl(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype);var UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this._parentOrParents,n=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var o=0;o<r.length;++o){r[o].remove(this)}if(isFunction(n))try{n.call(this)}catch(e){t=e instanceof UnsubscriptionError?flattenUnsubscriptionErrors(e.errors):[e]}if(isArray(i)){o=-1;for(var s=i.length;++o<s;){var a=i[o];if(isObject(a))try{a.unsubscribe()}catch(e){t=t||[],e instanceof UnsubscriptionError?t=t.concat(flattenUnsubscriptionErrors(e.errors)):t.push(e)}}}if(t)throw new UnsubscriptionError(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof e){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function flattenUnsubscriptionErrors(e){return e.reduce(function(e,t){return e.concat(t instanceof UnsubscriptionError?t.errors:t)},[])}var rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Subscriber=function(e){function t(r,n,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=empty;break;case 1:if(!r){o.destination=empty;break}if("object"==typeof r){r instanceof t?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new SafeSubscriber(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new SafeSubscriber(o,r,n,i)}return o}return __extends(t,e),t.prototype[rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Subscription),SafeSubscriber=function(e){function t(t,r,n,i){var o,s=e.call(this)||this;s._parentSubscriber=t;var a=s;return isFunction(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==empty&&(isFunction((a=Object.create(r)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=n,s._complete=i,s}return __extends(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),config.useDeprecatedSynchronousErrorHandling)throw e;hostReportError(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(hostReportError(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Subscriber);function canReportError(e){for(;e;){var t=e,r=t.closed,n=t.destination,i=t.isStopped;if(r||i)return!1;e=n&&n instanceof Subscriber?n:null}return!0}function toSubscriber(e,t,r){if(e){if(e instanceof Subscriber)return e;if(e[rxSubscriber])return e[rxSubscriber]()}return e||t||r?new Subscriber(e,t,r):new Subscriber(empty)}var observable="function"==typeof Symbol&&Symbol.observable||"@@observable";function noop(){}function pipe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pipeFromArray(e)}function pipeFromArray(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:noop}var Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,i=toSubscriber(e,t,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||config.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),config.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=getPromiseCtor(t))(function(t,n){var i;i=r.subscribe(function(t){try{e(t)}catch(e){n(e),i&&i.unsubscribe()}},n,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=getPromiseCtor(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function getPromiseCtor(e){if(e||(e=Promise),!e)throw new Error("no Promise impl found");return e}function ObjectUnsubscribedErrorImpl(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype);var ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(e){function t(t,r){var n=e.call(this)||this;return n.subject=t,n.subscriber=r,n.closed=!1,n}return __extends(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(Subscription),SubjectSubscriber=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return __extends(t,e),t}(Subscriber),Subject=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return __extends(t,e),t.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},t.prototype.lift=function(e){var t=new AnonymousSubject(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),Subscription.EMPTY):this.isStopped?(e.complete(),Subscription.EMPTY):(this.observers.push(e),new SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new Observable;return e.source=this,e},t.create=function(e,t){return new AnonymousSubject(e,t)},t}(Observable),AnonymousSubject=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return __extends(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Subscription.EMPTY},t}(Subject);function refCount(){return function(e){return e.lift(new RefCountOperator(e))}}var RefCountOperator=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new RefCountSubscriber(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),RefCountSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return __extends(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(Subscriber),ConnectableObservable=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return __extends(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Subscription).add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),e.closed&&(this._connection=null,e=Subscription.EMPTY)),e},t.prototype.refCount=function(){return refCount()(this)},t}(Observable),connectableProto=ConnectableObservable.prototype,connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:connectableProto._subscribe},_isComplete:{value:connectableProto._isComplete,writable:!0},getSubject:{value:connectableProto.getSubject},connect:{value:connectableProto.connect},refCount:{value:connectableProto.refCount}},ConnectableSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return __extends(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(SubjectSubscriber),GroupedObservable=function(e){function t(t,r,n){var i=e.call(this)||this;return i.key=t,i.groupSubject=r,i.refCountSubscription=n,i}return __extends(t,e),t.prototype._subscribe=function(e){var t=new Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new InnerRefCountSubscription(r)),t.add(n.subscribe(e)),t},t}(Observable),InnerRefCountSubscription=function(e){function t(t){var r=e.call(this)||this;return r.parent=t,t.count++,r}return __extends(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(Subscription),BehaviorSubject=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return __extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Subject),Action=function(e){function t(t,r){return e.call(this)||this}return __extends(t,e),t.prototype.schedule=function(e,t){return this},t}(Subscription),AsyncAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return __extends(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(Action),QueueAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return __extends(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(AsyncAction),Scheduler=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=function(){return Date.now()},e}(),AsyncScheduler=function(e){function t(r,n){void 0===n&&(n=Scheduler.now);var i=e.call(this,r,function(){return t.delegate&&t.delegate!==i?t.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return __extends(t,e),t.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,n,i):e.prototype.schedule.call(this,r,n,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(Scheduler),QueueScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(AsyncScheduler),queue=new QueueScheduler(QueueAction),EMPTY=new Observable(function(e){return e.complete()});function empty$1(e){return e?emptyScheduled(e):EMPTY}function emptyScheduled(e){return new Observable(function(t){return e.schedule(function(){return t.complete()})})}function isScheduler(e){return e&&"function"==typeof e.schedule}var NotificationKind,subscribeToArray=function(e){return function(t){for(var r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.complete()}};function scheduleArray(e,t){return new Observable(function(r){var n=new Subscription,i=0;return n.add(t.schedule(function(){i!==e.length?(r.next(e[i++]),r.closed||n.add(this.schedule())):r.complete()})),n})}function fromArray(e,t){return t?scheduleArray(e,t):new Observable(subscribeToArray(e))}function of(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return isScheduler(r)?(e.pop(),scheduleArray(e,r)):fromArray(e)}function throwError(e,t){return new Observable(t?function(r){return t.schedule(dispatch,0,{error:e,subscriber:r})}:function(t){return t.error(e)})}function dispatch(e){var t=e.error;e.subscriber.error(t)}NotificationKind||(NotificationKind={});var Notification=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return of(this.value);case"E":return throwError(this.error);case"C":return empty$1()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),ObserveOnSubscriber=function(e){function t(t,r,n){void 0===n&&(n=0);var i=e.call(this,t)||this;return i.scheduler=r,i.delay=n,i}return __extends(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new ObserveOnMessage(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Notification.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},t}(Subscriber),ObserveOnMessage=function(){return function(e,t){this.notification=e,this.destination=t}}(),ReplaySubject=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=n,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return __extends(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var r=this._events;r.push(t),r.length>this._bufferSize&&r.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new ReplayEvent(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?t=Subscription.EMPTY:(this.observers.push(e),t=new SubjectSubscription(this,e)),i&&e.add(e=new ObserveOnSubscriber(e,i)),r)for(var s=0;s<o&&!e.closed;s++)e.next(n[s]);else for(s=0;s<o&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(e-n[o].time<r);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&n.splice(0,o),n},t}(Subject),ReplayEvent=function(){return function(e,t){this.time=e,this.value=t}}(),AsyncSubject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return __extends(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(Subject),nextHandle=1,tasksByHandle={};function runIfPresent(e){var t=tasksByHandle[e];t&&t()}var Immediate={setImmediate:function(e){var t=nextHandle++;return tasksByHandle[t]=e,Promise.resolve().then(function(){return runIfPresent(t)}),t},clearImmediate:function(e){delete tasksByHandle[e]}},AsapAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return __extends(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(Immediate.clearImmediate(r),t.scheduled=void 0)},t}(AsyncAction),AsapScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler),asap=new AsapScheduler(AsapAction),async=new AsyncScheduler(AsyncAction),AnimationFrameAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return __extends(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(cancelAnimationFrame(r),t.scheduled=void 0)},t}(AsyncAction),AnimationFrameScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler),animationFrame=new AnimationFrameScheduler(AnimationFrameAction),VirtualTimeScheduler=function(e){function t(t,r){void 0===t&&(t=VirtualAction),void 0===r&&(r=Number.POSITIVE_INFINITY);var n=e.call(this,t,function(){return n.frame})||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return __extends(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(AsyncScheduler),VirtualAction=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1);var i=e.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.index=n,i.active=!0,i.index=t.index=n,i}return __extends(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,r){},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(AsyncAction);function identity(e){return e}function isObservable(e){return!!e&&(e instanceof Observable||"function"==typeof e.lift&&"function"==typeof e.subscribe)}function ArgumentOutOfRangeErrorImpl(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype);var ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;function EmptyErrorImpl(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}EmptyErrorImpl.prototype=Object.create(Error.prototype);var EmptyError=EmptyErrorImpl;function TimeoutErrorImpl(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}TimeoutErrorImpl.prototype=Object.create(Error.prototype);var TimeoutError=TimeoutErrorImpl;function map(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new MapOperator(e,t))}}var MapOperator=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new MapSubscriber(e,this.project,this.thisArg))},e}(),MapSubscriber=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return __extends(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Subscriber);function bindCallback(e,t,r){if(t){if(!isScheduler(t))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return bindCallback(e,r).apply(void 0,n).pipe(map(function(e){return isArray(e)?t.apply(void 0,e):t(e)}))};r=t}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i,o=this,s={context:o,subject:i,callbackFunc:e,scheduler:r};return new Observable(function(n){if(r){var a={args:t,subscriber:n,params:s};return r.schedule(dispatch$1,0,a)}if(!i){i=new AsyncSubject;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(e.length<=1?e[0]:e),i.complete()}]))}catch(e){canReportError(i)?i.error(e):console.warn(e)}}return i.subscribe(n)})}}function dispatch$1(e){var t=this,r=e.args,n=e.subscriber,i=e.params,o=i.callbackFunc,s=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new AsyncSubject;try{o.apply(s,r.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.length<=1?e[0]:e;t.add(a.schedule(dispatchNext,0,{value:n,subject:c}))}]))}catch(e){c.error(e)}}this.add(c.subscribe(n))}function dispatchNext(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function bindNodeCallback(e,t,r){if(t){if(!isScheduler(t))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return bindNodeCallback(e,r).apply(void 0,n).pipe(map(function(e){return isArray(e)?t.apply(void 0,e):t(e)}))};r=t}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i={subject:void 0,args:t,callbackFunc:e,scheduler:r,context:this};return new Observable(function(n){var o=i.context,s=i.subject;if(r)return r.schedule(dispatch$2,0,{params:i,subscriber:n,context:o});if(!s){s=i.subject=new AsyncSubject;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.shift();r?s.error(r):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){canReportError(s)?s.error(e):console.warn(e)}}return s.subscribe(n)})}}function dispatch$2(e){var t=this,r=e.params,n=e.subscriber,i=e.context,o=r.callbackFunc,s=r.args,a=r.scheduler,c=r.subject;if(!c){c=r.subject=new AsyncSubject;try{o.apply(i,s.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.shift();if(n)t.add(a.schedule(dispatchError,0,{err:n,subject:c}));else{var i=e.length<=1?e[0]:e;t.add(a.schedule(dispatchNext$1,0,{value:i,subject:c}))}}]))}catch(e){this.add(a.schedule(dispatchError,0,{err:e,subject:c}))}}this.add(c.subscribe(n))}function dispatchNext$1(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function dispatchError(e){var t=e.err;e.subject.error(t)}var OuterSubscriber=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Subscriber),InnerSubscriber=function(e){function t(t,r,n){var i=e.call(this)||this;return i.parent=t,i.outerValue=r,i.outerIndex=n,i.index=0,i}return __extends(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Subscriber),subscribeToPromise=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,hostReportError),t}};function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var iterator$1=getSymbolIterator(),subscribeToIterable=function(e){return function(t){for(var r=e[iterator$1]();;){var n=r.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof r.return&&t.add(function(){r.return&&r.return()}),t}},subscribeToObservable=function(e){return function(t){var r=e[observable]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(t)}},isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function isPromise(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var subscribeTo=function(e){if(e&&"function"==typeof e[observable])return subscribeToObservable(e);if(isArrayLike(e))return subscribeToArray(e);if(isPromise(e))return subscribeToPromise(e);if(e&&"function"==typeof e[iterator$1])return subscribeToIterable(e);var t=isObject(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function subscribeToResult(e,t,r,n,i){if(void 0===i&&(i=new InnerSubscriber(e,r,n)),!i.closed)return t instanceof Observable?t.subscribe(i):subscribeTo(t)(i)}var NONE={};function combineLatest(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=null,n=null;return isScheduler(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&isArray(e[0])&&(e=e[0]),fromArray(e,n).lift(new CombineLatestOperator(r))}var CombineLatestOperator=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new CombineLatestSubscriber(e,this.resultSelector))},e}(),CombineLatestSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return __extends(t,e),t.prototype._next=function(e){this.values.push(NONE),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(subscribeToResult(this,n,n,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.values,s=o[r],a=this.toRespond?s===NONE?--this.toRespond:this.toRespond:0;o[r]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(OuterSubscriber);function scheduleObservable(e,t){return new Observable(function(r){var n=new Subscription;return n.add(t.schedule(function(){var i=e[observable]();n.add(i.subscribe({next:function(e){n.add(t.schedule(function(){return r.next(e)}))},error:function(e){n.add(t.schedule(function(){return r.error(e)}))},complete:function(){n.add(t.schedule(function(){return r.complete()}))}}))})),n})}function schedulePromise(e,t){return new Observable(function(r){var n=new Subscription;return n.add(t.schedule(function(){return e.then(function(e){n.add(t.schedule(function(){r.next(e),n.add(t.schedule(function(){return r.complete()}))}))},function(e){n.add(t.schedule(function(){return r.error(e)}))})})),n})}function scheduleIterable(e,t){if(!e)throw new Error("Iterable cannot be null");return new Observable(function(r){var n,i=new Subscription;return i.add(function(){n&&"function"==typeof n.return&&n.return()}),i.add(t.schedule(function(){n=e[iterator$1](),i.add(t.schedule(function(){if(!r.closed){var e,t;try{var i=n.next();e=i.value,t=i.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}}))})),i})}function isInteropObservable(e){return e&&"function"==typeof e[observable]}function isIterable(e){return e&&"function"==typeof e[iterator$1]}function scheduled(e,t){if(null!=e){if(isInteropObservable(e))return scheduleObservable(e,t);if(isPromise(e))return schedulePromise(e,t);if(isArrayLike(e))return scheduleArray(e,t);if(isIterable(e)||"string"==typeof e)return scheduleIterable(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function from(e,t){return t?scheduled(e,t):e instanceof Observable?e:new Observable(subscribeTo(e))}function mergeMap(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof t?function(n){return n.pipe(mergeMap(function(r,n){return from(e(r,n)).pipe(map(function(e,i){return t(r,e,n,i)}))},r))}:("number"==typeof t&&(r=t),function(t){return t.lift(new MergeMapOperator(e,r))})}var MergeMapOperator=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new MergeMapSubscriber(e,this.project,this.concurrent))},e}(),MergeMapSubscriber=function(e){function t(t,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return __extends(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=new InnerSubscriber(this,void 0,void 0);this.destination.add(n),subscribeToResult(this,e,t,r,n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber);function mergeAll(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),mergeMap(identity,e)}function concatAll(){return mergeAll(1)}function concat(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return concatAll()(of.apply(void 0,e))}function defer(e){return new Observable(function(t){var r;try{r=e()}catch(e){return void t.error(e)}return(r?from(r):empty$1()).subscribe(t)})}function forkJoin(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=e[0];if(isArray(r))return forkJoinInternal(r,null);if(isObject(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return forkJoinInternal(n.map(function(e){return r[e]}),n)}}if("function"==typeof e[e.length-1]){var i=e.pop();return forkJoinInternal(e=1===e.length&&isArray(e[0])?e[0]:e,null).pipe(map(function(e){return i.apply(void 0,e)}))}return forkJoinInternal(e,null)}function forkJoinInternal(e,t){return new Observable(function(r){var n=e.length;if(0!==n)for(var i=new Array(n),o=0,s=0,a=function(a){var c=from(e[a]),u=!1;r.add(c.subscribe({next:function(e){u||(u=!0,s++),i[a]=e},error:function(e){return r.error(e)},complete:function(){++o!==n&&u||(s===n&&r.next(t?t.reduce(function(e,t,r){return e[t]=i[r],e},{}):i),r.complete())}}))},c=0;c<n;c++)a(c);else r.complete()})}function fromEvent(e,t,r,n){return isFunction(r)&&(n=r,r=void 0),n?fromEvent(e,t,r).pipe(map(function(e){return isArray(e)?n.apply(void 0,e):n(e)})):new Observable(function(n){setupSubscription(e,t,function(e){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(e)},n,r)})}function setupSubscription(e,t,r,n,i){var o;if(isEventTarget(e)){var s=e;e.addEventListener(t,r,i),o=function(){return s.removeEventListener(t,r,i)}}else if(isJQueryStyleEventEmitter(e)){var a=e;e.on(t,r),o=function(){return a.off(t,r)}}else if(isNodeStyleEventEmitter(e)){var c=e;e.addListener(t,r),o=function(){return c.removeListener(t,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var u=0,f=e.length;u<f;u++)setupSubscription(e[u],t,r,n,i)}n.add(o)}function isNodeStyleEventEmitter(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function isJQueryStyleEventEmitter(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}function isEventTarget(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}function fromEventPattern(e,t,r){return r?fromEventPattern(e,t).pipe(map(function(e){return isArray(e)?r.apply(void 0,e):r(e)})):new Observable(function(r){var n,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)};try{n=e(i)}catch(e){return void r.error(e)}if(isFunction(t))return function(){return t(i,n)}})}function generate(e,t,r,n,i){var o,s;if(1==arguments.length){var a=e;s=a.initialState,t=a.condition,r=a.iterate,o=a.resultSelector||identity,i=a.scheduler}else void 0===n||isScheduler(n)?(s=e,o=identity,i=n):(s=e,o=n);return new Observable(function(e){var n=s;if(i)return i.schedule(dispatch$3,0,{subscriber:e,iterate:r,condition:t,resultSelector:o,state:n});for(;;){if(t){var a=void 0;try{a=t(n)}catch(t){return void e.error(t)}if(!a){e.complete();break}}var c=void 0;try{c=o(n)}catch(t){return void e.error(t)}if(e.next(c),e.closed)break;try{n=r(n)}catch(t){return void e.error(t)}}})}function dispatch$3(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function iif(e,t,r){return void 0===t&&(t=EMPTY),void 0===r&&(r=EMPTY),defer(function(){return e()?t:r})}function isNumeric(e){return!isArray(e)&&e-parseFloat(e)+1>=0}function interval(e,t){return void 0===e&&(e=0),void 0===t&&(t=async),(!isNumeric(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=async),new Observable(function(r){return r.add(t.schedule(dispatch$4,e,{subscriber:r,counter:0,period:e})),r})}function dispatch$4(e){var t=e.subscriber,r=e.counter,n=e.period;t.next(r),this.schedule({subscriber:t,counter:r+1,period:n},n)}function merge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return isScheduler(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),null===n&&1===e.length&&e[0]instanceof Observable?e[0]:mergeAll(r)(fromArray(e,n))}var NEVER=new Observable(noop);function never(){return NEVER}function onErrorResumeNext(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return EMPTY;var r=e[0],n=e.slice(1);return 1===e.length&&isArray(r)?onErrorResumeNext.apply(void 0,r):new Observable(function(e){var t=function(){return e.add(onErrorResumeNext.apply(void 0,n).subscribe(e))};return from(r).subscribe({next:function(t){e.next(t)},error:t,complete:t})})}function pairs(e,t){return new Observable(t?function(r){var n=Object.keys(e),i=new Subscription;return i.add(t.schedule(dispatch$5,0,{keys:n,index:0,subscriber:r,subscription:i,obj:e})),i}:function(t){for(var r=Object.keys(e),n=0;n<r.length&&!t.closed;n++){var i=r[n];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function dispatch$5(e){var t=e.keys,r=e.index,n=e.subscriber,i=e.subscription,o=e.obj;if(!n.closed)if(r<t.length){var s=t[r];n.next([s,o[s]]),i.add(this.schedule({keys:t,index:r+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}function not(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}function filter(e,t){return function(r){return r.lift(new FilterOperator(e,t))}}var FilterOperator=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new FilterSubscriber(e,this.predicate,this.thisArg))},e}(),FilterSubscriber=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.predicate=r,i.thisArg=n,i.count=0,i}return __extends(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(Subscriber);function partition(e,t,r){return[filter(t,r)(new Observable(subscribeTo(e))),filter(not(t,r))(new Observable(subscribeTo(e)))]}function race(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!isArray(e[0]))return e[0];e=e[0]}return fromArray(e,void 0).lift(new RaceOperator)}var RaceOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new RaceSubscriber(e))},e}(),RaceSubscriber=function(e){function t(t){var r=e.call(this,t)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return __extends(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],i=subscribeToResult(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(OuterSubscriber);function range(e,t,r){return void 0===e&&(e=0),new Observable(function(n){void 0===t&&(t=e,e=0);var i=0,o=e;if(r)return r.schedule(dispatch$6,0,{index:i,count:t,start:e,subscriber:n});for(;;){if(i++>=t){n.complete();break}if(n.next(o++),n.closed)break}})}function dispatch$6(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t),i.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))}function timer(e,t,r){void 0===e&&(e=0);var n=-1;return isNumeric(t)?n=Number(t)<1?1:Number(t):isScheduler(t)&&(r=t),isScheduler(r)||(r=async),new Observable(function(t){var i=isNumeric(e)?e:+e-r.now();return r.schedule(dispatch$7,i,{index:0,period:n,subscriber:t})})}function dispatch$7(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}}function using(e,t){return new Observable(function(r){var n,i;try{n=e()}catch(e){return void r.error(e)}try{i=t(n)}catch(e){return void r.error(e)}var o=(i?from(i):EMPTY).subscribe(r);return function(){o.unsubscribe(),n&&n.unsubscribe()}})}function zip(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),fromArray(e,void 0).lift(new ZipOperator(r))}var ZipOperator=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new ZipSubscriber(e,this.resultSelector))},e}(),ZipSubscriber=function(e){function t(t,r,n){void 0===n&&(n=Object.create(null));var i=e.call(this,t)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof r?r:null,i.values=n,i}return __extends(t,e),t.prototype._next=function(e){var t=this.iterators;isArray(e)?t.push(new StaticArrayIterator(e)):"function"==typeof e[iterator$1]?t.push(new StaticIterator(e[iterator$1]())):t.push(new ZipBufferIterator(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];if(n.stillUnsubscribed)this.destination.add(n.subscribe(n,r));else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++){if("function"==typeof(s=e[n]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(n=0;n<t;n++){var s,a=(s=e[n]).next();if(s.hasCompleted()&&(i=!0),a.done)return void r.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Subscriber),StaticIterator=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),StaticArrayIterator=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[iterator$1]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),ZipBufferIterator=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.parent=r,i.observable=n,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return __extends(t,e),t.prototype[iterator$1]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return subscribeToResult(this,this.observable,this,t)},t}(OuterSubscriber),_esm5=Object.freeze({Observable:Observable,ConnectableObservable:ConnectableObservable,GroupedObservable:GroupedObservable,observable:observable,Subject:Subject,BehaviorSubject:BehaviorSubject,ReplaySubject:ReplaySubject,AsyncSubject:AsyncSubject,asapScheduler:asap,asyncScheduler:async,queueScheduler:queue,animationFrameScheduler:animationFrame,VirtualTimeScheduler:VirtualTimeScheduler,VirtualAction:VirtualAction,Scheduler:Scheduler,Subscription:Subscription,Subscriber:Subscriber,Notification:Notification,get NotificationKind(){return NotificationKind},pipe:pipe,noop:noop,identity:identity,isObservable:isObservable,ArgumentOutOfRangeError:ArgumentOutOfRangeError,EmptyError:EmptyError,ObjectUnsubscribedError:ObjectUnsubscribedError,UnsubscriptionError:UnsubscriptionError,TimeoutError:TimeoutError,bindCallback:bindCallback,bindNodeCallback:bindNodeCallback,combineLatest:combineLatest,concat:concat,defer:defer,empty:empty$1,forkJoin:forkJoin,from:from,fromEvent:fromEvent,fromEventPattern:fromEventPattern,generate:generate,iif:iif,interval:interval,merge:merge,never:never,of:of,onErrorResumeNext:onErrorResumeNext,pairs:pairs,partition:partition,race:race,range:range,throwError:throwError,timer:timer,using:using,zip:zip,scheduled:scheduled,EMPTY:EMPTY,NEVER:NEVER,config:config}),Transport_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.channel=e.channel,this.channelName=e.channelName,this.subject=new _esm5.Subject,this.subscribers=new Map,this.options=e.other}get listenerCount(){return this.subject.observers.length||this.subscribers.size}bind(e){this.observer=e}send(e){this.observer.next(e)}on(e){this.subscribers.set(e,this.subject.subscribe(t=>e(null,t),t=>e(t,null)))}once(e){const t=this.subject.subscribe(r=>{e(null,r),t.unsubscribe()},r=>{e(r,null),t.unsubscribe()})}removeListener(e){this.subscribers.get(e).unsubscribe(),this.subscribers.delete(e)}removeAllListeners(){for(const[e]of this.subscribers)this.removeListener(e);this.subscribers.clear()}}});unwrapExports(Transport_1);var lib=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(DIContainer_1),i=r(Stash_1),o=r(Transport_1);t.default={DIContainer:n.default,Stash:i.default,Transport:o.default}}),runtime=unwrapExports(lib),helpers=createCommonjsModule(function(e,t){var r=t.ValidationError=function(e,t,r,n,i,o){n&&(this.property=n),e&&(this.message=e),r&&(r.id?this.schema=r.id:this.schema=r),t&&(this.instance=t),this.name=i,this.argument=o,this.stack=this.toString()};r.prototype.toString=function(){return this.property+" "+this.message};var n=t.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&!0===r.disableFormat};function i(e,t){return t+": "+e.toString()+"\n"}n.prototype.addError=function(e){var t;if("string"==typeof e)t=new r(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new r(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},n.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)},n.prototype.toString=function(e){return this.errors.map(i).join("")},Object.defineProperty(n.prototype,"valid",{get:function(){return!this.errors.length}});var o=t.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};o.prototype=Object.create(Error.prototype,{constructor:{value:o,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var s=t.SchemaContext=function(e,t,r,n,i){this.schema=e,this.options=t,this.propertyPath=r,this.base=n,this.schemas=i};s.prototype.resolve=function(e){return Url.resolve(this.base,e)},s.prototype.makeChild=function(e,t){var r=void 0===t?this.propertyPath:this.propertyPath+c(t),n=Url.resolve(this.base,e.id||""),i=new s(e,this.options,r,n,Object.create(this.schemas));return e.id&&!i.schemas[n]&&(i.schemas[n]=e),i};var a=t.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};a.regexp=a.regex,a.pattern=a.regex,a.ipv4=a["ip-address"],t.isFormat=function(e,t,r){if("string"==typeof e&&void 0!==a[t]){if(a[t]instanceof RegExp)return a[t].test(e);if("function"==typeof a[t])return a[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var c=t.makeSuffix=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};function u(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(function(e,t,r,n){"object"==typeof r?t[n]=u(e[n],r):-1===e.indexOf(r)&&t.push(r)}.bind(null,e,n))):(e&&"object"==typeof e&&Object.keys(e).forEach(function(e,t,r){t[r]=e[r]}.bind(null,e,n)),Object.keys(t).forEach(function(e,t,r,n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=u(e[n],t[n]):r[n]=t[n]}.bind(null,e,t,n))),n}function f(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}t.deepCompareStrict=function e(t,r){if(typeof t!=typeof r)return!1;if(t instanceof Array)return r instanceof Array&&(t.length===r.length&&t.every(function(n,i){return e(t[i],r[i])}));if("object"==typeof t){if(!t||!r)return t===r;var n=Object.keys(t),i=Object.keys(r);return n.length===i.length&&n.every(function(n){return e(t[n],r[n])})}return t===r},e.exports.deepMerge=u,t.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var i=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(i in e))return;e=e[i]}return e},t.encodePath=function(e){return e.map(f).join("")},t.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;"number"!=typeof e&&(e=Number(e));var r=e.toString().split("e");if(2===r.length){if("-"!==r[1][0])return t;t=Number(r[1].slice(1))}var n=r[0].split(".");return 2===n.length&&(t+=n[1].length),t}}),helpers_1=helpers.ValidationError,helpers_2=helpers.ValidatorResult,helpers_3=helpers.SchemaError,helpers_4=helpers.SchemaContext,helpers_5=helpers.FORMAT_REGEXPS,helpers_6=helpers.isFormat,helpers_7=helpers.makeSuffix,helpers_8=helpers.deepCompareStrict,helpers_9=helpers.deepMerge,helpers_10=helpers.objectGetPath,helpers_11=helpers.encodePath,helpers_12=helpers.getDecimalPlaces,ValidatorResult=helpers.ValidatorResult,SchemaError=helpers.SchemaError,attribute={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0}},validators=attribute.validators={};function testSchemaNoThrow(e,t,r,n,i){var o=t.throwError;t.throwError=!1;var s=this.validateSchema(e,i,t,r);return t.throwError=o,!s.valid&&n instanceof Function&&n(s),s.valid}function testAdditionalProperty(e,t,r,n,i,o){if(this.types.object(e)&&(!t.properties||void 0===t.properties[i]))if(!1===t.additionalProperties)o.addError({name:"additionalProperties",argument:i,message:"additionalProperty "+JSON.stringify(i)+" exists in instance when not allowed"});else{var s=t.additionalProperties||{};"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,i,s,r,n);var a=this.validateSchema(e[i],s,r,n.makeChild(s,i));a.instance!==o.instance[i]&&(o.instance[i]=a.instance),o.importErrors(a)}}validators.type=function(e,t,r,n){if(void 0===e)return null;var i=new ValidatorResult(e,t,r,n),o=Array.isArray(t.type)?t.type:[t.type];if(!o.some(this.testType.bind(this,e,t,r,n))){var s=o.map(function(e){return e.id&&"<"+e.id+">"||e+""});i.addError({name:"type",argument:s,message:"is not of a type(s) "+s})}return i},validators.anyOf=function(e,t,r,n){if(void 0===e)return null;var i=new ValidatorResult(e,t,r,n),o=new ValidatorResult(e,t,r,n);if(!Array.isArray(t.anyOf))throw new SchemaError("anyOf must be an array");if(!t.anyOf.some(testSchemaNoThrow.bind(this,e,r,n,function(e){o.importErrors(e)}))){var s=t.anyOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});r.nestedErrors&&i.importErrors(o),i.addError({name:"anyOf",argument:s,message:"is not any of "+s.join(",")})}return i},validators.allOf=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.allOf))throw new SchemaError("allOf must be an array");var i=new ValidatorResult(e,t,r,n),o=this;return t.allOf.forEach(function(t,s){var a=o.validateSchema(e,t,r,n);if(!a.valid){var c=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+s+"]";i.addError({name:"allOf",argument:{id:c,length:a.errors.length,valid:a},message:"does not match allOf schema "+c+" with "+a.errors.length+" error[s]:"}),i.importErrors(a)}}),i},validators.oneOf=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.oneOf))throw new SchemaError("oneOf must be an array");var i=new ValidatorResult(e,t,r,n),o=new ValidatorResult(e,t,r,n),s=t.oneOf.filter(testSchemaNoThrow.bind(this,e,r,n,function(e){o.importErrors(e)})).length,a=t.oneOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});return 1!==s&&(r.nestedErrors&&i.importErrors(o),i.addError({name:"oneOf",argument:a,message:"is not exactly one from "+a.join(",")})),i},validators.properties=function(e,t,r,n){if(this.types.object(e)){var i=new ValidatorResult(e,t,r,n),o=t.properties||{};for(var s in o){"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,s,o[s],r,n);var a=Object.hasOwnProperty.call(e,s)?e[s]:void 0,c=this.validateSchema(a,o[s],r,n.makeChild(o[s],s));c.instance!==i.instance[s]&&(i.instance[s]=c.instance),i.importErrors(c)}return i}},validators.patternProperties=function(e,t,r,n){if(this.types.object(e)){var i=new ValidatorResult(e,t,r,n),o=t.patternProperties||{};for(var s in e){var a=!0;for(var c in o){if(new RegExp(c).test(s)){a=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,s,o[c],r,n);var u=this.validateSchema(e[s],o[c],r,n.makeChild(o[c],s));u.instance!==i.instance[s]&&(i.instance[s]=u.instance),i.importErrors(u)}}a&&testAdditionalProperty.call(this,e,t,r,n,s,i)}return i}},validators.additionalProperties=function(e,t,r,n){if(this.types.object(e)){if(t.patternProperties)return null;var i=new ValidatorResult(e,t,r,n);for(var o in e)testAdditionalProperty.call(this,e,t,r,n,o,i);return i}},validators.minProperties=function(e,t,r,n){if(this.types.object(e)){var i=new ValidatorResult(e,t,r,n);return Object.keys(e).length>=t.minProperties||i.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),i}},validators.maxProperties=function(e,t,r,n){if(this.types.object(e)){var i=new ValidatorResult(e,t,r,n);return Object.keys(e).length<=t.maxProperties||i.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),i}},validators.items=function(e,t,r,n){var i=this;if(this.types.array(e)&&t.items){var o=new ValidatorResult(e,t,r,n);return e.every(function(e,s){var a=Array.isArray(t.items)?t.items[s]||t.additionalItems:t.items;if(void 0===a)return!0;if(!1===a)return o.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=i.validateSchema(e,a,r,n.makeChild(a,s));return c.instance!==o.instance[s]&&(o.instance[s]=c.instance),o.importErrors(c),!0}),o}},validators.minimum=function(e,t,r,n){if(this.types.number(e)){var i=new ValidatorResult(e,t,r,n);return(t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum:e>=t.minimum)||i.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),i}},validators.maximum=function(e,t,r,n){if(this.types.number(e)){var i=new ValidatorResult(e,t,r,n);return(t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum:e<=t.maximum)||i.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),i}};var validateMultipleOfOrDivisbleBy=function(e,t,r,n,i,o){if(this.types.number(e)){var s=t[i];if(0==s)throw new SchemaError(i+" cannot be zero");var a=new ValidatorResult(e,t,r,n),c=helpers.getDecimalPlaces(e),u=helpers.getDecimalPlaces(s),f=Math.max(c,u),l=Math.pow(10,f);return Math.round(e*l)%Math.round(s*l)!=0&&a.addError({name:i,argument:s,message:o+JSON.stringify(s)}),a}};function testArrays(e,t,r){var n,i=r.length;for(n=t+1;n<i;n++)if(helpers.deepCompareStrict(e,r[n]))return!1;return!0}validators.multipleOf=function(e,t,r,n){return validateMultipleOfOrDivisbleBy.call(this,e,t,r,n,"multipleOf","is not a multiple of (divisible by) ")},validators.divisibleBy=function(e,t,r,n){return validateMultipleOfOrDivisbleBy.call(this,e,t,r,n,"divisibleBy","is not divisible by (multiple of) ")},validators.required=function(e,t,r,n){var i=new ValidatorResult(e,t,r,n);return void 0===e&&!0===t.required?i.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach(function(t){void 0===e[t]&&i.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})}),i},validators.pattern=function(e,t,r,n){if(this.types.string(e)){var i=new ValidatorResult(e,t,r,n);return e.match(t.pattern)||i.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),i}},validators.format=function(e,t,r,n){if(void 0!==e){var i=new ValidatorResult(e,t,r,n);return i.disableFormat||helpers.isFormat(e,t.format,this)||i.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),i}},validators.minLength=function(e,t,r,n){if(this.types.string(e)){var i=new ValidatorResult(e,t,r,n),o=e.match(/[\uDC00-\uDFFF]/g);return e.length-(o?o.length:0)>=t.minLength||i.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),i}},validators.maxLength=function(e,t,r,n){if(this.types.string(e)){var i=new ValidatorResult(e,t,r,n),o=e.match(/[\uDC00-\uDFFF]/g);return e.length-(o?o.length:0)<=t.maxLength||i.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),i}},validators.minItems=function(e,t,r,n){if(this.types.array(e)){var i=new ValidatorResult(e,t,r,n);return e.length>=t.minItems||i.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),i}},validators.maxItems=function(e,t,r,n){if(this.types.array(e)){var i=new ValidatorResult(e,t,r,n);return e.length<=t.maxItems||i.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),i}},validators.uniqueItems=function(e,t,r,n){if(this.types.array(e)){var i=new ValidatorResult(e,t,r,n);return e.every(function(e,t,r){for(var n=t+1;n<r.length;n++)if(helpers.deepCompareStrict(e,r[n]))return!1;return!0})||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i}},validators.uniqueItems=function(e,t,r,n){if(this.types.array(e)){var i=new ValidatorResult(e,t,r,n);return e.every(testArrays)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i}},validators.dependencies=function(e,t,r,n){if(this.types.object(e)){var i=new ValidatorResult(e,t,r,n);for(var o in t.dependencies)if(void 0!==e[o]){var s=t.dependencies[o],a=n.makeChild(s,o);if("string"==typeof s&&(s=[s]),Array.isArray(s))s.forEach(function(t){void 0===e[t]&&i.addError({name:"dependencies",argument:a.propertyPath,message:"property "+t+" not found, required by "+a.propertyPath})});else{var c=this.validateSchema(e,s,r,a);i.instance!==c.instance&&(i.instance=c.instance),c&&c.errors.length&&(i.addError({name:"dependencies",argument:a.propertyPath,message:"does not meet dependency required by "+a.propertyPath}),i.importErrors(c))}}return i}},validators.enum=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.enum))throw new SchemaError("enum expects an array",t);var i=new ValidatorResult(e,t,r,n);return t.enum.some(helpers.deepCompareStrict.bind(null,e))||i.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),i},validators.const=function(e,t,r,n){if(void 0===e)return null;var i=new ValidatorResult(e,t,r,n);return helpers.deepCompareStrict(t.const,e)||i.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),i},validators.not=validators.disallow=function(e,t,r,n){var i=this;if(void 0===e)return null;var o=new ValidatorResult(e,t,r,n),s=t.not||t.disallow;return s?(Array.isArray(s)||(s=[s]),s.forEach(function(s){if(i.testType(e,t,r,n,s)){var a=s&&s.id&&"<"+s.id+">"||s;o.addError({name:"not",argument:a,message:"is of prohibited type "+a})}}),o):null};var attribute_1=attribute,SchemaScanResult_1=SchemaScanResult;function SchemaScanResult(e,t){this.id=e,this.ref=t}var scan_1=function(e,t){function r(e,t){if(t&&"object"==typeof t)if(t.$ref){var a=Url.resolve(e,t.$ref);s[a]=s[a]?s[a]+1:0}else{var c=t.id?Url.resolve(e,t.id):e;if(c){if(c.indexOf("#")<0&&(c+="#"),o[c]){if(!helpers.deepCompareStrict(o[c],t))throw new Error("Schema <"+t+"> already exists with different definition");return o[c]}o[c]=t,"#"==c[c.length-1]&&(o[c.substring(0,c.length-1)]=t)}n(c+"/items",t.items instanceof Array?t.items:[t.items]),n(c+"/extends",t.extends instanceof Array?t.extends:[t.extends]),r(c+"/additionalItems",t.additionalItems),i(c+"/properties",t.properties),r(c+"/additionalProperties",t.additionalProperties),i(c+"/definitions",t.definitions),i(c+"/patternProperties",t.patternProperties),i(c+"/dependencies",t.dependencies),n(c+"/disallow",t.disallow),n(c+"/allOf",t.allOf),n(c+"/anyOf",t.anyOf),n(c+"/oneOf",t.oneOf),r(c+"/not",t.not)}}function n(e,t){if(t instanceof Array)for(var n=0;n<t.length;n++)r(e+"/"+n,t[n])}function i(e,t){if(t&&"object"==typeof t)for(var n in t)r(e+"/"+n,t[n])}var o={},s={};return r(e,t),new SchemaScanResult(o,s)},scan={SchemaScanResult:SchemaScanResult_1,scan:scan_1},scanSchema=scan.scan,ValidatorResult$1=helpers.ValidatorResult,SchemaError$1=helpers.SchemaError,SchemaContext=helpers.SchemaContext,anonymousBase="/",Validator=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(types),this.attributes=Object.create(attribute_1.validators)};function shouldResolve(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}Validator.prototype.customFormats={},Validator.prototype.schemas=null,Validator.prototype.types=null,Validator.prototype.attributes=null,Validator.prototype.unresolvedRefs=null,Validator.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var n=scanSchema(t||anonymousBase,e),i=t||e.id;for(var o in n.id)this.schemas[o]=n.id[o];for(var o in n.ref)this.unresolvedRefs.push(o);return this.unresolvedRefs=this.unresolvedRefs.filter(function(e){return void 0===r.schemas[e]}),this.schemas[i]},Validator.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},Validator.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},Validator.prototype.setSchemas=function(e){this.schemas=e},Validator.prototype.getSchema=function(e){return this.schemas[e]},Validator.prototype.validate=function(e,t,r,n){r||(r={});var i=r.propertyName||"instance",o=Url.resolve(r.base||anonymousBase,t.id||"");if(!n){(n=new SchemaContext(t,r,i,o,Object.create(this.schemas))).schemas[o]||(n.schemas[o]=t);var s=scanSchema(o,t);for(var a in s.id){var c=s.id[a];n.schemas[a]=c}}if(t){var u=this.validateSchema(e,t,r,n);if(!u)throw new Error("Result undefined");return u}throw new SchemaError$1("no schema specified",t)},Validator.prototype.validateSchema=function(e,t,r,n){var i,o=new ValidatorResult$1(e,t,r,n);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(t.extends instanceof Array){var s={schema:t,ctx:n};t.extends.forEach(this.schemaTraverser.bind(this,s)),t=s.schema,s.schema=null,s.ctx=null,s=null}else t=helpers.deepMerge(t,this.superResolve(t.extends,n));if(i=shouldResolve(t)){var a=this.resolve(t,i,n),c=new SchemaContext(a.subschema,r,n.propertyPath,a.switchSchema,n.schemas);return this.validateSchema(e,a.subschema,r,c)}var u=r&&r.skipAttributes||[];for(var f in t)if(!attribute_1.ignoreProperties[f]&&u.indexOf(f)<0){var l=null,d=this.attributes[f];if(d)l=d.call(this,e,t,r,n);else if(!1===r.allowUnknownAttributes)throw new SchemaError$1("Unsupported attribute: "+f,t);l&&o.importErrors(l)}if("function"==typeof r.rewrite){var h=r.rewrite.call(this,e,t,r,n);o.instance=h}return o},Validator.prototype.schemaTraverser=function(e,t){e.schema=helpers.deepMerge(e.schema,this.superResolve(t,e.ctx))},Validator.prototype.superResolve=function(e,t){var r;return(r=shouldResolve(e))?this.resolve(e,r,t).subschema:e},Validator.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var n=Url.parse(t),i=n&&n.hash,o=i&&i.length&&t.substr(0,t.length-i.length);if(!o||!r.schemas[o])throw new SchemaError$1("no such schema <"+t+">",e);var s=helpers.objectGetPath(r.schemas[o],i.substr(1));if(void 0===s)throw new SchemaError$1("no such schema "+i+" located in <"+o+">",e);return{subschema:s,switchSchema:t}},Validator.prototype.testType=function(e,t,r,n,i){if("function"==typeof this.types[i])return this.types[i].call(this,e);if(i&&"object"==typeof i){var o=this.validateSchema(e,i,r,n);return void 0===o||!(o&&o.errors.length)}return!0};var types=Validator.prototype.types={};types.string=function(e){return"string"==typeof e},types.number=function(e){return"number"==typeof e&&isFinite(e)},types.integer=function(e){return"number"==typeof e&&e%1==0},types.boolean=function(e){return"boolean"==typeof e},types.array=function(e){return Array.isArray(e)},types.null=function(e){return null===e},types.date=function(e){return e instanceof Date},types.any=function(e){return!0},types.object=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)};var validator=Validator,lib$1=createCommonjsModule(function(e){var t=e.exports.Validator=validator;e.exports.ValidatorResult=helpers.ValidatorResult,e.exports.ValidationError=helpers.ValidationError,e.exports.SchemaError=helpers.SchemaError,e.exports.SchemaScanResult=scan.SchemaScanResult,e.exports.scan=scan.scan,e.exports.validate=function(e,r,n){return(new t).validate(e,r,n)}}),lib_1=lib$1.Validator,lib_2=lib$1.ValidatorResult,lib_3=lib$1.ValidationError,lib_4=lib$1.SchemaError,lib_5=lib$1.SchemaScanResult,lib_6=lib$1.scan,lib_7=lib$1.validate,safeBuffer=createCommonjsModule(function(e,t){var r=buffer$1.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=buffer$1:(n(buffer$1,t),t.Buffer=i),n(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return buffer$1.SlowBuffer(e)}}),safeBuffer_1=safeBuffer.Buffer;const Buffer$1=safeBuffer.Buffer;var baseX=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);t.fill(255);for(let r=0;r<e.length;r++){const n=e.charAt(r),i=n.charCodeAt(0);if(255!==t[i])throw new TypeError(n+" is ambiguous");t[i]=r}const r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function s(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return Buffer$1.alloc(0);let o=0;if(" "===e[o])return;let s=0,a=0;for(;e[o]===n;)s++,o++;const c=(e.length-o)*i+1>>>0,u=new Uint8Array(c);for(;e[o];){let n=t[e.charCodeAt(o)];if(255===n)return;let i=0;for(let e=c-1;(0!==n||i<a)&&-1!==e;e--,i++)n+=r*u[e]>>>0,u[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw new Error("Non-zero carry");a=i,o++}if(" "===e[o])return;let f=c-a;for(;f!==c&&0===u[f];)f++;const l=Buffer$1.allocUnsafe(s+(c-f));l.fill(0,0,s);let d=s;for(;f!==c;)l[d++]=u[f++];return l}return{encode:function(t){if(!Buffer$1.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";let i=0,s=0,a=0;const c=t.length;for(;a!==c&&0===t[a];)a++,i++;const u=(c-a)*o+1>>>0,f=new Uint8Array(u);for(;a!==c;){let e=t[a],n=0;for(let t=u-1;(0!==e||n<s)&&-1!==t;t--,n++)e+=256*f[t]>>>0,f[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");s=n,a++}let l=u-s;for(;l!==u&&0===f[l];)l++;let d=n.repeat(i);for(;l<u;++l)d+=e.charAt(f[l]);return d},decodeUnsafe:s,decode:function(e){const t=s(e);if(t)return t;throw new Error("Non-base"+r+" character")}}},ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58=baseX(ALPHABET),names=Object.freeze({id:0,sha1:17,"sha2-256":18,"sha2-512":19,"dbl-sha2-256":86,"sha3-224":23,"sha3-256":22,"sha3-384":21,"sha3-512":20,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,"murmur3-128":34,"murmur3-32":35,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"Skein256-8":45825,"Skein256-16":45826,"Skein256-24":45827,"Skein256-32":45828,"Skein256-40":45829,"Skein256-48":45830,"Skein256-56":45831,"Skein256-64":45832,"Skein256-72":45833,"Skein256-80":45834,"Skein256-88":45835,"Skein256-96":45836,"Skein256-104":45837,"Skein256-112":45838,"Skein256-120":45839,"Skein256-128":45840,"Skein256-136":45841,"Skein256-144":45842,"Skein256-152":45843,"Skein256-160":45844,"Skein256-168":45845,"Skein256-176":45846,"Skein256-184":45847,"Skein256-192":45848,"Skein256-200":45849,"Skein256-208":45850,"Skein256-216":45851,"Skein256-224":45852,"Skein256-232":45853,"Skein256-240":45854,"Skein256-248":45855,"Skein256-256":45856,"Skein512-8":45857,"Skein512-16":45858,"Skein512-24":45859,"Skein512-32":45860,"Skein512-40":45861,"Skein512-48":45862,"Skein512-56":45863,"Skein512-64":45864,"Skein512-72":45865,"Skein512-80":45866,"Skein512-88":45867,"Skein512-96":45868,"Skein512-104":45869,"Skein512-112":45870,"Skein512-120":45871,"Skein512-128":45872,"Skein512-136":45873,"Skein512-144":45874,"Skein512-152":45875,"Skein512-160":45876,"Skein512-168":45877,"Skein512-176":45878,"Skein512-184":45879,"Skein512-192":45880,"Skein512-200":45881,"Skein512-208":45882,"Skein512-216":45883,"Skein512-224":45884,"Skein512-232":45885,"Skein512-240":45886,"Skein512-248":45887,"Skein512-256":45888,"Skein512-264":45889,"Skein512-272":45890,"Skein512-280":45891,"Skein512-288":45892,"Skein512-296":45893,"Skein512-304":45894,"Skein512-312":45895,"Skein512-320":45896,"Skein512-328":45897,"Skein512-336":45898,"Skein512-344":45899,"Skein512-352":45900,"Skein512-360":45901,"Skein512-368":45902,"Skein512-376":45903,"Skein512-384":45904,"Skein512-392":45905,"Skein512-400":45906,"Skein512-408":45907,"Skein512-416":45908,"Skein512-424":45909,"Skein512-432":45910,"Skein512-440":45911,"Skein512-448":45912,"Skein512-456":45913,"Skein512-464":45914,"Skein512-472":45915,"Skein512-480":45916,"Skein512-488":45917,"Skein512-496":45918,"Skein512-504":45919,"Skein512-512":45920,"Skein1024-8":45921,"Skein1024-16":45922,"Skein1024-24":45923,"Skein1024-32":45924,"Skein1024-40":45925,"Skein1024-48":45926,"Skein1024-56":45927,"Skein1024-64":45928,"Skein1024-72":45929,"Skein1024-80":45930,"Skein1024-88":45931,"Skein1024-96":45932,"Skein1024-104":45933,"Skein1024-112":45934,"Skein1024-120":45935,"Skein1024-128":45936,"Skein1024-136":45937,"Skein1024-144":45938,"Skein1024-152":45939,"Skein1024-160":45940,"Skein1024-168":45941,"Skein1024-176":45942,"Skein1024-184":45943,"Skein1024-192":45944,"Skein1024-200":45945,"Skein1024-208":45946,"Skein1024-216":45947,"Skein1024-224":45948,"Skein1024-232":45949,"Skein1024-240":45950,"Skein1024-248":45951,"Skein1024-256":45952,"Skein1024-264":45953,"Skein1024-272":45954,"Skein1024-280":45955,"Skein1024-288":45956,"Skein1024-296":45957,"Skein1024-304":45958,"Skein1024-312":45959,"Skein1024-320":45960,"Skein1024-328":45961,"Skein1024-336":45962,"Skein1024-344":45963,"Skein1024-352":45964,"Skein1024-360":45965,"Skein1024-368":45966,"Skein1024-376":45967,"Skein1024-384":45968,"Skein1024-392":45969,"Skein1024-400":45970,"Skein1024-408":45971,"Skein1024-416":45972,"Skein1024-424":45973,"Skein1024-432":45974,"Skein1024-440":45975,"Skein1024-448":45976,"Skein1024-456":45977,"Skein1024-464":45978,"Skein1024-472":45979,"Skein1024-480":45980,"Skein1024-488":45981,"Skein1024-496":45982,"Skein1024-504":45983,"Skein1024-512":45984,"Skein1024-520":45985,"Skein1024-528":45986,"Skein1024-536":45987,"Skein1024-544":45988,"Skein1024-552":45989,"Skein1024-560":45990,"Skein1024-568":45991,"Skein1024-576":45992,"Skein1024-584":45993,"Skein1024-592":45994,"Skein1024-600":45995,"Skein1024-608":45996,"Skein1024-616":45997,"Skein1024-624":45998,"Skein1024-632":45999,"Skein1024-640":46e3,"Skein1024-648":46001,"Skein1024-656":46002,"Skein1024-664":46003,"Skein1024-672":46004,"Skein1024-680":46005,"Skein1024-688":46006,"Skein1024-696":46007,"Skein1024-704":46008,"Skein1024-712":46009,"Skein1024-720":46010,"Skein1024-728":46011,"Skein1024-736":46012,"Skein1024-744":46013,"Skein1024-752":46014,"Skein1024-760":46015,"Skein1024-768":46016,"Skein1024-776":46017,"Skein1024-784":46018,"Skein1024-792":46019,"Skein1024-800":46020,"Skein1024-808":46021,"Skein1024-816":46022,"Skein1024-824":46023,"Skein1024-832":46024,"Skein1024-840":46025,"Skein1024-848":46026,"Skein1024-856":46027,"Skein1024-864":46028,"Skein1024-872":46029,"Skein1024-880":46030,"Skein1024-888":46031,"Skein1024-896":46032,"Skein1024-904":46033,"Skein1024-912":46034,"Skein1024-920":46035,"Skein1024-928":46036,"Skein1024-936":46037,"Skein1024-944":46038,"Skein1024-952":46039,"Skein1024-960":46040,"Skein1024-968":46041,"Skein1024-976":46042,"Skein1024-984":46043,"Skein1024-992":46044,"Skein1024-1000":46045,"Skein1024-1008":46046,"Skein1024-1016":46047,"Skein1024-1024":46048}),codes=Object.freeze({17:"sha1",18:"sha2-256",19:"sha2-512",86:"dbl-sha2-256",23:"sha3-224",22:"sha3-256",21:"sha3-384",20:"sha3-512",24:"shake-128",25:"shake-256",26:"keccak-224",27:"keccak-256",28:"keccak-384",29:"keccak-512",34:"murmur3-128",35:"murmur3-32",45569:"blake2b-8",45570:"blake2b-16",45571:"blake2b-24",45572:"blake2b-32",45573:"blake2b-40",45574:"blake2b-48",45575:"blake2b-56",45576:"blake2b-64",45577:"blake2b-72",45578:"blake2b-80",45579:"blake2b-88",45580:"blake2b-96",45581:"blake2b-104",45582:"blake2b-112",45583:"blake2b-120",45584:"blake2b-128",45585:"blake2b-136",45586:"blake2b-144",45587:"blake2b-152",45588:"blake2b-160",45589:"blake2b-168",45590:"blake2b-176",45591:"blake2b-184",45592:"blake2b-192",45593:"blake2b-200",45594:"blake2b-208",45595:"blake2b-216",45596:"blake2b-224",45597:"blake2b-232",45598:"blake2b-240",45599:"blake2b-248",45600:"blake2b-256",45601:"blake2b-264",45602:"blake2b-272",45603:"blake2b-280",45604:"blake2b-288",45605:"blake2b-296",45606:"blake2b-304",45607:"blake2b-312",45608:"blake2b-320",45609:"blake2b-328",45610:"blake2b-336",45611:"blake2b-344",45612:"blake2b-352",45613:"blake2b-360",45614:"blake2b-368",45615:"blake2b-376",45616:"blake2b-384",45617:"blake2b-392",45618:"blake2b-400",45619:"blake2b-408",45620:"blake2b-416",45621:"blake2b-424",45622:"blake2b-432",45623:"blake2b-440",45624:"blake2b-448",45625:"blake2b-456",45626:"blake2b-464",45627:"blake2b-472",45628:"blake2b-480",45629:"blake2b-488",45630:"blake2b-496",45631:"blake2b-504",45632:"blake2b-512",45633:"blake2s-8",45634:"blake2s-16",45635:"blake2s-24",45636:"blake2s-32",45637:"blake2s-40",45638:"blake2s-48",45639:"blake2s-56",45640:"blake2s-64",45641:"blake2s-72",45642:"blake2s-80",45643:"blake2s-88",45644:"blake2s-96",45645:"blake2s-104",45646:"blake2s-112",45647:"blake2s-120",45648:"blake2s-128",45649:"blake2s-136",45650:"blake2s-144",45651:"blake2s-152",45652:"blake2s-160",45653:"blake2s-168",45654:"blake2s-176",45655:"blake2s-184",45656:"blake2s-192",45657:"blake2s-200",45658:"blake2s-208",45659:"blake2s-216",45660:"blake2s-224",45661:"blake2s-232",45662:"blake2s-240",45663:"blake2s-248",45664:"blake2s-256",45825:"Skein256-8",45826:"Skein256-16",45827:"Skein256-24",45828:"Skein256-32",45829:"Skein256-40",45830:"Skein256-48",45831:"Skein256-56",45832:"Skein256-64",45833:"Skein256-72",45834:"Skein256-80",45835:"Skein256-88",45836:"Skein256-96",45837:"Skein256-104",45838:"Skein256-112",45839:"Skein256-120",45840:"Skein256-128",45841:"Skein256-136",45842:"Skein256-144",45843:"Skein256-152",45844:"Skein256-160",45845:"Skein256-168",45846:"Skein256-176",45847:"Skein256-184",45848:"Skein256-192",45849:"Skein256-200",45850:"Skein256-208",45851:"Skein256-216",45852:"Skein256-224",45853:"Skein256-232",45854:"Skein256-240",45855:"Skein256-248",45856:"Skein256-256",45857:"Skein512-8",45858:"Skein512-16",45859:"Skein512-24",45860:"Skein512-32",45861:"Skein512-40",45862:"Skein512-48",45863:"Skein512-56",45864:"Skein512-64",45865:"Skein512-72",45866:"Skein512-80",45867:"Skein512-88",45868:"Skein512-96",45869:"Skein512-104",45870:"Skein512-112",45871:"Skein512-120",45872:"Skein512-128",45873:"Skein512-136",45874:"Skein512-144",45875:"Skein512-152",45876:"Skein512-160",45877:"Skein512-168",45878:"Skein512-176",45879:"Skein512-184",45880:"Skein512-192",45881:"Skein512-200",45882:"Skein512-208",45883:"Skein512-216",45884:"Skein512-224",45885:"Skein512-232",45886:"Skein512-240",45887:"Skein512-248",45888:"Skein512-256",45889:"Skein512-264",45890:"Skein512-272",45891:"Skein512-280",45892:"Skein512-288",45893:"Skein512-296",45894:"Skein512-304",45895:"Skein512-312",45896:"Skein512-320",45897:"Skein512-328",45898:"Skein512-336",45899:"Skein512-344",45900:"Skein512-352",45901:"Skein512-360",45902:"Skein512-368",45903:"Skein512-376",45904:"Skein512-384",45905:"Skein512-392",45906:"Skein512-400",45907:"Skein512-408",45908:"Skein512-416",45909:"Skein512-424",45910:"Skein512-432",45911:"Skein512-440",45912:"Skein512-448",45913:"Skein512-456",45914:"Skein512-464",45915:"Skein512-472",45916:"Skein512-480",45917:"Skein512-488",45918:"Skein512-496",45919:"Skein512-504",45920:"Skein512-512",45921:"Skein1024-8",45922:"Skein1024-16",45923:"Skein1024-24",45924:"Skein1024-32",45925:"Skein1024-40",45926:"Skein1024-48",45927:"Skein1024-56",45928:"Skein1024-64",45929:"Skein1024-72",45930:"Skein1024-80",45931:"Skein1024-88",45932:"Skein1024-96",45933:"Skein1024-104",45934:"Skein1024-112",45935:"Skein1024-120",45936:"Skein1024-128",45937:"Skein1024-136",45938:"Skein1024-144",45939:"Skein1024-152",45940:"Skein1024-160",45941:"Skein1024-168",45942:"Skein1024-176",45943:"Skein1024-184",45944:"Skein1024-192",45945:"Skein1024-200",45946:"Skein1024-208",45947:"Skein1024-216",45948:"Skein1024-224",45949:"Skein1024-232",45950:"Skein1024-240",45951:"Skein1024-248",45952:"Skein1024-256",45953:"Skein1024-264",45954:"Skein1024-272",45955:"Skein1024-280",45956:"Skein1024-288",45957:"Skein1024-296",45958:"Skein1024-304",45959:"Skein1024-312",45960:"Skein1024-320",45961:"Skein1024-328",45962:"Skein1024-336",45963:"Skein1024-344",45964:"Skein1024-352",45965:"Skein1024-360",45966:"Skein1024-368",45967:"Skein1024-376",45968:"Skein1024-384",45969:"Skein1024-392",45970:"Skein1024-400",45971:"Skein1024-408",45972:"Skein1024-416",45973:"Skein1024-424",45974:"Skein1024-432",45975:"Skein1024-440",45976:"Skein1024-448",45977:"Skein1024-456",45978:"Skein1024-464",45979:"Skein1024-472",45980:"Skein1024-480",45981:"Skein1024-488",45982:"Skein1024-496",45983:"Skein1024-504",45984:"Skein1024-512",45985:"Skein1024-520",45986:"Skein1024-528",45987:"Skein1024-536",45988:"Skein1024-544",45989:"Skein1024-552",45990:"Skein1024-560",45991:"Skein1024-568",45992:"Skein1024-576",45993:"Skein1024-584",45994:"Skein1024-592",45995:"Skein1024-600",45996:"Skein1024-608",45997:"Skein1024-616",45998:"Skein1024-624",45999:"Skein1024-632",46000:"Skein1024-640",46001:"Skein1024-648",46002:"Skein1024-656",46003:"Skein1024-664",46004:"Skein1024-672",46005:"Skein1024-680",46006:"Skein1024-688",46007:"Skein1024-696",46008:"Skein1024-704",46009:"Skein1024-712",46010:"Skein1024-720",46011:"Skein1024-728",46012:"Skein1024-736",46013:"Skein1024-744",46014:"Skein1024-752",46015:"Skein1024-760",46016:"Skein1024-768",46017:"Skein1024-776",46018:"Skein1024-784",46019:"Skein1024-792",46020:"Skein1024-800",46021:"Skein1024-808",46022:"Skein1024-816",46023:"Skein1024-824",46024:"Skein1024-832",46025:"Skein1024-840",46026:"Skein1024-848",46027:"Skein1024-856",46028:"Skein1024-864",46029:"Skein1024-872",46030:"Skein1024-880",46031:"Skein1024-888",46032:"Skein1024-896",46033:"Skein1024-904",46034:"Skein1024-912",46035:"Skein1024-920",46036:"Skein1024-928",46037:"Skein1024-936",46038:"Skein1024-944",46039:"Skein1024-952",46040:"Skein1024-960",46041:"Skein1024-968",46042:"Skein1024-976",46043:"Skein1024-984",46044:"Skein1024-992",46045:"Skein1024-1000",46046:"Skein1024-1008",46047:"Skein1024-1016",46048:"Skein1024-1024"}),defaultLengths=Object.freeze({17:20,18:32,19:64,86:32,23:28,22:32,21:48,20:64,24:32,25:64,26:28,27:32,28:48,29:64,34:32,45569:1,45570:2,45571:3,45572:4,45573:5,45574:6,45575:7,45576:8,45577:9,45578:10,45579:11,45580:12,45581:13,45582:14,45583:15,45584:16,45585:17,45586:18,45587:19,45588:20,45589:21,45590:22,45591:23,45592:24,45593:25,45594:26,45595:27,45596:28,45597:29,45598:30,45599:31,45600:32,45601:33,45602:34,45603:35,45604:36,45605:37,45606:38,45607:39,45608:40,45609:41,45610:42,45611:43,45612:44,45613:45,45614:46,45615:47,45616:48,45617:49,45618:50,45619:51,45620:52,45621:53,45622:54,45623:55,45624:56,45625:57,45626:58,45627:59,45628:60,45629:61,45630:62,45631:63,45632:64,45633:1,45634:2,45635:3,45636:4,45637:5,45638:6,45639:7,45640:8,45641:9,45642:10,45643:11,45644:12,45645:13,45646:14,45647:15,45648:16,45649:17,45650:18,45651:19,45652:20,45653:21,45654:22,45655:23,45656:24,45657:25,45658:26,45659:27,45660:28,45661:29,45662:30,45663:31,45664:32,45825:1,45826:2,45827:3,45828:4,45829:5,45830:6,45831:7,45832:8,45833:9,45834:10,45835:11,45836:12,45837:13,45838:14,45839:15,45840:16,45841:17,45842:18,45843:19,45844:20,45845:21,45846:22,45847:23,45848:24,45849:25,45850:26,45851:27,45852:28,45853:29,45854:30,45855:31,45856:32,45857:1,45858:2,45859:3,45860:4,45861:5,45862:6,45863:7,45864:8,45865:9,45866:10,45867:11,45868:12,45869:13,45870:14,45871:15,45872:16,45873:17,45874:18,45875:19,45876:20,45877:21,45878:22,45879:23,45880:24,45881:25,45882:26,45883:27,45884:28,45885:29,45886:30,45887:31,45888:32,45889:33,45890:34,45891:35,45892:36,45893:37,45894:38,45895:39,45896:40,45897:41,45898:42,45899:43,45900:44,45901:45,45902:46,45903:47,45904:48,45905:49,45906:50,45907:51,45908:52,45909:53,45910:54,45911:55,45912:56,45913:57,45914:58,45915:59,45916:60,45917:61,45918:62,45919:63,45920:64,45921:1,45922:2,45923:3,45924:4,45925:5,45926:6,45927:7,45928:8,45929:9,45930:10,45931:11,45932:12,45933:13,45934:14,45935:15,45936:16,45937:17,45938:18,45939:19,45940:20,45941:21,45942:22,45943:23,45944:24,45945:25,45946:26,45947:27,45948:28,45949:29,45950:30,45951:31,45952:32,45953:33,45954:34,45955:35,45956:36,45957:37,45958:38,45959:39,45960:40,45961:41,45962:42,45963:43,45964:44,45965:45,45966:46,45967:47,45968:48,45969:49,45970:50,45971:51,45972:52,45973:53,45974:54,45975:55,45976:56,45977:57,45978:58,45979:59,45980:60,45981:61,45982:62,45983:63,45984:64,45985:65,45986:66,45987:67,45988:68,45989:69,45990:70,45991:71,45992:72,45993:73,45994:74,45995:75,45996:76,45997:77,45998:78,45999:79,46000:80,46001:81,46002:82,46003:83,46004:84,46005:85,46006:86,46007:87,46008:88,46009:89,46010:90,46011:91,46012:92,46013:93,46014:94,46015:95,46016:96,46017:97,46018:98,46019:99,46020:100,46021:101,46022:102,46023:103,46024:104,46025:105,46026:106,46027:107,46028:108,46029:109,46030:110,46031:111,46032:112,46033:113,46034:114,46035:115,46036:116,46037:117,46038:118,46039:119,46040:120,46041:121,46042:122,46043:123,46044:124,46045:125,46046:126,46047:127,46048:128}),constants={names:names,codes:codes,defaultLengths:defaultLengths},encode_1=encode,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode(e,t,r){t=t||[];for(var n=r=r||0;e>=INT;)t[r++]=255&e|MSB,e/=128;for(;e&MSBALL;)t[r++]=255&e|MSB,e>>>=7;return t[r]=0|e,encode.bytes=r-n+1,t}var decode=read,MSB$1=128,REST$1=127;function read(e,t){var r,n=0,i=0,o=t=t||0,s=e.length;do{if(o>=s)throw read.bytes=0,new RangeError("Could not decode varint");r=e[o++],n+=i<28?(r&REST$1)<<i:(r&REST$1)*Math.pow(2,i),i+=7}while(r>=MSB$1);return read.bytes=o-t,n}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(e){return e<N1?1:e<N2?2:e<N3?3:e<N4?4:e<N5?5:e<N6?6:e<N7?7:e<N8?8:e<N9?9:10},varint={encode:encode_1,decode:decode,encodingLength:length},src=createCommonjsModule(function(e,t){function r(e){t.decode(e)}t.names=constants.names,t.codes=constants.codes,t.defaultLengths=constants.defaultLengths,t.toHexString=function(e){if(!Buffer.isBuffer(e))throw new Error("must be passed a buffer");return e.toString("hex")},t.fromHexString=function(e){return Buffer.from(e,"hex")},t.toB58String=function(e){if(!Buffer.isBuffer(e))throw new Error("must be passed a buffer");return bs58.encode(e)},t.fromB58String=function(e){let t=e;return Buffer.isBuffer(e)&&(t=e.toString()),Buffer.from(bs58.decode(t))},t.decode=function(e){if(!Buffer.isBuffer(e))throw new Error("multihash must be a Buffer");if(e.length<3)throw new Error("multihash too short. must be > 3 bytes.");let r=varint.decode(e);if(!t.isValidCode(r))throw new Error(`multihash unknown function code: 0x${r.toString(16)}`);e=e.slice(varint.decode.bytes);let n=varint.decode(e);if(n<1)throw new Error(`multihash invalid length: 0x${n.toString(16)}`);if((e=e.slice(varint.decode.bytes)).length!==n)throw new Error(`multihash length inconsistent: 0x${e.toString("hex")}`);return{code:r,name:constants.codes[r],length:n,digest:e}},t.encode=function(e,r,n){if(!e||!r)throw new Error("multihash encode requires at least two args: digest, code");const i=t.coerceCode(r);if(!Buffer.isBuffer(e))throw new Error("digest should be a Buffer");if(null==n&&(n=e.length),n&&e.length!==n)throw new Error("digest length should be equal to specified length.");return Buffer.concat([Buffer.from(varint.encode(i)),Buffer.from(varint.encode(n)),e])},t.coerceCode=function(e){let r=e;if("string"==typeof e){if(!constants.names[e])throw new Error(`Unrecognized hash function named: ${e}`);r=constants.names[e]}if("number"!=typeof r)throw new Error(`Hash function code should be a number. Got: ${r}`);if(!constants.codes[r]&&!t.isAppCode(r))throw new Error(`Unrecognized function code: ${r}`);return r},t.isAppCode=function(e){return e>0&&e<16},t.isValidCode=function(e){return!!t.isAppCode(e)||!!constants.codes[e]},t.validate=r,t.prefix=function(e){return r(e),e.slice(0,2)}}),src_1=src.names,src_2=src.codes,src_3=src.defaultLengths,src_4=src.toHexString,src_5=src.fromHexString,src_6=src.toB58String,src_7=src.fromB58String,src_8=src.decode,src_9=src.encode,src_10=src.coerceCode,src_11=src.isAppCode,src_12=src.isValidCode,src_13=src.validate,src_14=src.prefix;class Base{constructor(e,t,r,n){this.name=e,this.code=t,this.alphabet=n,r&&n&&(this.engine=r(n))}encode(e){return this.engine.encode(e)}decode(e){return this.engine.decode(e)}isImplemented(){return this.engine}}var base=Base,Buffer$2=safeBuffer.Buffer,baseX$1=function(e){for(var t={},r=e.length,n=e.charAt(0),i=0;i<e.length;i++){var o=e.charAt(i);if(void 0!==t[o])throw new TypeError(o+" is ambiguous");t[o]=i}function s(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return Buffer$2.allocUnsafe(0);for(var i=[0],o=0;o<e.length;o++){var s=t[e[o]];if(void 0===s)return;for(var a=0,c=s;a<i.length;++a)c+=i[a]*r,i[a]=255&c,c>>=8;for(;c>0;)i.push(255&c),c>>=8}for(var u=0;e[u]===n&&u<e.length-1;++u)i.push(0);return Buffer$2.from(i.reverse())}return{encode:function(t){if(0===t.length)return"";for(var i=[0],o=0;o<t.length;++o){for(var s=0,a=t[o];s<i.length;++s)a+=i[s]<<8,i[s]=a%r,a=a/r|0;for(;a>0;)i.push(a%r),a=a/r|0}for(var c="",u=0;0===t[u]&&u<t.length-1;++u)c+=n;for(var f=i.length-1;f>=0;--f)c+=e[i[f]];return c},decodeUnsafe:s,decode:function(e){var t=s(e);if(t)return t;throw new Error("Non-base"+r+" character")}}},base16=function(e){return{encode:e=>"string"==typeof e?Buffer.from(e).toString("hex"):e.toString("hex"),decode(t){for(let r of t)if(e.indexOf(r)<0)throw new Error("invalid base16 character");return Buffer.from(t,"hex")}}};function decode$1(e,t){let r=(e=e.replace(new RegExp("=","g"),"")).length,n=0,i=0,o=0,s=new Uint8Array(5*r/8|0);for(let a=0;a<r;a++)i=i<<5|t.indexOf(e[a]),(n+=5)>=8&&(s[o++]=i>>>n-8&255,n-=8);return s.buffer}function encode$1(e,t){let r=e.byteLength,n=new Uint8Array(e),i=t.indexOf("=")===t.length-1;i&&(t=t.substring(0,t.length-2));let o=0,s=0,a="";for(let e=0;e<r;e++)for(s=s<<8|n[e],o+=8;o>=5;)a+=t[s>>>o-5&31],o-=5;if(o>0&&(a+=t[s<<5-o&31]),i)for(;a.length%8!=0;)a+="=";return a}var base32=function(e){return{encode:t=>encode$1("string"==typeof t?Buffer.from(t):t,e),decode(t){for(let r of t)if(e.indexOf(r)<0)throw new Error("invalid base32 character");return decode$1(t,e)}}},base64=function(e){const t=e.indexOf("=")>-1,r=e.indexOf("-")>-1&&e.indexOf("_")>-1;return{encode(e){let n="";n="string"==typeof e?Buffer.from(e).toString("base64"):e.toString("base64"),r&&(n=n.replace(/\+/g,"-").replace(/\//g,"_"));const i=n.indexOf("=");return i>0&&!t&&(n=n.substring(0,i)),n},decode(t){for(let r of t)if(e.indexOf(r)<0)throw new Error("invalid base64 character");return Buffer.from(t,"base64")}}};const constants$1=[["base1","1","","1"],["base2","0",baseX$1,"01"],["base8","7",baseX$1,"01234567"],["base10","9",baseX$1,"0123456789"],["base16","f",base16,"0123456789abcdef"],["base32","b",base32,"abcdefghijklmnopqrstuvwxyz234567"],["base32pad","c",base32,"abcdefghijklmnopqrstuvwxyz234567="],["base32hex","v",base32,"0123456789abcdefghijklmnopqrstuv"],["base32hexpad","t",base32,"0123456789abcdefghijklmnopqrstuv="],["base32z","h",base32,"ybndrfg8ejkmcpqxot1uwisza345h769"],["base58flickr","Z",baseX$1,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base58btc","z",baseX$1,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base64","m",base64,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",base64,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",base64,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",base64,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],names$1=constants$1.reduce((e,t)=>(e[t[0]]=new base(t[0],t[1],t[2],t[3]),e),{}),codes$1=constants$1.reduce((e,t)=>(e[t[1]]=names$1[t[0]],e),{});var constants_1={names:names$1,codes:codes$1},src$1=createCommonjsModule(function(e,t){(t=e.exports=n).encode=function(e,t){const r=i(e);return n(r.name,Buffer.from(r.encode(t)))},t.decode=function(e){Buffer.isBuffer(e)&&(e=e.toString());const t=e.substring(0,1);"string"==typeof(e=e.substring(1,e.length))&&(e=Buffer.from(e));const r=i(t);return Buffer.from(r.decode(e.toString()))},t.isEncoded=function(e){Buffer.isBuffer(e)&&(e=e.toString());if("[object String]"!==Object.prototype.toString.call(e))return!1;const t=e.substring(0,1);try{const e=i(t);return e.name}catch(e){return!1}},t.names=Object.freeze(Object.keys(constants_1.names)),t.codes=Object.freeze(Object.keys(constants_1.codes));const r=new Error("Unsupported encoding");function n(e,t){if(!t)throw new Error("requires an encoded buffer");const r=i(e),n=Buffer.from(r.code);return function(e,t){i(e).decode(t.toString())}(r.name,t),Buffer.concat([n,t])}function i(e){let t;if(constants_1.names[e])t=constants_1.names[e];else{if(!constants_1.codes[e])throw r;t=constants_1.codes[e]}if(!t.isImplemented())throw new Error("Base "+e+" is not implemented yet");return t}}),src_1$1=src$1.encode,src_2$1=src$1.decode,src_3$1=src$1.isEncoded,src_4$1=src$1.names,src_5$1=src$1.codes,ip_1=createCommonjsModule(function(e,t){var r=t,n=buffer$1.Buffer;r.toBuffer=function(e,t,r){var i;if(r=~~r,this.isV4Format(e))i=t||new n(r+4),e.split(/\./g).map(function(e){i[r++]=255&parseInt(e,10)});else if(this.isV6Format(e)){var o,s=e.split(":",8);for(o=0;o<s.length;o++){var a;this.isV4Format(s[o])&&(a=this.toBuffer(s[o]),s[o]=a.slice(0,2).toString("hex")),a&&++o<8&&s.splice(o,0,a.slice(2,4).toString("hex"))}if(""===s[0])for(;s.length<8;)s.unshift("0");else if(""===s[s.length-1])for(;s.length<8;)s.push("0");else if(s.length<8){for(o=0;o<s.length&&""!==s[o];o++);var c=[o,1];for(o=9-s.length;o>0;o--)c.push("0");s.splice.apply(s,c)}for(i=t||new n(r+16),o=0;o<s.length;o++){var u=parseInt(s[o],16);i[r++]=u>>8&255,i[r++]=255&u}}if(!i)throw Error("Invalid ip address: "+e);return i},r.toString=function(e,t,r){t=~~t;var n=[];if(4===(r=r||e.length-t)){for(var i=0;i<r;i++)n.push(e[t+i]);n=n.join(".")}else if(16===r){for(i=0;i<r;i+=2)n.push(e.readUInt16BE(t+i).toString(16));n=(n=(n=n.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return n};var i=/^(\d{1,3}\.){3,3}\d{1,3}$/,o=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function s(e){return e?e.toLowerCase():"ipv4"}r.isV4Format=function(e){return i.test(e)},r.isV6Format=function(e){return o.test(e)},r.fromPrefixLen=function(e,t){var i=4;"ipv6"===(t=e>32?"ipv6":s(t))&&(i=16);for(var o=new n(i),a=0,c=o.length;a<c;++a){var u=8;e<8&&(u=e),e-=u,o[a]=255&~(255>>u)}return r.toString(o)},r.mask=function(e,t){e=r.toBuffer(e),t=r.toBuffer(t);var i=new n(Math.max(e.length,t.length)),o=0;if(e.length===t.length)for(o=0;o<e.length;o++)i[o]=e[o]&t[o];else if(4===t.length)for(o=0;o<t.length;o++)i[o]=e[e.length-4+o]&t[o];else{for(o=0;o<i.length-6;o++)i[o]=0;for(i[10]=255,i[11]=255,o=0;o<e.length;o++)i[o+12]=e[o]&t[o+12];o+=12}for(;o<i.length;o++)i[o]=0;return r.toString(i)},r.cidr=function(e){var t=e.split("/"),n=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+n);var i=r.fromPrefixLen(parseInt(t[1],10));return r.mask(n,i)},r.subnet=function(e,t){for(var n=r.toLong(r.mask(e,t)),i=r.toBuffer(t),o=0,s=0;s<i.length;s++)if(255===i[s])o+=8;else for(var a=255&i[s];a;)a=a<<1&255,o++;var c=Math.pow(2,32-o);return{networkAddress:r.fromLong(n),firstAddress:c<=2?r.fromLong(n):r.fromLong(n+1),lastAddress:c<=2?r.fromLong(n+c-1):r.fromLong(n+c-2),broadcastAddress:r.fromLong(n+c-1),subnetMask:t,subnetMaskLength:o,numHosts:c<=2?c:c-2,length:c,contains:function(e){return n===r.toLong(r.mask(e,t))}}},r.cidrSubnet=function(e){var t=e.split("/"),n=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+n);var i=r.fromPrefixLen(parseInt(t[1],10));return r.subnet(n,i)},r.not=function(e){for(var t=r.toBuffer(e),n=0;n<t.length;n++)t[n]=255^t[n];return r.toString(t)},r.or=function(e,t){if(e=r.toBuffer(e),t=r.toBuffer(t),e.length===t.length){for(var n=0;n<e.length;++n)e[n]|=t[n];return r.toString(e)}var i=e,o=t;t.length>e.length&&(i=t,o=e);var s=i.length-o.length;for(n=s;n<i.length;++n)i[n]|=o[n-s];return r.toString(i)},r.isEqual=function(e,t){if(e=r.toBuffer(e),t=r.toBuffer(t),e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(4===t.length){var i=t;t=e,e=i}for(n=0;n<10;n++)if(0!==t[n])return!1;var o=t.readUInt16BE(10);if(0!==o&&65535!==o)return!1;for(n=0;n<4;n++)if(e[n]!==t[n+12])return!1;return!0},r.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},r.isPublic=function(e){return!r.isPrivate(e)},r.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},r.loopback=function(e){if("ipv4"!==(e=s(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},r.address=function(e,t){var n,i=os.networkInterfaces();if(t=s(t),e&&"private"!==e&&"public"!==e){var o=i[e].filter(function(e){return e.family.toLowerCase()===t});if(0===o.length)return;return o[0].address}return(n=Object.keys(i).map(function(n){var o=i[n].filter(function(n){return n.family=n.family.toLowerCase(),n.family===t&&!r.isLoopback(n.address)&&(!e||("public"===e?r.isPrivate(n.address):r.isPublic(n.address)))});return o.length?o[0].address:void 0}).filter(Boolean)).length?n[0]:r.loopback(t)},r.toLong=function(e){var t=0;return e.split(".").forEach(function(e){t<<=8,t+=parseInt(e)}),t>>>0},r.fromLong=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)}}),ipRegex=createCommonjsModule(function(e){const t="(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}",r="[0-9a-fA-F]{1,4}",n=`\n(\n(?:${r}:){7}(?:${r}|:)|                                // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${r}:){6}(?:${t}|:${r}|:)|                         // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${r}:){5}(?::${t}|(:${r}){1,2}|:)|                 // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${r}:){4}(?:(:${r}){0,1}:${t}|(:${r}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${r}:){3}(?:(:${r}){0,2}:${t}|(:${r}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${r}:){2}(?:(:${r}){0,3}:${t}|(:${r}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${r}:){1}(?:(:${r}){0,4}:${t}|(:${r}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::((?::${r}){0,5}:${t}|(?::${r}){1,7}|:))           // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(%[0-9a-zA-Z]{1,})?                                           // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=e.exports=e=>e&&e.exact?new RegExp(`(?:^${t}$)|(?:^${n}$)`):new RegExp(`(?:${t})|(?:${n})`,"g");i.v4=e=>e&&e.exact?new RegExp(`^${t}$`):new RegExp(t,"g"),i.v6=e=>e&&e.exact?new RegExp(`^${n}$`):new RegExp(n,"g")}),isIp_1=createCommonjsModule(function(e){const t=e.exports=e=>ipRegex({exact:!0}).test(e);t.v4=e=>ipRegex.v4({exact:!0}).test(e),t.v6=e=>ipRegex.v6({exact:!0}).test(e)});function Protocols(e){if("number"==typeof e){if(Protocols.codes[e])return Protocols.codes[e];throw new Error("no protocol with code: "+e)}if("string"==typeof e||e instanceof String){if(Protocols.names[e])return Protocols.names[e];throw new Error("no protocol with name: "+e)}throw new Error("invalid protocol id type: "+e)}const V=-1;function p(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}Protocols.lengthPrefixedVarSize=V,Protocols.V=V,Protocols.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[53,V,"dns","resolvable"],[54,V,"dns4","resolvable"],[55,V,"dns6","resolvable"],[56,V,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,"path"],[421,V,"p2p"],[421,V,"ipfs"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"]],Protocols.names={},Protocols.codes={},Protocols.table.map(e=>{const t=p.apply(null,e);Protocols.codes[t.code]=t,Protocols.names[t.name]=t}),Protocols.object=p;var protocolsTable=Protocols,base32$1=createCommonjsModule(function(e){!function(){var t="object"==typeof window?window:{};!t.HI_BASE32_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&(t=commonjsGlobal);var r=!t.HI_BASE32_NO_COMMON_JS&&e.exports,n="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),i={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},o=[0,0,0,0,0,0,0,0],s=function(e,t){t.length>10&&(t="..."+t.substr(-10));var r=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+e+" bytes: "+t+" <-");throw r.position=e,r},a=function(e){if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");for(var t,r,n,o,s,a,c,u,f=[],l=0,d=(e=e.replace(/=/g,"")).length,h=0,p=d>>3<<3;h<p;)t=i[e.charAt(h++)],r=i[e.charAt(h++)],n=i[e.charAt(h++)],o=i[e.charAt(h++)],s=i[e.charAt(h++)],a=i[e.charAt(h++)],c=i[e.charAt(h++)],u=i[e.charAt(h++)],f[l++]=255&(t<<3|r>>>2),f[l++]=255&(r<<6|n<<1|o>>>4),f[l++]=255&(o<<4|s>>>1),f[l++]=255&(s<<7|a<<2|c>>>3),f[l++]=255&(c<<5|u);var b=d-p;return 2===b?(t=i[e.charAt(h++)],r=i[e.charAt(h++)],f[l++]=255&(t<<3|r>>>2)):4===b?(t=i[e.charAt(h++)],r=i[e.charAt(h++)],n=i[e.charAt(h++)],o=i[e.charAt(h++)],f[l++]=255&(t<<3|r>>>2),f[l++]=255&(r<<6|n<<1|o>>>4)):5===b?(t=i[e.charAt(h++)],r=i[e.charAt(h++)],n=i[e.charAt(h++)],o=i[e.charAt(h++)],s=i[e.charAt(h++)],f[l++]=255&(t<<3|r>>>2),f[l++]=255&(r<<6|n<<1|o>>>4),f[l++]=255&(o<<4|s>>>1)):7===b&&(t=i[e.charAt(h++)],r=i[e.charAt(h++)],n=i[e.charAt(h++)],o=i[e.charAt(h++)],s=i[e.charAt(h++)],a=i[e.charAt(h++)],c=i[e.charAt(h++)],f[l++]=255&(t<<3|r>>>2),f[l++]=255&(r<<6|n<<1|o>>>4),f[l++]=255&(o<<4|s>>>1),f[l++]=255&(s<<7|a<<2|c>>>3)),f},c=function(e,t){if(!t)return function(e){for(var t,r,n="",i=e.length,o=0,a=0;o<i;)if((t=e[o++])<=127)n+=String.fromCharCode(t);else{t>191&&t<=223?(r=31&t,a=1):t<=239?(r=15&t,a=2):t<=247?(r=7&t,a=3):s(o,n);for(var c=0;c<a;++c)((t=e[o++])<128||t>191)&&s(o,n),r<<=6,r+=63&t;r>=55296&&r<=57343&&s(o,n),r>1114111&&s(o,n),r<=65535?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+(1023&r)))}return n}(a(e));if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");var r,n,o,c,u,f,l,d,h="",p=e.indexOf("=");-1===p&&(p=e.length);for(var b=0,m=p>>3<<3;b<m;)r=i[e.charAt(b++)],n=i[e.charAt(b++)],o=i[e.charAt(b++)],c=i[e.charAt(b++)],u=i[e.charAt(b++)],f=i[e.charAt(b++)],l=i[e.charAt(b++)],d=i[e.charAt(b++)],h+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|o<<1|c>>>4))+String.fromCharCode(255&(c<<4|u>>>1))+String.fromCharCode(255&(u<<7|f<<2|l>>>3))+String.fromCharCode(255&(l<<5|d));var g=p-m;return 2===g?(r=i[e.charAt(b++)],n=i[e.charAt(b++)],h+=String.fromCharCode(255&(r<<3|n>>>2))):4===g?(r=i[e.charAt(b++)],n=i[e.charAt(b++)],o=i[e.charAt(b++)],c=i[e.charAt(b++)],h+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|o<<1|c>>>4))):5===g?(r=i[e.charAt(b++)],n=i[e.charAt(b++)],o=i[e.charAt(b++)],c=i[e.charAt(b++)],u=i[e.charAt(b++)],h+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|o<<1|c>>>4))+String.fromCharCode(255&(c<<4|u>>>1))):7===g&&(r=i[e.charAt(b++)],n=i[e.charAt(b++)],o=i[e.charAt(b++)],c=i[e.charAt(b++)],u=i[e.charAt(b++)],f=i[e.charAt(b++)],l=i[e.charAt(b++)],h+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|o<<1|c>>>4))+String.fromCharCode(255&(c<<4|u>>>1))+String.fromCharCode(255&(u<<7|f<<2|l>>>3))),h},u={encode:function(e,t){var r="string"!=typeof e;return r&&e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),r?function(e){for(var t,r,i,o,s,a="",c=e.length,u=0,f=5*parseInt(c/5);u<f;)t=e[u++],r=e[u++],i=e[u++],o=e[u++],s=e[u++],a+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[31&(r<<4|i>>>4)]+n[31&(i<<1|o>>>7)]+n[o>>>2&31]+n[31&(o<<3|s>>>5)]+n[31&s];var l=c-f;return 1===l?(t=e[u],a+=n[t>>>3]+n[t<<2&31]+"======"):2===l?(t=e[u++],r=e[u],a+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[r<<4&31]+"===="):3===l?(t=e[u++],r=e[u++],i=e[u],a+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[31&(r<<4|i>>>4)]+n[i<<1&31]+"==="):4===l&&(t=e[u++],r=e[u++],i=e[u++],o=e[u],a+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[31&(r<<4|i>>>4)]+n[31&(i<<1|o>>>7)]+n[o>>>2&31]+n[o<<3&31]+"="),a}(e):t?function(e){for(var t,r,i,o,s,a="",c=e.length,u=0,f=5*parseInt(c/5);u<f;)t=e.charCodeAt(u++),r=e.charCodeAt(u++),i=e.charCodeAt(u++),o=e.charCodeAt(u++),s=e.charCodeAt(u++),a+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[31&(r<<4|i>>>4)]+n[31&(i<<1|o>>>7)]+n[o>>>2&31]+n[31&(o<<3|s>>>5)]+n[31&s];var l=c-f;return 1===l?(t=e.charCodeAt(u),a+=n[t>>>3]+n[t<<2&31]+"======"):2===l?(t=e.charCodeAt(u++),r=e.charCodeAt(u),a+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[r<<4&31]+"===="):3===l?(t=e.charCodeAt(u++),r=e.charCodeAt(u++),i=e.charCodeAt(u),a+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[31&(r<<4|i>>>4)]+n[i<<1&31]+"==="):4===l&&(t=e.charCodeAt(u++),r=e.charCodeAt(u++),i=e.charCodeAt(u++),o=e.charCodeAt(u),a+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[31&(r<<4|i>>>4)]+n[31&(i<<1|o>>>7)]+n[o>>>2&31]+n[o<<3&31]+"="),a}(e):function(e){var t,r,i,s,a,c,u,f=!1,l="",d=0,h=0,p=e.length;do{for(o[0]=o[5],o[1]=o[6],o[2]=o[7],u=h;d<p&&u<5;++d)(c=e.charCodeAt(d))<128?o[u++]=c:c<2048?(o[u++]=192|c>>6,o[u++]=128|63&c):c<55296||c>=57344?(o[u++]=224|c>>12,o[u++]=128|c>>6&63,o[u++]=128|63&c):(c=65536+((1023&c)<<10|1023&e.charCodeAt(++d)),o[u++]=240|c>>18,o[u++]=128|c>>12&63,o[u++]=128|c>>6&63,o[u++]=128|63&c);h=u-5,d===p&&++d,d>p&&u<6&&(f=!0),t=o[0],u>4?(r=o[1],i=o[2],s=o[3],a=o[4],l+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[31&(r<<4|i>>>4)]+n[31&(i<<1|s>>>7)]+n[s>>>2&31]+n[31&(s<<3|a>>>5)]+n[31&a]):1===u?l+=n[t>>>3]+n[t<<2&31]+"======":2===u?(r=o[1],l+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[r<<4&31]+"===="):3===u?(r=o[1],i=o[2],l+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[31&(r<<4|i>>>4)]+n[i<<1&31]+"==="):(r=o[1],i=o[2],s=o[3],l+=n[t>>>3]+n[31&(t<<2|r>>>6)]+n[r>>>1&31]+n[31&(r<<4|i>>>4)]+n[31&(i<<1|s>>>7)]+n[s>>>2&31]+n[s<<3&31]+"=")}while(!f);return l}(e)},decode:c};c.asBytes=a,r?e.exports=u:t.base32=u}()}),convert=Convert;function Convert(e,t){return t instanceof Buffer?Convert.toString(e,t):Convert.toBuffer(e,t)}function ip2buf(e){if(!isIp_1(e))throw new Error("invalid ip address");return ip_1.toBuffer(e)}function buf2ip(e){const t=ip_1.toString(e);if(!isIp_1(t))throw new Error("invalid ip address");return t}function port2buf(e){const t=Buffer.alloc(2);return t.writeUInt16BE(e,0),t}function buf2port(e){return e.readUInt16BE(0)}function str2buf(e){const t=Buffer.from(e),r=Buffer.from(varint.encode(t.length));return Buffer.concat([r,t])}function buf2str(e){const t=varint.decode(e);if((e=e.slice(varint.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return e.toString()}function mh2buf(e){const t=Buffer.from(bs58.decode(e)),r=Buffer.from(varint.encode(t.length));return Buffer.concat([r,t])}function buf2mh(e){const t=varint.decode(e),r=e.slice(varint.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return bs58.encode(r)}function onion2buf(e){const t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: "+t+" does not contain a port number");if(16!==t[0].length)throw new Error("failed to parse onion addr: "+t[0]+" not a Tor onion address.");const r=Buffer.from(base32$1.decode.asBytes(t[0].toUpperCase())),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=port2buf(n);return Buffer.concat([r,i])}function onion32buf(e){const t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: "+t+" does not contain a port number");if(56!==t[0].length)throw new Error("failed to parse onion addr: "+t[0]+" not a Tor onion3 address.");const r=Buffer.from(base32$1.decode.asBytes(t[0].toUpperCase())),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=port2buf(n);return Buffer.concat([r,i])}function buf2onion(e){const t=e.slice(0,e.length-2),r=e.slice(e.length-2);return base32$1.encode(t).toString("ascii").toLowerCase()+":"+buf2port(r)}Convert.toString=function(e,t){switch((e=protocolsTable(e)).code){case 4:case 41:return buf2ip(t);case 6:case 273:case 33:case 132:return buf2port(t);case 53:case 54:case 55:case 56:case 400:return buf2str(t);case 421:return buf2mh(t);case 444:case 445:return buf2onion(t);default:return t.toString("hex")}},Convert.toBuffer=function(e,t){switch((e=protocolsTable(e)).code){case 4:case 41:return ip2buf(t);case 6:case 273:case 33:case 132:return port2buf(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:return str2buf(t);case 421:return mh2buf(t);case 444:return onion2buf(t);case 445:return onion32buf(t);default:return Buffer.from(t,"hex")}};var codec={stringToStringTuples:stringToStringTuples,stringTuplesToString:stringTuplesToString,tuplesToStringTuples:tuplesToStringTuples,stringTuplesToTuples:stringTuplesToTuples,bufferToTuples:bufferToTuples,tuplesToBuffer:tuplesToBuffer,bufferToString:bufferToString,stringToBuffer:stringToBuffer,fromString:fromString,fromBuffer:fromBuffer,validateBuffer:validateBuffer,isValidBuffer:isValidBuffer,cleanPath:cleanPath,ParseError:ParseError,protoFromTuple:protoFromTuple,sizeForAddr:sizeForAddr};function stringToStringTuples(e){const t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const i=r[n],o=protocolsTable(i);if(0!==o.size){if(++n>=r.length)throw ParseError("invalid address: "+e);if(o.path){t.push([i,cleanPath(r.slice(n).join("/"))]);break}t.push([i,r[n]])}else t.push([i])}return t}function stringTuplesToString(e){const t=[];return e.map(e=>{const r=protoFromTuple(e);t.push(r.name),e.length>1&&t.push(e[1])}),cleanPath(t.join("/"))}function stringTuplesToTuples(e){return e.map(e=>{Array.isArray(e)||(e=[e]);const t=protoFromTuple(e);return e.length>1?[t.code,convert.toBuffer(t.code,e[1])]:[t.code]})}function tuplesToStringTuples(e){return e.map(e=>{const t=protoFromTuple(e);return e.length>1?[t.code,convert.toString(t.code,e[1])]:[t.code]})}function tuplesToBuffer(e){return fromBuffer(Buffer.concat(e.map(e=>{const t=protoFromTuple(e);let r=Buffer.from(varint.encode(t.code));return e.length>1&&(r=Buffer.concat([r,e[1]])),r})))}function sizeForAddr(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;return varint.decode(t)+varint.decode.bytes}function bufferToTuples(e){const t=[];let r=0;for(;r<e.length;){const n=varint.decode(e,r),i=varint.decode.bytes,o=sizeForAddr(protocolsTable(n),e.slice(r+i));if(0===o){t.push([n]),r+=i;continue}const s=e.slice(r+i,r+i+o);if((r+=o+i)>e.length)throw ParseError("Invalid address buffer: "+e.toString("hex"));t.push([n,s])}return t}function bufferToString(e){return stringTuplesToString(tuplesToStringTuples(bufferToTuples(e)))}function stringToBuffer(e){return tuplesToBuffer(stringTuplesToTuples(stringToStringTuples(e=cleanPath(e))))}function fromString(e){return stringToBuffer(e)}function fromBuffer(e){const t=validateBuffer(e);if(t)throw t;return Buffer.from(e)}function validateBuffer(e){try{bufferToTuples(e)}catch(e){return e}}function isValidBuffer(e){return void 0===validateBuffer(e)}function cleanPath(e){return"/"+e.trim().split("/").filter(e=>e).join("/")}function ParseError(e){return new Error("Error parsing address: "+e)}function protoFromTuple(e){return protocolsTable(e[0])}function withIs(e,{className:t,symbolName:r}){const n=Symbol.for(r),i={[t]:class extends e{constructor(...e){super(...e),Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return t}}}[t];return i[`is${t}`]=e=>!(!e||!e[n]),i}function withIsProto(e,{className:t,symbolName:r,withoutNew:n}){const i=Symbol.for(r),o={[t]:function(...t){if(n&&!(this instanceof o))return new o(...t);const r=e.call(this,...t)||this;return r&&!r[i]&&Object.defineProperty(r,i,{value:!0}),r}}[t];return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,Object.defineProperty(o.prototype,Symbol.toStringTag,{get:()=>t}),o[`is${t}`]=e=>!(!e||!e[i]),o}var classIs=withIs,proto=withIsProto;classIs.proto=proto;var src$2=createCommonjsModule(function(e,t){const r=classIs.proto(function(e){if(!(this instanceof r))return new r(e);if(null==e&&(e=""),e instanceof Buffer)this.buffer=codec.fromBuffer(e);else if("string"==typeof e||e instanceof String){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.buffer=codec.fromString(e)}else{if(!(e.buffer&&e.protos&&e.protoCodes))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.buffer=codec.fromBuffer(e.buffer)}},{className:"Multiaddr",symbolName:"@multiformats/js-multiaddr/multiaddr"});r.prototype.toString=function(){return codec.bufferToString(this.buffer)},r.prototype.toJSON=r.prototype.toString,r.prototype.toOptions=function(){const e={},t=this.toString().split("/");return e.family="ip4"===t[1]?"ipv4":"ipv6",e.host=t[2],e.transport=t[3],e.port=t[4],e},r.prototype.inspect=function(){return"<Multiaddr "+this.buffer.toString("hex")+" - "+codec.bufferToString(this.buffer)+">"},r.prototype.protos=function(){return this.protoCodes().map(e=>Object.assign({},protocolsTable(e)))},r.prototype.protoCodes=function(){const e=[],t=this.buffer;let r=0;for(;r<t.length;){const n=varint.decode(t,r),i=varint.decode.bytes,o=protocolsTable(n);r+=codec.sizeForAddr(o,t.slice(r+i))+i,e.push(n)}return e},r.prototype.protoNames=function(){return this.protos().map(e=>e.name)},r.prototype.tuples=function(){return codec.bufferToTuples(this.buffer)},r.prototype.stringTuples=function(){const e=codec.bufferToTuples(this.buffer);return codec.tuplesToStringTuples(e)},r.prototype.encapsulate=function(e){return e=r(e),r(this.toString()+e.toString())},r.prototype.decapsulate=function(e){e=e.toString();const t=this.toString(),n=t.lastIndexOf(e);if(n<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return r(t.slice(0,n))},r.prototype.getPeerId=function(){let e=null;try{e=this.stringTuples().filter(e=>{if(e[0]===protocolsTable.names.ipfs.code)return!0})[0][1],bs58.decode(e)}catch(t){e=null}return e},r.prototype.getPath=function(){let e=null;try{e=this.stringTuples().filter(e=>{if(protocolsTable(e[0]).path)return!0})[0][1]}catch(t){e=null}return e},r.prototype.equals=function(e){return this.buffer.equals(e.buffer)},r.prototype.nodeAddress=function(){const e=this.protoCodes(),t=this.protoNames(),r=this.toString().split("/").slice(1);if(r.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==e[0]&&41!==e[0]&&54!==e[0]&&55!==e[0])throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if("tcp"!==r[2]&&"udp"!==r[2])throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:41===e[0]||55===e[0]?6:4,address:r[1],port:r[3]}},r.fromNodeAddress=function(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");const n="IPv6"===e.family?"ip6":"ip4";return r("/"+[n,e.address,t,e.port].join("/"))},r.prototype.isThinWaistAddress=function(e){const t=(e||this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))},r.protocols=protocolsTable,r.isName=function(e){return!!r.isMultiaddr(e)&&e.protos().some(e=>e.resolvable)},r.resolve=function(e,t){return r.isMultiaddr(e)&&r.isName(e)?t(new Error("not implemented yet")):t(new Error("not a valid name"))},e.exports=r});const DNS4=base$1("dns4"),DNS6=base$1("dns6"),_DNS=or(base$1("dnsaddr"),DNS4,DNS6),IP=or(base$1("ip4"),base$1("ip6")),TCP=or(and(IP,base$1("tcp")),and(_DNS,base$1("tcp"))),UDP=and(IP,base$1("udp")),UTP=and(UDP,base$1("utp")),DNS=or(and(_DNS,base$1("tcp")),_DNS),WebSockets=or(and(TCP,base$1("ws")),and(DNS,base$1("ws"))),WebSocketsSecure=or(and(TCP,base$1("wss")),and(DNS,base$1("wss"))),HTTP=or(and(TCP,base$1("http")),and(IP,base$1("http")),and(DNS,base$1("http")),and(DNS)),HTTPS=or(and(TCP,base$1("https")),and(IP,base$1("https")),and(DNS,base$1("https"))),WebRTCStar=or(and(WebSockets,base$1("p2p-webrtc-star"),base$1("ipfs")),and(WebSocketsSecure,base$1("p2p-webrtc-star"),base$1("ipfs"))),WebSocketStar=or(and(WebSockets,base$1("p2p-websocket-star"),base$1("ipfs")),and(WebSocketsSecure,base$1("p2p-websocket-star"),base$1("ipfs")),and(WebSockets,base$1("p2p-websocket-star")),and(WebSocketsSecure,base$1("p2p-websocket-star"))),WebRTCDirect=or(and(HTTP,base$1("p2p-webrtc-direct")),and(HTTPS,base$1("p2p-webrtc-direct"))),Reliable=or(WebSockets,WebSocketsSecure,HTTP,HTTPS,WebRTCStar,WebRTCDirect,TCP,UTP),Stardust=or(and(Reliable,base$1("p2p-stardust"),base$1("ipfs")),and(Reliable,base$1("p2p-stardust")));let _IPFS=or(and(Reliable,base$1("ipfs")),WebRTCStar,base$1("ipfs"));const _Circuit=or(and(_IPFS,base$1("p2p-circuit"),_IPFS),and(_IPFS,base$1("p2p-circuit")),and(base$1("p2p-circuit"),_IPFS),and(Reliable,base$1("p2p-circuit")),and(base$1("p2p-circuit"),Reliable),base$1("p2p-circuit")),CircuitRecursive=()=>or(and(_Circuit,CircuitRecursive),_Circuit),Circuit=CircuitRecursive(),IPFS=or(and(Circuit,_IPFS,Circuit),and(_IPFS,Circuit),and(Circuit,_IPFS),Circuit,_IPFS);var DNS_1=DNS,DNS4_1=DNS4,DNS6_1=DNS6,IP_1=IP,TCP_1=TCP,UDP_1=UDP,UTP_1=UTP,HTTP_1=HTTP,HTTPS_1=HTTPS,WebSockets_1=WebSockets,WebSocketsSecure_1=WebSocketsSecure,WebSocketStar_1=WebSocketStar,WebRTCStar_1=WebRTCStar,WebRTCDirect_1=WebRTCDirect,Reliable_1=Reliable,Stardust_1=Stardust,Circuit_1=Circuit,IPFS_1=IPFS;function makeMatchesFunction(e){return function(t){if(!src$2.isMultiaddr(t))try{t=src$2(t)}catch(e){return!1}let r=e(t.protoNames());return null!==r&&0===r.length}}function and(){const e=Array.from(arguments);function t(t){return t.length<e.length?null:(e.some(e=>{if(null===(t="function"==typeof e?e().partialMatch(t):e.partialMatch(t)))return!0}),t)}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:makeMatchesFunction(t),partialMatch:t}}function or(){const e=Array.from(arguments);function t(t){let r=null;return e.some(e=>{const n="function"==typeof e?e().partialMatch(t):e.partialMatch(t);if(n)return r=n,!0}),r}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:makeMatchesFunction(t),partialMatch:t}}function base$1(e){const t=e;return{toString:function(){return t},matches:function(e){if("string"==typeof e)try{e=src$2(e)}catch(e){return!1}const r=e.protoNames();return 1===r.length&&r[0]===t},partialMatch:function(e){return 0===e.length?null:e[0]===t?e.slice(1):null}}}var src$3={DNS:DNS_1,DNS4:DNS4_1,DNS6:DNS6_1,IP:IP_1,TCP:TCP_1,UDP:UDP_1,UTP:UTP_1,HTTP:HTTP_1,HTTPS:HTTPS_1,WebSockets:WebSockets_1,WebSocketsSecure:WebSocketsSecure_1,WebSocketStar:WebSocketStar_1,WebRTCStar:WebRTCStar_1,WebRTCDirect:WebRTCDirect_1,Reliable:Reliable_1,Stardust:Stardust_1,Circuit:Circuit_1,IPFS:IPFS_1},baseTable=createCommonjsModule(function(e,t){t.protobuf=Buffer.from("50","hex"),t.cbor=Buffer.from("51","hex"),t.rlp=Buffer.from("60","hex"),t.bencode=Buffer.from("63","hex"),t.multicodec=Buffer.from("30","hex"),t.multihash=Buffer.from("31","hex"),t.multiaddr=Buffer.from("32","hex"),t.multibase=Buffer.from("33","hex"),t.identity=Buffer.from("00","hex"),t.sha1=Buffer.from("11","hex"),t["sha2-256"]=Buffer.from("12","hex"),t["sha2-512"]=Buffer.from("13","hex"),t["sha3-512"]=Buffer.from("14","hex"),t["sha3-384"]=Buffer.from("15","hex"),t["sha3-256"]=Buffer.from("16","hex"),t["sha3-224"]=Buffer.from("17","hex"),t["shake-128"]=Buffer.from("18","hex"),t["shake-256"]=Buffer.from("19","hex"),t["keccak-224"]=Buffer.from("1a","hex"),t["keccak-256"]=Buffer.from("1b","hex"),t["keccak-384"]=Buffer.from("1c","hex"),t["keccak-512"]=Buffer.from("1d","hex"),t["murmur3-128"]=Buffer.from("22","hex"),t["murmur3-32"]=Buffer.from("23","hex"),t["dbl-sha2-256"]=Buffer.from("56","hex"),t.md4=Buffer.from("d4","hex"),t.md5=Buffer.from("d5","hex"),t.bmt=Buffer.from("d6","hex"),t.x11=Buffer.from("1100","hex"),t["blake2b-8"]=Buffer.from("b201","hex"),t["blake2b-16"]=Buffer.from("b202","hex"),t["blake2b-24"]=Buffer.from("b203","hex"),t["blake2b-32"]=Buffer.from("b204","hex"),t["blake2b-40"]=Buffer.from("b205","hex"),t["blake2b-48"]=Buffer.from("b206","hex"),t["blake2b-56"]=Buffer.from("b207","hex"),t["blake2b-64"]=Buffer.from("b208","hex"),t["blake2b-72"]=Buffer.from("b209","hex"),t["blake2b-80"]=Buffer.from("b20a","hex"),t["blake2b-88"]=Buffer.from("b20b","hex"),t["blake2b-96"]=Buffer.from("b20c","hex"),t["blake2b-104"]=Buffer.from("b20d","hex"),t["blake2b-112"]=Buffer.from("b20e","hex"),t["blake2b-120"]=Buffer.from("b20f","hex"),t["blake2b-128"]=Buffer.from("b210","hex"),t["blake2b-136"]=Buffer.from("b211","hex"),t["blake2b-144"]=Buffer.from("b212","hex"),t["blake2b-152"]=Buffer.from("b213","hex"),t["blake2b-160"]=Buffer.from("b214","hex"),t["blake2b-168"]=Buffer.from("b215","hex"),t["blake2b-176"]=Buffer.from("b216","hex"),t["blake2b-184"]=Buffer.from("b217","hex"),t["blake2b-192"]=Buffer.from("b218","hex"),t["blake2b-200"]=Buffer.from("b219","hex"),t["blake2b-208"]=Buffer.from("b21a","hex"),t["blake2b-216"]=Buffer.from("b21b","hex"),t["blake2b-224"]=Buffer.from("b21c","hex"),t["blake2b-232"]=Buffer.from("b21d","hex"),t["blake2b-240"]=Buffer.from("b21e","hex"),t["blake2b-248"]=Buffer.from("b21f","hex"),t["blake2b-256"]=Buffer.from("b220","hex"),t["blake2b-264"]=Buffer.from("b221","hex"),t["blake2b-272"]=Buffer.from("b222","hex"),t["blake2b-280"]=Buffer.from("b223","hex"),t["blake2b-288"]=Buffer.from("b224","hex"),t["blake2b-296"]=Buffer.from("b225","hex"),t["blake2b-304"]=Buffer.from("b226","hex"),t["blake2b-312"]=Buffer.from("b227","hex"),t["blake2b-320"]=Buffer.from("b228","hex"),t["blake2b-328"]=Buffer.from("b229","hex"),t["blake2b-336"]=Buffer.from("b22a","hex"),t["blake2b-344"]=Buffer.from("b22b","hex"),t["blake2b-352"]=Buffer.from("b22c","hex"),t["blake2b-360"]=Buffer.from("b22d","hex"),t["blake2b-368"]=Buffer.from("b22e","hex"),t["blake2b-376"]=Buffer.from("b22f","hex"),t["blake2b-384"]=Buffer.from("b230","hex"),t["blake2b-392"]=Buffer.from("b231","hex"),t["blake2b-400"]=Buffer.from("b232","hex"),t["blake2b-408"]=Buffer.from("b233","hex"),t["blake2b-416"]=Buffer.from("b234","hex"),t["blake2b-424"]=Buffer.from("b235","hex"),t["blake2b-432"]=Buffer.from("b236","hex"),t["blake2b-440"]=Buffer.from("b237","hex"),t["blake2b-448"]=Buffer.from("b238","hex"),t["blake2b-456"]=Buffer.from("b239","hex"),t["blake2b-464"]=Buffer.from("b23a","hex"),t["blake2b-472"]=Buffer.from("b23b","hex"),t["blake2b-480"]=Buffer.from("b23c","hex"),t["blake2b-488"]=Buffer.from("b23d","hex"),t["blake2b-496"]=Buffer.from("b23e","hex"),t["blake2b-504"]=Buffer.from("b23f","hex"),t["blake2b-512"]=Buffer.from("b240","hex"),t["blake2s-8"]=Buffer.from("b241","hex"),t["blake2s-16"]=Buffer.from("b242","hex"),t["blake2s-24"]=Buffer.from("b243","hex"),t["blake2s-32"]=Buffer.from("b244","hex"),t["blake2s-40"]=Buffer.from("b245","hex"),t["blake2s-48"]=Buffer.from("b246","hex"),t["blake2s-56"]=Buffer.from("b247","hex"),t["blake2s-64"]=Buffer.from("b248","hex"),t["blake2s-72"]=Buffer.from("b249","hex"),t["blake2s-80"]=Buffer.from("b24a","hex"),t["blake2s-88"]=Buffer.from("b24b","hex"),t["blake2s-96"]=Buffer.from("b24c","hex"),t["blake2s-104"]=Buffer.from("b24d","hex"),t["blake2s-112"]=Buffer.from("b24e","hex"),t["blake2s-120"]=Buffer.from("b24f","hex"),t["blake2s-128"]=Buffer.from("b250","hex"),t["blake2s-136"]=Buffer.from("b251","hex"),t["blake2s-144"]=Buffer.from("b252","hex"),t["blake2s-152"]=Buffer.from("b253","hex"),t["blake2s-160"]=Buffer.from("b254","hex"),t["blake2s-168"]=Buffer.from("b255","hex"),t["blake2s-176"]=Buffer.from("b256","hex"),t["blake2s-184"]=Buffer.from("b257","hex"),t["blake2s-192"]=Buffer.from("b258","hex"),t["blake2s-200"]=Buffer.from("b259","hex"),t["blake2s-208"]=Buffer.from("b25a","hex"),t["blake2s-216"]=Buffer.from("b25b","hex"),t["blake2s-224"]=Buffer.from("b25c","hex"),t["blake2s-232"]=Buffer.from("b25d","hex"),t["blake2s-240"]=Buffer.from("b25e","hex"),t["blake2s-248"]=Buffer.from("b25f","hex"),t["blake2s-256"]=Buffer.from("b260","hex"),t["skein256-8"]=Buffer.from("b301","hex"),t["skein256-16"]=Buffer.from("b302","hex"),t["skein256-24"]=Buffer.from("b303","hex"),t["skein256-32"]=Buffer.from("b304","hex"),t["skein256-40"]=Buffer.from("b305","hex"),t["skein256-48"]=Buffer.from("b306","hex"),t["skein256-56"]=Buffer.from("b307","hex"),t["skein256-64"]=Buffer.from("b308","hex"),t["skein256-72"]=Buffer.from("b309","hex"),t["skein256-80"]=Buffer.from("b30a","hex"),t["skein256-88"]=Buffer.from("b30b","hex"),t["skein256-96"]=Buffer.from("b30c","hex"),t["skein256-104"]=Buffer.from("b30d","hex"),t["skein256-112"]=Buffer.from("b30e","hex"),t["skein256-120"]=Buffer.from("b30f","hex"),t["skein256-128"]=Buffer.from("b310","hex"),t["skein256-136"]=Buffer.from("b311","hex"),t["skein256-144"]=Buffer.from("b312","hex"),t["skein256-152"]=Buffer.from("b313","hex"),t["skein256-160"]=Buffer.from("b314","hex"),t["skein256-168"]=Buffer.from("b315","hex"),t["skein256-176"]=Buffer.from("b316","hex"),t["skein256-184"]=Buffer.from("b317","hex"),t["skein256-192"]=Buffer.from("b318","hex"),t["skein256-200"]=Buffer.from("b319","hex"),t["skein256-208"]=Buffer.from("b31a","hex"),t["skein256-216"]=Buffer.from("b31b","hex"),t["skein256-224"]=Buffer.from("b31c","hex"),t["skein256-232"]=Buffer.from("b31d","hex"),t["skein256-240"]=Buffer.from("b31e","hex"),t["skein256-248"]=Buffer.from("b31f","hex"),t["skein256-256"]=Buffer.from("b320","hex"),t["skein512-8"]=Buffer.from("b321","hex"),t["skein512-16"]=Buffer.from("b322","hex"),t["skein512-24"]=Buffer.from("b323","hex"),t["skein512-32"]=Buffer.from("b324","hex"),t["skein512-40"]=Buffer.from("b325","hex"),t["skein512-48"]=Buffer.from("b326","hex"),t["skein512-56"]=Buffer.from("b327","hex"),t["skein512-64"]=Buffer.from("b328","hex"),t["skein512-72"]=Buffer.from("b329","hex"),t["skein512-80"]=Buffer.from("b32a","hex"),t["skein512-88"]=Buffer.from("b32b","hex"),t["skein512-96"]=Buffer.from("b32c","hex"),t["skein512-104"]=Buffer.from("b32d","hex"),t["skein512-112"]=Buffer.from("b32e","hex"),t["skein512-120"]=Buffer.from("b32f","hex"),t["skein512-128"]=Buffer.from("b330","hex"),t["skein512-136"]=Buffer.from("b331","hex"),t["skein512-144"]=Buffer.from("b332","hex"),t["skein512-152"]=Buffer.from("b333","hex"),t["skein512-160"]=Buffer.from("b334","hex"),t["skein512-168"]=Buffer.from("b335","hex"),t["skein512-176"]=Buffer.from("b336","hex"),t["skein512-184"]=Buffer.from("b337","hex"),t["skein512-192"]=Buffer.from("b338","hex"),t["skein512-200"]=Buffer.from("b339","hex"),t["skein512-208"]=Buffer.from("b33a","hex"),t["skein512-216"]=Buffer.from("b33b","hex"),t["skein512-224"]=Buffer.from("b33c","hex"),t["skein512-232"]=Buffer.from("b33d","hex"),t["skein512-240"]=Buffer.from("b33e","hex"),t["skein512-248"]=Buffer.from("b33f","hex"),t["skein512-256"]=Buffer.from("b340","hex"),t["skein512-264"]=Buffer.from("b341","hex"),t["skein512-272"]=Buffer.from("b342","hex"),t["skein512-280"]=Buffer.from("b343","hex"),t["skein512-288"]=Buffer.from("b344","hex"),t["skein512-296"]=Buffer.from("b345","hex"),t["skein512-304"]=Buffer.from("b346","hex"),t["skein512-312"]=Buffer.from("b347","hex"),t["skein512-320"]=Buffer.from("b348","hex"),t["skein512-328"]=Buffer.from("b349","hex"),t["skein512-336"]=Buffer.from("b34a","hex"),t["skein512-344"]=Buffer.from("b34b","hex"),t["skein512-352"]=Buffer.from("b34c","hex"),t["skein512-360"]=Buffer.from("b34d","hex"),t["skein512-368"]=Buffer.from("b34e","hex"),t["skein512-376"]=Buffer.from("b34f","hex"),t["skein512-384"]=Buffer.from("b350","hex"),t["skein512-392"]=Buffer.from("b351","hex"),t["skein512-400"]=Buffer.from("b352","hex"),t["skein512-408"]=Buffer.from("b353","hex"),t["skein512-416"]=Buffer.from("b354","hex"),t["skein512-424"]=Buffer.from("b355","hex"),t["skein512-432"]=Buffer.from("b356","hex"),t["skein512-440"]=Buffer.from("b357","hex"),t["skein512-448"]=Buffer.from("b358","hex"),t["skein512-456"]=Buffer.from("b359","hex"),t["skein512-464"]=Buffer.from("b35a","hex"),t["skein512-472"]=Buffer.from("b35b","hex"),t["skein512-480"]=Buffer.from("b35c","hex"),t["skein512-488"]=Buffer.from("b35d","hex"),t["skein512-496"]=Buffer.from("b35e","hex"),t["skein512-504"]=Buffer.from("b35f","hex"),t["skein512-512"]=Buffer.from("b360","hex"),t["skein1024-8"]=Buffer.from("b361","hex"),t["skein1024-16"]=Buffer.from("b362","hex"),t["skein1024-24"]=Buffer.from("b363","hex"),t["skein1024-32"]=Buffer.from("b364","hex"),t["skein1024-40"]=Buffer.from("b365","hex"),t["skein1024-48"]=Buffer.from("b366","hex"),t["skein1024-56"]=Buffer.from("b367","hex"),t["skein1024-64"]=Buffer.from("b368","hex"),t["skein1024-72"]=Buffer.from("b369","hex"),t["skein1024-80"]=Buffer.from("b36a","hex"),t["skein1024-88"]=Buffer.from("b36b","hex"),t["skein1024-96"]=Buffer.from("b36c","hex"),t["skein1024-104"]=Buffer.from("b36d","hex"),t["skein1024-112"]=Buffer.from("b36e","hex"),t["skein1024-120"]=Buffer.from("b36f","hex"),t["skein1024-128"]=Buffer.from("b370","hex"),t["skein1024-136"]=Buffer.from("b371","hex"),t["skein1024-144"]=Buffer.from("b372","hex"),t["skein1024-152"]=Buffer.from("b373","hex"),t["skein1024-160"]=Buffer.from("b374","hex"),t["skein1024-168"]=Buffer.from("b375","hex"),t["skein1024-176"]=Buffer.from("b376","hex"),t["skein1024-184"]=Buffer.from("b377","hex"),t["skein1024-192"]=Buffer.from("b378","hex"),t["skein1024-200"]=Buffer.from("b379","hex"),t["skein1024-208"]=Buffer.from("b37a","hex"),t["skein1024-216"]=Buffer.from("b37b","hex"),t["skein1024-224"]=Buffer.from("b37c","hex"),t["skein1024-232"]=Buffer.from("b37d","hex"),t["skein1024-240"]=Buffer.from("b37e","hex"),t["skein1024-248"]=Buffer.from("b37f","hex"),t["skein1024-256"]=Buffer.from("b380","hex"),t["skein1024-264"]=Buffer.from("b381","hex"),t["skein1024-272"]=Buffer.from("b382","hex"),t["skein1024-280"]=Buffer.from("b383","hex"),t["skein1024-288"]=Buffer.from("b384","hex"),t["skein1024-296"]=Buffer.from("b385","hex"),t["skein1024-304"]=Buffer.from("b386","hex"),t["skein1024-312"]=Buffer.from("b387","hex"),t["skein1024-320"]=Buffer.from("b388","hex"),t["skein1024-328"]=Buffer.from("b389","hex"),t["skein1024-336"]=Buffer.from("b38a","hex"),t["skein1024-344"]=Buffer.from("b38b","hex"),t["skein1024-352"]=Buffer.from("b38c","hex"),t["skein1024-360"]=Buffer.from("b38d","hex"),t["skein1024-368"]=Buffer.from("b38e","hex"),t["skein1024-376"]=Buffer.from("b38f","hex"),t["skein1024-384"]=Buffer.from("b390","hex"),t["skein1024-392"]=Buffer.from("b391","hex"),t["skein1024-400"]=Buffer.from("b392","hex"),t["skein1024-408"]=Buffer.from("b393","hex"),t["skein1024-416"]=Buffer.from("b394","hex"),t["skein1024-424"]=Buffer.from("b395","hex"),t["skein1024-432"]=Buffer.from("b396","hex"),t["skein1024-440"]=Buffer.from("b397","hex"),t["skein1024-448"]=Buffer.from("b398","hex"),t["skein1024-456"]=Buffer.from("b399","hex"),t["skein1024-464"]=Buffer.from("b39a","hex"),t["skein1024-472"]=Buffer.from("b39b","hex"),t["skein1024-480"]=Buffer.from("b39c","hex"),t["skein1024-488"]=Buffer.from("b39d","hex"),t["skein1024-496"]=Buffer.from("b39e","hex"),t["skein1024-504"]=Buffer.from("b39f","hex"),t["skein1024-512"]=Buffer.from("b3a0","hex"),t["skein1024-520"]=Buffer.from("b3a1","hex"),t["skein1024-528"]=Buffer.from("b3a2","hex"),t["skein1024-536"]=Buffer.from("b3a3","hex"),t["skein1024-544"]=Buffer.from("b3a4","hex"),t["skein1024-552"]=Buffer.from("b3a5","hex"),t["skein1024-560"]=Buffer.from("b3a6","hex"),t["skein1024-568"]=Buffer.from("b3a7","hex"),t["skein1024-576"]=Buffer.from("b3a8","hex"),t["skein1024-584"]=Buffer.from("b3a9","hex"),t["skein1024-592"]=Buffer.from("b3aa","hex"),t["skein1024-600"]=Buffer.from("b3ab","hex"),t["skein1024-608"]=Buffer.from("b3ac","hex"),t["skein1024-616"]=Buffer.from("b3ad","hex"),t["skein1024-624"]=Buffer.from("b3ae","hex"),t["skein1024-632"]=Buffer.from("b3af","hex"),t["skein1024-640"]=Buffer.from("b3b0","hex"),t["skein1024-648"]=Buffer.from("b3b1","hex"),t["skein1024-656"]=Buffer.from("b3b2","hex"),t["skein1024-664"]=Buffer.from("b3b3","hex"),t["skein1024-672"]=Buffer.from("b3b4","hex"),t["skein1024-680"]=Buffer.from("b3b5","hex"),t["skein1024-688"]=Buffer.from("b3b6","hex"),t["skein1024-696"]=Buffer.from("b3b7","hex"),t["skein1024-704"]=Buffer.from("b3b8","hex"),t["skein1024-712"]=Buffer.from("b3b9","hex"),t["skein1024-720"]=Buffer.from("b3ba","hex"),t["skein1024-728"]=Buffer.from("b3bb","hex"),t["skein1024-736"]=Buffer.from("b3bc","hex"),t["skein1024-744"]=Buffer.from("b3bd","hex"),t["skein1024-752"]=Buffer.from("b3be","hex"),t["skein1024-760"]=Buffer.from("b3bf","hex"),t["skein1024-768"]=Buffer.from("b3c0","hex"),t["skein1024-776"]=Buffer.from("b3c1","hex"),t["skein1024-784"]=Buffer.from("b3c2","hex"),t["skein1024-792"]=Buffer.from("b3c3","hex"),t["skein1024-800"]=Buffer.from("b3c4","hex"),t["skein1024-808"]=Buffer.from("b3c5","hex"),t["skein1024-816"]=Buffer.from("b3c6","hex"),t["skein1024-824"]=Buffer.from("b3c7","hex"),t["skein1024-832"]=Buffer.from("b3c8","hex"),t["skein1024-840"]=Buffer.from("b3c9","hex"),t["skein1024-848"]=Buffer.from("b3ca","hex"),t["skein1024-856"]=Buffer.from("b3cb","hex"),t["skein1024-864"]=Buffer.from("b3cc","hex"),t["skein1024-872"]=Buffer.from("b3cd","hex"),t["skein1024-880"]=Buffer.from("b3ce","hex"),t["skein1024-888"]=Buffer.from("b3cf","hex"),t["skein1024-896"]=Buffer.from("b3d0","hex"),t["skein1024-904"]=Buffer.from("b3d1","hex"),t["skein1024-912"]=Buffer.from("b3d2","hex"),t["skein1024-920"]=Buffer.from("b3d3","hex"),t["skein1024-928"]=Buffer.from("b3d4","hex"),t["skein1024-936"]=Buffer.from("b3d5","hex"),t["skein1024-944"]=Buffer.from("b3d6","hex"),t["skein1024-952"]=Buffer.from("b3d7","hex"),t["skein1024-960"]=Buffer.from("b3d8","hex"),t["skein1024-968"]=Buffer.from("b3d9","hex"),t["skein1024-976"]=Buffer.from("b3da","hex"),t["skein1024-984"]=Buffer.from("b3db","hex"),t["skein1024-992"]=Buffer.from("b3dc","hex"),t["skein1024-1000"]=Buffer.from("b3dd","hex"),t["skein1024-1008"]=Buffer.from("b3de","hex"),t["skein1024-1016"]=Buffer.from("b3df","hex"),t["skein1024-1024"]=Buffer.from("b3e0","hex"),t.ip4=Buffer.from("04","hex"),t.tcp=Buffer.from("06","hex"),t.dccp=Buffer.from("21","hex"),t.ip6=Buffer.from("29","hex"),t.ip6zone=Buffer.from("2a","hex"),t.dns=Buffer.from("35","hex"),t.dns4=Buffer.from("36","hex"),t.dns6=Buffer.from("37","hex"),t.dnsaddr=Buffer.from("38","hex"),t.sctp=Buffer.from("84","hex"),t.udp=Buffer.from("0111","hex"),t["p2p-webrtc-star"]=Buffer.from("0113","hex"),t["p2p-webrtc-direct"]=Buffer.from("0114","hex"),t["p2p-stardust"]=Buffer.from("0115","hex"),t["p2p-circuit"]=Buffer.from("0122","hex"),t.udt=Buffer.from("012d","hex"),t.utp=Buffer.from("012e","hex"),t.unix=Buffer.from("0190","hex"),t.p2p=Buffer.from("01a5","hex"),t.ipfs=Buffer.from("01a5","hex"),t.https=Buffer.from("01bb","hex"),t.onion=Buffer.from("01bc","hex"),t.onion3=Buffer.from("01bd","hex"),t.garlic64=Buffer.from("01be","hex"),t.garlic32=Buffer.from("01bf","hex"),t.quic=Buffer.from("01cc","hex"),t.ws=Buffer.from("01dd","hex"),t.wss=Buffer.from("01de","hex"),t["p2p-websocket-star"]=Buffer.from("01df","hex"),t.http=Buffer.from("01e0","hex"),t.raw=Buffer.from("55","hex"),t["dag-pb"]=Buffer.from("70","hex"),t["dag-cbor"]=Buffer.from("71","hex"),t["libp2p-key"]=Buffer.from("72","hex"),t["git-raw"]=Buffer.from("78","hex"),t["torrent-info"]=Buffer.from("7b","hex"),t["torrent-file"]=Buffer.from("7c","hex"),t["leofcoin-block"]=Buffer.from("81","hex"),t["leofcoin-tx"]=Buffer.from("82","hex"),t["leofcoin-pr"]=Buffer.from("83","hex"),t["eth-block"]=Buffer.from("90","hex"),t["eth-block-list"]=Buffer.from("91","hex"),t["eth-tx-trie"]=Buffer.from("92","hex"),t["eth-tx"]=Buffer.from("93","hex"),t["eth-tx-receipt-trie"]=Buffer.from("94","hex"),t["eth-tx-receipt"]=Buffer.from("95","hex"),t["eth-state-trie"]=Buffer.from("96","hex"),t["eth-account-snapshot"]=Buffer.from("97","hex"),t["eth-storage-trie"]=Buffer.from("98","hex"),t["bitcoin-block"]=Buffer.from("b0","hex"),t["bitcoin-tx"]=Buffer.from("b1","hex"),t["zcash-block"]=Buffer.from("c0","hex"),t["zcash-tx"]=Buffer.from("c1","hex"),t["stellar-block"]=Buffer.from("d0","hex"),t["stellar-tx"]=Buffer.from("d1","hex"),t["decred-block"]=Buffer.from("e0","hex"),t["decred-tx"]=Buffer.from("e1","hex"),t["dash-block"]=Buffer.from("f0","hex"),t["dash-tx"]=Buffer.from("f1","hex"),t["swarm-manifest"]=Buffer.from("fa","hex"),t["swarm-feed"]=Buffer.from("fb","hex"),t["dag-json"]=Buffer.from("0129","hex"),t.path=Buffer.from("2f","hex"),t["ipld-ns"]=Buffer.from("e2","hex"),t["ipfs-ns"]=Buffer.from("e3","hex"),t["swarm-ns"]=Buffer.from("e4","hex"),t["ed25519-pub"]=Buffer.from("ed","hex"),t["holochain-adr-v0"]=Buffer.from("807124","hex"),t["holochain-adr-v1"]=Buffer.from("817124","hex"),t["holochain-key-v0"]=Buffer.from("947124","hex"),t["holochain-key-v1"]=Buffer.from("957124","hex"),t["holochain-sig-v0"]=Buffer.from("a27124","hex"),t["holochain-sig-v1"]=Buffer.from("a37124","hex")}),util={numberToBuffer:numberToBuffer,bufferToNumber:bufferToNumber,varintBufferEncode:varintBufferEncode,varintBufferDecode:varintBufferDecode};function bufferToNumber(e){return parseInt(e.toString("hex"),16)}function numberToBuffer(e){let t=e.toString(16);return t.length%2==1&&(t="0"+t),Buffer.from(t,"hex")}function varintBufferEncode(e){return Buffer.from(varint.encode(bufferToNumber(e)))}function varintBufferDecode(e){return numberToBuffer(varint.decode(e))}const varintBufferEncode$1=util.varintBufferEncode,varintTable={};var varintTable_1=varintTable;for(let e in baseTable){let t=baseTable[e];varintTable[e]=varintBufferEncode$1(t)}const nameTable={};var nameTable_1=nameTable;for(let e in baseTable){nameTable[baseTable[e].toString("hex")]=e}var constants$2=Object.freeze({PROTOBUF:80,CBOR:81,RLP:96,BENCODE:99,MULTICODEC:48,MULTIHASH:49,MULTIADDR:50,MULTIBASE:51,IDENTITY:0,SHA1:17,SHA2_256:18,SHA2_512:19,SHA3_512:20,SHA3_384:21,SHA3_256:22,SHA3_224:23,SHAKE_128:24,SHAKE_256:25,KECCAK_224:26,KECCAK_256:27,KECCAK_384:28,KECCAK_512:29,MURMUR3_128:34,MURMUR3_32:35,DBL_SHA2_256:86,MD4:212,MD5:213,BMT:214,X11:4352,BLAKE2B_8:45569,BLAKE2B_16:45570,BLAKE2B_24:45571,BLAKE2B_32:45572,BLAKE2B_40:45573,BLAKE2B_48:45574,BLAKE2B_56:45575,BLAKE2B_64:45576,BLAKE2B_72:45577,BLAKE2B_80:45578,BLAKE2B_88:45579,BLAKE2B_96:45580,BLAKE2B_104:45581,BLAKE2B_112:45582,BLAKE2B_120:45583,BLAKE2B_128:45584,BLAKE2B_136:45585,BLAKE2B_144:45586,BLAKE2B_152:45587,BLAKE2B_160:45588,BLAKE2B_168:45589,BLAKE2B_176:45590,BLAKE2B_184:45591,BLAKE2B_192:45592,BLAKE2B_200:45593,BLAKE2B_208:45594,BLAKE2B_216:45595,BLAKE2B_224:45596,BLAKE2B_232:45597,BLAKE2B_240:45598,BLAKE2B_248:45599,BLAKE2B_256:45600,BLAKE2B_264:45601,BLAKE2B_272:45602,BLAKE2B_280:45603,BLAKE2B_288:45604,BLAKE2B_296:45605,BLAKE2B_304:45606,BLAKE2B_312:45607,BLAKE2B_320:45608,BLAKE2B_328:45609,BLAKE2B_336:45610,BLAKE2B_344:45611,BLAKE2B_352:45612,BLAKE2B_360:45613,BLAKE2B_368:45614,BLAKE2B_376:45615,BLAKE2B_384:45616,BLAKE2B_392:45617,BLAKE2B_400:45618,BLAKE2B_408:45619,BLAKE2B_416:45620,BLAKE2B_424:45621,BLAKE2B_432:45622,BLAKE2B_440:45623,BLAKE2B_448:45624,BLAKE2B_456:45625,BLAKE2B_464:45626,BLAKE2B_472:45627,BLAKE2B_480:45628,BLAKE2B_488:45629,BLAKE2B_496:45630,BLAKE2B_504:45631,BLAKE2B_512:45632,BLAKE2S_8:45633,BLAKE2S_16:45634,BLAKE2S_24:45635,BLAKE2S_32:45636,BLAKE2S_40:45637,BLAKE2S_48:45638,BLAKE2S_56:45639,BLAKE2S_64:45640,BLAKE2S_72:45641,BLAKE2S_80:45642,BLAKE2S_88:45643,BLAKE2S_96:45644,BLAKE2S_104:45645,BLAKE2S_112:45646,BLAKE2S_120:45647,BLAKE2S_128:45648,BLAKE2S_136:45649,BLAKE2S_144:45650,BLAKE2S_152:45651,BLAKE2S_160:45652,BLAKE2S_168:45653,BLAKE2S_176:45654,BLAKE2S_184:45655,BLAKE2S_192:45656,BLAKE2S_200:45657,BLAKE2S_208:45658,BLAKE2S_216:45659,BLAKE2S_224:45660,BLAKE2S_232:45661,BLAKE2S_240:45662,BLAKE2S_248:45663,BLAKE2S_256:45664,SKEIN256_8:45825,SKEIN256_16:45826,SKEIN256_24:45827,SKEIN256_32:45828,SKEIN256_40:45829,SKEIN256_48:45830,SKEIN256_56:45831,SKEIN256_64:45832,SKEIN256_72:45833,SKEIN256_80:45834,SKEIN256_88:45835,SKEIN256_96:45836,SKEIN256_104:45837,SKEIN256_112:45838,SKEIN256_120:45839,SKEIN256_128:45840,SKEIN256_136:45841,SKEIN256_144:45842,SKEIN256_152:45843,SKEIN256_160:45844,SKEIN256_168:45845,SKEIN256_176:45846,SKEIN256_184:45847,SKEIN256_192:45848,SKEIN256_200:45849,SKEIN256_208:45850,SKEIN256_216:45851,SKEIN256_224:45852,SKEIN256_232:45853,SKEIN256_240:45854,SKEIN256_248:45855,SKEIN256_256:45856,SKEIN512_8:45857,SKEIN512_16:45858,SKEIN512_24:45859,SKEIN512_32:45860,SKEIN512_40:45861,SKEIN512_48:45862,SKEIN512_56:45863,SKEIN512_64:45864,SKEIN512_72:45865,SKEIN512_80:45866,SKEIN512_88:45867,SKEIN512_96:45868,SKEIN512_104:45869,SKEIN512_112:45870,SKEIN512_120:45871,SKEIN512_128:45872,SKEIN512_136:45873,SKEIN512_144:45874,SKEIN512_152:45875,SKEIN512_160:45876,SKEIN512_168:45877,SKEIN512_176:45878,SKEIN512_184:45879,SKEIN512_192:45880,SKEIN512_200:45881,SKEIN512_208:45882,SKEIN512_216:45883,SKEIN512_224:45884,SKEIN512_232:45885,SKEIN512_240:45886,SKEIN512_248:45887,SKEIN512_256:45888,SKEIN512_264:45889,SKEIN512_272:45890,SKEIN512_280:45891,SKEIN512_288:45892,SKEIN512_296:45893,SKEIN512_304:45894,SKEIN512_312:45895,SKEIN512_320:45896,SKEIN512_328:45897,SKEIN512_336:45898,SKEIN512_344:45899,SKEIN512_352:45900,SKEIN512_360:45901,SKEIN512_368:45902,SKEIN512_376:45903,SKEIN512_384:45904,SKEIN512_392:45905,SKEIN512_400:45906,SKEIN512_408:45907,SKEIN512_416:45908,SKEIN512_424:45909,SKEIN512_432:45910,SKEIN512_440:45911,SKEIN512_448:45912,SKEIN512_456:45913,SKEIN512_464:45914,SKEIN512_472:45915,SKEIN512_480:45916,SKEIN512_488:45917,SKEIN512_496:45918,SKEIN512_504:45919,SKEIN512_512:45920,SKEIN1024_8:45921,SKEIN1024_16:45922,SKEIN1024_24:45923,SKEIN1024_32:45924,SKEIN1024_40:45925,SKEIN1024_48:45926,SKEIN1024_56:45927,SKEIN1024_64:45928,SKEIN1024_72:45929,SKEIN1024_80:45930,SKEIN1024_88:45931,SKEIN1024_96:45932,SKEIN1024_104:45933,SKEIN1024_112:45934,SKEIN1024_120:45935,SKEIN1024_128:45936,SKEIN1024_136:45937,SKEIN1024_144:45938,SKEIN1024_152:45939,SKEIN1024_160:45940,SKEIN1024_168:45941,SKEIN1024_176:45942,SKEIN1024_184:45943,SKEIN1024_192:45944,SKEIN1024_200:45945,SKEIN1024_208:45946,SKEIN1024_216:45947,SKEIN1024_224:45948,SKEIN1024_232:45949,SKEIN1024_240:45950,SKEIN1024_248:45951,SKEIN1024_256:45952,SKEIN1024_264:45953,SKEIN1024_272:45954,SKEIN1024_280:45955,SKEIN1024_288:45956,SKEIN1024_296:45957,SKEIN1024_304:45958,SKEIN1024_312:45959,SKEIN1024_320:45960,SKEIN1024_328:45961,SKEIN1024_336:45962,SKEIN1024_344:45963,SKEIN1024_352:45964,SKEIN1024_360:45965,SKEIN1024_368:45966,SKEIN1024_376:45967,SKEIN1024_384:45968,SKEIN1024_392:45969,SKEIN1024_400:45970,SKEIN1024_408:45971,SKEIN1024_416:45972,SKEIN1024_424:45973,SKEIN1024_432:45974,SKEIN1024_440:45975,SKEIN1024_448:45976,SKEIN1024_456:45977,SKEIN1024_464:45978,SKEIN1024_472:45979,SKEIN1024_480:45980,SKEIN1024_488:45981,SKEIN1024_496:45982,SKEIN1024_504:45983,SKEIN1024_512:45984,SKEIN1024_520:45985,SKEIN1024_528:45986,SKEIN1024_536:45987,SKEIN1024_544:45988,SKEIN1024_552:45989,SKEIN1024_560:45990,SKEIN1024_568:45991,SKEIN1024_576:45992,SKEIN1024_584:45993,SKEIN1024_592:45994,SKEIN1024_600:45995,SKEIN1024_608:45996,SKEIN1024_616:45997,SKEIN1024_624:45998,SKEIN1024_632:45999,SKEIN1024_640:46e3,SKEIN1024_648:46001,SKEIN1024_656:46002,SKEIN1024_664:46003,SKEIN1024_672:46004,SKEIN1024_680:46005,SKEIN1024_688:46006,SKEIN1024_696:46007,SKEIN1024_704:46008,SKEIN1024_712:46009,SKEIN1024_720:46010,SKEIN1024_728:46011,SKEIN1024_736:46012,SKEIN1024_744:46013,SKEIN1024_752:46014,SKEIN1024_760:46015,SKEIN1024_768:46016,SKEIN1024_776:46017,SKEIN1024_784:46018,SKEIN1024_792:46019,SKEIN1024_800:46020,SKEIN1024_808:46021,SKEIN1024_816:46022,SKEIN1024_824:46023,SKEIN1024_832:46024,SKEIN1024_840:46025,SKEIN1024_848:46026,SKEIN1024_856:46027,SKEIN1024_864:46028,SKEIN1024_872:46029,SKEIN1024_880:46030,SKEIN1024_888:46031,SKEIN1024_896:46032,SKEIN1024_904:46033,SKEIN1024_912:46034,SKEIN1024_920:46035,SKEIN1024_928:46036,SKEIN1024_936:46037,SKEIN1024_944:46038,SKEIN1024_952:46039,SKEIN1024_960:46040,SKEIN1024_968:46041,SKEIN1024_976:46042,SKEIN1024_984:46043,SKEIN1024_992:46044,SKEIN1024_1000:46045,SKEIN1024_1008:46046,SKEIN1024_1016:46047,SKEIN1024_1024:46048,IP4:4,TCP:6,DCCP:33,IP6:41,IP6ZONE:42,DNS:53,DNS4:54,DNS6:55,DNSADDR:56,SCTP:132,UDP:273,P2P_WEBRTC_STAR:275,P2P_WEBRTC_DIRECT:276,P2P_STARDUST:277,P2P_CIRCUIT:290,UDT:301,UTP:302,UNIX:400,P2P:421,IPFS:421,HTTPS:443,ONION:444,ONION3:445,GARLIC64:446,GARLIC32:447,QUIC:460,WS:477,WSS:478,P2P_WEBSOCKET_STAR:479,HTTP:480,RAW:85,DAG_PB:112,DAG_CBOR:113,LIBP2P_KEY:114,GIT_RAW:120,TORRENT_INFO:123,TORRENT_FILE:124,LEOFCOIN_BLOCK:129,LEOFCOIN_TX:130,LEOFCOIN_PR:131,ETH_BLOCK:144,ETH_BLOCK_LIST:145,ETH_TX_TRIE:146,ETH_TX:147,ETH_TX_RECEIPT_TRIE:148,ETH_TX_RECEIPT:149,ETH_STATE_TRIE:150,ETH_ACCOUNT_SNAPSHOT:151,ETH_STORAGE_TRIE:152,BITCOIN_BLOCK:176,BITCOIN_TX:177,ZCASH_BLOCK:192,ZCASH_TX:193,STELLAR_BLOCK:208,STELLAR_TX:209,DECRED_BLOCK:224,DECRED_TX:225,DASH_BLOCK:240,DASH_TX:241,SWARM_MANIFEST:250,SWARM_FEED:251,DAG_JSON:297,PATH:47,IPLD_NS:226,IPFS_NS:227,SWARM_NS:228,ED25519_PUB:237,HOLOCHAIN_ADR_V0:8417572,HOLOCHAIN_ADR_V1:8483108,HOLOCHAIN_KEY_V0:9728292,HOLOCHAIN_KEY_V1:9793828,HOLOCHAIN_SIG_V0:10645796,HOLOCHAIN_SIG_V1:10711332}),print=Object.freeze({80:"protobuf",81:"cbor",96:"rlp",99:"bencode",48:"multicodec",49:"multihash",50:"multiaddr",51:"multibase",0:"identity",17:"sha1",18:"sha2-256",19:"sha2-512",20:"sha3-512",21:"sha3-384",22:"sha3-256",23:"sha3-224",24:"shake-128",25:"shake-256",26:"keccak-224",27:"keccak-256",28:"keccak-384",29:"keccak-512",34:"murmur3-128",35:"murmur3-32",86:"dbl-sha2-256",212:"md4",213:"md5",214:"bmt",4352:"x11",45569:"blake2b-8",45570:"blake2b-16",45571:"blake2b-24",45572:"blake2b-32",45573:"blake2b-40",45574:"blake2b-48",45575:"blake2b-56",45576:"blake2b-64",45577:"blake2b-72",45578:"blake2b-80",45579:"blake2b-88",45580:"blake2b-96",45581:"blake2b-104",45582:"blake2b-112",45583:"blake2b-120",45584:"blake2b-128",45585:"blake2b-136",45586:"blake2b-144",45587:"blake2b-152",45588:"blake2b-160",45589:"blake2b-168",45590:"blake2b-176",45591:"blake2b-184",45592:"blake2b-192",45593:"blake2b-200",45594:"blake2b-208",45595:"blake2b-216",45596:"blake2b-224",45597:"blake2b-232",45598:"blake2b-240",45599:"blake2b-248",45600:"blake2b-256",45601:"blake2b-264",45602:"blake2b-272",45603:"blake2b-280",45604:"blake2b-288",45605:"blake2b-296",45606:"blake2b-304",45607:"blake2b-312",45608:"blake2b-320",45609:"blake2b-328",45610:"blake2b-336",45611:"blake2b-344",45612:"blake2b-352",45613:"blake2b-360",45614:"blake2b-368",45615:"blake2b-376",45616:"blake2b-384",45617:"blake2b-392",45618:"blake2b-400",45619:"blake2b-408",45620:"blake2b-416",45621:"blake2b-424",45622:"blake2b-432",45623:"blake2b-440",45624:"blake2b-448",45625:"blake2b-456",45626:"blake2b-464",45627:"blake2b-472",45628:"blake2b-480",45629:"blake2b-488",45630:"blake2b-496",45631:"blake2b-504",45632:"blake2b-512",45633:"blake2s-8",45634:"blake2s-16",45635:"blake2s-24",45636:"blake2s-32",45637:"blake2s-40",45638:"blake2s-48",45639:"blake2s-56",45640:"blake2s-64",45641:"blake2s-72",45642:"blake2s-80",45643:"blake2s-88",45644:"blake2s-96",45645:"blake2s-104",45646:"blake2s-112",45647:"blake2s-120",45648:"blake2s-128",45649:"blake2s-136",45650:"blake2s-144",45651:"blake2s-152",45652:"blake2s-160",45653:"blake2s-168",45654:"blake2s-176",45655:"blake2s-184",45656:"blake2s-192",45657:"blake2s-200",45658:"blake2s-208",45659:"blake2s-216",45660:"blake2s-224",45661:"blake2s-232",45662:"blake2s-240",45663:"blake2s-248",45664:"blake2s-256",45825:"skein256-8",45826:"skein256-16",45827:"skein256-24",45828:"skein256-32",45829:"skein256-40",45830:"skein256-48",45831:"skein256-56",45832:"skein256-64",45833:"skein256-72",45834:"skein256-80",45835:"skein256-88",45836:"skein256-96",45837:"skein256-104",45838:"skein256-112",45839:"skein256-120",45840:"skein256-128",45841:"skein256-136",45842:"skein256-144",45843:"skein256-152",45844:"skein256-160",45845:"skein256-168",45846:"skein256-176",45847:"skein256-184",45848:"skein256-192",45849:"skein256-200",45850:"skein256-208",45851:"skein256-216",45852:"skein256-224",45853:"skein256-232",45854:"skein256-240",45855:"skein256-248",45856:"skein256-256",45857:"skein512-8",45858:"skein512-16",45859:"skein512-24",45860:"skein512-32",45861:"skein512-40",45862:"skein512-48",45863:"skein512-56",45864:"skein512-64",45865:"skein512-72",45866:"skein512-80",45867:"skein512-88",45868:"skein512-96",45869:"skein512-104",45870:"skein512-112",45871:"skein512-120",45872:"skein512-128",45873:"skein512-136",45874:"skein512-144",45875:"skein512-152",45876:"skein512-160",45877:"skein512-168",45878:"skein512-176",45879:"skein512-184",45880:"skein512-192",45881:"skein512-200",45882:"skein512-208",45883:"skein512-216",45884:"skein512-224",45885:"skein512-232",45886:"skein512-240",45887:"skein512-248",45888:"skein512-256",45889:"skein512-264",45890:"skein512-272",45891:"skein512-280",45892:"skein512-288",45893:"skein512-296",45894:"skein512-304",45895:"skein512-312",45896:"skein512-320",45897:"skein512-328",45898:"skein512-336",45899:"skein512-344",45900:"skein512-352",45901:"skein512-360",45902:"skein512-368",45903:"skein512-376",45904:"skein512-384",45905:"skein512-392",45906:"skein512-400",45907:"skein512-408",45908:"skein512-416",45909:"skein512-424",45910:"skein512-432",45911:"skein512-440",45912:"skein512-448",45913:"skein512-456",45914:"skein512-464",45915:"skein512-472",45916:"skein512-480",45917:"skein512-488",45918:"skein512-496",45919:"skein512-504",45920:"skein512-512",45921:"skein1024-8",45922:"skein1024-16",45923:"skein1024-24",45924:"skein1024-32",45925:"skein1024-40",45926:"skein1024-48",45927:"skein1024-56",45928:"skein1024-64",45929:"skein1024-72",45930:"skein1024-80",45931:"skein1024-88",45932:"skein1024-96",45933:"skein1024-104",45934:"skein1024-112",45935:"skein1024-120",45936:"skein1024-128",45937:"skein1024-136",45938:"skein1024-144",45939:"skein1024-152",45940:"skein1024-160",45941:"skein1024-168",45942:"skein1024-176",45943:"skein1024-184",45944:"skein1024-192",45945:"skein1024-200",45946:"skein1024-208",45947:"skein1024-216",45948:"skein1024-224",45949:"skein1024-232",45950:"skein1024-240",45951:"skein1024-248",45952:"skein1024-256",45953:"skein1024-264",45954:"skein1024-272",45955:"skein1024-280",45956:"skein1024-288",45957:"skein1024-296",45958:"skein1024-304",45959:"skein1024-312",45960:"skein1024-320",45961:"skein1024-328",45962:"skein1024-336",45963:"skein1024-344",45964:"skein1024-352",45965:"skein1024-360",45966:"skein1024-368",45967:"skein1024-376",45968:"skein1024-384",45969:"skein1024-392",45970:"skein1024-400",45971:"skein1024-408",45972:"skein1024-416",45973:"skein1024-424",45974:"skein1024-432",45975:"skein1024-440",45976:"skein1024-448",45977:"skein1024-456",45978:"skein1024-464",45979:"skein1024-472",45980:"skein1024-480",45981:"skein1024-488",45982:"skein1024-496",45983:"skein1024-504",45984:"skein1024-512",45985:"skein1024-520",45986:"skein1024-528",45987:"skein1024-536",45988:"skein1024-544",45989:"skein1024-552",45990:"skein1024-560",45991:"skein1024-568",45992:"skein1024-576",45993:"skein1024-584",45994:"skein1024-592",45995:"skein1024-600",45996:"skein1024-608",45997:"skein1024-616",45998:"skein1024-624",45999:"skein1024-632",46000:"skein1024-640",46001:"skein1024-648",46002:"skein1024-656",46003:"skein1024-664",46004:"skein1024-672",46005:"skein1024-680",46006:"skein1024-688",46007:"skein1024-696",46008:"skein1024-704",46009:"skein1024-712",46010:"skein1024-720",46011:"skein1024-728",46012:"skein1024-736",46013:"skein1024-744",46014:"skein1024-752",46015:"skein1024-760",46016:"skein1024-768",46017:"skein1024-776",46018:"skein1024-784",46019:"skein1024-792",46020:"skein1024-800",46021:"skein1024-808",46022:"skein1024-816",46023:"skein1024-824",46024:"skein1024-832",46025:"skein1024-840",46026:"skein1024-848",46027:"skein1024-856",46028:"skein1024-864",46029:"skein1024-872",46030:"skein1024-880",46031:"skein1024-888",46032:"skein1024-896",46033:"skein1024-904",46034:"skein1024-912",46035:"skein1024-920",46036:"skein1024-928",46037:"skein1024-936",46038:"skein1024-944",46039:"skein1024-952",46040:"skein1024-960",46041:"skein1024-968",46042:"skein1024-976",46043:"skein1024-984",46044:"skein1024-992",46045:"skein1024-1000",46046:"skein1024-1008",46047:"skein1024-1016",46048:"skein1024-1024",4:"ip4",6:"tcp",33:"dccp",41:"ip6",42:"ip6zone",53:"dns",54:"dns4",55:"dns6",56:"dnsaddr",132:"sctp",273:"udp",275:"p2p-webrtc-star",276:"p2p-webrtc-direct",277:"p2p-stardust",290:"p2p-circuit",301:"udt",302:"utp",400:"unix",421:"p2p",443:"https",444:"onion",445:"onion3",446:"garlic64",447:"garlic32",460:"quic",477:"ws",478:"wss",479:"p2p-websocket-star",480:"http",85:"raw",112:"dag-pb",113:"dag-cbor",114:"libp2p-key",120:"git-raw",123:"torrent-info",124:"torrent-file",129:"leofcoin-block",130:"leofcoin-tx",131:"leofcoin-pr",144:"eth-block",145:"eth-block-list",146:"eth-tx-trie",147:"eth-tx",148:"eth-tx-receipt-trie",149:"eth-tx-receipt",150:"eth-state-trie",151:"eth-account-snapshot",152:"eth-storage-trie",176:"bitcoin-block",177:"bitcoin-tx",192:"zcash-block",193:"zcash-tx",208:"stellar-block",209:"stellar-tx",224:"decred-block",225:"decred-tx",240:"dash-block",241:"dash-tx",250:"swarm-manifest",251:"swarm-feed",297:"dag-json",47:"path",226:"ipld-ns",227:"ipfs-ns",228:"swarm-ns",237:"ed25519-pub",8417572:"holochain-adr-v0",8483108:"holochain-adr-v1",9728292:"holochain-key-v0",9793828:"holochain-key-v1",10645796:"holochain-sig-v0",10711332:"holochain-sig-v1"}),src$4=createCommonjsModule(function(e,t){(t=e.exports).addPrefix=(e,t)=>{let r;if(Buffer.isBuffer(e))r=util.varintBufferEncode(e);else{if(!varintTable_1[e])throw new Error("multicodec not recognized");r=varintTable_1[e]}return Buffer.concat([r,t])},t.rmPrefix=e=>(varint.decode(e),e.slice(varint.decode.bytes)),t.getCodec=e=>{const t=util.varintBufferDecode(e),r=nameTable_1[t.toString("hex")];if(void 0===r)throw new Error("Code `0x"+t.toString("hex")+"` not found");return r},t.getName=e=>nameTable_1[e.toString(16)],t.getNumber=e=>{const t=varintTable_1[e];if(void 0===t)throw new Error("Codec `"+e+"` not found");return util.varintBufferDecode(t)[0]},t.getCode=e=>varint.decode(e),t.getCodeVarint=e=>{const t=varintTable_1[e];if(void 0===t)throw new Error("Codec `"+e+"` not found");return t},t.getVarint=e=>varint.encode(e),Object.assign(t,constants$2),t.print=print}),src_1$2=src$4.addPrefix,src_2$2=src$4.rmPrefix,src_3$2=src$4.getCodec,src_4$2=src$4.getName,src_5$2=src$4.getNumber,src_6$1=src$4.getCode,src_7$1=src$4.getCodeVarint,src_8$1=src$4.getVarint,src_9$1=src$4.print,CIDUtil={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil=CIDUtil,src$5=createCommonjsModule(function(e){class t{constructor(r,n,i){if(e.exports.isCID(r)){let e=r;return this.version=e.version,this.codec=e.codec,void(this.multihash=Buffer.from(e.multihash))}if("string"==typeof r)if(src$1.isEncoded(r)){const e=src$1.decode(r);r=parseInt(e.slice(0,1).toString("hex"),16),n=src$4.getCodec(e.slice(1)),i=src$4.rmPrefix(e.slice(1))}else n="dag-pb",i=src.fromB58String(r),r=0;else if(Buffer.isBuffer(r)){const e=r.slice(0,1),t=parseInt(e.toString("hex"),16);if(0===t||1===t){const e=r;r=t,n=src$4.getCodec(e.slice(1)),i=src$4.rmPrefix(e.slice(1))}else n="dag-pb",i=r,r=0}this.codec=n,this.version=r,this.multihash=i,t.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new r(0,this.codec,this.multihash)}toV1(){return new r(1,this.codec,this.multihash)}toBaseEncodedString(e){switch(e=e||"base58btc",this.version){case 0:if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");return src.toB58String(this.multihash);case 1:return src$1.encode(e,this.buffer).toString();default:throw new Error("Unsupported version")}}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil.checkCIDComponents(e);if(t)throw new Error(t)}}const r=classIs(t,{className:"CID",symbolName:"@ipld/js-cid/CID"});r.codecs=baseTable,e.exports=r});const urlPattern=/^https?:\/\/[^\/]+\/(ip(f|n)s)\/((\w+).*)/,pathPattern=/^\/(ip(f|n)s)\/((\w+).*)/,defaultProtocolMatch=1,defaultHashMath=4,fqdnPattern=/^https?:\/\/([^\/]+)\.(ip(?:f|n)s)\.[^\/]+/,fqdnHashMatch=1,fqdnProtocolMatch=2;function isMultihash(e){const t=convertToString(e);try{const e=Buffer.from(bs58.decode(t));return src.decode(e),!0}catch(e){return!1}}function isMultibase(e){try{return src$1.isEncoded(e)}catch(e){return!1}}function isCID(e){try{return new src$5(e),!0}catch(e){return!1}}function isMultiaddr(e){if(!e)return!1;if(src$2.isMultiaddr(e))return!0;try{return new src$2(e),!0}catch(e){return!1}}function isPeerMultiaddr(e){return isMultiaddr(e)&&src$3.IPFS.matches(e)}function isIpfs(e,t,r=defaultProtocolMatch,n=defaultHashMath){const i=convertToString(e);if(!i)return!1;const o=i.match(t);if(!o)return!1;if("ipfs"!==o[r])return!1;let s=o[n];return s&&t===fqdnPattern&&(s=s.toLowerCase()),isCID(s)}function isIpns(e,t,r=defaultProtocolMatch,n){const i=convertToString(e);if(!i)return!1;const o=i.match(t);if(!o)return!1;if("ipns"!==o[r])return!1;if(n&&t===fqdnPattern){let e=o[n];return isCID(e=e.toLowerCase())}return!0}function isString(e){return"string"==typeof e}function convertToString(e){return Buffer.isBuffer(e)?bs58.encode(e):!!isString(e)&&e}const ipfsSubdomain=e=>isIpfs(e,fqdnPattern,2,1),ipnsSubdomain=e=>isIpns(e,fqdnPattern,2,1);var src$6={multihash:isMultihash,multiaddr:isMultiaddr,peerMultiaddr:isPeerMultiaddr,cid:isCID,base32cid:e=>"base32"===isMultibase(e)&&isCID(e),ipfsSubdomain:ipfsSubdomain,ipnsSubdomain:ipnsSubdomain,subdomain:e=>ipfsSubdomain(e)||ipnsSubdomain(e),subdomainPattern:fqdnPattern,ipfsUrl:e=>isIpfs(e,urlPattern),ipnsUrl:e=>isIpns(e,urlPattern),url:e=>isIpfs(e,urlPattern)||isIpns(e,urlPattern),urlPattern:urlPattern,ipfsPath:e=>isIpfs(e,pathPattern),ipnsPath:e=>isIpns(e,pathPattern),path:e=>isIpfs(e,pathPattern)||isIpns(e,pathPattern),pathPattern:pathPattern,urlOrPath:e=>isIpfs(e,urlPattern)||isIpns(e,urlPattern)||isIpfs(e,pathPattern)||isIpns(e,pathPattern),cidPath:e=>isString(e)&&!isCID(e)&&isIpfs(`/ipfs/${e}`,pathPattern)},bn=createCommonjsModule(function(e){!function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{o=buffer$1.Buffer}catch(e){}function s(e,t,r){for(var n=0,i=Math.min(e.length,r),o=t;o<i;o++){var s=e.charCodeAt(o)-48;n<<=4,n|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return n}function a(e,t,r,n){for(var i=0,o=Math.min(e.length,r),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,o=0;for(r=e.length-6,n=0;r>=t;r-=6)i=s(e,r,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,n++);r+6!==t&&(i=s(e,t,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303),this.strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,c=Math.min(o,o-s)+r,u=0,f=r;f<c;f+=n)u=a(e,f,f+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=a(e,f,e.length,t),f=0;f<s;f++)l*=t;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var f=c>>>26,l=67108863&c,d=Math.min(u,t.length-1),h=Math.max(0,u-e.length+1);h<=d;h++){var p=u-h|0;f+=(s=(i=0|e.words[p])*(o=0|t.words[h])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|f}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?c[6-l.length]+l+n:l+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var d=u[e],h=f[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var b=p.modn(h).toString(e);n=(p=p.idivn(h)).isZero()?b+n:c[d-b.length]+b+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,u=new e(o),f=this.clone();if(c){for(a=0;!f.isZero();a++)s=f.andln(255),f.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!f.isZero();a++)s=f.andln(255),f.iushrn(8),u[o-a-1]=s}return u},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var d=function(e,t,r){var n,i,o,s=e.words,a=t.words,c=r.words,u=0,f=0|s[0],l=8191&f,d=f>>>13,h=0|s[1],p=8191&h,b=h>>>13,m=0|s[2],g=8191&m,y=m>>>13,v=0|s[3],_=8191&v,$=v>>>13,S=0|s[4],E=8191&S,w=S>>>13,C=0|s[5],A=8191&C,k=C>>>13,T=0|s[6],I=8191&T,B=T>>>13,P=0|s[7],R=8191&P,O=P>>>13,N=0|s[8],x=8191&N,L=N>>>13,M=0|s[9],D=8191&M,F=M>>>13,j=0|a[0],U=8191&j,H=j>>>13,K=0|a[1],G=8191&K,V=K>>>13,z=0|a[2],q=8191&z,W=z>>>13,J=0|a[3],X=8191&J,Y=J>>>13,Z=0|a[4],Q=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,fe=0|a[8],le=8191&fe,de=fe>>>13,he=0|a[9],pe=8191&he,be=he>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(u+(n=Math.imul(l,U))|0)+((8191&(i=(i=Math.imul(l,H))+Math.imul(d,U)|0))<<13)|0;u=((o=Math.imul(d,H))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,U),i=(i=Math.imul(p,H))+Math.imul(b,U)|0,o=Math.imul(b,H);var ge=(u+(n=n+Math.imul(l,G)|0)|0)+((8191&(i=(i=i+Math.imul(l,V)|0)+Math.imul(d,G)|0))<<13)|0;u=((o=o+Math.imul(d,V)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,U),i=(i=Math.imul(g,H))+Math.imul(y,U)|0,o=Math.imul(y,H),n=n+Math.imul(p,G)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(b,G)|0,o=o+Math.imul(b,V)|0;var ye=(u+(n=n+Math.imul(l,q)|0)|0)+((8191&(i=(i=i+Math.imul(l,W)|0)+Math.imul(d,q)|0))<<13)|0;u=((o=o+Math.imul(d,W)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(_,U),i=(i=Math.imul(_,H))+Math.imul($,U)|0,o=Math.imul($,H),n=n+Math.imul(g,G)|0,i=(i=i+Math.imul(g,V)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,V)|0,n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,W)|0)+Math.imul(b,q)|0,o=o+Math.imul(b,W)|0;var ve=(u+(n=n+Math.imul(l,X)|0)|0)+((8191&(i=(i=i+Math.imul(l,Y)|0)+Math.imul(d,X)|0))<<13)|0;u=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,H))+Math.imul(w,U)|0,o=Math.imul(w,H),n=n+Math.imul(_,G)|0,i=(i=i+Math.imul(_,V)|0)+Math.imul($,G)|0,o=o+Math.imul($,V)|0,n=n+Math.imul(g,q)|0,i=(i=i+Math.imul(g,W)|0)+Math.imul(y,q)|0,o=o+Math.imul(y,W)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(b,X)|0,o=o+Math.imul(b,Y)|0;var _e=(u+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,ee)|0)+Math.imul(d,Q)|0))<<13)|0;u=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(A,U),i=(i=Math.imul(A,H))+Math.imul(k,U)|0,o=Math.imul(k,H),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,V)|0,n=n+Math.imul(_,q)|0,i=(i=i+Math.imul(_,W)|0)+Math.imul($,q)|0,o=o+Math.imul($,W)|0,n=n+Math.imul(g,X)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0;var $e=(u+(n=n+Math.imul(l,re)|0)|0)+((8191&(i=(i=i+Math.imul(l,ne)|0)+Math.imul(d,re)|0))<<13)|0;u=((o=o+Math.imul(d,ne)|0)+(i>>>13)|0)+($e>>>26)|0,$e&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,H))+Math.imul(B,U)|0,o=Math.imul(B,H),n=n+Math.imul(A,G)|0,i=(i=i+Math.imul(A,V)|0)+Math.imul(k,G)|0,o=o+Math.imul(k,V)|0,n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,W)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,W)|0,n=n+Math.imul(_,X)|0,i=(i=i+Math.imul(_,Y)|0)+Math.imul($,X)|0,o=o+Math.imul($,Y)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ne)|0;var Se=(u+(n=n+Math.imul(l,oe)|0)|0)+((8191&(i=(i=i+Math.imul(l,se)|0)+Math.imul(d,oe)|0))<<13)|0;u=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(R,U),i=(i=Math.imul(R,H))+Math.imul(O,U)|0,o=Math.imul(O,H),n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(B,G)|0,o=o+Math.imul(B,V)|0,n=n+Math.imul(A,q)|0,i=(i=i+Math.imul(A,W)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,W)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul($,Q)|0,o=o+Math.imul($,ee)|0,n=n+Math.imul(g,re)|0,i=(i=i+Math.imul(g,ne)|0)+Math.imul(y,re)|0,o=o+Math.imul(y,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0;var Ee=(u+(n=n+Math.imul(l,ce)|0)|0)+((8191&(i=(i=i+Math.imul(l,ue)|0)+Math.imul(d,ce)|0))<<13)|0;u=((o=o+Math.imul(d,ue)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(x,U),i=(i=Math.imul(x,H))+Math.imul(L,U)|0,o=Math.imul(L,H),n=n+Math.imul(R,G)|0,i=(i=i+Math.imul(R,V)|0)+Math.imul(O,G)|0,o=o+Math.imul(O,V)|0,n=n+Math.imul(I,q)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(B,q)|0,o=o+Math.imul(B,W)|0,n=n+Math.imul(A,X)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(k,X)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul($,re)|0,o=o+Math.imul($,ne)|0,n=n+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,se)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,se)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(b,ce)|0,o=o+Math.imul(b,ue)|0;var we=(u+(n=n+Math.imul(l,le)|0)|0)+((8191&(i=(i=i+Math.imul(l,de)|0)+Math.imul(d,le)|0))<<13)|0;u=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(D,U),i=(i=Math.imul(D,H))+Math.imul(F,U)|0,o=Math.imul(F,H),n=n+Math.imul(x,G)|0,i=(i=i+Math.imul(x,V)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,V)|0,n=n+Math.imul(R,q)|0,i=(i=i+Math.imul(R,W)|0)+Math.imul(O,q)|0,o=o+Math.imul(O,W)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(B,X)|0,o=o+Math.imul(B,Y)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(w,re)|0,o=o+Math.imul(w,ne)|0,n=n+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul($,oe)|0,o=o+Math.imul($,se)|0,n=n+Math.imul(g,ce)|0,i=(i=i+Math.imul(g,ue)|0)+Math.imul(y,ce)|0,o=o+Math.imul(y,ue)|0,n=n+Math.imul(p,le)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(b,le)|0,o=o+Math.imul(b,de)|0;var Ce=(u+(n=n+Math.imul(l,pe)|0)|0)+((8191&(i=(i=i+Math.imul(l,be)|0)+Math.imul(d,pe)|0))<<13)|0;u=((o=o+Math.imul(d,be)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(D,G),i=(i=Math.imul(D,V))+Math.imul(F,G)|0,o=Math.imul(F,V),n=n+Math.imul(x,q)|0,i=(i=i+Math.imul(x,W)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,W)|0,n=n+Math.imul(R,X)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(k,re)|0,o=o+Math.imul(k,ne)|0,n=n+Math.imul(E,oe)|0,i=(i=i+Math.imul(E,se)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,se)|0,n=n+Math.imul(_,ce)|0,i=(i=i+Math.imul(_,ue)|0)+Math.imul($,ce)|0,o=o+Math.imul($,ue)|0,n=n+Math.imul(g,le)|0,i=(i=i+Math.imul(g,de)|0)+Math.imul(y,le)|0,o=o+Math.imul(y,de)|0;var Ae=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,be)|0)+Math.imul(b,pe)|0))<<13)|0;u=((o=o+Math.imul(b,be)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(D,q),i=(i=Math.imul(D,W))+Math.imul(F,q)|0,o=Math.imul(F,W),n=n+Math.imul(x,X)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(O,Q)|0,o=o+Math.imul(O,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(B,re)|0,o=o+Math.imul(B,ne)|0,n=n+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,se)|0,n=n+Math.imul(E,ce)|0,i=(i=i+Math.imul(E,ue)|0)+Math.imul(w,ce)|0,o=o+Math.imul(w,ue)|0,n=n+Math.imul(_,le)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul($,le)|0,o=o+Math.imul($,de)|0;var ke=(u+(n=n+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,be)|0)+Math.imul(y,pe)|0))<<13)|0;u=((o=o+Math.imul(y,be)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(D,X),i=(i=Math.imul(D,Y))+Math.imul(F,X)|0,o=Math.imul(F,Y),n=n+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,ee)|0,n=n+Math.imul(R,re)|0,i=(i=i+Math.imul(R,ne)|0)+Math.imul(O,re)|0,o=o+Math.imul(O,ne)|0,n=n+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(B,oe)|0,o=o+Math.imul(B,se)|0,n=n+Math.imul(A,ce)|0,i=(i=i+Math.imul(A,ue)|0)+Math.imul(k,ce)|0,o=o+Math.imul(k,ue)|0,n=n+Math.imul(E,le)|0,i=(i=i+Math.imul(E,de)|0)+Math.imul(w,le)|0,o=o+Math.imul(w,de)|0;var Te=(u+(n=n+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,be)|0)+Math.imul($,pe)|0))<<13)|0;u=((o=o+Math.imul($,be)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,ee))+Math.imul(F,Q)|0,o=Math.imul(F,ee),n=n+Math.imul(x,re)|0,i=(i=i+Math.imul(x,ne)|0)+Math.imul(L,re)|0,o=o+Math.imul(L,ne)|0,n=n+Math.imul(R,oe)|0,i=(i=i+Math.imul(R,se)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,se)|0,n=n+Math.imul(I,ce)|0,i=(i=i+Math.imul(I,ue)|0)+Math.imul(B,ce)|0,o=o+Math.imul(B,ue)|0,n=n+Math.imul(A,le)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(k,le)|0,o=o+Math.imul(k,de)|0;var Ie=(u+(n=n+Math.imul(E,pe)|0)|0)+((8191&(i=(i=i+Math.imul(E,be)|0)+Math.imul(w,pe)|0))<<13)|0;u=((o=o+Math.imul(w,be)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(D,re),i=(i=Math.imul(D,ne))+Math.imul(F,re)|0,o=Math.imul(F,ne),n=n+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,n=n+Math.imul(R,ce)|0,i=(i=i+Math.imul(R,ue)|0)+Math.imul(O,ce)|0,o=o+Math.imul(O,ue)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(B,le)|0,o=o+Math.imul(B,de)|0;var Be=(u+(n=n+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,be)|0)+Math.imul(k,pe)|0))<<13)|0;u=((o=o+Math.imul(k,be)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(D,oe),i=(i=Math.imul(D,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),n=n+Math.imul(x,ce)|0,i=(i=i+Math.imul(x,ue)|0)+Math.imul(L,ce)|0,o=o+Math.imul(L,ue)|0,n=n+Math.imul(R,le)|0,i=(i=i+Math.imul(R,de)|0)+Math.imul(O,le)|0,o=o+Math.imul(O,de)|0;var Pe=(u+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,be)|0)+Math.imul(B,pe)|0))<<13)|0;u=((o=o+Math.imul(B,be)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(D,ce),i=(i=Math.imul(D,ue))+Math.imul(F,ce)|0,o=Math.imul(F,ue),n=n+Math.imul(x,le)|0,i=(i=i+Math.imul(x,de)|0)+Math.imul(L,le)|0,o=o+Math.imul(L,de)|0;var Re=(u+(n=n+Math.imul(R,pe)|0)|0)+((8191&(i=(i=i+Math.imul(R,be)|0)+Math.imul(O,pe)|0))<<13)|0;u=((o=o+Math.imul(O,be)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(D,le),i=(i=Math.imul(D,de))+Math.imul(F,le)|0,o=Math.imul(F,de);var Oe=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,be)|0)+Math.imul(L,pe)|0))<<13)|0;u=((o=o+Math.imul(L,be)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Ne=(u+(n=Math.imul(D,pe))|0)+((8191&(i=(i=Math.imul(D,be))+Math.imul(F,pe)|0))<<13)|0;return u=((o=Math.imul(F,be))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,c[0]=me,c[1]=ge,c[2]=ye,c[3]=ve,c[4]=_e,c[5]=$e,c[6]=Se,c[7]=Ee,c[8]=we,c[9]=Ce,c[10]=Ae,c[11]=ke,c[12]=Te,c[13]=Ie,c[14]=Be,c[15]=Pe,c[16]=Re,c[17]=Oe,c[18]=Ne,0!==u&&(c[19]=u,r.length++),r};function h(e,t,r){return(new p).mulp(e,t,r)}function p(e,t){this.x=e,this.y=t}Math.imul||(d=l),i.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?d(this,e,t):r<63?l(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=c;u++){var f=o-u,l=(0|e.words[f])*(0|t.words[u]),d=67108863&l;a=67108863&(d=d+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,e,t):h(this,e,t)},p.prototype.makeRBT=function(e){for(var t=new Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},p.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},p.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},p.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),f=0;f<i;f+=a)for(var l=c,d=u,h=0;h<s;h++){var p=r[f+h],b=n[f+h],m=r[f+h+s],g=n[f+h+s],y=l*m-d*g;g=l*g+d*m,m=y,r[f+h]=p+m,n[f+h]=b+g,r[f+h+s]=p-m,n[f+h+s]=b-g,h!==a&&(y=c*l-u*d,d=c*d+u*l,l=y)}},p.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},p.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},p.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},p.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},p.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},p.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),f=new Array(n),l=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,f,l,n,i);for(var h=0;h<n;h++){var p=a[h]*f[h]-c[h]*l[h];c[h]=a[h]*l[h]+c[h]*f[h],a[h]=p}return this.conjugate(a,c,n),this.transform(a,c,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),h(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var o=r.sqr();n<t.length;n++,o=o.sqr())0!==t[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=n;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var f=0;for(u=this.length-1;u>=0&&(0!==f||u>=i);u--){var l=0|this.words[u];this.words[u]=f<<26-o|l>>>o,f=l&a}return c&&0!==f&&(c.words[c.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var c=(0|e.words[i])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),o=e,s=0|o.words[o.length-1];0!==(r=26-this._countBits(s))&&(o=o.ushln(r),n.iushln(r),s=0|o.words[o.length-1]);var a,c=n.length-o.length;if("mod"!==t){(a=new i(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var f=n.clone()._ishlnsubmul(o,1,c);0===f.negative&&(n=f,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var d=67108864*(0|n.words[o.length+l])+(0|n.words[o.length+l-1]);for(d=Math.min(d/s|0,67108863),n._ishlnsubmul(o,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(o,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(o=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:o,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,s,a},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),s=new i(0),a=new i(0),c=new i(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var f=n.clone(),l=t.clone();!t.isZero();){for(var d=0,h=1;0==(t.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(f),s.isub(l)),o.iushrn(1),s.iushrn(1);for(var p=0,b=1;0==(n.words[0]&b)&&p<26;++p,b<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(f),c.isub(l)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a),s.isub(c)):(n.isub(t),a.isub(o),c.isub(s))}return{a:a,b:c,gcd:n.iushln(u)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,s=new i(1),a=new i(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,f=1;0==(t.words[0]&f)&&u<26;++u,f<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,d=1;0==(n.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(o=0===t.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new $(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function m(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){$.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},m.prototype.split=function(e,t){e.iushrn(this.n,0,t)},m.prototype.imulK=function(e){return e.imul(this.k)},n(g,m),g.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},g.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(y,m),n(v,m),n(_,m),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new g;else if("p224"===e)t=new y;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return b[e]=t,t},$.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},$.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},$.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},$.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},$.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},$.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},$.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},$.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},$.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},$.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},$.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},$.prototype.isqr=function(e){return this.imul(e,e.clone())},$.prototype.sqr=function(e){return this.mul(e,e)},$.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);0!==this.pow(f,u).cmp(c);)f.redIAdd(c);for(var l=this.pow(f,o),d=this.pow(e,o.addn(1).iushrn(1)),h=this.pow(e,o),p=s;0!==h.cmp(a);){for(var b=h,m=0;0!==b.cmp(a);m++)b=b.redSqr();r(m<p);var g=this.pow(l,new i(1).iushln(p-m-1));d=d.redMul(g),l=g.redSqr(),h=h.redMul(l),p=m}return d},$.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},$.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var o=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],f=c-1;f>=0;f--){var l=u>>f&1;o!==r[0]&&(o=this.sqr(o)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===f)&&(o=this.mul(o,r[s]),a=0,s=0)):a=0}c=26}return o},$.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},$.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new S(e)},n(S,$),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,commonjsGlobal)}),dist=createCommonjsModule(function(e,t){function r(e,t){if("00"===e.slice(0,2))throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function n(e,t){if(e<56)return Buffer.from([e+t]);var r=o(e),n=o(t+55+r.length/2);return Buffer.from(n+r,"hex")}function i(e){return"0x"===e.slice(0,2)}function o(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function s(e){if(!Buffer.isBuffer(e)){if("string"==typeof e)return i(e)?Buffer.from((r="string"!=typeof(n=e)?n:i(n)?n.slice(2):n).length%2?"0"+r:r,"hex"):Buffer.from(e);if("number"==typeof e)return e?(t=o(e),Buffer.from(t,"hex")):Buffer.from([]);if(null==e)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(bn.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}var t,r,n;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function e(t){if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++)r.push(e(t[i]));var o=Buffer.concat(r);return Buffer.concat([n(o.length,192),o])}var a=s(t);return 1===a.length&&a[0]<128?a:Buffer.concat([n(a.length,128),a])},t.decode=function(e,t){if(void 0===t&&(t=!1),!e||0===e.length)return Buffer.from([]);var n=function e(t){var n,i,o,s,a,c=[],u=t[0];if(u<=127)return{data:t.slice(0,1),remainder:t.slice(1)};if(u<=183){if(n=u-127,o=128===u?Buffer.from([]):t.slice(1,n),2===n&&o[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:o,remainder:t.slice(n)}}if(u<=191){if(i=u-182,n=r(t.slice(1,i).toString("hex"),16),(o=t.slice(i,n+i)).length<n)throw new Error("invalid RLP");return{data:o,remainder:t.slice(n+i)}}if(u<=247){for(n=u-191,s=t.slice(1,n);s.length;)a=e(s),c.push(a.data),s=a.remainder;return{data:c,remainder:t.slice(n)}}i=u-246,n=r(t.slice(1,i).toString("hex"),16);var f=i+n;if(f>t.length)throw new Error("invalid rlp: total length is larger than the data");if(0===(s=t.slice(i,f)).length)throw new Error("invalid rlp, List has a invalid length");for(;s.length;)a=e(s),c.push(a.data),s=a.remainder;return{data:c,remainder:t.slice(f)}}(s(e));if(t)return n;if(0!==n.remainder.length)throw new Error("invalid remainder");return n.data},t.getLength=function(e){if(!e||0===e.length)return Buffer.from([]);var t=s(e),n=t[0];if(n<=127)return t.length;if(n<=183)return n-127;if(n<=191)return n-182;if(n<=247)return n-191;var i=n-246;return i+r(t.slice(1,i).toString("hex"),16)}});unwrapExports(dist);var dist_1=dist.encode,dist_2=dist.decode,dist_3=dist.getLength,inherits_browser=createCommonjsModule(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),inherits=createCommonjsModule(function(e){try{var t=util$j;if("function"!=typeof t.inherits)throw"";e.exports=t.inherits}catch(t){e.exports=inherits_browser}}),Buffer$3=safeBuffer.Buffer,Transform=Stream$1.Transform,keccak=function(e){function t(t,r,n,i,o){Transform.call(this,o),this._rate=t,this._capacity=r,this._delimitedSuffix=n,this._hashBitLength=i,this._options=o,this._state=new e,this._state.initialize(t,r),this._finalized=!1}return inherits(t,Transform),t.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},t.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},t.prototype.update=function(e,t){if(!Buffer$3.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer$3.isBuffer(e)||(e=Buffer$3.from(e,t)),this._state.absorb(e),this},t.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);var t=this._state.squeeze(this._hashBitLength/8);return void 0!==e&&(t=t.toString(e)),this._resetState(),t},t.prototype._resetState=function(){return this._state.initialize(this._rate,this._capacity),this},t.prototype._clone=function(){var e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e},t},Buffer$4=safeBuffer.Buffer,Transform$1=Stream$1.Transform,shake=function(e){function t(t,r,n,i){Transform$1.call(this,i),this._rate=t,this._capacity=r,this._delimitedSuffix=n,this._options=i,this._state=new e,this._state.initialize(t,r),this._finalized=!1}return inherits(t,Transform$1),t.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},t.prototype._flush=function(){},t.prototype._read=function(e){this.push(this.squeeze(e))},t.prototype.update=function(e,t){if(!Buffer$4.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer$4.isBuffer(e)||(e=Buffer$4.from(e,t)),this._state.absorb(e),this},t.prototype.squeeze=function(e,t){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));var r=this._state.squeeze(e);return void 0!==t&&(r=r.toString(t)),r},t.prototype._resetState=function(){return this._state.initialize(this._rate,this._capacity),this},t.prototype._clone=function(){var e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e},t},api=function(e){var t=keccak(e),r=shake(e);return function(e,n){switch("string"==typeof e?e.toLowerCase():e){case"keccak224":return new t(1152,448,null,224,n);case"keccak256":return new t(1088,512,null,256,n);case"keccak384":return new t(832,768,null,384,n);case"keccak512":return new t(576,1024,null,512,n);case"sha3-224":return new t(1152,448,6,224,n);case"sha3-256":return new t(1088,512,6,256,n);case"sha3-384":return new t(832,768,6,384,n);case"sha3-512":return new t(576,1024,6,512,n);case"shake128":return new r(1344,256,31,n);case"shake256":return new r(1088,512,31,n);default:throw new Error("Invald algorithm: "+e)}}},sep=path$4.sep||"/",fileUriToPath_1=fileUriToPath;function fileUriToPath(e){if("string"!=typeof e||e.length<=7||"file://"!=e.substring(0,7))throw new TypeError("must pass in a file:// URI to convert to a file path");var t=decodeURI(e.substring(7)),r=t.indexOf("/"),n=t.substring(0,r),i=t.substring(r+1);return"localhost"==n&&(n=""),n&&(n=sep+sep+n),i=i.replace(/^(.+)\|/,"$1:"),"\\"==sep&&(i=i.replace(/\//g,"\\")),/^.+\:/.test(i)||(i=sep+i),n+i}var bindings_1=createCommonjsModule(function(e,t){var r=path$4.join,n=path$4.dirname,i=fs.accessSync&&function(e){try{fs.accessSync(e)}catch(e){return!1}return!0}||fs.existsSync||path$4.existsSync,o={arrow:process.env.NODE_BINDINGS_ARROW||" → ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};e.exports=t=function(e){"string"==typeof e?e={bindings:e}:e||(e={}),Object.keys(o).map(function(t){t in e||(e[t]=o[t])}),e.module_root||(e.module_root=t.getRoot(t.getFileName())),".node"!=path$4.extname(e.bindings)&&(e.bindings+=".node");for(var n,i,s,a="function"==typeof __webpack_require__?__non_webpack_require__:commonjsRequire,c=[],u=0,f=e.try.length;u<f;u++){n=r.apply(null,e.try[u].map(function(t){return e[t]||t})),c.push(n);try{return i=e.path?a.resolve(n):a(n),e.path||(i.path=n),i}catch(e){if("MODULE_NOT_FOUND"!==e.code&&"QUALIFIED_PATH_RESOLUTION_FAILED"!==e.code&&!/not find/i.test(e.message))throw e}}throw(s=new Error("Could not locate the bindings file. Tried:\n"+c.map(function(t){return e.arrow+t}).join("\n"))).tries=c,s},t.getFileName=function(e){var t,r=Error.prepareStackTrace,n=Error.stackTraceLimit;Error.stackTraceLimit=10,Error.prepareStackTrace=function(r,n){for(var i=0,o=n.length;i<o;i++)if((t=n[i].getFileName())!==__filename){if(!e)return;if(t!==e)return}},Error.captureStackTrace({}),Error.prepareStackTrace=r,Error.stackTraceLimit=n;return 0===t.indexOf("file://")&&(t=fileUriToPath_1(t)),t},t.getRoot=function(e){for(var t,o=n(e);;){if("."===o&&(o=process.cwd()),i(r(o,"package.json"))||i(r(o,"node_modules")))return o;if(t===o)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');t=o,o=r(o,"..")}}}),bindings_2=bindings_1.getFileName,bindings_3=bindings_1.getRoot,bindings=api(bindings_1("keccak")),P1600_ROUND_CONSTANTS=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],p1600=function(e){for(var t=0;t<24;++t){var r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],s=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],f=e[8]^e[18]^e[28]^e[38]^e[48],l=e[9]^e[19]^e[29]^e[39]^e[49],d=f^(i<<1|o>>>31),h=l^(o<<1|i>>>31),p=e[0]^d,b=e[1]^h,m=e[10]^d,g=e[11]^h,y=e[20]^d,v=e[21]^h,_=e[30]^d,$=e[31]^h,S=e[40]^d,E=e[41]^h;d=r^(s<<1|a>>>31),h=n^(a<<1|s>>>31);var w=e[2]^d,C=e[3]^h,A=e[12]^d,k=e[13]^h,T=e[22]^d,I=e[23]^h,B=e[32]^d,P=e[33]^h,R=e[42]^d,O=e[43]^h;d=i^(c<<1|u>>>31),h=o^(u<<1|c>>>31);var N=e[4]^d,x=e[5]^h,L=e[14]^d,M=e[15]^h,D=e[24]^d,F=e[25]^h,j=e[34]^d,U=e[35]^h,H=e[44]^d,K=e[45]^h;d=s^(f<<1|l>>>31),h=a^(l<<1|f>>>31);var G=e[6]^d,V=e[7]^h,z=e[16]^d,q=e[17]^h,W=e[26]^d,J=e[27]^h,X=e[36]^d,Y=e[37]^h,Z=e[46]^d,Q=e[47]^h;d=c^(r<<1|n>>>31),h=u^(n<<1|r>>>31);var ee=e[8]^d,te=e[9]^h,re=e[18]^d,ne=e[19]^h,ie=e[28]^d,oe=e[29]^h,se=e[38]^d,ae=e[39]^h,ce=e[48]^d,ue=e[49]^h,fe=p,le=b,de=g<<4|m>>>28,he=m<<4|g>>>28,pe=y<<3|v>>>29,be=v<<3|y>>>29,me=$<<9|_>>>23,ge=_<<9|$>>>23,ye=S<<18|E>>>14,ve=E<<18|S>>>14,_e=w<<1|C>>>31,$e=C<<1|w>>>31,Se=k<<12|A>>>20,Ee=A<<12|k>>>20,we=T<<10|I>>>22,Ce=I<<10|T>>>22,Ae=P<<13|B>>>19,ke=B<<13|P>>>19,Te=R<<2|O>>>30,Ie=O<<2|R>>>30,Be=x<<30|N>>>2,Pe=N<<30|x>>>2,Re=L<<6|M>>>26,Oe=M<<6|L>>>26,Ne=F<<11|D>>>21,xe=D<<11|F>>>21,Le=j<<15|U>>>17,Me=U<<15|j>>>17,De=K<<29|H>>>3,Fe=H<<29|K>>>3,je=G<<28|V>>>4,Ue=V<<28|G>>>4,He=q<<23|z>>>9,Ke=z<<23|q>>>9,Ge=W<<25|J>>>7,Ve=J<<25|W>>>7,ze=X<<21|Y>>>11,qe=Y<<21|X>>>11,We=Q<<24|Z>>>8,Je=Z<<24|Q>>>8,Xe=ee<<27|te>>>5,Ye=te<<27|ee>>>5,Ze=re<<20|ne>>>12,Qe=ne<<20|re>>>12,et=oe<<7|ie>>>25,tt=ie<<7|oe>>>25,rt=se<<8|ae>>>24,nt=ae<<8|se>>>24,it=ce<<14|ue>>>18,ot=ue<<14|ce>>>18;e[0]=fe^~Se&Ne,e[1]=le^~Ee&xe,e[10]=je^~Ze&pe,e[11]=Ue^~Qe&be,e[20]=_e^~Re&Ge,e[21]=$e^~Oe&Ve,e[30]=Xe^~de&we,e[31]=Ye^~he&Ce,e[40]=Be^~He&et,e[41]=Pe^~Ke&tt,e[2]=Se^~Ne&ze,e[3]=Ee^~xe&qe,e[12]=Ze^~pe&Ae,e[13]=Qe^~be&ke,e[22]=Re^~Ge&rt,e[23]=Oe^~Ve&nt,e[32]=de^~we&Le,e[33]=he^~Ce&Me,e[42]=He^~et&me,e[43]=Ke^~tt&ge,e[4]=Ne^~ze&it,e[5]=xe^~qe&ot,e[14]=pe^~Ae&De,e[15]=be^~ke&Fe,e[24]=Ge^~rt&ye,e[25]=Ve^~nt&ve,e[34]=we^~Le&We,e[35]=Ce^~Me&Je,e[44]=et^~me&Te,e[45]=tt^~ge&Ie,e[6]=ze^~it&fe,e[7]=qe^~ot&le,e[16]=Ae^~De&je,e[17]=ke^~Fe&Ue,e[26]=rt^~ye&_e,e[27]=nt^~ve&$e,e[36]=Le^~We&Xe,e[37]=Me^~Je&Ye,e[46]=me^~Te&Be,e[47]=ge^~Ie&Pe,e[8]=it^~fe&Se,e[9]=ot^~le&Ee,e[18]=De^~je&Ze,e[19]=Fe^~Ue&Qe,e[28]=ye^~_e&Re,e[29]=ve^~$e&Oe,e[38]=We^~Xe&de,e[39]=Je^~Ye&he,e[48]=Te^~Be&He,e[49]=Ie^~Pe&Ke,e[0]^=P1600_ROUND_CONSTANTS[2*t],e[1]^=P1600_ROUND_CONSTANTS[2*t+1]}},keccakStateUnroll={p1600:p1600},Buffer$5=safeBuffer.Buffer;function Keccak(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Keccak.prototype.initialize=function(e,t){for(var r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1},Keccak.prototype.absorb=function(e){for(var t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<this.count%4*8,this.count+=1,this.count===this.blockSize&&(keccakStateUnroll.p1600(this.state),this.count=0)},Keccak.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8,0!=(128&e)&&this.count===this.blockSize-1&&keccakStateUnroll.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8,keccakStateUnroll.p1600(this.state),this.count=0,this.squeezing=!0},Keccak.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);for(var t=Buffer$5.alloc(e),r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>this.count%4*8&255,this.count+=1,this.count===this.blockSize&&(keccakStateUnroll.p1600(this.state),this.count=0);return t},Keccak.prototype.copy=function(e){for(var t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};var keccak$1=Keccak,js=api(keccak$1),keccak$2=createCommonjsModule(function(e){try{e.exports=bindings}catch(t){process.env.DEBUG&&console.error("Keccak bindings are not compiled. Pure JS implementation will be used."),e.exports=js}}),bindings$1=bindings_1("secp256k1"),toString=Object.prototype.toString,isArray$1=function(e,t){if(!Array.isArray(e))throw TypeError(t)},isBoolean=function(e,t){if("[object Boolean]"!==toString.call(e))throw TypeError(t)},isBuffer=function(e,t){if(!Buffer.isBuffer(e))throw TypeError(t)},isFunction$1=function(e,t){if("[object Function]"!==toString.call(e))throw TypeError(t)},isNumber=function(e,t){if("[object Number]"!==toString.call(e))throw TypeError(t)},isObject$1=function(e,t){if("[object Object]"!==toString.call(e))throw TypeError(t)},isBufferLength=function(e,t,r){if(e.length!==t)throw RangeError(r)},isBufferLength2=function(e,t,r,n){if(e.length!==t&&e.length!==r)throw RangeError(n)},isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},isNumberInInterval=function(e,t,r,n){if(e<=t||e>=r)throw RangeError(n)},assert={isArray:isArray$1,isBoolean:isBoolean,isBuffer:isBuffer,isFunction:isFunction$1,isNumber:isNumber,isObject:isObject$1,isBufferLength:isBufferLength,isBufferLength2:isBufferLength2,isLengthGTZero:isLengthGTZero,isNumberInInterval:isNumberInInterval},Buffer$6=safeBuffer.Buffer;function check(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var r=e[5+t];return 0!==r&&(6+t+r===e.length&&(!(128&e[4])&&(!(t>1&&0===e[4]&&!(128&e[5]))&&(!(128&e[t+6])&&!(r>1&&0===e[t+6]&&!(128&e[t+7]))))))}function decode$2(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var r=e[5+t];if(0===r)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}}function encode$2(e,t){var r=e.length,n=t.length;if(0===r)throw new Error("R length is zero");if(0===n)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(n>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var i=Buffer$6.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i}var bip66={check:check,decode:decode$2,encode:encode$2},Buffer$7=safeBuffer.Buffer,EC_PRIVKEY_EXPORT_DER_COMPRESSED=Buffer$7.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),EC_PRIVKEY_EXPORT_DER_UNCOMPRESSED=Buffer$7.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),privateKeyExport=function(e,t,r){var n=Buffer$7.from(r?EC_PRIVKEY_EXPORT_DER_COMPRESSED:EC_PRIVKEY_EXPORT_DER_UNCOMPRESSED);return e.copy(n,r?8:9),t.copy(n,r?181:214),n},privateKeyImport=function(e){var t=e.length,r=0;if(!(t<r+1||48!==e[r])&&!(t<(r+=1)+1)&&128&e[r]){var n=127&e[r];if(r+=1,!(n<1||n>2||t<r+n)){var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);if(!(t<(r+=n)+i||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]))return e.slice(r+2,r+2+e[r+1])}}},signatureExport=function(e){for(var t=Buffer$7.concat([Buffer$7.from([0]),e.r]),r=33,n=0;r>1&&0===t[n]&&!(128&t[n+1]);--r,++n);for(var i=Buffer$7.concat([Buffer$7.from([0]),e.s]),o=33,s=0;o>1&&0===i[s]&&!(128&i[s+1]);--o,++s);return bip66.encode(t.slice(n),i.slice(s))},signatureImport=function(e){var t=Buffer$7.alloc(32,0),r=Buffer$7.alloc(32,0);try{var n=bip66.decode(e);if(33===n.r.length&&0===n.r[0]&&(n.r=n.r.slice(1)),n.r.length>32)throw new Error("R length is too long");if(33===n.s.length&&0===n.s[0]&&(n.s=n.s.slice(1)),n.s.length>32)throw new Error("S length is too long")}catch(e){return}return n.r.copy(t,32-n.r.length),n.s.copy(r,32-n.s.length),{r:t,s:r}},signatureImportLax=function(e){var t=Buffer$7.alloc(32,0),r=Buffer$7.alloc(32,0),n=e.length,i=0;if(48===e[i++]){var o=e[i++];if(!(128&o&&(i+=o-128)>n)&&2===e[i++]){var s=e[i++];if(128&s){if(i+(o=s-128)>n)return;for(;o>0&&0===e[i];i+=1,o-=1);for(s=0;o>0;i+=1,o-=1)s=(s<<8)+e[i]}if(!(s>n-i)){var a=i;if(i+=s,2===e[i++]){var c=e[i++];if(128&c){if(i+(o=c-128)>n)return;for(;o>0&&0===e[i];i+=1,o-=1);for(c=0;o>0;i+=1,o-=1)c=(c<<8)+e[i]}if(!(c>n-i)){var u=i;for(i+=c;s>0&&0===e[a];s-=1,a+=1);if(!(s>32)){var f=e.slice(a,a+s);for(f.copy(t,32-f.length);c>0&&0===e[u];c-=1,u+=1);if(!(c>32)){var l=e.slice(u,u+c);return l.copy(r,32-l.length),{r:t,s:r}}}}}}}}},der={privateKeyExport:privateKeyExport,privateKeyImport:privateKeyImport,signatureExport:signatureExport,signatureImport:signatureImport,signatureImportLax:signatureImportLax},COMPRESSED_TYPE_INVALID="compressed should be a boolean",EC_PRIVATE_KEY_TYPE_INVALID="private key should be a Buffer",EC_PRIVATE_KEY_LENGTH_INVALID="private key length is invalid",EC_PRIVATE_KEY_RANGE_INVALID="private key range is invalid",EC_PRIVATE_KEY_TWEAK_ADD_FAIL="tweak out of range or resulting private key is invalid",EC_PRIVATE_KEY_TWEAK_MUL_FAIL="tweak out of range",EC_PRIVATE_KEY_EXPORT_DER_FAIL="couldn't export to DER format",EC_PRIVATE_KEY_IMPORT_DER_FAIL="couldn't import from DER format",EC_PUBLIC_KEYS_TYPE_INVALID="public keys should be an Array",EC_PUBLIC_KEYS_LENGTH_INVALID="public keys Array should have at least 1 element",EC_PUBLIC_KEY_TYPE_INVALID="public key should be a Buffer",EC_PUBLIC_KEY_LENGTH_INVALID="public key length is invalid",EC_PUBLIC_KEY_PARSE_FAIL="the public key could not be parsed or is invalid",EC_PUBLIC_KEY_CREATE_FAIL="private was invalid, try again",EC_PUBLIC_KEY_TWEAK_ADD_FAIL="tweak out of range or resulting public key is invalid",EC_PUBLIC_KEY_TWEAK_MUL_FAIL="tweak out of range",EC_PUBLIC_KEY_COMBINE_FAIL="the sum of the public keys is not valid",ECDH_FAIL="scalar was invalid (zero or overflow)",ECDSA_SIGNATURE_TYPE_INVALID="signature should be a Buffer",ECDSA_SIGNATURE_LENGTH_INVALID="signature length is invalid",ECDSA_SIGNATURE_PARSE_FAIL="couldn't parse signature",ECDSA_SIGNATURE_PARSE_DER_FAIL="couldn't parse DER signature",ECDSA_SIGNATURE_SERIALIZE_DER_FAIL="couldn't serialize signature to DER format",ECDSA_SIGN_FAIL="nonce generation function failed or private key is invalid",ECDSA_RECOVER_FAIL="couldn't recover public key from signature",MSG32_TYPE_INVALID="message should be a Buffer",MSG32_LENGTH_INVALID="message length is invalid",OPTIONS_TYPE_INVALID="options should be an Object",OPTIONS_DATA_TYPE_INVALID="options.data should be a Buffer",OPTIONS_DATA_LENGTH_INVALID="options.data length is invalid",OPTIONS_NONCEFN_TYPE_INVALID="options.noncefn should be a Function",RECOVERY_ID_TYPE_INVALID="recovery should be a Number",RECOVERY_ID_VALUE_INVALID="recovery should have value between -1 and 4",TWEAK_TYPE_INVALID="tweak should be a Buffer",TWEAK_LENGTH_INVALID="tweak length is invalid",messages={COMPRESSED_TYPE_INVALID:COMPRESSED_TYPE_INVALID,EC_PRIVATE_KEY_TYPE_INVALID:EC_PRIVATE_KEY_TYPE_INVALID,EC_PRIVATE_KEY_LENGTH_INVALID:EC_PRIVATE_KEY_LENGTH_INVALID,EC_PRIVATE_KEY_RANGE_INVALID:EC_PRIVATE_KEY_RANGE_INVALID,EC_PRIVATE_KEY_TWEAK_ADD_FAIL:EC_PRIVATE_KEY_TWEAK_ADD_FAIL,EC_PRIVATE_KEY_TWEAK_MUL_FAIL:EC_PRIVATE_KEY_TWEAK_MUL_FAIL,EC_PRIVATE_KEY_EXPORT_DER_FAIL:EC_PRIVATE_KEY_EXPORT_DER_FAIL,EC_PRIVATE_KEY_IMPORT_DER_FAIL:EC_PRIVATE_KEY_IMPORT_DER_FAIL,EC_PUBLIC_KEYS_TYPE_INVALID:EC_PUBLIC_KEYS_TYPE_INVALID,EC_PUBLIC_KEYS_LENGTH_INVALID:EC_PUBLIC_KEYS_LENGTH_INVALID,EC_PUBLIC_KEY_TYPE_INVALID:EC_PUBLIC_KEY_TYPE_INVALID,EC_PUBLIC_KEY_LENGTH_INVALID:EC_PUBLIC_KEY_LENGTH_INVALID,EC_PUBLIC_KEY_PARSE_FAIL:EC_PUBLIC_KEY_PARSE_FAIL,EC_PUBLIC_KEY_CREATE_FAIL:EC_PUBLIC_KEY_CREATE_FAIL,EC_PUBLIC_KEY_TWEAK_ADD_FAIL:EC_PUBLIC_KEY_TWEAK_ADD_FAIL,EC_PUBLIC_KEY_TWEAK_MUL_FAIL:EC_PUBLIC_KEY_TWEAK_MUL_FAIL,EC_PUBLIC_KEY_COMBINE_FAIL:EC_PUBLIC_KEY_COMBINE_FAIL,ECDH_FAIL:ECDH_FAIL,ECDSA_SIGNATURE_TYPE_INVALID:ECDSA_SIGNATURE_TYPE_INVALID,ECDSA_SIGNATURE_LENGTH_INVALID:ECDSA_SIGNATURE_LENGTH_INVALID,ECDSA_SIGNATURE_PARSE_FAIL:ECDSA_SIGNATURE_PARSE_FAIL,ECDSA_SIGNATURE_PARSE_DER_FAIL:ECDSA_SIGNATURE_PARSE_DER_FAIL,ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:ECDSA_SIGNATURE_SERIALIZE_DER_FAIL,ECDSA_SIGN_FAIL:ECDSA_SIGN_FAIL,ECDSA_RECOVER_FAIL:ECDSA_RECOVER_FAIL,MSG32_TYPE_INVALID:MSG32_TYPE_INVALID,MSG32_LENGTH_INVALID:MSG32_LENGTH_INVALID,OPTIONS_TYPE_INVALID:OPTIONS_TYPE_INVALID,OPTIONS_DATA_TYPE_INVALID:OPTIONS_DATA_TYPE_INVALID,OPTIONS_DATA_LENGTH_INVALID:OPTIONS_DATA_LENGTH_INVALID,OPTIONS_NONCEFN_TYPE_INVALID:OPTIONS_NONCEFN_TYPE_INVALID,RECOVERY_ID_TYPE_INVALID:RECOVERY_ID_TYPE_INVALID,RECOVERY_ID_VALUE_INVALID:RECOVERY_ID_VALUE_INVALID,TWEAK_TYPE_INVALID:TWEAK_TYPE_INVALID,TWEAK_LENGTH_INVALID:TWEAK_LENGTH_INVALID},messages$1=Object.freeze({COMPRESSED_TYPE_INVALID:COMPRESSED_TYPE_INVALID,EC_PRIVATE_KEY_TYPE_INVALID:EC_PRIVATE_KEY_TYPE_INVALID,EC_PRIVATE_KEY_LENGTH_INVALID:EC_PRIVATE_KEY_LENGTH_INVALID,EC_PRIVATE_KEY_RANGE_INVALID:EC_PRIVATE_KEY_RANGE_INVALID,EC_PRIVATE_KEY_TWEAK_ADD_FAIL:EC_PRIVATE_KEY_TWEAK_ADD_FAIL,EC_PRIVATE_KEY_TWEAK_MUL_FAIL:EC_PRIVATE_KEY_TWEAK_MUL_FAIL,EC_PRIVATE_KEY_EXPORT_DER_FAIL:EC_PRIVATE_KEY_EXPORT_DER_FAIL,EC_PRIVATE_KEY_IMPORT_DER_FAIL:EC_PRIVATE_KEY_IMPORT_DER_FAIL,EC_PUBLIC_KEYS_TYPE_INVALID:EC_PUBLIC_KEYS_TYPE_INVALID,EC_PUBLIC_KEYS_LENGTH_INVALID:EC_PUBLIC_KEYS_LENGTH_INVALID,EC_PUBLIC_KEY_TYPE_INVALID:EC_PUBLIC_KEY_TYPE_INVALID,EC_PUBLIC_KEY_LENGTH_INVALID:EC_PUBLIC_KEY_LENGTH_INVALID,EC_PUBLIC_KEY_PARSE_FAIL:EC_PUBLIC_KEY_PARSE_FAIL,EC_PUBLIC_KEY_CREATE_FAIL:EC_PUBLIC_KEY_CREATE_FAIL,EC_PUBLIC_KEY_TWEAK_ADD_FAIL:EC_PUBLIC_KEY_TWEAK_ADD_FAIL,EC_PUBLIC_KEY_TWEAK_MUL_FAIL:EC_PUBLIC_KEY_TWEAK_MUL_FAIL,EC_PUBLIC_KEY_COMBINE_FAIL:EC_PUBLIC_KEY_COMBINE_FAIL,ECDH_FAIL:ECDH_FAIL,ECDSA_SIGNATURE_TYPE_INVALID:ECDSA_SIGNATURE_TYPE_INVALID,ECDSA_SIGNATURE_LENGTH_INVALID:ECDSA_SIGNATURE_LENGTH_INVALID,ECDSA_SIGNATURE_PARSE_FAIL:ECDSA_SIGNATURE_PARSE_FAIL,ECDSA_SIGNATURE_PARSE_DER_FAIL:ECDSA_SIGNATURE_PARSE_DER_FAIL,ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:ECDSA_SIGNATURE_SERIALIZE_DER_FAIL,ECDSA_SIGN_FAIL:ECDSA_SIGN_FAIL,ECDSA_RECOVER_FAIL:ECDSA_RECOVER_FAIL,MSG32_TYPE_INVALID:MSG32_TYPE_INVALID,MSG32_LENGTH_INVALID:MSG32_LENGTH_INVALID,OPTIONS_TYPE_INVALID:OPTIONS_TYPE_INVALID,OPTIONS_DATA_TYPE_INVALID:OPTIONS_DATA_TYPE_INVALID,OPTIONS_DATA_LENGTH_INVALID:OPTIONS_DATA_LENGTH_INVALID,OPTIONS_NONCEFN_TYPE_INVALID:OPTIONS_NONCEFN_TYPE_INVALID,RECOVERY_ID_TYPE_INVALID:RECOVERY_ID_TYPE_INVALID,RECOVERY_ID_VALUE_INVALID:RECOVERY_ID_VALUE_INVALID,TWEAK_TYPE_INVALID:TWEAK_TYPE_INVALID,TWEAK_LENGTH_INVALID:TWEAK_LENGTH_INVALID,default:messages}),messages$2=getCjsExportFromNamespace(messages$1);function initCompressedValue(e,t){return void 0===e?t:(assert.isBoolean(e,messages$2.COMPRESSED_TYPE_INVALID),e)}var lib$2=function(e){return{privateKeyVerify:function(t){return assert.isBuffer(t,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){assert.isBuffer(t,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),assert.isBufferLength(t,32,messages$2.EC_PRIVATE_KEY_LENGTH_INVALID),r=initCompressedValue(r,!0);var n=e.privateKeyExport(t,r);return der.privateKeyExport(t,n,r)},privateKeyImport:function(t){if(assert.isBuffer(t,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),(t=der.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(messages$2.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return assert.isBuffer(t,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),assert.isBufferLength(t,32,messages$2.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return assert.isBuffer(t,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),assert.isBufferLength(t,32,messages$2.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return assert.isBuffer(t,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),assert.isBufferLength(t,32,messages$2.EC_PRIVATE_KEY_LENGTH_INVALID),assert.isBuffer(r,messages$2.TWEAK_TYPE_INVALID),assert.isBufferLength(r,32,messages$2.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return assert.isBuffer(t,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),assert.isBufferLength(t,32,messages$2.EC_PRIVATE_KEY_LENGTH_INVALID),assert.isBuffer(r,messages$2.TWEAK_TYPE_INVALID),assert.isBufferLength(r,32,messages$2.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return assert.isBuffer(t,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),assert.isBufferLength(t,32,messages$2.EC_PRIVATE_KEY_LENGTH_INVALID),r=initCompressedValue(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return assert.isBuffer(t,messages$2.EC_PUBLIC_KEY_TYPE_INVALID),assert.isBufferLength2(t,33,65,messages$2.EC_PUBLIC_KEY_LENGTH_INVALID),r=initCompressedValue(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return assert.isBuffer(t,messages$2.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,n){return assert.isBuffer(t,messages$2.EC_PUBLIC_KEY_TYPE_INVALID),assert.isBufferLength2(t,33,65,messages$2.EC_PUBLIC_KEY_LENGTH_INVALID),assert.isBuffer(r,messages$2.TWEAK_TYPE_INVALID),assert.isBufferLength(r,32,messages$2.TWEAK_LENGTH_INVALID),n=initCompressedValue(n,!0),e.publicKeyTweakAdd(t,r,n)},publicKeyTweakMul:function(t,r,n){return assert.isBuffer(t,messages$2.EC_PUBLIC_KEY_TYPE_INVALID),assert.isBufferLength2(t,33,65,messages$2.EC_PUBLIC_KEY_LENGTH_INVALID),assert.isBuffer(r,messages$2.TWEAK_TYPE_INVALID),assert.isBufferLength(r,32,messages$2.TWEAK_LENGTH_INVALID),n=initCompressedValue(n,!0),e.publicKeyTweakMul(t,r,n)},publicKeyCombine:function(t,r){assert.isArray(t,messages$2.EC_PUBLIC_KEYS_TYPE_INVALID),assert.isLengthGTZero(t,messages$2.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var n=0;n<t.length;++n)assert.isBuffer(t[n],messages$2.EC_PUBLIC_KEY_TYPE_INVALID),assert.isBufferLength2(t[n],33,65,messages$2.EC_PUBLIC_KEY_LENGTH_INVALID);return r=initCompressedValue(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return assert.isBuffer(t,messages$2.ECDSA_SIGNATURE_TYPE_INVALID),assert.isBufferLength(t,64,messages$2.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){assert.isBuffer(t,messages$2.ECDSA_SIGNATURE_TYPE_INVALID),assert.isBufferLength(t,64,messages$2.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return der.signatureExport(r)},signatureImport:function(t){assert.isBuffer(t,messages$2.ECDSA_SIGNATURE_TYPE_INVALID),assert.isLengthGTZero(t,messages$2.ECDSA_SIGNATURE_LENGTH_INVALID);var r=der.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(messages$2.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){assert.isBuffer(t,messages$2.ECDSA_SIGNATURE_TYPE_INVALID),assert.isLengthGTZero(t,messages$2.ECDSA_SIGNATURE_LENGTH_INVALID);var r=der.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(messages$2.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,n){assert.isBuffer(t,messages$2.MSG32_TYPE_INVALID),assert.isBufferLength(t,32,messages$2.MSG32_LENGTH_INVALID),assert.isBuffer(r,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),assert.isBufferLength(r,32,messages$2.EC_PRIVATE_KEY_LENGTH_INVALID);var i=null,o=null;return void 0!==n&&(assert.isObject(n,messages$2.OPTIONS_TYPE_INVALID),void 0!==n.data&&(assert.isBuffer(n.data,messages$2.OPTIONS_DATA_TYPE_INVALID),assert.isBufferLength(n.data,32,messages$2.OPTIONS_DATA_LENGTH_INVALID),i=n.data),void 0!==n.noncefn&&(assert.isFunction(n.noncefn,messages$2.OPTIONS_NONCEFN_TYPE_INVALID),o=n.noncefn)),e.sign(t,r,o,i)},verify:function(t,r,n){return assert.isBuffer(t,messages$2.MSG32_TYPE_INVALID),assert.isBufferLength(t,32,messages$2.MSG32_LENGTH_INVALID),assert.isBuffer(r,messages$2.ECDSA_SIGNATURE_TYPE_INVALID),assert.isBufferLength(r,64,messages$2.ECDSA_SIGNATURE_LENGTH_INVALID),assert.isBuffer(n,messages$2.EC_PUBLIC_KEY_TYPE_INVALID),assert.isBufferLength2(n,33,65,messages$2.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,n)},recover:function(t,r,n,i){return assert.isBuffer(t,messages$2.MSG32_TYPE_INVALID),assert.isBufferLength(t,32,messages$2.MSG32_LENGTH_INVALID),assert.isBuffer(r,messages$2.ECDSA_SIGNATURE_TYPE_INVALID),assert.isBufferLength(r,64,messages$2.ECDSA_SIGNATURE_LENGTH_INVALID),assert.isNumber(n,messages$2.RECOVERY_ID_TYPE_INVALID),assert.isNumberInInterval(n,-1,4,messages$2.RECOVERY_ID_VALUE_INVALID),i=initCompressedValue(i,!0),e.recover(t,r,n,i)},ecdh:function(t,r){return assert.isBuffer(t,messages$2.EC_PUBLIC_KEY_TYPE_INVALID),assert.isBufferLength2(t,33,65,messages$2.EC_PUBLIC_KEY_LENGTH_INVALID),assert.isBuffer(r,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),assert.isBufferLength(r,32,messages$2.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,n){return assert.isBuffer(t,messages$2.EC_PUBLIC_KEY_TYPE_INVALID),assert.isBufferLength2(t,33,65,messages$2.EC_PUBLIC_KEY_LENGTH_INVALID),assert.isBuffer(r,messages$2.EC_PRIVATE_KEY_TYPE_INVALID),assert.isBufferLength(r,32,messages$2.EC_PRIVATE_KEY_LENGTH_INVALID),n=initCompressedValue(n,!0),e.ecdhUnsafe(t,r,n)}}},createHash=crypto$l.createHash,_from="elliptic@^6.4.1",_id="elliptic@6.4.1",_inBundle=!1,_integrity="sha512-BsXLz5sqX8OHcsh7CqBMztyXARmGQ3LWPtGjJi6DiJHq5C/qvi9P3OqgswKSDftbu8+IoI/QDTAm2fFnQ9SZSQ==",_location="/elliptic",_phantomChildren={},_requested={type:"range",registry:!0,raw:"elliptic@^6.4.1",name:"elliptic",escapedName:"elliptic",rawSpec:"^6.4.1",saveSpec:null,fetchSpec:"^6.4.1"},_requiredBy=["/browserify-sign","/create-ecdh","/secp256k1","/tiny-secp256k1"],_resolved="https://registry.npmjs.org/elliptic/-/elliptic-6.4.1.tgz",_shasum="c2d0b7776911b86722c632c3c06c60f2f819939a",_spec="elliptic@^6.4.1",_where="/Users/mariusdarila/go/src/akasha-sdk-js/node_modules/secp256k1",author={name:"Fedor Indutny",email:"fedor@indutny.com"},bugs={url:"https://github.com/indutny/elliptic/issues"},bundleDependencies=!1,dependencies={"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},deprecated=!1,description="EC cryptography",devDependencies={brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},files=["lib"],homepage="https://github.com/indutny/elliptic",keywords=["EC","Elliptic","curve","Cryptography"],license="MIT",main="lib/elliptic.js",name$1="elliptic",repository={type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts={jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version="6.4.1",_package={_from:_from,_id:_id,_inBundle:_inBundle,_integrity:_integrity,_location:_location,_phantomChildren:_phantomChildren,_requested:_requested,_requiredBy:_requiredBy,_resolved:_resolved,_shasum:_shasum,_spec:_spec,_where:_where,author:author,bugs:bugs,bundleDependencies:bundleDependencies,dependencies:dependencies,deprecated:deprecated,description:description,devDependencies:devDependencies,files:files,homepage:homepage,keywords:keywords,license:license,main:main,name:name$1,repository:repository,scripts:scripts,version:version},_package$1=Object.freeze({_from:_from,_id:_id,_inBundle:_inBundle,_integrity:_integrity,_location:_location,_phantomChildren:_phantomChildren,_requested:_requested,_requiredBy:_requiredBy,_resolved:_resolved,_shasum:_shasum,_spec:_spec,_where:_where,author:author,bugs:bugs,bundleDependencies:bundleDependencies,dependencies:dependencies,deprecated:deprecated,description:description,devDependencies:devDependencies,files:files,homepage:homepage,keywords:keywords,license:license,main:main,name:name$1,repository:repository,scripts:scripts,version:version,default:_package}),minimalisticAssert=assert$1;function assert$1(e,t){if(!e)throw new Error(t||"Assertion failed")}assert$1.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var r,utils_1=createCommonjsModule(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}}),utils_1$1=createCommonjsModule(function(e,t){var r=t;r.assert=minimalisticAssert,r.toArray=utils_1.toArray,r.zero2=utils_1.zero2,r.toHex=utils_1.toHex,r.encode=utils_1.encode,r.getNAF=function(e,t){for(var r=[],n=1<<t+1,i=e.clone();i.cmpn(1)>=0;){var o;if(i.isOdd()){var s=i.andln(n-1);o=s>(n>>1)-1?(n>>1)-s:s,i.isubn(o)}else o=0;r.push(o);for(var a=0!==i.cmpn(0)&&0===i.andln(n-1)?t+1:1,c=1;c<a;c++)r.push(0);i.iushrn(a)}return r},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n=0,i=0;e.cmpn(-n)>0||t.cmpn(-i)>0;){var o,s,a,c=e.andln(3)+n&3,u=t.andln(3)+i&3;3===c&&(c=-1),3===u&&(u=-1),o=0==(1&c)?0:3!=(a=e.andln(7)+n&7)&&5!==a||2!==u?c:-c,r[0].push(o),s=0==(1&u)?0:3!=(a=t.andln(7)+i&7)&&5!==a||2!==c?u:-u,r[1].push(s),2*n===o+1&&(n=1-n),2*i===s+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new bn(e,"hex","le")}}),brorand=function(e){return r||(r=new Rand(null)),r.generate(e)};function Rand(e){this.rand=e}var Rand_1=Rand;if(Rand.prototype.generate=function(e){return this._rand(e)},Rand.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto$1=crypto$l;if("function"!=typeof crypto$1.randomBytes)throw new Error("Not supported");Rand.prototype._rand=function(e){return crypto$1.randomBytes(e)}}catch(e){}brorand.Rand=Rand_1;var utils=elliptic_1.utils,getNAF=utils.getNAF,getJSF=utils.getJSF,assert$2=utils.assert;function BaseCurve(e,t){this.type=e,this.p=new bn(t.p,16),this.red=t.prime?bn.red(t.prime):bn.mont(this.p),this.zero=new bn(0).toRed(this.red),this.one=new bn(1).toRed(this.red),this.two=new bn(2).toRed(this.red),this.n=t.n&&new bn(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$2=BaseCurve;function BasePoint(e,t){this.curve=e,this.type=t,this.precomputed=null}BaseCurve.prototype.point=function(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function(e,t){assert$2(e.precomputed);var r=e._getDoubles(),n=getNAF(t,1),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;for(var o=[],s=0;s<n.length;s+=r.step){var a=0;for(t=s+r.step-1;t>=s;t--)a=(a<<1)+n[t];o.push(a)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=i;f>0;f--){for(s=0;s<o.length;s++){(a=o[s])===f?u=u.mixedAdd(r.points[s]):a===-f&&(u=u.mixedAdd(r.points[s].neg()))}c=c.add(u)}return c.toP()},BaseCurve.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=getNAF(t,r),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(t=0;a>=0&&0===o[a];a--)t++;if(a>=0&&t++,s=s.dblp(t),a<0)break;var c=o[a];assert$2(0!==c),s="affine"===e.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===e.type?s.toP():s},BaseCurve.prototype._wnafMulAdd=function(e,t,r,n,i){for(var o=this._wnafT1,s=this._wnafT2,a=this._wnafT3,c=0,u=0;u<n;u++){var f=(E=t[u])._getNAFPoints(e);o[u]=f.wnd,s[u]=f.points}for(u=n-1;u>=1;u-=2){var l=u-1,d=u;if(1===o[l]&&1===o[d]){var h=[t[l],null,null,t[d]];0===t[l].y.cmp(t[d].y)?(h[1]=t[l].add(t[d]),h[2]=t[l].toJ().mixedAdd(t[d].neg())):0===t[l].y.cmp(t[d].y.redNeg())?(h[1]=t[l].toJ().mixedAdd(t[d]),h[2]=t[l].add(t[d].neg())):(h[1]=t[l].toJ().mixedAdd(t[d]),h[2]=t[l].toJ().mixedAdd(t[d].neg()));var p=[-3,-1,-5,-7,0,7,5,1,3],b=getJSF(r[l],r[d]);c=Math.max(b[0].length,c),a[l]=new Array(c),a[d]=new Array(c);for(var m=0;m<c;m++){var g=0|b[0][m],y=0|b[1][m];a[l][m]=p[3*(g+1)+(y+1)],a[d][m]=0,s[l]=h}}else a[l]=getNAF(r[l],o[l]),a[d]=getNAF(r[d],o[d]),c=Math.max(a[l].length,c),c=Math.max(a[d].length,c)}var v=this.jpoint(null,null,null),_=this._wnafT4;for(u=c;u>=0;u--){for(var $=0;u>=0;){var S=!0;for(m=0;m<n;m++)_[m]=0|a[m][u],0!==_[m]&&(S=!1);if(!S)break;$++,u--}if(u>=0&&$++,v=v.dblp($),u<0)break;for(m=0;m<n;m++){var E,w=_[m];0!==w&&(w>0?E=s[m][w-1>>1]:w<0&&(E=s[m][-w-1>>1].neg()),v="affine"===E.type?v.mixedAdd(E):v.add(E))}}for(u=0;u<n;u++)s[u]=null;return i?v:v.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function(){throw new Error("Not implemented")},BasePoint.prototype.validate=function(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function(e,t){e=utils.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?assert$2(e[e.length-1]%2==0):7===e[0]&&assert$2(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function(e){return this.encode(e,!0)},BasePoint.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},BasePoint.prototype.encode=function(e,t){return utils.encode(this._encode(t),e)},BasePoint.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},BasePoint.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},BasePoint.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},BasePoint.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},BasePoint.prototype._getBeta=function(){return null},BasePoint.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var Base$1=curve_1.base,assert$3=elliptic_1.utils.assert;function ShortCurve(e){Base$1.call(this,"short",e),this.a=new bn(e.a,16).toRed(this.red),this.b=new bn(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits(ShortCurve,Base$1);var short_1=ShortCurve;function Point(e,t,r,n){Base$1.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new bn(t,16),this.y=new bn(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(e,t,r,n){Base$1.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new bn(0)):(this.x=new bn(t,16),this.y=new bn(r,16),this.z=new bn(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ShortCurve.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new bn(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new bn(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],assert$3(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new bn(e.a,16),b:new bn(e.b,16)}}):this._getEndoBasis(r)}}},ShortCurve.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:bn.mont(e),r=new bn(2).toRed(t).redInvm(),n=r.redNeg(),i=new bn(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},ShortCurve.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,c,u,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,d=this.n.clone(),h=new bn(1),p=new bn(0),b=new bn(0),m=new bn(1),g=0;0!==l.cmpn(0);){var y=d.div(l);c=d.sub(y.mul(l)),u=b.sub(y.mul(h));var v=m.sub(y.mul(p));if(!n&&c.cmp(f)<0)t=a.neg(),r=h,n=c.neg(),i=u;else if(n&&2==++g)break;a=c,d=l,l=c,b=h,h=u,m=p,p=v}o=c.neg(),s=u;var _=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(_)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},ShortCurve.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),c=i.mul(r.b),u=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:c.add(u).neg()}},ShortCurve.prototype.pointFromX=function(e,t){(e=new bn(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},ShortCurve.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},ShortCurve.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),n[2*o]=a,n[2*o+1]=c,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),f=0;f<2*o;f++)n[f]=null,i[f]=null;return u},inherits(Point,Base$1.BasePoint),ShortCurve.prototype.point=function(e,t,r){return new Point(this,e,t,r)},ShortCurve.prototype.pointFromJSON=function(e,t){return Point.fromJSON(this,e,t)},Point.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Point.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return this.inf},Point.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Point.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},Point.prototype.getX=function(){return this.x.fromRed()},Point.prototype.getY=function(){return this.y.fromRed()},Point.prototype.mul=function(e){return e=new bn(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Point.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Point.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Point.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Point.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Point.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},inherits(JPoint,Base$1.BasePoint),ShortCurve.prototype.jpoint=function(e,t,r){return new JPoint(this,e,t,r)},JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),f=u.redMul(a),l=n.redMul(u),d=c.redSqr().redIAdd(f).redISub(l).redISub(l),h=c.redMul(l.redISub(d)).redISub(o.redMul(f)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,h,p)},JPoint.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),f=r.redMul(c),l=a.redSqr().redIAdd(u).redISub(f).redISub(f),d=a.redMul(f.redISub(l)).redISub(i.redMul(u)),h=this.z.redMul(s);return this.curve.jpoint(l,d,h)},JPoint.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),u=s.redAdd(s);for(r=0;r<e;r++){var f=o.redSqr(),l=u.redSqr(),d=l.redSqr(),h=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(c)),p=o.redMul(l),b=h.redSqr().redISub(p.redAdd(p)),m=p.redISub(b),g=h.redMul(m);g=g.redIAdd(g).redISub(d);var y=u.redMul(a);r+1<e&&(c=c.redMul(d)),o=b,a=y,u=g}return this.curve.jpoint(o,u.redMul(i),a)},JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),l=this.y.redSqr(),d=l.redSqr(),h=this.x.redAdd(l).redSqr().redISub(f).redISub(d);h=h.redIAdd(h);var p=f.redAdd(f).redIAdd(f),b=p.redSqr(),m=d.redIAdd(d);m=(m=m.redIAdd(m)).redIAdd(m),e=b.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},JPoint.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);e=c;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),l=this.y.redSqr(),d=this.x.redMul(l),h=this.x.redSub(f).redMul(this.x.redAdd(f));h=h.redAdd(h).redIAdd(h);var p=d.redIAdd(d),b=(p=p.redIAdd(p)).redAdd(p);e=h.redSqr().redISub(b),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(f);var m=l.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=h.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},JPoint.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(s),f=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(f),d=s.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var h=a.redMul(l).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(f,h,p)},JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),f=t.redMul(u);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.x.redMul(a).redISub(f);l=(l=l.redIAdd(l)).redIAdd(l);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var h=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,d,h)},JPoint.prototype.mul=function(e,t){return e=new bn(e,t),this.curve._wnafMul(this,e)},JPoint.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},JPoint.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Base$2=curve_1.base,utils$1=elliptic_1.utils;function MontCurve(e){Base$2.call(this,"mont",e),this.a=new bn(e.a,16).toRed(this.red),this.b=new bn(e.b,16).toRed(this.red),this.i4=new bn(4).toRed(this.red).redInvm(),this.two=new bn(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits(MontCurve,Base$2);var mont=MontCurve;function Point$1(e,t,r){Base$2.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new bn(t,16),this.z=new bn(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}MontCurve.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},inherits(Point$1,Base$2.BasePoint),MontCurve.prototype.decodePoint=function(e,t){return this.point(utils$1.toArray(e,t),1)},MontCurve.prototype.point=function(e,t){return new Point$1(this,e,t)},MontCurve.prototype.pointFromJSON=function(e){return Point$1.fromJSON(this,e)},Point$1.prototype.precompute=function(){},Point$1.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Point$1.fromJSON=function(e,t){return new Point$1(e,t[0],t[1]||e.one)},Point$1.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$1.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Point$1.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},Point$1.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Point$1.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(r),s=i.redMul(n),a=t.z.redMul(o.redAdd(s).redSqr()),c=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,c)},Point$1.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},Point$1.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$1.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$1.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},Point$1.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point$1.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Base$3=curve_1.base,assert$4=elliptic_1.utils.assert;function EdwardsCurve(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,Base$3.call(this,"edwards",e),this.a=new bn(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new bn(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new bn(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$4(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}inherits(EdwardsCurve,Base$3);var edwards=EdwardsCurve;function Point$2(e,t,r,n,i){Base$3.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new bn(t,16),this.y=new bn(r,16),this.z=n?new bn(n,16):this.curve.one,this.t=i&&new bn(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}EdwardsCurve.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},EdwardsCurve.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},EdwardsCurve.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},EdwardsCurve.prototype.pointFromX=function(e,t){(e=new bn(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(i.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var a=s.fromRed().isOdd();return(t&&!a||!t&&a)&&(s=s.redNeg()),this.point(e,s)},EdwardsCurve.prototype.pointFromY=function(e,t){(e=new bn(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(i.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},EdwardsCurve.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},inherits(Point$2,Base$3.BasePoint),EdwardsCurve.prototype.pointFromJSON=function(e){return Point$2.fromJSON(this,e)},EdwardsCurve.prototype.point=function(e,t,r,n){return new Point$2(this,e,t,r,n)},Point$2.fromJSON=function(e,t){return new Point$2(e,t[0],t[1],t[2])},Point$2.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$2.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},Point$2.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),s=o.redSub(r),a=n.redSub(t),c=i.redMul(s),u=o.redMul(a),f=i.redMul(a),l=s.redMul(o);return this.curve.point(c,u,l,f)},Point$2.prototype._projDbl=function(){var e,t,r,n=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var s=(u=this.curve._mulA(i)).redAdd(o);if(this.zOne)e=n.redSub(i).redSub(o).redMul(s.redSub(this.curve.two)),t=s.redMul(u.redSub(o)),r=s.redSqr().redSub(s).redSub(s);else{var a=this.z.redSqr(),c=s.redSub(a).redISub(a);e=n.redSub(i).redISub(o).redMul(c),t=s.redMul(u.redSub(o)),r=s.redMul(c)}}else{var u=i.redAdd(o);a=this.curve._mulC(this.z).redSqr(),c=u.redSub(a).redSub(a);e=this.curve._mulC(n.redISub(u)).redMul(c),t=this.curve._mulC(u).redMul(i.redISub(o)),r=u.redMul(c)}return this.curve.point(e,t,r)},Point$2.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point$2.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),s=i.redSub(n),a=i.redAdd(n),c=r.redAdd(t),u=o.redMul(s),f=a.redMul(c),l=o.redMul(c),d=s.redMul(a);return this.curve.point(u,f,d,l)},Point$2.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),c=i.redSub(a),u=i.redAdd(a),f=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),l=n.redMul(c).redMul(f);return this.curve.twisted?(t=n.redMul(u).redMul(s.redSub(this.curve._mulA(o))),r=c.redMul(u)):(t=n.redMul(u).redMul(s.redSub(o)),r=this.curve._mulC(c).redMul(u)),this.curve.point(l,t,r)},Point$2.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},Point$2.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},Point$2.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},Point$2.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},Point$2.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},Point$2.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point$2.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Point$2.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Point$2.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},Point$2.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},Point$2.prototype.toP=Point$2.prototype.normalize,Point$2.prototype.mixedAdd=Point$2.prototype.add;var curve_1=createCommonjsModule(function(e,t){var r=t;r.base=base$2,r.short=short_1,r.mont=mont,r.edwards=edwards}),inherits_1=inherits;function isSurrogatePair(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function toArray(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):isSurrogatePair(e,i)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r}var toArray_1=toArray;function toHex(e){for(var t="",r=0;r<e.length;r++)t+=zero2(e[r].toString(16));return t}var toHex_1=toHex;function htonl(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}var htonl_1=htonl;function toHex32(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=htonl(i)),r+=zero8(i.toString(16))}return r}var toHex32_1=toHex32;function zero2(e){return 1===e.length?"0"+e:e}var zero2_1=zero2;function zero8(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}var zero8_1=zero8;function join32(e,t,r,n){var i=r-t;minimalisticAssert(i%4==0);for(var o=new Array(i/4),s=0,a=t;s<o.length;s++,a+=4){var c;c="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],o[s]=c>>>0}return o}var join32_1=join32;function split32(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r}var split32_1=split32;function rotr32(e,t){return e>>>t|e<<32-t}var rotr32_1=rotr32;function rotl32(e,t){return e<<t|e>>>32-t}var rotl32_1=rotl32;function sum32(e,t){return e+t>>>0}var sum32_1=sum32;function sum32_3(e,t,r){return e+t+r>>>0}var sum32_3_1=sum32_3;function sum32_4(e,t,r,n){return e+t+r+n>>>0}var sum32_4_1=sum32_4;function sum32_5(e,t,r,n,i){return e+t+r+n+i>>>0}var sum32_5_1=sum32_5;function sum64(e,t,r,n){var i=e[t],o=n+e[t+1]>>>0,s=(o<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=o}var sum64_1=sum64;function sum64_hi(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0}var sum64_hi_1=sum64_hi;function sum64_lo(e,t,r,n){return t+n>>>0}var sum64_lo_1=sum64_lo;function sum64_4_hi(e,t,r,n,i,o,s,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+o>>>0)<o?1:0,e+r+i+s+(c+=(u=u+a>>>0)<a?1:0)>>>0}var sum64_4_hi_1=sum64_4_hi;function sum64_4_lo(e,t,r,n,i,o,s,a){return t+n+o+a>>>0}var sum64_4_lo_1=sum64_4_lo;function sum64_5_hi(e,t,r,n,i,o,s,a,c,u){var f=0,l=t;return f+=(l=l+n>>>0)<t?1:0,f+=(l=l+o>>>0)<o?1:0,f+=(l=l+a>>>0)<a?1:0,e+r+i+s+c+(f+=(l=l+u>>>0)<u?1:0)>>>0}var sum64_5_hi_1=sum64_5_hi;function sum64_5_lo(e,t,r,n,i,o,s,a,c,u){return t+n+o+a+u>>>0}var sum64_5_lo_1=sum64_5_lo;function rotr64_hi(e,t,r){return(t<<32-r|e>>>r)>>>0}var rotr64_hi_1=rotr64_hi;function rotr64_lo(e,t,r){return(e<<32-r|t>>>r)>>>0}var rotr64_lo_1=rotr64_lo;function shr64_hi(e,t,r){return e>>>r}var shr64_hi_1=shr64_hi;function shr64_lo(e,t,r){return(e<<32-r|t>>>r)>>>0}var shr64_lo_1=shr64_lo,utils$2={inherits:inherits_1,toArray:toArray_1,toHex:toHex_1,htonl:htonl_1,toHex32:toHex32_1,zero2:zero2_1,zero8:zero8_1,join32:join32_1,split32:split32_1,rotr32:rotr32_1,rotl32:rotl32_1,sum32:sum32_1,sum32_3:sum32_3_1,sum32_4:sum32_4_1,sum32_5:sum32_5_1,sum64:sum64_1,sum64_hi:sum64_hi_1,sum64_lo:sum64_lo_1,sum64_4_hi:sum64_4_hi_1,sum64_4_lo:sum64_4_lo_1,sum64_5_hi:sum64_5_hi_1,sum64_5_lo:sum64_5_lo_1,rotr64_hi:rotr64_hi_1,rotr64_lo:rotr64_lo_1,shr64_hi:shr64_hi_1,shr64_lo:shr64_lo_1};function BlockHash(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var BlockHash_1=BlockHash;BlockHash.prototype.update=function(e,t){if(e=utils$2.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=utils$2.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},BlockHash.prototype.digest=function(e){return this.update(this._pad()),minimalisticAssert(null===this.pending),this._digest(e)},BlockHash.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n};var common={BlockHash:BlockHash_1},rotr32$1=utils$2.rotr32;function ft_1(e,t,r,n){return 0===e?ch32(t,r,n):1===e||3===e?p32(t,r,n):2===e?maj32(t,r,n):void 0}var ft_1_1=ft_1;function ch32(e,t,r){return e&t^~e&r}var ch32_1=ch32;function maj32(e,t,r){return e&t^e&r^t&r}var maj32_1=maj32;function p32(e,t,r){return e^t^r}var p32_1=p32;function s0_256(e){return rotr32$1(e,2)^rotr32$1(e,13)^rotr32$1(e,22)}var s0_256_1=s0_256;function s1_256(e){return rotr32$1(e,6)^rotr32$1(e,11)^rotr32$1(e,25)}var s1_256_1=s1_256;function g0_256(e){return rotr32$1(e,7)^rotr32$1(e,18)^e>>>3}var g0_256_1=g0_256;function g1_256(e){return rotr32$1(e,17)^rotr32$1(e,19)^e>>>10}var g1_256_1=g1_256,common$1={ft_1:ft_1_1,ch32:ch32_1,maj32:maj32_1,p32:p32_1,s0_256:s0_256_1,s1_256:s1_256_1,g0_256:g0_256_1,g1_256:g1_256_1},rotl32$1=utils$2.rotl32,sum32$1=utils$2.sum32,sum32_5$1=utils$2.sum32_5,ft_1$1=common$1.ft_1,BlockHash$1=common.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$1.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$2.inherits(SHA1,BlockHash$1);var _1=SHA1;SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=rotl32$1(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4];for(n=0;n<r.length;n++){var u=~~(n/20),f=sum32_5$1(rotl32$1(i,5),ft_1$1(u,o,s,a),c,r[n],sha1_K[u]);c=a,a=s,s=rotl32$1(o,30),o=i,i=f}this.h[0]=sum32$1(this.h[0],i),this.h[1]=sum32$1(this.h[1],o),this.h[2]=sum32$1(this.h[2],s),this.h[3]=sum32$1(this.h[3],a),this.h[4]=sum32$1(this.h[4],c)},SHA1.prototype._digest=function(e){return"hex"===e?utils$2.toHex32(this.h,"big"):utils$2.split32(this.h,"big")};var sum32$2=utils$2.sum32,sum32_4$1=utils$2.sum32_4,sum32_5$2=utils$2.sum32_5,ch32$1=common$1.ch32,maj32$1=common$1.maj32,s0_256$1=common$1.s0_256,s1_256$1=common$1.s1_256,g0_256$1=common$1.g0_256,g1_256$1=common$1.g1_256,BlockHash$2=common.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256(){if(!(this instanceof SHA256))return new SHA256;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$2.inherits(SHA256,BlockHash$2);var _256=SHA256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;_256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}SHA256.blockSize=512,SHA256.outSize=256,SHA256.hmacStrength=192,SHA256.padLength=64,SHA256.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=sum32_4$1(g1_256$1(r[n-2]),r[n-7],g0_256$1(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],f=this.h[6],l=this.h[7];for(minimalisticAssert(this.k.length===r.length),n=0;n<r.length;n++){var d=sum32_5$2(l,s1_256$1(c),ch32$1(c,u,f),this.k[n],r[n]),h=sum32$2(s0_256$1(i),maj32$1(i,o,s));l=f,f=u,u=c,c=sum32$2(a,d),a=s,s=o,o=i,i=sum32$2(d,h)}this.h[0]=sum32$2(this.h[0],i),this.h[1]=sum32$2(this.h[1],o),this.h[2]=sum32$2(this.h[2],s),this.h[3]=sum32$2(this.h[3],a),this.h[4]=sum32$2(this.h[4],c),this.h[5]=sum32$2(this.h[5],u),this.h[6]=sum32$2(this.h[6],f),this.h[7]=sum32$2(this.h[7],l)},SHA256.prototype._digest=function(e){return"hex"===e?utils$2.toHex32(this.h,"big"):utils$2.split32(this.h,"big")},utils$2.inherits(SHA224,_256);var _224=SHA224;SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function(e){return"hex"===e?utils$2.toHex32(this.h.slice(0,7),"big"):utils$2.split32(this.h.slice(0,7),"big")};var rotr64_hi$1=utils$2.rotr64_hi,rotr64_lo$1=utils$2.rotr64_lo,shr64_hi$1=utils$2.shr64_hi,shr64_lo$1=utils$2.shr64_lo,sum64$1=utils$2.sum64,sum64_hi$1=utils$2.sum64_hi,sum64_lo$1=utils$2.sum64_lo,sum64_4_hi$1=utils$2.sum64_4_hi,sum64_4_lo$1=utils$2.sum64_4_lo,sum64_5_hi$1=utils$2.sum64_5_hi,sum64_5_lo$1=utils$2.sum64_5_lo,BlockHash$3=common.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512(){if(!(this instanceof SHA512))return new SHA512;BlockHash$3.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$2.inherits(SHA512,BlockHash$3);var _512=SHA512;function ch64_hi(e,t,r,n,i){var o=e&r^~e&i;return o<0&&(o+=4294967296),o}function ch64_lo(e,t,r,n,i,o){var s=t&n^~t&o;return s<0&&(s+=4294967296),s}function maj64_hi(e,t,r,n,i){var o=e&r^e&i^r&i;return o<0&&(o+=4294967296),o}function maj64_lo(e,t,r,n,i,o){var s=t&n^t&o^n&o;return s<0&&(s+=4294967296),s}function s0_512_hi(e,t){var r=rotr64_hi$1(e,t,28)^rotr64_hi$1(t,e,2)^rotr64_hi$1(t,e,7);return r<0&&(r+=4294967296),r}function s0_512_lo(e,t){var r=rotr64_lo$1(e,t,28)^rotr64_lo$1(t,e,2)^rotr64_lo$1(t,e,7);return r<0&&(r+=4294967296),r}function s1_512_hi(e,t){var r=rotr64_hi$1(e,t,14)^rotr64_hi$1(e,t,18)^rotr64_hi$1(t,e,9);return r<0&&(r+=4294967296),r}function s1_512_lo(e,t){var r=rotr64_lo$1(e,t,14)^rotr64_lo$1(e,t,18)^rotr64_lo$1(t,e,9);return r<0&&(r+=4294967296),r}function g0_512_hi(e,t){var r=rotr64_hi$1(e,t,1)^rotr64_hi$1(e,t,8)^shr64_hi$1(e,t,7);return r<0&&(r+=4294967296),r}function g0_512_lo(e,t){var r=rotr64_lo$1(e,t,1)^rotr64_lo$1(e,t,8)^shr64_lo$1(e,t,7);return r<0&&(r+=4294967296),r}function g1_512_hi(e,t){var r=rotr64_hi$1(e,t,19)^rotr64_hi$1(t,e,29)^shr64_hi$1(e,t,6);return r<0&&(r+=4294967296),r}function g1_512_lo(e,t){var r=rotr64_lo$1(e,t,19)^rotr64_lo$1(t,e,29)^shr64_lo$1(e,t,6);return r<0&&(r+=4294967296),r}function SHA384(){if(!(this instanceof SHA384))return new SHA384;_512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}SHA512.blockSize=1024,SHA512.outSize=512,SHA512.hmacStrength=192,SHA512.padLength=128,SHA512.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=g1_512_hi(r[n-4],r[n-3]),o=g1_512_lo(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],c=g0_512_hi(r[n-30],r[n-29]),u=g0_512_lo(r[n-30],r[n-29]),f=r[n-32],l=r[n-31];r[n]=sum64_4_hi$1(i,o,s,a,c,u,f,l),r[n+1]=sum64_4_lo$1(i,o,s,a,c,u,f,l)}},SHA512.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],c=this.h[5],u=this.h[6],f=this.h[7],l=this.h[8],d=this.h[9],h=this.h[10],p=this.h[11],b=this.h[12],m=this.h[13],g=this.h[14],y=this.h[15];minimalisticAssert(this.k.length===r.length);for(var v=0;v<r.length;v+=2){var _=g,$=y,S=s1_512_hi(l,d),E=s1_512_lo(l,d),w=ch64_hi(l,d,h,p,b),C=ch64_lo(l,d,h,p,b,m),A=this.k[v],k=this.k[v+1],T=r[v],I=r[v+1],B=sum64_5_hi$1(_,$,S,E,w,C,A,k,T,I),P=sum64_5_lo$1(_,$,S,E,w,C,A,k,T,I);_=s0_512_hi(n,i),$=s0_512_lo(n,i),S=maj64_hi(n,i,o,s,a),E=maj64_lo(n,i,o,s,a,c);var R=sum64_hi$1(_,$,S,E),O=sum64_lo$1(_,$,S,E);g=b,y=m,b=h,m=p,h=l,p=d,l=sum64_hi$1(u,f,B,P),d=sum64_lo$1(f,f,B,P),u=a,f=c,a=o,c=s,o=n,s=i,n=sum64_hi$1(B,P,R,O),i=sum64_lo$1(B,P,R,O)}sum64$1(this.h,0,n,i),sum64$1(this.h,2,o,s),sum64$1(this.h,4,a,c),sum64$1(this.h,6,u,f),sum64$1(this.h,8,l,d),sum64$1(this.h,10,h,p),sum64$1(this.h,12,b,m),sum64$1(this.h,14,g,y)},SHA512.prototype._digest=function(e){return"hex"===e?utils$2.toHex32(this.h,"big"):utils$2.split32(this.h,"big")},utils$2.inherits(SHA384,_512);var _384=SHA384;SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function(e){return"hex"===e?utils$2.toHex32(this.h.slice(0,12),"big"):utils$2.split32(this.h.slice(0,12),"big")};var sha1=_1,sha224=_224,sha256=_256,sha384=_384,sha512=_512,sha={sha1:sha1,sha224:sha224,sha256:sha256,sha384:sha384,sha512:sha512},rotl32$2=utils$2.rotl32,sum32$3=utils$2.sum32,sum32_3$1=utils$2.sum32_3,sum32_4$2=utils$2.sum32_4,BlockHash$4=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash$4.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$2.inherits(RIPEMD160,BlockHash$4);var ripemd160=RIPEMD160;function f(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function K(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Kh(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],o=this.h[3],a=this.h[4],c=r,u=n,l=i,d=o,h=a,p=0;p<80;p++){var b=sum32$3(rotl32$2(sum32_4$2(r,f(p,n,i,o),e[r$1[p]+t],K(p)),s[p]),a);r=a,a=o,o=rotl32$2(i,10),i=n,n=b,b=sum32$3(rotl32$2(sum32_4$2(c,f(79-p,u,l,d),e[rh[p]+t],Kh(p)),sh[p]),h),c=h,h=d,d=rotl32$2(l,10),l=u,u=b}b=sum32_3$1(this.h[1],i,d),this.h[1]=sum32_3$1(this.h[2],o,h),this.h[2]=sum32_3$1(this.h[3],a,c),this.h[3]=sum32_3$1(this.h[4],r,u),this.h[4]=sum32_3$1(this.h[0],n,l),this.h[0]=b},RIPEMD160.prototype._digest=function(e){return"hex"===e?utils$2.toHex32(this.h,"little"):utils$2.split32(this.h,"little")};var r$1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],ripemd={ripemd160:ripemd160};function Hmac(e,t,r){if(!(this instanceof Hmac))return new Hmac(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(utils$2.toArray(t,r))}var hmac=Hmac;Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),minimalisticAssert(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},Hmac.prototype.update=function(e,t){return this.inner.update(e,t),this},Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};var hash_1=createCommonjsModule(function(e,t){var r=t;r.utils=utils$2,r.common=common,r.sha=sha,r.ripemd=ripemd,r.hmac=hmac,r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160}),secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},curves_1=createCommonjsModule(function(e,t){var r,n=t,i=elliptic_1.utils.assert;function o(e){"short"===e.type?this.curve=new elliptic_1.curve.short(e):"edwards"===e.type?this.curve=new elliptic_1.curve.edwards(e):this.curve=new elliptic_1.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash_1.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash_1.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash_1.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash_1.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash_1.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=secp256k1}catch(e){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash_1.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function HmacDRBG(e){if(!(this instanceof HmacDRBG))return new HmacDRBG(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=utils_1.toArray(e.entropy,e.entropyEnc||"hex"),r=utils_1.toArray(e.nonce,e.nonceEnc||"hex"),n=utils_1.toArray(e.pers,e.persEnc||"hex");minimalisticAssert(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function(){return new hash_1.hmac(this.hash,this.K)},HmacDRBG.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=utils_1.toArray(e,t),r=utils_1.toArray(r,n),minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},HmacDRBG.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=utils_1.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,utils_1.encode(o,t)};var utils$3=elliptic_1.utils,assert$5=utils$3.assert;function KeyPair(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var key=KeyPair;KeyPair.fromPublic=function(e,t,r){return t instanceof KeyPair?t:new KeyPair(e,{pub:t,pubEnc:r})},KeyPair.fromPrivate=function(e,t,r){return t instanceof KeyPair?t:new KeyPair(e,{priv:t,privEnc:r})},KeyPair.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},KeyPair.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function(e,t){this.priv=new bn(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?assert$5(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||assert$5(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},KeyPair.prototype.derive=function(e){return e.mul(this.priv).getX()},KeyPair.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},KeyPair.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},KeyPair.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var utils$4=elliptic_1.utils,assert$6=utils$4.assert;function Signature(e,t){if(e instanceof Signature)return e;this._importDER(e,t)||(assert$6(e.r&&e.s,"Signature without r or s"),this.r=new bn(e.r,16),this.s=new bn(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var signature=Signature;function Position(){this.place=0}function getLength(e,t){var r=e[t.place++];if(!(128&r))return r;for(var n=15&r,i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s];return t.place=s,i}function rmPadding(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function constructLength(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Signature.prototype._importDER=function(e,t){e=utils$4.toArray(e,t);var r=new Position;if(48!==e[r.place++])return!1;if(getLength(e,r)+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var n=getLength(e,r),i=e.slice(r.place,n+r.place);if(r.place+=n,2!==e[r.place++])return!1;var o=getLength(e,r);if(e.length!==o+r.place)return!1;var s=e.slice(r.place,o+r.place);return 0===i[0]&&128&i[1]&&(i=i.slice(1)),0===s[0]&&128&s[1]&&(s=s.slice(1)),this.r=new bn(i),this.s=new bn(s),this.recoveryParam=null,!0},Signature.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=rmPadding(t),r=rmPadding(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];constructLength(n,t.length),(n=n.concat(t)).push(2),constructLength(n,r.length);var i=n.concat(r),o=[48];return constructLength(o,i.length),o=o.concat(i),utils$4.encode(o,e)};var utils$5=elliptic_1.utils,assert$7=utils$5.assert;function EC(e){if(!(this instanceof EC))return new EC(e);"string"==typeof e&&(assert$7(elliptic_1.curves.hasOwnProperty(e),"Unknown curve "+e),e=elliptic_1.curves[e]),e instanceof elliptic_1.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var ec=EC;EC.prototype.keyPair=function(e){return new key(this,e)},EC.prototype.keyFromPrivate=function(e,t){return key.fromPrivate(this,e,t)},EC.prototype.keyFromPublic=function(e,t){return key.fromPublic(this,e,t)},EC.prototype.genKeyPair=function(e){e||(e={});for(var t=new hmacDrbg({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||elliptic_1.rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new bn(2));;){var i=new bn(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},EC.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},EC.prototype.sign=function(e,t,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new bn(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),s=e.toArray("be",i),a=new hmacDrbg({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new bn(1)),u=0;;u++){var f=n.k?n.k(u):new bn(a.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(c)>=0)){var l=this.g.mul(f);if(!l.isInfinity()){var d=l.getX(),h=d.umod(this.n);if(0!==h.cmpn(0)){var p=f.invm(this.n).mul(h.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var b=(l.getY().isOdd()?1:0)|(0!==d.cmp(h)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),b^=1),new signature({r:h,s:p,recoveryParam:b})}}}}}},EC.prototype.verify=function(e,t,r,n){e=this._truncateToN(new bn(e,16)),r=this.keyFromPublic(r,n);var i=(t=new signature(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),c=a.mul(e).umod(this.n),u=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,r.getPublic(),u)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(c,r.getPublic(),u)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},EC.prototype.recoverPubKey=function(e,t,r,n){assert$7((3&r)===r,"The recovery param is more than two bits"),t=new signature(t,n);var i=this.n,o=new bn(e),s=t.r,a=t.s,c=1&r,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");s=u?this.curve.pointFromX(s.add(this.curve.n),c):this.curve.pointFromX(s,c);var f=t.r.invm(i),l=i.sub(o).mul(f).umod(i),d=a.mul(f).umod(i);return this.g.mulAdd(l,s,d)},EC.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new signature(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var utils$6=elliptic_1.utils,assert$8=utils$6.assert,parseBytes=utils$6.parseBytes,cachedProperty=utils$6.cachedProperty;function KeyPair$1(e,t){this.eddsa=e,this._secret=parseBytes(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=parseBytes(t.pub)}KeyPair$1.fromPublic=function(e,t){return t instanceof KeyPair$1?t:new KeyPair$1(e,{pub:t})},KeyPair$1.fromSecret=function(e,t){return t instanceof KeyPair$1?t:new KeyPair$1(e,{secret:t})},KeyPair$1.prototype.secret=function(){return this._secret},cachedProperty(KeyPair$1,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),cachedProperty(KeyPair$1,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),cachedProperty(KeyPair$1,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n}),cachedProperty(KeyPair$1,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),cachedProperty(KeyPair$1,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),cachedProperty(KeyPair$1,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),KeyPair$1.prototype.sign=function(e){return assert$8(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},KeyPair$1.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},KeyPair$1.prototype.getSecret=function(e){return assert$8(this._secret,"KeyPair is public only"),utils$6.encode(this.secret(),e)},KeyPair$1.prototype.getPublic=function(e){return utils$6.encode(this.pubBytes(),e)};var key$1=KeyPair$1,utils$7=elliptic_1.utils,assert$9=utils$7.assert,cachedProperty$1=utils$7.cachedProperty,parseBytes$1=utils$7.parseBytes;function Signature$1(e,t){this.eddsa=e,"object"!=typeof t&&(t=parseBytes$1(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),assert$9(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof bn&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}cachedProperty$1(Signature$1,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),cachedProperty$1(Signature$1,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),cachedProperty$1(Signature$1,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),cachedProperty$1(Signature$1,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),Signature$1.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Signature$1.prototype.toHex=function(){return utils$7.encode(this.toBytes(),"hex").toUpperCase()};var signature$1=Signature$1,utils$8=elliptic_1.utils,assert$a=utils$8.assert,parseBytes$2=utils$8.parseBytes;function EDDSA(e){if(assert$a("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(e);e=elliptic_1.curves[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=hash_1.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function(e,t){e=parseBytes$2(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),e).mul(r.priv()),a=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:a,Rencoded:o})},EDDSA.prototype.verify=function(e,t,r){e=parseBytes$2(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(o)},EDDSA.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return utils$8.intFromLE(e.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function(e){return key$1.fromPublic(this,e)},EDDSA.prototype.keyFromSecret=function(e){return key$1.fromSecret(this,e)},EDDSA.prototype.makeSignature=function(e){return e instanceof signature$1?e:new signature$1(this,e)},EDDSA.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},EDDSA.prototype.decodePoint=function(e){var t=(e=utils$8.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),i=utils$8.intFromLE(r);return this.curve.pointFromY(i,n)},EDDSA.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},EDDSA.prototype.decodeInt=function(e){return utils$8.intFromLE(e)},EDDSA.prototype.isPoint=function(e){return e instanceof this.pointClass};var require$$0=getCjsExportFromNamespace(_package$1),elliptic_1=createCommonjsModule(function(e,t){var r=t;r.version=require$$0.version,r.utils=utils_1$1,r.rand=brorand,r.curve=curve_1,r.curves=curves_1,r.ec=ec,r.eddsa=eddsa}),elliptic=createCommonjsModule(function(e,t){var r=safeBuffer.Buffer,n=new(0,elliptic_1.ec)("secp256k1"),i=n.curve;function o(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var r=new bn(t);if(r.cmp(i.p)>=0)return null;var o=(r=r.toRed(i.red)).redSqr().redIMul(r).redIAdd(i.b).redSqrt();return 3===e!==o.isOdd()&&(o=o.redNeg()),n.keyPair({pub:{x:r,y:o}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){var o=new bn(t),s=new bn(r);if(o.cmp(i.p)>=0||s.cmp(i.p)>=0)return null;if(o=o.toRed(i.red),s=s.toRed(i.red),(6===e||7===e)&&s.isOdd()!==(7===e))return null;var a=o.redSqr().redIMul(o);return s.redSqr().redISub(a.redIAdd(i.b)).isZero()?n.keyPair({pub:{x:o,y:s}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}t.privateKeyVerify=function(e){var t=new bn(e);return t.cmp(i.n)<0&&!t.isZero()},t.privateKeyExport=function(e,t){var o=new bn(e);if(o.cmp(i.n)>=0||o.isZero())throw new Error(messages$2.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return r.from(n.keyFromPrivate(e).getPublic(t,!0))},t.privateKeyNegate=function(e){var t=new bn(e);return t.isZero()?r.alloc(32):i.n.sub(t).umod(i.n).toArrayLike(r,"be",32)},t.privateKeyModInverse=function(e){var t=new bn(e);if(t.cmp(i.n)>=0||t.isZero())throw new Error(messages$2.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(i.n).toArrayLike(r,"be",32)},t.privateKeyTweakAdd=function(e,t){var n=new bn(t);if(n.cmp(i.n)>=0)throw new Error(messages$2.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(n.iadd(new bn(e)),n.cmp(i.n)>=0&&n.isub(i.n),n.isZero())throw new Error(messages$2.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return n.toArrayLike(r,"be",32)},t.privateKeyTweakMul=function(e,t){var n=new bn(t);if(n.cmp(i.n)>=0||n.isZero())throw new Error(messages$2.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return n.imul(new bn(e)),n.cmp(i.n)&&(n=n.umod(i.n)),n.toArrayLike(r,"be",32)},t.publicKeyCreate=function(e,t){var o=new bn(e);if(o.cmp(i.n)>=0||o.isZero())throw new Error(messages$2.EC_PUBLIC_KEY_CREATE_FAIL);return r.from(n.keyFromPrivate(e).getPublic(t,!0))},t.publicKeyConvert=function(e,t){var n=o(e);if(null===n)throw new Error(messages$2.EC_PUBLIC_KEY_PARSE_FAIL);return r.from(n.getPublic(t,!0))},t.publicKeyVerify=function(e){return null!==o(e)},t.publicKeyTweakAdd=function(e,t,n){var s=o(e);if(null===s)throw new Error(messages$2.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new bn(t)).cmp(i.n)>=0)throw new Error(messages$2.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var a=i.g.mul(t).add(s.pub);if(a.isInfinity())throw new Error(messages$2.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return r.from(a.encode(!0,n))},t.publicKeyTweakMul=function(e,t,n){var s=o(e);if(null===s)throw new Error(messages$2.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new bn(t)).cmp(i.n)>=0||t.isZero())throw new Error(messages$2.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return r.from(s.pub.mul(t).encode(!0,n))},t.publicKeyCombine=function(e,t){for(var n=new Array(e.length),i=0;i<e.length;++i)if(n[i]=o(e[i]),null===n[i])throw new Error(messages$2.EC_PUBLIC_KEY_PARSE_FAIL);for(var s=n[0].pub,a=1;a<n.length;++a)s=s.add(n[a].pub);if(s.isInfinity())throw new Error(messages$2.EC_PUBLIC_KEY_COMBINE_FAIL);return r.from(s.encode(!0,t))},t.signatureNormalize=function(e){var t=new bn(e.slice(0,32)),o=new bn(e.slice(32,64));if(t.cmp(i.n)>=0||o.cmp(i.n)>=0)throw new Error(messages$2.ECDSA_SIGNATURE_PARSE_FAIL);var s=r.from(e);return 1===o.cmp(n.nh)&&i.n.sub(o).toArrayLike(r,"be",32).copy(s,32),s},t.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new bn(t).cmp(i.n)>=0||new bn(r).cmp(i.n)>=0)throw new Error(messages$2.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},t.signatureImport=function(e){var t=new bn(e.r);t.cmp(i.n)>=0&&(t=new bn(0));var n=new bn(e.s);return n.cmp(i.n)>=0&&(n=new bn(0)),r.concat([t.toArrayLike(r,"be",32),n.toArrayLike(r,"be",32)])},t.sign=function(e,t,o,s){if("function"==typeof o){var a=o;o=function(n){var i=a(e,t,null,s,n);if(!r.isBuffer(i)||32!==i.length)throw new Error(messages$2.ECDSA_SIGN_FAIL);return new bn(i)}}var c=new bn(t);if(c.cmp(i.n)>=0||c.isZero())throw new Error(messages$2.ECDSA_SIGN_FAIL);var u=n.sign(e,t,{canonical:!0,k:o,pers:s});return{signature:r.concat([u.r.toArrayLike(r,"be",32),u.s.toArrayLike(r,"be",32)]),recovery:u.recoveryParam}},t.verify=function(e,t,r){var s={r:t.slice(0,32),s:t.slice(32,64)},a=new bn(s.r),c=new bn(s.s);if(a.cmp(i.n)>=0||c.cmp(i.n)>=0)throw new Error(messages$2.ECDSA_SIGNATURE_PARSE_FAIL);if(1===c.cmp(n.nh)||a.isZero()||c.isZero())return!1;var u=o(r);if(null===u)throw new Error(messages$2.EC_PUBLIC_KEY_PARSE_FAIL);return n.verify(e,s,{x:u.pub.x,y:u.pub.y})},t.recover=function(e,t,o,s){var a={r:t.slice(0,32),s:t.slice(32,64)},c=new bn(a.r),u=new bn(a.s);if(c.cmp(i.n)>=0||u.cmp(i.n)>=0)throw new Error(messages$2.ECDSA_SIGNATURE_PARSE_FAIL);try{if(c.isZero()||u.isZero())throw new Error;var f=n.recoverPubKey(e,a,o);return r.from(f.encode(!0,s))}catch(e){throw new Error(messages$2.ECDSA_RECOVER_FAIL)}},t.ecdh=function(e,r){var n=t.ecdhUnsafe(e,r,!0);return createHash("sha256").update(n).digest()},t.ecdhUnsafe=function(e,t,n){var s=o(e);if(null===s)throw new Error(messages$2.EC_PUBLIC_KEY_PARSE_FAIL);var a=new bn(t);if(a.cmp(i.n)>=0||a.isZero())throw new Error(messages$2.ECDH_FAIL);return r.from(s.pub.mul(a).encode(!0,n))}}),elliptic_1$1=elliptic.privateKeyVerify,elliptic_2=elliptic.privateKeyExport,elliptic_3=elliptic.privateKeyNegate,elliptic_4=elliptic.privateKeyModInverse,elliptic_5=elliptic.privateKeyTweakAdd,elliptic_6=elliptic.privateKeyTweakMul,elliptic_7=elliptic.publicKeyCreate,elliptic_8=elliptic.publicKeyConvert,elliptic_9=elliptic.publicKeyVerify,elliptic_10=elliptic.publicKeyTweakAdd,elliptic_11=elliptic.publicKeyTweakMul,elliptic_12=elliptic.publicKeyCombine,elliptic_13=elliptic.signatureNormalize,elliptic_14=elliptic.signatureExport,elliptic_15=elliptic.signatureImport,elliptic_16=elliptic.sign,elliptic_17=elliptic.verify,elliptic_18=elliptic.recover,elliptic_19=elliptic.ecdh,elliptic_20=elliptic.ecdhUnsafe,elliptic$1=lib$2(elliptic),secp256k1$1=createCommonjsModule(function(e){try{e.exports=bindings$1}catch(t){process.env.DEBUG&&console.error("Secp256k1 bindings are not compiled. Pure JS implementation will be used."),e.exports=elliptic$1}}),src$7=function(e){if("string"!=typeof e)throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof e+", while checking isHexPrefixed.");return"0x"===e.slice(0,2)},src$8=function(e){return"string"!=typeof e?e:src$7(e)?e.slice(2):e};function padToEven(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function intToHex(e){return"0x"+e.toString(16)}function intToBuffer(e){var t=intToHex(e);return new Buffer(padToEven(t.slice(2)),"hex")}function getBinarySize(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}function arrayContainsArray(e,t,r){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(r)?"some":"every"](function(t){return e.indexOf(t)>=0})}function toUtf8(e){return new Buffer(padToEven(src$8(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")}function toAscii(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}function fromUtf8(e){return"0x"+padToEven(new Buffer(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}function fromAscii(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t}function getKeys(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var o=e[i][t];if(r&&!o)o="";else if("string"!=typeof o)throw new Error("invalid abi");n.push(o)}return n}function isHexString(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var lib$3={arrayContainsArray:arrayContainsArray,intToBuffer:intToBuffer,getBinarySize:getBinarySize,isHexPrefixed:src$7,stripHexPrefix:src$8,padToEven:padToEven,intToHex:intToHex,fromAscii:fromAscii,fromUtf8:fromUtf8,toAscii:toAscii,toUtf8:toUtf8,getKeys:getKeys,isHexString:isHexString},dist$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BN=bn,t.rlp=dist,t.secp256k1=secp256k1$1;var r=safeBuffer.Buffer;function n(e,t){return t?e-(2*t+35):e-27}function i(e){return 0===e||1===e}Object.assign(t,lib$3),t.MAX_INTEGER=new bn("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new bn("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.KECCAK256_NULL=r.from(t.KECCAK256_NULL_S,"hex"),t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.KECCAK256_RLP_ARRAY=r.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.KECCAK256_RLP=r.from(t.KECCAK256_RLP_S,"hex"),t.zeros=function(e){return r.allocUnsafe(e).fill(0)},t.zeroAddress=function(){var e=t.zeros(20);return t.bufferToHex(e)},t.setLengthLeft=function(e,r,n){void 0===n&&(n=!1);var i=t.zeros(r);return e=t.toBuffer(e),n?e.length<r?(e.copy(i),i):e.slice(0,r):e.length<r?(e.copy(i,r-e.length),i):e.slice(-r)},t.setLength=t.setLengthLeft,t.setLengthRight=function(e,r){return t.setLength(e,r,!0)},t.unpad=function(e){for(var t=(e=lib$3.stripHexPrefix(e))[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},t.stripZeros=t.unpad,t.toBuffer=function(e){if(!r.isBuffer(e))if(Array.isArray(e))e=r.from(e);else if("string"==typeof e)e=t.isHexString(e)?r.from(t.padToEven(t.stripHexPrefix(e)),"hex"):r.from(e);else if("number"==typeof e)e=t.intToBuffer(e);else if(null==e)e=r.allocUnsafe(0);else if(bn.isBN(e))e=e.toArrayLike(r);else{if(!e.toArray)throw new Error("invalid type");e=r.from(e.toArray())}return e},t.bufferToInt=function(e){return new bn(t.toBuffer(e)).toNumber()},t.bufferToHex=function(e){return"0x"+(e=t.toBuffer(e)).toString("hex")},t.fromSigned=function(e){return new bn(e).fromTwos(256)},t.toUnsigned=function(e){return r.from(e.toTwos(256).toArray())},t.keccak=function(e,r){return void 0===r&&(r=256),e=t.toBuffer(e),r||(r=256),keccak$2("keccak"+r).update(e).digest()},t.keccak256=function(e){return t.keccak(e)},t.sha256=function(e){return e=t.toBuffer(e),createHash("sha256").update(e).digest()},t.ripemd160=function(e,r){e=t.toBuffer(e);var n=createHash("rmd160").update(e).digest();return!0===r?t.setLength(n,32):n},t.rlphash=function(e){return t.keccak(dist.encode(e))},t.isValidPrivate=function(e){return secp256k1$1.privateKeyVerify(e)},t.isValidPublic=function(e,t){return void 0===t&&(t=!1),64===e.length?secp256k1$1.publicKeyVerify(r.concat([r.from([4]),e])):!!t&&secp256k1$1.publicKeyVerify(e)},t.pubToAddress=function(e,r){return void 0===r&&(r=!1),e=t.toBuffer(e),r&&64!==e.length&&(e=secp256k1$1.publicKeyConvert(e,!1).slice(1)),assert$t(64===e.length),t.keccak(e).slice(-20)},t.publicToAddress=t.pubToAddress,t.privateToPublic=function(e){return e=t.toBuffer(e),secp256k1$1.publicKeyCreate(e,!1).slice(1)},t.importPublic=function(e){return 64!==(e=t.toBuffer(e)).length&&(e=secp256k1$1.publicKeyConvert(e,!1).slice(1)),e},t.ecsign=function(e,t,r){var n=secp256k1$1.sign(e,t),i=n.recovery;return{r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?i+(2*r+35):i+27}},t.hashPersonalMessage=function(e){var n=t.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return t.keccak(r.concat([n,e]))},t.ecrecover=function(e,o,s,a,c){var u=r.concat([t.setLength(s,32),t.setLength(a,32)],64),f=n(o,c);if(!i(f))throw new Error("Invalid signature v value");var l=secp256k1$1.recover(e,u,f);return secp256k1$1.publicKeyConvert(l,!1).slice(1)},t.toRpcSig=function(e,o,s,a){if(!i(n(e,a)))throw new Error("Invalid signature v value");return t.bufferToHex(r.concat([t.setLengthLeft(o,32),t.setLengthLeft(s,32),t.toBuffer(e)]))},t.fromRpcSig=function(e){var r=t.toBuffer(e);if(65!==r.length)throw new Error("Invalid signature length");var n=r[64];return n<27&&(n+=27),{v:n,r:r.slice(0,32),s:r.slice(32,64)}},t.privateToAddress=function(e){return t.publicToAddress(t.privateToPublic(e))},t.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},t.isZeroAddress=function(e){return t.zeroAddress()===t.addHexPrefix(e)},t.toChecksumAddress=function(e){e=lib$3.stripHexPrefix(e).toLowerCase();for(var r=t.keccak(e).toString("hex"),n="0x",i=0;i<e.length;i++)parseInt(r[i],16)>=8?n+=e[i].toUpperCase():n+=e[i];return n},t.isValidChecksumAddress=function(e){return t.isValidAddress(e)&&t.toChecksumAddress(e)===e},t.generateAddress=function(e,n){e=t.toBuffer(e);var i=new bn(n);return i.isZero()?t.rlphash([e,null]).slice(-20):t.rlphash([e,r.from(i.toArray())]).slice(-20)},t.generateAddress2=function(e,n,i){var o=t.toBuffer(e),s=t.toBuffer(n),a=t.toBuffer(i);return assert$t(20===o.length),assert$t(32===s.length),t.keccak256(r.concat([r.from("ff","hex"),o,s,t.keccak256(a)])).slice(-20)},t.isPrecompiled=function(e){var r=t.unpad(e);return 1===r.length&&r[0]>=1&&r[0]<=8},t.addHexPrefix=function(e){return"string"!=typeof e?e:lib$3.isHexPrefixed(e)?e:"0x"+e},t.isValidSignature=function(e,t,r,o,s){void 0===o&&(o=!0);var a=new bn("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),c=new bn("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==t.length||32!==r.length)return!1;if(!i(n(e,s)))return!1;var u=new bn(t),f=new bn(r);return!(u.isZero()||u.gt(c)||f.isZero()||f.gt(c))&&(!o||1!==f.cmp(a))},t.baToJSON=function(e){if(r.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var n=[],i=0;i<e.length;i++)n.push(t.baToJSON(e[i]));return n}},t.defineProperties=function(e,n,i){if(e.raw=[],e._fields=[],e.toJSON=function(r){if(void 0===r&&(r=!1),r){var n={};return e._fields.forEach(function(t){n[t]="0x"+e[t].toString("hex")}),n}return t.baToJSON(e.raw)},e.serialize=function(){return dist.encode(e.raw)},n.forEach(function(n,i){function o(){return e.raw[i]}function s(o){"00"!==(o=t.toBuffer(o)).toString("hex")||n.allowZero||(o=r.allocUnsafe(0)),n.allowLess&&n.length?(o=t.stripZeros(o),assert$t(n.length>=o.length,"The field "+n.name+" must not have more "+n.length+" bytes")):n.allowZero&&0===o.length||!n.length||assert$t(n.length===o.length,"The field "+n.name+" must have byte length of "+n.length),e.raw[i]=o}e._fields.push(n.name),Object.defineProperty(e,n.name,{enumerable:!0,configurable:!0,get:o,set:s}),n.default&&(e[n.name]=n.default),n.alias&&Object.defineProperty(e,n.alias,{enumerable:!1,configurable:!0,set:s,get:o})}),i)if("string"==typeof i&&(i=r.from(lib$3.stripHexPrefix(i),"hex")),r.isBuffer(i)&&(i=dist.decode(i)),Array.isArray(i)){if(i.length>e._fields.length)throw new Error("wrong number of fields in data");i.forEach(function(r,n){e[e._fields[n]]=t.toBuffer(r)})}else{if("object"!=typeof i)throw new Error("invalid data");var o=Object.keys(i);n.forEach(function(t){-1!==o.indexOf(t.name)&&(e[t.name]=i[t.name]),-1!==o.indexOf(t.alias)&&(e[t.alias]=i[t.alias])})}}});unwrapExports(dist$1);var dist_1$1=dist$1.BN,dist_2$1=dist$1.rlp,dist_3$1=dist$1.secp256k1,dist_4=dist$1.MAX_INTEGER,dist_5=dist$1.TWO_POW256,dist_6=dist$1.KECCAK256_NULL_S,dist_7=dist$1.KECCAK256_NULL,dist_8=dist$1.KECCAK256_RLP_ARRAY_S,dist_9=dist$1.KECCAK256_RLP_ARRAY,dist_10=dist$1.KECCAK256_RLP_S,dist_11=dist$1.KECCAK256_RLP,dist_12=dist$1.zeros,dist_13=dist$1.zeroAddress,dist_14=dist$1.setLengthLeft,dist_15=dist$1.setLength,dist_16=dist$1.setLengthRight,dist_17=dist$1.unpad,dist_18=dist$1.stripZeros,dist_19=dist$1.toBuffer,dist_20=dist$1.bufferToInt,dist_21=dist$1.bufferToHex,dist_22=dist$1.fromSigned,dist_23=dist$1.toUnsigned,dist_24=dist$1.keccak,dist_25=dist$1.keccak256,dist_26=dist$1.sha256,dist_27=dist$1.ripemd160,dist_28=dist$1.rlphash,dist_29=dist$1.isValidPrivate,dist_30=dist$1.isValidPublic,dist_31=dist$1.pubToAddress,dist_32=dist$1.publicToAddress,dist_33=dist$1.privateToPublic,dist_34=dist$1.importPublic,dist_35=dist$1.ecsign,dist_36=dist$1.hashPersonalMessage,dist_37=dist$1.ecrecover,dist_38=dist$1.toRpcSig,dist_39=dist$1.fromRpcSig,dist_40=dist$1.privateToAddress,dist_41=dist$1.isValidAddress,dist_42=dist$1.isZeroAddress,dist_43=dist$1.toChecksumAddress,dist_44=dist$1.isValidChecksumAddress,dist_45=dist$1.generateAddress,dist_46=dist$1.generateAddress2,dist_47=dist$1.isPrecompiled,dist_48=dist$1.addHexPrefix,dist_49=dist$1.isValidSignature,dist_50=dist$1.baToJSON,dist_51=dist$1.defineProperties,jsonschemaWeb3=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),lib$1.Validator.prototype.customFormats.address=function(e){return!e||dist$1.isValidAddress(e)},lib$1.Validator.prototype.customFormats.checkSummedAddress=function(e){return dist$1.isValidChecksumAddress(e)},lib$1.Validator.prototype.customFormats.multihash=function(e){return src$6.multihash(e)},lib$1.Validator.prototype.customFormats.buffer=function(e){return safeBuffer.Buffer.isBuffer(e)},t.default=lib$1.Validator});unwrapExports(jsonschemaWeb3);var settings=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=()=>{const e=Symbol("setting$"),t={[e]:new Map};return{getSettings:function(r){return t[e].get(r)},setSettings:function(r){t[e].set(r.moduleName,r.values)}}}});unwrapExports(settings);var constants$3=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SETTINGS_SERVICE="SETTINGS_SERVICE",t.VALIDATOR_SERVICE_FACTORY="VALIDATOR_SERVICE_FACTORY",t.CACHE_PROVIDER_FACTORY="CACHE_PROVIDER_FACTORY",t.WEB3_SERVICE="WEB3_SERVICE",t.IPFS_SERVICE="IPFS_SERVICE"});unwrapExports(constants$3);var constants_1$1=constants$3.SETTINGS_SERVICE,constants_2=constants$3.VALIDATOR_SERVICE_FACTORY,constants_3=constants$3.CACHE_PROVIDER_FACTORY,constants_4=constants$3.WEB3_SERVICE,constants_5=constants$3.IPFS_SERVICE,lib$4=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(lib),i=r(jsonschemaWeb3),o=r(settings),s=function(){return new i.default},a=function(){return new n.default.Stash};t.default=function(){const e=new n.default.DIContainer,t=o.default();return e.register(constants$3.SETTINGS_SERVICE,function(){return t}),e.register(constants$3.VALIDATOR_SERVICE_FACTORY,s),e.register(constants$3.CACHE_PROVIDER_FACTORY,a),e}}),initDI=unwrapExports(lib$4),constants$4=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.moduleName="commons_module"});unwrapExports(constants$4);var constants_1$2=constants$4.moduleName,ipfs_settings=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r={Bootstrap:["/dns4/ams-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd","/dns4/lon-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3","/dns4/sfo-3.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM","/dns4/sgp-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu","/dns4/nyc-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm","/dns4/nyc-2.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64","/dns4/node0.preload.ipfs.io/tcp/443/wss/ipfs/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/ipfs/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6"].concat(["/dns4/akasha.online/tcp/443/wss/ipfs/QmSgTsiHrubEkLKEvdEjNtWHRasU1dUSgPfMjJpkR8KkBU","/dns4/akasha.observer/tcp/443/wss/ipfs/QmUjM53zcSRhsA8BCK28DchCdSJCNmEU6W6jPJHiSgxwTW"]).concat(["/p2p-circuit/ipfs/QmSgTsiHrubEkLKEvdEjNtWHRasU1dUSgPfMjJpkR8KkBU","/p2p-circuit/ipfs/QmUjM53zcSRhsA8BCK28DchCdSJCNmEU6W6jPJHiSgxwTW","/p2p-circuit/ipfs/QmTfTyKZXjzRo2C8NV6p21HCsxZF54Mm5cZ9GsfY3zpG3T","/p2p-circuit/ipfs/QmTMSgsyw3zzVbcQnkoN5SRZk7WYUMorJ7EqkqVBLgn13i","/p2p-circuit/ipfs/QmYfXRuVWMWFRJxUSFPHtScTNR9CU2samRsTK15VFJPpvh"])};t.ipfsGateway="https://gateway.ipfs.io/ipfs",t.default=r});unwrapExports(ipfs_settings);var ipfs_settings_1=ipfs_settings.ipfsGateway,settings_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ETH_NETWORK="eth_network",t.IPFS_GATEWAY="ipfs_gateway",t.CONNECT_EXISTING="connect_existing_web3_provider";const r=[[t.ETH_NETWORK,"rinkeby"],[t.IPFS_GATEWAY,ipfs_settings.ipfsGateway]];t.default=r});unwrapExports(settings_1);var settings_2=settings_1.ETH_NETWORK,settings_3=settings_1.IPFS_GATEWAY,settings_4=settings_1.CONNECT_EXISTING,_version=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.version="4.0.27"});unwrapExports(_version);var _version_1=_version.version,errors=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.MISSING_NEW="MISSING_NEW",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.NUMERIC_FAULT="NUMERIC_FAULT",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION";var r=!1,n=!1;function i(e,r,i){if(n)throw new Error("unknown error");r||(r=t.UNKNOWN_ERROR),i||(i={});var o=[];Object.keys(i).forEach(function(e){try{o.push(e+"="+JSON.stringify(i[e]))}catch(t){o.push(e+"="+JSON.stringify(i[e].toString()))}}),o.push("version="+_version.version);var s=e;o.length&&(e+=" ("+o.join(", ")+")");var a=new Error(e);throw a.reason=s,a.code=r,Object.keys(i).forEach(function(e){a[e]=i[e]}),a}t.throwError=i,t.checkNew=function(e,r){e instanceof r||i("missing new",t.MISSING_NEW,{name:r.name})},t.checkArgumentCount=function(e,r,n){n||(n=""),e<r&&i("missing argument"+n,t.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&i("too many arguments"+n,t.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})},t.setCensorship=function(e,o){r&&i("error censorship permanent",t.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),n=!!e,r=!!o},t.checkNormalize=function(){try{if(["NFD","NFC","NFKD","NFKC"].forEach(function(e){try{"test".normalize(e)}catch(t){throw new Error("missing "+e)}}),String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){i("platform missing String.prototype.normalize",t.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:e.message})}};var o={debug:1,default:2,info:2,warn:3,error:4,off:5},s=o.default;function a(e,t){s>o[e]||console.log.apply(console,t)}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a("warn",e)}t.setLogLevel=function(e){var t=o[e];null!=t?s=t:c("invliad log level - "+e)},t.warn=c,t.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a("info",e)}});unwrapExports(errors);var errors_1=errors.UNKNOWN_ERROR,errors_2=errors.NOT_IMPLEMENTED,errors_3=errors.MISSING_NEW,errors_4=errors.CALL_EXCEPTION,errors_5=errors.INVALID_ARGUMENT,errors_6=errors.MISSING_ARGUMENT,errors_7=errors.UNEXPECTED_ARGUMENT,errors_8=errors.NUMERIC_FAULT,errors_9=errors.INSUFFICIENT_FUNDS,errors_10=errors.NONCE_EXPIRED,errors_11=errors.REPLACEMENT_UNDERPRICED,errors_12=errors.UNSUPPORTED_OPERATION,errors_13=errors.throwError,errors_14=errors.checkNew,errors_15=errors.checkArgumentCount,errors_16=errors.setCensorship,errors_17=errors.checkNormalize,errors_18=errors.setLogLevel,errors_19=errors.warn,errors_20=errors.info,bytes=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(errors);function i(e){return!!e.toHexString}function o(e){return e.slice?e:(e.slice=function(){var t=Array.prototype.slice.call(arguments);return o(new Uint8Array(Array.prototype.slice.apply(e,t)))},e)}function s(e){if(!e||parseInt(String(e.length))!=e.length||"string"==typeof e)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(r<0||r>=256||parseInt(String(r))!=r)return!1}return!0}function a(e){if(null==e&&n.throwError("cannot convert null value to array",n.INVALID_ARGUMENT,{arg:"value",value:e}),i(e)&&(e=e.toHexString()),"string"==typeof e){var t=e.match(/^(0x)?[0-9a-fA-F]*$/);t||n.throwError("invalid hexidecimal string",n.INVALID_ARGUMENT,{arg:"value",value:e}),"0x"!==t[1]&&n.throwError("hex string must have 0x prefix",n.INVALID_ARGUMENT,{arg:"value",value:e}),(e=e.substring(2)).length%2&&(e="0"+e);for(var r=[],a=0;a<e.length;a+=2)r.push(parseInt(e.substr(a,2),16));return o(new Uint8Array(r))}return s(e)?o(new Uint8Array(e)):(n.throwError("invalid arrayify value",null,{arg:"value",value:e,type:typeof e}),null)}function c(e){for(var t=[],r=0,n=0;n<e.length;n++){var i=a(e[n]);t.push(i),r+=i.length}var s=new Uint8Array(r),c=0;for(n=0;n<t.length;n++)s.set(t[n],c),c+=t[n].length;return o(s)}function u(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}t.isHexable=i,t.isArrayish=s,t.arrayify=a,t.concat=c,t.stripZeros=function(e){var t=a(e);if(0===t.length)return t;for(var r=0;0===t[r];)r++;return r&&(t=t.slice(r)),t},t.padZeros=function(e,t){if(t<(e=a(e)).length)throw new Error("cannot pad");var r=new Uint8Array(t);return r.set(e,t-e.length),o(r)},t.isHexString=u;var f="0123456789abcdef";function l(e){if(i(e))return e.toHexString();if("number"==typeof e){e<0&&n.throwError("cannot hexlify negative value",n.INVALID_ARGUMENT,{arg:"value",value:e}),e>=9007199254740991&&n.throwError("out-of-range",n.NUMERIC_FAULT,{operartion:"hexlify",fault:"out-of-safe-range"});for(var t="";e;)t=f[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("string"==typeof e){var r=e.match(/^(0x)?[0-9a-fA-F]*$/);return r||n.throwError("invalid hexidecimal string",n.INVALID_ARGUMENT,{arg:"value",value:e}),"0x"!==r[1]&&n.throwError("hex string must have 0x prefix",n.INVALID_ARGUMENT,{arg:"value",value:e}),e.length%2&&(e="0x0"+e.substring(2)),e}if(s(e)){for(var o=[],a=0;a<e.length;a++){var c=e[a];o.push(f[(240&c)>>4]+f[15&c])}return"0x"+o.join("")}return n.throwError("invalid hexlify value",null,{arg:"value",value:e}),"never"}function d(e,t){for(u(e)||n.throwError("invalid hex string",n.INVALID_ARGUMENT,{arg:"value",value:e});e.length<2*t+2;)e="0x0"+e.substring(2);return e}function h(e){var t,r=0,i="0x",o="0x";if((t=e)&&null!=t.r&&null!=t.s){null==e.v&&null==e.recoveryParam&&n.throwError("at least on of recoveryParam or v must be specified",n.INVALID_ARGUMENT,{argument:"signature",value:e}),i=d(e.r,32),o=d(e.s,32),"string"==typeof(r=e.v)&&(r=parseInt(r,16));var s=e.recoveryParam;null==s&&null!=e.v&&(s=1-r%2),r=27+s}else{var c=a(e);if(65!==c.length)throw new Error("invalid signature");i=l(c.slice(0,32)),o=l(c.slice(32,64)),27!==(r=c[64])&&28!==r&&(r=27+r%2)}return{r:i,s:o,recoveryParam:r-27,v:r}}t.hexlify=l,t.hexDataLength=function(e){return u(e)&&e.length%2==0?(e.length-2)/2:null},t.hexDataSlice=function(e,t,r){return u(e)||n.throwError("invalid hex data",n.INVALID_ARGUMENT,{arg:"value",value:e}),e.length%2!=0&&n.throwError("hex data length must be even",n.INVALID_ARGUMENT,{arg:"value",value:e}),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)},t.hexStripZeros=function(e){for(u(e)||n.throwError("invalid hex string",n.INVALID_ARGUMENT,{arg:"value",value:e});e.length>3&&"0x0"===e.substring(0,3);)e="0x"+e.substring(3);return e},t.hexZeroPad=d,t.splitSignature=h,t.joinSignature=function(e){return l(c([(e=h(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}});unwrapExports(bytes);var bytes_1=bytes.isHexable,bytes_2=bytes.isArrayish,bytes_3=bytes.arrayify,bytes_4=bytes.concat,bytes_5=bytes.stripZeros,bytes_6=bytes.padZeros,bytes_7=bytes.isHexString,bytes_8=bytes.hexlify,bytes_9=bytes.hexDataLength,bytes_10=bytes.hexDataSlice,bytes_11=bytes.hexStripZeros,bytes_12=bytes.hexZeroPad,bytes_13=bytes.splitSignature,bytes_14=bytes.joinSignature,properties=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(errors);function i(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function o(e,t){return e&&e._ethersType===t}t.defineReadOnly=i,t.setType=function(e,t){Object.defineProperty(e,"_ethersType",{configurable:!1,value:t,writable:!1})},t.isType=o,t.resolveProperties=function(e){var t={},r=[];return Object.keys(e).forEach(function(n){var i=e[n];i instanceof Promise?r.push(i.then(function(e){return t[n]=e,null})):t[n]=i}),Promise.all(r).then(function(){return t})},t.checkProperties=function(e,t){e&&"object"==typeof e||n.throwError("invalid object",n.INVALID_ARGUMENT,{argument:"object",value:e}),Object.keys(e).forEach(function(r){t[r]||n.throwError("invalid object key - "+r,n.INVALID_ARGUMENT,{argument:"transaction",value:e,key:r})})},t.shallowCopy=function(e){var t={};for(var r in e)t[r]=e[r];return t};var s={boolean:!0,number:!0,string:!0};t.deepCopy=function e(t,r){if(null==t||s[typeof t])return t;if(Array.isArray(t)){var n=t.map(function(t){return e(t,r)});return r&&Object.freeze(n),n}if("object"==typeof t){if(o(t,"BigNumber"))return t;if(o(t,"Description"))return t;if(o(t,"Indexed"))return t;for(var a in n={},t){var c=t[a];void 0!==c&&i(n,a,e(c,r))}return r&&Object.freeze(n),n}if("function"==typeof t)return t;throw new Error("Cannot deepCopy "+typeof t)},t.inheritable=function e(t){return function(r){var n,o;o=t,(n=r).super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(r,"inherits",e(r))}}});unwrapExports(properties);var properties_1=properties.defineReadOnly,properties_2=properties.setType,properties_3=properties.isType,properties_4=properties.resolveProperties,properties_5=properties.checkProperties,properties_6=properties.shallowCopy,properties_7=properties.deepCopy,properties_8=properties.inheritable,bignumber=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(bn),o=n(errors),s=new i.default.BN(-1);function a(e){var t=e.toString(16);return"-"===t[0]?t.length%2==0?"-0x0"+t.substring(1):"-0x"+t.substring(1):t.length%2==1?"0x0"+t:"0x"+t}function c(e){return f(d(e))}function u(e){return new l(a(e))}function f(e){var t=e._hex;return"-"===t[0]?new i.default.BN(t.substring(3),16).mul(s):new i.default.BN(t.substring(2),16)}var l=function(){function e(t){if(o.checkNew(this,e),properties.setType(this,"BigNumber"),"string"==typeof t)bytes.isHexString(t)?("0x"==t&&(t="0x0"),properties.defineReadOnly(this,"_hex",t)):"-"===t[0]&&bytes.isHexString(t.substring(1))?properties.defineReadOnly(this,"_hex",t):t.match(/^-?[0-9]*$/)?(""==t&&(t="0"),properties.defineReadOnly(this,"_hex",a(new i.default.BN(t)))):o.throwError("invalid BigNumber string value",o.INVALID_ARGUMENT,{arg:"value",value:t});else if("number"==typeof t){parseInt(String(t))!==t&&o.throwError("underflow",o.NUMERIC_FAULT,{operation:"setValue",fault:"underflow",value:t,outputValue:parseInt(String(t))});try{properties.defineReadOnly(this,"_hex",a(new i.default.BN(t)))}catch(e){o.throwError("overflow",o.NUMERIC_FAULT,{operation:"setValue",fault:"overflow",details:e.message})}}else t instanceof e?properties.defineReadOnly(this,"_hex",t._hex):t.toHexString?properties.defineReadOnly(this,"_hex",a(c(t.toHexString()))):t._hex&&bytes.isHexString(t._hex)?properties.defineReadOnly(this,"_hex",t._hex):bytes.isArrayish(t)?properties.defineReadOnly(this,"_hex",a(new i.default.BN(bytes.hexlify(t).substring(2),16))):o.throwError("invalid BigNumber value",o.INVALID_ARGUMENT,{arg:"value",value:t})}return e.prototype.fromTwos=function(e){return u(f(this).fromTwos(e))},e.prototype.toTwos=function(e){return u(f(this).toTwos(e))},e.prototype.abs=function(){return"-"===this._hex[0]?u(f(this).mul(s)):this},e.prototype.add=function(e){return u(f(this).add(c(e)))},e.prototype.sub=function(e){return u(f(this).sub(c(e)))},e.prototype.div=function(e){return d(e).isZero()&&o.throwError("division by zero",o.NUMERIC_FAULT,{operation:"divide",fault:"division by zero"}),u(f(this).div(c(e)))},e.prototype.mul=function(e){return u(f(this).mul(c(e)))},e.prototype.mod=function(e){return u(f(this).mod(c(e)))},e.prototype.pow=function(e){return u(f(this).pow(c(e)))},e.prototype.maskn=function(e){return u(f(this).maskn(e))},e.prototype.eq=function(e){return f(this).eq(c(e))},e.prototype.lt=function(e){return f(this).lt(c(e))},e.prototype.lte=function(e){return f(this).lte(c(e))},e.prototype.gt=function(e){return f(this).gt(c(e))},e.prototype.gte=function(e){return f(this).gte(c(e))},e.prototype.isZero=function(){return f(this).isZero()},e.prototype.toNumber=function(){try{return f(this).toNumber()}catch(e){o.throwError("overflow",o.NUMERIC_FAULT,{operation:"setValue",fault:"overflow",details:e.message})}return null},e.prototype.toString=function(){return f(this).toString(10)},e.prototype.toHexString=function(){return this._hex},e.isBigNumber=function(e){return properties.isType(e,"BigNumber")},e}();function d(e){return l.isBigNumber(e)?e:new l(e)}t.BigNumber=l,t.bigNumberify=d});unwrapExports(bignumber);var bignumber_1=bignumber.BigNumber,bignumber_2=bignumber.bigNumberify,constants$5=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.AddressZero="0x0000000000000000000000000000000000000000";t.HashZero="0x0000000000000000000000000000000000000000000000000000000000000000";t.EtherSymbol="Ξ";var r=bignumber.bigNumberify(-1);t.NegativeOne=r;var n=bignumber.bigNumberify(0);t.Zero=n;var i=bignumber.bigNumberify(1);t.One=i;var o=bignumber.bigNumberify(2);t.Two=o;var s=bignumber.bigNumberify("1000000000000000000");t.WeiPerEther=s;var a=bignumber.bigNumberify("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");t.MaxUint256=a});unwrapExports(constants$5);var constants_1$3=constants$5.AddressZero,constants_2$1=constants$5.HashZero,constants_3$1=constants$5.EtherSymbol,constants_4$1=constants$5.NegativeOne,constants_5$1=constants$5.Zero,constants_6=constants$5.One,constants_7=constants$5.Two,constants_8=constants$5.WeiPerEther,constants_9=constants$5.MaxUint256,sha3=createCommonjsModule(function(e){!function(){var t="object"==typeof window?window:{};!t.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&(t=commonjsGlobal);for(var r=!t.JS_SHA3_NO_COMMON_JS&&e.exports,n="0123456789abcdef".split(""),i=[0,8,16,24],o=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],s=[224,256,384,512],a=["hex","buffer","arrayBuffer","array"],c=function(e,t,r){return function(n){return new v(e,t,e).update(n)[r]()}},u=function(e,t,r){return function(n,i){return new v(e,t,i).update(n)[r]()}},f=function(e,t){var r=c(e,t,"hex");r.create=function(){return new v(e,t,e)},r.update=function(e){return r.create().update(e)};for(var n=0;n<a.length;++n){var i=a[n];r[i]=c(e,t,i)}return r},l=[{name:"keccak",padding:[1,256,65536,16777216],bits:s,createMethod:f},{name:"sha3",padding:[6,1536,393216,100663296],bits:s,createMethod:f},{name:"shake",padding:[31,7936,2031616,520093696],bits:[128,256],createMethod:function(e,t){var r=u(e,t,"hex");r.create=function(r){return new v(e,t,r)},r.update=function(e,t){return r.create(t).update(e)};for(var n=0;n<a.length;++n){var i=a[n];r[i]=u(e,t,i)}return r}}],d={},h=[],p=0;p<l.length;++p)for(var b=l[p],m=b.bits,g=0;g<m.length;++g){var y=b.name+"_"+m[g];h.push(y),d[y]=b.createMethod(m[g],b.padding)}function v(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}v.prototype.update=function(e){var t="string"!=typeof e;t&&e.constructor===ArrayBuffer&&(e=new Uint8Array(e));for(var r,n,o=e.length,s=this.blocks,a=this.byteCount,c=this.blockCount,u=0,f=this.s;u<o;){if(this.reset)for(this.reset=!1,s[0]=this.block,r=1;r<c+1;++r)s[r]=0;if(t)for(r=this.start;u<o&&r<a;++u)s[r>>2]|=e[u]<<i[3&r++];else for(r=this.start;u<o&&r<a;++u)(n=e.charCodeAt(u))<128?s[r>>2]|=n<<i[3&r++]:n<2048?(s[r>>2]|=(192|n>>6)<<i[3&r++],s[r>>2]|=(128|63&n)<<i[3&r++]):n<55296||n>=57344?(s[r>>2]|=(224|n>>12)<<i[3&r++],s[r>>2]|=(128|n>>6&63)<<i[3&r++],s[r>>2]|=(128|63&n)<<i[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++u)),s[r>>2]|=(240|n>>18)<<i[3&r++],s[r>>2]|=(128|n>>12&63)<<i[3&r++],s[r>>2]|=(128|n>>6&63)<<i[3&r++],s[r>>2]|=(128|63&n)<<i[3&r++]);if(this.lastByteIndex=r,r>=a){for(this.start=r-a,this.block=s[c],r=0;r<c;++r)f[r]^=s[r];_(f),this.reset=!0}else this.start=r}return this},v.prototype.finalize=function(){var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];_(n)},v.prototype.toString=v.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c="";a<i;){for(s=0;s<t&&a<i;++s,++a)e=r[s],c+=n[e>>4&15]+n[15&e]+n[e>>12&15]+n[e>>8&15]+n[e>>20&15]+n[e>>16&15]+n[e>>28&15]+n[e>>24&15];a%t==0&&(_(r),s=0)}return o&&(e=r[s],o>0&&(c+=n[e>>4&15]+n[15&e]),o>1&&(c+=n[e>>12&15]+n[e>>8&15]),o>2&&(c+=n[e>>20&15]+n[e>>16&15])),c},v.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&_(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},v.prototype.buffer=v.prototype.arrayBuffer,v.prototype.digest=v.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&_(n)}return o&&(e=a<<2,t=n[s],o>0&&(c[e]=255&t),o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c};var _=function(e){var t,r,n,i,s,a,c,u,f,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],a=e[2]^e[12]^e[22]^e[32]^e[42],c=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],f=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(a<<1|c>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(c<<1|a>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(u<<1|f>>>31),r=s^(f<<1|u>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=a^(l<<1|d>>>31),r=c^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=u^(h<<1|p>>>31),r=f^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|s>>>31),r=d^(s<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=o[n],e[1]^=o[n+1]};if(r)e.exports=d;else for(p=0;p<h.length;++p)t[h[p]]=d[h[p]]}()}),keccak256_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.keccak256=function(e){return"0x"+sha3.keccak_256(bytes.arrayify(e))}});unwrapExports(keccak256_1);var keccak256_2=keccak256_1.keccak256,rlp=createCommonjsModule(function(e,t){function r(e){for(var t=[];e;)t.unshift(255&e),e>>=8;return t}function n(e,t,r){for(var n=0,i=0;i<r;i++)n=256*n+e[t+i];return n}function i(e,t,r,n){for(var i=[];r<t+1+n;){var s=o(e,r);if(i.push(s.result),(r+=s.consumed)>t+1+n)throw new Error("invalid rlp")}return{consumed:1+n,result:i}}function o(e,t){if(0===e.length)throw new Error("invalid rlp data");if(e[t]>=248){if(t+1+(r=e[t]-247)>e.length)throw new Error("too short");if(t+1+r+(o=n(e,t+1,r))>e.length)throw new Error("to short");return i(e,t,t+1+r,r+o)}if(e[t]>=192){if(t+1+(o=e[t]-192)>e.length)throw new Error("invalid rlp data");return i(e,t,t+1,o)}if(e[t]>=184){var r;if(t+1+(r=e[t]-183)>e.length)throw new Error("invalid rlp data");if(t+1+r+(o=n(e,t+1,r))>e.length)throw new Error("invalid rlp data");return{consumed:1+r+o,result:bytes.hexlify(e.slice(t+1+r,t+1+r+o))}}if(e[t]>=128){var o;if(t+1+(o=e[t]-128)>e.length)throw new Error("invlaid rlp data");return{consumed:1+o,result:bytes.hexlify(e.slice(t+1,t+1+o))}}return{consumed:1,result:bytes.hexlify(e[t])}}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function(e){return bytes.hexlify(function e(t){if(Array.isArray(t)){var n=[];return t.forEach(function(t){n=n.concat(e(t))}),n.length<=55?(n.unshift(192+n.length),n):((i=r(n.length)).unshift(247+i.length),i.concat(n))}var i,o=Array.prototype.slice.call(bytes.arrayify(t));return 1===o.length&&o[0]<=127?o:o.length<=55?(o.unshift(128+o.length),o):((i=r(o.length)).unshift(183+i.length),i.concat(o))}(e))},t.decode=function(e){var t=bytes.arrayify(e),r=o(t,0);if(r.consumed!==t.length)throw new Error("invalid rlp data");return r.result}});unwrapExports(rlp);var rlp_1=rlp.encode,rlp_2=rlp.decode,address=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(bn);function i(e){"string"==typeof e&&e.match(/^0x[0-9A-Fa-f]{40}$/)||errors.throwError("invalid address",errors.INVALID_ARGUMENT,{arg:"address",value:e});for(var t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=t[n].charCodeAt(0);r=bytes.arrayify(keccak256_1.keccak256(r));for(var i=0;i<40;i+=2)r[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(15&r[i>>1])>=8&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}for(var o={},s=0;s<10;s++)o[String(s)]=String(s);for(s=0;s<26;s++)o[String.fromCharCode(65+s)]=String(10+s);var a=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function c(e){e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00";var t="";for(e.split("").forEach(function(e){t+=o[e]});t.length>=a;){var r=t.substring(0,a);t=parseInt(r,10)%97+t.substring(r.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function u(e){var t=null;if("string"!=typeof e&&errors.throwError("invalid address",errors.INVALID_ARGUMENT,{arg:"address",value:e}),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=i(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&errors.throwError("bad address checksum",errors.INVALID_ARGUMENT,{arg:"address",value:e});else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==c(e)&&errors.throwError("bad icap checksum",errors.INVALID_ARGUMENT,{arg:"address",value:e}),t=new n.default.BN(e.substring(4),36).toString(16);t.length<40;)t="0"+t;t=i("0x"+t)}else errors.throwError("invalid address",errors.INVALID_ARGUMENT,{arg:"address",value:e});return t}t.getAddress=u,t.getIcapAddress=function(e){for(var t=new n.default.BN(u(e).substring(2),16).toString(36).toUpperCase();t.length<30;)t="0"+t;return"XE"+c("XE00"+t)+t},t.getContractAddress=function(e){if(!e.from)throw new Error("missing from address");var t=e.nonce;return u("0x"+keccak256_1.keccak256(rlp.encode([u(e.from),bytes.stripZeros(bytes.hexlify(t))])).substring(26))}});unwrapExports(address);var address_1=address.getAddress,address_2=address.getIcapAddress,address_3=address.getContractAddress,utf8=createCommonjsModule(function(e,t){var r;function n(e,t){void 0===t&&(t=r.current),t!=r.current&&(errors.checkNormalize(),e=e.normalize(t));for(var n=[],i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o<128)n.push(o);else if(o<2048)n.push(o>>6|192),n.push(63&o|128);else if(55296==(64512&o)){i++;var s=e.charCodeAt(i);if(i>=e.length||56320!=(64512&s))throw new Error("invalid utf-8 string");o=65536+((1023&o)<<10)+(1023&s),n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(63&o|128)}else n.push(o>>12|224),n.push(o>>6&63|128),n.push(63&o|128)}return bytes.arrayify(n)}function i(e,t){e=bytes.arrayify(e);for(var r="",n=0;n<e.length;){var i=e[n++];if(i>>7!=0){var o=null,s=null;if(192==(224&i))o=1,s=127;else if(224==(240&i))o=2,s=2047;else{if(240!=(248&i)){if(!t){if(128==(192&i))throw new Error("invalid utf8 byte sequence; unexpected continuation byte");throw new Error("invalid utf8 byte sequence; invalid prefix")}continue}o=3,s=65535}if(n+o>e.length){if(!t)throw new Error("invalid utf8 byte sequence; too short");for(;n<e.length&&e[n]>>6==2;n++);}else{for(var a=i&(1<<8-o-1)-1,c=0;c<o;c++){var u=e[n];if(128!=(192&u)){a=null;break}a=a<<6|63&u,n++}if(null!==a)if(a<=s){if(!t)throw new Error("invalid utf8 byte sequence; overlong")}else if(a>1114111){if(!t)throw new Error("invalid utf8 byte sequence; out-of-range")}else if(a>=55296&&a<=57343){if(!t)throw new Error("invalid utf8 byte sequence; utf-16 surrogate")}else a<=65535?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296+(a>>10&1023),56320+(1023&a)));else if(!t)throw new Error("invalid utf8 byte sequence; invalid continuation byte")}}else r+=String.fromCharCode(i)}return r}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(r=t.UnicodeNormalizationForm||(t.UnicodeNormalizationForm={})),t.toUtf8Bytes=n,t.toUtf8String=i,t.formatBytes32String=function(e){var t=n(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return bytes.hexlify(bytes.concat([t,constants$5.HashZero]).slice(0,32))},t.parseBytes32String=function(e){var t=bytes.arrayify(e);if(32!==t.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw new Error("invalid bytes32 sdtring - no null terminator");for(var r=31;0===t[r-1];)r--;return i(t.slice(0,r))}});unwrapExports(utf8);var utf8_1=utf8.UnicodeNormalizationForm,utf8_2=utf8.toUtf8Bytes,utf8_3=utf8.toUtf8String,utf8_4=utf8.formatBytes32String,utf8_5=utf8.parseBytes32String,abiCoder=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(errors),o=new RegExp(/^bytes([0-9]*)$/),s=new RegExp(/^(u?int)([0-9]*)$/),a=new RegExp(/^(.*)\[([0-9]*)\]$/);t.defaultCoerceFunc=function(e,t){var r=e.match(s);return r&&parseInt(r[2])<=48?t.toNumber():t};var c=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),u=new RegExp("^[A-Za-z_][A-Za-z0-9_]*$");function f(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}function l(e,t){var r=e;function n(e){throw new Error('unexpected character "'+r[e]+'" at position '+e+' in "'+r+'"')}e=e.replace(/\s/g," ");for(var i={type:"",name:"",state:{allowType:!0}},o=i,s=0;s<e.length;s++){var a=e[s];switch(a){case"(":o.state.allowParams||n(s),o.state.allowType=!1,o.type=f(o.type),o.components=[{type:"",name:"",parent:o,state:{allowType:!0}}],o=o.components[0];break;case")":delete o.state,t&&"indexed"===o.name&&(o.indexed=!0,o.name=""),o.type=f(o.type);var c=o;(o=o.parent)||n(s),delete c.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,t&&"indexed"===o.name&&(o.indexed=!0,o.name=""),o.type=f(o.type);var u={type:"",name:"",parent:o.parent,state:{allowType:!0}};o.parent.components.push(u),delete o.parent,o=u;break;case" ":o.state.allowType&&""!==o.type&&(o.type=f(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&(t&&"indexed"===o.name?(o.indexed=!0,o.name=""):o.state.allowName=!1);break;case"[":o.state.allowArray||n(s),o.type+=a,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(s),o.type+=a,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=a,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=a,delete o.state.allowArray):o.state.readArray?o.type+=a:n(s)}}if(o.parent)throw new Error("unexpected eof");return delete i.state,t&&"indexed"===o.name&&(o.indexed=!0,o.name=""),i.type=f(i.type),i}function d(e){return R(t.defaultCoerceFunc,e).type}t.parseParamType=function(e){return l(e,!0)},t.formatParamType=d,t.formatSignature=function(e){return e.name+"("+e.inputs.map(function(e){return d(e)}).join(",")+")"},t.parseSignature=function(e){if("string"==typeof e)return"event "===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).substring(0,6)?function(e){var t={anonymous:!1,inputs:[],name:"",type:"event"},r=e.match(c);if(!r)throw new Error("invalid event: "+e);if(t.name=r[1].trim(),B(r[2]).forEach(function(e){(e=l(e,!0)).indexed=!!e.indexed,t.inputs.push(e)}),r[3].split(" ").forEach(function(e){switch(e){case"anonymous":t.anonymous=!0;break;case"":break;default:i.info("unknown modifier: "+e)}}),t.name&&!t.name.match(u))throw new Error('invalid identifier: "'+t.name+'"');return t}(e.substring(6).trim()):("function "===e.substring(0,9)&&(e=e.substring(9)),function(e){var t={constant:!1,gas:null,inputs:[],name:"",outputs:[],payable:!1,stateMutability:null,type:"function"},r=e.split("@");if(1!==r.length){if(r.length>2)throw new Error("invalid signature");if(!r[1].match(/^[0-9]+$/))throw new Error("invalid signature gas");t.gas=bignumber.bigNumberify(r[1]),e=r[0]}var n=(r=e.split(" returns "))[0].match(c);if(!n)throw new Error("invalid signature");if(t.name=n[1].trim(),!t.name.match(u))throw new Error('invalid identifier: "'+n[1]+'"');if(B(n[2]).forEach(function(e){t.inputs.push(l(e))}),n[3].split(" ").forEach(function(e){switch(e){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:i.info("unknown modifier: "+e)}}),r.length>1){var o=r[1].match(c);if(""!=o[1].trim()||""!=o[3].trim())throw new Error("unexpected tokens");B(o[2]).forEach(function(e){t.outputs.push(l(e))})}if("constructor"===t.name){if(t.type="constructor",t.outputs.length)throw new Error("constructor may not have outputs");delete t.name,delete t.outputs}return t}(e.trim()));throw new Error("unknown signature")};var h=function(){return function(e,t,r,n,i){this.coerceFunc=e,this.name=t,this.type=r,this.localName=n,this.dynamic=i}}(),p=function(e){function t(t){var r=e.call(this,t.coerceFunc,t.name,t.type,void 0,t.dynamic)||this;return properties.defineReadOnly(r,"coder",t),r}return r(t,e),t.prototype.encode=function(e){return this.coder.encode(e)},t.prototype.decode=function(e,t){return this.coder.decode(e,t)},t}(h),b=function(e){function t(t,r){return e.call(this,t,"null","",r,!1)||this}return r(t,e),t.prototype.encode=function(e){return bytes.arrayify([])},t.prototype.decode=function(e,t){if(t>e.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}},t}(h),m=function(e){function t(t,r,n,i){var o=this,s=(n?"int":"uint")+8*r;return(o=e.call(this,t,s,s,i,!1)||this).size=r,o.signed=n,o}return r(t,e),t.prototype.encode=function(e){try{var t=bignumber.bigNumberify(e);if(this.signed){var r=constants$5.MaxUint256.maskn(8*this.size-1);if(t.gt(r))throw new Error("out-of-bounds");if(r=r.add(constants$5.One).mul(constants$5.NegativeOne),t.lt(r))throw new Error("out-of-bounds")}else if(t.lt(constants$5.Zero)||t.gt(constants$5.MaxUint256.maskn(8*this.size)))throw new Error("out-of-bounds");return t=t.toTwos(8*this.size).maskn(8*this.size),this.signed&&(t=t.fromTwos(8*this.size).toTwos(256)),bytes.padZeros(bytes.arrayify(t),32)}catch(t){i.throwError("invalid number value",i.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:e})}return null},t.prototype.decode=function(e,t){e.length<t+32&&i.throwError("insufficient data for "+this.name+" type",i.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:bytes.hexlify(e.slice(t,t+32))});var r=32-this.size,n=bignumber.bigNumberify(e.slice(t+r,t+32));return n=this.signed?n.fromTwos(8*this.size):n.maskn(8*this.size),{consumed:32,value:this.coerceFunc(this.name,n)}},t}(h),g=new m(function(e,t){return t},32,!1,"none"),y=function(e){function t(t,r){return e.call(this,t,"bool","bool",r,!1)||this}return r(t,e),t.prototype.encode=function(e){return g.encode(e?1:0)},t.prototype.decode=function(e,t){try{var r=g.decode(e,t)}catch(e){throw"insufficient data for uint256 type"===e.reason&&i.throwError("insufficient data for boolean type",i.INVALID_ARGUMENT,{arg:this.localName,coderType:"boolean",value:e.value}),e}return{consumed:r.consumed,value:this.coerceFunc("bool",!r.value.isZero())}},t}(h),v=function(e){function t(t,r,n){var i=this,o="bytes"+r;return(i=e.call(this,t,o,o,n,!1)||this).length=r,i}return r(t,e),t.prototype.encode=function(e){var t=new Uint8Array(32);try{var r=bytes.arrayify(e);if(r.length!==this.length)throw new Error("incorrect data length");t.set(r)}catch(t){i.throwError("invalid "+this.name+" value",i.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:t.value||e})}return t},t.prototype.decode=function(e,t){return e.length<t+32&&i.throwError("insufficient data for "+name+" type",i.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:bytes.hexlify(e.slice(t,t+32))}),{consumed:32,value:this.coerceFunc(this.name,bytes.hexlify(e.slice(t,t+this.length)))}},t}(h),_=function(e){function t(t,r){return e.call(this,t,"address","address",r,!1)||this}return r(t,e),t.prototype.encode=function(e){var t=new Uint8Array(32);try{t.set(bytes.arrayify(address.getAddress(e)),12)}catch(t){i.throwError("invalid address",i.INVALID_ARGUMENT,{arg:this.localName,coderType:"address",value:e})}return t},t.prototype.decode=function(e,t){return e.length<t+32&&i.throwError("insufficuent data for address type",i.INVALID_ARGUMENT,{arg:this.localName,coderType:"address",value:bytes.hexlify(e.slice(t,t+32))}),{consumed:32,value:this.coerceFunc("address",address.getAddress(bytes.hexlify(e.slice(t+12,t+32))))}},t}(h);function $(e){var t=32*Math.ceil(e.length/32),r=new Uint8Array(t-e.length);return bytes.concat([g.encode(e.length),e,r])}function S(e,t,r){e.length<t+32&&i.throwError("insufficient data for dynamicBytes length",i.INVALID_ARGUMENT,{arg:r,coderType:"dynamicBytes",value:bytes.hexlify(e.slice(t,t+32))});var n=g.decode(e,t).value;try{n=n.toNumber()}catch(e){i.throwError("dynamic bytes count too large",i.INVALID_ARGUMENT,{arg:r,coderType:"dynamicBytes",value:n.toString()})}return e.length<t+32+n&&i.throwError("insufficient data for dynamicBytes type",i.INVALID_ARGUMENT,{arg:r,coderType:"dynamicBytes",value:bytes.hexlify(e.slice(t,t+32+n))}),{consumed:32+32*Math.ceil(n/32),value:e.slice(t+32,t+32+n)}}var E=function(e){function t(t,r){return e.call(this,t,"bytes","bytes",r,!0)||this}return r(t,e),t.prototype.encode=function(e){try{return $(bytes.arrayify(e))}catch(e){i.throwError("invalid bytes value",i.INVALID_ARGUMENT,{arg:this.localName,coderType:"bytes",value:e.value})}return null},t.prototype.decode=function(e,t){var r=S(e,t,this.localName);return r.value=this.coerceFunc("bytes",bytes.hexlify(r.value)),r},t}(h),w=function(e){function t(t,r){return e.call(this,t,"string","string",r,!0)||this}return r(t,e),t.prototype.encode=function(e){return"string"!=typeof e&&i.throwError("invalid string value",i.INVALID_ARGUMENT,{arg:this.localName,coderType:"string",value:e}),$(utf8.toUtf8Bytes(e))},t.prototype.decode=function(e,t){var r=S(e,t,this.localName);return r.value=this.coerceFunc("string",utf8.toUtf8String(r.value)),r},t}(h);function C(e){return 32*Math.ceil(e/32)}function A(e,t){if(Array.isArray(t));else if(t&&"object"==typeof t){var r=[];e.forEach(function(e){r.push(t[e.localName])}),t=r}else i.throwError("invalid tuple value",i.INVALID_ARGUMENT,{coderType:"tuple",value:t});e.length!==t.length&&i.throwError("types/value length mismatch",i.INVALID_ARGUMENT,{coderType:"tuple",value:t});var n=[];e.forEach(function(e,r){n.push({dynamic:e.dynamic,value:e.encode(t[r])})});var o=0,s=0;n.forEach(function(e){e.dynamic?(o+=32,s+=C(e.value.length)):o+=C(e.value.length)});var a=0,c=o,u=new Uint8Array(o+s);return n.forEach(function(e){e.dynamic?(u.set(g.encode(c),a),a+=32,u.set(e.value,c),c+=C(e.value.length)):(u.set(e.value,a),a+=C(e.value.length))}),u}function k(e,t,r){var n=r,i=0,o=[];return e.forEach(function(e){if(e.dynamic){var s=g.decode(t,r);(a=e.decode(t,n+s.value.toNumber())).consumed=s.consumed}else var a=e.decode(t,r);null!=a.value&&o.push(a.value),r+=a.consumed,i+=a.consumed}),e.forEach(function(e,t){var r=e.localName;r&&("length"===r&&(r="_length"),null==o[r]&&(o[r]=o[t]))}),{value:o,consumed:i}}var T=function(e){function t(t,r,n,i){var o=this,s=r.type+"["+(n>=0?n:"")+"]",a=-1===n||r.dynamic;return(o=e.call(this,t,"array",s,i,a)||this).coder=r,o.length=n,o}return r(t,e),t.prototype.encode=function(e){Array.isArray(e)||i.throwError("expected array value",i.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:e});var t=this.length,r=new Uint8Array(0);-1===t&&(t=e.length,r=g.encode(t)),i.checkArgumentCount(t,e.length," in coder array"+(this.localName?" "+this.localName:""));for(var n=[],o=0;o<e.length;o++)n.push(this.coder);return bytes.concat([r,A(n,e)])},t.prototype.decode=function(e,t){var r=0,n=this.length;if(-1===n){try{var o=g.decode(e,t)}catch(e){i.throwError("insufficient data for dynamic array length",i.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:e.value})}try{n=o.value.toNumber()}catch(e){i.throwError("array count too large",i.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:o.value.toString()})}r+=o.consumed,t+=o.consumed}for(var s=[],a=0;a<n;a++)s.push(new p(this.coder));var c=k(s,e,t);return c.consumed+=r,c.value=this.coerceFunc(this.type,c.value),c},t}(h),I=function(e){function t(t,r,n){var i=this,o=!1,s=[];r.forEach(function(e){e.dynamic&&(o=!0),s.push(e.type)});var a="tuple("+s.join(",")+")";return(i=e.call(this,t,"tuple",a,n,o)||this).coders=r,i}return r(t,e),t.prototype.encode=function(e){return A(this.coders,e)},t.prototype.decode=function(e,t){var r=k(this.coders,e,t);return r.value=this.coerceFunc(this.type,r.value),r},t}(h);function B(e){e=e.trim();for(var t=[],r="",n=0,i=0;i<e.length;i++){var o=e[i];if(","===o&&0===n)t.push(r),r="";else if(r+=o,"("===o)n++;else if(")"===o&&-1===--n)throw new Error("unbalanced parenthsis")}return r&&t.push(r),t}var P={address:_,bool:y,string:w,bytes:E};function R(e,t){var r,n=P[t.type];if(n)return new n(e,t.name);if(r=t.type.match(s))return(0===(c=parseInt(r[2]||"256"))||c>256||c%8!=0)&&i.throwError("invalid "+r[1]+" bit length",i.INVALID_ARGUMENT,{arg:"param",value:t}),new m(e,c/8,"int"===r[1],t.name);if(r=t.type.match(o))return(0===(c=parseInt(r[1]))||c>32)&&i.throwError("invalid bytes length",i.INVALID_ARGUMENT,{arg:"param",value:t}),new v(e,c,t.name);if(r=t.type.match(a)){var c=parseInt(r[2]||"-1");return(t=properties.shallowCopy(t)).type=r[1],t=properties.deepCopy(t),new T(e,R(e,t),c,t.name)}return"tuple"===t.type.substring(0,5)?function(e,t,r){t||(t=[]);var n=[];return t.forEach(function(t){n.push(R(e,t))}),new I(e,n,r)}(e,t.components,t.name):""===t.type?new b(e,t.name):(i.throwError("invalid type",i.INVALID_ARGUMENT,{arg:"type",value:t.type}),null)}var O=function(){function e(r){i.checkNew(this,e),r||(r=t.defaultCoerceFunc),properties.defineReadOnly(this,"coerceFunc",r)}return e.prototype.encode=function(e,t){e.length!==t.length&&i.throwError("types/values length mismatch",i.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});var r=[];return e.forEach(function(e){var t=null;t="string"==typeof e?l(e):e,r.push(R(this.coerceFunc,t))},this),bytes.hexlify(new I(this.coerceFunc,r,"_").encode(t))},e.prototype.decode=function(e,t){var r=[];return e.forEach(function(e){var t=null;t="string"==typeof e?l(e):properties.deepCopy(e),r.push(R(this.coerceFunc,t))},this),new I(this.coerceFunc,r,"_").decode(bytes.arrayify(t),0).value},e}();t.AbiCoder=O,t.defaultAbiCoder=new O});unwrapExports(abiCoder);var abiCoder_1=abiCoder.defaultCoerceFunc,abiCoder_2=abiCoder.parseParamType,abiCoder_3=abiCoder.formatParamType,abiCoder_4=abiCoder.formatSignature,abiCoder_5=abiCoder.parseSignature,abiCoder_6=abiCoder.AbiCoder,abiCoder_7=abiCoder.defaultAbiCoder,hash=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(errors),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=new RegExp("^((.*)\\.)?([^.]+)$"),s=new RegExp("^[a-z0-9.-]*$");t.namehash=function(e){"string"!=typeof e&&n.throwError("invalid address - "+String(e),n.INVALID_ARGUMENT,{argument:"name",value:e}),(e=e.toLowerCase()).match(s)||n.throwError("contains invalid UseSTD3ASCIIRules characters",n.INVALID_ARGUMENT,{argument:"name",value:e});for(var t=i;e.length;){var r=e.match(o),a=utf8.toUtf8Bytes(r[3]);t=keccak256_1.keccak256(bytes.concat([t,keccak256_1.keccak256(a)])),e=r[2]||""}return bytes.hexlify(t)},t.id=function(e){return keccak256_1.keccak256(utf8.toUtf8Bytes(e))},t.hashMessage=function(e){return keccak256_1.keccak256(bytes.concat([utf8.toUtf8Bytes("Ethereum Signed Message:\n"),utf8.toUtf8Bytes(String(e.length)),"string"==typeof e?utf8.toUtf8Bytes(e):e]))}});unwrapExports(hash);var hash_1$1=hash.namehash,hash_2=hash.id,hash_3=hash.hashMessage,_interface=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(errors),o=function(){return function(e){properties.setType(this,"Indexed"),properties.defineReadOnly(this,"hash",e)}}(),s=function(){return function(e){for(var t in properties.setType(this,"Description"),e)properties.defineReadOnly(this,t,properties.deepCopy(e[t],!0));Object.freeze(this)}}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.encode=function(e,t){bytes.isHexString(e)||i.throwError("invalid contract bytecode",i.INVALID_ARGUMENT,{arg:"bytecode",value:e}),i.checkArgumentCount(t.length,this.inputs.length," in Interface constructor");try{return e+abiCoder.defaultAbiCoder.encode(this.inputs,t).substring(2)}catch(e){i.throwError("invalid constructor argument",i.INVALID_ARGUMENT,{arg:e.arg,reason:e.reason,value:e.value})}return null},t}(s),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.encode=function(e){i.checkArgumentCount(e.length,this.inputs.length," in interface function "+this.name);try{return this.sighash+abiCoder.defaultAbiCoder.encode(this.inputs,e).substring(2)}catch(e){i.throwError("invalid input argument",i.INVALID_ARGUMENT,{arg:e.arg,reason:e.reason,value:e.value})}return null},t.prototype.decode=function(e){try{return abiCoder.defaultAbiCoder.decode(this.outputs,bytes.arrayify(e))}catch(t){i.throwError("invalid data for function output",i.INVALID_ARGUMENT,{arg:"data",errorArg:t.arg,errorValue:t.value,value:e,reason:t.reason})}},t}(s),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(s),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.encodeTopics=function(e){var t=this;e.length>this.inputs.length&&i.throwError("too many arguments for "+this.name,i.UNEXPECTED_ARGUMENT,{maxCount:e.length,expectedCount:this.inputs.length});var r=[];for(this.anonymous||r.push(this.topic),e.forEach(function(e,n){var o=t.inputs[n];o.indexed?null==e?r.push(null):"string"===o.type?r.push(hash.id(e)):"bytes"===o.type?r.push(keccak256_1.keccak256(e)):-1!==o.type.indexOf("[")||"tuple"===o.type.substring(0,5)?i.throwError("filtering with tuples or arrays not implemented yet; bug us on GitHub",i.NOT_IMPLEMENTED,{operation:"filter(array|tuple)"}):("address"===o.type&&address.getAddress(e),r.push(bytes.hexZeroPad(bytes.hexlify(e),32).toLowerCase())):null!=e&&i.throwError("cannot filter non-indexed parameters; must be null",i.INVALID_ARGUMENT,{argument:o.name||n,value:e})});r.length&&null===r[r.length-1];)r.pop();return r},t.prototype.decode=function(e,t){null==t||this.anonymous||(t=t.slice(1));var r=[],n=[],i=[];if(this.inputs.forEach(function(e,t){e.indexed?"string"===e.type||"bytes"===e.type||e.type.indexOf("[")>=0||"tuple"===e.type.substring(0,5)?(r.push({type:"bytes32",name:e.name||""}),i.push(!0)):(r.push(e),i.push(!1)):(n.push(e),i.push(!1))}),null!=t)var s=abiCoder.defaultAbiCoder.decode(r,bytes.concat(t));var a=abiCoder.defaultAbiCoder.decode(n,bytes.arrayify(e)),c={},f=0,l=0;return this.inputs.forEach(function(e,r){e.indexed?null==t?c[r]=new o(null):i[r]?c[r]=new o(s[l++]):c[r]=s[l++]:c[r]=a[f++],e.name&&(c[e.name]=c[r])}),c.length=this.inputs.length,new u(c)},t}(s),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(s),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(s);function h(e){switch(e.type){case"constructor":var t=new a({inputs:e.inputs,payable:null==e.payable||!!e.payable});this.deployFunction||(this.deployFunction=t);break;case"function":var r=abiCoder.formatSignature(e).replace(/tuple/g,""),n=hash.id(r).substring(0,10);t=new c({inputs:e.inputs,outputs:e.outputs,gas:e.gas,payable:null==e.payable||!!e.payable,type:e.constant?"call":"transaction",name:e.name,signature:r,sighash:n});e.name&&(null==this.functions[e.name]?properties.defineReadOnly(this.functions,e.name,t):i.warn("WARNING: Multiple definitions for "+e.name)),null==this.functions[t.signature]&&properties.defineReadOnly(this.functions,t.signature,t);break;case"event":r=abiCoder.formatSignature(e).replace(/tuple/g,""),t=new f({name:e.name,signature:r,inputs:e.inputs,topic:hash.id(r),anonymous:!!e.anonymous});e.name&&null==this.events[e.name]&&properties.defineReadOnly(this.events,e.name,t),null==this.events[t.signature]&&properties.defineReadOnly(this.events,t.signature,t);break;case"fallback":break;default:i.warn("WARNING: unsupported ABI type - "+e.type)}}var p=function(){function e(t){if(i.checkNew(this,e),"string"==typeof t){try{t=JSON.parse(t)}catch(e){i.throwError("could not parse ABI JSON",i.INVALID_ARGUMENT,{arg:"abi",errorMessage:e.message,value:t})}if(!Array.isArray(t))return i.throwError("invalid abi",i.INVALID_ARGUMENT,{arg:"abi",value:t}),null}properties.defineReadOnly(this,"functions",{}),properties.defineReadOnly(this,"events",{});var r=[];t.forEach(function(e){"string"==typeof e&&(e=abiCoder.parseSignature(e)),r.push(e)}),properties.defineReadOnly(this,"abi",properties.deepCopy(r,!0)),r.forEach(h,this),this.deployFunction||h.call(this,{type:"constructor",inputs:[]}),properties.setType(this,"Interface")}return e.prototype.parseTransaction=function(e){var t=e.data.substring(0,10).toLowerCase();for(var r in this.functions)if(-1!==r.indexOf("(")){var n=this.functions[r];if(n.sighash===t){var i=abiCoder.defaultAbiCoder.decode(n.inputs,"0x"+e.data.substring(10));return new l({args:i,decode:n.decode,name:n.name,signature:n.signature,sighash:n.sighash,value:bignumber.bigNumberify(e.value||"0")})}}return null},e.prototype.parseLog=function(e){for(var t in this.events)if(-1!==t.indexOf("(")){var r=this.events[t];if(!r.anonymous&&r.topic===e.topics[0])return new d({decode:r.decode,name:r.name,signature:r.signature,topic:r.topic,values:r.decode(e.data,e.topics)})}return null},e.isInterface=function(e){return properties.isType(e,"Interface")},e.isIndexed=function(e){return properties.isType(e,"Indexed")},e}();t.Interface=p});unwrapExports(_interface);var _interface_1=_interface.Interface,abstractProvider=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){properties.setType(this,"Provider")}return e.isProvider=function(e){return properties.isType(e,"Provider")},e}();t.Provider=r});unwrapExports(abstractProvider);var abstractProvider_1=abstractProvider.Provider,abstractSigner=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){properties.setType(this,"Signer")}return e.isSigner=function(e){return properties.isType(e,"Signer")},e}();t.Signer=r});unwrapExports(abstractSigner);var abstractSigner_1=abstractSigner.Signer,contract=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(errors),o=function(e){function t(t,r){var n=e.call(this)||this;return properties.defineReadOnly(n,"address",t),properties.defineReadOnly(n,"provider",r),n}return r(t,e),t.prototype.getAddress=function(){return Promise.resolve(this.address)},t.prototype._fail=function(e,t){return Promise.resolve().then(function(){i.throwError(e,i.UNSUPPORTED_OPERATION,{operation:t})})},t.prototype.signMessage=function(e){return this._fail("VoidSigner cannot sign messages","signMessage")},t.prototype.sendTransaction=function(e){return this._fail("VoidSigner cannot sign transactions","sendTransaction")},t.prototype.connect=function(e){return new t(this.address,e)},t}(abstractSigner.Signer);t.VoidSigner=o;var s={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0};function a(e,t,r){var n=e.interface.functions[t];return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a={},c=null;if(t.length===n.inputs.length+1&&"object"==typeof t[t.length-1])for(var u in null!=(a=properties.shallowCopy(t.pop())).blockTag&&(c=a.blockTag),delete a.blockTag,a)if(!s[u])throw new Error("unknown transaction override "+u);if(t.length!=n.inputs.length)throw new Error("incorrect number of arguments");return["data","to"].forEach(function(e){null!=a[e]&&i.throwError("cannot override "+e,i.UNSUPPORTED_OPERATION,{operation:e})}),a.to=e._deployed(c).then(function(){return e.addressPromise}),function e(t,r,n){if(Array.isArray(n)){var i=[];return n.forEach(function(n,o){var s=null;s=Array.isArray(r)?r[o]:r[n.name],i.push(e(t,s,n))}),Promise.all(i)}if("address"===n.type)return t.resolveName(r);if("tuple"===n.type)return e(t,r,n.components);var o=n.type.match(/(.*)(\[[0-9]*\]$)/);if(o){if(!Array.isArray(r))throw new Error("invalid value for array");var s=[],a={components:n.components,type:o[1]};return r.forEach(function(r){s.push(e(t,r,a))}),Promise.all(s)}return Promise.resolve(r)}(e.provider,t,n.inputs).then(function(t){if(a.data=n.encode(t),"call"===n.type)return r?Promise.resolve(constants$5.Zero):(e.provider||i.throwError("call (constant functions) require a provider or a signer with a provider",i.UNSUPPORTED_OPERATION,{operation:"call"}),["gasLimit","gasPrice","value"].forEach(function(e){if(null!=a[e])throw new Error("call cannot override "+e)}),null==a.from&&e.signer&&(a.from=e.signer.getAddress()),e.provider.call(a,c).then(function(r){if(bytes.hexDataLength(r)%32==4&&"0x08c379a0"===bytes.hexDataSlice(r,0,4)){var o=abiCoder.defaultAbiCoder.decode(["string"],bytes.hexDataSlice(r,4));i.throwError("call revert exception",i.CALL_EXCEPTION,{address:e.address,args:t,method:n.signature,errorSignature:"Error(string)",errorArgs:[o],reason:o,transaction:a})}try{var s=n.decode(r);return 1===n.outputs.length&&(s=s[0]),s}catch(o){throw"0x"===r&&n.outputs.length>0&&i.throwError("call exception",i.CALL_EXCEPTION,{address:e.address,method:n.signature,args:t}),o}}));if("transaction"===n.type)return r?(e.provider||i.throwError("estimate gas require a provider or a signer with a provider",i.UNSUPPORTED_OPERATION,{operation:"estimateGas"}),null==a.from&&e.signer&&(a.from=e.signer.getAddress()),e.provider.estimateGas(a)):(null==a.gasLimit&&null!=n.gas&&(a.gasLimit=bignumber.bigNumberify(n.gas).add(21e3)),e.signer||i.throwError("sending a transaction require a signer",i.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=a.from&&i.throwError("cannot override from in a transaction",i.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),e.signer.sendTransaction(a).then(function(t){var r=t.wait.bind(t);return t.wait=function(t){return r(t).then(function(t){return t.events=t.logs.map(function(r){var n=properties.deepCopy(r),i=e.interface.parseLog(r);return i&&(n.args=i.values,n.decode=i.decode,n.event=i.name,n.eventSignature=i.signature),n.removeListener=function(){return e.provider},n.getBlock=function(){return e.provider.getBlock(t.blockHash)},n.getTransaction=function(){return e.provider.getTransaction(t.transactionHash)},n.getTransactionReceipt=function(){return Promise.resolve(t)},n}),t})},t}));throw new Error("invalid type - "+n.type)})}}function c(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.join(":"):""):"*"}var u=function(){function e(t,r,n){var o=this;if(i.checkNew(this,e),_interface.Interface.isInterface(r)?properties.defineReadOnly(this,"interface",r):properties.defineReadOnly(this,"interface",new _interface.Interface(r)),abstractSigner.Signer.isSigner(n)?(properties.defineReadOnly(this,"provider",n.provider),properties.defineReadOnly(this,"signer",n)):abstractProvider.Provider.isProvider(n)?(properties.defineReadOnly(this,"provider",n),properties.defineReadOnly(this,"signer",null)):i.throwError("invalid signer or provider",i.INVALID_ARGUMENT,{arg:"signerOrProvider",value:n}),properties.defineReadOnly(this,"estimate",{}),properties.defineReadOnly(this,"functions",{}),properties.defineReadOnly(this,"filters",{}),Object.keys(this.interface.events).forEach(function(e){var t=o.interface.events[e];properties.defineReadOnly(o.filters,e,function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return{address:o.address,topics:t.encodeTopics(e)}})}),this._events=[],properties.defineReadOnly(this,"address",t),this.provider)properties.defineReadOnly(this,"addressPromise",this.provider.resolveName(t).then(function(e){if(null==e)throw new Error("name not found");return e}).catch(function(e){throw e}));else try{properties.defineReadOnly(this,"addressPromise",Promise.resolve(address.getAddress(t)))}catch(e){i.throwError("provider is required to use non-address contract address",i.INVALID_ARGUMENT,{argument:"addressOrName",value:t})}Object.keys(this.interface.functions).forEach(function(e){var t=a(o,e,!1);null==o[e]?properties.defineReadOnly(o,e,t):i.warn("WARNING: Multiple definitions for "+e),null==o.functions[e]&&(properties.defineReadOnly(o.functions,e,t),properties.defineReadOnly(o.estimate,e,a(o,e,!0)))})}return e.prototype.deployed=function(){return this._deployed()},e.prototype._deployed=function(e){var t=this;return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(function(){return t}):this._deployedPromise=this.provider.getCode(this.address,e).then(function(e){return"0x"===e&&i.throwError("contract not deployed",i.UNSUPPORTED_OPERATION,{contractAddress:t.address,operation:"getDeployed"}),t})),this._deployedPromise},e.prototype.fallback=function(e){var t=this;this.signer||i.throwError("sending a transaction require a signer",i.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});var r=properties.shallowCopy(e||{});return["from","to"].forEach(function(e){null!=r[e]&&i.throwError("cannot override "+e,i.UNSUPPORTED_OPERATION,{operation:e})}),r.to=this.addressPromise,this.deployed().then(function(){return t.signer.sendTransaction(r)})},e.prototype.connect=function(t){"string"==typeof t&&(t=new o(t,this.provider));var r=new e(this.address,this.interface,t);return this.deployTransaction&&properties.defineReadOnly(r,"deployTransaction",this.deployTransaction),r},e.prototype.attach=function(t){return new e(t,this.interface,this.signer||this.provider)},e.isIndexed=function(e){return _interface.Interface.isIndexed(e)},e.prototype._getEventFilter=function(e){var t=this;if("string"==typeof e){if("*"===e)return{prepareEvent:function(e){var r=t.interface.parseLog(e);return r&&(e.args=r.values,e.decode=r.decode,e.event=r.name,e.eventSignature=r.signature),[e]},eventTag:"*",filter:{address:this.address}};-1!==e.indexOf("(")&&(e=abiCoder.formatSignature(abiCoder.parseSignature("event "+e)));var r=this.interface.events[e];r||i.throwError("unknown event - "+e,i.INVALID_ARGUMENT,{argumnet:"eventName",value:e});var n={address:this.address,topics:[r.topic]};return{prepareEvent:function(e){var t=r.decode(e.data,e.topics);e.args=t;var n=Array.prototype.slice.call(t);return n.push(e),n},event:r,eventTag:c(n),filter:n}}var o={address:this.address},s=null;if(e.topics&&e.topics[0])for(var a in o.topics=e.topics,this.interface.events)if(-1!==a.indexOf("(")){var u=this.interface.events[a];if(u.topic===e.topics[0].toLowerCase()){s=u;break}}return{prepareEvent:function(e){if(!s)return[e];var t=s.decode(e.data,e.topics);e.args=t;var r=Array.prototype.slice.call(t);return r.push(e),r},event:s,eventTag:c(o),filter:o}},e.prototype._addEventListener=function(e,t,r){var n=this;this.provider||i.throwError("events require a provider or a signer with a provider",i.UNSUPPORTED_OPERATION,{operation:"once"});var o=function(r){var i=properties.deepCopy(r),o=e.prepareEvent(i);e.event&&(i.decode=e.event.decode,i.event=e.event.name,i.eventSignature=e.event.signature),i.removeListener=function(){n.removeListener(e.filter,t)},i.getBlock=function(){return n.provider.getBlock(r.blockHash)},i.getTransaction=function(){return n.provider.getTransaction(r.transactionHash)},i.getTransactionReceipt=function(){return n.provider.getTransactionReceipt(r.transactionHash)},n.emit.apply(n,[e.filter].concat(o))};this.provider.on(e.filter,o),this._events.push({eventFilter:e,listener:t,wrappedListener:o,once:r})},e.prototype.on=function(e,t){return this._addEventListener(this._getEventFilter(e),t,!1),this},e.prototype.once=function(e,t){return this._addEventListener(this._getEventFilter(e),t,!0),this},e.prototype.addListener=function(e,t){return this.on(e,t)},e.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this.provider)return!1;var i=!1,o=this._getEventFilter(e);return this._events=this._events.filter(function(e){return e.eventFilter.eventTag!==o.eventTag||(setTimeout(function(){e.listener.apply(t,r)},0),i=!0,!e.once)}),i},e.prototype.listenerCount=function(e){if(!this.provider)return 0;var t=this._getEventFilter(e);return this._events.filter(function(e){return e.eventFilter.eventTag===t.eventTag}).length},e.prototype.listeners=function(e){if(!this.provider)return[];var t=this._getEventFilter(e);return this._events.filter(function(e){return e.eventFilter.eventTag===t.eventTag}).map(function(e){return e.listener})},e.prototype.removeAllListeners=function(e){var t=this;if(!this.provider)return this;var r=this._getEventFilter(e);return this._events=this._events.filter(function(e){return e.eventFilter.eventTag!==r.eventTag||(t.provider.removeListener(e.eventFilter.filter,e.wrappedListener),!1)}),this},e.prototype.removeListener=function(e,t){var r=this;if(!this.provider)return this;var n=!1,i=this._getEventFilter(e);return this._events=this._events.filter(function(e){return e.eventFilter.eventTag!==i.eventTag||(e.listener!==t||(r.provider.removeListener(e.eventFilter.filter,e.wrappedListener),!!n||(n=!0,!1)))}),this},e}();t.Contract=u;var f=function(){function e(e,t,r){var n=null;"string"==typeof t?n=t:bytes.isArrayish(t)?n=bytes.hexlify(t):"string"==typeof t.object?n=t.object:i.throwError("bytecode must be a valid hex string",i.INVALID_ARGUMENT,{arg:"bytecode",value:t}),"0x"!==n.substring(0,2)&&(n="0x"+n),bytes.isHexString(n)||i.throwError("bytecode must be a valid hex string",i.INVALID_ARGUMENT,{arg:"bytecode",value:t}),n.length%2!=0&&i.throwError("bytecode must be valid data (even length)",i.INVALID_ARGUMENT,{arg:"bytecode",value:t}),properties.defineReadOnly(this,"bytecode",n),_interface.Interface.isInterface(e)?properties.defineReadOnly(this,"interface",e):properties.defineReadOnly(this,"interface",new _interface.Interface(e)),r&&!abstractSigner.Signer.isSigner(r)&&i.throwError("invalid signer",i.INVALID_ARGUMENT,{arg:"signer",value:null}),properties.defineReadOnly(this,"signer",r||null)}return e.prototype.getDeployTransaction=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={};if(e.length===this.interface.deployFunction.inputs.length+1)for(var n in r=properties.shallowCopy(e.pop()))if(!s[n])throw new Error("unknown transaction override "+n);return["data","from","to"].forEach(function(e){null!=r[e]&&i.throwError("cannot override "+e,i.UNSUPPORTED_OPERATION,{operation:e})}),i.checkArgumentCount(e.length,this.interface.deployFunction.inputs.length," in Contract constructor"),r.data=this.interface.deployFunction.encode(this.bytecode,e),r},e.prototype.deploy=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.getDeployTransaction.apply(this,t);return this.signer.sendTransaction(n).then(function(t){var r=new u(address.getContractAddress(t),e.interface,e.signer);return properties.defineReadOnly(r,"deployTransaction",t),r})},e.prototype.attach=function(e){return new u(e,this.interface,this.signer)},e.prototype.connect=function(t){return new e(this.interface,this.bytecode,t)},e.fromSolidity=function(t,r){null==t&&i.throwError("missing compiler output",i.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof t&&(t=JSON.parse(t));var n=t.abi,o=null;return t.bytecode?o=t.bytecode:t.evm&&t.evm.bytecode&&(o=t.evm.bytecode),new e(n,o,r)},e}();t.ContractFactory=f});unwrapExports(contract);var contract_1=contract.VoidSigner,contract_2=contract.Contract,contract_3=contract.ContractFactory,wordlist=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.check=function(e){for(var t=[],r=0;r<2048;r++){var n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return hash.id(t.join("\n")+"\n")};var r=function(){function e(e){properties.defineReadOnly(this,"locale",e)}return e.prototype.split=function(e){return e.toLowerCase().split(/ +/g)},e.prototype.join=function(e){return e.join(" ")},e}();t.Wordlist=r,t.register=function(e,t){t||(t=e.locale)}});unwrapExports(wordlist);var wordlist_1=wordlist.check,wordlist_2=wordlist.Wordlist,wordlist_3=wordlist.register,langEn_1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var n="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo",i=null;function o(e){if(null==i&&(i=n.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==wordlist.check(e)))throw i=null,new Error("BIP39 Wordlist for en (English) FAILED")}var s=new(function(e){function t(){return e.call(this,"en")||this}return r(t,e),t.prototype.getWord=function(e){return o(this),i[e]},t.prototype.getWordIndex=function(e){return o(this),i.indexOf(e)},t}(wordlist.Wordlist));t.langEn=s,wordlist.register(s)});unwrapExports(langEn_1);var langEn_2=langEn_1.langEn,basex=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){properties.defineReadOnly(this,"alphabet",e),properties.defineReadOnly(this,"base",e.length),properties.defineReadOnly(this,"_alphabetMap",{}),properties.defineReadOnly(this,"_leader",e.charAt(0));for(var t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}return e.prototype.encode=function(e){var t=bytes.arrayify(e);if(0===t.length)return"";for(var r=[0],n=0;n<t.length;++n){for(var i=t[n],o=0;o<r.length;++o)i+=r[o]<<8,r[o]=i%this.base,i=i/this.base|0;for(;i>0;)r.push(i%this.base),i=i/this.base|0}for(var s="",a=0;0===t[a]&&a<t.length-1;++a)s+=this._leader;for(var c=r.length-1;c>=0;--c)s+=this.alphabet[r[c]];return s},e.prototype.decode=function(e){if("string"!=typeof e)throw new TypeError("Expected String");var t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(var r=0;r<e.length;r++){var n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");for(var i=n,o=0;o<t.length;++o)i+=t[o]*this.base,t[o]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(var s=0;e[s]===this._leader&&s<e.length-1;++s)t.push(0);return bytes.arrayify(new Uint8Array(t.reverse()))},e}();t.BaseX=r;var n=new r("abcdefghijklmnopqrstuvwxyz234567");t.Base32=n;var i=new r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");t.Base58=i});unwrapExports(basex);var basex_1=basex.BaseX,basex_2=basex.Base32,basex_3=basex.Base58,pbkdf2_1=createCommonjsModule(function(e,t){function r(e){return Buffer.from(bytes.arrayify(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf2=function(e,t,n,i,o){return bytes.arrayify(crypto$l.pbkdf2Sync(r(e),r(t),n,i,o))}});unwrapExports(pbkdf2_1);var pbkdf2_2=pbkdf2_1.pbkdf2,hmac$1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(errors);!function(e){e.sha256="sha256",e.sha512="sha512"}(n=t.SupportedAlgorithms||(t.SupportedAlgorithms={})),t.computeHmac=function(e,t,r){return n[e]||i.throwError("unsupported algorithm "+e,i.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),bytes.arrayify(crypto$l.createHmac(e,Buffer.from(bytes.arrayify(t))).update(Buffer.from(bytes.arrayify(r))).digest())}});unwrapExports(hmac$1);var hmac_1=hmac$1.SupportedAlgorithms,hmac_2=hmac$1.computeHmac,_from$1="elliptic@6.3.3",_id$1="elliptic@6.3.3",_inBundle$1=!1,_integrity$1="sha1-VILZZG1UvLif19mU/J4ulWiHbj8=",_location$1="/ethers/elliptic",_phantomChildren$1={},_requested$1={type:"version",registry:!0,raw:"elliptic@6.3.3",name:"elliptic",escapedName:"elliptic",rawSpec:"6.3.3",saveSpec:null,fetchSpec:"6.3.3"},_requiredBy$1=["/ethers"],_resolved$1="https://registry.npmjs.org/elliptic/-/elliptic-6.3.3.tgz",_shasum$1="5482d9646d54bcb89fd7d994fc9e2e9568876e3f",_spec$1="elliptic@6.3.3",_where$1="/Users/mariusdarila/go/src/akasha-sdk-js/node_modules/ethers",author$1={name:"Fedor Indutny",email:"fedor@indutny.com"},bugs$1={url:"https://github.com/indutny/elliptic/issues"},bundleDependencies$1=!1,dependencies$1={"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0",inherits:"^2.0.1"},deprecated$1=!1,description$1="EC cryptography",devDependencies$1={brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},files$1=["lib"],homepage$1="https://github.com/indutny/elliptic",keywords$1=["EC","Elliptic","curve","Cryptography"],license$1="MIT",main$1="lib/elliptic.js",name$2="elliptic",repository$1={type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts$1={jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version$1="6.3.3",_package$2={_from:_from$1,_id:_id$1,_inBundle:_inBundle$1,_integrity:_integrity$1,_location:_location$1,_phantomChildren:_phantomChildren$1,_requested:_requested$1,_requiredBy:_requiredBy$1,_resolved:_resolved$1,_shasum:_shasum$1,_spec:_spec$1,_where:_where$1,author:author$1,bugs:bugs$1,bundleDependencies:bundleDependencies$1,dependencies:dependencies$1,deprecated:deprecated$1,description:description$1,devDependencies:devDependencies$1,files:files$1,homepage:homepage$1,keywords:keywords$1,license:license$1,main:main$1,name:name$2,repository:repository$1,scripts:scripts$1,version:version$1},_package$3=Object.freeze({_from:_from$1,_id:_id$1,_inBundle:_inBundle$1,_integrity:_integrity$1,_location:_location$1,_phantomChildren:_phantomChildren$1,_requested:_requested$1,_requiredBy:_requiredBy$1,_resolved:_resolved$1,_shasum:_shasum$1,_spec:_spec$1,_where:_where$1,author:author$1,bugs:bugs$1,bundleDependencies:bundleDependencies$1,dependencies:dependencies$1,deprecated:deprecated$1,description:description$1,devDependencies:devDependencies$1,files:files$1,homepage:homepage$1,keywords:keywords$1,license:license$1,main:main$1,name:name$2,repository:repository$1,scripts:scripts$1,version:version$1,default:_package$2}),utils_1$2=createCommonjsModule(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.assert=function(e,t){if(!e)throw new Error(t||"Assertion failed")},r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e},r.getNAF=function(e,t){for(var r=[],n=1<<t+1,i=e.clone();i.cmpn(1)>=0;){var o;if(i.isOdd()){var s=i.andln(n-1);o=s>(n>>1)-1?(n>>1)-s:s,i.isubn(o)}else o=0;r.push(o);for(var a=0!==i.cmpn(0)&&0===i.andln(n-1)?t+1:1,c=1;c<a;c++)r.push(0);i.iushrn(a)}return r},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n=0,i=0;e.cmpn(-n)>0||t.cmpn(-i)>0;){var o,s,a,c=e.andln(3)+n&3,u=t.andln(3)+i&3;3===c&&(c=-1),3===u&&(u=-1),o=0==(1&c)?0:3!=(a=e.andln(7)+n&7)&&5!==a||2!==u?c:-c,r[0].push(o),s=0==(1&u)?0:3!=(a=t.andln(7)+i&7)&&5!==a||2!==c?u:-u,r[1].push(s),2*n===o+1&&(n=1-n),2*i===s+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new bn(e,"hex","le")}}),inherits_1$1=inherits;function toArray$1(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}else for(n=0;n<e.length;n++)r[n]=0|e[n];return r}var toArray_1$1=toArray$1;function toHex$1(e){for(var t="",r=0;r<e.length;r++)t+=zero2$1(e[r].toString(16));return t}var toHex_1$1=toHex$1;function htonl$1(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}var htonl_1$1=htonl$1;function toHex32$1(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=htonl$1(i)),r+=zero8$1(i.toString(16))}return r}var toHex32_1$1=toHex32$1;function zero2$1(e){return 1===e.length?"0"+e:e}var zero2_1$1=zero2$1;function zero8$1(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}var zero8_1$1=zero8$1;function join32$1(e,t,r,n){var i=r-t;minimalisticAssert(i%4==0);for(var o=new Array(i/4),s=0,a=t;s<o.length;s++,a+=4){var c;c="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],o[s]=c>>>0}return o}var join32_1$1=join32$1;function split32$1(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r}var split32_1$1=split32$1;function rotr32$2(e,t){return e>>>t|e<<32-t}var rotr32_1$1=rotr32$2;function rotl32$3(e,t){return e<<t|e>>>32-t}var rotl32_1$1=rotl32$3;function sum32$4(e,t){return e+t>>>0}var sum32_1$1=sum32$4;function sum32_3$2(e,t,r){return e+t+r>>>0}var sum32_3_1$1=sum32_3$2;function sum32_4$3(e,t,r,n){return e+t+r+n>>>0}var sum32_4_1$1=sum32_4$3;function sum32_5$3(e,t,r,n,i){return e+t+r+n+i>>>0}var sum32_5_1$1=sum32_5$3;function sum64$2(e,t,r,n){var i=e[t],o=n+e[t+1]>>>0,s=(o<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=o}var sum64_1$1=sum64$2;function sum64_hi$2(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0}var sum64_hi_1$1=sum64_hi$2;function sum64_lo$2(e,t,r,n){return t+n>>>0}var sum64_lo_1$1=sum64_lo$2;function sum64_4_hi$2(e,t,r,n,i,o,s,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+o>>>0)<o?1:0,e+r+i+s+(c+=(u=u+a>>>0)<a?1:0)>>>0}var sum64_4_hi_1$1=sum64_4_hi$2;function sum64_4_lo$2(e,t,r,n,i,o,s,a){return t+n+o+a>>>0}var sum64_4_lo_1$1=sum64_4_lo$2;function sum64_5_hi$2(e,t,r,n,i,o,s,a,c,u){var f=0,l=t;return f+=(l=l+n>>>0)<t?1:0,f+=(l=l+o>>>0)<o?1:0,f+=(l=l+a>>>0)<a?1:0,e+r+i+s+c+(f+=(l=l+u>>>0)<u?1:0)>>>0}var sum64_5_hi_1$1=sum64_5_hi$2;function sum64_5_lo$2(e,t,r,n,i,o,s,a,c,u){return t+n+o+a+u>>>0}var sum64_5_lo_1$1=sum64_5_lo$2;function rotr64_hi$2(e,t,r){return(t<<32-r|e>>>r)>>>0}var rotr64_hi_1$1=rotr64_hi$2;function rotr64_lo$2(e,t,r){return(e<<32-r|t>>>r)>>>0}var rotr64_lo_1$1=rotr64_lo$2;function shr64_hi$2(e,t,r){return e>>>r}var shr64_hi_1$1=shr64_hi$2;function shr64_lo$2(e,t,r){return(e<<32-r|t>>>r)>>>0}var shr64_lo_1$1=shr64_lo$2,utils$9={inherits:inherits_1$1,toArray:toArray_1$1,toHex:toHex_1$1,htonl:htonl_1$1,toHex32:toHex32_1$1,zero2:zero2_1$1,zero8:zero8_1$1,join32:join32_1$1,split32:split32_1$1,rotr32:rotr32_1$1,rotl32:rotl32_1$1,sum32:sum32_1$1,sum32_3:sum32_3_1$1,sum32_4:sum32_4_1$1,sum32_5:sum32_5_1$1,sum64:sum64_1$1,sum64_hi:sum64_hi_1$1,sum64_lo:sum64_lo_1$1,sum64_4_hi:sum64_4_hi_1$1,sum64_4_lo:sum64_4_lo_1$1,sum64_5_hi:sum64_5_hi_1$1,sum64_5_lo:sum64_5_lo_1$1,rotr64_hi:rotr64_hi_1$1,rotr64_lo:rotr64_lo_1$1,shr64_hi:shr64_hi_1$1,shr64_lo:shr64_lo_1$1};function BlockHash$5(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var BlockHash_1$1=BlockHash$5;BlockHash$5.prototype.update=function(e,t){if(e=utils$9.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=utils$9.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},BlockHash$5.prototype.digest=function(e){return this.update(this._pad()),minimalisticAssert(null===this.pending),this._digest(e)},BlockHash$5.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n};var common$2={BlockHash:BlockHash_1$1},rotr32$3=utils$9.rotr32;function ft_1$2(e,t,r,n){return 0===e?ch32$2(t,r,n):1===e||3===e?p32$1(t,r,n):2===e?maj32$2(t,r,n):void 0}var ft_1_1$1=ft_1$2;function ch32$2(e,t,r){return e&t^~e&r}var ch32_1$1=ch32$2;function maj32$2(e,t,r){return e&t^e&r^t&r}var maj32_1$1=maj32$2;function p32$1(e,t,r){return e^t^r}var p32_1$1=p32$1;function s0_256$2(e){return rotr32$3(e,2)^rotr32$3(e,13)^rotr32$3(e,22)}var s0_256_1$1=s0_256$2;function s1_256$2(e){return rotr32$3(e,6)^rotr32$3(e,11)^rotr32$3(e,25)}var s1_256_1$1=s1_256$2;function g0_256$2(e){return rotr32$3(e,7)^rotr32$3(e,18)^e>>>3}var g0_256_1$1=g0_256$2;function g1_256$2(e){return rotr32$3(e,17)^rotr32$3(e,19)^e>>>10}var g1_256_1$1=g1_256$2,common$3={ft_1:ft_1_1$1,ch32:ch32_1$1,maj32:maj32_1$1,p32:p32_1$1,s0_256:s0_256_1$1,s1_256:s1_256_1$1,g0_256:g0_256_1$1,g1_256:g1_256_1$1},rotl32$4=utils$9.rotl32,sum32$5=utils$9.sum32,sum32_5$4=utils$9.sum32_5,ft_1$3=common$3.ft_1,BlockHash$6=common$2.BlockHash,sha1_K$1=[1518500249,1859775393,2400959708,3395469782];function SHA1$1(){if(!(this instanceof SHA1$1))return new SHA1$1;BlockHash$6.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$9.inherits(SHA1$1,BlockHash$6);var _1$1=SHA1$1;SHA1$1.blockSize=512,SHA1$1.outSize=160,SHA1$1.hmacStrength=80,SHA1$1.padLength=64,SHA1$1.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=rotl32$4(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4];for(n=0;n<r.length;n++){var u=~~(n/20),f=sum32_5$4(rotl32$4(i,5),ft_1$3(u,o,s,a),c,r[n],sha1_K$1[u]);c=a,a=s,s=rotl32$4(o,30),o=i,i=f}this.h[0]=sum32$5(this.h[0],i),this.h[1]=sum32$5(this.h[1],o),this.h[2]=sum32$5(this.h[2],s),this.h[3]=sum32$5(this.h[3],a),this.h[4]=sum32$5(this.h[4],c)},SHA1$1.prototype._digest=function(e){return"hex"===e?utils$9.toHex32(this.h,"big"):utils$9.split32(this.h,"big")};var sum32$6=utils$9.sum32,sum32_4$4=utils$9.sum32_4,sum32_5$5=utils$9.sum32_5,ch32$3=common$3.ch32,maj32$3=common$3.maj32,s0_256$3=common$3.s0_256,s1_256$3=common$3.s1_256,g0_256$3=common$3.g0_256,g1_256$3=common$3.g1_256,BlockHash$7=common$2.BlockHash,sha256_K$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$7.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K$1,this.W=new Array(64)}utils$9.inherits(SHA256$1,BlockHash$7);var _256$1=SHA256$1;function SHA224$1(){if(!(this instanceof SHA224$1))return new SHA224$1;_256$1.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}SHA256$1.blockSize=512,SHA256$1.outSize=256,SHA256$1.hmacStrength=192,SHA256$1.padLength=64,SHA256$1.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=sum32_4$4(g1_256$3(r[n-2]),r[n-7],g0_256$3(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],f=this.h[6],l=this.h[7];for(minimalisticAssert(this.k.length===r.length),n=0;n<r.length;n++){var d=sum32_5$5(l,s1_256$3(c),ch32$3(c,u,f),this.k[n],r[n]),h=sum32$6(s0_256$3(i),maj32$3(i,o,s));l=f,f=u,u=c,c=sum32$6(a,d),a=s,s=o,o=i,i=sum32$6(d,h)}this.h[0]=sum32$6(this.h[0],i),this.h[1]=sum32$6(this.h[1],o),this.h[2]=sum32$6(this.h[2],s),this.h[3]=sum32$6(this.h[3],a),this.h[4]=sum32$6(this.h[4],c),this.h[5]=sum32$6(this.h[5],u),this.h[6]=sum32$6(this.h[6],f),this.h[7]=sum32$6(this.h[7],l)},SHA256$1.prototype._digest=function(e){return"hex"===e?utils$9.toHex32(this.h,"big"):utils$9.split32(this.h,"big")},utils$9.inherits(SHA224$1,_256$1);var _224$1=SHA224$1;SHA224$1.blockSize=512,SHA224$1.outSize=224,SHA224$1.hmacStrength=192,SHA224$1.padLength=64,SHA224$1.prototype._digest=function(e){return"hex"===e?utils$9.toHex32(this.h.slice(0,7),"big"):utils$9.split32(this.h.slice(0,7),"big")};var rotr64_hi$3=utils$9.rotr64_hi,rotr64_lo$3=utils$9.rotr64_lo,shr64_hi$3=utils$9.shr64_hi,shr64_lo$3=utils$9.shr64_lo,sum64$3=utils$9.sum64,sum64_hi$3=utils$9.sum64_hi,sum64_lo$3=utils$9.sum64_lo,sum64_4_hi$3=utils$9.sum64_4_hi,sum64_4_lo$3=utils$9.sum64_4_lo,sum64_5_hi$3=utils$9.sum64_5_hi,sum64_5_lo$3=utils$9.sum64_5_lo,BlockHash$8=common$2.BlockHash,sha512_K$1=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$8.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K$1,this.W=new Array(160)}utils$9.inherits(SHA512$1,BlockHash$8);var _512$1=SHA512$1;function ch64_hi$1(e,t,r,n,i){var o=e&r^~e&i;return o<0&&(o+=4294967296),o}function ch64_lo$1(e,t,r,n,i,o){var s=t&n^~t&o;return s<0&&(s+=4294967296),s}function maj64_hi$1(e,t,r,n,i){var o=e&r^e&i^r&i;return o<0&&(o+=4294967296),o}function maj64_lo$1(e,t,r,n,i,o){var s=t&n^t&o^n&o;return s<0&&(s+=4294967296),s}function s0_512_hi$1(e,t){var r=rotr64_hi$3(e,t,28)^rotr64_hi$3(t,e,2)^rotr64_hi$3(t,e,7);return r<0&&(r+=4294967296),r}function s0_512_lo$1(e,t){var r=rotr64_lo$3(e,t,28)^rotr64_lo$3(t,e,2)^rotr64_lo$3(t,e,7);return r<0&&(r+=4294967296),r}function s1_512_hi$1(e,t){var r=rotr64_hi$3(e,t,14)^rotr64_hi$3(e,t,18)^rotr64_hi$3(t,e,9);return r<0&&(r+=4294967296),r}function s1_512_lo$1(e,t){var r=rotr64_lo$3(e,t,14)^rotr64_lo$3(e,t,18)^rotr64_lo$3(t,e,9);return r<0&&(r+=4294967296),r}function g0_512_hi$1(e,t){var r=rotr64_hi$3(e,t,1)^rotr64_hi$3(e,t,8)^shr64_hi$3(e,t,7);return r<0&&(r+=4294967296),r}function g0_512_lo$1(e,t){var r=rotr64_lo$3(e,t,1)^rotr64_lo$3(e,t,8)^shr64_lo$3(e,t,7);return r<0&&(r+=4294967296),r}function g1_512_hi$1(e,t){var r=rotr64_hi$3(e,t,19)^rotr64_hi$3(t,e,29)^shr64_hi$3(e,t,6);return r<0&&(r+=4294967296),r}function g1_512_lo$1(e,t){var r=rotr64_lo$3(e,t,19)^rotr64_lo$3(t,e,29)^shr64_lo$3(e,t,6);return r<0&&(r+=4294967296),r}function SHA384$1(){if(!(this instanceof SHA384$1))return new SHA384$1;_512$1.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}SHA512$1.blockSize=1024,SHA512$1.outSize=512,SHA512$1.hmacStrength=192,SHA512$1.padLength=128,SHA512$1.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=g1_512_hi$1(r[n-4],r[n-3]),o=g1_512_lo$1(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],c=g0_512_hi$1(r[n-30],r[n-29]),u=g0_512_lo$1(r[n-30],r[n-29]),f=r[n-32],l=r[n-31];r[n]=sum64_4_hi$3(i,o,s,a,c,u,f,l),r[n+1]=sum64_4_lo$3(i,o,s,a,c,u,f,l)}},SHA512$1.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],c=this.h[5],u=this.h[6],f=this.h[7],l=this.h[8],d=this.h[9],h=this.h[10],p=this.h[11],b=this.h[12],m=this.h[13],g=this.h[14],y=this.h[15];minimalisticAssert(this.k.length===r.length);for(var v=0;v<r.length;v+=2){var _=g,$=y,S=s1_512_hi$1(l,d),E=s1_512_lo$1(l,d),w=ch64_hi$1(l,d,h,p,b),C=ch64_lo$1(l,d,h,p,b,m),A=this.k[v],k=this.k[v+1],T=r[v],I=r[v+1],B=sum64_5_hi$3(_,$,S,E,w,C,A,k,T,I),P=sum64_5_lo$3(_,$,S,E,w,C,A,k,T,I);_=s0_512_hi$1(n,i),$=s0_512_lo$1(n,i),S=maj64_hi$1(n,i,o,s,a),E=maj64_lo$1(n,i,o,s,a,c);var R=sum64_hi$3(_,$,S,E),O=sum64_lo$3(_,$,S,E);g=b,y=m,b=h,m=p,h=l,p=d,l=sum64_hi$3(u,f,B,P),d=sum64_lo$3(f,f,B,P),u=a,f=c,a=o,c=s,o=n,s=i,n=sum64_hi$3(B,P,R,O),i=sum64_lo$3(B,P,R,O)}sum64$3(this.h,0,n,i),sum64$3(this.h,2,o,s),sum64$3(this.h,4,a,c),sum64$3(this.h,6,u,f),sum64$3(this.h,8,l,d),sum64$3(this.h,10,h,p),sum64$3(this.h,12,b,m),sum64$3(this.h,14,g,y)},SHA512$1.prototype._digest=function(e){return"hex"===e?utils$9.toHex32(this.h,"big"):utils$9.split32(this.h,"big")},utils$9.inherits(SHA384$1,_512$1);var _384$1=SHA384$1;SHA384$1.blockSize=1024,SHA384$1.outSize=384,SHA384$1.hmacStrength=192,SHA384$1.padLength=128,SHA384$1.prototype._digest=function(e){return"hex"===e?utils$9.toHex32(this.h.slice(0,12),"big"):utils$9.split32(this.h.slice(0,12),"big")};var sha1$1=_1$1,sha224$1=_224$1,sha256$1=_256$1,sha384$1=_384$1,sha512$1=_512$1,sha$1={sha1:sha1$1,sha224:sha224$1,sha256:sha256$1,sha384:sha384$1,sha512:sha512$1},rotl32$5=utils$9.rotl32,sum32$7=utils$9.sum32,sum32_3$3=utils$9.sum32_3,sum32_4$5=utils$9.sum32_4,BlockHash$9=common$2.BlockHash;function RIPEMD160$1(){if(!(this instanceof RIPEMD160$1))return new RIPEMD160$1;BlockHash$9.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$9.inherits(RIPEMD160$1,BlockHash$9);var ripemd160$1=RIPEMD160$1;function f$1(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function K$1(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Kh$1(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}RIPEMD160$1.blockSize=512,RIPEMD160$1.outSize=160,RIPEMD160$1.hmacStrength=192,RIPEMD160$1.padLength=64,RIPEMD160$1.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],o=this.h[3],s=this.h[4],a=r,c=n,u=i,f=o,l=s,d=0;d<80;d++){var h=sum32$7(rotl32$5(sum32_4$5(r,f$1(d,n,i,o),e[r$2[d]+t],K$1(d)),s$1[d]),s);r=s,s=o,o=rotl32$5(i,10),i=n,n=h,h=sum32$7(rotl32$5(sum32_4$5(a,f$1(79-d,c,u,f),e[rh$1[d]+t],Kh$1(d)),sh$1[d]),l),a=l,l=f,f=rotl32$5(u,10),u=c,c=h}h=sum32_3$3(this.h[1],i,f),this.h[1]=sum32_3$3(this.h[2],o,l),this.h[2]=sum32_3$3(this.h[3],s,a),this.h[3]=sum32_3$3(this.h[4],r,c),this.h[4]=sum32_3$3(this.h[0],n,u),this.h[0]=h},RIPEMD160$1.prototype._digest=function(e){return"hex"===e?utils$9.toHex32(this.h,"little"):utils$9.split32(this.h,"little")};var r$2=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh$1=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh$1=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],ripemd$1={ripemd160:ripemd160$1};function Hmac$1(e,t,r){if(!(this instanceof Hmac$1))return new Hmac$1(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(utils$9.toArray(t,r))}var hmac$2=Hmac$1;Hmac$1.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),minimalisticAssert(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},Hmac$1.prototype.update=function(e,t){return this.inner.update(e,t),this},Hmac$1.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};var hash_1$2=createCommonjsModule(function(e,t){var r=t;r.utils=utils$9,r.common=common$2,r.sha=sha$1,r.ripemd=ripemd$1,r.hmac=hmac$2,r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160}),utils$a=elliptic_1$2.utils,assert$b=utils$a.assert;function HmacDRBG$1(e){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=utils$a.toArray(e.entropy,e.entropyEnc),r=utils$a.toArray(e.nonce,e.nonceEnc),n=utils$a.toArray(e.pers,e.persEnc);assert$b(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var hmacDrbg$1=HmacDRBG$1;HmacDRBG$1.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this.reseed=1,this.reseedInterval=281474976710656},HmacDRBG$1.prototype._hmac=function(){return new hash_1$2.hmac(this.hash,this.K)},HmacDRBG$1.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG$1.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=utils$a.toBuffer(e,t),r=utils$a.toBuffer(r,n),assert$b(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this.reseed=1},HmacDRBG$1.prototype.generate=function(e,t,r,n){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=utils$a.toArray(r,n),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this.reseed++,utils$a.encode(o,t)};var utils$b=elliptic_1$2.utils,getNAF$1=utils$b.getNAF,getJSF$1=utils$b.getJSF,assert$c=utils$b.assert;function BaseCurve$1(e,t){this.type=e,this.p=new bn(t.p,16),this.red=t.prime?bn.red(t.prime):bn.mont(this.p),this.zero=new bn(0).toRed(this.red),this.one=new bn(1).toRed(this.red),this.two=new bn(2).toRed(this.red),this.n=t.n&&new bn(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$3=BaseCurve$1;function BasePoint$1(e,t){this.curve=e,this.type=t,this.precomputed=null}BaseCurve$1.prototype.point=function(){throw new Error("Not implemented")},BaseCurve$1.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve$1.prototype._fixedNafMul=function(e,t){assert$c(e.precomputed);var r=e._getDoubles(),n=getNAF$1(t,1),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;for(var o=[],s=0;s<n.length;s+=r.step){var a=0;for(t=s+r.step-1;t>=s;t--)a=(a<<1)+n[t];o.push(a)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=i;f>0;f--){for(s=0;s<o.length;s++){(a=o[s])===f?u=u.mixedAdd(r.points[s]):a===-f&&(u=u.mixedAdd(r.points[s].neg()))}c=c.add(u)}return c.toP()},BaseCurve$1.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=getNAF$1(t,r),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(t=0;a>=0&&0===o[a];a--)t++;if(a>=0&&t++,s=s.dblp(t),a<0)break;var c=o[a];assert$c(0!==c),s="affine"===e.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===e.type?s.toP():s},BaseCurve$1.prototype._wnafMulAdd=function(e,t,r,n,i){for(var o=this._wnafT1,s=this._wnafT2,a=this._wnafT3,c=0,u=0;u<n;u++){var f=(E=t[u])._getNAFPoints(e);o[u]=f.wnd,s[u]=f.points}for(u=n-1;u>=1;u-=2){var l=u-1,d=u;if(1===o[l]&&1===o[d]){var h=[t[l],null,null,t[d]];0===t[l].y.cmp(t[d].y)?(h[1]=t[l].add(t[d]),h[2]=t[l].toJ().mixedAdd(t[d].neg())):0===t[l].y.cmp(t[d].y.redNeg())?(h[1]=t[l].toJ().mixedAdd(t[d]),h[2]=t[l].add(t[d].neg())):(h[1]=t[l].toJ().mixedAdd(t[d]),h[2]=t[l].toJ().mixedAdd(t[d].neg()));var p=[-3,-1,-5,-7,0,7,5,1,3],b=getJSF$1(r[l],r[d]);c=Math.max(b[0].length,c),a[l]=new Array(c),a[d]=new Array(c);for(var m=0;m<c;m++){var g=0|b[0][m],y=0|b[1][m];a[l][m]=p[3*(g+1)+(y+1)],a[d][m]=0,s[l]=h}}else a[l]=getNAF$1(r[l],o[l]),a[d]=getNAF$1(r[d],o[d]),c=Math.max(a[l].length,c),c=Math.max(a[d].length,c)}var v=this.jpoint(null,null,null),_=this._wnafT4;for(u=c;u>=0;u--){for(var $=0;u>=0;){var S=!0;for(m=0;m<n;m++)_[m]=0|a[m][u],0!==_[m]&&(S=!1);if(!S)break;$++,u--}if(u>=0&&$++,v=v.dblp($),u<0)break;for(m=0;m<n;m++){var E,w=_[m];0!==w&&(w>0?E=s[m][w-1>>1]:w<0&&(E=s[m][-w-1>>1].neg()),v="affine"===E.type?v.mixedAdd(E):v.add(E))}}for(u=0;u<n;u++)s[u]=null;return i?v:v.toP()},BaseCurve$1.BasePoint=BasePoint$1,BasePoint$1.prototype.eq=function(){throw new Error("Not implemented")},BasePoint$1.prototype.validate=function(){return this.curve.validate(this)},BaseCurve$1.prototype.decodePoint=function(e,t){e=utils$b.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?assert$c(e[e.length-1]%2==0):7===e[0]&&assert$c(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},BasePoint$1.prototype.encodeCompressed=function(e){return this.encode(e,!0)},BasePoint$1.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},BasePoint$1.prototype.encode=function(e,t){return utils$b.encode(this._encode(t),e)},BasePoint$1.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},BasePoint$1.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},BasePoint$1.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},BasePoint$1.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},BasePoint$1.prototype._getBeta=function(){return null},BasePoint$1.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var Base$4=curve_1$1.base,assert$d=elliptic_1$2.utils.assert;function ShortCurve$1(e){Base$4.call(this,"short",e),this.a=new bn(e.a,16).toRed(this.red),this.b=new bn(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits(ShortCurve$1,Base$4);var short_1$1=ShortCurve$1;function Point$3(e,t,r,n){Base$4.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new bn(t,16),this.y=new bn(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint$1(e,t,r,n){Base$4.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new bn(0)):(this.x=new bn(t,16),this.y=new bn(r,16),this.z=new bn(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ShortCurve$1.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new bn(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new bn(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],assert$d(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new bn(e.a,16),b:new bn(e.b,16)}}):this._getEndoBasis(r)}}},ShortCurve$1.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:bn.mont(e),r=new bn(2).toRed(t).redInvm(),n=r.redNeg(),i=new bn(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},ShortCurve$1.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,c,u,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,d=this.n.clone(),h=new bn(1),p=new bn(0),b=new bn(0),m=new bn(1),g=0;0!==l.cmpn(0);){var y=d.div(l);c=d.sub(y.mul(l)),u=b.sub(y.mul(h));var v=m.sub(y.mul(p));if(!n&&c.cmp(f)<0)t=a.neg(),r=h,n=c.neg(),i=u;else if(n&&2==++g)break;a=c,d=l,l=c,b=h,h=u,m=p,p=v}o=c.neg(),s=u;var _=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(_)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},ShortCurve$1.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),c=i.mul(r.b),u=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:c.add(u).neg()}},ShortCurve$1.prototype.pointFromX=function(e,t){(e=new bn(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},ShortCurve$1.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},ShortCurve$1.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),n[2*o]=a,n[2*o+1]=c,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),f=0;f<2*o;f++)n[f]=null,i[f]=null;return u},inherits(Point$3,Base$4.BasePoint),ShortCurve$1.prototype.point=function(e,t,r){return new Point$3(this,e,t,r)},ShortCurve$1.prototype.pointFromJSON=function(e,t){return Point$3.fromJSON(this,e,t)},Point$3.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Point$3.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point$3.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},Point$3.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point$3.prototype.isInfinity=function(){return this.inf},Point$3.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Point$3.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},Point$3.prototype.getX=function(){return this.x.fromRed()},Point$3.prototype.getY=function(){return this.y.fromRed()},Point$3.prototype.mul=function(e){return e=new bn(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Point$3.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Point$3.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Point$3.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Point$3.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Point$3.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},inherits(JPoint$1,Base$4.BasePoint),ShortCurve$1.prototype.jpoint=function(e,t,r){return new JPoint$1(this,e,t,r)},JPoint$1.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},JPoint$1.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint$1.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),f=u.redMul(a),l=n.redMul(u),d=c.redSqr().redIAdd(f).redISub(l).redISub(l),h=c.redMul(l.redISub(d)).redISub(o.redMul(f)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,h,p)},JPoint$1.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),f=r.redMul(c),l=a.redSqr().redIAdd(u).redISub(f).redISub(f),d=a.redMul(f.redISub(l)).redISub(i.redMul(u)),h=this.z.redMul(s);return this.curve.jpoint(l,d,h)},JPoint$1.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),u=s.redAdd(s);for(r=0;r<e;r++){var f=o.redSqr(),l=u.redSqr(),d=l.redSqr(),h=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(c)),p=o.redMul(l),b=h.redSqr().redISub(p.redAdd(p)),m=p.redISub(b),g=h.redMul(m);g=g.redIAdd(g).redISub(d);var y=u.redMul(a);r+1<e&&(c=c.redMul(d)),o=b,a=y,u=g}return this.curve.jpoint(o,u.redMul(i),a)},JPoint$1.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint$1.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),l=this.y.redSqr(),d=l.redSqr(),h=this.x.redAdd(l).redSqr().redISub(f).redISub(d);h=h.redIAdd(h);var p=f.redAdd(f).redIAdd(f),b=p.redSqr(),m=d.redIAdd(d);m=(m=m.redIAdd(m)).redIAdd(m),e=b.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},JPoint$1.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);e=c;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),l=this.y.redSqr(),d=this.x.redMul(l),h=this.x.redSub(f).redMul(this.x.redAdd(f));h=h.redAdd(h).redIAdd(h);var p=d.redIAdd(d),b=(p=p.redIAdd(p)).redAdd(p);e=h.redSqr().redISub(b),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(f);var m=l.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=h.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},JPoint$1.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(s),f=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(f),d=s.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var h=a.redMul(l).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(f,h,p)},JPoint$1.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),f=t.redMul(u);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.x.redMul(a).redISub(f);l=(l=l.redIAdd(l)).redIAdd(l);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var h=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,d,h)},JPoint$1.prototype.mul=function(e,t){return e=new bn(e,t),this.curve._wnafMul(this,e)},JPoint$1.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},JPoint$1.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}return!1},JPoint$1.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint$1.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Base$5=curve_1$1.base,utils$c=elliptic_1$2.utils;function MontCurve$1(e){Base$5.call(this,"mont",e),this.a=new bn(e.a,16).toRed(this.red),this.b=new bn(e.b,16).toRed(this.red),this.i4=new bn(4).toRed(this.red).redInvm(),this.two=new bn(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits(MontCurve$1,Base$5);var mont$1=MontCurve$1;function Point$4(e,t,r){Base$5.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new bn(t,16),this.z=new bn(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}MontCurve$1.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},inherits(Point$4,Base$5.BasePoint),MontCurve$1.prototype.decodePoint=function(e,t){return this.point(utils$c.toArray(e,t),1)},MontCurve$1.prototype.point=function(e,t){return new Point$4(this,e,t)},MontCurve$1.prototype.pointFromJSON=function(e){return Point$4.fromJSON(this,e)},Point$4.prototype.precompute=function(){},Point$4.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Point$4.fromJSON=function(e,t){return new Point$4(e,t[0],t[1]||e.one)},Point$4.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$4.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Point$4.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},Point$4.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Point$4.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(r),s=i.redMul(n),a=t.z.redMul(o.redAdd(s).redSqr()),c=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,c)},Point$4.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},Point$4.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$4.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$4.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},Point$4.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point$4.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Base$6=curve_1$1.base,assert$e=elliptic_1$2.utils.assert;function EdwardsCurve$1(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,Base$6.call(this,"edwards",e),this.a=new bn(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new bn(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new bn(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$e(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}inherits(EdwardsCurve$1,Base$6);var edwards$1=EdwardsCurve$1;function Point$5(e,t,r,n,i){Base$6.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new bn(t,16),this.y=new bn(r,16),this.z=n?new bn(n,16):this.curve.one,this.t=i&&new bn(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}EdwardsCurve$1.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},EdwardsCurve$1.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},EdwardsCurve$1.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},EdwardsCurve$1.prototype.pointFromX=function(e,t){(e=new bn(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(i.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var a=s.fromRed().isOdd();return(t&&!a||!t&&a)&&(s=s.redNeg()),this.point(e,s)},EdwardsCurve$1.prototype.pointFromY=function(e,t){(e=new bn(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.one),i=r.redMul(this.d).redAdd(this.one),o=n.redMul(i.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return s.isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},EdwardsCurve$1.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},inherits(Point$5,Base$6.BasePoint),EdwardsCurve$1.prototype.pointFromJSON=function(e){return Point$5.fromJSON(this,e)},EdwardsCurve$1.prototype.point=function(e,t,r,n){return new Point$5(this,e,t,r,n)},Point$5.fromJSON=function(e,t){return new Point$5(e,t[0],t[1],t[2])},Point$5.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$5.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},Point$5.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),s=o.redSub(r),a=n.redSub(t),c=i.redMul(s),u=o.redMul(a),f=i.redMul(a),l=s.redMul(o);return this.curve.point(c,u,l,f)},Point$5.prototype._projDbl=function(){var e,t,r,n=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var s=(u=this.curve._mulA(i)).redAdd(o);if(this.zOne)e=n.redSub(i).redSub(o).redMul(s.redSub(this.curve.two)),t=s.redMul(u.redSub(o)),r=s.redSqr().redSub(s).redSub(s);else{var a=this.z.redSqr(),c=s.redSub(a).redISub(a);e=n.redSub(i).redISub(o).redMul(c),t=s.redMul(u.redSub(o)),r=s.redMul(c)}}else{var u=i.redAdd(o);a=this.curve._mulC(this.c.redMul(this.z)).redSqr(),c=u.redSub(a).redSub(a);e=this.curve._mulC(n.redISub(u)).redMul(c),t=this.curve._mulC(u).redMul(i.redISub(o)),r=u.redMul(c)}return this.curve.point(e,t,r)},Point$5.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point$5.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),s=i.redSub(n),a=i.redAdd(n),c=r.redAdd(t),u=o.redMul(s),f=a.redMul(c),l=o.redMul(c),d=s.redMul(a);return this.curve.point(u,f,d,l)},Point$5.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),c=i.redSub(a),u=i.redAdd(a),f=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),l=n.redMul(c).redMul(f);return this.curve.twisted?(t=n.redMul(u).redMul(s.redSub(this.curve._mulA(o))),r=c.redMul(u)):(t=n.redMul(u).redMul(s.redSub(o)),r=this.curve._mulC(c).redMul(u)),this.curve.point(l,t,r)},Point$5.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},Point$5.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},Point$5.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},Point$5.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},Point$5.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},Point$5.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point$5.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Point$5.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Point$5.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},Point$5.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}return!1},Point$5.prototype.toP=Point$5.prototype.normalize,Point$5.prototype.mixedAdd=Point$5.prototype.add;var curve_1$1=createCommonjsModule(function(e,t){var r=t;r.base=base$3,r.short=short_1$1,r.mont=mont$1,r.edwards=edwards$1}),secp256k1$2={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},curves_1$1=createCommonjsModule(function(e,t){var r,n=t,i=elliptic_1$2.utils.assert;function o(e){"short"===e.type?this.curve=new elliptic_1$2.curve.short(e):"edwards"===e.type?this.curve=new elliptic_1$2.curve.edwards(e):this.curve=new elliptic_1$2.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash_1$2.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash_1$2.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash_1$2.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash_1$2.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash_1$2.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1$2.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1$2.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=secp256k1$2}catch(e){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash_1$2.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}),utils$d=elliptic_1$2.utils,assert$f=utils$d.assert;function KeyPair$2(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var key$2=KeyPair$2;KeyPair$2.fromPublic=function(e,t,r){return t instanceof KeyPair$2?t:new KeyPair$2(e,{pub:t,pubEnc:r})},KeyPair$2.fromPrivate=function(e,t,r){return t instanceof KeyPair$2?t:new KeyPair$2(e,{priv:t,privEnc:r})},KeyPair$2.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair$2.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},KeyPair$2.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},KeyPair$2.prototype._importPrivate=function(e,t){this.priv=new bn(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair$2.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?assert$f(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||assert$f(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},KeyPair$2.prototype.derive=function(e){return e.mul(this.priv).getX()},KeyPair$2.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},KeyPair$2.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},KeyPair$2.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var utils$e=elliptic_1$2.utils,assert$g=utils$e.assert;function Signature$2(e,t){if(e instanceof Signature$2)return e;this._importDER(e,t)||(assert$g(e.r&&e.s,"Signature without r or s"),this.r=new bn(e.r,16),this.s=new bn(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var signature$2=Signature$2;function Position$1(){this.place=0}function getLength$1(e,t){var r=e[t.place++];if(!(128&r))return r;for(var n=15&r,i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s];return t.place=s,i}function rmPadding$1(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function constructLength$1(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Signature$2.prototype._importDER=function(e,t){e=utils$e.toArray(e,t);var r=new Position$1;if(48!==e[r.place++])return!1;if(getLength$1(e,r)+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var n=getLength$1(e,r),i=e.slice(r.place,n+r.place);if(r.place+=n,2!==e[r.place++])return!1;var o=getLength$1(e,r);if(e.length!==o+r.place)return!1;var s=e.slice(r.place,o+r.place);return 0===i[0]&&128&i[1]&&(i=i.slice(1)),0===s[0]&&128&s[1]&&(s=s.slice(1)),this.r=new bn(i),this.s=new bn(s),this.recoveryParam=null,!0},Signature$2.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=rmPadding$1(t),r=rmPadding$1(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];constructLength$1(n,t.length),(n=n.concat(t)).push(2),constructLength$1(n,r.length);var i=n.concat(r),o=[48];return constructLength$1(o,i.length),o=o.concat(i),utils$e.encode(o,e)};var utils$f=elliptic_1$2.utils,assert$h=utils$f.assert;function EC$1(e){if(!(this instanceof EC$1))return new EC$1(e);"string"==typeof e&&(assert$h(elliptic_1$2.curves.hasOwnProperty(e),"Unknown curve "+e),e=elliptic_1$2.curves[e]),e instanceof elliptic_1$2.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var ec$1=EC$1;EC$1.prototype.keyPair=function(e){return new key$2(this,e)},EC$1.prototype.keyFromPrivate=function(e,t){return key$2.fromPrivate(this,e,t)},EC$1.prototype.keyFromPublic=function(e,t){return key$2.fromPublic(this,e,t)},EC$1.prototype.genKeyPair=function(e){e||(e={});for(var t=new elliptic_1$2.hmacDRBG({hash:this.hash,pers:e.pers,entropy:e.entropy||elliptic_1$2.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new bn(2));;){var i=new bn(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},EC$1.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},EC$1.prototype.sign=function(e,t,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new bn(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),s=e.toArray("be",i),a=new elliptic_1$2.hmacDRBG({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc}),c=this.n.sub(new bn(1)),u=0;;u++){var f=n.k?n.k(u):new bn(a.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(c)>=0)){var l=this.g.mul(f);if(!l.isInfinity()){var d=l.getX(),h=d.umod(this.n);if(0!==h.cmpn(0)){var p=f.invm(this.n).mul(h.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var b=(l.getY().isOdd()?1:0)|(0!==d.cmp(h)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),b^=1),new signature$2({r:h,s:p,recoveryParam:b})}}}}}},EC$1.prototype.verify=function(e,t,r,n){e=this._truncateToN(new bn(e,16)),r=this.keyFromPublic(r,n);var i=(t=new signature$2(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),c=a.mul(e).umod(this.n),u=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,r.getPublic(),u)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(c,r.getPublic(),u)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},EC$1.prototype.recoverPubKey=function(e,t,r,n){assert$h((3&r)===r,"The recovery param is more than two bits"),t=new signature$2(t,n);var i=this.n,o=new bn(e),s=t.r,a=t.s,c=1&r,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");s=u?this.curve.pointFromX(s.add(this.curve.n),c):this.curve.pointFromX(s,c);var f=t.r.invm(i),l=i.sub(o).mul(f).umod(i),d=a.mul(f).umod(i);return this.g.mulAdd(l,s,d)},EC$1.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new signature$2(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var utils$g=elliptic_1$2.utils,assert$i=utils$g.assert,parseBytes$3=utils$g.parseBytes,cachedProperty$2=utils$g.cachedProperty;function KeyPair$3(e,t){this.eddsa=e,this._secret=parseBytes$3(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=parseBytes$3(t.pub)}KeyPair$3.fromPublic=function(e,t){return t instanceof KeyPair$3?t:new KeyPair$3(e,{pub:t})},KeyPair$3.fromSecret=function(e,t){return t instanceof KeyPair$3?t:new KeyPair$3(e,{secret:t})},KeyPair$3.prototype.secret=function(){return this._secret},cachedProperty$2(KeyPair$3,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),cachedProperty$2(KeyPair$3,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),cachedProperty$2(KeyPair$3,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n}),cachedProperty$2(KeyPair$3,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),cachedProperty$2(KeyPair$3,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),cachedProperty$2(KeyPair$3,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),KeyPair$3.prototype.sign=function(e){return assert$i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},KeyPair$3.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},KeyPair$3.prototype.getSecret=function(e){return assert$i(this._secret,"KeyPair is public only"),utils$g.encode(this.secret(),e)},KeyPair$3.prototype.getPublic=function(e){return utils$g.encode(this.pubBytes(),e)};var key$3=KeyPair$3,utils$h=elliptic_1$2.utils,assert$j=utils$h.assert,cachedProperty$3=utils$h.cachedProperty,parseBytes$4=utils$h.parseBytes;function Signature$3(e,t){this.eddsa=e,"object"!=typeof t&&(t=parseBytes$4(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),assert$j(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof bn&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}cachedProperty$3(Signature$3,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),cachedProperty$3(Signature$3,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),cachedProperty$3(Signature$3,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),cachedProperty$3(Signature$3,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),Signature$3.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Signature$3.prototype.toHex=function(){return utils$h.encode(this.toBytes(),"hex").toUpperCase()};var signature$3=Signature$3,utils$i=elliptic_1$2.utils,assert$k=utils$i.assert,parseBytes$5=utils$i.parseBytes;function EDDSA$1(e){if(assert$k("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof EDDSA$1))return new EDDSA$1(e);e=elliptic_1$2.curves[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=hash_1$2.sha512}var eddsa$1=EDDSA$1;EDDSA$1.prototype.sign=function(e,t){e=parseBytes$5(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),e).mul(r.priv()),a=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:a,Rencoded:o})},EDDSA$1.prototype.verify=function(e,t,r){e=parseBytes$5(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(o)},EDDSA$1.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return utils$i.intFromLE(e.digest()).umod(this.curve.n)},EDDSA$1.prototype.keyFromPublic=function(e){return key$3.fromPublic(this,e)},EDDSA$1.prototype.keyFromSecret=function(e){return key$3.fromSecret(this,e)},EDDSA$1.prototype.makeSignature=function(e){return e instanceof signature$3?e:new signature$3(this,e)},EDDSA$1.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},EDDSA$1.prototype.decodePoint=function(e){var t=(e=utils$i.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),i=utils$i.intFromLE(r);return this.curve.pointFromY(i,n)},EDDSA$1.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},EDDSA$1.prototype.decodeInt=function(e){return utils$i.intFromLE(e)},EDDSA$1.prototype.isPoint=function(e){return e instanceof this.pointClass};var require$$0$1=getCjsExportFromNamespace(_package$3),elliptic_1$2=createCommonjsModule(function(e,t){var r=t;r.version=require$$0$1.version,r.utils=utils_1$2,r.rand=brorand,r.hmacDRBG=hmacDrbg$1,r.curve=curve_1$1,r.curves=curves_1$1,r.ec=ec$1,r.eddsa=eddsa$1}),secp256k1$3=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(errors),i=null;function o(){return i||(i=new elliptic_1$2.ec("secp256k1")),i}var s=function(){function e(e){var t=o().keyFromPrivate(bytes.arrayify(e));properties.defineReadOnly(this,"privateKey",bytes.hexlify(t.priv.toArray("be",32))),properties.defineReadOnly(this,"publicKey","0x"+t.getPublic(!1,"hex")),properties.defineReadOnly(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),properties.defineReadOnly(this,"publicKeyBytes",t.getPublic().encode(null,!0))}return e.prototype.sign=function(e){var t=o().keyFromPrivate(bytes.arrayify(this.privateKey)).sign(bytes.arrayify(e),{canonical:!0});return{recoveryParam:t.recoveryParam,r:bytes.hexZeroPad("0x"+t.r.toString(16),32),s:bytes.hexZeroPad("0x"+t.s.toString(16),32),v:27+t.recoveryParam}},e.prototype.computeSharedSecret=function(e){var t=o().keyFromPrivate(bytes.arrayify(this.privateKey)),r=o().keyFromPublic(bytes.arrayify(a(e)));return bytes.hexZeroPad("0x"+t.derive(r.getPublic()).toString(16),32)},e.prototype._addPoint=function(e){var t=o().keyFromPublic(bytes.arrayify(this.publicKey)),r=o().keyFromPublic(bytes.arrayify(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")},e}();function a(e,t){var r=bytes.arrayify(e);if(32===r.length){var i=new s(r);return t?i.compressedPublicKey:i.publicKey}return 33===r.length?t?bytes.hexlify(r):"0x"+o().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+o().keyFromPublic(r).getPublic(!0,"hex"):bytes.hexlify(r):(n.throwError("invalid public or private key",n.INVALID_ARGUMENT,{arg:"key",value:"[REDACTED]"}),null)}function c(e){var t="0x"+a(e).slice(4);return address.getAddress("0x"+keccak256_1.keccak256(t).substring(26))}function u(e,t){var r=bytes.splitSignature(t),n={r:bytes.arrayify(r.r),s:bytes.arrayify(r.s)};return"0x"+o().recoverPubKey(bytes.arrayify(e),n,r.recoveryParam).encode("hex",!1)}function f(e,t){return c(u(bytes.arrayify(e),t))}t.KeyPair=s,t.computePublicKey=a,t.computeAddress=c,t.recoverPublicKey=u,t.recoverAddress=f,t.verifyMessage=function(e,t){return f(hash.hashMessage(e),t)}});unwrapExports(secp256k1$3);var secp256k1_1=secp256k1$3.KeyPair,secp256k1_2=secp256k1$3.computePublicKey,secp256k1_3=secp256k1$3.computeAddress,secp256k1_4=secp256k1$3.recoverPublicKey,secp256k1_5=secp256k1$3.recoverAddress,secp256k1_6=secp256k1$3.verifyMessage,sha2=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(hash_1$2);t.ripemd160=function(e){return"0x"+n.default.ripemd160().update(bytes.arrayify(e)).digest("hex")},t.sha256=function(e){return"0x"+n.default.sha256().update(bytes.arrayify(e)).digest("hex")},t.sha512=function(e){return"0x"+n.default.sha512().update(bytes.arrayify(e)).digest("hex")}});unwrapExports(sha2);var sha2_1=sha2.ripemd160,sha2_2=sha2.sha256,sha2_3=sha2.sha512,hdnode=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(errors),i=bignumber.bigNumberify("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),o=utf8.toUtf8Bytes("Bitcoin seed");function s(e){return(1<<e)-1<<8-e}function a(e){return bytes.hexZeroPad(bytes.hexlify(e),32)}function c(e){var t=bytes.hexDataSlice(sha2.sha256(sha2.sha256(e)),0,4);return basex.Base58.encode(bytes.concat([e,t]))}var u={};t.defaultPath="m/44'/60'/0'/0/0";var f=function(){function e(t,r,i,o,s,a,c,f,l){if(n.checkNew(this,e),t!==u)throw new Error("HDNode constructor cannot be called directly");if(r){var d=new secp256k1$3.KeyPair(r);properties.defineReadOnly(this,"privateKey",d.privateKey),properties.defineReadOnly(this,"publicKey",d.compressedPublicKey)}else properties.defineReadOnly(this,"privateKey",null),properties.defineReadOnly(this,"publicKey",bytes.hexlify(i));properties.defineReadOnly(this,"parentFingerprint",o),properties.defineReadOnly(this,"fingerprint",bytes.hexDataSlice(sha2.ripemd160(sha2.sha256(this.publicKey)),0,4)),properties.defineReadOnly(this,"address",secp256k1$3.computeAddress(this.publicKey)),properties.defineReadOnly(this,"chainCode",s),properties.defineReadOnly(this,"index",a),properties.defineReadOnly(this,"depth",c),properties.defineReadOnly(this,"mnemonic",f),properties.defineReadOnly(this,"path",l),properties.setType(this,"HDNode")}return Object.defineProperty(e.prototype,"extendedKey",{get:function(){if(this.depth>=256)throw new Error("Depth too large!");return c(bytes.concat([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",bytes.hexlify(this.depth),this.parentFingerprint,bytes.hexZeroPad(bytes.hexlify(this.index),4),this.chainCode,null!=this.privateKey?bytes.concat(["0x00",this.privateKey]):this.publicKey]))},enumerable:!0,configurable:!0}),e.prototype.neuter=function(){return new e(u,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,null,this.path)},e.prototype._derive=function(t){if(t>4294967295)throw new Error("invalid index - "+String(t));var r=this.path;r&&(r+="/"+(2147483647&t));var n=new Uint8Array(37);if(2147483648&t){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(bytes.arrayify(this.privateKey),1),r&&(r+="'")}else n.set(bytes.arrayify(this.publicKey));for(var o=24;o>=0;o-=8)n[33+(o>>3)]=t>>24-o&255;var s=hmac$1.computeHmac(hmac$1.SupportedAlgorithms.sha512,this.chainCode,n),c=s.slice(0,32),f=s.slice(32),l=null,d=null;this.privateKey?l=a(bignumber.bigNumberify(c).add(this.privateKey).mod(i)):d=new secp256k1$3.KeyPair(bytes.hexlify(c))._addPoint(this.publicKey);return new e(u,l,d,this.fingerprint,a(f),t,this.depth+1,this.mnemonic,r)},e.prototype.derivePath=function(e){var t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();for(var r=this,n=0;n<t.length;n++){var i=t[n];if(i.match(/^[0-9]+'$/)){if((o=parseInt(i.substring(0,i.length-1)))>=2147483648)throw new Error("invalid path index - "+i);r=r._derive(2147483648+o)}else{if(!i.match(/^[0-9]+$/))throw new Error("invlaid path component - "+i);var o;if((o=parseInt(i))>=2147483648)throw new Error("invalid path index - "+i);r=r._derive(o)}}return r},e.isHDNode=function(e){return properties.isType(e,"HDNode")},e}();function l(e,t){var r=bytes.arrayify(e);if(r.length<16||r.length>64)throw new Error("invalid seed");var n=bytes.arrayify(hmac$1.computeHmac(hmac$1.SupportedAlgorithms.sha512,o,r));return new f(u,a(n.slice(0,32)),null,"0x00000000",a(n.slice(32)),0,0,t,"m")}function d(e,t){t||(t="");var r=utf8.toUtf8Bytes("mnemonic"+t,utf8.UnicodeNormalizationForm.NFKD);return bytes.hexlify(pbkdf2_1.pbkdf2(utf8.toUtf8Bytes(e,utf8.UnicodeNormalizationForm.NFKD),r,2048,64,"sha512"))}function h(e,t){t||(t=langEn_1.langEn),n.checkNormalize();var r=t.split(e);if(r.length%3!=0)throw new Error("invalid mnemonic");for(var i=bytes.arrayify(new Uint8Array(Math.ceil(11*r.length/8))),o=0,a=0;a<r.length;a++){var c=t.getWordIndex(r[a].normalize("NFKD"));if(-1===c)throw new Error("invalid mnemonic");for(var u=0;u<11;u++)c&1<<10-u&&(i[o>>3]|=1<<7-o%8),o++}var f=32*r.length/3,l=s(r.length/3),d=bytes.arrayify(sha2.sha256(i.slice(0,f/8)))[0];if((d&=l)!==(i[i.length-1]&l))throw new Error("invalid checksum");return bytes.hexlify(i.slice(0,f/8))}t.HDNode=f,t.fromExtendedKey=function(e){var t=basex.Base58.decode(e);82===t.length&&c(t.slice(0,78))===e||n.throwError("invalid extended key",n.INVALID_ARGUMENT,{argument:"extendedKey",value:"[REDACTED]"});var r=t[4],i=bytes.hexlify(t.slice(5,9)),o=parseInt(bytes.hexlify(t.slice(9,13)).substring(2),16),s=bytes.hexlify(t.slice(13,45)),a=t.slice(45,78);switch(bytes.hexlify(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new f(u,null,bytes.hexlify(a),i,s,o,r,null,null);case"0x0488ade4":case"0x04358394 ":if(0!==a[0])break;return new f(u,bytes.hexlify(a.slice(1)),null,i,s,o,r,null,null)}return n.throwError("invalid extended key",n.INVALID_ARGUMENT,{argument:"extendedKey",value:"[REDACTED]"})},t.fromMnemonic=function(e,t,r){return h(e,t),l(d(e,r),e)},t.fromSeed=function(e){return l(e,null)},t.mnemonicToSeed=d,t.mnemonicToEntropy=h,t.entropyToMnemonic=function(e,t){if((e=bytes.arrayify(e)).length%4!=0||e.length<16||e.length>32)throw new Error("invalid entropy");for(var r=[0],n=11,i=0;i<e.length;i++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[i],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[i]>>8-n,r.push(e[i]&(1<<8-n)-1),n+=3);var o=bytes.arrayify(sha2.sha256(e))[0],a=e.length/4;return o&=s(a),r[r.length-1]<<=a,r[r.length-1]|=o>>8-a,t||(t=langEn_1.langEn),t.join(r.map(function(e){return t.getWord(e)}))},t.isValidMnemonic=function(e,t){try{return h(e,t),!0}catch(e){}return!1}});unwrapExports(hdnode);var hdnode_1=hdnode.defaultPath,hdnode_2=hdnode.HDNode,hdnode_3=hdnode.fromExtendedKey,hdnode_4=hdnode.fromMnemonic,hdnode_5=hdnode.fromSeed,hdnode_6=hdnode.mnemonicToSeed,hdnode_7=hdnode.mnemonicToEntropy,hdnode_8=hdnode.entropyToMnemonic,hdnode_9=hdnode.isValidMnemonic,jsonWallet=createCommonjsModule(function(e,t){function r(e){try{var t=JSON.parse(e)}catch(e){return!1}return t.encseed&&t.ethaddr}function n(e){try{var t=JSON.parse(e)}catch(e){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}Object.defineProperty(t,"__esModule",{value:!0}),t.isCrowdsaleWallet=r,t.isSecretStorageWallet=n,t.getJsonWalletAddress=function(e){if(r(e))try{return address.getAddress(JSON.parse(e).ethaddr)}catch(e){return null}if(n(e))try{return address.getAddress(JSON.parse(e).address)}catch(e){return null}return null}});unwrapExports(jsonWallet);var jsonWallet_1=jsonWallet.isCrowdsaleWallet,jsonWallet_2=jsonWallet.isSecretStorageWallet,jsonWallet_3=jsonWallet.getJsonWalletAddress,randomBytes_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=function(e){return bytes.arrayify(crypto$l.randomBytes(e))}});unwrapExports(randomBytes_1);for(var randomBytes_2=randomBytes_1.randomBytes,aesJs=createCommonjsModule(function(e,t){!function(t){function r(e){return parseInt(e)===e}function n(e){if(!r(e.length))return!1;for(var t=0;t<e.length;t++)if(!r(e[t])||e[t]<0||e[t]>255)return!1;return!0}function i(e,t){if(e.buffer&&ArrayBuffer.isView(e)&&"Uint8Array"===e.name)return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!n(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(r(e.length)&&n(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function o(e){return new Uint8Array(e)}function s(e,t,r,n,i){null==n&&null==i||(e=e.slice?e.slice(n,i):Array.prototype.slice.call(e,n,i)),t.set(e,r)}var a=function(){return{toBytes:function(e){var t=[],r=0;for(e=encodeURI(e);r<e.length;){var n=e.charCodeAt(r++);37===n?(t.push(parseInt(e.substr(r,2),16)),r+=2):t.push(n)}return i(t)},fromBytes:function(e){for(var t=[],r=0;r<e.length;){var n=e[r];n<128?(t.push(String.fromCharCode(n)),r++):n>191&&n<224?(t.push(String.fromCharCode((31&n)<<6|63&e[r+1])),r+=2):(t.push(String.fromCharCode((15&n)<<12|(63&e[r+1])<<6|63&e[r+2])),r+=3)}return t.join("")}}}(),c=function(){var e="0123456789abcdef";return{toBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},fromBytes:function(t){for(var r=[],n=0;n<t.length;n++){var i=t[n];r.push(e[(240&i)>>4]+e[15&i])}return r.join("")}}}(),u={16:10,24:12,32:14},f=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],d=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],h=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],b=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],m=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],y=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],_=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],$=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],S=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],E=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],w=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function C(e){for(var t=[],r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}var A=function(e){if(!(this instanceof A))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(e,!0)}),this._prepare()};A.prototype._prepare=function(){var e=u[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(e+1),i=this.key.length/4,o=C(this.key);for(t=0;t<i;t++)r=t>>2,this._Ke[r][t%4]=o[t],this._Kd[e-r][t%4]=o[t];for(var s,a=0,c=i;c<n;){if(s=o[i-1],o[0]^=l[s>>16&255]<<24^l[s>>8&255]<<16^l[255&s]<<8^l[s>>24&255]^f[a]<<24,a+=1,8!=i)for(t=1;t<i;t++)o[t]^=o[t-1];else{for(t=1;t<i/2;t++)o[t]^=o[t-1];s=o[i/2-1],o[i/2]^=l[255&s]^l[s>>8&255]<<8^l[s>>16&255]<<16^l[s>>24&255]<<24;for(t=i/2+1;t<i;t++)o[t]^=o[t-1]}for(t=0;t<i&&c<n;)d=c>>2,h=c%4,this._Ke[d][h]=o[t],this._Kd[e-d][h]=o[t++],c++}for(var d=1;d<e;d++)for(var h=0;h<4;h++)s=this._Kd[d][h],this._Kd[d][h]=$[s>>24&255]^S[s>>16&255]^E[s>>8&255]^w[255&s]},A.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,r=[0,0,0,0],n=C(e),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var s=1;s<t;s++){for(i=0;i<4;i++)r[i]=h[n[i]>>24&255]^p[n[(i+1)%4]>>16&255]^b[n[(i+2)%4]>>8&255]^m[255&n[(i+3)%4]]^this._Ke[s][i];n=r.slice()}var a,c=o(16);for(i=0;i<4;i++)a=this._Ke[t][i],c[4*i]=255&(l[n[i]>>24&255]^a>>24),c[4*i+1]=255&(l[n[(i+1)%4]>>16&255]^a>>16),c[4*i+2]=255&(l[n[(i+2)%4]>>8&255]^a>>8),c[4*i+3]=255&(l[255&n[(i+3)%4]]^a);return c},A.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,r=[0,0,0,0],n=C(e),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var s=1;s<t;s++){for(i=0;i<4;i++)r[i]=g[n[i]>>24&255]^y[n[(i+3)%4]>>16&255]^v[n[(i+2)%4]>>8&255]^_[255&n[(i+1)%4]]^this._Kd[s][i];n=r.slice()}var a,c=o(16);for(i=0;i<4;i++)a=this._Kd[t][i],c[4*i]=255&(d[n[i]>>24&255]^a>>24),c[4*i+1]=255&(d[n[(i+3)%4]>>16&255]^a>>16),c[4*i+2]=255&(d[n[(i+2)%4]>>8&255]^a>>8),c[4*i+3]=255&(d[255&n[(i+1)%4]]^a);return c};var k=function(e){if(!(this instanceof k))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new A(e)};k.prototype.encrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16)s(e,r,0,n,n+16),s(r=this._aes.encrypt(r),t,n);return t},k.prototype.decrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16)s(e,r,0,n,n+16),s(r=this._aes.decrypt(r),t,n);return t};var T=function(e,t){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastCipherblock=i(t,!0),this._aes=new A(e)};T.prototype.encrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16){s(e,r,0,n,n+16);for(var a=0;a<16;a++)r[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(r),s(this._lastCipherblock,t,n)}return t},T.prototype.decrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16){s(e,r,0,n,n+16),r=this._aes.decrypt(r);for(var a=0;a<16;a++)t[n+a]=r[a]^this._lastCipherblock[a];s(e,this._lastCipherblock,0,n,n+16)}return t};var I=function(e,t,r){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=o(16);r||(r=1),this.segmentSize=r,this._shiftRegister=i(t,!0),this._aes=new A(e)};I.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,r=i(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[n+o]^=t[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(r,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r},I.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,r=i(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[n+o]^=t[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r};var B=function(e,t){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastPrecipher=i(t,!0),this._lastPrecipherIndex=16,this._aes=new A(e)};B.prototype.encrypt=function(e){for(var t=i(e,!0),r=0;r<t.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},B.prototype.decrypt=B.prototype.encrypt;var P=function(e){if(!(this instanceof P))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=o(16),this.setValue(e)):this.setBytes(e)};P.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");for(var t=15;t>=0;--t)this._counter[t]=e%256,e>>=8},P.prototype.setBytes=function(e){if(16!=(e=i(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},P.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var R=function(e,t){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof P||(t=new P(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new A(e)};R.prototype.encrypt=function(e){for(var t=i(e,!0),r=0;r<t.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[r]^=this._remainingCounter[this._remainingCounterIndex++];return t},R.prototype.decrypt=R.prototype.encrypt;var O={AES:A,Counter:P,ModeOfOperation:{ecb:k,cbc:T,cfb:I,ofb:B,ctr:R},utils:{hex:c,utf8:a},padding:{pkcs7:{pad:function(e){var t=16-(e=i(e,!0)).length%16,r=o(e.length+t);s(e,r);for(var n=e.length;n<r.length;n++)r[n]=t;return r},strip:function(e){if((e=i(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("PKCS#7 padding byte out of range");for(var r=e.length-t,n=0;n<t;n++)if(e[r+n]!==t)throw new Error("PKCS#7 invalid padding byte");var a=o(r);return s(e,a,0,0,r),a}}},_arrayTest:{coerceArray:i,createArray:o,copyArray:s}};e.exports=O}()}),scrypt=createCommonjsModule(function(e,t){!function(t){var r=2147483647;function n(e){var t=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=1779033703,n=3144134277,i=1013904242,o=2773480762,s=1359893119,a=2600822924,c=528734635,u=1541459225,f=new Array(64);function l(e){for(var l=0,d=e.length;d>=64;){var h,p,b,m,g,y=r,v=n,_=i,$=o,S=s,E=a,w=c,C=u;for(p=0;p<16;p++)b=l+4*p,f[p]=(255&e[b])<<24|(255&e[b+1])<<16|(255&e[b+2])<<8|255&e[b+3];for(p=16;p<64;p++)m=((h=f[p-2])>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,g=((h=f[p-15])>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,f[p]=(m+f[p-7]|0)+(g+f[p-16]|0)|0;for(p=0;p<64;p++)m=(((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&E^~S&w)|0)+(C+(t[p]+f[p]|0)|0)|0,g=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&v^y&_^v&_)|0,C=w,w=E,E=S,S=$+m|0,$=_,_=v,v=y,y=m+g|0;r=r+y|0,n=n+v|0,i=i+_|0,o=o+$|0,s=s+S|0,a=a+E|0,c=c+w|0,u=u+C|0,l+=64,d-=64}}l(e);var d,h=e.length%64,p=e.length/536870912|0,b=e.length<<3,m=h<56?56:120,g=e.slice(e.length-h,e.length);for(g.push(128),d=h+1;d<m;d++)g.push(0);return g.push(p>>>24&255),g.push(p>>>16&255),g.push(p>>>8&255),g.push(p>>>0&255),g.push(b>>>24&255),g.push(b>>>16&255),g.push(b>>>8&255),g.push(b>>>0&255),l(g),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255]}function i(e,t,r){var i;e=e.length<=64?e:n(e);var o=64+t.length+4,s=new Array(o),a=new Array(64),c=[];for(i=0;i<64;i++)s[i]=54;for(i=0;i<e.length;i++)s[i]^=e[i];for(i=0;i<t.length;i++)s[64+i]=t[i];for(i=o-4;i<o;i++)s[i]=0;for(i=0;i<64;i++)a[i]=92;for(i=0;i<e.length;i++)a[i]^=e[i];function u(){for(var e=o-1;e>=o-4;e--){if(s[e]++,s[e]<=255)return;s[e]=0}}for(;r>=32;)u(),c=c.concat(n(a.concat(n(s)))),r-=32;return r>0&&(u(),c=c.concat(n(a.concat(n(s))).slice(0,r))),c}function o(e,t,r,n,i){var o;for(u(e,16*(2*r-1),i,0,16),o=0;o<2*r;o++)c(e,16*o,i,16),a(i,n),u(i,0,e,t+16*o,16);for(o=0;o<r;o++)u(e,t+2*o*16,e,16*o,16);for(o=0;o<r;o++)u(e,t+16*(2*o+1),e,16*(o+r),16)}function s(e,t){return e<<t|e>>>32-t}function a(e,t){u(e,0,t,0,16);for(var r=8;r>0;r-=2)t[4]^=s(t[0]+t[12],7),t[8]^=s(t[4]+t[0],9),t[12]^=s(t[8]+t[4],13),t[0]^=s(t[12]+t[8],18),t[9]^=s(t[5]+t[1],7),t[13]^=s(t[9]+t[5],9),t[1]^=s(t[13]+t[9],13),t[5]^=s(t[1]+t[13],18),t[14]^=s(t[10]+t[6],7),t[2]^=s(t[14]+t[10],9),t[6]^=s(t[2]+t[14],13),t[10]^=s(t[6]+t[2],18),t[3]^=s(t[15]+t[11],7),t[7]^=s(t[3]+t[15],9),t[11]^=s(t[7]+t[3],13),t[15]^=s(t[11]+t[7],18),t[1]^=s(t[0]+t[3],7),t[2]^=s(t[1]+t[0],9),t[3]^=s(t[2]+t[1],13),t[0]^=s(t[3]+t[2],18),t[6]^=s(t[5]+t[4],7),t[7]^=s(t[6]+t[5],9),t[4]^=s(t[7]+t[6],13),t[5]^=s(t[4]+t[7],18),t[11]^=s(t[10]+t[9],7),t[8]^=s(t[11]+t[10],9),t[9]^=s(t[8]+t[11],13),t[10]^=s(t[9]+t[8],18),t[12]^=s(t[15]+t[14],7),t[13]^=s(t[12]+t[15],9),t[14]^=s(t[13]+t[12],13),t[15]^=s(t[14]+t[13],18);for(r=0;r<16;++r)e[r]+=t[r]}function c(e,t,r,n){for(var i=0;i<n;i++)r[i]^=e[t+i]}function u(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}function f(e){if(!e||"number"!=typeof e.length)return!1;for(var t=0;t<e.length;t++){if("number"!=typeof e[t])return!1;var r=parseInt(e[t]);if(r!=e[t]||r<0||r>=256)return!1}return!0}function l(e,t){var r=parseInt(e);if(e!=r)throw new Error("invalid "+t);return r}e.exports=function(e,t,n,s,a,d,h){if(!h)throw new Error("missing callback");if(n=l(n,"N"),s=l(s,"r"),a=l(a,"p"),d=l(d,"dkLen"),0===n||0!=(n&n-1))throw new Error("N must be power of 2");if(n>r/128/s)throw new Error("N too large");if(s>r/128/a)throw new Error("r too large");if(!f(e))throw new Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!f(t))throw new Error("salt must be an array or buffer");t=Array.prototype.slice.call(t);for(var p=i(e,t,128*a*s),b=new Uint32Array(32*a*s),m=0;m<b.length;m++){var g=4*m;b[m]=(255&p[g+3])<<24|(255&p[g+2])<<16|(255&p[g+1])<<8|(255&p[g+0])<<0}var y,v,_=new Uint32Array(64*s),$=new Uint32Array(32*s*n),S=32*s,E=new Uint32Array(16),w=new Uint32Array(16),C=a*n*2,A=0,k=null,T=!1,I=0,B=0,P=parseInt(1e3/s),R="undefined"!=typeof setImmediate?setImmediate:setTimeout,O=function(){if(T)return h(new Error("cancelled"),A/C);switch(I){case 0:u(b,v=32*B*s,_,0,S),I=1,y=0;case 1:(r=n-y)>P&&(r=P);for(var t=0;t<r;t++)u(_,0,$,(y+t)*S,S),o(_,S,s,E,w);if(y+=r,A+=r,(f=parseInt(1e3*A/C))!==k){if(T=h(null,A/C))break;k=f}if(y<n)break;y=0,I=2;case 2:var r,f;for((r=n-y)>P&&(r=P),t=0;t<r;t++){var l=_[16*(2*s-1)]&n-1;c($,l*S,_,S),o(_,S,s,E,w)}if(y+=r,A+=r,(f=parseInt(1e3*A/C))!==k){if(T=h(null,A/C))break;k=f}if(y<n)break;if(u(_,0,b,v,S),++B<a){I=0;break}for(p=[],t=0;t<b.length;t++)p.push(b[t]>>0&255),p.push(b[t]>>8&255),p.push(b[t]>>16&255),p.push(b[t]>>24&255);var m=i(e,p,d);return h(null,1,m)}R(O)};O()}}()}),rb=crypto$l.randomBytes,rng=function(){return rb(16)},_byteToHex=[],_hexToByte={},i=0;i<256;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;function parse(e,t,r){var n=t&&r||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[n+i++]=_hexToByte[e])});i<16;)t[n+i++]=0;return t}function unparse(e,t){var r=t||0,n=_byteToHex;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}var _seedBytes=rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0;function v1(e,t,r){var n=t&&r||0,i=t||[],o=void 0!==(e=e||{}).clockseq?e.clockseq:_clockseq,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),a=void 0!==e.nsecs?e.nsecs:_lastNSecs+1,c=s-_lastMSecs+(a-_lastNSecs)/1e4;if(c<0&&void 0===e.clockseq&&(o=o+1&16383),(c<0||s>_lastMSecs)&&void 0===e.nsecs&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=s,_lastNSecs=a,_clockseq=o;var u=(1e4*(268435455&(s+=122192928e5))+a)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=255&u;var f=s/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=255&f,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(var l=e.node||_nodeId,d=0;d<6;d++)i[n+d]=l[d];return t||unparse(i)}function v4(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||rng)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;o++)t[n+o]=i[o];return t||unparse(i)}var uuid=v4;uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse;var uuid_1=uuid,signingKey=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(errors),i=function(){function e(t){n.checkNew(this,e);var r=null;hdnode.HDNode.isHDNode(t)?(properties.defineReadOnly(this,"mnemonic",t.mnemonic),properties.defineReadOnly(this,"path",t.path),r=bytes.arrayify(t.privateKey)):("string"==typeof t&&t.match(/^[0-9a-f]*$/i)&&64===t.length&&(t="0x"+t),r=bytes.arrayify(t));try{32!==r.length&&n.throwError("exactly 32 bytes required",n.INVALID_ARGUMENT,{arg:"privateKey",value:"[REDACTED]"})}catch(e){var i={arg:"privateKey",reason:e.reason,value:"[REDACTED]"};e.value&&("number"==typeof e.value.length&&(i.length=e.value.length),i.type=typeof e.value),n.throwError("invalid private key",e.code,i)}properties.defineReadOnly(this,"privateKey",bytes.hexlify(r)),properties.defineReadOnly(this,"keyPair",new secp256k1$3.KeyPair(r)),properties.defineReadOnly(this,"publicKey",this.keyPair.publicKey),properties.defineReadOnly(this,"address",secp256k1$3.computeAddress(this.keyPair.publicKey)),properties.setType(this,"SigningKey")}return e.prototype.signDigest=function(e){return this.keyPair.sign(e)},e.prototype.computeSharedSecret=function(e){return this.keyPair.computeSharedSecret(bytes.arrayify(e))},e.isSigningKey=function(e){return properties.isType(e,"SigningKey")},e}();t.SigningKey=i});unwrapExports(signingKey);var signingKey_1=signingKey.SigningKey,secretStorage=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(aesJs),o=r(scrypt),s=r(uuid_1),a=n(hdnode);function c(e){return"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),bytes.arrayify(e)}function u(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function f(e){return"string"==typeof e?utf8.toUtf8Bytes(e,utf8.UnicodeNormalizationForm.NFKC):bytes.arrayify(e)}function l(e,t){for(var r=e,n=t.toLowerCase().split("/"),i=0;i<n.length;i++){var o=null;for(var s in r)if(s.toLowerCase()===n[i]){o=r[s];break}if(null===o)return null;r=o}return r}t.decryptCrowdsale=function(e,t){var r=JSON.parse(e);t=f(t);var n=address.getAddress(l(r,"ethaddr")),o=c(l(r,"encseed"));if(!o||o.length%16!=0)throw new Error("invalid encseed");var s=pbkdf2_1.pbkdf2(t,t,2e3,32,"sha256").slice(0,16),a=o.slice(0,16),u=o.slice(16),d=new i.default.ModeOfOperation.cbc(s,a),h=bytes.arrayify(d.decrypt(u));h=i.default.padding.pkcs7.strip(h);for(var p="",b=0;b<h.length;b++)p+=String.fromCharCode(h[b]);var m=utf8.toUtf8Bytes(p),g=new signingKey.SigningKey(keccak256_1.keccak256(m));if(g.address!==n)throw new Error("corrupt crowdsale wallet");return g},t.decrypt=function(e,t,r){var n=JSON.parse(e),s=f(t),u=function(e,t){var r=c(l(n,"crypto/ciphertext"));if(bytes.hexlify(function(e,t){return keccak256_1.keccak256(bytes.concat([e,t]))}(e.slice(16,32),r)).substring(2)!==l(n,"crypto/mac").toLowerCase())return t(new Error("invalid password")),null;var o=function(e,t){if("aes-128-ctr"===l(n,"crypto/cipher")){var r=c(l(n,"crypto/cipherparams/iv")),o=new i.default.Counter(r),s=new i.default.ModeOfOperation.ctr(e,o);return bytes.arrayify(s.decrypt(t))}return null}(e.slice(0,16),r),s=e.slice(32,64);if(!o)return t(new Error("unsupported cipher")),null;var u=new signingKey.SigningKey(o);if(u.address!==address.getAddress(n.address))return t(new Error("address mismatch")),null;if("0.1"===l(n,"x-ethers/version")){var f=c(l(n,"x-ethers/mnemonicCiphertext")),d=c(l(n,"x-ethers/mnemonicCounter")),h=new i.default.Counter(d),p=new i.default.ModeOfOperation.ctr(s,h),b=l(n,"x-ethers/path")||a.defaultPath,m=bytes.arrayify(p.decrypt(f)),g=a.entropyToMnemonic(m),y=a.fromMnemonic(g).derivePath(b);if(y.privateKey!=bytes.hexlify(o))return t(new Error("mnemonic mismatch")),null;u=new signingKey.SigningKey(y)}return u};return new Promise(function(e,t){var i=l(n,"crypto/kdf");if(i&&"string"==typeof i)if("scrypt"===i.toLowerCase()){var a=c(l(n,"crypto/kdfparams/salt")),f=parseInt(l(n,"crypto/kdfparams/n")),d=parseInt(l(n,"crypto/kdfparams/r")),h=parseInt(l(n,"crypto/kdfparams/p"));if(!f||!d||!h)return void t(new Error("unsupported key-derivation function parameters"));if(0!=(f&f-1))return void t(new Error("unsupported key-derivation function parameter value for N"));if(32!==(m=parseInt(l(n,"crypto/kdfparams/dklen"))))return void t(new Error("unsupported key-derivation derived-key length"));r&&r(0),o.default(s,a,f,d,h,64,function(n,i,o){if(n)n.progress=i,t(n);else if(o){o=bytes.arrayify(o);var s=u(o,t);if(!s)return;r&&r(1),e(s)}else if(r)return r(i)})}else if("pbkdf2"===i.toLowerCase()){a=c(l(n,"crypto/kdfparams/salt"));var p=null,b=l(n,"crypto/kdfparams/prf");if("hmac-sha256"===b)p="sha256";else{if("hmac-sha512"!==b)return void t(new Error("unsupported prf"));p="sha512"}var m,g=parseInt(l(n,"crypto/kdfparams/c"));if(32!==(m=parseInt(l(n,"crypto/kdfparams/dklen"))))return void t(new Error("unsupported key-derivation derived-key length"));var y=pbkdf2_1.pbkdf2(s,a,g,m,p),v=u(y,t);if(!v)return;e(v)}else t(new Error("unsupported key-derivation function"));else t(new Error("unsupported key-derivation function"))})},t.encrypt=function(e,t,r,n){"function"!=typeof r||n||(n=r,r={}),r||(r={});var c=null;if(32!==(c=signingKey.SigningKey.isSigningKey(e)?bytes.arrayify(e.privateKey):bytes.arrayify(e)).length)throw new Error("invalid private key");var l=f(t),d=null;if(r.entropy&&(d=bytes.arrayify(r.entropy)),r.mnemonic)if(d){if(a.entropyToMnemonic(d)!==r.mnemonic)throw new Error("entropy and mnemonic mismatch")}else d=bytes.arrayify(a.mnemonicToEntropy(r.mnemonic));var h=r.path;d&&!h&&(h=a.defaultPath);var p=r.client;p||(p="ethers.js");var b=null;b=r.salt?bytes.arrayify(r.salt):randomBytes_1.randomBytes(32);var m=null;if(r.iv){if(16!==(m=bytes.arrayify(r.iv)).length)throw new Error("invalid iv")}else m=randomBytes_1.randomBytes(16);var g=null;if(r.uuid){if(16!==(g=bytes.arrayify(r.uuid)).length)throw new Error("invalid uuid")}else g=randomBytes_1.randomBytes(16);var y=1<<17,v=8,_=1;return r.scrypt&&(r.scrypt.N&&(y=r.scrypt.N),r.scrypt.r&&(v=r.scrypt.r),r.scrypt.p&&(_=r.scrypt.p)),new Promise(function(e,t){n&&n(0),o.default(l,b,y,v,_,64,function(r,o,a){if(r)r.progress=o,t(r);else if(a){var f=(a=bytes.arrayify(a)).slice(0,16),l=a.slice(16,32),$=a.slice(32,64),S=new signingKey.SigningKey(c).address,E=new i.default.Counter(m),w=new i.default.ModeOfOperation.ctr(f,E),C=bytes.arrayify(w.encrypt(c)),A=keccak256_1.keccak256(bytes.concat([l,C])),k={address:S.substring(2).toLowerCase(),id:s.default.v4({random:g}),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:bytes.hexlify(m).substring(2)},ciphertext:bytes.hexlify(C).substring(2),kdf:"scrypt",kdfparams:{salt:bytes.hexlify(b).substring(2),n:y,dklen:32,p:_,r:v},mac:A.substring(2)}};if(d){var T=randomBytes_1.randomBytes(16),I=new i.default.Counter(T),B=new i.default.ModeOfOperation.ctr($,I),P=bytes.arrayify(B.encrypt(d)),R=new Date,O=R.getUTCFullYear()+"-"+u(R.getUTCMonth()+1,2)+"-"+u(R.getUTCDate(),2)+"T"+u(R.getUTCHours(),2)+"-"+u(R.getUTCMinutes(),2)+"-"+u(R.getUTCSeconds(),2)+".0Z";k["x-ethers"]={client:p,gethFilename:"UTC--"+O+"--"+k.address,mnemonicCounter:bytes.hexlify(T).substring(2),mnemonicCiphertext:bytes.hexlify(P).substring(2),path:h,version:"0.1"}}n&&n(1),e(JSON.stringify(k))}else if(n)return n(o)})})}});unwrapExports(secretStorage);var secretStorage_1=secretStorage.decryptCrowdsale,secretStorage_2=secretStorage.decrypt,secretStorage_3=secretStorage.encrypt,transaction=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(errors),i=r(rlp);function o(e){return"0x"===e?constants$5.Zero:bignumber.bigNumberify(e)}var s=[{name:"nonce",maxLength:32},{name:"gasPrice",maxLength:32},{name:"gasLimit",maxLength:32},{name:"to",length:20},{name:"value",maxLength:32},{name:"data"}],a={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0};t.serialize=function(e,t){properties.checkProperties(e,a);var r=[];s.forEach(function(t){var i=e[t.name]||[];i=bytes.arrayify(bytes.hexlify(i)),t.length&&i.length!==t.length&&i.length>0&&n.throwError("invalid length for "+t.name,n.INVALID_ARGUMENT,{arg:"transaction"+t.name,value:i}),t.maxLength&&(i=bytes.stripZeros(i)).length>t.maxLength&&n.throwError("invalid length for "+t.name,n.INVALID_ARGUMENT,{arg:"transaction"+t.name,value:i}),r.push(bytes.hexlify(i))}),null!=e.chainId&&0!==e.chainId&&(r.push(bytes.hexlify(e.chainId)),r.push("0x"),r.push("0x"));var o=i.encode(r);if(!t)return o;var c=bytes.splitSignature(t),u=27+c.recoveryParam;return 9===r.length&&(r.pop(),r.pop(),r.pop(),u+=2*e.chainId+8),r.push(bytes.hexlify(u)),r.push(bytes.stripZeros(bytes.arrayify(c.r))),r.push(bytes.stripZeros(bytes.arrayify(c.s))),i.encode(r)},t.parse=function(e){var t=i.decode(e);9!==t.length&&6!==t.length&&n.throwError("invalid raw transaction",n.INVALID_ARGUMENT,{arg:"rawTransactin",value:e});var r,s={nonce:o(t[0]).toNumber(),gasPrice:o(t[1]),gasLimit:o(t[2]),to:(r=t[3],"0x"===r?null:address.getAddress(r)),value:o(t[4]),data:t[5],chainId:0};if(6===t.length)return s;try{s.v=bignumber.bigNumberify(t[6]).toNumber()}catch(e){return n.info(e),s}if(s.r=bytes.hexZeroPad(t[7],32),s.s=bytes.hexZeroPad(t[8],32),bignumber.bigNumberify(s.r).isZero()&&bignumber.bigNumberify(s.s).isZero())s.chainId=s.v,s.v=0;else{s.chainId=Math.floor((s.v-35)/2),s.chainId<0&&(s.chainId=0);var a=s.v-27,c=t.slice(0,6);0!==s.chainId&&(c.push(bytes.hexlify(s.chainId)),c.push("0x"),c.push("0x"),a-=2*s.chainId+8);var u=keccak256_1.keccak256(i.encode(c));try{s.from=secp256k1$3.recoverAddress(u,{r:bytes.hexlify(s.r),s:bytes.hexlify(s.s),recoveryParam:a})}catch(e){n.info(e)}s.hash=keccak256_1.keccak256(e)}return s},t.populateTransaction=function(e,t,r){abstractProvider.Provider.isProvider(t)||n.throwError("missing provider",n.INVALID_ARGUMENT,{argument:"provider",value:t}),properties.checkProperties(e,a);var i=properties.shallowCopy(e);if(null!=i.to&&(i.to=t.resolveName(i.to)),null==i.gasPrice&&(i.gasPrice=t.getGasPrice()),null==i.nonce&&(i.nonce=t.getTransactionCount(r)),null==i.gasLimit){var o=properties.shallowCopy(i);o.from=r,i.gasLimit=t.estimateGas(o)}return null==i.chainId&&(i.chainId=t.getNetwork().then(function(e){return e.chainId})),properties.resolveProperties(i)}});unwrapExports(transaction);var transaction_1=transaction.serialize,transaction_2=transaction.parse,transaction_3=transaction.populateTransaction,wallet=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(secretStorage),o=n(errors),s=function(e){function t(r,n){var i=e.call(this)||this;return o.checkNew(i,t),signingKey.SigningKey.isSigningKey(r)?properties.defineReadOnly(i,"signingKey",r):properties.defineReadOnly(i,"signingKey",new signingKey.SigningKey(r)),properties.defineReadOnly(i,"provider",n),i}return r(t,e),Object.defineProperty(t.prototype,"address",{get:function(){return this.signingKey.address},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mnemonic",{get:function(){return this.signingKey.mnemonic},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.signingKey.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"privateKey",{get:function(){return this.signingKey.privateKey},enumerable:!0,configurable:!0}),t.prototype.connect=function(e){return abstractProvider.Provider.isProvider(e)||o.throwError("invalid provider",o.INVALID_ARGUMENT,{argument:"provider",value:e}),new t(this.signingKey,e)},t.prototype.getAddress=function(){return Promise.resolve(this.address)},t.prototype.sign=function(e){var t=this;return properties.resolveProperties(e).then(function(e){var r=transaction.serialize(e),n=t.signingKey.signDigest(keccak256_1.keccak256(r));return transaction.serialize(e,n)})},t.prototype.signMessage=function(e){return Promise.resolve(bytes.joinSignature(this.signingKey.signDigest(hash.hashMessage(e))))},t.prototype.getBalance=function(e){if(!this.provider)throw new Error("missing provider");return this.provider.getBalance(this.address,e)},t.prototype.getTransactionCount=function(e){if(!this.provider)throw new Error("missing provider");return this.provider.getTransactionCount(this.address,e)},t.prototype.sendTransaction=function(e){var t=this;if(!this.provider)throw new Error("missing provider");return null==e.nonce&&((e=properties.shallowCopy(e)).nonce=this.getTransactionCount("pending")),transaction.populateTransaction(e,this.provider,this.address).then(function(e){return t.sign(e).then(function(e){return t.provider.sendTransaction(e)})})},t.prototype.encrypt=function(e,t,r){if("function"!=typeof t||r||(r=t,t={}),r&&"function"!=typeof r)throw new Error("invalid callback");return t||(t={}),this.mnemonic&&((t=properties.shallowCopy(t)).mnemonic=this.mnemonic,t.path=this.path),i.encrypt(this.privateKey,e,t,r)},t.createRandom=function(e){var r=randomBytes_1.randomBytes(16);e||(e={}),e.extraEntropy&&(r=bytes.arrayify(keccak256_1.keccak256(bytes.concat([r,e.extraEntropy])).substring(0,34)));var n=hdnode.entropyToMnemonic(r,e.locale);return t.fromMnemonic(n,e.path,e.locale)},t.fromEncryptedJson=function(e,r,n){if(jsonWallet.isCrowdsaleWallet(e))try{n&&n(0);var o=i.decryptCrowdsale(e,r);return n&&n(1),Promise.resolve(new t(o))}catch(e){return Promise.reject(e)}else if(jsonWallet.isSecretStorageWallet(e))return i.decrypt(e,r,n).then(function(e){return new t(e)});return Promise.reject("invalid wallet JSON")},t.fromMnemonic=function(e,r,n){return r||(r=hdnode.defaultPath),new t(hdnode.fromMnemonic(e,n).derivePath(r))},t}(abstractSigner.Signer);t.Wallet=s});unwrapExports(wallet);var wallet_1=wallet.Wallet,networks_1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(errors);function i(e){return function(t){var r=[];return t.InfuraProvider&&r.push(new t.InfuraProvider(e)),t.EtherscanProvider&&r.push(new t.EtherscanProvider(e)),0===r.length?null:t.FallbackProvider?new t.FallbackProvider(r):r[0]}}function o(e,t){return function(r){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null}}var s={chainId:1,ensAddress:"0x314159265dd8dbb310642f98f50c066173c1259b",name:"homestead",_defaultProvider:i("homestead")},a={chainId:3,ensAddress:"0x112234455c3a32fd11230c42e7bccd4a84e02010",name:"ropsten",_defaultProvider:i("ropsten")},c={unspecified:{chainId:0,name:"unspecified"},homestead:s,mainnet:s,morden:{chainId:2,name:"morden"},ropsten:a,testnet:a,rinkeby:{chainId:4,ensAddress:"0xe7410170f87102DF0055eB195163A03B7F2Bff4A",name:"rinkeby",_defaultProvider:i("rinkeby")},goerli:{chainId:5,ensAddress:"0x112234455c3a32fd11230c42e7bccd4a84e02010",name:"goerli",_defaultProvider:i("goerli")},kovan:{chainId:42,name:"kovan",_defaultProvider:i("kovan")},classic:{chainId:61,name:"classic",_defaultProvider:o("https://web3.gastracker.io","classic")},classicTestnet:{chainId:62,name:"classicTestnet",_defaultProvider:o("https://web3.gastracker.io/morden","classicTestnet")}};t.getNetwork=function(e){if(null==e)return null;if("number"==typeof e){for(var t in c){var r=c[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){var i=c[e];return null==i?null:{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress,_defaultProvider:i._defaultProvider||null}}var o=c[e.name];return o?(0!==e.chainId&&e.chainId!==o.chainId&&n.throwError("network chainId mismatch",n.INVALID_ARGUMENT,{arg:"network",value:e}),{name:e.name,chainId:o.chainId,ensAddress:e.ensAddress||o.ensAddress||null,_defaultProvider:e._defaultProvider||o._defaultProvider||null}):("number"!=typeof e.chainId&&n.throwError("invalid network chainId",n.INVALID_ARGUMENT,{arg:"network",value:e}),e)}});unwrapExports(networks_1);var networks_2=networks_1.getNetwork,spawn=child_process.spawn,XMLHttpRequest_1=function(){var e,t,r=this,n=http,i=https,o={},s=!1,a={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},c={},u={},f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],l=["TRACE","TRACK","CONNECT"],d=!1,h=!1,p={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;this.open=function(e,t,r,n,i){if(this.abort(),h=!1,!function(e){return e&&-1===l.indexOf(e)}(e))throw new Error("SecurityError: Request method not allowed");o={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:n||null,password:i||null},b(this.OPENED)},this.setDisableHeaderCheck=function(e){s=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(function(e){return s||e&&-1===f.indexOf(e.toLowerCase())}(e)){if(d)throw new Error("INVALID_STATE_ERR: send flag is true");e=u[e.toLowerCase()]||e,u[e.toLowerCase()]=e,c[e]=c[e]?c[e]+", "+t:t}else console.warn('Refused to set unsafe header "'+e+'"')},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&t&&t.headers&&t.headers[e.toLowerCase()]&&!h?t.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||h)return"";var e="";for(var r in t.headers)"set-cookie"!==r&&"set-cookie2"!==r&&(e+=r+": "+t.headers[r]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&u[e.toLowerCase()]?c[u[e.toLowerCase()]]:""},this.send=function(s){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(d)throw new Error("INVALID_STATE_ERR: send has already been called");var f,l=!1,p=!1,m=Url.parse(o.url);switch(m.protocol){case"https:":l=!0;case"http:":f=m.hostname;break;case"file:":p=!0;break;case void 0:case null:case"":f="localhost";break;default:throw new Error("Protocol not supported.")}if(p){if("GET"!==o.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(o.async)fs.readFile(m.pathname,"utf8",function(e,t){e?r.handleError(e):(r.status=200,r.responseText=t,b(r.DONE))});else try{this.responseText=fs.readFileSync(m.pathname,"utf8"),this.status=200,b(r.DONE)}catch(e){this.handleError(e)}}else{var g=m.port||(l?443:80),y=m.pathname+(m.search?m.search:"");for(var v in a)u[v.toLowerCase()]||(c[v]=a[v]);if(c.Host=f,l&&443===g||80===g||(c.Host+=":"+m.port),o.user){void 0===o.password&&(o.password="");var _=new Buffer(o.user+":"+o.password);c.Authorization="Basic "+_.toString("base64")}"GET"===o.method||"HEAD"===o.method?s=null:s?(c["Content-Length"]=Buffer.isBuffer(s)?s.length:Buffer.byteLength(s),c["Content-Type"]||(c["Content-Type"]="text/plain;charset=UTF-8")):"POST"===o.method&&(c["Content-Length"]=0);var $={host:f,port:g,path:y,method:o.method,headers:c,agent:!1,withCredentials:r.withCredentials};if(h=!1,o.async){var S=l?i.request:n.request;d=!0,r.dispatchEvent("readystatechange");var E=function(e){r.handleError(e)};e=S($,function n(i){if(301!==(t=i).statusCode&&302!==t.statusCode&&303!==t.statusCode&&307!==t.statusCode)t.setEncoding("utf8"),b(r.HEADERS_RECEIVED),r.status=t.statusCode,t.on("data",function(e){e&&(r.responseText+=e),d&&b(r.LOADING)}),t.on("end",function(){d&&(b(r.DONE),d=!1)}),t.on("error",function(e){r.handleError(e)});else{o.url=t.headers.location;var s=Url.parse(o.url);f=s.hostname;var a={hostname:s.hostname,port:s.port,path:s.path,method:303===t.statusCode?"GET":o.method,headers:c,withCredentials:r.withCredentials};(e=S(a,n).on("error",E)).end()}}).on("error",E),s&&e.write(s),e.end(),r.dispatchEvent("loadstart")}else{var w=".node-xmlhttprequest-content-"+process.pid,C=".node-xmlhttprequest-sync-"+process.pid;fs.writeFileSync(C,"","utf8");for(var A="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(l?"s":"")+".request;var options = "+JSON.stringify($)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+w+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+C+"');});response.on('error', function(error) {fs.writeFileSync('"+w+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+C+"');});}).on('error', function(error) {fs.writeFileSync('"+w+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+C+"');});"+(s?"req.write('"+JSON.stringify(s).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",k=spawn(process.argv[0],["-e",A]);fs.existsSync(C););var T=JSON.parse(fs.readFileSync(w,"utf8"));k.stdin.end(),fs.unlinkSync(w),T.err?r.handleError(T.err):(t=T.data,r.status=T.data.statusCode,r.responseText=T.data.text,b(r.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,h=!0,b(this.DONE),this.dispatchEvent("error")},this.abort=function(){e&&(e.abort(),e=null),c=a,this.status=0,this.responseText="",this.responseXML="",h=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!d||this.readyState===this.DONE||(d=!1,b(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in p||(p[e]=[]),p[e].push(t)},this.removeEventListener=function(e,t){e in p&&(p[e]=p[e].filter(function(e){return e!==t}))},this.dispatchEvent=function(e){if("function"==typeof r["on"+e]&&r["on"+e](),e in p)for(var t=0,n=p[e].length;t<n;t++)p[e][t].call(r)};var b=function(e){e!=r.LOADING&&r.readyState===e||(r.readyState=e,(o.async||r.readyState<r.OPENED||r.readyState===r.DONE)&&r.dispatchEvent("readystatechange"),r.readyState!==r.DONE||h||(r.dispatchEvent("load"),r.dispatchEvent("loadend")))}},XMLHttpRequest={XMLHttpRequest:XMLHttpRequest_1},base64$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){return bytes.arrayify(new Uint8Array(Buffer.from(e,"base64")))},t.encode=function(e){return Buffer.from(bytes.arrayify(e)).toString("base64")}});unwrapExports(base64$1);var base64_1=base64$1.decode,base64_2=base64$1.encode,web=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(errors);t.fetchJson=function(e,t,r){var i={},o=null,s=12e4;if("string"==typeof e)o=e;else if("object"==typeof e){if(null==e.url&&n.throwError("missing URL",n.MISSING_ARGUMENT,{arg:"url"}),o=e.url,"number"==typeof e.timeout&&e.timeout>0&&(s=e.timeout),e.headers)for(var a in e.headers)i[a.toLowerCase()]={key:a,value:String(e.headers[a])};if(null!=e.user&&null!=e.password){"https:"!==o.substring(0,6)&&!0!==e.allowInsecure&&n.throwError("basic authentication requires a secure https url",n.INVALID_ARGUMENT,{arg:"url",url:o,user:e.user,password:"[REDACTED]"});var c=e.user+":"+e.password;i.authorization={key:"Authorization",value:"Basic "+base64$1.encode(utf8.toUtf8Bytes(c))}}}return new Promise(function(e,n){var a=new XMLHttpRequest.XMLHttpRequest,c=null;c=setTimeout(function(){null!=c&&(c=null,n(new Error("timeout")),setTimeout(function(){a.abort()},0))},s);var u=function(){null!=c&&(clearTimeout(c),c=null)};t?(a.open("POST",o,!0),i["content-type"]={key:"Content-Type",value:"application/json"}):a.open("GET",o,!0),Object.keys(i).forEach(function(e){var t=i[e];a.setRequestHeader(t.key,t.value)}),a.onreadystatechange=function(){if(4===a.readyState){if(200!=a.status){u();var i=new Error("invalid response - "+a.status);return i.statusCode=a.status,a.responseText&&(i.responseText=a.responseText),void n(i)}var s=null;try{s=JSON.parse(a.responseText)}catch(i){u();var c=new Error("invalid json response");return c.orginialError=i,c.responseText=a.responseText,null!=t&&(c.requestBody=t),c.url=o,void n(c)}if(r)try{s=r(s)}catch(i){return u(),i.url=o,i.body=t,i.responseText=a.responseText,void n(i)}u(),e(s)}},a.onerror=function(e){u(),n(e)};try{null!=t?a.send(t):a.send()}catch(e){u();var f=new Error("connection error");f.error=e,n(f)}})},t.poll=function(e,t){return t||(t={}),null==(t=properties.shallowCopy(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise(function(r,n){var i=null,o=!1,s=function(){return!o&&(o=!0,i&&clearTimeout(i),!0)};t.timeout&&(i=setTimeout(function(){s()&&n(new Error("timeout"))},t.timeout));var a=t.fastRetry||null,c=0;!function i(){return e().then(function(e){if(void 0!==e)s()&&r(e);else if(t.onceBlock)t.onceBlock.once("block",i);else if(!o){c++;var n=t.interval*parseInt(String(Math.random()*Math.pow(2,c)));n<t.floor&&(n=t.floor),n>t.ceiling&&(n=t.ceiling),a&&(c--,n=a,a=null),setTimeout(i,n)}return null},function(e){s()&&n(e)})}()})}});unwrapExports(web);var web_1=web.fetchJson,web_2=web.poll,baseProvider=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(errors);function o(e,t){var r={};for(var n in e)try{var i=e[n](t[n]);void 0!==i&&(r[n]=i)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r}function s(e,t){return function(r){return null==r?t:e(r)}}function a(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");var r=[];return t.forEach(function(t){r.push(e(t))}),r}}function c(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),32===bytes.hexDataLength(e))?e.toLowerCase():(i.throwError("invalid hash",i.INVALID_ARGUMENT,{arg:"hash",value:e}),null)}function u(e){return bignumber.bigNumberify(e).toNumber()}function f(e){if(!bytes.isHexString(e))throw new Error("invalid uint256");for(;e.length<66;)e="0x0"+e.substring(2);return e}function l(e){if(null==e)return"latest";if("earliest"===e)return"0x0";if("latest"===e||"pending"===e)return e;if("number"==typeof e)return bytes.hexStripZeros(bytes.hexlify(e));if(bytes.isHexString(e))return bytes.hexStripZeros(e);throw new Error("invalid blockTag")}var d={hash:c,blockHash:s(c,null),blockNumber:s(u,null),transactionIndex:s(u,null),confirmations:s(u,null),from:address.getAddress,gasPrice:bignumber.bigNumberify,gasLimit:bignumber.bigNumberify,to:s(address.getAddress,null),value:bignumber.bigNumberify,nonce:u,data:bytes.hexlify,r:s(f),s:s(f),v:s(u),creates:s(address.getAddress,null),raw:s(bytes.hexlify)};function h(e){if(null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&bignumber.bigNumberify(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=address.getContractAddress(e)),!e.raw&&e.v&&e.r&&e.s){var t=[bytes.stripZeros(bytes.hexlify(e.nonce)),bytes.stripZeros(bytes.hexlify(e.gasPrice)),bytes.stripZeros(bytes.hexlify(e.gasLimit)),e.to||"0x",bytes.stripZeros(bytes.hexlify(e.value||"0x")),bytes.hexlify(e.data||"0x"),bytes.stripZeros(bytes.hexlify(e.v||"0x")),bytes.stripZeros(bytes.hexlify(e.r)),bytes.stripZeros(bytes.hexlify(e.s))];e.raw=rlp.encode(t)}var r=o(d,e),n=e.networkId;return null!=e.chainId&&null==n&&null==r.v&&(n=e.chainId),bytes.isHexString(n)&&(n=bignumber.bigNumberify(n).toNumber()),"number"!=typeof n&&null!=r.v&&((n=(r.v-35)/2)<0&&(n=0),n=parseInt(n)),"number"!=typeof n&&(n=0),r.networkId=n,r.blockHash&&"x"===r.blockHash.replace(/0/g,"")&&(r.blockHash=null),r}var p={hash:c,parentHash:c,number:u,timestamp:u,nonce:s(bytes.hexlify),difficulty:function(e){var t=bignumber.bigNumberify(e);try{return t.toNumber()}catch(e){}return null},gasLimit:bignumber.bigNumberify,gasUsed:bignumber.bigNumberify,miner:address.getAddress,extraData:bytes.hexlify,transactions:s(a(c))},b=properties.shallowCopy(p);function m(e,t){return null!=e.author&&null==e.miner&&(e.miner=e.author),o(t?b:p,e)}b.transactions=s(a(h));var g={from:s(address.getAddress),nonce:s(u),gasLimit:s(bignumber.bigNumberify),gasPrice:s(bignumber.bigNumberify),to:s(address.getAddress),value:s(bignumber.bigNumberify),data:s(bytes.hexlify)};function y(e){return o(g,e)}var v={transactionLogIndex:s(u),transactionIndex:u,blockNumber:u,transactionHash:c,address:address.getAddress,topics:a(c),data:bytes.hexlify,logIndex:u,blockHash:c};var _={to:s(address.getAddress,null),from:s(address.getAddress,null),contractAddress:s(address.getAddress,null),transactionIndex:u,root:s(c),gasUsed:bignumber.bigNumberify,logsBloom:s(bytes.hexlify),blockHash:c,transactionHash:c,logs:a(function(e){return o(v,e)}),blockNumber:u,confirmations:s(u,null),cumulativeGasUsed:bignumber.bigNumberify,status:s(u)};function $(e){return Array.isArray(e)?e.forEach(function(e){$(e)}):null!=e&&c(e),e}var S={fromBlock:s(l,void 0),toBlock:s(l,void 0),address:s(address.getAddress,void 0),topics:s($,void 0)},E={blockHash:s(c,void 0),address:s(address.getAddress,void 0),topics:s($,void 0)};function w(e){return e&&e.blockHash?o(E,e):o(S,e)}var C={blockNumber:s(u),blockHash:s(c),transactionIndex:u,removed:s(function(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===e)return!0;if("false"===e)return!1}throw new Error("invaid boolean - "+e)}),address:address.getAddress,data:function(e,t){return function(r){return r?e(r):t}}(bytes.hexlify,"0x"),topics:a(c),transactionHash:c,logIndex:u};function A(e){return o(C,e)}function k(e){return e.map(function(e){return"string"==typeof e?e:Array.isArray(e)?(e.forEach(function(e){null!==e&&32!==bytes.hexDataLength(e)&&i.throwError("invalid topic",i.INVALID_ARGUMENT,{argument:"topic",value:e})}),e.join(",")):null===e?"":i.throwError("invalid topic value",i.INVALID_ARGUMENT,{argument:"topic",value:e})}).join("&")}function T(e){if("string"==typeof e){if(20===bytes.hexDataLength(e))return"address:"+address.getAddress(e);if(e=e.toLowerCase(),32===bytes.hexDataLength(e))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter::"+k(e);if(e&&"object"==typeof e)return"filter:"+(e.address||"")+":"+k(e.topics||[])}throw new Error("invalid event - "+e)}function I(){return(new Date).getTime()}var B=function(e){function t(t){var r=e.call(this)||this;if(i.checkNew(r,abstractProvider.Provider),t instanceof Promise)properties.defineReadOnly(r,"ready",t.then(function(e){return properties.defineReadOnly(r,"_network",e),e})),r.ready.catch(function(e){});else{var n=networks_1.getNetwork(null==t?"homestead":t);n?(properties.defineReadOnly(r,"_network",n),properties.defineReadOnly(r,"ready",Promise.resolve(r._network))):i.throwError("invalid network",i.INVALID_ARGUMENT,{arg:"network",value:t})}return r._lastBlockNumber=-2,r._balances={},r._events=[],r._pollingInterval=4e3,r._emitted={block:-2},r._fastQueryDate=0,r}return r(t,e),t.prototype._doPoll=function(){var e=this;this.getBlockNumber().then(function(t){if(e._setFastBlockNumber(t),t!==e._lastBlockNumber){-2===e._emitted.block&&(e._emitted.block=t-1);for(var r=e._emitted.block+1;r<=t;r++)e.emit("block",r);e._emitted.block!==t&&(e._emitted.block=t,Object.keys(e._emitted).forEach(function(r){if("block"!==r){var n=e._emitted[r];"pending"!==n&&t-n>12&&delete e._emitted[r]}})),-2===e._lastBlockNumber&&(e._lastBlockNumber=t-1);var n={},i={};return e._events.forEach(function(e){i[e.tag]=!0}),Object.keys(i).forEach(function(r){var i=r.split(":");switch(i[0]){case"tx":var o=i[1];e.getTransactionReceipt(o).then(function(t){return t&&null!=t.blockNumber?(e._emitted["t:"+o]=t.blockNumber,e.emit(o,t),null):null}).catch(function(t){e.emit("error",t)});break;case"address":var s=i[1];e._balances[s]&&(n[s]=e._balances[s]),e.getBalance(s,"latest").then(function(t){var r=e._balances[s];if(!r||!t.eq(r))return e._balances[s]=t,e.emit(s,t),null}).catch(function(t){e.emit("error",t)});break;case"filter":var a=i[2].split(/&/g).map(function(e){var t=e.split(",");return 1===t.length?""===t[0]?null:e:t.map(function(e){return""===e?null:e})}),c={address:i[1],fromBlock:e._lastBlockNumber+1,toBlock:t,topics:a};c.address||delete c.address,e.getLogs(c).then(function(t){if(0!==t.length)return t.forEach(function(t){e._emitted["b:"+t.blockHash]=t.blockNumber,e._emitted["t:"+t.transactionHash]=t.blockNumber,e.emit(c,t)}),null}).catch(function(t){e.emit("error",t)})}}),e._lastBlockNumber=t,e._balances=n,null}}).catch(function(e){}),this.doPoll()},t.prototype.resetEventsBlock=function(e){this._lastBlockNumber=e-1,this.polling&&this._doPoll()},Object.defineProperty(t.prototype,"network",{get:function(){return this._network},enumerable:!0,configurable:!0}),t.prototype.getNetwork=function(){return this.ready},Object.defineProperty(t.prototype,"blockNumber",{get:function(){return this._fastBlockNumber},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"polling",{get:function(){return null!=this._poller},set:function(e){var t=this;setTimeout(function(){e&&!t._poller?t._poller=setInterval(t._doPoll.bind(t),t.pollingInterval):!e&&t._poller&&(clearInterval(t._poller),t._poller=null)},0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pollingInterval",{get:function(){return this._pollingInterval},set:function(e){var t=this;if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(function(){t._doPoll()},this._pollingInterval))},enumerable:!0,configurable:!0}),t.prototype._getFastBlockNumber=function(){var e=this,t=I();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then(function(t){return(null==e._fastBlockNumber||t>e._fastBlockNumber)&&(e._fastBlockNumber=t),e._fastBlockNumber})),this._fastBlockNumberPromise},t.prototype._setFastBlockNumber=function(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=I(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))},t.prototype.waitForTransaction=function(e,t){var r=this;return null==t&&(t=1),this.getTransactionReceipt(e).then(function(n){return 0===t||n&&n.confirmations>=t?n:new Promise(function(n){var i=function(o){o.confirmations<t||(r.removeListener(e,i),n(o))};r.on(e,i)})})},t.prototype.getBlockNumber=function(){var e=this;return this.ready.then(function(){return e.perform("getBlockNumber",{}).then(function(t){var r=parseInt(t);if(r!=t)throw new Error("invalid response - getBlockNumber");return e._setFastBlockNumber(r),r})})},t.prototype.getGasPrice=function(){var e=this;return this.ready.then(function(){return e.perform("getGasPrice",{}).then(function(e){return bignumber.bigNumberify(e)})})},t.prototype.getBalance=function(e,t){var r=this;return this.ready.then(function(){return properties.resolveProperties({addressOrName:e,blockTag:t}).then(function(e){var t=e.addressOrName,n=e.blockTag;return r.resolveName(t).then(function(e){var t={address:e,blockTag:l(n)};return r.perform("getBalance",t).then(function(e){return bignumber.bigNumberify(e)})})})})},t.prototype.getTransactionCount=function(e,t){var r=this;return this.ready.then(function(){return properties.resolveProperties({addressOrName:e,blockTag:t}).then(function(e){var t=e.addressOrName,n=e.blockTag;return r.resolveName(t).then(function(e){var t={address:e,blockTag:l(n)};return r.perform("getTransactionCount",t).then(function(e){return bignumber.bigNumberify(e).toNumber()})})})})},t.prototype.getCode=function(e,t){var r=this;return this.ready.then(function(){return properties.resolveProperties({addressOrName:e,blockTag:t}).then(function(e){var t=e.addressOrName,n=e.blockTag;return r.resolveName(t).then(function(e){var t={address:e,blockTag:l(n)};return r.perform("getCode",t).then(function(e){return bytes.hexlify(e)})})})})},t.prototype.getStorageAt=function(e,t,r){var n=this;return this.ready.then(function(){return properties.resolveProperties({addressOrName:e,position:t,blockTag:r}).then(function(e){var t=e.addressOrName,r=e.position,i=e.blockTag;return n.resolveName(t).then(function(e){var t={address:e,blockTag:l(i),position:bytes.hexStripZeros(bytes.hexlify(r))};return n.perform("getStorageAt",t).then(function(e){return bytes.hexlify(e)})})})})},t.prototype.sendTransaction=function(e){var t=this;return this.ready.then(function(){return properties.resolveProperties({signedTransaction:e}).then(function(e){var r=e.signedTransaction,n={signedTransaction:bytes.hexlify(r)};return t.perform("sendTransaction",n).then(function(e){return t._wrapTransaction(transaction.parse(r),e)},function(e){throw e.transaction=transaction.parse(r),e.transaction.hash&&(e.transactionHash=e.transaction.hash),e})})})},t.prototype._wrapTransaction=function(e,t){var r=this;if(null!=t&&32!==bytes.hexDataLength(t))throw new Error("invalid response - sendTransaction");var n=e;return null!=t&&e.hash!==t&&i.throwError("Transaction hash mismatch from Provider.sendTransaction.",i.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=function(t){return 0!==t&&(r._emitted["t:"+e.hash]="pending"),r.waitForTransaction(e.hash,t).then(function(n){return null==n&&0===t?null:(r._emitted["t:"+e.hash]=n.blockNumber,0===n.status&&i.throwError("transaction failed",i.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e}),n)})},n},t.prototype.call=function(e,t){var r=this,n=properties.shallowCopy(e);return this.ready.then(function(){return properties.resolveProperties({blockTag:t,tx:n}).then(function(e){var t=e.blockTag,n=e.tx;return r._resolveNames(n,["to","from"]).then(function(e){var n={blockTag:l(t),transaction:y(e)};return r.perform("call",n).then(function(e){return bytes.hexlify(e)})})})})},t.prototype.estimateGas=function(e){var t=this,r={to:e.to,from:e.from,data:e.data,gasPrice:e.gasPrice,value:e.value};return this.ready.then(function(){return properties.resolveProperties(r).then(function(e){return t._resolveNames(e,["to","from"]).then(function(e){var r={transaction:y(e)};return t.perform("estimateGas",r).then(function(e){return bignumber.bigNumberify(e)})})})})},t.prototype.getBlock=function(e,t){var r=this;return this.ready.then(function(){return properties.resolveProperties({blockHashOrBlockTag:e}).then(function(e){var n=e.blockHashOrBlockTag;try{var i=bytes.hexlify(n);if(32===bytes.hexDataLength(i))return web.poll(function(){return r.perform("getBlock",{blockHash:i,includeTransactions:!!t}).then(function(e){return null==e?null==r._emitted["b:"+i]?null:void 0:m(e,t)})},{onceBlock:r})}catch(e){}try{var o=-128,s=l(n);return bytes.isHexString(s)&&(o=parseInt(s.substring(2),16)),web.poll(function(){return r.perform("getBlock",{blockTag:s,includeTransactions:!!t}).then(function(e){if(null==e){if(o<=r._emitted.block)return;return null}return m(e,t)})},{onceBlock:r})}catch(e){}throw new Error("invalid block hash or block tag")})})},t.prototype.getTransaction=function(e){var r=this;return this.ready.then(function(){return properties.resolveProperties({transactionHash:e}).then(function(e){var n=e.transactionHash,i={transactionHash:c(n,!0)};return web.poll(function(){return r.perform("getTransaction",i).then(function(e){if(null==e)return null==r._emitted["t:"+n]?null:void 0;var i=t.checkTransactionResponse(e);if(null==i.blockNumber)i.confirmations=0;else if(null==i.confirmations)return r._getFastBlockNumber().then(function(e){var t=e-i.blockNumber+1;return t<=0&&(t=1),i.confirmations=t,r._wrapTransaction(i)});return r._wrapTransaction(i)})},{onceBlock:r})})})},t.prototype.getTransactionReceipt=function(e){var t=this;return this.ready.then(function(){return properties.resolveProperties({transactionHash:e}).then(function(e){var r=e.transactionHash,n={transactionHash:c(r,!0)};return web.poll(function(){return t.perform("getTransactionReceipt",n).then(function(e){if(null==e)return null==t._emitted["t:"+r]?null:void 0;if(null!=e.blockHash){var n=function(e){var t=o(_,e);return t.logs.forEach(function(e,t){null==e.transactionLogIndex&&(e.transactionLogIndex=t)}),null!=e.status&&(t.byzantium=!0),t}(e);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations)return t._getFastBlockNumber().then(function(e){var t=e-n.blockNumber+1;return t<=0&&(t=1),n.confirmations=t,n});return n}})},{onceBlock:t})})})},t.prototype.getLogs=function(e){var t=this;return this.ready.then(function(){return properties.resolveProperties(e).then(function(e){return t._resolveNames(e,["address"]).then(function(e){var r={filter:w(e)};return t.perform("getLogs",r).then(function(e){return a(A)(e)})})})})},t.prototype.getEtherPrice=function(){var e=this;return this.ready.then(function(){return e.perform("getEtherPrice",{}).then(function(e){return e})})},t.prototype._resolveNames=function(e,t){var r=[],n=properties.shallowCopy(e);return t.forEach(function(e){null!=n[e]&&r.push(this.resolveName(n[e]).then(function(t){n[e]=t}))},this),Promise.all(r).then(function(){return n})},t.prototype._getResolver=function(e){var t=this;return this.getNetwork().then(function(r){r.ensAddress||i.throwError("network does support ENS",i.UNSUPPORTED_OPERATION,{operation:"ENS",network:r.name});var n="0x0178b8bf"+hash.namehash(e).substring(2),o={to:r.ensAddress,data:n};return t.call(o).then(function(e){return 32!==bytes.hexDataLength(e)?null:address.getAddress(bytes.hexDataSlice(e,12))})})},t.prototype.resolveName=function(e){var t=this;if(e instanceof Promise)return e.then(function(e){return t.resolveName(e)});try{return Promise.resolve(address.getAddress(e))}catch(e){}var r=this,n=hash.namehash(e);return this._getResolver(e).then(function(e){var t={to:e,data:"0x3b3b57de"+n.substring(2)};return r.call(t)}).then(function(e){if(32!==bytes.hexDataLength(e))return null;var t=address.getAddress(bytes.hexDataSlice(e,12));return"0x0000000000000000000000000000000000000000"===t?null:t})},t.prototype.lookupAddress=function(e){var t=this;if(e instanceof Promise)return e.then(function(e){return t.lookupAddress(e)});var r=(e=address.getAddress(e)).substring(2)+".addr.reverse",n=hash.namehash(r),i=this;return this._getResolver(r).then(function(e){if(!e)return null;var t={to:e,data:"0x691f3431"+n.substring(2)};return i.call(t)}).then(function(t){if((t=t.substring(2)).length<64)return null;if((t=t.substring(64)).length<64)return null;var r=bignumber.bigNumberify("0x"+t.substring(0,64)).toNumber();if(2*r>(t=t.substring(64)).length)return null;var n=utf8.toUtf8String("0x"+t.substring(0,2*r));return i.resolveName(n).then(function(t){return t!=e?null:n})})},t.checkTransactionResponse=function(e){return h(e)},t.prototype.doPoll=function(){},t.prototype.perform=function(e,t){return i.throwError(e+" not implemented",i.NOT_IMPLEMENTED,{operation:e}),null},t.prototype._startPending=function(){i.warn("WARNING: this provider does not support pending events")},t.prototype._stopPending=function(){},t.prototype._addEventListener=function(e,t,r){this._events.push({tag:T(e),listener:t,once:r}),"pending"===e&&this._startPending(),this.polling=!0},t.prototype.on=function(e,t){return this._addEventListener(e,t,!1),this},t.prototype.once=function(e,t){return this._addEventListener(e,t,!0),this},t.prototype.addEventListener=function(e,t){return this.on(e,t)},t.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=!1,o=T(e);return this._events=this._events.filter(function(e){return e.tag!==o||(setTimeout(function(){e.listener.apply(t,r)},0),i=!0,!e.once)}),0===this.listenerCount()&&(this.polling=!1),i},t.prototype.listenerCount=function(e){if(!e)return this._events.length;var t=T(e);return this._events.filter(function(e){return e.tag===t}).length},t.prototype.listeners=function(e){var t=T(e);return this._events.filter(function(e){return e.tag===t}).map(function(e){return e.listener})},t.prototype.removeAllListeners=function(e){if(null==e)this._events=[],this._stopPending();else{var t=T(e);this._events=this._events.filter(function(e){return e.tag!==t}),"pending"===e&&this._stopPending()}return 0===this._events.length&&(this.polling=!1),this},t.prototype.removeListener=function(e,t){var r=!1,n=T(e);return this._events=this._events.filter(function(e){return e.tag!==n||e.listener!=t||(!!r||(r=!0,!1))}),"pending"===e&&0===this.listenerCount("pending")&&this._stopPending(),0===this.listenerCount()&&(this.polling=!1),this},t}(abstractProvider.Provider);t.BaseProvider=B,properties.defineReadOnly(abstractProvider.Provider,"inherits",properties.inheritable(abstractProvider.Provider))});unwrapExports(baseProvider);var baseProvider_1=baseProvider.BaseProvider,etherscanProvider=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(errors);function o(e){var t=[];for(var r in e)if(null!=e[r]){var n=bytes.hexlify(e[r]);({gasLimit:!0,gasPrice:!0,nonce:!0,value:!0})[r]&&(n=bytes.hexStripZeros(n)),t.push(r+"="+n)}return t.join("&")}function s(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"OK"!=e.message){var t=new Error("invalid response");throw t.result=JSON.stringify(e),t}return e.result}function a(e){if("2.0"!=e.jsonrpc)throw(t=new Error("invalid response")).result=JSON.stringify(e),t;if(e.error){var t=new Error(e.error.message||"unknown error");throw e.error.code&&(t.code=e.error.code),e.error.data&&(t.data=e.error.data),t}return e.result}function c(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}var u=function(e){function t(r,n){var o=e.call(this,r)||this;i.checkNew(o,t);var s="invalid";o.network&&(s=o.network.name);var a=null;switch(s){case"homestead":a="https://api.etherscan.io";break;case"ropsten":a="https://api-ropsten.etherscan.io";break;case"rinkeby":a="https://api-rinkeby.etherscan.io";break;case"kovan":a="https://api-kovan.etherscan.io";break;case"goerli":a="https://api-goerli.etherscan.io";break;default:throw new Error("unsupported network")}return properties.defineReadOnly(o,"baseUrl",a),properties.defineReadOnly(o,"apiKey",n),o}return r(t,e),t.prototype.perform=function(t,r){var n=this,u=this.baseUrl,f="";this.apiKey&&(f+="&apikey="+this.apiKey);var l=function(e,t){return web.fetchJson(e,null,t||a).then(function(t){return n.emit("debug",{action:"perform",request:e,response:t,provider:n}),t})};switch(t){case"getBlockNumber":return l(u+="/api?module=proxy&action=eth_blockNumber"+f);case"getGasPrice":return l(u+="/api?module=proxy&action=eth_gasPrice"+f);case"getBalance":return u+="/api?module=account&action=balance&address="+r.address,l(u+="&tag="+r.blockTag+f,s);case"getTransactionCount":return u+="/api?module=proxy&action=eth_getTransactionCount&address="+r.address,l(u+="&tag="+r.blockTag+f);case"getCode":return u+="/api?module=proxy&action=eth_getCode&address="+r.address,l(u+="&tag="+r.blockTag+f,a);case"getStorageAt":return u+="/api?module=proxy&action=eth_getStorageAt&address="+r.address,u+="&position="+r.position,l(u+="&tag="+r.blockTag+f,a);case"sendTransaction":return u+="/api?module=proxy&action=eth_sendRawTransaction&hex="+r.signedTransaction,l(u+=f).catch(function(e){throw e.responseText&&(e.responseText.toLowerCase().indexOf("insufficient funds")>=0&&i.throwError("insufficient funds",i.INSUFFICIENT_FUNDS,{}),e.responseText.indexOf("same hash was already imported")>=0&&i.throwError("nonce has already been used",i.NONCE_EXPIRED,{}),e.responseText.indexOf("another transaction with same nonce")>=0&&i.throwError("replacement fee too low",i.REPLACEMENT_UNDERPRICED,{})),e});case"getBlock":if(r.blockTag)return u+="/api?module=proxy&action=eth_getBlockByNumber&tag="+r.blockTag,r.includeTransactions?u+="&boolean=true":u+="&boolean=false",l(u+=f);throw new Error("getBlock by blockHash not implmeneted");case"getTransaction":return u+="/api?module=proxy&action=eth_getTransactionByHash&txhash="+r.transactionHash,l(u+=f);case"getTransactionReceipt":return u+="/api?module=proxy&action=eth_getTransactionReceipt&txhash="+r.transactionHash,l(u+=f);case"call":if((d=o(r.transaction))&&(d="&"+d),u+="/api?module=proxy&action=eth_call"+d,"latest"!==r.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");return l(u+=f);case"estimateGas":var d;return(d=o(r.transaction))&&(d="&"+d),u+="/api?module=proxy&action=eth_estimateGas&"+d,l(u+=f);case"getLogs":u+="/api?module=logs&action=getLogs";try{if(r.filter.fromBlock&&(u+="&fromBlock="+c(r.filter.fromBlock)),r.filter.toBlock&&(u+="&toBlock="+c(r.filter.toBlock)),r.filter.blockHash)try{i.throwError("Etherscan does not support blockHash filters",i.UNSUPPORTED_OPERATION,{operation:"getLogs(blockHash)"})}catch(e){return Promise.reject(e)}if(r.filter.address&&(u+="&address="+r.filter.address),r.filter.topics&&r.filter.topics.length>0){if(r.filter.topics.length>1)throw new Error("unsupported topic format");var h=r.filter.topics[0];if("string"!=typeof h||66!==h.length)throw new Error("unsupported topic0 format");u+="&topic0="+h}}catch(e){return Promise.reject(e)}var p=this;return l(u+=f,s).then(function(e){var t={},r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return null!=e.blockHash?null:(e.blockHash=t[e.transactionHash],null==e.blockHash?p.getTransaction(e.transactionHash).then(function(r){return t[e.transactionHash]=r.blockHash,e.blockHash=r.blockHash,null}):null)})}),r.then(function(){return e})});case"getEtherPrice":return"homestead"!==this.network.name?Promise.resolve(0):(u+="/api?module=stats&action=ethprice",l(u+=f,s).then(function(e){return parseFloat(e.ethusd)}))}return e.prototype.perform.call(this,t,r)},t.prototype.getHistory=function(e,t,r){var n=this,i=this.baseUrl,o="";return this.apiKey&&(o+="&apikey="+this.apiKey),null==t&&(t=0),null==r&&(r=99999999),this.resolveName(e).then(function(e){return i+="/api?module=account&action=txlist&address="+e,i+="&startblock="+t,i+="&endblock="+r,i+="&sort=asc"+o,web.fetchJson(i,null,s).then(function(e){n.emit("debug",{action:"getHistory",request:i,response:e,provider:n});var t=[];return e.forEach(function(e){["contractAddress","to"].forEach(function(t){""==e[t]&&delete e[t]}),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);var r=baseProvider.BaseProvider.checkTransactionResponse(e);e.timeStamp&&(r.timestamp=parseInt(e.timeStamp)),t.push(r)}),t})})},t}(baseProvider.BaseProvider);t.EtherscanProvider=u});unwrapExports(etherscanProvider);var etherscanProvider_1=etherscanProvider.EtherscanProvider,fallbackProvider=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(errors);function o(e){var t=!0,r=null;return e.forEach(function(n){null!=n?null!=r?r.name===n.name&&r.chainId===n.chainId&&(r.ensAddress===n.ensAddress||null==r.ensAddress&&null==n.ensAddress)||i.throwError("provider mismatch",i.INVALID_ARGUMENT,{arg:"networks",value:e}):r=n:t=!1}),t}var s=function(e){function t(r){var n=this;if(0===r.length)throw new Error("no providers");if(o(r.map(function(e){return e.network})))n=e.call(this,r[0].network)||this;else{var s=Promise.all(r.map(function(e){return e.getNetwork()})).then(function(e){return o(e)||i.throwError("getNetwork returned null",i.UNKNOWN_ERROR,{}),e[0]});n=e.call(this,s)||this}return i.checkNew(n,t),n._providers=r.slice(0),n}return r(t,e),Object.defineProperty(t.prototype,"providers",{get:function(){return this._providers.slice(0)},enumerable:!0,configurable:!0}),t.prototype.perform=function(e,t){var r=this.providers;return new Promise(function(n,i){var o=null;!function s(){r.length?r.shift().perform(e,t).then(function(e){return n(e)}).catch(function(e){o||(o=e),setTimeout(s,0)}):i(o)}()})},t}(baseProvider.BaseProvider);t.FallbackProvider=s});unwrapExports(fallbackProvider);var fallbackProvider_1=fallbackProvider.FallbackProvider,jsonRpcProvider=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(errors);function o(e){if(e.error){var t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function s(e){return e?e.toLowerCase():e}var a={},c=function(e){function t(r,n,o){var s=e.call(this)||this;if(i.checkNew(s,t),r!==a)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return properties.defineReadOnly(s,"provider",n),o?"string"==typeof o?properties.defineReadOnly(s,"_address",address.getAddress(o)):"number"==typeof o?properties.defineReadOnly(s,"_index",o):i.throwError("invalid address or index",i.INVALID_ARGUMENT,{argument:"addressOrIndex",value:o}):properties.defineReadOnly(s,"_index",0),s}return r(t,e),t.prototype.getAddress=function(){var e=this;return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(function(t){return t.length<=e._index&&i.throwError("unknown account #"+e._index,i.UNSUPPORTED_OPERATION,{operation:"getAddress"}),e._address=address.getAddress(t[e._index]),e._address})},t.prototype.getBalance=function(e){return this.provider.getBalance(this.getAddress(),e)},t.prototype.getTransactionCount=function(e){return this.provider.getTransactionCount(this.getAddress(),e)},t.prototype.sendUncheckedTransaction=function(e){var t=this;e=properties.shallowCopy(e);var r=this.getAddress().then(function(e){return e&&(e=e.toLowerCase()),e});if(null==e.gasLimit){var n=properties.shallowCopy(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return Promise.all([properties.resolveProperties(e),r]).then(function(e){var r=e[0],n=f.hexlifyTransaction(r);return n.from=e[1],t.provider.send("eth_sendTransaction",[n]).then(function(e){return e},function(e){throw e.responseText&&(e.responseText.indexOf("insufficient funds")>=0&&i.throwError("insufficient funds",i.INSUFFICIENT_FUNDS,{transaction:r}),e.responseText.indexOf("nonce too low")>=0&&i.throwError("nonce has already been used",i.NONCE_EXPIRED,{transaction:r}),e.responseText.indexOf("replacement transaction underpriced")>=0&&i.throwError("replacement fee too low",i.REPLACEMENT_UNDERPRICED,{transaction:r})),e})})},t.prototype.sendTransaction=function(e){var t=this;return this.sendUncheckedTransaction(e).then(function(e){return web.poll(function(){return t.provider.getTransaction(e).then(function(r){if(null!==r)return t.provider._wrapTransaction(r,e)})},{fastRetry:250,onceBlock:t.provider}).catch(function(t){throw t.transactionHash=e,t})})},t.prototype.signMessage=function(e){var t=this,r="string"==typeof e?utf8.toUtf8Bytes(e):e;return this.getAddress().then(function(e){return t.provider.send("eth_sign",[e.toLowerCase(),bytes.hexlify(r)])})},t.prototype.unlock=function(e){var t=this.provider;return this.getAddress().then(function(r){return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})},t}(abstractSigner.Signer);t.JsonRpcSigner=c;var u={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0},f=function(e){function t(r,n){var o=this;if("string"==typeof r&&null===n&&networks_1.getNetwork(r)&&(n=r,r=null),n)o=e.call(this,n)||this;else{var s=new Promise(function(e,t){setTimeout(function(){o.send("net_version",[]).then(function(t){return e(networks_1.getNetwork(parseInt(t)))}).catch(function(e){t(e)})})});o=e.call(this,s)||this}return i.checkNew(o,t),r||(r="http://localhost:8545"),o.connection="string"==typeof r?{url:r}:r,o}return r(t,e),t.prototype.getSigner=function(e){return new c(a,this,e)},t.prototype.listAccounts=function(){return this.send("eth_accounts",[]).then(function(e){return e.map(function(e){return address.getAddress(e)})})},t.prototype.send=function(e,t){var r=this,n={method:e,params:t,id:42,jsonrpc:"2.0"};return web.fetchJson(this.connection,JSON.stringify(n),o).then(function(e){return r.emit("debug",{action:"send",request:n,response:e,provider:r}),e})},t.prototype.perform=function(e,r){switch(e){case"getBlockNumber":return this.send("eth_blockNumber",[]);case"getGasPrice":return this.send("eth_gasPrice",[]);case"getBalance":return this.send("eth_getBalance",[s(r.address),r.blockTag]);case"getTransactionCount":return this.send("eth_getTransactionCount",[s(r.address),r.blockTag]);case"getCode":return this.send("eth_getCode",[s(r.address),r.blockTag]);case"getStorageAt":return this.send("eth_getStorageAt",[s(r.address),r.position,r.blockTag]);case"sendTransaction":return this.send("eth_sendRawTransaction",[r.signedTransaction]).catch(function(e){throw e.responseText&&(e.responseText.indexOf("insufficient funds")>0&&i.throwError("insufficient funds",i.INSUFFICIENT_FUNDS,{}),e.responseText.indexOf("nonce too low")>0&&i.throwError("nonce has already been used",i.NONCE_EXPIRED,{}),e.responseText.indexOf("replacement transaction underpriced")>0&&i.throwError("replacement fee too low",i.REPLACEMENT_UNDERPRICED,{})),e});case"getBlock":return r.blockTag?this.send("eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]):r.blockHash?this.send("eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]):Promise.reject(new Error("invalid block tag or block hash"));case"getTransaction":return this.send("eth_getTransactionByHash",[r.transactionHash]);case"getTransactionReceipt":return this.send("eth_getTransactionReceipt",[r.transactionHash]);case"call":return this.send("eth_call",[t.hexlifyTransaction(r.transaction,{from:!0}),r.blockTag]);case"estimateGas":return this.send("eth_estimateGas",[t.hexlifyTransaction(r.transaction,{from:!0})]);case"getLogs":return r.filter&&null!=r.filter.address&&(r.filter.address=s(r.filter.address)),this.send("eth_getLogs",[r.filter])}return i.throwError(e+" not implemented",i.NOT_IMPLEMENTED,{operation:e}),null},t.prototype._startPending=function(){if(null==this._pendingFilter){var e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){return function n(){e.send("eth_getFilterChanges",[r]).then(function(r){if(e._pendingFilter!=t)return null;var n=Promise.resolve();return r.forEach(function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then(function(){return e.getTransaction(t).then(function(t){return e.emit("pending",t),null})})}),n.then(function(){return function(e){return new Promise(function(t){setTimeout(function(){t()},e)})}(1e3)})}).then(function(){if(e._pendingFilter==t)return setTimeout(function(){n()},0),null;e.send("eth_uninstallFilter",[r])}).catch(function(e){})}(),r}).catch(function(e){})}},t.prototype._stopPending=function(){this._pendingFilter=null},t.hexlifyTransaction=function(e,t){var r=properties.shallowCopy(u);if(t)for(var n in t)t[n]&&(r[n]=!0);properties.checkProperties(e,r);var i={};return["gasLimit","gasPrice","nonce","value"].forEach(function(t){if(null!=e[t]){var r=bytes.hexStripZeros(bytes.hexlify(e[t]));"gasLimit"===t&&(t="gas"),i[t]=r}}),["from","to","data"].forEach(function(t){null!=e[t]&&(i[t]=bytes.hexlify(e[t]))}),i},t}(baseProvider.BaseProvider);t.JsonRpcProvider=f});unwrapExports(jsonRpcProvider);var jsonRpcProvider_1=jsonRpcProvider.JsonRpcSigner,jsonRpcProvider_2=jsonRpcProvider.JsonRpcProvider,ipcProvider=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(net),s=i(errors),a=function(e){function t(r,n){var i;return null==r&&s.throwError("missing path",s.MISSING_ARGUMENT,{argument:"path"}),i=e.call(this,"ipc://"+r,n)||this,s.checkNew(i,t),properties.defineReadOnly(i,"path",r),i}return r(t,e),t.prototype.send=function(e,t){var r=this,n=JSON.stringify({method:e,params:t,id:42,jsonrpc:"2.0"});return new Promise(function(e,t){var i=Buffer.alloc(0),s=o.default.connect(r.path);s.on("data",function(e){i=Buffer.concat([i,e])}),s.on("end",function(){try{e(JSON.parse(i.toString("utf8")).result),s.destroy()}catch(e){t(e),s.destroy()}}),s.on("error",function(e){t(e),s.destroy()}),s.write(n),s.end()})},t}(jsonRpcProvider.JsonRpcProvider);t.IpcProvider=a});unwrapExports(ipcProvider);var ipcProvider_1=ipcProvider.IpcProvider,infuraProvider=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(errors),o="7d0d81d0919f4f05b9ab6634be01ee73",s=function(e){function t(r,n){var s=this,a=networks_1.getNetwork(null==r?"homestead":r);null==n&&(n=o);var c=null;switch(a.name){case"homestead":c="mainnet.infura.io";break;case"ropsten":c="ropsten.infura.io";break;case"rinkeby":c="rinkeby.infura.io";break;case"goerli":c="goerli.infura.io";break;case"kovan":c="kovan.infura.io";break;default:i.throwError("unsupported network",i.INVALID_ARGUMENT,{argument:"network",value:r})}return bytes.isHexString("0x"+n,16)?(s=e.call(this,"https://"+c+"/v3/"+n,a)||this,properties.defineReadOnly(s,"apiAccessToken",null),properties.defineReadOnly(s,"projectId",n)):(s=e.call(this,"https://"+c+"/"+n,a)||this,properties.defineReadOnly(s,"apiAccessToken",n),properties.defineReadOnly(s,"projectId",null)),i.checkNew(s,t),s}return r(t,e),t.prototype._startPending=function(){i.warn("WARNING: INFURA does not support pending filters")},t.prototype.getSigner=function(e){return i.throwError("INFURA does not support signing",i.UNSUPPORTED_OPERATION,{operation:"getSigner"})},t.prototype.listAccounts=function(){return Promise.resolve([])},t}(jsonRpcProvider.JsonRpcProvider);t.InfuraProvider=s});unwrapExports(infuraProvider);var infuraProvider_1=infuraProvider.InfuraProvider,web3Provider=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(errors),o=function(e){function t(r,n){var o=e.call(this,r.host||r.path||"",n)||this;return i.checkNew(o,t),r&&(r.sendAsync?o._sendAsync=r.sendAsync.bind(r):r.send&&(o._sendAsync=r.send.bind(r))),r&&o._sendAsync||i.throwError("invalid web3Provider",i.INVALID_ARGUMENT,{arg:"web3Provider",value:r}),properties.defineReadOnly(o,"_web3Provider",r),o}return r(t,e),t.prototype.send=function(e,t){var r=this;return"eth_sign"==e&&this._web3Provider.isMetaMask&&(e="personal_sign",t=[t[1],t[0]]),new Promise(function(n,i){var o={method:e,params:t,id:42,jsonrpc:"2.0"};r._sendAsync(o,function(e,t){if(e)i(e);else{if(t.error)return(e=new Error(t.error.message)).code=t.error.code,e.data=t.error.data,void i(e);n(t.result)}})})},t}(jsonRpcProvider.JsonRpcProvider);t.Web3Provider=o});unwrapExports(web3Provider);var web3Provider_1=web3Provider.Web3Provider,providers=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=abstractProvider.Provider,t.BaseProvider=baseProvider.BaseProvider,t.EtherscanProvider=etherscanProvider.EtherscanProvider,t.FallbackProvider=fallbackProvider.FallbackProvider,t.IpcProvider=ipcProvider.IpcProvider,t.InfuraProvider=infuraProvider.InfuraProvider,t.JsonRpcProvider=jsonRpcProvider.JsonRpcProvider,t.JsonRpcSigner=jsonRpcProvider.JsonRpcSigner,t.Web3Provider=web3Provider.Web3Provider});unwrapExports(providers);var providers_1=providers.Provider,providers_2=providers.BaseProvider,providers_3=providers.EtherscanProvider,providers_4=providers.FallbackProvider,providers_5=providers.IpcProvider,providers_6=providers.InfuraProvider,providers_7=providers.JsonRpcProvider,providers_8=providers.JsonRpcSigner,providers_9=providers.Web3Provider,solidity=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=new RegExp("^bytes([0-9]+)$"),n=new RegExp("^(u?int)([0-9]*)$"),i=new RegExp("^(.*)\\[([0-9]*)\\]$"),o="0000000000000000000000000000000000000000000000000000000000000000";function s(e,t){if(e.length!=t.length)throw new Error("type/value count mismatch");var s=[];return e.forEach(function(e,a){s.push(function e(t,s,a){switch(t){case"address":return a?bytes.padZeros(s,32):bytes.arrayify(s);case"string":return utf8.toUtf8Bytes(s);case"bytes":return bytes.arrayify(s);case"bool":return s=s?"0x01":"0x00",a?bytes.padZeros(s,32):bytes.arrayify(s)}var c=t.match(n);if(c){if((u=parseInt(c[2]||"256"))%8!=0||0===u||u>256)throw new Error("invalid number type - "+t);return a&&(u=256),s=bignumber.bigNumberify(s).toTwos(u),bytes.padZeros(s,u/8)}if(c=t.match(r)){var u=parseInt(c[1]);if(String(u)!=c[1]||0===u||u>32)throw new Error("invalid number type - "+t);if(bytes.arrayify(s).byteLength!==u)throw new Error("invalid value for "+t);return a?bytes.arrayify((s+o).substring(0,66)):s}if((c=t.match(i))&&Array.isArray(s)){var f=c[1];if(parseInt(c[2]||String(s.length))!=s.length)throw new Error("invalid value for "+t);var l=[];return s.forEach(function(t){l.push(e(f,t,!0))}),bytes.concat(l)}throw new Error("unknown type - "+t)}(e,t[a]))}),bytes.hexlify(bytes.concat(s))}t.pack=s,t.keccak256=function(e,t){return keccak256_1.keccak256(s(e,t))},t.sha256=function(e,t){return sha2.sha256(s(e,t))}});unwrapExports(solidity);var solidity_1=solidity.pack,solidity_2=solidity.keccak256,solidity_3=solidity.sha256,units=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(errors),o={};function s(e){return{decimals:e.length-1,tenPower:bignumber.bigNumberify(e)}}function a(e){var t=o[String(e).toLowerCase()];if(!t&&"number"==typeof e&&parseInt(String(e))==e&&e>=0&&e<=256){for(var r="1",n=0;n<e;n++)r+="0";t=s(r)}return t||i.throwError("invalid unitType",i.INVALID_ARGUMENT,{argument:"name",value:e}),t}function c(e,t){var r=a(t),n=(e=bignumber.bigNumberify(e)).lt(constants$5.Zero);n&&(e=e.mul(constants$5.NegativeOne));for(var i=e.mod(r.tenPower).toString();i.length<r.decimals;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];var o=e.div(r.tenPower).toString();return e=o+"."+i,n&&(e="-"+e),e}function u(e,t){null==t&&(t=18);var r=a(t);if("string"==typeof e&&e.match(/^-?[0-9.,]+$/)||i.throwError("invalid decimal value",i.INVALID_ARGUMENT,{arg:"value",value:e}),0===r.decimals)return bignumber.bigNumberify(e);var n="-"===e.substring(0,1);n&&(e=e.substring(1)),"."===e&&i.throwError("missing value",i.INVALID_ARGUMENT,{arg:"value",value:e});var o=e.split(".");o.length>2&&i.throwError("too many decimal points",i.INVALID_ARGUMENT,{arg:"value",value:e});var s=o[0],c=o[1];for(s||(s="0"),c||(c="0"),c.length>r.decimals&&i.throwError("underflow occurred",i.NUMERIC_FAULT,{operation:"division",fault:"underflow"});c.length<r.decimals;)c+="0";var u=bignumber.bigNumberify(s),f=bignumber.bigNumberify(c),l=u.mul(r.tenPower).add(f);return n&&(l=l.mul(constants$5.NegativeOne)),l}n="1",["wei","kwei","Mwei","Gwei","szabo","finney","ether"].forEach(function(e){var t=s(n);o[e.toLowerCase()]=t,o[String(t.decimals)]=t,n+="000"}),t.commify=function(e){var t=String(e).split(".");(t.length>2||!t[0].match(/^-?[0-9]*$/)||t[1]&&!t[1].match(/^[0-9]*$/)||"."===e||"-."===e)&&i.throwError("invalid value",i.INVALID_ARGUMENT,{argument:"value",value:e});var r=t[0],n="";for("-"===r.substring(0,1)&&(n="-",r=r.substring(1));"0"===r.substring(0,1);)r=r.substring(1);""===r&&(r="0");var o="";2===t.length&&(o="."+(t[1]||"0"));for(var s=[];r.length;){if(r.length<=3){s.unshift(r);break}var a=r.length-3;s.unshift(r.substring(a)),r=r.substring(0,a)}return n+s.join(",")+o},t.formatUnits=c,t.parseUnits=u,t.formatEther=function(e){return c(e,18)},t.parseEther=function(e){return u(e,18)}});unwrapExports(units);var units_1=units.commify,units_2=units.formatUnits,units_3=units.parseUnits,units_4=units.formatEther,units_5=units.parseEther,utils$j=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0}),t.AbiCoder=abiCoder.AbiCoder,t.defaultAbiCoder=abiCoder.defaultAbiCoder,t.formatSignature=abiCoder.formatSignature,t.formatParamType=abiCoder.formatParamType,t.parseSignature=abiCoder.parseSignature,t.parseParamType=abiCoder.parseParamType,t.getAddress=address.getAddress,t.getContractAddress=address.getContractAddress,t.getIcapAddress=address.getIcapAddress;var n=r(base64$1);t.base64=n,t.BigNumber=bignumber.BigNumber,t.bigNumberify=bignumber.bigNumberify,t.arrayify=bytes.arrayify,t.concat=bytes.concat,t.hexDataSlice=bytes.hexDataSlice,t.hexDataLength=bytes.hexDataLength,t.hexlify=bytes.hexlify,t.hexStripZeros=bytes.hexStripZeros,t.hexZeroPad=bytes.hexZeroPad,t.isHexString=bytes.isHexString,t.joinSignature=bytes.joinSignature,t.padZeros=bytes.padZeros,t.splitSignature=bytes.splitSignature,t.stripZeros=bytes.stripZeros,t.hashMessage=hash.hashMessage,t.id=hash.id,t.namehash=hash.namehash;var i=r(hdnode);t.HDNode=i,t.Interface=_interface.Interface,t.getJsonWalletAddress=jsonWallet.getJsonWalletAddress,t.keccak256=keccak256_1.keccak256,t.sha256=sha2.sha256,t.solidityKeccak256=solidity.keccak256,t.solidityPack=solidity.pack,t.soliditySha256=solidity.sha256,t.randomBytes=randomBytes_1.randomBytes,t.getNetwork=networks_1.getNetwork,t.checkProperties=properties.checkProperties,t.deepCopy=properties.deepCopy,t.defineReadOnly=properties.defineReadOnly,t.resolveProperties=properties.resolveProperties,t.shallowCopy=properties.shallowCopy;var o=r(rlp);t.RLP=o,t.computeAddress=secp256k1$3.computeAddress,t.computePublicKey=secp256k1$3.computePublicKey,t.recoverAddress=secp256k1$3.recoverAddress,t.recoverPublicKey=secp256k1$3.recoverPublicKey,t.verifyMessage=secp256k1$3.verifyMessage,t.SigningKey=signingKey.SigningKey,t.populateTransaction=transaction.populateTransaction;var s=transaction;t.parseTransaction=s.parse,t.serializeTransaction=s.serialize,t.formatBytes32String=utf8.formatBytes32String,t.parseBytes32String=utf8.parseBytes32String,t.toUtf8Bytes=utf8.toUtf8Bytes,t.toUtf8String=utf8.toUtf8String,t.commify=units.commify,t.formatEther=units.formatEther,t.parseEther=units.parseEther,t.formatUnits=units.formatUnits,t.parseUnits=units.parseUnits,t.fetchJson=web.fetchJson,t.SupportedAlgorithms=hmac$1.SupportedAlgorithms;var a=utf8;t.UnicodeNormalizationForm=a.UnicodeNormalizationForm,t.Wordlist=wordlist.Wordlist});unwrapExports(utils$j);var utils_1$3=utils$j.AbiCoder,utils_2=utils$j.defaultAbiCoder,utils_3=utils$j.formatSignature,utils_4=utils$j.formatParamType,utils_5=utils$j.parseSignature,utils_6=utils$j.parseParamType,utils_7=utils$j.getAddress,utils_8=utils$j.getContractAddress,utils_9=utils$j.getIcapAddress,utils_10=utils$j.base64,utils_11=utils$j.BigNumber,utils_12=utils$j.bigNumberify,utils_13=utils$j.arrayify,utils_14=utils$j.concat,utils_15=utils$j.hexDataSlice,utils_16=utils$j.hexDataLength,utils_17=utils$j.hexlify,utils_18=utils$j.hexStripZeros,utils_19=utils$j.hexZeroPad,utils_20=utils$j.isHexString,utils_21=utils$j.joinSignature,utils_22=utils$j.padZeros,utils_23=utils$j.splitSignature,utils_24=utils$j.stripZeros,utils_25=utils$j.hashMessage,utils_26=utils$j.id,utils_27=utils$j.namehash,utils_28=utils$j.HDNode,utils_29=utils$j.Interface,utils_30=utils$j.getJsonWalletAddress,utils_31=utils$j.keccak256,utils_32=utils$j.sha256,utils_33=utils$j.solidityKeccak256,utils_34=utils$j.solidityPack,utils_35=utils$j.soliditySha256,utils_36=utils$j.randomBytes,utils_37=utils$j.getNetwork,utils_38=utils$j.checkProperties,utils_39=utils$j.deepCopy,utils_40=utils$j.defineReadOnly,utils_41=utils$j.resolveProperties,utils_42=utils$j.shallowCopy,utils_43=utils$j.RLP,utils_44=utils$j.computeAddress,utils_45=utils$j.computePublicKey,utils_46=utils$j.recoverAddress,utils_47=utils$j.recoverPublicKey,utils_48=utils$j.verifyMessage,utils_49=utils$j.SigningKey,utils_50=utils$j.populateTransaction,utils_51=utils$j.parseTransaction,utils_52=utils$j.serializeTransaction,utils_53=utils$j.formatBytes32String,utils_54=utils$j.parseBytes32String,utils_55=utils$j.toUtf8Bytes,utils_56=utils$j.toUtf8String,utils_57=utils$j.commify,utils_58=utils$j.formatEther,utils_59=utils$j.parseEther,utils_60=utils$j.formatUnits,utils_61=utils$j.parseUnits,utils_62=utils$j.fetchJson,utils_63=utils$j.SupportedAlgorithms,utils_64=utils$j.UnicodeNormalizationForm,utils_65=utils$j.Wordlist,langEs_1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var n="A/bacoAbdomenAbejaAbiertoAbogadoAbonoAbortoAbrazoAbrirAbueloAbusoAcabarAcademiaAccesoAccio/nAceiteAcelgaAcentoAceptarA/cidoAclararAcne/AcogerAcosoActivoActoActrizActuarAcudirAcuerdoAcusarAdictoAdmitirAdoptarAdornoAduanaAdultoAe/reoAfectarAficio/nAfinarAfirmarA/gilAgitarAgoni/aAgostoAgotarAgregarAgrioAguaAgudoA/guilaAgujaAhogoAhorroAireAislarAjedrezAjenoAjusteAlacra/nAlambreAlarmaAlbaA/lbumAlcaldeAldeaAlegreAlejarAlertaAletaAlfilerAlgaAlgodo/nAliadoAlientoAlivioAlmaAlmejaAlmi/barAltarAltezaAltivoAltoAlturaAlumnoAlzarAmableAmanteAmapolaAmargoAmasarA/mbarA/mbitoAmenoAmigoAmistadAmorAmparoAmplioAnchoAncianoAnclaAndarAnde/nAnemiaA/nguloAnilloA/nimoAni/sAnotarAntenaAntiguoAntojoAnualAnularAnuncioA~adirA~ejoA~oApagarAparatoApetitoApioAplicarApodoAporteApoyoAprenderAprobarApuestaApuroAradoAra~aArarA/rbitroA/rbolArbustoArchivoArcoArderArdillaArduoA/reaA/ridoAriesArmoni/aArne/sAromaArpaArpo/nArregloArrozArrugaArteArtistaAsaAsadoAsaltoAscensoAsegurarAseoAsesorAsientoAsiloAsistirAsnoAsombroA/speroAstillaAstroAstutoAsumirAsuntoAtajoAtaqueAtarAtentoAteoA/ticoAtletaA/tomoAtraerAtrozAtu/nAudazAudioAugeAulaAumentoAusenteAutorAvalAvanceAvaroAveAvellanaAvenaAvestruzAvio/nAvisoAyerAyudaAyunoAzafra/nAzarAzoteAzu/carAzufreAzulBabaBaborBacheBahi/aBaileBajarBalanzaBalco/nBaldeBambu/BancoBandaBa~oBarbaBarcoBarnizBarroBa/sculaBasto/nBasuraBatallaBateri/aBatirBatutaBau/lBazarBebe/BebidaBelloBesarBesoBestiaBichoBienBingoBlancoBloqueBlusaBoaBobinaBoboBocaBocinaBodaBodegaBoinaBolaBoleroBolsaBombaBondadBonitoBonoBonsa/iBordeBorrarBosqueBoteBoti/nBo/vedaBozalBravoBrazoBrechaBreveBrilloBrincoBrisaBrocaBromaBronceBroteBrujaBruscoBrutoBuceoBucleBuenoBueyBufandaBufo/nBu/hoBuitreBultoBurbujaBurlaBurroBuscarButacaBuzo/nCaballoCabezaCabinaCabraCacaoCada/verCadenaCaerCafe/Cai/daCaima/nCajaCajo/nCalCalamarCalcioCaldoCalidadCalleCalmaCalorCalvoCamaCambioCamelloCaminoCampoCa/ncerCandilCanelaCanguroCanicaCantoCa~aCa~o/nCaobaCaosCapazCapita/nCapoteCaptarCapuchaCaraCarbo/nCa/rcelCaretaCargaCari~oCarneCarpetaCarroCartaCasaCascoCaseroCaspaCastorCatorceCatreCaudalCausaCazoCebollaCederCedroCeldaCe/lebreCelosoCe/lulaCementoCenizaCentroCercaCerdoCerezaCeroCerrarCertezaCe/spedCetroChacalChalecoChampu/ChanclaChapaCharlaChicoChisteChivoChoqueChozaChuletaChuparCiclo/nCiegoCieloCienCiertoCifraCigarroCimaCincoCineCintaCipre/sCircoCiruelaCisneCitaCiudadClamorClanClaroClaseClaveClienteClimaCli/nicaCobreCoccio/nCochinoCocinaCocoCo/digoCodoCofreCogerCoheteCoji/nCojoColaColchaColegioColgarColinaCollarColmoColumnaCombateComerComidaCo/modoCompraCondeConejoCongaConocerConsejoContarCopaCopiaCorazo/nCorbataCorchoCordo/nCoronaCorrerCoserCosmosCostaCra/neoCra/terCrearCrecerCrei/doCremaCri/aCrimenCriptaCrisisCromoCro/nicaCroquetaCrudoCruzCuadroCuartoCuatroCuboCubrirCucharaCuelloCuentoCuerdaCuestaCuevaCuidarCulebraCulpaCultoCumbreCumplirCunaCunetaCuotaCupo/nCu/pulaCurarCuriosoCursoCurvaCutisDamaDanzaDarDardoDa/tilDeberDe/bilDe/cadaDecirDedoDefensaDefinirDejarDelfi/nDelgadoDelitoDemoraDensoDentalDeporteDerechoDerrotaDesayunoDeseoDesfileDesnudoDestinoDesvi/oDetalleDetenerDeudaDi/aDiabloDiademaDiamanteDianaDiarioDibujoDictarDienteDietaDiezDifi/cilDignoDilemaDiluirDineroDirectoDirigirDiscoDise~oDisfrazDivaDivinoDobleDoceDolorDomingoDonDonarDoradoDormirDorsoDosDosisDrago/nDrogaDuchaDudaDueloDue~oDulceDu/oDuqueDurarDurezaDuroE/banoEbrioEcharEcoEcuadorEdadEdicio/nEdificioEditorEducarEfectoEficazEjeEjemploElefanteElegirElementoElevarElipseE/liteElixirElogioEludirEmbudoEmitirEmocio/nEmpateEmpe~oEmpleoEmpresaEnanoEncargoEnchufeEnci/aEnemigoEneroEnfadoEnfermoEnga~oEnigmaEnlaceEnormeEnredoEnsayoEnse~arEnteroEntrarEnvaseEnvi/oE/pocaEquipoErizoEscalaEscenaEscolarEscribirEscudoEsenciaEsferaEsfuerzoEspadaEspejoEspi/aEsposaEspumaEsqui/EstarEsteEstiloEstufaEtapaEternoE/ticaEtniaEvadirEvaluarEventoEvitarExactoExamenExcesoExcusaExentoExigirExilioExistirE/xitoExpertoExplicarExponerExtremoFa/bricaFa/bulaFachadaFa/cilFactorFaenaFajaFaldaFalloFalsoFaltarFamaFamiliaFamosoFarao/nFarmaciaFarolFarsaFaseFatigaFaunaFavorFaxFebreroFechaFelizFeoFeriaFerozFe/rtilFervorFesti/nFiableFianzaFiarFibraFiccio/nFichaFideoFiebreFielFieraFiestaFiguraFijarFijoFilaFileteFilialFiltroFinFincaFingirFinitoFirmaFlacoFlautaFlechaFlorFlotaFluirFlujoFlu/orFobiaFocaFogataFogo/nFolioFolletoFondoFormaForroFortunaForzarFosaFotoFracasoFra/gilFranjaFraseFraudeFrei/rFrenoFresaFri/oFritoFrutaFuegoFuenteFuerzaFugaFumarFuncio/nFundaFurgo/nFuriaFusilFu/tbolFuturoGacelaGafasGaitaGajoGalaGaleri/aGalloGambaGanarGanchoGangaGansoGarajeGarzaGasolinaGastarGatoGavila/nGemeloGemirGenGe/neroGenioGenteGeranioGerenteGermenGestoGiganteGimnasioGirarGiroGlaciarGloboGloriaGolGolfoGolosoGolpeGomaGordoGorilaGorraGotaGoteoGozarGradaGra/ficoGranoGrasaGratisGraveGrietaGrilloGripeGrisGritoGrosorGru/aGruesoGrumoGrupoGuanteGuapoGuardiaGuerraGui/aGui~oGuionGuisoGuitarraGusanoGustarHaberHa/bilHablarHacerHachaHadaHallarHamacaHarinaHazHaza~aHebillaHebraHechoHeladoHelioHembraHerirHermanoHe/roeHervirHieloHierroHi/gadoHigieneHijoHimnoHistoriaHocicoHogarHogueraHojaHombreHongoHonorHonraHoraHormigaHornoHostilHoyoHuecoHuelgaHuertaHuesoHuevoHuidaHuirHumanoHu/medoHumildeHumoHundirHuraca/nHurtoIconoIdealIdiomaI/doloIglesiaIglu/IgualIlegalIlusio/nImagenIma/nImitarImparImperioImponerImpulsoIncapazI/ndiceInerteInfielInformeIngenioInicioInmensoInmuneInnatoInsectoInstanteIntere/sI/ntimoIntuirInu/tilInviernoIraIrisIroni/aIslaIsloteJabali/Jabo/nJamo/nJarabeJardi/nJarraJaulaJazmi/nJefeJeringaJineteJornadaJorobaJovenJoyaJuergaJuevesJuezJugadorJugoJugueteJuicioJuncoJunglaJunioJuntarJu/piterJurarJustoJuvenilJuzgarKiloKoalaLabioLacioLacraLadoLadro/nLagartoLa/grimaLagunaLaicoLamerLa/minaLa/mparaLanaLanchaLangostaLanzaLa/pizLargoLarvaLa/stimaLataLa/texLatirLaurelLavarLazoLealLeccio/nLecheLectorLeerLegio/nLegumbreLejanoLenguaLentoLe~aLeo/nLeopardoLesio/nLetalLetraLeveLeyendaLibertadLibroLicorLi/derLidiarLienzoLigaLigeroLimaLi/miteLimo/nLimpioLinceLindoLi/neaLingoteLinoLinternaLi/quidoLisoListaLiteraLitioLitroLlagaLlamaLlantoLlaveLlegarLlenarLlevarLlorarLloverLluviaLoboLocio/nLocoLocuraLo/gicaLogroLombrizLomoLonjaLoteLuchaLucirLugarLujoLunaLunesLupaLustroLutoLuzMacetaMachoMaderaMadreMaduroMaestroMafiaMagiaMagoMai/zMaldadMaletaMallaMaloMama/MamboMamutMancoMandoManejarMangaManiqui/ManjarManoMansoMantaMa~anaMapaMa/quinaMarMarcoMareaMarfilMargenMaridoMa/rmolMarro/nMartesMarzoMasaMa/scaraMasivoMatarMateriaMatizMatrizMa/ximoMayorMazorcaMechaMedallaMedioMe/dulaMejillaMejorMelenaMelo/nMemoriaMenorMensajeMenteMenu/MercadoMerengueMe/ritoMesMeso/nMetaMeterMe/todoMetroMezclaMiedoMielMiembroMigaMilMilagroMilitarMillo/nMimoMinaMineroMi/nimoMinutoMiopeMirarMisaMiseriaMisilMismoMitadMitoMochilaMocio/nModaModeloMohoMojarMoldeMolerMolinoMomentoMomiaMonarcaMonedaMonjaMontoMo~oMoradaMorderMorenoMorirMorroMorsaMortalMoscaMostrarMotivoMoverMo/vilMozoMuchoMudarMuebleMuelaMuerteMuestraMugreMujerMulaMuletaMultaMundoMu~ecaMuralMuroMu/sculoMuseoMusgoMu/sicaMusloNa/carNacio/nNadarNaipeNaranjaNarizNarrarNasalNatalNativoNaturalNa/useaNavalNaveNavidadNecioNe/ctarNegarNegocioNegroNeo/nNervioNetoNeutroNevarNeveraNichoNidoNieblaNietoNi~ezNi~oNi/tidoNivelNoblezaNocheNo/minaNoriaNormaNorteNotaNoticiaNovatoNovelaNovioNubeNucaNu/cleoNudilloNudoNueraNueveNuezNuloNu/meroNutriaOasisObesoObispoObjetoObraObreroObservarObtenerObvioOcaOcasoOce/anoOchentaOchoOcioOcreOctavoOctubreOcultoOcuparOcurrirOdiarOdioOdiseaOesteOfensaOfertaOficioOfrecerOgroOi/doOi/rOjoOlaOleadaOlfatoOlivoOllaOlmoOlorOlvidoOmbligoOndaOnzaOpacoOpcio/nO/peraOpinarOponerOptarO/pticaOpuestoOracio/nOradorOralO/rbitaOrcaOrdenOrejaO/rganoOrgi/aOrgulloOrienteOrigenOrillaOroOrquestaOrugaOsadi/aOscuroOseznoOsoOstraOto~oOtroOvejaO/vuloO/xidoOxi/genoOyenteOzonoPactoPadrePaellaPa/ginaPagoPai/sPa/jaroPalabraPalcoPaletaPa/lidoPalmaPalomaPalparPanPanalPa/nicoPanteraPa~ueloPapa/PapelPapillaPaquetePararParcelaParedParirParoPa/rpadoParquePa/rrafoPartePasarPaseoPasio/nPasoPastaPataPatioPatriaPausaPautaPavoPayasoPeato/nPecadoPeceraPechoPedalPedirPegarPeinePelarPelda~oPeleaPeligroPellejoPeloPelucaPenaPensarPe~o/nPeo/nPeorPepinoPeque~oPeraPerchaPerderPerezaPerfilPericoPerlaPermisoPerroPersonaPesaPescaPe/simoPesta~aPe/taloPetro/leoPezPezu~aPicarPicho/nPiePiedraPiernaPiezaPijamaPilarPilotoPimientaPinoPintorPinzaPi~aPiojoPipaPirataPisarPiscinaPisoPistaPito/nPizcaPlacaPlanPlataPlayaPlazaPleitoPlenoPlomoPlumaPluralPobrePocoPoderPodioPoemaPoesi/aPoetaPolenPolici/aPolloPolvoPomadaPomeloPomoPompaPonerPorcio/nPortalPosadaPoseerPosiblePostePotenciaPotroPozoPradoPrecozPreguntaPremioPrensaPresoPrevioPrimoPri/ncipePrisio/nPrivarProaProbarProcesoProductoProezaProfesorProgramaProlePromesaProntoPropioPro/ximoPruebaPu/blicoPucheroPudorPuebloPuertaPuestoPulgaPulirPulmo/nPulpoPulsoPumaPuntoPu~alPu~oPupaPupilaPure/QuedarQuejaQuemarQuererQuesoQuietoQui/micaQuinceQuitarRa/banoRabiaRaboRacio/nRadicalRai/zRamaRampaRanchoRangoRapazRa/pidoRaptoRasgoRaspaRatoRayoRazaRazo/nReaccio/nRealidadReba~oReboteRecaerRecetaRechazoRecogerRecreoRectoRecursoRedRedondoReducirReflejoReformaRefra/nRefugioRegaloRegirReglaRegresoRehe/nReinoRei/rRejaRelatoRelevoRelieveRellenoRelojRemarRemedioRemoRencorRendirRentaRepartoRepetirReposoReptilResRescateResinaRespetoRestoResumenRetiroRetornoRetratoReunirReve/sRevistaReyRezarRicoRiegoRiendaRiesgoRifaRi/gidoRigorRinco/nRi~o/nRi/oRiquezaRisaRitmoRitoRizoRobleRoceRociarRodarRodeoRodillaRoerRojizoRojoRomeroRomperRonRoncoRondaRopaRoperoRosaRoscaRostroRotarRubi/RuborRudoRuedaRugirRuidoRuinaRuletaRuloRumboRumorRupturaRutaRutinaSa/badoSaberSabioSableSacarSagazSagradoSalaSaldoSaleroSalirSalmo/nSalo/nSalsaSaltoSaludSalvarSambaSancio/nSandi/aSanearSangreSanidadSanoSantoSapoSaqueSardinaSarte/nSastreSata/nSaunaSaxofo/nSeccio/nSecoSecretoSectaSedSeguirSeisSelloSelvaSemanaSemillaSendaSensorSe~alSe~orSepararSepiaSequi/aSerSerieSermo/nServirSesentaSesio/nSetaSetentaSeveroSexoSextoSidraSiestaSieteSigloSignoSi/labaSilbarSilencioSillaSi/mboloSimioSirenaSistemaSitioSituarSobreSocioSodioSolSolapaSoldadoSoledadSo/lidoSoltarSolucio/nSombraSondeoSonidoSonoroSonrisaSopaSoplarSoporteSordoSorpresaSorteoSoste/nSo/tanoSuaveSubirSucesoSudorSuegraSueloSue~oSuerteSufrirSujetoSulta/nSumarSuperarSuplirSuponerSupremoSurSurcoSure~oSurgirSustoSutilTabacoTabiqueTablaTabu/TacoTactoTajoTalarTalcoTalentoTallaTalo/nTama~oTamborTangoTanqueTapaTapeteTapiaTapo/nTaquillaTardeTareaTarifaTarjetaTarotTarroTartaTatuajeTauroTazaTazo/nTeatroTechoTeclaTe/cnicaTejadoTejerTejidoTelaTele/fonoTemaTemorTemploTenazTenderTenerTenisTensoTeori/aTerapiaTercoTe/rminoTernuraTerrorTesisTesoroTestigoTeteraTextoTezTibioTiburo/nTiempoTiendaTierraTiesoTigreTijeraTildeTimbreTi/midoTimoTintaTi/oTi/picoTipoTiraTiro/nTita/nTi/tereTi/tuloTizaToallaTobilloTocarTocinoTodoTogaToldoTomarTonoTontoToparTopeToqueTo/raxToreroTormentaTorneoToroTorpedoTorreTorsoTortugaTosToscoToserTo/xicoTrabajoTractorTraerTra/ficoTragoTrajeTramoTranceTratoTraumaTrazarTre/bolTreguaTreintaTrenTreparTresTribuTrigoTripaTristeTriunfoTrofeoTrompaTroncoTropaTroteTrozoTrucoTruenoTrufaTuberi/aTuboTuertoTumbaTumorTu/nelTu/nicaTurbinaTurismoTurnoTutorUbicarU/lceraUmbralUnidadUnirUniversoUnoUntarU~aUrbanoUrbeUrgenteUrnaUsarUsuarioU/tilUtopi/aUvaVacaVaci/oVacunaVagarVagoVainaVajillaValeVa/lidoValleValorVa/lvulaVampiroVaraVariarVaro/nVasoVecinoVectorVehi/culoVeinteVejezVelaVeleroVelozVenaVencerVendaVenenoVengarVenirVentaVenusVerVeranoVerboVerdeVeredaVerjaVersoVerterVi/aViajeVibrarVicioVi/ctimaVidaVi/deoVidrioViejoViernesVigorVilVillaVinagreVinoVi~edoVioli/nViralVirgoVirtudVisorVi/speraVistaVitaminaViudoVivazViveroVivirVivoVolca/nVolumenVolverVorazVotarVotoVozVueloVulgarYacerYateYeguaYemaYernoYesoYodoYogaYogurZafiroZanjaZapatoZarzaZonaZorroZumoZurdo",i={},o=null;function s(e){return errors.checkNormalize(),utf8.toUtf8String(Array.prototype.filter.call(utf8.toUtf8Bytes(e.normalize("NFD").toLowerCase()),function(e){return e>=65&&e<=90||e>=97&&e<=123}))}function a(e){if(null==o&&((o=n.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" ").map(function(e){return function(e){var t=[];return Array.prototype.forEach.call(utf8.toUtf8Bytes(e),function(e){47===e?(t.push(204),t.push(129)):126===e?(t.push(110),t.push(204),t.push(131)):t.push(e)}),utf8.toUtf8String(t)}(e)})).forEach(function(e,t){i[s(e)]=t}),"0xf74fb7092aeacdfbf8959557de22098da512207fb9f109cb526994938cf40300"!==wordlist.check(e)))throw o=null,new Error("BIP39 Wordlist for es (Spanish) FAILED")}var c=new(function(e){function t(){return e.call(this,"es")||this}return r(t,e),t.prototype.getWord=function(e){return a(this),o[e]},t.prototype.getWordIndex=function(e){a(this);var t=i[s(e)];return"number"!=typeof t?-1:t},t}(wordlist.Wordlist));t.langEs=c,wordlist.register(c)});unwrapExports(langEs_1);var langEs_2=langEs_1.langEs,langFr_1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var n="AbaisserAbandonAbdiquerAbeilleAbolirAborderAboutirAboyerAbrasifAbreuverAbriterAbrogerAbruptAbsenceAbsoluAbsurdeAbusifAbyssalAcade/mieAcajouAcarienAccablerAccepterAcclamerAccoladeAccrocheAccuserAcerbeAchatAcheterAcidulerAcierAcompteAcque/rirAcronymeActeurActifActuelAdepteAde/quatAdhe/sifAdjectifAdjugerAdmettreAdmirerAdopterAdorerAdoucirAdresseAdroitAdulteAdverbeAe/rerAe/ronefAffaireAffecterAfficheAffreuxAffublerAgacerAgencerAgileAgiterAgraferAgre/ableAgrumeAiderAiguilleAilierAimableAisanceAjouterAjusterAlarmerAlchimieAlerteAlge-breAlgueAlie/nerAlimentAlle/gerAlliageAllouerAllumerAlourdirAlpagaAltesseAlve/oleAmateurAmbiguAmbreAme/nagerAmertumeAmidonAmiralAmorcerAmourAmovibleAmphibieAmpleurAmusantAnalyseAnaphoreAnarchieAnatomieAncienAne/antirAngleAngoisseAnguleuxAnimalAnnexerAnnonceAnnuelAnodinAnomalieAnonymeAnormalAntenneAntidoteAnxieuxApaiserApe/ritifAplanirApologieAppareilAppelerApporterAppuyerAquariumAqueducArbitreArbusteArdeurArdoiseArgentArlequinArmatureArmementArmoireArmureArpenterArracherArriverArroserArsenicArte/rielArticleAspectAsphalteAspirerAssautAsservirAssietteAssocierAssurerAsticotAstreAstuceAtelierAtomeAtriumAtroceAttaqueAttentifAttirerAttraperAubaineAubergeAudaceAudibleAugurerAuroreAutomneAutrucheAvalerAvancerAvariceAvenirAverseAveugleAviateurAvideAvionAviserAvoineAvouerAvrilAxialAxiomeBadgeBafouerBagageBaguetteBaignadeBalancerBalconBaleineBalisageBambinBancaireBandageBanlieueBannie-reBanquierBarbierBarilBaronBarqueBarrageBassinBastionBatailleBateauBatterieBaudrierBavarderBeletteBe/lierBeloteBe/ne/ficeBerceauBergerBerlineBermudaBesaceBesogneBe/tailBeurreBiberonBicycleBiduleBijouBilanBilingueBillardBinaireBiologieBiopsieBiotypeBiscuitBisonBistouriBitumeBizarreBlafardBlagueBlanchirBlessantBlinderBlondBloquerBlousonBobardBobineBoireBoiserBolideBonbonBondirBonheurBonifierBonusBordureBorneBotteBoucleBoueuxBougieBoulonBouquinBourseBoussoleBoutiqueBoxeurBrancheBrasierBraveBrebisBre-cheBreuvageBricolerBrigadeBrillantBriocheBriqueBrochureBroderBronzerBrousseBroyeurBrumeBrusqueBrutalBruyantBuffleBuissonBulletinBureauBurinBustierButinerButoirBuvableBuvetteCabanonCabineCachetteCadeauCadreCafe/ineCaillouCaissonCalculerCalepinCalibreCalmerCalomnieCalvaireCamaradeCame/raCamionCampagneCanalCanetonCanonCantineCanularCapableCaporalCapriceCapsuleCapterCapucheCarabineCarboneCaresserCaribouCarnageCarotteCarreauCartonCascadeCasierCasqueCassureCauserCautionCavalierCaverneCaviarCe/dilleCeintureCe/lesteCelluleCendrierCensurerCentralCercleCe/re/bralCeriseCernerCerveauCesserChagrinChaiseChaleurChambreChanceChapitreCharbonChasseurChatonChaussonChavirerChemiseChenilleChe/quierChercherChevalChienChiffreChignonChime-reChiotChlorureChocolatChoisirChoseChouetteChromeChuteCigareCigogneCimenterCine/maCintrerCirculerCirerCirqueCiterneCitoyenCitronCivilClaironClameurClaquerClasseClavierClientClignerClimatClivageClocheClonageCloporteCobaltCobraCocasseCocotierCoderCodifierCoffreCognerCohe/sionCoifferCoincerCole-reColibriCollineColmaterColonelCombatCome/dieCommandeCompactConcertConduireConfierCongelerConnoterConsonneContactConvexeCopainCopieCorailCorbeauCordageCornicheCorpusCorrectCorte-geCosmiqueCostumeCotonCoudeCoupureCourageCouteauCouvrirCoyoteCrabeCrainteCravateCrayonCre/atureCre/diterCre/meuxCreuserCrevetteCriblerCrierCristalCrite-reCroireCroquerCrotaleCrucialCruelCrypterCubiqueCueillirCuille-reCuisineCuivreCulminerCultiverCumulerCupideCuratifCurseurCyanureCycleCylindreCyniqueDaignerDamierDangerDanseurDauphinDe/battreDe/biterDe/borderDe/briderDe/butantDe/calerDe/cembreDe/chirerDe/ciderDe/clarerDe/corerDe/crireDe/cuplerDe/daleDe/ductifDe/esseDe/fensifDe/filerDe/frayerDe/gagerDe/givrerDe/glutirDe/graferDe/jeunerDe/liceDe/logerDemanderDemeurerDe/molirDe/nicherDe/nouerDentelleDe/nuderDe/partDe/penserDe/phaserDe/placerDe/poserDe/rangerDe/roberDe/sastreDescenteDe/sertDe/signerDe/sobe/irDessinerDestrierDe/tacherDe/testerDe/tourerDe/tresseDevancerDevenirDevinerDevoirDiableDialogueDiamantDicterDiffe/rerDige/rerDigitalDigneDiluerDimancheDiminuerDioxydeDirectifDirigerDiscuterDisposerDissiperDistanceDivertirDiviserDocileDocteurDogmeDoigtDomaineDomicileDompterDonateurDonjonDonnerDopamineDortoirDorureDosageDoseurDossierDotationDouanierDoubleDouceurDouterDoyenDragonDraperDresserDribblerDroitureDuperieDuplexeDurableDurcirDynastieE/blouirE/carterE/charpeE/chelleE/clairerE/clipseE/cloreE/cluseE/coleE/conomieE/corceE/couterE/craserE/cre/merE/crivainE/crouE/cumeE/cureuilE/difierE/duquerEffacerEffectifEffigieEffortEffrayerEffusionE/galiserE/garerE/jecterE/laborerE/largirE/lectronE/le/gantE/le/phantE/le-veE/ligibleE/litismeE/logeE/luciderE/luderEmballerEmbellirEmbryonE/meraudeE/missionEmmenerE/motionE/mouvoirEmpereurEmployerEmporterEmpriseE/mulsionEncadrerEnche-reEnclaveEncocheEndiguerEndosserEndroitEnduireE/nergieEnfanceEnfermerEnfouirEngagerEnginEngloberE/nigmeEnjamberEnjeuEnleverEnnemiEnnuyeuxEnrichirEnrobageEnseigneEntasserEntendreEntierEntourerEntraverE/nume/rerEnvahirEnviableEnvoyerEnzymeE/olienE/paissirE/pargneE/patantE/pauleE/picerieE/pide/mieE/pierE/pilogueE/pineE/pisodeE/pitapheE/poqueE/preuveE/prouverE/puisantE/querreE/quipeE/rigerE/rosionErreurE/ruptionEscalierEspadonEspe-ceEspie-gleEspoirEspritEsquiverEssayerEssenceEssieuEssorerEstimeEstomacEstradeE/tage-reE/talerE/tancheE/tatiqueE/teindreE/tendoirE/ternelE/thanolE/thiqueEthnieE/tirerE/tofferE/toileE/tonnantE/tourdirE/trangeE/troitE/tudeEuphorieE/valuerE/vasionE/ventailE/videnceE/viterE/volutifE/voquerExactExage/rerExaucerExcellerExcitantExclusifExcuseExe/cuterExempleExercerExhalerExhorterExigenceExilerExisterExotiqueExpe/dierExplorerExposerExprimerExquisExtensifExtraireExulterFableFabuleuxFacetteFacileFactureFaiblirFalaiseFameuxFamilleFarceurFarfeluFarineFaroucheFascinerFatalFatigueFauconFautifFaveurFavoriFe/brileFe/conderFe/de/rerFe/linFemmeFe/murFendoirFe/odalFermerFe/roceFerveurFestivalFeuilleFeutreFe/vrierFiascoFicelerFictifFide-leFigureFilatureFiletageFilie-reFilleulFilmerFilouFiltrerFinancerFinirFioleFirmeFissureFixerFlairerFlammeFlasqueFlatteurFle/auFle-cheFleurFlexionFloconFloreFluctuerFluideFluvialFolieFonderieFongibleFontaineForcerForgeronFormulerFortuneFossileFoudreFouge-reFouillerFoulureFourmiFragileFraiseFranchirFrapperFrayeurFre/gateFreinerFrelonFre/mirFre/ne/sieFre-reFriableFrictionFrissonFrivoleFroidFromageFrontalFrotterFruitFugitifFuiteFureurFurieuxFurtifFusionFuturGagnerGalaxieGalerieGambaderGarantirGardienGarnirGarrigueGazelleGazonGe/antGe/latineGe/luleGendarmeGe/ne/ralGe/nieGenouGentilGe/ologieGe/ome-treGe/raniumGermeGestuelGeyserGibierGiclerGirafeGivreGlaceGlaiveGlisserGlobeGloireGlorieuxGolfeurGommeGonflerGorgeGorilleGoudronGouffreGoulotGoupilleGourmandGoutteGraduelGraffitiGraineGrandGrappinGratuitGravirGrenatGriffureGrillerGrimperGrognerGronderGrotteGroupeGrugerGrutierGruye-reGue/pardGuerrierGuideGuimauveGuitareGustatifGymnasteGyrostatHabitudeHachoirHalteHameauHangarHannetonHaricotHarmonieHarponHasardHe/liumHe/matomeHerbeHe/rissonHermineHe/ronHe/siterHeureuxHibernerHibouHilarantHistoireHiverHomardHommageHomoge-neHonneurHonorerHonteuxHordeHorizonHorlogeHormoneHorribleHouleuxHousseHublotHuileuxHumainHumbleHumideHumourHurlerHydromelHygie-neHymneHypnoseIdylleIgnorerIguaneIlliciteIllusionImageImbiberImiterImmenseImmobileImmuableImpactImpe/rialImplorerImposerImprimerImputerIncarnerIncendieIncidentInclinerIncoloreIndexerIndiceInductifIne/ditIneptieInexactInfiniInfligerInformerInfusionInge/rerInhalerInhiberInjecterInjureInnocentInoculerInonderInscrireInsecteInsigneInsoliteInspirerInstinctInsulterIntactIntenseIntimeIntrigueIntuitifInutileInvasionInventerInviterInvoquerIroniqueIrradierIrre/elIrriterIsolerIvoireIvresseJaguarJaillirJambeJanvierJardinJaugerJauneJavelotJetableJetonJeudiJeunesseJoindreJoncherJonglerJoueurJouissifJournalJovialJoyauJoyeuxJubilerJugementJuniorJuponJuristeJusticeJuteuxJuve/nileKayakKimonoKiosqueLabelLabialLabourerLace/rerLactoseLaguneLaineLaisserLaitierLambeauLamelleLampeLanceurLangageLanterneLapinLargeurLarmeLaurierLavaboLavoirLectureLe/galLe/gerLe/gumeLessiveLettreLevierLexiqueLe/zardLiasseLibe/rerLibreLicenceLicorneLie-geLie-vreLigatureLigoterLigueLimerLimiteLimonadeLimpideLine/aireLingotLionceauLiquideLisie-reListerLithiumLitigeLittoralLivreurLogiqueLointainLoisirLombricLoterieLouerLourdLoutreLouveLoyalLubieLucideLucratifLueurLugubreLuisantLumie-reLunaireLundiLuronLutterLuxueuxMachineMagasinMagentaMagiqueMaigreMaillonMaintienMairieMaisonMajorerMalaxerMale/ficeMalheurMaliceMalletteMammouthMandaterManiableManquantManteauManuelMarathonMarbreMarchandMardiMaritimeMarqueurMarronMartelerMascotteMassifMate/rielMatie-reMatraqueMaudireMaussadeMauveMaximalMe/chantMe/connuMe/dailleMe/decinMe/diterMe/duseMeilleurMe/langeMe/lodieMembreMe/moireMenacerMenerMenhirMensongeMentorMercrediMe/riteMerleMessagerMesureMe/talMe/te/oreMe/thodeMe/tierMeubleMiaulerMicrobeMietteMignonMigrerMilieuMillionMimiqueMinceMine/ralMinimalMinorerMinuteMiracleMiroiterMissileMixteMobileModerneMoelleuxMondialMoniteurMonnaieMonotoneMonstreMontagneMonumentMoqueurMorceauMorsureMortierMoteurMotifMoucheMoufleMoulinMoussonMoutonMouvantMultipleMunitionMurailleMure-neMurmureMuscleMuse/umMusicienMutationMuterMutuelMyriadeMyrtilleMyste-reMythiqueNageurNappeNarquoisNarrerNatationNationNatureNaufrageNautiqueNavireNe/buleuxNectarNe/fasteNe/gationNe/gligerNe/gocierNeigeNerveuxNettoyerNeuroneNeutronNeveuNicheNickelNitrateNiveauNobleNocifNocturneNoirceurNoisetteNomadeNombreuxNommerNormatifNotableNotifierNotoireNourrirNouveauNovateurNovembreNoviceNuageNuancerNuireNuisibleNume/roNuptialNuqueNutritifObe/irObjectifObligerObscurObserverObstacleObtenirObturerOccasionOccuperOce/anOctobreOctroyerOctuplerOculaireOdeurOdorantOffenserOfficierOffrirOgiveOiseauOisillonOlfactifOlivierOmbrageOmettreOnctueuxOndulerOne/reuxOniriqueOpaleOpaqueOpe/rerOpinionOpportunOpprimerOpterOptiqueOrageuxOrangeOrbiteOrdonnerOreilleOrganeOrgueilOrificeOrnementOrqueOrtieOscillerOsmoseOssatureOtarieOuraganOursonOutilOutragerOuvrageOvationOxydeOxyge-neOzonePaisiblePalacePalmare-sPalourdePalperPanachePandaPangolinPaniquerPanneauPanoramaPantalonPapayePapierPapoterPapyrusParadoxeParcelleParesseParfumerParlerParoleParrainParsemerPartagerParureParvenirPassionPaste-quePaternelPatiencePatronPavillonPavoiserPayerPaysagePeignePeintrePelagePe/licanPellePelousePeluchePendulePe/ne/trerPe/niblePensifPe/nuriePe/pitePe/plumPerdrixPerforerPe/riodePermuterPerplexePersilPertePeserPe/talePetitPe/trirPeuplePharaonPhobiePhoquePhotonPhrasePhysiquePianoPicturalPie-cePierrePieuvrePilotePinceauPipettePiquerPiroguePiscinePistonPivoterPixelPizzaPlacardPlafondPlaisirPlanerPlaquePlastronPlateauPleurerPlexusPliagePlombPlongerPluiePlumagePochettePoe/siePoe-tePointePoirierPoissonPoivrePolairePolicierPollenPolygonePommadePompierPonctuelPonde/rerPoneyPortiquePositionPosse/derPosturePotagerPoteauPotionPoucePoulainPoumonPourprePoussinPouvoirPrairiePratiquePre/cieuxPre/direPre/fixePre/ludePre/nomPre/sencePre/textePre/voirPrimitifPrincePrisonPriverProble-meProce/derProdigeProfondProgre-sProieProjeterProloguePromenerPropreProspe-reProte/gerProuesseProverbePrudencePruneauPsychosePublicPuceronPuiserPulpePulsarPunaisePunitifPupitrePurifierPuzzlePyramideQuasarQuerelleQuestionQuie/tudeQuitterQuotientRacineRaconterRadieuxRagondinRaideurRaisinRalentirRallongeRamasserRapideRasageRatisserRavagerRavinRayonnerRe/actifRe/agirRe/aliserRe/animerRecevoirRe/citerRe/clamerRe/colterRecruterReculerRecyclerRe/digerRedouterRefaireRe/flexeRe/formerRefrainRefugeRe/galienRe/gionRe/glageRe/gulierRe/ite/rerRejeterRejouerRelatifReleverReliefRemarqueReme-deRemiseRemonterRemplirRemuerRenardRenfortReniflerRenoncerRentrerRenvoiReplierReporterRepriseReptileRequinRe/serveRe/sineuxRe/soudreRespectResterRe/sultatRe/tablirRetenirRe/ticuleRetomberRetracerRe/unionRe/ussirRevancheRevivreRe/volteRe/vulsifRichesseRideauRieurRigideRigolerRincerRiposterRisibleRisqueRituelRivalRivie-reRocheuxRomanceRompreRonceRondinRoseauRosierRotatifRotorRotuleRougeRouilleRouleauRoutineRoyaumeRubanRubisRucheRuelleRugueuxRuinerRuisseauRuserRustiqueRythmeSablerSaboterSabreSacocheSafariSagesseSaisirSaladeSaliveSalonSaluerSamediSanctionSanglierSarcasmeSardineSaturerSaugrenuSaumonSauterSauvageSavantSavonnerScalpelScandaleSce/le/ratSce/narioSceptreSche/maScienceScinderScoreScrutinSculpterSe/anceSe/cableSe/cherSecouerSe/cre/terSe/datifSe/duireSeigneurSe/jourSe/lectifSemaineSemblerSemenceSe/minalSe/nateurSensibleSentenceSe/parerSe/quenceSereinSergentSe/rieuxSerrureSe/rumServiceSe/sameSe/virSevrageSextupleSide/ralSie-cleSie/gerSifflerSigleSignalSilenceSiliciumSimpleSince-reSinistreSiphonSiropSismiqueSituerSkierSocialSocleSodiumSoigneuxSoldatSoleilSolitudeSolubleSombreSommeilSomnolerSondeSongeurSonnetteSonoreSorcierSortirSosieSottiseSoucieuxSoudureSouffleSouleverSoupapeSourceSoutirerSouvenirSpacieuxSpatialSpe/cialSphe-reSpiralStableStationSternumStimulusStipulerStrictStudieuxStupeurStylisteSublimeSubstratSubtilSubvenirSucce-sSucreSuffixeSugge/rerSuiveurSulfateSuperbeSupplierSurfaceSuricateSurmenerSurpriseSursautSurvieSuspectSyllabeSymboleSyme/trieSynapseSyntaxeSyste-meTabacTablierTactileTaillerTalentTalismanTalonnerTambourTamiserTangibleTapisTaquinerTarderTarifTartineTasseTatamiTatouageTaupeTaureauTaxerTe/moinTemporelTenailleTendreTeneurTenirTensionTerminerTerneTerribleTe/tineTexteThe-meThe/orieThe/rapieThoraxTibiaTie-deTimideTirelireTiroirTissuTitaneTitreTituberTobogganTole/rantTomateToniqueTonneauToponymeTorcheTordreTornadeTorpilleTorrentTorseTortueTotemToucherTournageTousserToxineTractionTraficTragiqueTrahirTrainTrancherTravailTre-fleTremperTre/sorTreuilTriageTribunalTricoterTrilogieTriompheTriplerTriturerTrivialTromboneTroncTropicalTroupeauTuileTulipeTumulteTunnelTurbineTuteurTutoyerTuyauTympanTyphonTypiqueTyranUbuesqueUltimeUltrasonUnanimeUnifierUnionUniqueUnitaireUniversUraniumUrbainUrticantUsageUsineUsuelUsureUtileUtopieVacarmeVaccinVagabondVagueVaillantVaincreVaisseauValableValiseVallonValveVampireVanilleVapeurVarierVaseuxVassalVasteVecteurVedetteVe/ge/talVe/hiculeVeinardVe/loceVendrediVe/ne/rerVengerVenimeuxVentouseVerdureVe/rinVernirVerrouVerserVertuVestonVe/te/ranVe/tusteVexantVexerViaducViandeVictoireVidangeVide/oVignetteVigueurVilainVillageVinaigreViolonVipe-reVirementVirtuoseVirusVisageViseurVisionVisqueuxVisuelVitalVitesseViticoleVitrineVivaceVivipareVocationVoguerVoileVoisinVoitureVolailleVolcanVoltigerVolumeVoraceVortexVoterVouloirVoyageVoyelleWagonXe/nonYachtZe-breZe/nithZesteZoologie",i=null,o={};function s(e){return errors.checkNormalize(),utf8.toUtf8String(Array.prototype.filter.call(utf8.toUtf8Bytes(e.normalize("NFD").toLowerCase()),function(e){return e>=65&&e<=90||e>=97&&e<=123}))}function a(e){if(null==i&&((i=n.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" ").map(function(e){return function(e){var t=[];return Array.prototype.forEach.call(utf8.toUtf8Bytes(e),function(e){47===e?(t.push(204),t.push(129)):45===e?(t.push(204),t.push(128)):t.push(e)}),utf8.toUtf8String(t)}(e)})).forEach(function(e,t){o[s(e)]=t}),"0x51deb7ae009149dc61a6bd18a918eb7ac78d2775726c68e598b92d002519b045"!==wordlist.check(e)))throw i=null,new Error("BIP39 Wordlist for fr (French) FAILED")}var c=new(function(e){function t(){return e.call(this,"fr")||this}return r(t,e),t.prototype.getWord=function(e){return a(this),i[e]},t.prototype.getWordIndex=function(e){a(this);var t=o[s(e)];return"number"!=typeof t?-1:t},t}(wordlist.Wordlist));t.langFr=c,wordlist.register(c)});unwrapExports(langFr_1);var langFr_2=langFr_1.langFr,langJa_1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(errors),o=["AQRASRAGBAGUAIRAHBAghAURAdBAdcAnoAMEAFBAFCBKFBQRBSFBCXBCDBCHBGFBEQBpBBpQBIkBHNBeOBgFBVCBhBBhNBmOBmRBiHBiFBUFBZDBvFBsXBkFBlcBjYBwDBMBBTBBTRBWBBWXXaQXaRXQWXSRXCFXYBXpHXOQXHRXhRXuRXmXXbRXlXXwDXTRXrCXWQXWGaBWaKcaYgasFadQalmaMBacAKaRKKBKKXKKjKQRKDRKCYKCRKIDKeVKHcKlXKjHKrYNAHNBWNaRNKcNIBNIONmXNsXNdXNnBNMBNRBNrXNWDNWMNFOQABQAHQBrQXBQXFQaRQKXQKDQKOQKFQNBQNDQQgQCXQCDQGBQGDQGdQYXQpBQpQQpHQLXQHuQgBQhBQhCQuFQmXQiDQUFQZDQsFQdRQkHQbRQlOQlmQPDQjDQwXQMBQMDQcFQTBQTHQrDDXQDNFDGBDGQDGRDpFDhFDmXDZXDbRDMYDRdDTRDrXSAhSBCSBrSGQSEQSHBSVRShYShkSyQSuFSiBSdcSoESocSlmSMBSFBSFKSFNSFdSFcCByCaRCKcCSBCSRCCrCGbCEHCYXCpBCpQCIBCIHCeNCgBCgFCVECVcCmkCmwCZXCZFCdRClOClmClFCjDCjdCnXCwBCwXCcRCFQCFjGXhGNhGDEGDMGCDGCHGIFGgBGVXGVEGVRGmXGsXGdYGoSGbRGnXGwXGwDGWRGFNGFLGFOGFdGFkEABEBDEBFEXOEaBEKSENBENDEYXEIgEIkEgBEgQEgHEhFEudEuFEiBEiHEiFEZDEvBEsXEsFEdXEdREkFEbBEbRElFEPCEfkEFNYAEYAhYBNYQdYDXYSRYCEYYoYgQYgRYuRYmCYZTYdBYbEYlXYjQYRbYWRpKXpQopQnpSFpCXpIBpISphNpdBpdRpbRpcZpFBpFNpFDpFopFrLADLBuLXQLXcLaFLCXLEhLpBLpFLHXLeVLhILdHLdRLoDLbRLrXIABIBQIBCIBsIBoIBMIBRIXaIaRIKYIKRINBINuICDIGBIIDIIkIgRIxFIyQIiHIdRIbYIbRIlHIwRIMYIcRIRVITRIFBIFNIFQOABOAFOBQOaFONBONMOQFOSFOCDOGBOEQOpBOLXOIBOIFOgQOgFOyQOycOmXOsXOdIOkHOMEOMkOWWHBNHXNHXWHNXHDuHDRHSuHSRHHoHhkHmRHdRHkQHlcHlRHwBHWcgAEgAggAkgBNgBQgBEgXOgYcgLXgHjgyQgiBgsFgdagMYgWSgFQgFEVBTVXEVKBVKNVKDVKYVKRVNBVNYVDBVDxVSBVSRVCjVGNVLXVIFVhBVhcVsXVdRVbRVlRhBYhKYhDYhGShxWhmNhdahdkhbRhjohMXhTRxAXxXSxKBxNBxEQxeNxeQxhXxsFxdbxlHxjcxFBxFNxFQxFOxFoyNYyYoybcyMYuBQuBRuBruDMuCouHBudQukkuoBulVuMXuFEmCYmCRmpRmeDmiMmjdmTFmFQiADiBOiaRiKRiNBiNRiSFiGkiGFiERipRiLFiIFihYibHijBijEiMXiWBiFBiFCUBQUXFUaRUNDUNcUNRUNFUDBUSHUCDUGBUGFUEqULNULoUIRUeEUeYUgBUhFUuRUiFUsXUdFUkHUbBUjSUjYUwXUMDUcHURdUTBUrBUrXUrQZAFZXZZaRZKFZNBZQFZCXZGBZYdZpBZLDZIFZHXZHNZeQZVRZVFZmXZiBZvFZdFZkFZbHZbFZwXZcCZcRZRBvBQvBGvBLvBWvCovMYsAFsBDsaRsKFsNFsDrsSHsSFsCXsCRsEBsEHsEfspBsLBsLDsIgsIRseGsbRsFBsFQsFSdNBdSRdCVdGHdYDdHcdVbdySduDdsXdlRdwXdWYdWcdWRkBMkXOkaRkNIkNFkSFkCFkYBkpRkeNkgBkhVkmXksFklVkMBkWDkFNoBNoaQoaFoNBoNXoNaoNEoSRoEroYXoYCoYbopRopFomXojkowXorFbBEbEIbdBbjYlaRlDElMXlFDjKjjSRjGBjYBjYkjpRjLXjIBjOFjeVjbRjwBnXQnSHnpFnLXnINnMBnTRwXBwXNwXYwNFwQFwSBwGFwLXwLDweNwgBwuHwjDwnXMBXMpFMIBMeNMTHcaQcNBcDHcSFcCXcpBcLXcLDcgFcuFcnXcwXccDcTQcrFTQErXNrCHrpFrgFrbFrTHrFcWNYWNbWEHWMXWTR","ABGHABIJAEAVAYJQALZJAIaRAHNXAHdcAHbRAZJMAZJRAZTRAdVJAklmAbcNAjdRAMnRAMWYAWpRAWgRAFgBAFhBAFdcBNJBBNJDBQKBBQhcBQlmBDEJBYJkBYJTBpNBBpJFBIJBBIJDBIcABOKXBOEJBOVJBOiJBOZJBepBBeLXBeIFBegBBgGJBVJXBuocBiJRBUJQBlXVBlITBwNFBMYVBcqXBTlmBWNFBWiJBWnRBFGHBFwXXKGJXNJBXNZJXDTTXSHSXSVRXSlHXCJDXGQJXEhXXYQJXYbRXOfXXeNcXVJFXhQJXhEJXdTRXjdXXMhBXcQTXRGBXTEBXTnQXFCXXFOFXFgFaBaFaBNJaBCJaBpBaBwXaNJKaNJDaQIBaDpRaEPDaHMFamDJalEJaMZJaFaFaFNBaFQJaFLDaFVHKBCYKBEBKBHDKXaFKXGdKXEJKXpHKXIBKXZDKXwXKKwLKNacKNYJKNJoKNWcKDGdKDTRKChXKGaRKGhBKGbRKEBTKEaRKEPTKLMDKLWRKOHDKVJcKdBcKlIBKlOPKFSBKFEPKFpFNBNJNJBQNBGHNBEPNBHXNBgFNBVXNBZDNBsXNBwXNNaRNNJDNNJENNJkNDCJNDVDNGJRNJiDNZJNNsCJNJFNNFSBNFCXNFEPNFLXNFIFQJBFQCaRQJEQQLJDQLJFQIaRQOqXQHaFQHHQQVJXQVJDQhNJQmEIQZJFQsJXQJrFQWbRDJABDBYJDXNFDXCXDXLXDXZDDXsJDQqXDSJFDJCXDEPkDEqXDYmQDpSJDOCkDOGQDHEIDVJDDuDuDWEBDJFgSBNDSBSFSBGHSBIBSBTQSKVYSJQNSJQiSJCXSEqXSJYVSIiJSOMYSHAHSHaQSeCFSepQSegBSHdHSHrFShSJSJuHSJUFSkNRSrSrSWEBSFaHSJFQSFCXSFGDSFYXSFODSFgBSFVXSFhBSFxFSFkFSFbBSFMFCADdCJXBCXaFCXKFCXNFCXCXCXGBCXEJCXYBCXLDCXIBCXOPCXHXCXgBCXhBCXiBCXlDCXcHCJNBCJNFCDCJCDGBCDVXCDhBCDiDCDJdCCmNCpJFCIaRCOqXCHCHCHZJCViJCuCuCmddCJiFCdNBCdHhClEJCnUJCreSCWlgCWTRCFBFCFNBCFYBCFVFCFhFCFdSCFTBCFWDGBNBGBQFGJBCGBEqGBpBGBgQGNBEGNJYGNkOGNJRGDUFGJpQGHaBGJeNGJeEGVBlGVKjGiJDGvJHGsVJGkEBGMIJGWjNGFBFGFCXGFGBGFYXGFpBGFMFEASJEAWpEJNFECJVEIXSEIQJEOqXEOcFEeNcEHEJEHlFEJgFEhlmEmDJEmZJEiMBEUqXEoSREPBFEPXFEPKFEPSFEPEFEPpFEPLXEPIBEJPdEPcFEPTBEJnXEqlHEMpREFCXEFODEFcFYASJYJAFYBaBYBVXYXpFYDhBYCJBYJGFYYbRYeNcYJeVYiIJYZJcYvJgYvJRYJsXYsJFYMYMYreVpBNHpBEJpBwXpQxFpYEJpeNDpJeDpeSFpeCHpHUJpHbBpHcHpmUJpiiJpUJrpsJuplITpFaBpFQqpFGBpFEfpFYBpFpBpFLJpFIDpFgBpFVXpFyQpFuFpFlFpFjDpFnXpFwXpJFMpFTBLXCJLXEFLXhFLXUJLXbFLalmLNJBLSJQLCLCLGJBLLDJLHaFLeNFLeSHLeCXLepFLhaRLZsJLsJDLsJrLocaLlLlLMdbLFNBLFSBLFEHLFkFIBBFIBXFIBaQIBKXIBSFIBpHIBLXIBgBIBhBIBuHIBmXIBiFIBZXIBvFIBbFIBjQIBwXIBWFIKTRIQUJIDGFICjQIYSRIINXIJeCIVaRImEkIZJFIvJRIsJXIdCJIJoRIbBQIjYBIcqXITFVIreVIFKFIFSFIFCJIFGFIFLDIFIBIJFOIFgBIFVXIJFhIFxFIFmXIFdHIFbBIJFrIJFWOBGBOQfXOOKjOUqXOfXBOqXEOcqXORVJOFIBOFlDHBIOHXiFHNTRHCJXHIaRHHJDHHEJHVbRHZJYHbIBHRsJHRkDHWlmgBKFgBSBgBCDgBGHgBpBgBIBgBVJgBuBgBvFgKDTgQVXgDUJgGSJgOqXgmUMgZIJgTUJgWIEgFBFgFNBgFDJgFSFgFGBgFYXgJFOgFgQgFVXgFhBgFbHgJFWVJABVQKcVDgFVOfXVeDFVhaRVmGdViJYVMaRVFNHhBNDhBCXhBEqhBpFhBLXhNJBhSJRheVXhhKEhxlmhZIJhdBQhkIJhbMNhMUJhMZJxNJgxQUJxDEkxDdFxSJRxplmxeSBxeCXxeGFxeYXxepQxegBxWVcxFEQxFLXxFIBxFgBxFxDxFZtxFdcxFbBxFwXyDJXyDlcuASJuDJpuDIBuCpJuGSJuIJFueEFuZIJusJXudWEuoIBuWGJuFBcuFKEuFNFuFQFuFDJuFGJuFVJuFUtuFdHuFTBmBYJmNJYmQhkmLJDmLJomIdXmiJYmvJRmsJRmklmmMBymMuCmclmmcnQiJABiJBNiJBDiBSFiBCJiBEFiBYBiBpFiBLXiBTHiJNciDEfiCZJiECJiJEqiOkHiHKFieNDiHJQieQcieDHieSFieCXieGFieEFieIHiegFihUJixNoioNXiFaBiFKFiFNDiFEPiFYXitFOitFHiFgBiFVEiFmXiFitiFbBiFMFiFrFUCXQUIoQUIJcUHQJUeCEUHwXUUJDUUqXUdWcUcqXUrnQUFNDUFSHUFCFUFEfUFLXUtFOZBXOZXSBZXpFZXVXZEQJZEJkZpDJZOqXZeNHZeCDZUqXZFBQZFEHZFLXvBAFvBKFvBCXvBEPvBpHvBIDvBgFvBuHvQNJvFNFvFGBvFIBvJFcsXCDsXLXsXsXsXlFsXcHsQqXsJQFsEqXseIFsFEHsFjDdBxOdNpRdNJRdEJbdpJRdhZJdnSJdrjNdFNJdFQHdFhNkNJDkYaRkHNRkHSRkVbRkuMRkjSJkcqDoSJFoEiJoYZJoOfXohEBoMGQocqXbBAFbBXFbBaFbBNDbBGBbBLXbBTBbBWDbGJYbIJHbFQqbFpQlDgQlOrFlVJRjGEBjZJRnXvJnXbBnEfHnOPDngJRnxfXnUJWwXEJwNpJwDpBwEfXwrEBMDCJMDGHMDIJMLJDcQGDcQpHcqXccqNFcqCXcFCJRBSBRBGBRBEJRBpQTBNFTBQJTBpBTBVXTFABTFSBTFCFTFGBTFMDrXCJrXLDrDNJrEfHrFQJrFitWNjdWNTR","AKLJMANOPFASNJIAEJWXAYJNRAIIbRAIcdaAeEfDAgidRAdjNYAMYEJAMIbRAFNJBAFpJFBBIJYBDZJFBSiJhBGdEBBEJfXBEJqXBEJWRBpaUJBLXrXBIYJMBOcfXBeEfFBestXBjNJRBcDJOBFEqXXNvJRXDMBhXCJNYXOAWpXONJWXHDEBXeIaRXhYJDXZJSJXMDJOXcASJXFVJXaBQqXaBZJFasXdQaFSJQaFEfXaFpJHaFOqXKBNSRKXvJBKQJhXKEJQJKEJGFKINJBKIJjNKgJNSKVElmKVhEBKiJGFKlBgJKjnUJKwsJYKMFIJKFNJDKFIJFKFOfXNJBSFNJBCXNBpJFNJBvQNJBMBNJLJXNJOqXNJeCXNJeGFNdsJCNbTKFNwXUJQNFEPQDiJcQDMSJQSFpBQGMQJQJeOcQyCJEQUJEBQJFBrQFEJqDXDJFDJXpBDJXIMDGiJhDIJGRDJeYcDHrDJDVXgFDkAWpDkIgRDjDEqDMvJRDJFNFDJFIBSKclmSJQOFSJQVHSJQjDSJGJBSJGJFSECJoSHEJqSJHTBSJVJDSViJYSZJNBSJsJDSFSJFSFEfXSJFLXCBUJVCJXSBCJXpBCXVJXCJXsXCJXdFCJNJHCLIJgCHiJFCVNJMChCJhCUHEJCsJTRCJdYcCoQJCCFEfXCFIJgCFUJxCFstFGJBaQGJBIDGQJqXGYJNRGJHKFGeQqDGHEJFGJeLXGHIiJGHdBlGUJEBGkIJTGFQPDGJFEqEAGegEJIJBEJVJXEhQJTEiJNcEJZJFEJoEqEjDEqEPDsXEPGJBEPOqXEPeQFEfDiDEJfEFEfepQEfMiJEqXNBEqDIDEqeSFEqVJXEMvJRYXNJDYXEJHYKVJcYYJEBYJeEcYJUqXYFpJFYFstXpAZJMpBSJFpNBNFpeQPDpHLJDpHIJFpHgJFpeitFpHZJFpJFADpFSJFpJFCJpFOqXpFitBpJFZJLXIJFLIJgRLVNJWLVHJMLwNpJLFGJBLFLJDLFOqXLJFUJIBDJXIBGJBIJBYQIJBIBIBOqXIBcqDIEGJFILNJTIIJEBIOiJhIJeNBIJeIBIhiJIIWoTRIJFAHIJFpBIJFuHIFUtFIJFTHOSBYJOEcqXOHEJqOvBpFOkVJrObBVJOncqDOcNJkHhNJRHuHJuHdMhBgBUqXgBsJXgONJBgHNJDgHHJQgJeitgHsJXgJyNagyDJBgZJDrgsVJQgkEJNgkjSJgJFAHgFCJDgFZtMVJXNFVXQfXVJXDJVXoQJVQVJQVDEfXVDvJHVEqNFVeQfXVHpJFVHxfXVVJSRVVmaRVlIJOhCXVJhHjYkhxCJVhWVUJhWiJcxBNJIxeEqDxfXBFxcFEPxFSJFxFYJXyBDQJydaUJyFOPDuYCJYuLvJRuHLJXuZJLDuFOPDuFZJHuFcqXmKHJdmCQJcmOsVJiJAGFitLCFieOfXiestXiZJMEikNJQirXzFiFQqXiFIJFiFZJFiFvtFUHpJFUteIcUteOcUVCJkUhdHcUbEJEUJqXQUMNJhURjYkUFitFZDGJHZJIxDZJVJXZJFDJZJFpQvBNJBvBSJFvJxBrseQqDsVFVJdFLJDkEJNBkmNJYkFLJDoQJOPoGsJRoEAHBoEJfFbBQqDbBZJHbFVJXlFIJBjYIrXjeitcjjCEBjWMNBwXQfXwXOaFwDsJXwCJTRwrCZJMDNJQcDDJFcqDOPRYiJFTBsJXTQIJBTFEfXTFLJDrXEJFrEJXMrFZJFWEJdEWYTlm","ABCDEFACNJTRAMBDJdAcNJVXBLNJEBXSIdWRXErNJkXYDJMBXZJCJaXMNJaYKKVJKcKDEJqXKDcNJhKVJrNYKbgJVXKFVJSBNBYBwDNJeQfXNJeEqXNhGJWENJFiJRQlIJbEQJfXxDQqXcfXQFNDEJQFwXUJDYcnUJDJIBgQDIUJTRDJFEqDSJQSJFSJQIJFSOPeZtSJFZJHCJXQfXCTDEqFGJBSJFGJBOfXGJBcqXGJHNJDGJRLiJEJfXEqEJFEJPEFpBEJYJBZJFYBwXUJYiJMEBYJZJyTYTONJXpQMFXFpeGIDdpJFstXpJFcPDLBVSJRLHQJqXLJFZJFIJBNJDIJBUqXIBkFDJIJEJPTIYJGWRIJeQPDIJeEfHIJFsJXOqGDSFHXEJqXgJCsJCgGQJqXgdQYJEgFMFNBgJFcqDVJwXUJVJFZJchIgJCCxOEJqXxOwXUJyDJBVRuscisciJBiJBieUtqXiJFDJkiFsJXQUGEZJcUJFsJXZtXIrXZDZJDrZJFNJDZJFstXvJFQqXvJFCJEsJXQJqkhkNGBbDJdTRbYJMEBlDwXUJMEFiJFcfXNJDRcNJWMTBLJXC","BraFUtHBFSJFdbNBLJXVJQoYJNEBSJBEJfHSJHwXUJCJdAZJMGjaFVJXEJPNJBlEJfFiJFpFbFEJqIJBVJCrIBdHiJhOPFChvJVJZJNJWxGFNIFLueIBQJqUHEJfUFstOZJDrlXEASJRlXVJXSFwVJNJWD","QJEJNNJDQJEJIBSFQJEJxegBQJEJfHEPSJBmXEJFSJCDEJqXLXNJFQqXIcQsFNJFIFEJqXUJgFsJXIJBUJEJfHNFvJxEqXNJnXUJFQqD","IJBEJqXZJ"],s="~~AzB~X~a~KN~Q~D~S~C~G~E~Y~p~L~I~O~eH~g~V~hxyumi~~U~~Z~~v~~s~~dkoblPjfnqwMcRTr~W~~~F~~~~~Jt",a=null;function c(e){return bytes.hexlify(utf8.toUtf8Bytes(e))}var u="0xe3818de38284e3818f",f="0xe3818de38283e3818f";function l(e){if(null===a){a=[];var t={};t[utf8.toUtf8String([227,130,154])]=!1,t[utf8.toUtf8String([227,130,153])]=!1,t[utf8.toUtf8String([227,130,133])]=utf8.toUtf8String([227,130,134]),t[utf8.toUtf8String([227,129,163])]=utf8.toUtf8String([227,129,164]),t[utf8.toUtf8String([227,130,131])]=utf8.toUtf8String([227,130,132]),t[utf8.toUtf8String([227,130,135])]=utf8.toUtf8String([227,130,136]);for(var r=3;r<=9;r++)for(var n=o[r-3],i=0;i<n.length;i+=r){for(var l=[],d=0;d<r;d++){var h=s.indexOf(n[i+d]);l.push(227),l.push(64&h?130:129),l.push(128+(63&h))}a.push(utf8.toUtf8String(l))}if(a.sort(function(e,t){return(e=b(e))<(t=b(t))?-1:e>t?1:0}),c(a[442])===u&&c(a[443])===f){var p=a[442];a[442]=a[443],a[443]=p}if("0xcb36b09e6baa935787fd762ce65e80b0c6a8dabdfbc3a7f86ac0e2c4fd111600"!==wordlist.check(e))throw a=null,new Error("BIP39 Wordlist for ja (Japanese) FAILED")}function b(e){for(var r="",n=0;n<e.length;n++){var i=e[n],o=t[i];!1!==o&&(o&&(i=o),r+=i)}return r}}var d=new(function(e){function t(){return e.call(this,"ja")||this}return r(t,e),t.prototype.getWord=function(e){return l(this),a[e]},t.prototype.getWordIndex=function(e){return l(this),a.indexOf(e)},t.prototype.split=function(e){return i.checkNormalize(),e.split(/(?:\u3000| )+/g)},t.prototype.join=function(e){return e.join("　")},t}(wordlist.Wordlist));t.langJa=d,wordlist.register(d)});unwrapExports(langJa_1);var langJa_2=langJa_1.langJa,langKo_1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=["OYAa","ATAZoATBl3ATCTrATCl8ATDloATGg3ATHT8ATJT8ATJl3ATLlvATLn4ATMT8ATMX8ATMboATMgoAToLbAToMTATrHgATvHnAT3AnAT3JbAT3MTAT8DbAT8JTAT8LmAT8MYAT8MbAT#LnAUHT8AUHZvAUJXrAUJX8AULnrAXJnvAXLUoAXLgvAXMn6AXRg3AXrMbAX3JTAX3QbAYLn3AZLgvAZrSUAZvAcAZ8AaAZ8AbAZ8AnAZ8HnAZ8LgAZ8MYAZ8MgAZ8OnAaAboAaDTrAaFTrAaJTrAaJboAaLVoAaMXvAaOl8AaSeoAbAUoAbAg8AbAl4AbGnrAbMT8AbMXrAbMn4AbQb8AbSV8AbvRlAb8AUAb8AnAb8HgAb8JTAb8NTAb8RbAcGboAcLnvAcMT8AcMX8AcSToAcrAaAcrFnAc8AbAc8MgAfGgrAfHboAfJnvAfLV8AfLkoAfMT8AfMnoAfQb8AfScrAfSgrAgAZ8AgFl3AgGX8AgHZvAgHgrAgJXoAgJX8AgJboAgLZoAgLn4AgOX8AgoATAgoAnAgoCUAgoJgAgoLXAgoMYAgoSeAgrDUAgrJTAhrFnAhrLjAhrQgAjAgoAjJnrAkMX8AkOnoAlCTvAlCV8AlClvAlFg4AlFl6AlFn3AloSnAlrAXAlrAfAlrFUAlrFbAlrGgAlrOXAlvKnAlvMTAl3AbAl3MnAnATrAnAcrAnCZ3AnCl8AnDg8AnFboAnFl3AnHX4AnHbrAnHgrAnIl3AnJgvAnLXoAnLX4AnLbrAnLgrAnLhrAnMXoAnMgrAnOn3AnSbrAnSeoAnvLnAn3OnCTGgvCTSlvCTvAUCTvKnCTvNTCT3CZCT3GUCT3MTCT8HnCUCZrCULf8CULnvCU3HnCU3JUCY6NUCbDb8CbFZoCbLnrCboOTCboScCbrFnCbvLnCb8AgCb8HgCb$LnCkLfoClBn3CloDUDTHT8DTLl3DTSU8DTrAaDTrLXDTrLjDTrOYDTrOgDTvFXDTvFnDT3HUDT3LfDUCT9DUDT4DUFVoDUFV8DUFkoDUGgrDUJnrDULl8DUMT8DUMXrDUMX4DUMg8DUOUoDUOgvDUOg8DUSToDUSZ8DbDXoDbDgoDbGT8DbJn3DbLg3DbLn4DbMXrDbMg8DbOToDboJXGTClvGTDT8GTFZrGTLVoGTLlvGTLl3GTMg8GTOTvGTSlrGToCUGTrDgGTrJYGTrScGTtLnGTvAnGTvQgGUCZrGUDTvGUFZoGUHXrGULnvGUMT8GUoMgGXoLnGXrMXGXrMnGXvFnGYLnvGZOnvGZvOnGZ8LaGZ8LmGbAl3GbDYvGbDlrGbHX3GbJl4GbLV8GbLn3GbMn4GboJTGboRfGbvFUGb3GUGb4JnGgDX3GgFl$GgJlrGgLX6GgLZoGgLf8GgOXoGgrAgGgrJXGgrMYGgrScGgvATGgvOYGnAgoGnJgvGnLZoGnLg3GnLnrGnQn8GnSbrGnrMgHTClvHTDToHTFT3HTQT8HToJTHToJgHTrDUHTrMnHTvFYHTvRfHT8MnHT8SUHUAZ8HUBb4HUDTvHUoMYHXFl6HXJX6HXQlrHXrAUHXrMnHXrSbHXvFYHXvKXHX3LjHX3MeHYvQlHZrScHZvDbHbAcrHbFT3HbFl3HbJT8HbLTrHbMT8HbMXrHbMbrHbQb8HbSX3HboDbHboJTHbrFUHbrHgHbrJTHb8JTHb8MnHb8QgHgAlrHgDT3HgGgrHgHgrHgJTrHgJT8HgLX@HgLnrHgMT8HgMX8HgMboHgOnrHgQToHgRg3HgoHgHgrCbHgrFnHgrLVHgvAcHgvAfHnAloHnCTrHnCnvHnGTrHnGZ8HnGnvHnJT8HnLf8HnLkvHnMg8HnRTrITvFUITvFnJTAXrJTCV8JTFT3JTFT8JTFn4JTGgvJTHT8JTJT8JTJXvJTJl3JTJnvJTLX4JTLf8JTLhvJTMT8JTMXrJTMnrJTObrJTQT8JTSlvJT8DUJT8FkJT8MTJT8OXJT8OgJT8QUJT8RfJUHZoJXFT4JXFlrJXGZ8JXGnrJXLV8JXLgvJXMXoJXMX3JXNboJXPlvJXoJTJXoLkJXrAXJXrHUJXrJgJXvJTJXvOnJX4KnJYAl3JYJT8JYLhvJYQToJYrQXJY6NUJbAl3JbCZrJbDloJbGT8JbGgrJbJXvJbJboJbLf8JbLhrJbLl3JbMnvJbRg8JbSZ8JboDbJbrCZJbrSUJb3KnJb8LnJfRn8JgAXrJgCZrJgDTrJgGZrJgGZ8JgHToJgJT8JgJXoJgJgvJgLX4JgLZ3JgLZ8JgLn4JgMgrJgMn4JgOgvJgPX6JgRnvJgSToJgoCZJgoJbJgoMYJgrJXJgrJgJgrLjJg6MTJlCn3JlGgvJlJl8Jl4AnJl8FnJl8HgJnAToJnATrJnAbvJnDUoJnGnrJnJXrJnJXvJnLhvJnLnrJnLnvJnMToJnMT8JnMXvJnMX3JnMg8JnMlrJnMn4JnOX8JnST4JnSX3JnoAgJnoAnJnoJTJnoObJnrAbJnrAkJnrHnJnrJTJnrJYJnrOYJnrScJnvCUJnvFaJnvJgJnvJnJnvOYJnvQUJnvRUJn3FnJn3JTKnFl3KnLT6LTDlvLTMnoLTOn3LTRl3LTSb4LTSlrLToAnLToJgLTrAULTrAcLTrCULTrHgLTrMgLT3JnLULnrLUMX8LUoJgLVATrLVDTrLVLb8LVoJgLV8MgLV8RTLXDg3LXFlrLXrCnLXrLXLX3GTLX4GgLX4OYLZAXrLZAcrLZAgrLZAhrLZDXyLZDlrLZFbrLZFl3LZJX6LZJX8LZLc8LZLnrLZSU8LZoJTLZoJnLZrAgLZrAnLZrJYLZrLULZrMgLZrSkLZvAnLZvGULZvJeLZvOTLZ3FZLZ4JXLZ8STLZ8ScLaAT3LaAl3LaHT8LaJTrLaJT8LaJXrLaJgvLaJl4LaLVoLaMXrLaMXvLaMX8LbClvLbFToLbHlrLbJn4LbLZ3LbLhvLbMXrLbMnoLbvSULcLnrLc8HnLc8MTLdrMnLeAgoLeOgvLeOn3LfAl3LfLnvLfMl3LfOX8Lf8AnLf8JXLf8LXLgJTrLgJXrLgJl8LgMX8LgRZrLhCToLhrAbLhrFULhrJXLhvJYLjHTrLjHX4LjJX8LjLhrLjSX3LjSZ4LkFX4LkGZ8LkGgvLkJTrLkMXoLkSToLkSU8LkSZ8LkoOYLl3FfLl3MgLmAZrLmCbrLmGgrLmHboLmJnoLmJn3LmLfoLmLhrLmSToLnAX6LnAb6LnCZ3LnCb3LnDTvLnDb8LnFl3LnGnrLnHZvLnHgvLnITvLnJT8LnJX8LnJlvLnLf8LnLg6LnLhvLnLnoLnMXrLnMg8LnQlvLnSbrLnrAgLnrAnLnrDbLnrFkLnrJdLnrMULnrOYLnrSTLnvAnLnvDULnvHgLnvOYLnvOnLn3GgLn4DULn4JTLn4JnMTAZoMTAloMTDb8MTFT8MTJnoMTJnrMTLZrMTLhrMTLkvMTMX8MTRTrMToATMTrDnMTrOnMT3JnMT4MnMT8FUMT8FaMT8FlMT8GTMT8GbMT8GnMT8HnMT8JTMT8JbMT8OTMUCl8MUJTrMUJU8MUMX8MURTrMUSToMXAX6MXAb6MXCZoMXFXrMXHXrMXLgvMXOgoMXrAUMXrAnMXrHgMXrJYMXrJnMXrMTMXrMgMXrOYMXrSZMXrSgMXvDUMXvOTMX3JgMX3OTMX4JnMX8DbMX8FnMX8HbMX8HgMX8HnMX8LbMX8MnMX8OnMYAb8MYGboMYHTvMYHX4MYLTrMYLnvMYMToMYOgvMYRg3MYSTrMbAToMbAXrMbAl3MbAn8MbGZ8MbJT8MbJXrMbMXvMbMX8MbMnoMbrMUMb8AfMb8FbMb8FkMcJXoMeLnrMgFl3MgGTvMgGXoMgGgrMgGnrMgHT8MgHZrMgJnoMgLnrMgLnvMgMT8MgQUoMgrHnMgvAnMg8HgMg8JYMg8LfMloJnMl8ATMl8AXMl8JYMnAToMnAT4MnAZ8MnAl3MnAl4MnCl8MnHT8MnHg8MnJnoMnLZoMnLhrMnMXoMnMX3MnMnrMnOgvMnrFbMnrFfMnrFnMnrNTMnvJXNTMl8OTCT3OTFV8OTFn3OTHZvOTJXrOTOl3OT3ATOT3JUOT3LZOT3LeOT3MbOT8ATOT8AbOT8AgOT8MbOUCXvOUMX3OXHXvOXLl3OXrMUOXvDbOX6NUOX8JbOYFZoOYLbrOYLkoOYMg8OYSX3ObHTrObHT4ObJgrObLhrObMX3ObOX8Ob8FnOeAlrOeJT8OeJXrOeJnrOeLToOeMb8OgJXoOgLXoOgMnrOgOXrOgOloOgoAgOgoJbOgoMYOgoSTOg8AbOjLX4OjMnoOjSV8OnLVoOnrAgOn3DUPXQlrPXvFXPbvFTPdAT3PlFn3PnvFbQTLn4QToAgQToMTQULV8QURg8QUoJnQXCXvQbFbrQb8AaQb8AcQb8FbQb8MYQb8ScQeAlrQeLhrQjAn3QlFXoQloJgQloSnRTLnvRTrGURTrJTRUJZrRUoJlRUrQnRZrLmRZrMnRZrSnRZ8ATRZ8JbRZ8ScRbMT8RbST3RfGZrRfMX8RfMgrRfSZrRnAbrRnGT8RnvJgRnvLfRnvMTRn8AaSTClvSTJgrSTOXrSTRg3STRnvSToAcSToAfSToAnSToHnSToLjSToMTSTrAaSTrEUST3BYST8AgST8LmSUAZvSUAgrSUDT4SUDT8SUGgvSUJXoSUJXvSULTrSU8JTSU8LjSV8AnSV8JgSXFToSXLf8SYvAnSZrDUSZrMUSZrMnSZ8HgSZ8JTSZ8JgSZ8MYSZ8QUSaQUoSbCT3SbHToSbQYvSbSl4SboJnSbvFbSb8HbSb8JgSb8OTScGZrScHgrScJTvScMT8ScSToScoHbScrMTScvAnSeAZrSeAcrSeHboSeJUoSeLhrSeMT8SeMXrSe6JgSgHTrSkJnoSkLnvSk8CUSlFl3SlrSnSl8GnSmAboSmGT8SmJU8","ATLnDlATrAZoATrJX4ATrMT8ATrMX4ATrRTrATvDl8ATvJUoATvMl8AT3AToAT3MX8AT8CT3AT8DT8AT8HZrAT8HgoAUAgFnAUCTFnAXoMX8AXrAT8AXrGgvAXrJXvAXrOgoAXvLl3AZvAgoAZvFbrAZvJXoAZvJl8AZvJn3AZvMX8AZvSbrAZ8FZoAZ8LZ8AZ8MU8AZ8OTvAZ8SV8AZ8SX3AbAgFZAboJnoAbvGboAb8ATrAb8AZoAb8AgrAb8Al4Ab8Db8Ab8JnoAb8LX4Ab8LZrAb8LhrAb8MT8Ab8OUoAb8Qb8Ab8ST8AcrAUoAcrAc8AcrCZ3AcrFT3AcrFZrAcrJl4AcrJn3AcrMX3AcrOTvAc8AZ8Ac8MT8AfAcJXAgoFn4AgoGgvAgoGnrAgoLc8AgoMXoAgrLnrAkrSZ8AlFXCTAloHboAlrHbrAlrLhrAlrLkoAl3CZrAl3LUoAl3LZrAnrAl4AnrMT8An3HT4BT3IToBX4MnvBb!Ln$CTGXMnCToLZ4CTrHT8CT3JTrCT3RZrCT#GTvCU6GgvCU8Db8CU8GZrCU8HT8CboLl3CbrGgrCbrMU8Cb8DT3Cb8GnrCb8LX4Cb8MT8Cb8ObrCgrGgvCgrKX4Cl8FZoDTrAbvDTrDboDTrGT6DTrJgrDTrMX3DTrRZrDTrRg8DTvAVvDTvFZoDT3DT8DT3Ln3DT4HZrDT4MT8DT8AlrDT8MT8DUAkGbDUDbJnDYLnQlDbDUOYDbMTAnDbMXSnDboAT3DboFn4DboLnvDj6JTrGTCgFTGTGgFnGTJTMnGTLnPlGToJT8GTrCT3GTrLVoGTrLnvGTrMX3GTrMboGTvKl3GZClFnGZrDT3GZ8DTrGZ8FZ8GZ8MXvGZ8On8GZ8ST3GbCnQXGbMbFnGboFboGboJg3GboMXoGb3JTvGb3JboGb3Mn6Gb3Qb8GgDXLjGgMnAUGgrDloGgrHX4GgrSToGgvAXrGgvAZvGgvFbrGgvLl3GgvMnvGnDnLXGnrATrGnrMboGnuLl3HTATMnHTAgCnHTCTCTHTrGTvHTrHTvHTrJX8HTrLl8HTrMT8HTrMgoHTrOTrHTuOn3HTvAZrHTvDTvHTvGboHTvJU8HTvLl3HTvMXrHTvQb4HT4GT6HT4JT8HT4Jb#HT8Al3HT8GZrHT8GgrHT8HX4HT8Jb8HT8JnoHT8LTrHT8LgvHT8SToHT8SV8HUoJUoHUoJX8HUoLnrHXrLZoHXvAl3HX3LnrHX4FkvHX4LhrHX4MXoHX4OnoHZrAZ8HZrDb8HZrGZ8HZrJnrHZvGZ8HZvLnvHZ8JnvHZ8LhrHbCXJlHbMTAnHboJl4HbpLl3HbrJX8HbrLnrHbrMnvHbvRYrHgoSTrHgrFV8HgrGZ8HgrJXoHgrRnvHgvBb!HgvGTrHgvHX4HgvHn!HgvLTrHgvSU8HnDnLbHnFbJbHnvDn8Hn6GgvHn!BTvJTCTLnJTQgFnJTrAnvJTrLX4JTrOUoJTvFn3JTvLnrJTvNToJT3AgoJT3Jn4JT3LhvJT3ObrJT8AcrJT8Al3JT8JT8JT8JnoJT8LX4JT8LnrJT8MX3JT8Rg3JT8Sc8JUoBTvJU8AToJU8GZ8JU8GgvJU8JTrJU8JXrJU8JnrJU8LnvJU8ScvJXHnJlJXrGgvJXrJU8JXrLhrJXrMT8JXrMXrJXrQUoJXvCTvJXvGZ8JXvGgrJXvQT8JX8Ab8JX8DT8JX8GZ8JX8HZvJX8LnrJX8MT8JX8MXoJX8MnvJX8ST3JYGnCTJbAkGbJbCTAnJbLTAcJboDT3JboLb6JbrAnvJbrCn3JbrDl8JbrGboJbrIZoJbrJnvJbrMnvJbrQb4Jb8RZrJeAbAnJgJnFbJgScAnJgrATrJgvHZ8JgvMn4JlJlFbJlLiQXJlLjOnJlRbOlJlvNXoJlvRl3Jl4AcrJl8AUoJl8MnrJnFnMlJnHgGbJnoDT8JnoFV8JnoGgvJnoIT8JnoQToJnoRg3JnrCZ3JnrGgrJnrHTvJnrLf8JnrOX8JnvAT3JnvFZoJnvGT8JnvJl4JnvMT8JnvMX8JnvOXrJnvPX6JnvSX3JnvSZrJn3MT8Jn3MX8Jn3RTrLTATKnLTJnLTLTMXKnLTRTQlLToGb8LTrAZ8LTrCZ8LTrDb8LTrHT8LT3PX6LT4FZoLT$CTvLT$GgrLUvHX3LVoATrLVoAgoLVoJboLVoMX3LVoRg3LV8CZ3LV8FZoLV8GTvLXrDXoLXrFbrLXvAgvLXvFlrLXvLl3LXvRn6LX4Mb8LX8GT8LYCXMnLYrMnrLZoSTvLZrAZvLZrAloLZrFToLZrJXvLZrJboLZrJl4LZrLnrLZrMT8LZrOgvLZrRnvLZrST4LZvMX8LZvSlvLZ8AgoLZ8CT3LZ8JT8LZ8LV8LZ8LZoLZ8Lg8LZ8SV8LZ8SbrLZ$HT8LZ$Mn4La6CTvLbFbMnLbRYFTLbSnFZLboJT8LbrAT9LbrGb3LbrQb8LcrJX8LcrMXrLerHTvLerJbrLerNboLgrDb8LgrGZ8LgrHTrLgrMXrLgrSU8LgvJTrLgvLl3Lg6Ll3LhrLnrLhrMT8LhvAl4LiLnQXLkoAgrLkoJT8LkoJn4LlrSU8Ll3FZoLl3HTrLl3JX8Ll3JnoLl3LToLmLeFbLnDUFbLnLVAnLnrATrLnrAZoLnrAb8LnrAlrLnrGgvLnrJU8LnrLZrLnrLhrLnrMb8LnrOXrLnrSZ8LnvAb4LnvDTrLnvDl8LnvHTrLnvHbrLnvJT8LnvJU8LnvJbrLnvLhvLnvMX8LnvMb8LnvNnoLnvSU8Ln3Al3Ln4FZoLn4GT6Ln4JgvLn4LhrLn4MT8Ln4SToMToCZrMToJX8MToLX4MToLf8MToRg3MTrEloMTvGb6MT3BTrMT3Lb6MT8AcrMT8AgrMT8GZrMT8JnoMT8LnrMT8MX3MUOUAnMXAbFnMXoAloMXoJX8MXoLf8MXoLl8MXrAb8MXrDTvMXrGT8MXrGgrMXrHTrMXrLf8MXrMU8MXrOXvMXrQb8MXvGT8MXvHTrMXvLVoMX3AX3MX3Jn3MX3LhrMX3MX3MX4AlrMX4OboMX8GTvMX8GZrMX8GgrMX8JT8MX8JX8MX8LhrMX8MT8MYDUFbMYMgDbMbGnFfMbvLX4MbvLl3Mb8Mb8Mb8ST4MgGXCnMg8ATrMg8AgoMg8CZrMg8DTrMg8DboMg8HTrMg8JgrMg8LT8MloJXoMl8AhrMl8JT8MnLgAUMnoJXrMnoLX4MnoLhrMnoMT8MnrAl4MnrDb8MnrOTvMnrOgvMnrQb8MnrSU8MnvGgrMnvHZ8Mn3MToMn4DTrMn4LTrMn4Mg8NnBXAnOTFTFnOToAToOTrGgvOTrJX8OT3JXoOT6MTrOT8GgrOT8HTpOT8MToOUoHT8OUoJT8OUoLn3OXrAgoOXrDg8OXrMT8OXvSToOX6CTvOX8CZrOX8OgrOb6HgvOb8AToOb8MT8OcvLZ8OgvAlrOgvHTvOgvJTrOgvJnrOgvLZrOgvLn4OgvMT8OgvRTrOg8AZoOg8DbvOnrOXoOnvJn4OnvLhvOnvRTrOn3GgoOn3JnvOn6JbvOn8OTrPTGYFTPbBnFnPbGnDnPgDYQTPlrAnvPlrETvPlrLnvPlrMXvPlvFX4QTMTAnQTrJU8QYCnJlQYJlQlQbGTQbQb8JnrQb8LZoQb8LnvQb8MT8Qb8Ml8Qb8ST4QloAl4QloHZvQloJX8QloMn8QnJZOlRTrAZvRTrDTrRTvJn4RTvLhvRT4Jb8RZrAZrRZ8AkrRZ8JU8RZ8LV8RZ8LnvRbJlQXRg3GboRg3MnvRg8AZ8Rg8JboRg8Jl4RnLTCbRnvFl3RnvQb8SToAl4SToCZrSToFZoSToHXrSToJU8SToJgvSToJl4SToLhrSToMX3STrAlvSTrCT9STrCgrSTrGgrSTrHXrSTrHboSTrJnoSTrNboSTvLnrST4AZoST8Ab8ST8JT8SUoJn3SU6HZ#SU6JTvSU8Db8SU8HboSU8LgrSV8JT8SZrAcrSZrAl3SZrJT8SZrJnvSZrMT8SZvLUoSZ4FZoSZ8JnoSZ8RZrScoLnrScoMT8ScoMX8ScrAT4ScrAZ8ScrLZ8ScrLkvScvDb8ScvLf8ScvNToSgrFZrShvKnrSloHUoSloLnrSlrMXoSl8HgrSmrJUoSn3BX6","ATFlOn3ATLgrDYAT4MTAnAT8LTMnAYJnRTrAbGgJnrAbLV8LnAbvNTAnAeFbLg3AgOYMXoAlQbFboAnDboAfAnJgoJTBToDgAnBUJbAl3BboDUAnCTDlvLnCTFTrSnCYoQTLnDTwAbAnDUDTrSnDUHgHgrDX8LXFnDbJXAcrETvLTLnGTFTQbrGTMnGToGT3DUFbGUJlPX3GbQg8LnGboJbFnGb3GgAYGgAg8ScGgMbAXrGgvAbAnGnJTLnvGnvATFgHTDT6ATHTrDlJnHYLnMn8HZrSbJTHZ8LTFnHbFTJUoHgSeMT8HgrLjAnHgvAbAnHlFUrDlHnDgvAnHnHTFT3HnQTGnrJTAaMXvJTGbCn3JTOgrAnJXvAXMnJbMg8SnJbMnRg3Jb8LTMnJnAl3OnJnGYrQlJnJlQY3LTDlCn3LTJjLg3LTLgvFXLTMg3GTLV8HUOgLXFZLg3LXNXrMnLX8QXFnLX9AlMYLYLXPXrLZAbJU8LZDUJU8LZMXrSnLZ$AgFnLaPXrDULbFYrMnLbMn8LXLboJgJgLeFbLg3LgLZrSnLgOYAgoLhrRnJlLkCTrSnLkOnLhrLnFX%AYLnFZoJXLnHTvJbLnLloAbMTATLf8MTHgJn3MTMXrAXMT3MTFnMUITvFnMXFX%AYMXMXvFbMXrFTDbMYAcMX3MbLf8SnMb8JbFnMgMXrMTMgvAXFnMgvGgCmMnAloSnMnFnJTrOXvMXSnOX8HTMnObJT8ScObLZFl3ObMXCZoPTLgrQXPUFnoQXPU3RXJlPX3RkQXPbrJXQlPlrJbFnQUAhrDbQXGnCXvQYLnHlvQbLfLnvRTOgvJbRXJYrQlRYLnrQlRbLnrQlRlFT8JlRlFnrQXSTClCn3STHTrAnSTLZQlrSTMnGTrSToHgGbSTrGTDnSTvGXCnST3HgFbSU3HXAXSbAnJn3SbFT8LnScLfLnv","AT3JgJX8AT8FZoSnAT8JgFV8AT8LhrDbAZ8JT8DbAb8GgLhrAb8SkLnvAe8MT8SnAlMYJXLVAl3GYDTvAl3LfLnvBUDTvLl3CTOn3HTrCT3DUGgrCU8MT8AbCbFTrJUoCgrDb8MTDTLV8JX8DTLnLXQlDT8LZrSnDUQb8FZ8DUST4JnvDb8ScOUoDj6GbJl4GTLfCYMlGToAXvFnGboAXvLnGgAcrJn3GgvFnSToGnLf8JnvGn#HTDToHTLnFXJlHTvATFToHTvHTDToHTvMTAgoHT3STClvHT4AlFl6HT8HTDToHUoDgJTrHUoScMX3HbRZrMXoHboJg8LTHgDb8JTrHgMToLf8HgvLnLnoHnHn3HT4Hn6MgvAnJTJU8ScvJT3AaQT8JT8HTrAnJXrRg8AnJbAloMXoJbrATFToJbvMnoSnJgDb6GgvJgDb8MXoJgSX3JU8JguATFToJlPYLnQlJlQkDnLbJlQlFYJlJl8Lf8OTJnCTFnLbJnLTHXMnJnLXGXCnJnoFfRg3JnrMYRg3Jn3HgFl3KT8Dg8LnLTRlFnPTLTvPbLbvLVoSbrCZLXMY6HT3LXNU7DlrLXNXDTATLX8DX8LnLZDb8JU8LZMnoLhrLZSToJU8LZrLaLnrLZvJn3SnLZ8LhrSnLaJnoMT8LbFlrHTvLbrFTLnrLbvATLlvLb6OTFn3LcLnJZOlLeAT6Mn4LeJT3ObrLg6LXFlrLhrJg8LnLhvDlPX4LhvLfLnvLj6JTFT3LnFbrMXoLnQluCTvLnrQXCY6LnvLfLnvLnvMgLnvLnvSeLf8MTMbrJn3MT3JgST3MT8AnATrMT8LULnrMUMToCZrMUScvLf8MXoDT8SnMX6ATFToMX8AXMT8MX8FkMT8MX8HTrDUMX8ScoSnMYJT6CTvMgAcrMXoMg8SToAfMlvAXLg3MnFl3AnvOT3AnFl3OUoATHT8OU3RnLXrOXrOXrSnObPbvFn6Og8HgrSnOg8OX8DbPTvAgoJgPU3RYLnrPXrDnJZrPb8CTGgvPlrLTDlvPlvFUJnoQUvFXrQlQeMnoAl3QlrQlrSnRTFTrJUoSTDlLiLXSTFg6HT3STJgoMn4STrFTJTrSTrLZFl3ST4FnMXoSUrDlHUoScvHTvSnSfLkvMXo","AUoAcrMXoAZ8HboAg8AbOg6ATFgAg8AloMXoAl3AT8JTrAl8MX8MXoCT3SToJU8Cl8Db8MXoDT8HgrATrDboOT8MXoGTOTrATMnGT8LhrAZ8GnvFnGnQXHToGgvAcrHTvAXvLl3HbrAZoMXoHgBlFXLg3HgMnFXrSnHgrSb8JUoHn6HT8LgvITvATrJUoJUoLZrRnvJU8HT8Jb8JXvFX8QT8JXvLToJTrJYrQnGnQXJgrJnoATrJnoJU8ScvJnvMnvMXoLTCTLgrJXLTJlRTvQlLbRnJlQYvLbrMb8LnvLbvFn3RnoLdCVSTGZrLeSTvGXCnLg3MnoLn3MToLlrETvMT8SToAl3MbrDU6GTvMb8LX4LhrPlrLXGXCnSToLf8Rg3STrDb8LTrSTvLTHXMnSb3RYLnMnSgOg6ATFg","HUDlGnrQXrJTrHgLnrAcJYMb8DULc8LTvFgGnCk3Mg8JbAnLX4QYvFYHnMXrRUoJnGnvFnRlvFTJlQnoSTrBXHXrLYSUJgLfoMT8Se8DTrHbDb","AbDl8SToJU8An3RbAb8ST8DUSTrGnrAgoLbFU6Db8LTrMg8AaHT8Jb8ObDl8SToJU8Pb3RlvFYoJl"],i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";function o(e){return e>=40?e=e+168-40:e>=19&&(e=e+97-19),utf8.toUtf8String([225,132+(e>>6),128+(63&e)])}var s=null;function a(e){if(null==s&&(s=[],n.forEach(function(e,t){t+=4;for(var r=0;r<e.length;r+=t){for(var n="",a=0;a<t;a++)n+=o(i.indexOf(e[r+a]));s.push(n)}}),s.sort(),"0xf9eddeace9c5d3da9c93cf7d3cd38f6a13ed3affb933259ae865714e8a3ae71a"!==wordlist.check(e)))throw s=null,new Error("BIP39 Wordlist for ko (Korean) FAILED")}var c=new(function(e){function t(){return e.call(this,"ko")||this}return r(t,e),t.prototype.getWord=function(e){return a(this),s[e]},t.prototype.getWordIndex=function(e){return a(this),s.indexOf(e)},t}(wordlist.Wordlist));t.langKo=c,wordlist.register(c)});unwrapExports(langKo_1);var langKo_2=langKo_1.langKo,langIt_1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var n="AbacoAbbaglioAbbinatoAbeteAbissoAbolireAbrasivoAbrogatoAccadereAccennoAccusatoAcetoneAchilleAcidoAcquaAcreAcrilicoAcrobataAcutoAdagioAddebitoAddomeAdeguatoAderireAdipeAdottareAdulareAffabileAffettoAffissoAffrantoAforismaAfosoAfricanoAgaveAgenteAgevoleAggancioAgireAgitareAgonismoAgricoloAgrumetoAguzzoAlabardaAlatoAlbatroAlberatoAlboAlbumeAlceAlcolicoAlettoneAlfaAlgebraAlianteAlibiAlimentoAllagatoAllegroAllievoAllodolaAllusivoAlmenoAlogenoAlpacaAlpestreAltalenaAlternoAlticcioAltroveAlunnoAlveoloAlzareAmalgamaAmanitaAmarenaAmbitoAmbratoAmebaAmericaAmetistaAmicoAmmassoAmmendaAmmirareAmmonitoAmoreAmpioAmpliareAmuletoAnacardoAnagrafeAnalistaAnarchiaAnatraAncaAncellaAncoraAndareAndreaAnelloAngeloAngolareAngustoAnimaAnnegareAnnidatoAnnoAnnuncioAnonimoAnticipoAnziApaticoAperturaApodeApparireAppetitoAppoggioApprodoAppuntoAprileArabicaArachideAragostaAraldicaArancioAraturaArazzoArbitroArchivioArditoArenileArgentoArgineArgutoAriaArmoniaArneseArredatoArringaArrostoArsenicoArsoArteficeArzilloAsciuttoAscoltoAsepsiAsetticoAsfaltoAsinoAsolaAspiratoAsproAssaggioAsseAssolutoAssurdoAstaAstenutoAsticeAstrattoAtavicoAteismoAtomicoAtonoAttesaAttivareAttornoAttritoAttualeAusilioAustriaAutistaAutonomoAutunnoAvanzatoAvereAvvenireAvvisoAvvolgereAzioneAzotoAzzimoAzzurroBabeleBaccanoBacinoBacoBadessaBadilataBagnatoBaitaBalconeBaldoBalenaBallataBalzanoBambinoBandireBaraondaBarbaroBarcaBaritonoBarlumeBaroccoBasilicoBassoBatostaBattutoBauleBavaBavosaBeccoBeffaBelgioBelvaBendaBenevoleBenignoBenzinaBereBerlinaBetaBibitaBiciBidoneBifidoBigaBilanciaBimboBinocoloBiologoBipedeBipolareBirbanteBirraBiscottoBisestoBisnonnoBisonteBisturiBizzarroBlandoBlattaBollitoBonificoBordoBoscoBotanicoBottinoBozzoloBraccioBradipoBramaBrancaBravuraBretellaBrevettoBrezzaBrigliaBrillanteBrindareBroccoloBrodoBronzinaBrulloBrunoBubboneBucaBudinoBuffoneBuioBulboBuonoBurloneBurrascaBussolaBustaCadettoCaducoCalamaroCalcoloCalesseCalibroCalmoCaloriaCambusaCamerataCamiciaCamminoCamolaCampaleCanapaCandelaCaneCaninoCanottoCantinaCapaceCapelloCapitoloCapogiroCapperoCapraCapsulaCarapaceCarcassaCardoCarismaCarovanaCarrettoCartolinaCasaccioCascataCasermaCasoCassoneCastelloCasualeCatastaCatenaCatrameCautoCavilloCedibileCedrataCefaloCelebreCellulareCenaCenoneCentesimoCeramicaCercareCertoCerumeCervelloCesoiaCespoCetoChelaChiaroChiccaChiedereChimeraChinaChirurgoChitarraCiaoCiclismoCifrareCignoCilindroCiottoloCircaCirrosiCitricoCittadinoCiuffoCivettaCivileClassicoClinicaCloroCoccoCodardoCodiceCoerenteCognomeCollareColmatoColoreColposoColtivatoColzaComaCometaCommandoComodoComputerComuneConcisoCondurreConfermaCongelareConiugeConnessoConoscereConsumoContinuoConvegnoCopertoCopioneCoppiaCopricapoCorazzaCordataCoricatoCorniceCorollaCorpoCorredoCorsiaCorteseCosmicoCostanteCotturaCovatoCratereCravattaCreatoCredereCremosoCrescitaCretaCricetoCrinaleCrisiCriticoCroceCronacaCrostataCrucialeCruscaCucireCuculoCuginoCullatoCupolaCuratoreCursoreCurvoCuscinoCustodeDadoDainoDalmataDamerinoDanielaDannosoDanzareDatatoDavantiDavveroDebuttoDecennioDecisoDeclinoDecolloDecretoDedicatoDefinitoDeformeDegnoDelegareDelfinoDelirioDeltaDemenzaDenotatoDentroDepositoDerapataDerivareDerogaDescrittoDesertoDesiderioDesumereDetersivoDevotoDiametroDicembreDiedroDifesoDiffusoDigerireDigitaleDiluvioDinamicoDinnanziDipintoDiplomaDipoloDiradareDireDirottoDirupoDisagioDiscretoDisfareDisgeloDispostoDistanzaDisumanoDitoDivanoDiveltoDividereDivoratoDobloneDocenteDoganaleDogmaDolceDomatoDomenicaDominareDondoloDonoDormireDoteDottoreDovutoDozzinaDragoDruidoDubbioDubitareDucaleDunaDuomoDupliceDuraturoEbanoEccessoEccoEclissiEconomiaEderaEdicolaEdileEditoriaEducareEgemoniaEgliEgoismoEgregioElaboratoElargireEleganteElencatoElettoElevareElficoElicaElmoElsaElusoEmanatoEmblemaEmessoEmiroEmotivoEmozioneEmpiricoEmuloEndemicoEnduroEnergiaEnfasiEnotecaEntrareEnzimaEpatiteEpilogoEpisodioEpocaleEppureEquatoreErarioErbaErbosoEredeEremitaErigereErmeticoEroeErosivoErranteEsagonoEsameEsanimeEsaudireEscaEsempioEsercitoEsibitoEsigenteEsistereEsitoEsofagoEsortatoEsosoEspansoEspressoEssenzaEssoEstesoEstimareEstoniaEstrosoEsultareEtilicoEtnicoEtruscoEttoEuclideoEuropaEvasoEvidenzaEvitatoEvolutoEvvivaFabbricaFaccendaFachiroFalcoFamigliaFanaleFanfaraFangoFantasmaFareFarfallaFarinosoFarmacoFasciaFastosoFasulloFaticareFatoFavolosoFebbreFecolaFedeFegatoFelpaFeltroFemminaFendereFenomenoFermentoFerroFertileFessuraFestivoFettaFeudoFiabaFiduciaFifaFiguratoFiloFinanzaFinestraFinireFioreFiscaleFisicoFiumeFlaconeFlamencoFleboFlemmaFloridoFluenteFluoroFobicoFocacciaFocosoFoderatoFoglioFolataFolcloreFolgoreFondenteFoneticoFoniaFontanaForbitoForchettaForestaFormicaFornaioForoFortezzaForzareFosfatoFossoFracassoFranaFrassinoFratelloFreccettaFrenataFrescoFrigoFrollinoFrondeFrugaleFruttaFucilataFucsiaFuggenteFulmineFulvoFumanteFumettoFumosoFuneFunzioneFuocoFurboFurgoneFuroreFusoFutileGabbianoGaffeGalateoGallinaGaloppoGamberoGammaGaranziaGarboGarofanoGarzoneGasdottoGasolioGastricoGattoGaudioGazeboGazzellaGecoGelatinaGelsoGemelloGemmatoGeneGenitoreGennaioGenotipoGergoGhepardoGhiaccioGhisaGialloGildaGineproGiocareGioielloGiornoGioveGiratoGironeGittataGiudizioGiuratoGiustoGlobuloGlutineGnomoGobbaGolfGomitoGommoneGonfioGonnaGovernoGracileGradoGraficoGrammoGrandeGrattareGravosoGraziaGrecaGreggeGrifoneGrigioGrinzaGrottaGruppoGuadagnoGuaioGuantoGuardareGufoGuidareIbernatoIconaIdenticoIdillioIdoloIdraIdricoIdrogenoIgieneIgnaroIgnoratoIlareIllesoIllogicoIlludereImballoImbevutoImboccoImbutoImmaneImmersoImmolatoImpaccoImpetoImpiegoImportoImprontaInalareInarcareInattivoIncantoIncendioInchinoIncisivoInclusoIncontroIncrocioIncuboIndagineIndiaIndoleIneditoInfattiInfilareInflittoIngaggioIngegnoIngleseIngordoIngrossoInnescoInodoreInoltrareInondatoInsanoInsettoInsiemeInsonniaInsulinaIntasatoInteroIntonacoIntuitoInumidireInvalidoInveceInvitoIperboleIpnoticoIpotesiIppicaIrideIrlandaIronicoIrrigatoIrrorareIsolatoIsotopoIstericoIstitutoIstriceItaliaIterareLabbroLabirintoLaccaLaceratoLacrimaLacunaLaddoveLagoLampoLancettaLanternaLardosoLargaLaringeLastraLatenzaLatinoLattugaLavagnaLavoroLegaleLeggeroLemboLentezzaLenzaLeoneLepreLesivoLessatoLestoLetteraleLevaLevigatoLiberoLidoLievitoLillaLimaturaLimitareLimpidoLineareLinguaLiquidoLiraLiricaLiscaLiteLitigioLivreaLocandaLodeLogicaLombareLondraLongevoLoquaceLorenzoLotoLotteriaLuceLucidatoLumacaLuminosoLungoLupoLuppoloLusingaLussoLuttoMacabroMacchinaMaceroMacinatoMadamaMagicoMagliaMagneteMagroMaiolicaMalafedeMalgradoMalintesoMalsanoMaltoMalumoreManaManciaMandorlaMangiareManifestoMannaroManovraMansardaMantideManubrioMappaMaratonaMarcireMarettaMarmoMarsupioMascheraMassaiaMastinoMaterassoMatricolaMattoneMaturoMazurcaMeandroMeccanicoMecenateMedesimoMeditareMegaMelassaMelisMelodiaMeningeMenoMensolaMercurioMerendaMerloMeschinoMeseMessereMestoloMetalloMetodoMettereMiagolareMicaMicelioMicheleMicroboMidolloMieleMiglioreMilanoMiliteMimosaMineraleMiniMinoreMirinoMirtilloMiscelaMissivaMistoMisurareMitezzaMitigareMitraMittenteMnemonicoModelloModificaModuloMoganoMogioMoleMolossoMonasteroMoncoMondinaMonetarioMonileMonotonoMonsoneMontatoMonvisoMoraMordereMorsicatoMostroMotivatoMotosegaMottoMovenzaMovimentoMozzoMuccaMucosaMuffaMughettoMugnaioMulattoMulinelloMultiploMummiaMuntoMuovereMuraleMusaMuscoloMusicaMutevoleMutoNababboNaftaNanometroNarcisoNariceNarratoNascereNastrareNaturaleNauticaNaviglioNebulosaNecrosiNegativoNegozioNemmenoNeofitaNerettoNervoNessunoNettunoNeutraleNeveNevroticoNicchiaNinfaNitidoNobileNocivoNodoNomeNominaNordicoNormaleNorvegeseNostranoNotareNotiziaNotturnoNovellaNucleoNullaNumeroNuovoNutrireNuvolaNuzialeOasiObbedireObbligoObeliscoOblioOboloObsoletoOccasioneOcchioOccidenteOccorrereOccultareOcraOculatoOdiernoOdorareOffertaOffrireOffuscatoOggettoOggiOgnunoOlandeseOlfattoOliatoOlivaOlogrammaOltreOmaggioOmbelicoOmbraOmegaOmissioneOndosoOnereOniceOnnivoroOnorevoleOntaOperatoOpinioneOppostoOracoloOrafoOrdineOrecchinoOreficeOrfanoOrganicoOrigineOrizzonteOrmaOrmeggioOrnativoOrologioOrrendoOrribileOrtensiaOrticaOrzataOrzoOsareOscurareOsmosiOspedaleOspiteOssaOssidareOstacoloOsteOtiteOtreOttagonoOttimoOttobreOvaleOvestOvinoOviparoOvocitoOvunqueOvviareOzioPacchettoPacePacificoPadellaPadronePaesePagaPaginaPalazzinaPalesarePallidoPaloPaludePandoroPannelloPaoloPaonazzoPapricaParabolaParcellaParerePargoloPariParlatoParolaPartireParvenzaParzialePassivoPasticcaPataccaPatologiaPattumePavonePeccatoPedalarePedonalePeggioPelosoPenarePendicePenisolaPennutoPenombraPensarePentolaPepePepitaPerbenePercorsoPerdonatoPerforarePergamenaPeriodoPermessoPernoPerplessoPersuasoPertugioPervasoPesatorePesistaPesoPestiferoPetaloPettinePetulantePezzoPiacerePiantaPiattinoPiccinoPicozzaPiegaPietraPifferoPigiamaPigolioPigroPilaPiliferoPillolaPilotaPimpantePinetaPinnaPinoloPioggiaPiomboPiramidePireticoPiritePirolisiPitonePizzicoPlaceboPlanarePlasmaPlatanoPlenarioPochezzaPoderosoPodismoPoesiaPoggiarePolentaPoligonoPollicePolmonitePolpettaPolsoPoltronaPolverePomicePomodoroPontePopolosoPorfidoPorosoPorporaPorrePortataPosaPositivoPossessoPostulatoPotassioPoterePranzoPrassiPraticaPreclusoPredicaPrefissoPregiatoPrelievoPremerePrenotarePreparatoPresenzaPretestoPrevalsoPrimaPrincipePrivatoProblemaProcuraProdurreProfumoProgettoProlungaPromessaPronomePropostaProrogaProtesoProvaPrudentePrugnaPruritoPsichePubblicoPudicaPugilatoPugnoPulcePulitoPulsantePuntarePupazzoPupillaPuroQuadroQualcosaQuasiQuerelaQuotaRaccoltoRaddoppioRadicaleRadunatoRafficaRagazzoRagioneRagnoRamarroRamingoRamoRandagioRantolareRapatoRapinaRappresoRasaturaRaschiatoRasenteRassegnaRastrelloRataRavvedutoRealeRecepireRecintoReclutaReconditoRecuperoRedditoRedimereRegalatoRegistroRegolaRegressoRelazioneRemareRemotoRennaReplicaReprimereReputareResaResidenteResponsoRestauroReteRetinaRetoricaRettificaRevocatoRiassuntoRibadireRibelleRibrezzoRicaricaRiccoRicevereRiciclatoRicordoRicredutoRidicoloRidurreRifasareRiflessoRiformaRifugioRigareRigettatoRighelloRilassatoRilevatoRimanereRimbalzoRimedioRimorchioRinascitaRincaroRinforzoRinnovoRinomatoRinsavitoRintoccoRinunciaRinvenireRiparatoRipetutoRipienoRiportareRipresaRipulireRisataRischioRiservaRisibileRisoRispettoRistoroRisultatoRisvoltoRitardoRitegnoRitmicoRitrovoRiunioneRivaRiversoRivincitaRivoltoRizomaRobaRoboticoRobustoRocciaRocoRodaggioRodereRoditoreRogitoRollioRomanticoRompereRonzioRosolareRospoRotanteRotondoRotulaRovescioRubizzoRubricaRugaRullinoRumineRumorosoRuoloRupeRussareRusticoSabatoSabbiareSabotatoSagomaSalassoSaldaturaSalgemmaSalivareSalmoneSaloneSaltareSalutoSalvoSapereSapidoSaporitoSaracenoSarcasmoSartoSassosoSatelliteSatiraSatolloSaturnoSavanaSavioSaziatoSbadiglioSbalzoSbancatoSbarraSbattereSbavareSbendareSbirciareSbloccatoSbocciatoSbrinareSbruffoneSbuffareScabrosoScadenzaScalaScambiareScandaloScapolaScarsoScatenareScavatoSceltoScenicoScettroSchedaSchienaSciarpaScienzaScindereScippoSciroppoScivoloSclerareScodellaScolpitoScompartoSconfortoScoprireScortaScossoneScozzeseScribaScrollareScrutinioScuderiaScultoreScuolaScuroScusareSdebitareSdoganareSeccaturaSecondoSedanoSeggiolaSegnalatoSegregatoSeguitoSelciatoSelettivoSellaSelvaggioSemaforoSembrareSemeSeminatoSempreSensoSentireSepoltoSequenzaSerataSerbatoSerenoSerioSerpenteSerraglioServireSestinaSetolaSettimanaSfaceloSfaldareSfamatoSfarzosoSfaticatoSferaSfidaSfilatoSfingeSfocatoSfoderareSfogoSfoltireSforzatoSfrattoSfruttatoSfuggitoSfumareSfusoSgabelloSgarbatoSgonfiareSgorbioSgrassatoSguardoSibiloSiccomeSierraSiglaSignoreSilenzioSillabaSimboloSimpaticoSimulatoSinfoniaSingoloSinistroSinoSintesiSinusoideSiparioSismaSistoleSituatoSlittaSlogaturaSlovenoSmarritoSmemoratoSmentitoSmeraldoSmilzoSmontareSmottatoSmussatoSnellireSnervatoSnodoSobbalzoSobrioSoccorsoSocialeSodaleSoffittoSognoSoldatoSolenneSolidoSollazzoSoloSolubileSolventeSomaticoSommaSondaSonettoSonniferoSopireSoppesoSopraSorgereSorpassoSorrisoSorsoSorteggioSorvolatoSospiroSostaSottileSpadaSpallaSpargereSpatolaSpaventoSpazzolaSpecieSpedireSpegnereSpelaturaSperanzaSpessoreSpettraleSpezzatoSpiaSpigolosoSpillatoSpinosoSpiraleSplendidoSportivoSposoSprangaSprecareSpronatoSpruzzoSpuntinoSquilloSradicareSrotolatoStabileStaccoStaffaStagnareStampatoStantioStarnutoStaseraStatutoSteloSteppaSterzoStilettoStimaStirpeStivaleStizzosoStonatoStoricoStrappoStregatoStriduloStrozzareStruttoStuccareStufoStupendoSubentroSuccosoSudoreSuggeritoSugoSultanoSuonareSuperboSupportoSurgelatoSurrogatoSussurroSuturaSvagareSvedeseSveglioSvelareSvenutoSveziaSviluppoSvistaSvizzeraSvoltaSvuotareTabaccoTabulatoTacciareTaciturnoTaleTalismanoTamponeTanninoTaraTardivoTargatoTariffaTarpareTartarugaTastoTatticoTavernaTavolataTazzaTecaTecnicoTelefonoTemerarioTempoTemutoTendoneTeneroTensioneTentacoloTeoremaTermeTerrazzoTerzettoTesiTesseratoTestatoTetroTettoiaTifareTigellaTimbroTintoTipicoTipografoTiraggioTiroTitanioTitoloTitubanteTizioTizzoneToccareTollerareToltoTombolaTomoTonfoTonsillaTopazioTopologiaToppaTorbaTornareTorroneTortoraToscanoTossireTostaturaTotanoTraboccoTracheaTrafilaTragediaTralcioTramontoTransitoTrapanoTrarreTraslocoTrattatoTraveTrecciaTremolioTrespoloTributoTrichecoTrifoglioTrilloTrinceaTrioTristezzaTrituratoTrivellaTrombaTronoTroppoTrottolaTrovareTruccatoTubaturaTuffatoTulipanoTumultoTunisiaTurbareTurchinoTutaTutelaUbicatoUccelloUccisoreUdireUditivoUffaUfficioUgualeUlisseUltimatoUmanoUmileUmorismoUncinettoUngereUnghereseUnicornoUnificatoUnisonoUnitarioUnteUovoUpupaUraganoUrgenzaUrloUsanzaUsatoUscitoUsignoloUsuraioUtensileUtilizzoUtopiaVacanteVaccinatoVagabondoVagliatoValangaValgoValicoVallettaValorosoValutareValvolaVampataVangareVanitosoVanoVantaggioVanveraVaporeVaranoVarcatoVarianteVascaVedettaVedovaVedutoVegetaleVeicoloVelcroVelinaVellutoVeloceVenatoVendemmiaVentoVeraceVerbaleVergognaVerificaVeroVerrucaVerticaleVescicaVessilloVestaleVeteranoVetrinaVetustoViandanteVibranteVicendaVichingoVicinanzaVidimareVigiliaVignetoVigoreVileVillanoViminiVincitoreViolaViperaVirgolaVirologoVirulentoViscosoVisioneVispoVissutoVisuraVitaVitelloVittimaVivandaVividoViziareVoceVogaVolatileVolereVolpeVoragineVulcanoZampognaZannaZappatoZatteraZavorraZefiroZelanteZeloZenzeroZerbinoZibettoZincoZirconeZittoZollaZoticoZuccheroZufoloZuluZuppa",i=null;function o(e){if(null==i&&(i=n.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x5c1362d88fd4cf614a96f3234941d29f7d37c08c5292fde03bf62c2db6ff7620"!==wordlist.check(e)))throw i=null,new Error("BIP39 Wordlist for it (Italian) FAILED")}var s=new(function(e){function t(){return e.call(this,"it")||this}return r(t,e),t.prototype.getWord=function(e){return o(this),i[e]},t.prototype.getWordIndex=function(e){return o(this),i.indexOf(e)},t}(wordlist.Wordlist));t.langIt=s,wordlist.register(s)});unwrapExports(langIt_1);var langIt_2=langIt_1.langIt,langZh=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var n="}aE#4A=Yv&co#4N#6G=cJ&SM#66|/Z#4t&kn~46#4K~4q%b9=IR#7l,mB#7W_X2*dl}Uo~7s}Uf&Iw#9c&cw~6O&H6&wx&IG%v5=IQ~8a&Pv#47$PR&50%Ko&QM&3l#5f,D9#4L|/H&tQ;v0~6n]nN<di,AM=W5%QO&ka&ua,hM^tm=zV=JA=wR&+X]7P&NB#4J#5L|/b[dA}tJ<Do&6m&u2[U1&Kb.HM&mC=w0&MW<rY,Hq#6M}QG,13&wP}Jp]Ow%ue&Kg<HP<D9~4k~9T&I2_c6$9T#9/[C5~7O~4a=cs&O7=KK=An&l9$6U$8A&uD&QI|/Y&bg}Ux&F2#6b}E2&JN&kW&kp=U/&bb=Xl<Cj}k+~5J#6L&5z&9i}b4&Fo,ho(X0_g3~4O$Fz&QE<HN=Ww]6/%GF-Vw=tj&/D&PN#9g=YO}cL&Of&PI~5I&Ip=vU=IW#9G;0o-wU}ss&QR<BT&R9=tk$PY_dh&Pq-yh]7T,nj.Xu=EP&76=cI&Fs*Xg}z7$Gb&+I=DF,AF=cA}rL#7j=Dz&3y<Aa$52=PQ}b0(iY$Fa}oL&xV#6U=ec=WZ,xh%RY<dp#9N&Fl&44=WH*A7=sh&TB&8P=07;u+&PK}uh}J5#72)V/=xC,AB$k0&f6;1E|+5=1B,3v]6n&wR%b+&xx]7f=Ol}fl;+D^wG]7E;nB;uh^Ir&l5=JL,nS=cf=g5;u6|/Q$Gc=MH%Hg#5d%M6^86=U+$Gz,l/,ir^5y&Ba&/F-IY&FI&be%IZ#77&PW_Nu$kE(Yf&NX]7Z,Jy&FJ(Xo&Nz#/d=y7&MX<Ag}Z+;nE]Dt(iG#4D=13&Pj~4c%v8&Zo%OL&/X#4W<HR&ie~6J_1O(Y2=y5=Ad*cv_eB#6k&PX:BU#7A;uk&Ft&Fx_dD=U2;vB=U5=4F}+O&GN.HH:9s=b0%NV(jO&IH=JT}Z9=VZ<Af,Kx^4m&uJ%c6,6r;9m#+L}cf%Kh&F3~4H=vP}bu,Hz|++,1w]nv}k6;uu$jw*Kl*WX&uM[x7&Fr[m7$NO&QN]hu=JN}nR^8g#/h(ps|KC;vd}xz=V0}p6&FD$G1#7K<bG_4p~8g&cf;u4=tl}+k%5/}fz;uw<cA=u1}gU}VM=LJ=eX&+L&Pr#4U}p2:nC,2K]7H:jF&9x}uX#9O=MB<fz~8X~5m&4D&kN&u5%E/(h7(ZF&VG<de(qM|/e-Wt=3x(a+,/R]f/&ND$Ro&nU}0g=KA%kH&NK$Ke<dS}cB&IX~5g$TN]6m=Uv,Is&Py=Ef%Kz#+/%bi&+A<F4$OG&4C&FL#9V<Zk=2I_eE&6c]nw&kq$HG}y+&A8$P3}OH=XP]70%IS(AJ_gH%GZ&tY&AZ=vb~6y&/r=VI=Wv<Zi=fl=xf&eL}c8}OL=MJ=g8$F7=YT}9u=0+^xC}JH&nL^N0~4T]K2,Cy%OC#6s;vG(AC^xe^cG&MF}Br#9P;wD-7h$O/&xA}Fn^PC]6i]7G&8V$Qs;vl(TB~73~4l<mW&6V=2y&uY&+3)aP}XF;LP&kx$wU=t7;uy<FN&lz)7E=Oo*Y+;wI}9q}le;J6&Ri&4t&Qr#8B=cb&vG=J5|Ql(h5<Yy~4+}QD,Lx=wn%K/&RK=dO&Pw,Q9=co%4u;9u}g0@6a^4I%b0=zo|/c&tX=dQ=OS#+b=yz_AB&wB&Pm=W9$HP_gR=62=AO=ti=hI,oA&jr&dH=tm&b6$P2(x8=zi;nG~7F;05]0n[Ix&3m}rg=Xp=cd&uz]7t;97=cN;vV<jf&FF&F1=6Q&Ik*Kk&P4,2z=fQ]7D&3u,H0=d/}Uw<ZN<7R}Kv;0f$H7,MD]7n$F0#88~9Z%da=by;+T#/u=VF&fO&kr^kf<AB]sU,I5$Ng&Pz;0i&QD&vM=Yl:BM;nJ_xJ]U7&Kf&30,3f|Z9*dC)je_jA&Q4&Kp$NH(Yz#6S&Id%Ib=KX,AD=KV%dP}tW&Pk^+E_Ni=cq,3R}VZ(Si=b+}rv;0j}rZ]uA,/w(Sx&Jv$w9&4d&wE,NJ$Gy=J/]Ls#7k<ZQ<Y/&uj]Ov$PM;v3,2F&+u:up=On&3e,Jv;90=J+&Qm]6q}bK#+d~8Y(h2]hA;99&AS=I/}qB&dQ}yJ-VM}Vl&ui,iB&G3|Dc]7d=eQ%dX%JC_1L~4d^NP;vJ&/1)ZI#7N]9X[bQ&PL=0L(UZ,Lm&kc&IR}n7(iR<AQ<dg=33=vN}ft}au]7I,Ba=x9=dR~6R&Tq=Xi,3d$Nr&Bc}DI&ku&vf]Dn,/F&iD,Ll&Nw=0y&I7=Ls=/A&tU=Qe}Ua&uk&+F=g4=gh=Vj#+1&Qn}Uy*44#5F,Pc&Rz*Xn=oh=5W;0n_Nf(iE<Y7=vr=Zu]oz#5Z%mI=kN=Bv_Jp(T2;vt_Ml<FS&uI=L/&6P]64$M7}86<bo%QX(SI%IY&VK=Al&Ux;vv;ut*E/%uh<ZE|O3,M2(yc]yu=Wk&tp:Ex}hr,Cl&WE)+Z=8U}I2_4Q,hA_si=iw=OM=tM=yZ%Ia=U7;wT}b+;uo=Za}yS!5x}HD}fb#5O_dA;Nv%uB(yB;01(Sf}Fk;v7}Pt#8v<mZ#7L,/r&Pl~4w&f5=Ph$Fw_LF&8m,bL=yJ&BH}p/*Jn}tU~5Q;wB(h6]Df]8p^+B;E4&Wc=d+;Ea&bw$8C&FN,DM=Yf}mP~5w=fT#6V=mC=Fi=AV}jB&AN}lW}aH#/D)dZ;hl;vE}/7,CJ;31&w8,hj%u9_Js=jJ&4M~8k=TN&eC}nL&uc-wi&lX}dj=Mv=e2#6u=cr$uq$6G]8W}Jb:nm=Yg<b3(UA;vX&6n&xF=KT,jC,De&R8&oY=Zv&oB]7/=Z2&Oa}bf,hh(4h^tZ&72&Nx;D2&xL~5h~40)ZG)h+=OJ&RA]Bv$yB=Oq=df,AQ%Jn}OJ;11,3z&Tl&tj;v+^Hv,Dh(id=s+]7N&N3)9Q~8f,S4=uW=w4&uX,LX&3d]CJ&yp&8x<b2_do&lP=y/<cy_dG=Oi=7R(VH(lt_1T,Iq_AA;12^6T%k6#8K[B1{oO<AU[Bt;1b$9S&Ps<8T=St{bY,jB(Zp&63&Uv$9V,PM]6v&Af}zW[bW_oq}sm}nB&Kq&gC&ff_eq_2m&5F&TI}rf}Gf;Zr_z9;ER&jk}iz_sn<BN~+n&vo=Vi%97|ZR=Wc,WE&6t]6z%85(ly#84=KY)6m_5/=aX,N3}Tm&he&6K]tR_B2-I3;u/&hU&lH<AP=iB&IA=XL;/5&Nh=wv<BH#79=vS=zl<AA=0X_RG}Bw&9p$NW,AX&kP_Lp&/Z(Tc]Mu}hs#6I}5B&cI<bq&H9#6m=K9}vH(Y1(Y0#4B&w6,/9&gG<bE,/O=zb}I4_l8<B/;wL%Qo<HO[Mq=XX}0v&BP&F4(mG}0i}nm,EC=9u{I3,xG&/9=JY*DK&hR)BX=EI=cx=b/{6k}yX%A+&wa}Xb=la;wi^lL;0t}jo&Qb=xg=XB}iO<qo{bR=NV&8f=a0&Jy;0v=uK)HK;vN#6h&jB(h/%ud&NI%wY.X7=Pt}Cu-uL&Gs_hl%mH,tm]78=Lb^Q0#7Y=1u<Bt&+Q=Co_RH,w3;1e}ux<aU;ui}U3&Q5%bt]63&UQ|0l&uL}O7&3o,AV&dm|Nj(Xt*5+(Uu&Hh(p7(UF=VR=Bp^Jl&Hd[ix)9/=Iq]C8<67]66}mB%6f}bb}JI]8T$HA}db=YM&pa=2J}tS&Y0=PS&y4=cX$6E,hX,XP&nR;04,FQ&l0&Vm_Dv#5Y~8Z=Bi%MA]6x=JO:+p,Az&9q,Hj~6/}SD=K1:EJ}nA;Qo#/E]9R,Ie&6X%W3]61&v4=xX_MC=0q;06(Xq=fs}IG}Dv=0l}o7$iZ;9v&LH&DP-7a&OY,SZ,Kz,Cv&dh=fx|Nh,F/~7q=XF&w+;9n&Gw;0h}Z7<7O&JK(S7&LS<AD<ac=wo<Dt&zw%4B=4v#8P;9o~6p*vV=Tm,Or&I6=1q}nY=P0=gq&Bl&Uu,Ch%yb}UY=zh}dh}rl(T4_xk(YA#8R*xH,IN}Jn]7V}C4&Ty}j3]7p=cL=3h&wW%Qv<Z3=f0&RI&+S(ic_zq}oN&/Y=z1;Td=LW=0e=OI(Vc,+b^ju(UL;0r:Za%8v=Rp=zw&58&73&wK}qX]6y&8E)a2}WR=wP^ur&nQ<cH}Re=Aq&wk}Q0&+q=PP,Gc|/d^k5,Fw]8Y}Pg]p3=ju=ed}r5_yf&Cs]7z$/G<Cm&Jp&54_1G_gP_Ll}JZ;0u]k8_7k(Sg]65{9i=LN&Sx&WK,iW&fD&Lk{9a}Em-9c#8N&io=sy]8d&nT&IK(lx#7/$lW(Td<s8~49,3o<7Y=MW(T+_Jr&Wd,iL}Ct=xh&5V;v4&8n%Kx=iF&l2_0B{B+,If(J0,Lv;u8=Kx-vB=HC&vS=Z6&fU&vE^xK;3D=4h=MR#45:Jw;0d}iw=LU}I5=I0]gB*im,K9}GU,1k_4U&Tt=Vs(iX&lU(TF#7y,ZO}oA&m5#5P}PN}Uz=hM<B1&FB<aG,e6~7T<tP(UQ_ZT=wu&F8)aQ]iN,1r_Lo&/g:CD}84{J1_Ki&Na&3n$jz&FE=dc;uv;va}in}ll=fv(h1&3h}fp=Cy}BM(+E~8m}lo%v7=hC(T6$cj=BQ=Bw(DR,2j=Ks,NS|F+;00=fU=70}Mb(YU;+G&m7&hr=Sk%Co]t+(X5_Jw}0r}gC(AS-IP&QK<Z2#8Q$WC]WX}T2&pG_Ka,HC=R4&/N;Z+;ch(C7,D4$3p_Mk&B2$8D=n9%Ky#5z(CT&QJ#7B]DC]gW}nf~5M;Iw#80}Tc_1F#4Z-aC}Hl=ph=fz,/3=aW}JM}nn;DG;vm}wn,4P}T3;wx&RG$u+}zK=0b;+J_Ek{re<aZ=AS}yY#5D]7q,Cp}xN=VP*2C}GZ}aG~+m_Cs=OY#6r]6g<GS}LC(UB=3A=Bo}Jy<c4}Is;1P<AG}Op<Z1}ld}nS=1Z,yM&95&98=CJ(4t:2L$Hk=Zo}Vc;+I}np&N1}9y=iv}CO*7p=jL)px]tb^zh&GS&Vl%v/;vR=14=zJ&49|/f]hF}WG;03=8P}o/&Gg&rp;DB,Kv}Ji&Pb;aA^ll(4j%yt}+K$Ht#4y&hY]7Y<F1,eN}bG(Uh%6Z]t5%G7;+F_RE;it}tL=LS&Da=Xx(S+(4f=8G=yI}cJ}WP=37=jS}pX}hd)fp<A8=Jt~+o$HJ=M6}iX=g9}CS=dv=Cj(mP%Kd,xq|+9&LD(4/=Xm&QP=Lc}LX&fL;+K=Op(lu=Qs.qC:+e&L+=Jj#8w;SL]7S(b+#4I=c1&nG_Lf&uH;+R)ZV<bV%B/,TE&0H&Jq&Ah%OF&Ss(p2,Wv&I3=Wl}Vq;1L&lJ#9b_1H=8r=b8=JH(SZ=hD=J2#7U,/U#/X~6P,FU<eL=jx,mG=hG=CE&PU=Se(qX&LY=X6=y4&tk&QQ&tf=4g&xI}W+&mZ=Dc#7w}Lg;DA;wQ_Kb(cJ=hR%yX&Yb,hw{bX_4X;EP;1W_2M}Uc=b5(YF,CM&Tp^OJ{DD]6s=vF=Yo~8q}XH}Fu%P5(SJ=Qt;MO]s8<F3&B3&8T(Ul-BS*dw&dR<87}/8]62$PZ]Lx<Au}9Q]7c=ja=KR,Go,Us&v6(qk}pG&G2=ev^GM%w4&H4]7F&dv]J6}Ew:9w=sj-ZL}Ym$+h(Ut(Um~4n=Xs(U7%eE=Qc_JR<CA#6t<Fv|/I,IS,EG<F2(Xy$/n<Fa(h9}+9_2o&N4#7X<Zq|+f_Dp=dt&na,Ca=NJ)jY=8C=YG=s6&Q+<DO}D3=xB&R1(lw;Qn<bF(Cu|/B}HV=SS&n7,10&u0]Dm%A6^4Q=WR(TD=Xo<GH,Rj(l8)bP&n/=LM&CF,F5&ml=PJ;0k=LG=tq,Rh,D6@4i=1p&+9=YC%er_Mh;nI;0q=Fw]80=xq=FM$Gv;v6&nc;wK%H2&Kj;vs,AA=YP,66}bI(qR~5U=6q~4b$Ni=K5.X3$So&Iu(p+]8G=Cf=RY(TS_O3(iH&57=fE=Dg_Do#9z#7H;FK{qd_2k%JR}en&gh_z8;Rx}9p<cN_Ne,DO;LN_7o~/p=NF=5Y}gN<ce<C1,QE]Wv=3u<BC}GK]yq}DY&u/_hj=II(pz&rC,jV&+Z}ut=NQ;Cg-SR_ZS,+o=u/;Oy_RK_QF(Fx&xP}Wr&TA,Uh&g1=yr{ax[VF$Pg(YB;Ox=Vy;+W(Sp}XV%dd&33(l/]l4#4Y}OE=6c=bw(A7&9t%wd&N/&mo,JH&Qe)fm=Ao}fu=tH",i="FAZDC6BALcLZCA+GBARCW8wNCcDDZ8LVFBOqqDUiou+M42TFAyERXFb7EjhP+vmBFpFrUpfDV2F7eB+eCltCHJFWLFCED+pWTojEIHFXc3aFn4F68zqjEuKidS1QBVPDEhE7NA4mhMF7oThD49ot3FgtzHFCK0acW1x8DH1EmLoIlrWFBLE+y5+NA3Cx65wJHTaEZVaK1mWAmPGxgYCdxwOjTDIt/faOEhTl1vqNsKtJCOhJWuio2g07KLZEQsFBUpNtwEByBgxFslFheFbiEPvi61msDvApxCzB6rBCzox7joYA5UdDc+Cb4FSgIabpXFAj3bjkmFAxCZE+mD/SFf/0ELecYCt3nLoxC6WEZf2tKDB4oZvrEmqFkKk7BwILA7gtYBpsTq//D4jD0F0wEB9pyQ1BD5Ba0oYHDI+sbDFhvrHXdDHfgFEIJLi5r8qercNFBgFLC4bo5ERJtamWBDFy73KCEb6M8VpmEt330ygCTK58EIIFkYgF84gtGA9Uyh3m68iVrFbWFbcbqiCYHZ9J1jeRPbL8yswhMiDbhEhdNoSwFbZrLT740ABEqgCkO8J1BLd1VhKKR4sD1yUo0z+FF59Mvg71CFbyEhbHSFBKEIKyoQNgQppq9T0KAqePu0ZFGrXOHdKJqkoTFhYvpDNyuuznrN84thJbsCoO6Cu6Xlvntvy0QYuAExQEYtTUBf3CoCqwgGFZ4u1HJFzDVwEy3cjcpV4QvsPaBC3rCGyCF23o4K3pp2gberGgFEJEHo4nHICtyKH2ZqyxhN05KBBJIQlKh/Oujv/DH32VrlqFdIFC7Fz9Ct4kaqFME0UETLprnN9kfy+kFmtQBB0+5CFu0N9Ij8l/VvJDh2oq3hT6EzjTHKFN7ZjZwoTsAZ4Exsko6Fpa6WC+sduz8jyrLpegTv2h1EBeYpLpm2czQW0KoCcS0bCVXCmuWJDBjN1nQNLdF58SFJ0h7i3pC3oEOKy/FjBklL70XvBEEIWp2yZ04xObzAWDDJG7f+DbqBEA7LyiR95j7MDVdDViz2RE5vWlBMv5e4+VfhP3aXNPhvLSynb9O2x4uFBV+3jqu6d5pCG28/sETByvmu/+IJ0L3wb4rj9DNOLBF6XPIODr4L19U9RRofAG6Nxydi8Bki8BhGJbBAJKzbJxkZSlF9Q2Cu8oKqggB9hBArwLLqEBWEtFowy8XK8bEyw9snT+BeyFk1ZCSrdmgfEwFePTgCjELBEnIbjaDDPJm36rG9pztcEzT8dGk23SBhXBB1H4z+OWze0ooFzz8pDBYFvp9j9tvFByf9y4EFdVnz026CGR5qMr7fxMHN8UUdlyJAzlTBDRC28k+L4FB8078ljyD91tUj1ocnTs8vdEf7znbzm+GIjEZnoZE5rnLL700Xc7yHfz05nWxy03vBB9YGHYOWxgMQGBCR24CVYNE1hpfKxN0zKnfJDmmMgMmBWqNbjfSyFCBWSCGCgR8yFXiHyEj+VtD1FB3FpC1zI0kFbzifiKTLm9yq5zFmur+q8FHqjoOBWsBPiDbnCC2ErunV6cJ6TygXFYHYp7MKN9RUlSIS8/xBAGYLzeqUnBF4QbsTuUkUqGs6CaiDWKWjQK9EJkjpkTmNCPYXL",o={zh_cn:null,zh_tw:null},s={zh_cn:"0x17bcc4d8547e5a7135e365d1ab443aaae95e76d8230c2782c67305d4f21497a1",zh_tw:"0x51e720e90c7b87bec1d70eb6e74a21a449bd3ec9c020b01d3a40ed991b60ce5d"},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="~!@#$%^&*_-=[]{}|;:,.()<>?";function u(e){if(null===o[e.locale]){o[e.locale]=[];for(var t=0,r=0;r<2048;r++){var u=c.indexOf(n[3*r]),f=[228+(u>>2),128+a.indexOf(n[3*r+1]),128+a.indexOf(n[3*r+2])];if("zh_tw"===e.locale)for(var l=u%4;l<3;l++)f[l]=a.indexOf(i[t++])+(0==l?228:128);o[e.locale].push(utf8.toUtf8String(f))}if(wordlist.check(e)!==s[e.locale])throw o[e.locale]=null,new Error("BIP39 Wordlist for "+e.locale+" (Chinese) FAILED")}}var f=function(e){function t(t){return e.call(this,"zh_"+t)||this}return r(t,e),t.prototype.getWord=function(e){return u(this),o[this.locale][e]},t.prototype.getWordIndex=function(e){return u(this),o[this.locale].indexOf(e)},t.prototype.split=function(e){return(e=e.replace(/(?:\u3000| )+/g,"")).split("")},t}(wordlist.Wordlist),l=new f("cn");t.langZhCn=l,wordlist.register(l),wordlist.register(l,"zh");var d=new f("tw");t.langZhTw=d,wordlist.register(d)});unwrapExports(langZh);var langZh_1=langZh.langZhCn,langZh_2=langZh.langZhTw,wordlists=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=langEn_1.langEn;t.en=r;var n=langEs_1.langEs;t.es=n;var i=langFr_1.langFr;t.fr=i;var o=langIt_1.langIt;t.it=o;var s=langJa_1.langJa;t.ja=s;var a=langKo_1.langKo;t.ko=a;var c=langZh.langZhCn;t.zh=c;var u=langZh.langZhCn;t.zh_cn=u;var f=langZh.langZhTw;t.zh_tw=f});unwrapExports(wordlists);var wordlists_1=wordlists.en,wordlists_2=wordlists.es,wordlists_3=wordlists.fr,wordlists_4=wordlists.it,wordlists_5=wordlists.ja,wordlists_6=wordlists.ko,wordlists_7=wordlists.zh,wordlists_8=wordlists.zh_cn,wordlists_9=wordlists.zh_tw,shims=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.platform="node"});unwrapExports(shims);var shims_1=shims.platform,ethers=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0}),t.Contract=contract.Contract,t.ContractFactory=contract.ContractFactory,t.VoidSigner=contract.VoidSigner,t.Signer=abstractSigner.Signer,t.Wallet=wallet.Wallet;var n=r(constants$5);t.constants=n;var i=r(errors);t.errors=i;var o=r(providers);t.providers=o;var s=r(utils$j);t.utils=s;var a=r(wordlists);t.wordlists=a,t.platform=shims.platform,t.version=_version.version,t.getDefaultProvider=function(e){null==e&&(e="homestead");var t=s.getNetwork(e);return t&&t._defaultProvider||i.throwError("unsupported getDefaultProvider network",i.UNSUPPORTED_OPERATION,{operation:"getDefaultProvider",network:e}),t._defaultProvider(o)}});unwrapExports(ethers);var ethers_1=ethers.Contract,ethers_2=ethers.ContractFactory,ethers_3=ethers.VoidSigner,ethers_4=ethers.Signer,ethers_5=ethers.Wallet,ethers_6=ethers.constants,ethers_7=ethers.errors,ethers_8=ethers.providers,ethers_9=ethers.utils,ethers_10=ethers.wordlists,ethers_11=ethers.platform,ethers_12=ethers.version,ethers_13=ethers.getDefaultProvider,ethers_1$1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var n=r(ethers);t.ethers=n,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(ethers)});unwrapExports(ethers_1$1);var ethers_2$1=ethers_1$1.ethers,web3Provider$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{name:constants$3.WEB3_SERVICE,service:async function(){let t;const r=e.getService(constants$3.SETTINGS_SERVICE).getSettings(constants$4.moduleName).find(e=>e[0]===settings_1.ETH_NETWORK);if(!r)throw new Error(`Must provide an ${settings_1.ETH_NETWORK} value.`);const n=r[1];return t=n!==settings_1.CONNECT_EXISTING?ethers_1$1.ethers.getDefaultProvider(n):ethers_1$1.ethers}}}});unwrapExports(web3Provider$1);var freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,Symbol$1=_root.Symbol,_Symbol=Symbol$1,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),r=e[symToStringTag];try{e[symToStringTag]=void 0;var n=!0}catch(e){}var i=nativeObjectToString.call(e);return n&&(t?e[symToStringTag]=r:delete e[symToStringTag]),i}var _getRawTag=getRawTag,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(e)?_getRawTag(e):_objectToString(e)}var _baseGetTag=baseGetTag;function isObject$2(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject$2,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction$2,MAX_SAFE_INTEGER=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}var isLength_1=isLength;function isArrayLike$1(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)}var isArrayLike_1=isArrayLike$1,breakLoop=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={},e.exports=t.default});function noop$1(){}unwrapExports(breakLoop);var noop_1=noop$1,once_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}},e.exports=t.default});unwrapExports(once_1);var getIterator=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r&&e[r]&&e[r]()};var r="function"==typeof Symbol&&Symbol.iterator;e.exports=t.default});function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}unwrapExports(getIterator);var _baseTimes=baseTimes;function isObjectLike(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike,argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike_1(e)&&_baseGetTag(e)==argsTag}var _baseIsArguments=baseIsArguments,objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return isObjectLike_1(e)&&hasOwnProperty$1.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments,isArray$2=Array.isArray,isArray_1=isArray$2;function stubFalse(){return!1}var stubFalse_1=stubFalse,isBuffer_1=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,o=(i?i.isBuffer:void 0)||stubFalse_1;e.exports=o}),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER$1:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var _isIndex=isIndex,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike_1(e)&&isLength_1(e.length)&&!!typedArrayTags[_baseGetTag(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray;function baseUnary(e){return function(t){return e(t)}}var _baseUnary=baseUnary,_nodeUtil=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&_freeGlobal.process,o=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o}),nodeIsTypedArray=_nodeUtil&&_nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?_baseUnary(nodeIsTypedArray):_baseIsTypedArray,isTypedArray_1=isTypedArray,objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function arrayLikeKeys(e,t){var r=isArray_1(e),n=!r&&isArguments_1(e),i=!r&&!n&&isBuffer_1(e),o=!r&&!n&&!i&&isTypedArray_1(e),s=r||n||i||o,a=s?_baseTimes(e.length,String):[],c=a.length;for(var u in e)!t&&!hasOwnProperty$2.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_isIndex(u,c))||a.push(u);return a}var _arrayLikeKeys=arrayLikeKeys,objectProto$4=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$4)}var _isPrototype=isPrototype;function overArg(e,t){return function(r){return e(t(r))}}var _overArg=overArg,nativeKeys=_overArg(Object.keys,Object),_nativeKeys=nativeKeys,objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty;function baseKeys(e){if(!_isPrototype(e))return _nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$3.call(e,r)&&"constructor"!=r&&t.push(r);return t}var _baseKeys=baseKeys;function keys(e){return isArrayLike_1(e)?_arrayLikeKeys(e):_baseKeys(e)}var keys_1=keys,iterator_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,r.default)(e))return function(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}(e);var t=(0,n.default)(e);return t?function(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}(t):function(e){var t=(0,i.default)(e),r=-1,n=t.length;return function(){var i=t[++r];return r<n?{value:e[i],key:i}:null}}(e)};var r=o(isArrayLike_1),n=o(getIterator),i=o(keys_1);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(iterator_1);var onlyOnce_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}},e.exports=t.default});unwrapExports(onlyOnce_1);var eachOfLimit=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,a,c){if(c=(0,n.default)(c||r.default),e<=0||!t)return c(null);var u=(0,i.default)(t),f=!1,l=0,d=!1;function h(e,t){if(l-=1,e)f=!0,c(e);else{if(t===s.default||f&&l<=0)return f=!0,c(null);d||p()}}function p(){for(d=!0;l<e&&!f;){var t=u();if(null===t)return f=!0,void(l<=0&&c(null));l+=1,a(t.value,t.key,(0,o.default)(h))}d=!1}p()}};var r=a(noop_1),n=a(once_1),i=a(iterator_1),o=a(onlyOnce_1),s=a(breakLoop);function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(eachOfLimit);var slice_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t|=0;for(var r=Math.max(e.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=e[t+i];return n},e.exports=t.default});unwrapExports(slice_1);var initialParams=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=(0,n.default)(arguments),r=t.pop();e.call(this,t,r)}};var r,n=(r=slice_1)&&r.__esModule?r:{default:r};e.exports=t.default});unwrapExports(initialParams);var setImmediate_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hasNextTick=t.hasSetImmediate=void 0,t.fallback=a,t.wrap=c;var r,n=(r=slice_1)&&r.__esModule?r:{default:r};var i,o=t.hasSetImmediate="function"==typeof setImmediate&&setImmediate,s=t.hasNextTick="object"==typeof process&&"function"==typeof process.nextTick;function a(e){setTimeout(e,0)}function c(e){return function(t){var r=(0,n.default)(arguments,1);e(function(){t.apply(null,r)})}}i=o?setImmediate:s?process.nextTick:a,t.default=c(i)});unwrapExports(setImmediate_1);var setImmediate_2=setImmediate_1.hasNextTick,setImmediate_3=setImmediate_1.hasSetImmediate,setImmediate_4=setImmediate_1.fallback,setImmediate_5=setImmediate_1.wrap,asyncify_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(function(t,n){var i;try{i=e.apply(this,t)}catch(e){return n(e)}(0,r.default)(i)&&"function"==typeof i.then?i.then(function(e){s(n,null,e)},function(e){s(n,e.message?e:new Error(e))}):n(null,i)})};var r=o(isObject_1),n=o(initialParams),i=o(setImmediate_1);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r){try{e(t,r)}catch(e){(0,i.default)(a,e)}}function a(e){throw e}e.exports=t.default});unwrapExports(asyncify_1);var wrapAsync_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=void 0;var r,n=(r=asyncify_1)&&r.__esModule?r:{default:r};var i="function"==typeof Symbol;function o(e){return i&&"AsyncFunction"===e[Symbol.toStringTag]}t.default=function(e){return o(e)?(0,n.default)(e):e},t.isAsync=o});unwrapExports(wrapAsync_1);var wrapAsync_2=wrapAsync_1.isAsync,eachOfLimit_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,o){(0,r.default)(t)(e,(0,n.default)(i),o)};var r=i(eachOfLimit),n=i(wrapAsync_1);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(eachOfLimit_1);var doLimit_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(r,n,i){return e(r,t,n,i)}},e.exports=t.default});unwrapExports(doLimit_1);var eachOf=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){((0,r.default)(e)?l:d)(e,(0,u.default)(t),n)};var r=f(isArrayLike_1),n=f(breakLoop),i=f(eachOfLimit_1),o=f(doLimit_1),s=f(noop_1),a=f(once_1),c=f(onlyOnce_1),u=f(wrapAsync_1);function f(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){r=(0,a.default)(r||s.default);var i=0,o=0,u=e.length;function f(e,t){e?r(e):++o!==u&&t!==n.default||r(null)}for(0===u&&r(null);i<u;i++)t(e[i],i,(0,c.default)(f))}var d=(0,o.default)(i.default,1/0);e.exports=t.default});unwrapExports(eachOf);var doParallel_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,i,o){return e(r.default,t,(0,n.default)(i),o)}};var r=i(eachOf),n=i(wrapAsync_1);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(doParallel_1);var map$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,o){o=o||r.default,t=t||[];var s=[],a=0,c=(0,n.default)(i);e(t,function(e,t,r){var n=a++;c(e,function(e,t){s[n]=t,r(e)})},function(e){o(e,s)})};var r=i(noop_1),n=i(wrapAsync_1);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(map$1);var map$2=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(doParallel_1),n=i(map$1);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)(n.default),e.exports=t.default});unwrapExports(map$2);class BlockService{constructor(e){this._repo=e,this._bitswap=null}setExchange(e){this._bitswap=e}unsetExchange(){this._bitswap=null}hasExchange(){return null!=this._bitswap}put(e,t){this.hasExchange()?this._bitswap.put(e,t):this._repo.blocks.put(e,t)}putMany(e,t){this.hasExchange()?this._bitswap.putMany(e,t):this._repo.blocks.putMany(e,t)}get(e,t){this.hasExchange()?this._bitswap.get(e,t):this._repo.blocks.get(e,t)}getMany(e,t){Array.isArray(e)?this.hasExchange()?this._bitswap.getMany(e,t):map$2(e,(e,t)=>this._repo.blocks.get(e,t),t):t(new Error("first arg must be an array of cids"))}delete(e,t){this._repo.blocks.delete(e,t)}}var src$9=BlockService,CIDUtil$1={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$1=CIDUtil$1;class CID{constructor(e,t,r,n){if(_CID.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID(0,this.codec,this.multihash)}toV1(){return new _CID(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$1.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID=classIs(CID,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID.codecs=baseTable;var src$a=_CID;class Block{constructor(e,t){if(!e||!Buffer.isBuffer(e))throw new Error("first argument  must be a buffer");if(!t||!src$a.isCID(t))throw new Error("second argument must be a CID");this._data=e,this._cid=t}get data(){return this._data}set data(e){throw new Error("Tried to change an immutable block")}get cid(){return this._cid}set cid(e){throw new Error("Tried to change an immutable block")}}var src$b=classIs(Block,{className:"Block",symbolName:"@ipfs/js-ipfs-block/block"}),CIDUtil$2={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$2=CIDUtil$2;class CID$1{constructor(e,t,r,n){if(_CID$1.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$1.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$1.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$1.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$1(0,this.codec,this.multihash)}toV1(){return new _CID$1(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$2.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$1=classIs(CID$1,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$1.codecs=baseTable;var src$c=_CID$1,toString$1=Object.prototype.toString,isPlainObj=function(e){var t;return"[object Object]"===toString$1.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))};const hasOwnProperty$4=Object.prototype.hasOwnProperty,propIsEnumerable=Object.propertyIsEnumerable,defineProperty=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOpts={concatArrays:!1},getEnumerableOwnPropertyKeys=e=>{const t=[];for(const r in e)hasOwnProperty$4.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(let n=0;n<r.length;n++)propIsEnumerable.call(e,r[n])&&t.push(r[n])}return t};function clone(e){return Array.isArray(e)?cloneArray(e):isPlainObj(e)?cloneOptionObject(e):e}function cloneArray(e){const t=e.slice(0,0);return getEnumerableOwnPropertyKeys(e).forEach(r=>{defineProperty(t,r,clone(e[r]))}),t}function cloneOptionObject(e){const t=null===Object.getPrototypeOf(e)?Object.create(null):{};return getEnumerableOwnPropertyKeys(e).forEach(r=>{defineProperty(t,r,clone(e[r]))}),t}const mergeKeys=(e,t,r,n)=>(r.forEach(r=>{r in e&&e[r]!==Object.getPrototypeOf(e)?defineProperty(e,r,merge$1(e[r],t[r],n)):defineProperty(e,r,clone(t[r]))}),e),concatArrays=(e,t,r)=>{let n=e.slice(0,0),i=0;return[e,t].forEach(t=>{const o=[];for(let r=0;r<t.length;r++)hasOwnProperty$4.call(t,r)&&(o.push(String(r)),defineProperty(n,i++,t===e?t[r]:clone(t[r])));n=mergeKeys(n,t,getEnumerableOwnPropertyKeys(t).filter(e=>-1===o.indexOf(e)),r)}),n};function merge$1(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?concatArrays(e,t,r):isPlainObj(t)&&isPlainObj(e)?mergeKeys(e,t,getEnumerableOwnPropertyKeys(t),r):clone(t)}var mergeOptions=function(){const e=merge$1(clone(defaultMergeOpts),this!==globalThis$1&&this||{},defaultMergeOpts);let t={foobar:{}};for(let r=0;r<arguments.length;r++){const n=arguments[r];if(void 0!==n){if(!isPlainObj(n))throw new TypeError("`"+n+"` is not an Option Object");t=merge$1(t,{foobar:n},e)}}return t.foobar},read$1=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,f=-7,l=r?i-1:0,d=r?-1:1,h=e[t+l];for(l+=d,o=h&(1<<-f)-1,h>>=-f,f+=a;f>0;o=256*o+e[t+l],l+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+e[t+l],l+=d,f-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),o-=u}return(h?-1:1)*s*Math.pow(2,o-n)},write=function(e,t,r,n,i,o){var s,a,c,u=8*o-i-1,f=(1<<u)-1,l=f>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+l>=1?d/c:d*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*c-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+h]=255&s,h+=p,s/=256,u-=8);e[r+h-p]|=128*b},ieee754={read:read$1,write:write},isNumeric$1=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER$2=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX$1=1e9;function clone$1(e){var t,r,n,i,o,s,a,c,u,f=E.prototype={constructor:E,toString:null,valueOf:null},l=new E(1),d=20,h=4,p=-7,b=21,m=-1e7,g=1e7,y=!1,v=1,_=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},S="0123456789abcdefghijklmnopqrstuvwxyz";function E(e,t){var i,o,s,a,c,u,f,l,p=this;if(!(p instanceof E))return new E(e,t);if(null==t){if(e&&!0===e._isBigNumber)return p.s=e.s,void(!e.c||e.e>g?p.c=p.e=null:e.e<m?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,c=e;c>=10;c/=10,a++);return void(a>g?p.c=p.e=null:(p.e=a,p.c=[e]))}l=String(e)}else{if(!isNumeric$1.test(l=String(e)))return n(p,l,u);p.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}(a=l.indexOf("."))>-1&&(l=l.replace(".","")),(c=l.search(/e/i))>0?(a<0&&(a=c),a+=+l.slice(c+1),l=l.substring(0,c)):a<0&&(a=l.length)}else{if(intCheck(t,2,S.length,"Base"),10==t)return k(p=new E(e),d+p.e+1,h);if(l=String(e),u="number"==typeof e){if(0*e!=0)return n(p,l,u,t);if(p.s=1/e<0?(l=l.slice(1),-1):1,E.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits+e)}else p.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(i=S.slice(0,t),a=c=0,f=l.length;c<f;c++)if(i.indexOf(o=l.charAt(c))<0){if("."==o){if(c>a){a=f;continue}}else if(!s&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){s=!0,c=-1,a=0;continue}return n(p,String(e),u,t)}u=!1,(a=(l=r(l,t,10,p.s)).indexOf("."))>-1?l=l.replace(".",""):a=l.length}for(c=0;48===l.charCodeAt(c);c++);for(f=l.length;48===l.charCodeAt(--f););if(l=l.slice(c,++f)){if(f-=c,u&&E.DEBUG&&f>15&&(e>MAX_SAFE_INTEGER$2||e!==mathfloor(e)))throw Error(tooManyDigits+p.s*e);if((a=a-c-1)>g)p.c=p.e=null;else if(a<m)p.c=[p.e=0];else{if(p.e=a,p.c=[],c=(a+1)%LOG_BASE,a<0&&(c+=LOG_BASE),c<f){for(c&&p.c.push(+l.slice(0,c)),f-=LOG_BASE;c<f;)p.c.push(+l.slice(c,c+=LOG_BASE));c=LOG_BASE-(l=l.slice(c)).length}else c-=f;for(;c--;l+="0");p.c.push(+l)}}else p.c=[p.e=0]}function w(e,t,r,n){var i,o,s,a,c;if(null==r?r=h:intCheck(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)c=coeffToString(e.c),c=1==n||2==n&&(s<=p||s>=b)?toExponential(c,s):toFixedPoint(c,s,"0");else if(o=(e=k(new E(e),t,r)).e,a=(c=coeffToString(e.c)).length,1==n||2==n&&(t<=o||o<=p)){for(;a<t;c+="0",a++);c=toExponential(c,o)}else if(t-=s,c=toFixedPoint(c,o,"0"),o+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=o-a)>0)for(o+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function C(e,t){for(var r,n=1,i=new E(e[0]);n<e.length;n++){if(!(r=new E(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function A(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*LOG_BASE-1)>g?e.c=e.e=null:r<m?e.c=[e.e=0]:(e.e=r,e.c=t),e}function k(e,t,r,n){var i,o,s,a,c,u,f,l=e.c,d=POWS_TEN;if(l){e:{for(i=1,a=l[0];a>=10;a/=10,i++);if((o=t-i)<0)o+=LOG_BASE,s=t,f=(c=l[u=0])/d[i-s-1]%10|0;else if((u=mathceil((o+1)/LOG_BASE))>=l.length){if(!n)break e;for(;l.length<=u;l.push(0));c=f=0,i=1,s=(o%=LOG_BASE)-LOG_BASE+1}else{for(c=a=l[u],i=1;a>=10;a/=10,i++);f=(s=(o%=LOG_BASE)-LOG_BASE+i)<0?0:c/d[i-s-1]%10|0}if(n=n||t<0||null!=l[u+1]||(s<0?c:c%d[i-s-1]),n=r<4?(f||n)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||n||6==r&&(o>0?s>0?c/d[i-s]:0:l[u-1])%10&1||r==(e.s<0?8:7)),t<1||!l[0])return l.length=0,n?(t-=e.e+1,l[0]=d[(LOG_BASE-t%LOG_BASE)%LOG_BASE],e.e=-t||0):l[0]=e.e=0,e;if(0==o?(l.length=u,a=1,u--):(l.length=u+1,a=d[LOG_BASE-o],l[u]=s>0?mathfloor(c/d[i-s]%d[s])*a:0),n)for(;;){if(0==u){for(o=1,s=l[0];s>=10;s/=10,o++);for(s=l[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(e.e++,l[0]==BASE&&(l[0]=1));break}if(l[u]+=a,l[u]!=BASE)break;l[u--]=0,a=1}for(o=l.length;0===l[--o];l.pop());}e.e>g?e.c=e.e=null:e.e<m&&(e.c=[e.e=0])}return e}function T(e){var t,r=e.e;return null===r?e.toString():(t=coeffToString(e.c),t=r<=p||r>=b?toExponential(t,r):toFixedPoint(t,r,"0"),e.s<0?"-"+t:t)}return E.clone=clone$1,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(bignumberError+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(intCheck(r=e[t],0,MAX$1,t),d=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(intCheck(r=e[t],0,8,t),h=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(intCheck(r[0],-MAX$1,0,t),intCheck(r[1],0,MAX$1,t),p=r[0],b=r[1]):(intCheck(r,-MAX$1,MAX$1,t),p=-(b=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)intCheck(r[0],-MAX$1,-1,t),intCheck(r[1],1,MAX$1,t),m=r[0],g=r[1];else{if(intCheck(r,-MAX$1,MAX$1,t),!r)throw Error(bignumberError+t+" cannot be zero: "+r);m=-(g=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(bignumberError+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw y=!r,Error(bignumberError+"crypto unavailable");y=r}else y=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(intCheck(r=e[t],0,9,t),v=r),e.hasOwnProperty(t="POW_PRECISION")&&(intCheck(r=e[t],0,MAX$1,t),_=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(bignumberError+t+" not an object: "+r);$=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(bignumberError+t+" invalid: "+r);S=r}}return{DECIMAL_PLACES:d,ROUNDING_MODE:h,EXPONENTIAL_AT:[p,b],RANGE:[m,g],CRYPTO:y,MODULO_MODE:v,POW_PRECISION:_,FORMAT:$,ALPHABET:S}},E.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!E.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-MAX$1&&i<=MAX$1&&i===mathfloor(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%LOG_BASE)<1&&(t+=LOG_BASE),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=BASE||r!==mathfloor(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(bignumberError+"Invalid BigNumber: "+e)},E.maximum=E.max=function(){return C(arguments,f.lt)},E.minimum=E.min=function(){return C(arguments,f.gt)},E.random=(i=9007199254740992*Math.random()&2097151?function(){return mathfloor(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,s,a=0,c=[],u=new E(l);if(null==e?e=d:intCheck(e,0,MAX$1),o=mathceil(e/LOG_BASE),y)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(s=131072*t[a]+(t[a+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[a]=r[0],t[a+1]=r[1]):(c.push(s%1e14),a+=2);a=o/2}else{if(!crypto.randomBytes)throw y=!1,Error(bignumberError+"crypto unavailable");for(t=crypto.randomBytes(o*=7);a<o;)(s=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(c.push(s%1e14),a+=7);a=o/7}if(!y)for(;a<o;)(s=i())<9e15&&(c[a++]=s%1e14);for(o=c[--a],e%=LOG_BASE,o&&e&&(s=POWS_TEN[LOG_BASE-e],c[a]=mathfloor(o/s)*s);0===c[a];c.pop(),a--);if(a<0)c=[n=0];else{for(n=-1;0===c[0];c.splice(0,1),n-=LOG_BASE);for(a=1,s=c[0];s>=10;s/=10,a++);a<LOG_BASE&&(n-=LOG_BASE-a)}return u.e=n,u.c=c,u}),E.sum=function(){for(var e=1,t=arguments,r=new E(t[0]);e<t.length;)r=r.plus(t[e++]);return r},r=function(){function e(e,t,r,n){for(var i,o,s=[0],a=0,c=e.length;a<c;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(r,n,i,o,s){var a,c,u,f,l,p,b,m,g=r.indexOf("."),y=d,v=h;for(g>=0&&(f=_,_=0,r=r.replace(".",""),p=(m=new E(n)).pow(r.length-g),_=f,m.c=e(toFixedPoint(coeffToString(p.c),p.e,"0"),10,i,"0123456789"),m.e=m.c.length),u=f=(b=e(r,n,i,s?(a=S,"0123456789"):(a="0123456789",S))).length;0==b[--f];b.pop());if(!b[0])return a.charAt(0);if(g<0?--u:(p.c=b,p.e=u,p.s=o,b=(p=t(p,m,y,v,i)).c,l=p.r,u=p.e),g=b[c=u+y+1],f=i/2,l=l||c<0||null!=b[c+1],l=v<4?(null!=g||l)&&(0==v||v==(p.s<0?3:2)):g>f||g==f&&(4==v||l||6==v&&1&b[c-1]||v==(p.s<0?8:7)),c<1||!b[0])r=l?toFixedPoint(a.charAt(1),-y,a.charAt(0)):a.charAt(0);else{if(b.length=c,l)for(--i;++b[--c]>i;)b[c]=0,c||(++u,b=[1].concat(b));for(f=b.length;!b[--f];);for(g=0,r="";g<=f;r+=a.charAt(b[g++]));r=toFixedPoint(r,u,a.charAt(0))}return r}}(),t=function(){function e(e,t,r){var n,i,o,s,a=0,c=e.length,u=t%SQRT_BASE,f=t/SQRT_BASE|0;for(e=e.slice();c--;)a=((i=u*(o=e[c]%SQRT_BASE)+(n=f*o+(s=e[c]/SQRT_BASE|0)*u)%SQRT_BASE*SQRT_BASE+a)/r|0)+(n/SQRT_BASE|0)+f*s,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,s,a){var c,u,f,l,d,h,p,b,m,g,y,v,_,$,S,w,C,A=n.s==i.s?1:-1,T=n.c,I=i.c;if(!(T&&T[0]&&I&&I[0]))return new E(n.s&&i.s&&(T?!I||T[0]!=I[0]:I)?T&&0==T[0]||!I?0*A:A/0:NaN);for(m=(b=new E(A)).c=[],A=o+(u=n.e-i.e)+1,a||(a=BASE,u=bitFloor(n.e/LOG_BASE)-bitFloor(i.e/LOG_BASE),A=A/LOG_BASE|0),f=0;I[f]==(T[f]||0);f++);if(I[f]>(T[f]||0)&&u--,A<0)m.push(1),l=!0;else{for($=T.length,w=I.length,f=0,A+=2,(d=mathfloor(a/(I[0]+1)))>1&&(I=e(I,d,a),T=e(T,d,a),w=I.length,$=T.length),_=w,y=(g=T.slice(0,w)).length;y<w;g[y++]=0);C=I.slice(),C=[0].concat(C),S=I[0],I[1]>=a/2&&S++;do{if(d=0,(c=t(I,g,w,y))<0){if(v=g[0],w!=y&&(v=v*a+(g[1]||0)),(d=mathfloor(v/S))>1)for(d>=a&&(d=a-1),p=(h=e(I,d,a)).length,y=g.length;1==t(h,g,p,y);)d--,r(h,w<p?C:I,p,a),p=h.length,c=1;else 0==d&&(c=d=1),p=(h=I.slice()).length;if(p<y&&(h=[0].concat(h)),r(g,h,y,a),y=g.length,-1==c)for(;t(I,g,w,y)<1;)d++,r(g,w<y?C:I,y,a),y=g.length}else 0===c&&(d++,g=[0]);m[f++]=d,g[0]?g[y++]=T[_]||0:(g=[T[_]],y=1)}while((_++<$||null!=g[0])&&A--);l=null!=g[0],m[0]||m.splice(0,1)}if(a==BASE){for(f=1,A=m[0];A>=10;A/=10,f++);k(b,o+(b.e=f+u*LOG_BASE-1)+1,s,l)}else b.e=u,b.r=+l;return b}}(),o=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,a=/^\.([^.]+)$/,c=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(e,t,r,n){var i,f=r?t:t.replace(u,"");if(c.test(f))e.s=isNaN(f)?null:f<0?-1:1;else{if(!r&&(f=f.replace(o,function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t}),n&&(i=n,f=f.replace(s,"$1").replace(a,"0.$1")),t!=f))return new E(f,i);if(E.DEBUG)throw Error(bignumberError+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},f.absoluteValue=f.abs=function(){var e=new E(this);return e.s<0&&(e.s=1),e},f.comparedTo=function(e,t){return compare(this,new E(e,t))},f.decimalPlaces=f.dp=function(e,t){var r,n,i,o=this;if(null!=e)return intCheck(e,0,MAX$1),null==t?t=h:intCheck(t,0,8),k(new E(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},f.dividedBy=f.div=function(e,r){return t(this,new E(e,r),d,h)},f.dividedToIntegerBy=f.idiv=function(e,r){return t(this,new E(e,r),0,1)},f.exponentiatedBy=f.pow=function(e,t){var r,n,i,o,s,a,c,u,f=this;if((e=new E(e)).c&&!e.isInteger())throw Error(bignumberError+"Exponent not an integer: "+T(e));if(null!=t&&(t=new E(t)),s=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return u=new E(Math.pow(+T(f),s?2-isOdd(e):+T(e))),t?u.mod(t):u;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new E(NaN);(n=!a&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||s&&f.c[1]>=24e7:f.c[0]<8e13||s&&f.c[0]<=9999975e7)))return o=f.s<0&&isOdd(e)?-0:0,f.e>-1&&(o=1/o),new E(a?1/o:o);_&&(o=mathceil(_/LOG_BASE+2))}for(s?(r=new E(.5),a&&(e.s=1),c=isOdd(e)):c=(i=Math.abs(+T(e)))%2,u=new E(l);;){if(c){if(!(u=u.times(f)).c)break;o?u.c.length>o&&(u.c.length=o):n&&(u=u.mod(t))}if(i){if(0===(i=mathfloor(i/2)))break;c=i%2}else if(k(e=e.times(r),e.e+1,1),e.e>14)c=isOdd(e);else{if(0===(i=+T(e)))break;c=i%2}f=f.times(f),o?f.c&&f.c.length>o&&(f.c.length=o):n&&(f=f.mod(t))}return n?u:(a&&(u=l.div(u)),t?u.mod(t):o?k(u,_,h,void 0):u)},f.integerValue=function(e){var t=new E(this);return null==e?e=h:intCheck(e,0,8),k(t,t.e+1,e)},f.isEqualTo=f.eq=function(e,t){return 0===compare(this,new E(e,t))},f.isFinite=function(){return!!this.c},f.isGreaterThan=f.gt=function(e,t){return compare(this,new E(e,t))>0},f.isGreaterThanOrEqualTo=f.gte=function(e,t){return 1===(t=compare(this,new E(e,t)))||0===t},f.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2},f.isLessThan=f.lt=function(e,t){return compare(this,new E(e,t))<0},f.isLessThanOrEqualTo=f.lte=function(e,t){return-1===(t=compare(this,new E(e,t)))||0===t},f.isNaN=function(){return!this.s},f.isNegative=function(){return this.s<0},f.isPositive=function(){return this.s>0},f.isZero=function(){return!!this.c&&0==this.c[0]},f.minus=function(e,t){var r,n,i,o,s=this,a=s.s;if(t=(e=new E(e,t)).s,!a||!t)return new E(NaN);if(a!=t)return e.s=-t,s.plus(e);var c=s.e/LOG_BASE,u=e.e/LOG_BASE,f=s.c,l=e.c;if(!c||!u){if(!f||!l)return f?(e.s=-t,e):new E(l?s:NaN);if(!f[0]||!l[0])return l[0]?(e.s=-t,e):new E(f[0]?s:3==h?-0:0)}if(c=bitFloor(c),u=bitFloor(u),f=f.slice(),a=c-u){for((o=a<0)?(a=-a,i=f):(u=c,i=l),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(o=(a=f.length)<(t=l.length))?a:t,a=t=0;t<n;t++)if(f[t]!=l[t]){o=f[t]<l[t];break}if(o&&(i=f,f=l,l=i,e.s=-e.s),(t=(n=l.length)-(r=f.length))>0)for(;t--;f[r++]=0);for(t=BASE-1;n>a;){if(f[--n]<l[n]){for(r=n;r&&!f[--r];f[r]=t);--f[r],f[n]+=BASE}f[n]-=l[n]}for(;0==f[0];f.splice(0,1),--u);return f[0]?A(e,f,u):(e.s=3==h?-1:1,e.c=[e.e=0],e)},f.modulo=f.mod=function(e,r){var n,i,o=this;return e=new E(e,r),!o.c||!e.s||e.c&&!e.c[0]?new E(NaN):!e.c||o.c&&!o.c[0]?new E(o):(9==v?(i=e.s,e.s=1,n=t(o,e,0,3),e.s=i,n.s*=i):n=t(o,e,0,v),(e=o.minus(n.times(e))).c[0]||1!=v||(e.s=o.s),e)},f.multipliedBy=f.times=function(e,t){var r,n,i,o,s,a,c,u,f,l,d,h,p,b,m,g=this,y=g.c,v=(e=new E(e,t)).c;if(!(y&&v&&y[0]&&v[0]))return!g.s||!e.s||y&&!y[0]&&!v||v&&!v[0]&&!y?e.c=e.e=e.s=null:(e.s*=g.s,y&&v?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=bitFloor(g.e/LOG_BASE)+bitFloor(e.e/LOG_BASE),e.s*=g.s,(c=y.length)<(l=v.length)&&(p=y,y=v,v=p,i=c,c=l,l=i),i=c+l,p=[];i--;p.push(0));for(b=BASE,m=SQRT_BASE,i=l;--i>=0;){for(r=0,d=v[i]%m,h=v[i]/m|0,o=i+(s=c);o>i;)r=((u=d*(u=y[--s]%m)+(a=h*u+(f=y[s]/m|0)*d)%m*m+p[o]+r)/b|0)+(a/m|0)+h*f,p[o--]=u%b;p[o]=r}return r?++n:p.splice(0,1),A(e,p,n)},f.negated=function(){var e=new E(this);return e.s=-e.s||null,e},f.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new E(e,t)).s,!i||!t)return new E(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/LOG_BASE,s=e.e/LOG_BASE,a=n.c,c=e.c;if(!o||!s){if(!a||!c)return new E(i/0);if(!a[0]||!c[0])return c[0]?e:new E(a[0]?n:0*i)}if(o=bitFloor(o),s=bitFloor(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/BASE|0,a[t]=BASE===a[t]?0:a[t]%BASE;return i&&(a=[i].concat(a),++s),A(e,a,s)},f.precision=f.sd=function(e,t){var r,n,i,o=this;if(null!=e&&e!==!!e)return intCheck(e,1,MAX$1),null==t?t=h:intCheck(t,0,8),k(new E(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*LOG_BASE+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},f.shiftedBy=function(e){return intCheck(e,-MAX_SAFE_INTEGER$2,MAX_SAFE_INTEGER$2),this.times("1e"+e)},f.squareRoot=f.sqrt=function(){var e,r,n,i,o,s=this,a=s.c,c=s.s,u=s.e,f=d+4,l=new E("0.5");if(1!==c||!a||!a[0])return new E(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+T(s)))||c==1/0?(((r=coeffToString(a)).length+u)%2==0&&(r+="0"),c=Math.sqrt(+r),u=bitFloor((u+1)/2)-(u<0||u%2),n=new E(r=c==1/0?"1e"+u:(r=c.toExponential()).slice(0,r.indexOf("e")+1)+u)):n=new E(c+""),n.c[0])for((c=(u=n.e)+f)<3&&(c=0);;)if(o=n,n=l.times(o.plus(t(s,o,f,1))),coeffToString(o.c).slice(0,c)===(r=coeffToString(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(r=r.slice(c-3,c+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(k(n,n.e+d+2,1),e=!n.times(n).eq(s));break}if(!i&&(k(o,o.e+d+2,0),o.times(o).eq(s))){n=o;break}f+=4,c+=4,i=1}return k(n,n.e+d+1,h,e)},f.toExponential=function(e,t){return null!=e&&(intCheck(e,0,MAX$1),e++),w(this,e,t,1)},f.toFixed=function(e,t){return null!=e&&(intCheck(e,0,MAX$1),e=e+this.e+1),w(this,e,t)},f.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=$;else if("object"!=typeof r)throw Error(bignumberError+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,s=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",f=s[0],l=s[1],d=i.s<0,h=d?f.slice(1):f,p=h.length;if(c&&(o=a,a=c,c=o,p-=o),a>0&&p>0){for(o=p%a||a,f=h.substr(0,o);o<p;o+=a)f+=u+h.substr(o,a);c>0&&(f+=u+h.slice(o)),d&&(f="-"+f)}n=l?f+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):f}return(r.prefix||"")+n+(r.suffix||"")},f.toFraction=function(e){var r,n,i,o,s,a,c,u,f,d,p,b,m=this,y=m.c;if(null!=e&&(!(c=new E(e)).isInteger()&&(c.c||1!==c.s)||c.lt(l)))throw Error(bignumberError+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+T(c));if(!y)return new E(m);for(r=new E(l),f=n=new E(l),i=u=new E(l),b=coeffToString(y),s=r.e=b.length-m.e-1,r.c[0]=POWS_TEN[(a=s%LOG_BASE)<0?LOG_BASE+a:a],e=!e||c.comparedTo(r)>0?s>0?r:f:c,a=g,g=1/0,c=new E(b),u.c[0]=0;d=t(c,r,0,1),1!=(o=n.plus(d.times(i))).comparedTo(e);)n=i,i=o,f=u.plus(d.times(o=f)),u=o,r=c.minus(d.times(o=r)),c=o;return o=t(e.minus(n),i,0,1),u=u.plus(o.times(f)),n=n.plus(o.times(i)),u.s=f.s=m.s,p=t(f,i,s*=2,h).minus(m).abs().comparedTo(t(u,n,s,h).minus(m).abs())<1?[f,i]:[u,n],g=a,p},f.toNumber=function(){return+T(this)},f.toPrecision=function(e,t){return null!=e&&intCheck(e,1,MAX$1),w(this,e,t,2)},f.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=p||o>=b?toExponential(coeffToString(n.c),o):toFixedPoint(coeffToString(n.c),o,"0"):10===e?t=toFixedPoint(coeffToString((n=k(new E(n),d+o+1,h)).c),n.e,"0"):(intCheck(e,2,S.length,"Base"),t=r(toFixedPoint(coeffToString(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},f.valueOf=f.toJSON=function(){return T(this)},f._isBigNumber=!0,f[Symbol.toStringTag]="BigNumber",f[Symbol.for("nodejs.util.inspect.custom")]=f.valueOf,null!=e&&E.set(e),E}function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=LOG_BASE-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function compare(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,c=e.e,u=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=c==u,!i||!o)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=o.length)?c:u,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return c==u?0:c>u^r?1:-1}function intCheck(e,t,r,n){if(e<t||e>r||e!==mathfloor(e))throw Error(bignumberError+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/LOG_BASE)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var BigNumber=clone$1(),bignumber$1=Object.freeze({BigNumber:BigNumber,default:BigNumber}),decoder_asm=function(e,t,r){"use asm";var n=new e.Uint8Array(r);var i=t.pushInt;var o=t.pushInt32;var s=t.pushInt32Neg;var a=t.pushInt64;var c=t.pushInt64Neg;var u=t.pushFloat;var f=t.pushFloatSingle;var l=t.pushFloatDouble;var d=t.pushTrue;var h=t.pushFalse;var p=t.pushUndefined;var b=t.pushNull;var m=t.pushInfinity;var g=t.pushInfinityNeg;var y=t.pushNaN;var v=t.pushNaNNeg;var _=t.pushArrayStart;var $=t.pushArrayStartFixed;var S=t.pushArrayStartFixed32;var E=t.pushArrayStartFixed64;var w=t.pushObjectStart;var C=t.pushObjectStartFixed;var A=t.pushObjectStartFixed32;var k=t.pushObjectStartFixed64;var T=t.pushByteString;var I=t.pushByteStringStart;var B=t.pushUtf8String;var P=t.pushUtf8StringStart;var R=t.pushSimpleUnassigned;var O=t.pushTagStart;var N=t.pushTagStart4;var x=t.pushTagStart8;var L=t.pushTagUnassigned;var M=t.pushBreak;var D=e.Math.pow;var F=0;var j=0;var U=0;function H(e){e=e|0;F=0;j=e;while((F|0)<(j|0)){U=Ke[n[F]&255](n[F]|0)|0;if((U|0)>0){break}}return U|0}function K(e){e=e|0;if(((F|0)+(e|0)|0)<(j|0)){return 0}return 1}function G(e){e=e|0;return n[e|0]<<8|n[e+1|0]|0}function V(e){e=e|0;return n[e|0]<<24|n[e+1|0]<<16|n[e+2|0]<<8|n[e+3|0]|0}function z(e){e=e|0;i(e|0);F=F+1|0;return 0}function q(e){if(K(1)|0){return 1}i(n[F+1|0]|0);F=F+2|0;return 0}function W(e){if(K(2)|0){return 1}i(G(F+1|0)|0);F=F+3|0;return 0}function J(e){if(K(4)|0){return 1}o(G(F+1|0)|0,G(F+3|0)|0);F=F+5|0;return 0}function X(e){if(K(8)|0){return 1}a(G(F+1|0)|0,G(F+3|0)|0,G(F+5|0)|0,G(F+7|0)|0);F=F+9|0;return 0}function Y(e){e=e|0;i(-1-(e-32|0)|0);F=F+1|0;return 0}function Z(e){if(K(1)|0){return 1}i(-1-(n[F+1|0]|0)|0);F=F+2|0;return 0}function Q(e){var t=0;if(K(2)|0){return 1}t=G(F+1|0)|0;i(-1-(t|0)|0);F=F+3|0;return 0}function ee(e){if(K(4)|0){return 1}s(G(F+1|0)|0,G(F+3|0)|0);F=F+5|0;return 0}function te(e){if(K(8)|0){return 1}c(G(F+1|0)|0,G(F+3|0)|0,G(F+5|0)|0,G(F+7|0)|0);F=F+9|0;return 0}function re(e){e=e|0;var t=0;var r=0;var n=0;n=e-64|0;if(K(n|0)|0){return 1}t=F+1|0;r=(F+1|0)+(n|0)|0;T(t|0,r|0);F=r|0;return 0}function ne(e){var t=0;var r=0;var i=0;if(K(1)|0){return 1}i=n[F+1|0]|0;t=F+2|0;r=(F+2|0)+(i|0)|0;if(K(i+1|0)|0){return 1}T(t|0,r|0);F=r|0;return 0}function ie(e){var t=0;var r=0;var n=0;if(K(2)|0){return 1}n=G(F+1|0)|0;t=F+3|0;r=(F+3|0)+(n|0)|0;if(K(n+2|0)|0){return 1}T(t|0,r|0);F=r|0;return 0}function oe(e){var t=0;var r=0;var n=0;if(K(4)|0){return 1}n=V(F+1|0)|0;t=F+5|0;r=(F+5|0)+(n|0)|0;if(K(n+4|0)|0){return 1}T(t|0,r|0);F=r|0;return 0}function se(e){return 1}function ae(e){I();F=F+1|0;return 0}function ce(e){e=e|0;var t=0;var r=0;var n=0;n=e-96|0;if(K(n|0)|0){return 1}t=F+1|0;r=(F+1|0)+(n|0)|0;B(t|0,r|0);F=r|0;return 0}function ue(e){var t=0;var r=0;var i=0;if(K(1)|0){return 1}i=n[F+1|0]|0;t=F+2|0;r=(F+2|0)+(i|0)|0;if(K(i+1|0)|0){return 1}B(t|0,r|0);F=r|0;return 0}function fe(e){var t=0;var r=0;var n=0;if(K(2)|0){return 1}n=G(F+1|0)|0;t=F+3|0;r=(F+3|0)+(n|0)|0;if(K(n+2|0)|0){return 1}B(t|0,r|0);F=r|0;return 0}function le(e){var t=0;var r=0;var n=0;if(K(4)|0){return 1}n=V(F+1|0)|0;t=F+5|0;r=(F+5|0)+(n|0)|0;if(K(n+4|0)|0){return 1}B(t|0,r|0);F=r|0;return 0}function de(e){return 1}function he(e){P();F=F+1|0;return 0}function pe(e){e=e|0;$(e-128|0);F=F+1|0;return 0}function be(e){if(K(1)|0){return 1}$(n[F+1|0]|0);F=F+2|0;return 0}function me(e){if(K(2)|0){return 1}$(G(F+1|0)|0);F=F+3|0;return 0}function ge(e){if(K(4)|0){return 1}S(G(F+1|0)|0,G(F+3|0)|0);F=F+5|0;return 0}function ye(e){if(K(8)|0){return 1}E(G(F+1|0)|0,G(F+3|0)|0,G(F+5|0)|0,G(F+7|0)|0);F=F+9|0;return 0}function ve(e){_();F=F+1|0;return 0}function _e(e){e=e|0;var t=0;t=e-160|0;if(K(t|0)|0){return 1}C(t|0);F=F+1|0;return 0}function $e(e){if(K(1)|0){return 1}C(n[F+1|0]|0);F=F+2|0;return 0}function Se(e){if(K(2)|0){return 1}C(G(F+1|0)|0);F=F+3|0;return 0}function Ee(e){if(K(4)|0){return 1}A(G(F+1|0)|0,G(F+3|0)|0);F=F+5|0;return 0}function we(e){if(K(8)|0){return 1}k(G(F+1|0)|0,G(F+3|0)|0,G(F+5|0)|0,G(F+7|0)|0);F=F+9|0;return 0}function Ce(e){w();F=F+1|0;return 0}function Ae(e){e=e|0;O(e-192|0|0);F=F+1|0;return 0}function ke(e){e=e|0;O(e-192|0|0);F=F+1|0;return 0}function Te(e){if(K(1)|0){return 1}O(n[F+1|0]|0);F=F+2|0;return 0}function Ie(e){if(K(2)|0){return 1}O(G(F+1|0)|0);F=F+3|0;return 0}function Be(e){if(K(4)|0){return 1}N(G(F+1|0)|0,G(F+3|0)|0);F=F+5|0;return 0}function Pe(e){if(K(8)|0){return 1}x(G(F+1|0)|0,G(F+3|0)|0,G(F+5|0)|0,G(F+7|0)|0);F=F+9|0;return 0}function Re(e){e=e|0;R((e|0)-224|0);F=F+1|0;return 0}function Oe(e){h();F=F+1|0;return 0}function Ne(e){d();F=F+1|0;return 0}function xe(e){b();F=F+1|0;return 0}function Le(e){p();F=F+1|0;return 0}function Me(e){if(K(1)|0){return 1}R(n[F+1|0]|0);F=F+2|0;return 0}function De(e){var t=0;var r=0;var i=1.0;var o=0.0;var s=0.0;if(K(2)|0){return 1}t=n[F+1|0]|0;r=n[F+2|0]|0;if((t|0)&0x80){i=-1.0}o=+(((t|0)&0x7C)>>2);s=+(((t|0)&0x03)<<8|r);if(+o==0.0){u(+(+i*+5.9604644775390625e-8*+s))}else if(+o==31.0){if(+i==1.0){if(+s>0.0){y()}else{m()}}else{if(+s>0.0){v()}else{g()}}}else{u(+(+i*D(+2,+(+o-25.0))*+(1024.0+s)))}F=F+3|0;return 0}function Fe(e){if(K(4)|0){return 1}f(n[F+1|0]|0,n[F+2|0]|0,n[F+3|0]|0,n[F+4|0]|0);F=F+5|0;return 0}function je(e){if(K(8)|0){return 1}l(n[F+1|0]|0,n[F+2|0]|0,n[F+3|0]|0,n[F+4|0]|0,n[F+5|0]|0,n[F+6|0]|0,n[F+7|0]|0,n[F+8|0]|0);F=F+9|0;return 0}function Ue(e){return 1}function He(e){M();F=F+1|0;return 0}var Ke=[z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,q,W,J,X,Ue,Ue,Ue,Ue,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Z,Q,ee,te,Ue,Ue,Ue,Ue,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,ne,ie,oe,se,Ue,Ue,Ue,ae,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ue,fe,le,de,Ue,Ue,Ue,he,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,be,me,ge,ye,Ue,Ue,Ue,ve,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,_e,$e,Se,Ee,we,Ue,Ue,Ue,Ce,Ae,Ae,Ae,Ae,Ae,Ae,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,ke,Te,Ie,Be,Pe,Ue,Ue,Ue,Ue,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Re,Oe,Ne,xe,Le,Me,De,Fe,je,Ue,Ue,Ue,He];return{parse:H}},Bignumber=getCjsExportFromNamespace(bignumber$1),MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},SHIFT32=Math.pow(2,32),SHIFT16=Math.pow(2,16),MAX_SAFE_HIGH=2097151,NEG_ONE=new Bignumber(-1),TEN=new Bignumber(10),TWO=new Bignumber(2),PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5},constants$6={MT:MT,TAG:TAG,NUMBYTES:NUMBYTES,SIMPLE:SIMPLE,SYMS:SYMS,SHIFT32:SHIFT32,SHIFT16:SHIFT16,MAX_SAFE_HIGH:MAX_SAFE_HIGH,NEG_ONE:NEG_ONE,TEN:TEN,TWO:TWO,PARENT:PARENT},utils$k=createCommonjsModule(function(e,t){const r=constants$6.SHIFT32,n=constants$6.SHIFT16;function i(e){return e<16?"0"+e.toString(16):e.toString(16)}t.parseHalf=function(e){var t,r,n;return n=128&e[0]?-1:1,t=(124&e[0])>>2,r=(3&e[0])<<8|e[1],t?31===t?n*(r?NaN:Infinity):n*Math.pow(2,t-25)*(1024+r):5.960464477539063e-8*n*r},t.arrayBufferToBignumber=function(e){const t=e.byteLength;let r="";for(let n=0;n<t;n++)r+=i(e[n]);return new Bignumber(r,16)},t.buildMap=e=>{const t=new Map,r=Object.keys(e),n=r.length;for(let i=0;i<n;i++)t.set(r[i],e[r[i]]);return t},t.buildInt32=(e,t)=>e*n+t,t.buildInt64=(e,n,i,o)=>{const s=t.buildInt32(e,n),a=t.buildInt32(i,o);return s>2097151?new Bignumber(s).times(r).plus(a):s*r+a},t.writeHalf=function(e,t){const r=Buffer.allocUnsafe(4);r.writeFloatBE(t,0);const n=r.readUInt32BE(0);if(0!=(8191&n))return!1;var i=n>>16&32768;const o=n>>23&255,s=8388607&n;if(o>=113&&o<=142)i+=(o-112<<10)+(s>>13);else{if(!(o>=103&&o<113))return!1;if(s&(1<<126-o)-1)return!1;i+=s+8388608>>126-o}return e.writeUInt16BE(i,0),!0},t.keySorter=function(e,t){var r=e[0].byteLength,n=t[0].byteLength;return r>n?1:n>r?-1:e[0].compare(t[0])},t.isNegativeZero=e=>0===e&&1/e<0,t.nextPowerOf2=e=>{let t=0;if(e&&!(e&e-1))return e;for(;0!==e;)e>>=1,t+=1;return 1<<t}}),utils_1$4=utils$k.parseHalf,utils_2$1=utils$k.arrayBufferToBignumber,utils_3$1=utils$k.buildMap,utils_4$1=utils$k.buildInt32,utils_5$1=utils$k.buildInt64,utils_6$1=utils$k.writeHalf,utils_7$1=utils$k.keySorter,utils_8$1=utils$k.isNegativeZero,utils_9$1=utils$k.nextPowerOf2;const MT$1=constants$6.MT,SIMPLE$1=constants$6.SIMPLE,SYMS$1=constants$6.SYMS;class Simple{constructor(e){if("number"!=typeof e)throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(0|e)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,MT$1.SIMPLE_FLOAT)}static isSimple(e){return e instanceof Simple}static decode(e,t){switch(null==t&&(t=!0),e){case SIMPLE$1.FALSE:return!1;case SIMPLE$1.TRUE:return!0;case SIMPLE$1.NULL:return t?null:SYMS$1.NULL;case SIMPLE$1.UNDEFINED:return t?void 0:SYMS$1.UNDEFINED;case-1:if(!t)throw new Error("Invalid BREAK");return SYMS$1.BREAK;default:return new Simple(e)}}}var simple=Simple;class Tagged{constructor(e,t,r){if(this.tag=e,this.value=t,this.err=r,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var t,r;if("function"!=typeof(r=null!=e?e[this.tag]:void 0)&&"function"!=typeof(r=Tagged["_tag"+this.tag]))return this;try{return r.call(Tagged,this.value)}catch(e){return t=e,this.err=t,this}}}var tagged=Tagged;const{URL:URL$1,URLSearchParams:URLSearchParams,format:format}=Url,defaultBase="http://localhost";class URLWithLegacySupport extends URL$1{constructor(e,t=defaultBase){super(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}format(){return this.toString()}}var url={URLWithLegacySupport:URLWithLegacySupport,URLSearchParams:URLSearchParams,format:format,defaultBase:defaultBase};const{URLWithLegacySupport:URLWithLegacySupport$1,format:format$1}=url;var relative=(e,t={},r={},n)=>{let i,o=t.protocol?t.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";try{i=new URLWithLegacySupport$1(e)}catch(e){i={}}const s=Object.assign({},t,{protocol:o||i.protocol,host:t.host||i.host});return new URLWithLegacySupport$1(e,format$1(s)).toString()};const{URLWithLegacySupport:URLWithLegacySupport$2,format:format$2,URLSearchParams:URLSearchParams$1,defaultBase:defaultBase$1}=url;var isoUrl={URL:URLWithLegacySupport$2,URLSearchParams:URLSearchParams$1,format:format$2,relative:relative,defaultBase:defaultBase$1};const{URL:URL$2}=isoUrl;class Decoder{constructor(e){!(e=e||{}).size||e.size<65536?e.size=65536:e.size=utils$k.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=Buffer.from(this._heap),this._reset(),this._knownTags=Object.assign({0:e=>new Date(e),1:e=>new Date(1e3*e),2:e=>utils$k.arrayBufferToBignumber(e),3:e=>constants$6.NEG_ONE.minus(utils$k.arrayBufferToBignumber(e)),4:e=>constants$6.TEN.pow(e[0]).times(e[1]),5:e=>constants$6.TWO.pow(e[0]).times(e[1]),32:e=>new URL$2(e),35:e=>new RegExp(e)},e.tags),this.parser=decoder_asm(commonjsGlobal,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case constants$6.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case constants$6.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case constants$6.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case constants$6.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case constants$6.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case constants$6.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length))}this._currentParent&&this._currentParent.type===constants$6.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,0===e.length&&this._closeParent())}_push(e,t){const r=this._currentParent;switch(r.values++,r.type){case constants$6.PARENT.ARRAY:case constants$6.PARENT.BYTE_STRING:case constants$6.PARENT.UTF8_STRING:r.length>-1?this._ref[this._ref.length-r.length]=e:this._ref.push(e),this._dec();break;case constants$6.PARENT.OBJECT:null!=r.tmpKey?(this._ref[r.tmpKey]=e,r.tmpKey=null,this._dec()):(r.tmpKey=e,"string"!=typeof r.tmpKey&&(r.type=constants$6.PARENT.MAP,r.ref=utils$k.buildMap(r.ref)));break;case constants$6.PARENT.MAP:null!=r.tmpKey?(this._ref.set(r.tmpKey,e),r.tmpKey=null,this._dec()):r.tmpKey=e;break;case constants$6.PARENT.TAG:this._ref.push(e),t||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,t,r){this._parents[this._depth]={type:t,length:r,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:constants$6.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,t){const r=this._knownTags[e];return r?r(t):new tagged(e,t)}createMap(e,t){return e}createObject(e,t){return e}createArray(e,t){return e}createByteString(e,t){return Buffer.concat(e)}createByteStringFromHeap(e,t){return e===t?Buffer.alloc(0):Buffer.from(this._heap.slice(e,t))}createInt(e){return e}createInt32(e,t){return utils$k.buildInt32(e,t)}createInt64(e,t,r,n){return utils$k.buildInt64(e,t,r,n)}createFloat(e){return e}createFloatSingle(e,t,r,n){return ieee754.read([e,t,r,n],0,!1,23,4)}createFloatDouble(e,t,r,n,i,o,s,a){return ieee754.read([e,t,r,n,i,o,s,a],0,!1,52,8)}createInt32Neg(e,t){return-1-utils$k.buildInt32(e,t)}createInt64Neg(e,t,r,n){const i=utils$k.buildInt32(e,t),o=utils$k.buildInt32(r,n);return i>constants$6.MAX_SAFE_HIGH?constants$6.NEG_ONE.minus(new Bignumber(i).times(constants$6.SHIFT32).plus(o)):-1-(i*constants$6.SHIFT32+o)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,t){return e.join("")}createUtf8StringFromHeap(e,t){return e===t?"":this._buffer.toString("utf8",e,t)}createSimpleUnassigned(e){return new simple(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,t){this._push(this.createInt32(e,t))}pushInt64(e,t,r,n){this._push(this.createInt64(e,t,r,n))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,t,r,n){this._push(this.createFloatSingle(e,t,r,n))}pushFloatDouble(e,t,r,n,i,o,s,a){this._push(this.createFloatDouble(e,t,r,n,i,o,s,a))}pushInt32Neg(e,t){this._push(this.createInt32Neg(e,t))}pushInt64Neg(e,t,r,n){this._push(this.createInt64Neg(e,t,r,n))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],constants$6.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,t){const r=utils$k.buildInt32(e,t);this._createArrayStartFixed(r)}pushArrayStartFixed64(e,t,r,n){const i=utils$k.buildInt64(e,t,r,n);this._createArrayStartFixed(i)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,t){const r=utils$k.buildInt32(e,t);this._createObjectStartFixed(r)}pushObjectStartFixed64(e,t,r,n){const i=utils$k.buildInt64(e,t,r,n);this._createObjectStartFixed(i)}pushByteStringStart(){this._parents[this._depth]={type:constants$6.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,t){this._push(this.createByteStringFromHeap(e,t))}pushUtf8StringStart(){this._parents[this._depth]={type:constants$6.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,t){this._push(this.createUtf8StringFromHeap(e,t))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:constants$6.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,t){this.pushTagStart(utils$k.buildInt32(e,t))}pushTagStart8(e,t,r,n){this.pushTagStart(utils$k.buildInt64(e,t,r,n))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){0!==e?this._createParent({},constants$6.PARENT.OBJECT,e):this._push(this.createObject({}))}_createArrayStartFixed(e){0!==e?this._createParent(new Array(e),constants$6.PARENT.ARRAY,e):this._push(this.createArray([]))}_decode(e){if(0===e.byteLength)throw new Error("Input too short");this._reset(),this._heap8.set(e);const t=this.parser.parse(e.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(t>0)throw new Error("Failed to parse");if(0===this._res.length)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,t){return"string"==typeof e&&(e=Buffer.from(e,t||"hex")),new Decoder({size:e.length}).decodeFirst(e)}static decodeAll(e,t){return"string"==typeof e&&(e=Buffer.from(e,t||"hex")),new Decoder({size:e.length}).decodeAll(e)}}Decoder.decodeFirst=Decoder.decode;var decoder=Decoder;class Diagnose extends decoder{createTag(e,t){return`${e}(${t})`}createInt(e){return super.createInt(e).toString()}createInt32(e,t){return super.createInt32(e,t).toString()}createInt64(e,t,r,n){return super.createInt64(e,t,r,n).toString()}createInt32Neg(e,t){return super.createInt32Neg(e,t).toString()}createInt64Neg(e,t,r,n){return super.createInt64Neg(e,t,r,n).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const t=super.createFloat(e);return utils$k.isNegativeZero(e)?"-0_1":`${t}_1`}createFloatSingle(e,t,r,n){return`${super.createFloatSingle(e,t,r,n)}_2`}createFloatDouble(e,t,r,n,i,o,s,a){return`${super.createFloatDouble(e,t,r,n,i,o,s,a)}_3`}createByteString(e,t){const r=e.join(", ");return-1===t?`(_ ${r})`:`h'${r}`}createByteStringFromHeap(e,t){return`h'${Buffer.from(super.createByteStringFromHeap(e,t)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,t){const r=super.createArray(e,t);return-1===t?`[_ ${r.join(", ")}]`:`[${r.join(", ")}]`}createMap(e,t){const r=super.createMap(e),n=Array.from(r.keys()).reduce(collectObject(r),"");return-1===t?`{_ ${n}}`:`{${n}}`}createObject(e,t){const r=super.createObject(e),n=Object.keys(r).reduce(collectObject(r),"");return-1===t?`{_ ${n}}`:`{${n}}`}createUtf8String(e,t){const r=e.join(", ");return-1===t?`(_ ${r})`:`"${r}"`}createUtf8StringFromHeap(e,t){return`"${Buffer.from(super.createUtf8StringFromHeap(e,t)).toString("utf8")}"`}static diagnose(e,t){return"string"==typeof e&&(e=Buffer.from(e,t||"hex")),(new Diagnose).decodeFirst(e)}}var diagnose=Diagnose;function collectObject(e){return(t,r)=>t?`${t}, ${r}: ${e[r]}`:`${r}: ${e[r]}`}const{URL:URL$3}=isoUrl,MT$2=constants$6.MT,NUMBYTES$1=constants$6.NUMBYTES,SHIFT32$1=constants$6.SHIFT32,SYMS$2=constants$6.SYMS,TAG$1=constants$6.TAG,HALF=constants$6.MT.SIMPLE_FLOAT<<5|constants$6.NUMBYTES.TWO,FLOAT=constants$6.MT.SIMPLE_FLOAT<<5|constants$6.NUMBYTES.FOUR,DOUBLE=constants$6.MT.SIMPLE_FLOAT<<5|constants$6.NUMBYTES.EIGHT,TRUE=constants$6.MT.SIMPLE_FLOAT<<5|constants$6.SIMPLE.TRUE,FALSE=constants$6.MT.SIMPLE_FLOAT<<5|constants$6.SIMPLE.FALSE,UNDEFINED=constants$6.MT.SIMPLE_FLOAT<<5|constants$6.SIMPLE.UNDEFINED,NULL=constants$6.MT.SIMPLE_FLOAT<<5|constants$6.SIMPLE.NULL,MAXINT_BN=new Bignumber("0x20000000000000"),BUF_NAN=Buffer.from("f97e00","hex"),BUF_INF_NEG=Buffer.from("f9fc00","hex"),BUF_INF_POS=Buffer.from("f97c00","hex");function toType(e){return{}.toString.call(e).slice(8,-1)}class Encoder{constructor(e){e=e||{},this.streaming="function"==typeof e.stream,this.onData=e.stream,this.semanticTypes=[[URL$3,this._pushUrl],[Bignumber,this._pushBigNumber]];const t=e.genTypes||[],r=t.length;for(let e=0;e<r;e++)this.addSemanticType(t[e][0],t[e][1]);this._reset()}addSemanticType(e,t){const r=this.semanticTypes.length;for(let n=0;n<r;n++){if(this.semanticTypes[n][0]===e){const e=this.semanticTypes[n][1];return this.semanticTypes[n][1]=t,e}}return this.semanticTypes.push([e,t]),null}push(e){return!e||(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}pushWrite(e,t,r){return this.result[this.offset]=e,this.resultMethod[this.offset]=t,this.resultLength[this.offset]=r,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(BUF_NAN)}_pushInfinity(e){const t=e<0?BUF_INF_NEG:BUF_INF_POS;return this.push(t)}_pushFloat(e){const t=Buffer.allocUnsafe(2);if(utils$k.writeHalf(t,e)&&utils$k.parseHalf(t)===e)return this._pushUInt8(HALF)&&this.push(t);const r=Buffer.allocUnsafe(4);return r.writeFloatBE(e,0),r.readFloatBE(0)===e?this._pushUInt8(FLOAT)&&this.push(r):this._pushUInt8(DOUBLE)&&this._pushDoubleBE(e)}_pushInt(e,t,r){const n=t<<5;return e<24?this._pushUInt8(n|e):e<=255?this._pushUInt8(n|NUMBYTES$1.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(n|NUMBYTES$1.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(n|NUMBYTES$1.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(n|NUMBYTES$1.EIGHT)&&this._pushUInt32BE(Math.floor(e/SHIFT32$1))&&this._pushUInt32BE(e%SHIFT32$1):t===MT$2.NEG_INT?this._pushFloat(r):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,MT$2.NEG_INT,e):this._pushInt(e,MT$2.POS_INT)}_pushNumber(e){switch(!1){case e==e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!=0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const t=Buffer.byteLength(e,"utf8");return this._pushInt(t,MT$2.UTF8_STRING)&&this.pushWrite(e,5,t)}_pushBoolean(e){return this._pushUInt8(e?TRUE:FALSE)}_pushUndefined(e){return this._pushUInt8(UNDEFINED)}_pushArray(e,t){const r=t.length;if(!e._pushInt(r,MT$2.ARRAY))return!1;for(let n=0;n<r;n++)if(!e.pushAny(t[n]))return!1;return!0}_pushTag(e){return this._pushInt(e,MT$2.TAG)}_pushDate(e,t){return e._pushTag(TAG$1.DATE_EPOCH)&&e.pushAny(Math.round(t/1e3))}_pushBuffer(e,t){return e._pushInt(t.length,MT$2.BYTE_STRING)&&e.push(t)}_pushNoFilter(e,t){return e._pushBuffer(e,t.slice())}_pushRegexp(e,t){return e._pushTag(TAG$1.REGEXP)&&e.pushAny(t.source)}_pushSet(e,t){if(!e._pushInt(t.size,MT$2.ARRAY))return!1;for(let r of t)if(!e.pushAny(r))return!1;return!0}_pushUrl(e,t){return e._pushTag(TAG$1.URI)&&e.pushAny(t.format())}_pushBigint(e){let t=TAG$1.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),t=TAG$1.NEG_BIGINT);let r=e.toString(16);r.length%2&&(r="0"+r);const n=Buffer.from(r,"hex");return this._pushTag(t)&&this._pushBuffer(this,n)}_pushBigNumber(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-1/0:1/0);if(t.isInteger())return e._pushBigint(t);if(!e._pushTag(TAG$1.DECIMAL_FRAC)||!e._pushInt(2,MT$2.ARRAY))return!1;const r=t.decimalPlaces(),n=t.multipliedBy(new Bignumber(10).pow(r));return!!e._pushIntNum(-r)&&(n.abs().isLessThan(MAXINT_BN)?e._pushIntNum(n.toNumber()):e._pushBigint(n))}_pushMap(e,t){return!!e._pushInt(t.size,MT$2.MAP)&&this._pushRawMap(t.size,Array.from(t))}_pushObject(e){if(!e)return this._pushUInt8(NULL);for(var t=this.semanticTypes.length,r=0;r<t;r++)if(e instanceof this.semanticTypes[r][0])return this.semanticTypes[r][1].call(e,this,e);var n=e.encodeCBOR;if("function"==typeof n)return n.call(e,this);var i=Object.keys(e),o=i.length;return!!this._pushInt(o,MT$2.MAP)&&this._pushRawMap(o,i.map(t=>[t,e[t]]))}_pushRawMap(e,t){t=t.map(function(e){return e[0]=Encoder.encode(e[0]),e}).sort(utils$k.keySorter);for(var r=0;r<e;r++){if(!this.push(t[r][0]))return!1;if(!this.pushAny(t[r][1]))return!1}return!0}write(e){return this.pushAny(e)}pushAny(e){switch(toType(e)){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Buffer.isBuffer(e)?e:Buffer.from(e));case"Null":return this._pushUInt8(NULL);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case SYMS$2.NULL:return this._pushObject(null);case SYMS$2.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(0===this.offset)return null;for(var e=this.result,t=this.resultLength,r=this.resultMethod,n=this.offset,i=0,o=0;o<n;o++)i+=t[o];var s=Buffer.allocUnsafe(i),a=0,c=0;for(o=0;o<n;o++){switch(c=t[o],r[o]){case 0:e[o].copy(s,a);break;case 1:s.writeUInt8(e[o],a,!0);break;case 2:s.writeUInt16BE(e[o],a,!0);break;case 3:s.writeUInt32BE(e[o],a,!0);break;case 4:s.writeDoubleBE(e[o],a,!0);break;case 5:s.write(e[o],a,c,"utf8");break;default:throw new Error("unkown method")}a+=c}var u=s;return this._reset(),u}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const t=new Encoder;if(!t.pushAny(e))throw new Error("Failed to encode input");return t.finalize()}}var encoder=Encoder,src$d=createCommonjsModule(function(e,t){t.Diagnose=diagnose,t.Decoder=decoder,t.Encoder=encoder,t.Simple=simple,t.Tagged=tagged,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}}),src_1$3=src$d.Diagnose,src_2$3=src$d.Decoder,src_3$3=src$d.Encoder,src_4$3=src$d.Simple,src_5$3=src$d.Tagged,src_6$2=src$d.decodeAll,src_7$2=src$d.decodeFirst,src_8$2=src$d.diagnose,src_9$2=src$d.encode,src_10$1=src$d.decode,src_11$1=src$d.leveldb;function createError(e,t,r){var n,i=e instanceof Error?e:new Error(e);if("object"==typeof t?r=t:null!=t&&(i.code=t),r)for(n in r)i[n]=r[n];return i}var errCode=createError,sha3$1=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),murmurHash3js=createCommonjsModule(function(e,t){!function(r,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function o(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function s(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function a(e,t){return e<<t|e>>>32-t}function c(e){return e=s(e^=e>>>16,2246822507),e=s(e^=e>>>13,3266489909),e^=e>>>16}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function f(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function d(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function h(e,t){return[e[0]^t[0],e[1]^t[1]]}function p(e){return e=h(e,[0,e[0]>>>1]),e=h(e=f(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=h(e=f(e,[3301882366,444984403]),[0,e[0]>>>1])}i.x86.hash32=function(e,t){if(!i.inputValidation||o(e)){t=t||0;for(var r=e.length%4,n=e.length-r,u=t,f=0,l=3432918353,d=461845907,h=0;h<n;h+=4)f=s(f=e[h]|e[h+1]<<8|e[h+2]<<16|e[h+3]<<24,l),f=s(f=a(f,15),d),u=s(u=a(u^=f,13),5)+3864292196;switch(f=0,r){case 3:f^=e[h+2]<<16;case 2:f^=e[h+1]<<8;case 1:f=s(f^=e[h],l),u^=f=s(f=a(f,15),d)}return(u=c(u^=e.length))>>>0}},i.x86.hash128=function(e,t){if(!i.inputValidation||o(e)){t=t||0;for(var r=e.length%16,n=e.length-r,u=t,f=t,l=t,d=t,h=0,p=0,b=0,m=0,g=597399067,y=2869860233,v=951274213,_=2716044179,$=0;$<n;$+=16)h=e[$]|e[$+1]<<8|e[$+2]<<16|e[$+3]<<24,p=e[$+4]|e[$+5]<<8|e[$+6]<<16|e[$+7]<<24,b=e[$+8]|e[$+9]<<8|e[$+10]<<16|e[$+11]<<24,m=e[$+12]|e[$+13]<<8|e[$+14]<<16|e[$+15]<<24,h=a(h=s(h,g),15),u=a(u^=h=s(h,y),19),u=s(u+=f,5)+1444728091,p=a(p=s(p,y),16),f=a(f^=p=s(p,v),17),f=s(f+=l,5)+197830471,b=a(b=s(b,v),17),l=a(l^=b=s(b,_),15),l=s(l+=d,5)+2530024501,m=a(m=s(m,_),18),d=a(d^=m=s(m,g),13),d=s(d+=u,5)+850148119;switch(h=0,p=0,b=0,m=0,r){case 15:m^=e[$+14]<<16;case 14:m^=e[$+13]<<8;case 13:m=s(m^=e[$+12],_),d^=m=s(m=a(m,18),g);case 12:b^=e[$+11]<<24;case 11:b^=e[$+10]<<16;case 10:b^=e[$+9]<<8;case 9:b=s(b^=e[$+8],v),l^=b=s(b=a(b,17),_);case 8:p^=e[$+7]<<24;case 7:p^=e[$+6]<<16;case 6:p^=e[$+5]<<8;case 5:p=s(p^=e[$+4],y),f^=p=s(p=a(p,16),v);case 4:h^=e[$+3]<<24;case 3:h^=e[$+2]<<16;case 2:h^=e[$+1]<<8;case 1:h=s(h^=e[$],g),u^=h=s(h=a(h,15),y)}return u^=e.length,u+=f^=e.length,u+=l^=e.length,f+=u+=d^=e.length,l+=u,d+=u,u=c(u),u+=f=c(f),u+=l=c(l),f+=u+=d=c(d),l+=u,d+=u,("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)}},i.x64.hash128=function(e,t){if(!i.inputValidation||o(e)){t=t||0;for(var r=e.length%16,n=e.length-r,s=[0,t],a=[0,t],c=[0,0],b=[0,0],m=[2277735313,289559509],g=[1291169091,658871167],y=0;y<n;y+=16)c=[e[y+4]|e[y+5]<<8|e[y+6]<<16|e[y+7]<<24,e[y]|e[y+1]<<8|e[y+2]<<16|e[y+3]<<24],b=[e[y+12]|e[y+13]<<8|e[y+14]<<16|e[y+15]<<24,e[y+8]|e[y+9]<<8|e[y+10]<<16|e[y+11]<<24],c=l(c=f(c,m),31),s=u(s=l(s=h(s,c=f(c,g)),27),a),s=u(f(s,[0,5]),[0,1390208809]),b=l(b=f(b,g),33),a=u(a=l(a=h(a,b=f(b,m)),31),s),a=u(f(a,[0,5]),[0,944331445]);switch(c=[0,0],b=[0,0],r){case 15:b=h(b,d([0,e[y+14]],48));case 14:b=h(b,d([0,e[y+13]],40));case 13:b=h(b,d([0,e[y+12]],32));case 12:b=h(b,d([0,e[y+11]],24));case 11:b=h(b,d([0,e[y+10]],16));case 10:b=h(b,d([0,e[y+9]],8));case 9:b=f(b=h(b,[0,e[y+8]]),g),a=h(a,b=f(b=l(b,33),m));case 8:c=h(c,d([0,e[y+7]],56));case 7:c=h(c,d([0,e[y+6]],48));case 6:c=h(c,d([0,e[y+5]],40));case 5:c=h(c,d([0,e[y+4]],32));case 4:c=h(c,d([0,e[y+3]],24));case 3:c=h(c,d([0,e[y+2]],16));case 2:c=h(c,d([0,e[y+1]],8));case 1:c=f(c=h(c,[0,e[y]]),m),s=h(s,c=f(c=l(c,31),g))}return s=u(s=h(s,[0,e.length]),a=h(a,[0,e.length])),a=u(a,s),s=u(s=p(s),a=p(a)),a=u(a,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}},e.exports&&(t=e.exports=i),t.murmurHash3=i}()}),murmurHash3js_1=murmurHash3js.murmurHash3,murmurhash3jsRevisited=murmurHash3js,sha$2=e=>async t=>{switch(e){case"sha1":return crypto$l.createHash("sha1").update(t).digest();case"sha2-256":return crypto$l.createHash("sha256").update(t).digest();case"sha2-512":return crypto$l.createHash("sha512").update(t).digest();case"dbl-sha2-256":{const e=crypto$l.createHash("sha256").update(t).digest();return crypto$l.createHash("sha256").update(e).digest()}default:throw new Error(`${e} is not a supported algorithm`)}};const{Buffer:Buffer$8}=buffer$1,fromNumberTo32BitBuf=e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return Buffer$8.from(t)};var utils$l={fromNumberTo32BitBuf:fromNumberTo32BitBuf},ERROR_MSG_INPUT="Input must be an string, Buffer or Uint8Array";function normalizeInput(e){var t;if(e instanceof Uint8Array)t=e;else if(e instanceof Buffer)t=new Uint8Array(e);else{if("string"!=typeof e)throw new Error(ERROR_MSG_INPUT);t=new Uint8Array(Buffer.from(e,"utf8"))}return t}function toHex$2(e){return Array.prototype.map.call(e,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function uint32ToHex(e){return(4294967296+e).toString(16).substring(1)}function debugPrint(e,t,r){for(var n="\n"+e+" = ",i=0;i<t.length;i+=2){if(32===r)n+=uint32ToHex(t[i]).toUpperCase(),n+=" ",n+=uint32ToHex(t[i+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);n+=uint32ToHex(t[i+1]).toUpperCase(),n+=uint32ToHex(t[i]).toUpperCase()}i%6==4?n+="\n"+new Array(e.length+4).join(" "):i<t.length-2&&(n+=" ")}console.log(n)}function testSpeed(e,t,r){for(var n=(new Date).getTime(),i=new Uint8Array(t),o=0;o<t;o++)i[o]=o%256;var s=(new Date).getTime();for(console.log("Generated random input in "+(s-n)+"ms"),n=s,o=0;o<r;o++){var a=e(i),c=(new Date).getTime(),u=c-n;n=c,console.log("Hashed in "+u+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}var util$1={normalizeInput:normalizeInput,toHex:toHex$2,debugPrint:debugPrint,testSpeed:testSpeed};function ADD64AA(e,t,r){var n=e[t]+e[r],i=e[t+1]+e[r+1];n>=4294967296&&i++,e[t]=n,e[t+1]=i}function ADD64AC(e,t,r,n){var i=e[t]+r;r<0&&(i+=4294967296);var o=e[t+1]+n;i>=4294967296&&o++,e[t]=i,e[t+1]=o}function B2B_GET32(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function B2B_G(e,t,r,n,i,o){var s=m[i],a=m[i+1],c=m[o],u=m[o+1];ADD64AA(v,e,t),ADD64AC(v,e,s,a);var f=v[n]^v[e],l=v[n+1]^v[e+1];v[n]=l,v[n+1]=f,ADD64AA(v,r,n),f=v[t]^v[r],l=v[t+1]^v[r+1],v[t]=f>>>24^l<<8,v[t+1]=l>>>24^f<<8,ADD64AA(v,e,t),ADD64AC(v,e,c,u),f=v[n]^v[e],l=v[n+1]^v[e+1],v[n]=f>>>16^l<<16,v[n+1]=l>>>16^f<<16,ADD64AA(v,r,n),f=v[t]^v[r],l=v[t+1]^v[r+1],v[t]=l>>>31^f<<1,v[t+1]=f>>>31^l<<1}var BLAKE2B_IV32=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),SIGMA8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],SIGMA82=new Uint8Array(SIGMA8.map(function(e){return 2*e})),v=new Uint32Array(32),m=new Uint32Array(32);function blake2bCompress(e,t){var r=0;for(r=0;r<16;r++)v[r]=e.h[r],v[r+16]=BLAKE2B_IV32[r];for(v[24]=v[24]^e.t,v[25]=v[25]^e.t/4294967296,t&&(v[28]=~v[28],v[29]=~v[29]),r=0;r<32;r++)m[r]=B2B_GET32(e.b,4*r);for(r=0;r<12;r++)B2B_G(0,8,16,24,SIGMA82[16*r+0],SIGMA82[16*r+1]),B2B_G(2,10,18,26,SIGMA82[16*r+2],SIGMA82[16*r+3]),B2B_G(4,12,20,28,SIGMA82[16*r+4],SIGMA82[16*r+5]),B2B_G(6,14,22,30,SIGMA82[16*r+6],SIGMA82[16*r+7]),B2B_G(0,10,20,30,SIGMA82[16*r+8],SIGMA82[16*r+9]),B2B_G(2,12,22,24,SIGMA82[16*r+10],SIGMA82[16*r+11]),B2B_G(4,14,16,26,SIGMA82[16*r+12],SIGMA82[16*r+13]),B2B_G(6,8,18,28,SIGMA82[16*r+14],SIGMA82[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^v[r]^v[r+16]}function blake2bInit(e,t){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var r={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e},n=0;n<16;n++)r.h[n]=BLAKE2B_IV32[n];var i=t?t.length:0;return r.h[0]^=16842752^i<<8^e,t&&(blake2bUpdate(r,t),r.c=128),r}function blake2bUpdate(e,t){for(var r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,blake2bCompress(e,!1),e.c=0),e.b[e.c++]=t[r]}function blake2bFinal(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;blake2bCompress(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r);return t}function blake2b(e,t,r){r=r||64,e=util$1.normalizeInput(e);var n=blake2bInit(r,t);return blake2bUpdate(n,e),blake2bFinal(n)}function blake2bHex(e,t,r){var n=blake2b(e,t,r);return util$1.toHex(n)}var blake2b_1={blake2b:blake2b,blake2bHex:blake2bHex,blake2bInit:blake2bInit,blake2bUpdate:blake2bUpdate,blake2bFinal:blake2bFinal};function B2S_GET32(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function B2S_G(e,t,r,n,i,o){v$1[e]=v$1[e]+v$1[t]+i,v$1[n]=ROTR32(v$1[n]^v$1[e],16),v$1[r]=v$1[r]+v$1[n],v$1[t]=ROTR32(v$1[t]^v$1[r],12),v$1[e]=v$1[e]+v$1[t]+o,v$1[n]=ROTR32(v$1[n]^v$1[e],8),v$1[r]=v$1[r]+v$1[n],v$1[t]=ROTR32(v$1[t]^v$1[r],7)}function ROTR32(e,t){return e>>>t^e<<32-t}var BLAKE2S_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),v$1=new Uint32Array(16),m$1=new Uint32Array(16);function blake2sCompress(e,t){var r=0;for(r=0;r<8;r++)v$1[r]=e.h[r],v$1[r+8]=BLAKE2S_IV[r];for(v$1[12]^=e.t,v$1[13]^=e.t/4294967296,t&&(v$1[14]=~v$1[14]),r=0;r<16;r++)m$1[r]=B2S_GET32(e.b,4*r);for(r=0;r<10;r++)B2S_G(0,4,8,12,m$1[SIGMA[16*r+0]],m$1[SIGMA[16*r+1]]),B2S_G(1,5,9,13,m$1[SIGMA[16*r+2]],m$1[SIGMA[16*r+3]]),B2S_G(2,6,10,14,m$1[SIGMA[16*r+4]],m$1[SIGMA[16*r+5]]),B2S_G(3,7,11,15,m$1[SIGMA[16*r+6]],m$1[SIGMA[16*r+7]]),B2S_G(0,5,10,15,m$1[SIGMA[16*r+8]],m$1[SIGMA[16*r+9]]),B2S_G(1,6,11,12,m$1[SIGMA[16*r+10]],m$1[SIGMA[16*r+11]]),B2S_G(2,7,8,13,m$1[SIGMA[16*r+12]],m$1[SIGMA[16*r+13]]),B2S_G(3,4,9,14,m$1[SIGMA[16*r+14]],m$1[SIGMA[16*r+15]]);for(r=0;r<8;r++)e.h[r]^=v$1[r]^v$1[r+8]}function blake2sInit(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");var r=t?t.length:0;if(t&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");var n={h:new Uint32Array(BLAKE2S_IV),b:new Uint32Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(blake2sUpdate(n,t),n.c=64),n}function blake2sUpdate(e,t){for(var r=0;r<t.length;r++)64===e.c&&(e.t+=e.c,blake2sCompress(e,!1),e.c=0),e.b[e.c++]=t[r]}function blake2sFinal(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;blake2sCompress(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)&255;return t}function blake2s(e,t,r){r=r||32,e=util$1.normalizeInput(e);var n=blake2sInit(r,t);return blake2sUpdate(n,e),blake2sFinal(n)}function blake2sHex(e,t,r){var n=blake2s(e,t,r);return util$1.toHex(n)}var blake2s_1={blake2s:blake2s,blake2sHex:blake2sHex,blake2sInit:blake2sInit,blake2sUpdate:blake2sUpdate,blake2sFinal:blake2sFinal},blakejs={blake2b:blake2b_1.blake2b,blake2bHex:blake2b_1.blake2bHex,blake2bInit:blake2b_1.blake2bInit,blake2bUpdate:blake2b_1.blake2bUpdate,blake2bFinal:blake2b_1.blake2bFinal,blake2s:blake2s_1.blake2s,blake2sHex:blake2s_1.blake2sHex,blake2sInit:blake2s_1.blake2sInit,blake2sUpdate:blake2s_1.blake2sUpdate,blake2sFinal:blake2s_1.blake2sFinal};const{Buffer:Buffer$9}=buffer$1,minB=45569,minS=45633,blake2b$1={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$1={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash=(e,t)=>async r=>{const n=t.init(e,null);return t.update(n,r),Buffer$9.from(t.digest(n))};var blake_1=e=>{for(let t=0;t<64;t++)e[minB+t]=makeB2Hash(t+1,blake2b$1);for(let t=0;t<32;t++)e[minS+t]=makeB2Hash(t+1,blake2s$1)};const{Buffer:Buffer$a}=buffer$1,{fromNumberTo32BitBuf:fromNumberTo32BitBuf$1}=utils$l,hash$1=e=>async t=>{switch(e){case"sha3-224":return Buffer$a.from(sha3$1.sha3_224.arrayBuffer(t));case"sha3-256":return Buffer$a.from(sha3$1.sha3_256.arrayBuffer(t));case"sha3-384":return Buffer$a.from(sha3$1.sha3_384.arrayBuffer(t));case"sha3-512":return Buffer$a.from(sha3$1.sha3_512.arrayBuffer(t));case"shake-128":return Buffer$a.from(sha3$1.shake128.create(128).update(t).arrayBuffer());case"shake-256":return Buffer$a.from(sha3$1.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return Buffer$a.from(sha3$1.keccak224.arrayBuffer(t));case"keccak-256":return Buffer$a.from(sha3$1.keccak256.arrayBuffer(t));case"keccak-384":return Buffer$a.from(sha3$1.keccak384.arrayBuffer(t));case"keccak-512":return Buffer$a.from(sha3$1.keccak512.arrayBuffer(t));case"murmur3-128":return Buffer$a.from(murmurhash3jsRevisited.x64.hash128(t),"hex");case"murmur3-32":return fromNumberTo32BitBuf$1(murmurhash3jsRevisited.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};var crypto$2={sha1:sha$2("sha1"),sha2256:sha$2("sha2-256"),sha2512:sha$2("sha2-512"),dblSha2256:sha$2("dbl-sha2-256"),sha3224:hash$1("sha3-224"),sha3256:hash$1("sha3-256"),sha3384:hash$1("sha3-384"),sha3512:hash$1("sha3-512"),shake128:hash$1("shake-128"),shake256:hash$1("shake-256"),keccak224:hash$1("keccak-224"),keccak256:hash$1("keccak-256"),keccak384:hash$1("keccak-384"),keccak512:hash$1("keccak-512"),murmur3128:hash$1("murmur3-128"),murmur332:hash$1("murmur3-32"),addBlake:blake_1};const{Buffer:Buffer$b}=buffer$1;async function Multihashing(e,t,r){const n=await Multihashing.digest(e,t,r);return src.encode(n,t,r)}Multihashing.Buffer=Buffer$b,Multihashing.multihash=src,Multihashing.digest=async(e,t,r)=>{const n=Multihashing.createHash(t),i=await n(e);return r?i.slice(0,r):i},Multihashing.createHash=function(e){if(!e)throw errCode("hash algorithm must be specified","ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=src.coerceCode(e),!Multihashing.functions[e])throw errCode(`multihash function '${e}' not yet supported`,"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing.functions[e]},Multihashing.functions={17:crypto$2.sha1,18:crypto$2.sha2256,19:crypto$2.sha2512,20:crypto$2.sha3512,21:crypto$2.sha3384,22:crypto$2.sha3256,23:crypto$2.sha3224,24:crypto$2.shake128,25:crypto$2.shake256,26:crypto$2.keccak224,27:crypto$2.keccak256,28:crypto$2.keccak384,29:crypto$2.keccak512,34:crypto$2.murmur3128,35:crypto$2.murmur332,86:crypto$2.dblSha2256},crypto$2.addBlake(Multihashing.functions),Multihashing.validate=async(e,t)=>{const r=await Multihashing(e,src.decode(t).name);return 0===Buffer$b.compare(t,r)};var src$e=Multihashing,CIDUtil$3={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$3=CIDUtil$3;class CID$2{constructor(e,t,r,n){if(_CID$2.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$2.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$2.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$2.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$2(0,this.codec,this.multihash)}toV1(){return new _CID$2(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$3.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$2=classIs(CID$2,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$2.codecs=baseTable;var src$f=_CID$2,node=Node$1;function Node$1(e,t){this.value=e,this.next=t}Node$1.prototype.contains=function(e){for(var t=this;t;){if(t.value===e)return!0;t=t.next}return!1};var isCircular_1=isCircular;function isCircular(e){if(!(e instanceof Object))throw new TypeError('"obj" must be an object (or inherit from it)');return _isCircular(e)}function _isCircular(e,t){for(var r in t=new node(e,t),e){var n=e[r];if(n instanceof Object&&(t.contains(n)||_isCircular(n,t)))return!0}return!1}var util$2=createCommonjsModule(function(e,t){const r=42;function n(e){let t;try{t=isCircular_1(e)}catch(e){t=!1}if(t)throw new Error("The object passed has circular references");return function e(t){if(!t||Buffer.isBuffer(t)||"string"==typeof t)return t;if(Array.isArray(t))return t.map(e);if(src$f.isCID(t))return function(e){return"string"==typeof e?e=new src$f(e).buffer:src$f.isCID(e)&&(e=e.buffer),new src$d.Tagged(r,Buffer.concat([Buffer.from("00","hex"),e]))}(t);const n=Object.keys(t);if(n.length>0){const r={};return n.forEach(n=>{"object"==typeof t[n]?r[n]=e(t[n]):r[n]=t[n]}),r}return t}(e)}(t=e.exports).codec=src$4.DAG_CBOR,t.defaultHashAlg=src$4.SHA2_256;const i={[r]:e=>(e=e.slice(1),new src$f(e))};let o=65536;let s=67108864,a=null;t.configureDecoder=e=>{let t=i;e?("number"==typeof e.size&&(o=e.size),"number"==typeof e.maxSize&&(s=e.maxSize),e.tags&&(t=Object.assign({},i,e&&e.tags))):(o=65536,s=67108864);let r={tags:t,size:o};a=new src$d.Decoder(r),o=r.size},t.configureDecoder(),t.serialize=e=>{const t=n(e);return src$d.encode(t)},t.deserialize=e=>{if(e.length>o&&e.length<=s&&t.configureDecoder({size:e.length}),e.length>o)throw new Error("Data is too large to deserialize with current decoder");return a.decodeFirst(e)},t.cid=async(e,r)=>{const n={cidVersion:1,hashAlg:t.defaultHashAlg},i=Object.assign(n,r),o=await src$e(e,i.hashAlg),s=src$4.print[t.codec];return new src$f(i.cidVersion,s,o)}}),util_1=util$2.codec,util_2=util$2.defaultHashAlg,util_3=util$2.configureDecoder,util_4=util$2.serialize,util_5=util$2.deserialize,util_6=util$2.cid,resolve=(e,t)=>{let r=util$2.deserialize(e);const n=t.split("/").filter(Boolean);for(;n.length;){const e=n.shift();if(void 0===r[e])throw new Error(`Object has no property '${e}'`);if(r=r[e],src$f.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}};const traverse=function*(e,t){if(!Buffer.isBuffer(e)&&!src$f.isCID(e)&&"string"!=typeof e&&null!==e)for(const r of Object.keys(e)){const n=void 0===t?r:t+"/"+r;yield n,yield*traverse(e[r],n)}};var tree=function*(e){const t=util$2.deserialize(e);yield*traverse(t)},resolver={resolve:resolve,tree:tree},src$g=createCommonjsModule(function(e,t){t.util=util$2,t.resolver=resolver,t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg}),src_1$4=src$g.util,src_2$4=src$g.resolver,src_3$4=src$g.codec,src_4$4=src$g.defaultHashAlg;const addNamedLink=(e,t,r)=>{["",...Object.keys(e)].includes(t)||Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>e._links[r].Hash})};var addNamedLink_1=addNamedLink;const addEnumerableGetters=(e,t)=>{for(const r of t){let t,n=e;for(;void 0===t;){if(null===(n=Object.getPrototypeOf(n)))throw new Error(`no getter named '${r}' found`);t=Object.getOwnPropertyDescriptor(n,r)}if(void 0===t.get)throw new Error(`no getter named '${r}' found`);Object.defineProperty(e,r,{enumerable:!0,get:t.get})}},hidePrivateFields=e=>{for(const t in e)"_"===t[0]&&Object.defineProperty(e,t,{enumerable:!1})};var visibility={addEnumerableGetters:addEnumerableGetters,hidePrivateFields:hidePrivateFields},stable=createCommonjsModule(function(e,t){e.exports=function(){var e=function(e,r){return t(e.slice(),r)};function t(e,t){"function"!=typeof t&&(t=function(e,t){return String(e).localeCompare(t)});var n=e.length;if(n<=1)return e;for(var i=new Array(n),o=1;o<n;o*=2){r(e,t,o,i);var s=e;e=i,i=s}return e}e.inplace=function(e,n){var i=t(e,n);return i!==e&&r(i,null,e.length,e),e};var r=function(e,t,r,n){var i,o,s,a,c,u=e.length,f=0,l=2*r;for(i=0;i<u;i+=l)for(s=(o=i+r)+r,o>u&&(o=u),s>u&&(s=u),a=i,c=o;;)if(a<o&&c<s)t(e[a],e[c])<=0?n[f++]=e[a++]:n[f++]=e[c++];else if(a<o)n[f++]=e[a++];else{if(!(c<s))break;n[f++]=e[c++]}};return e}()}),CIDUtil$4={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$4=CIDUtil$4;class CID$3{constructor(e,t,r,n){if(_CID$3.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$3.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$3.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$3.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$3(0,this.codec,this.multihash)}toV1(){return new _CID$3(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$4.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$3=classIs(CID$3,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$3.codecs=baseTable;var src$h=_CID$3,tokenize=function(e){var t,r=function(e){return e.trim()};return e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(r).filter(Boolean).map(function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e}).map(r).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((t=!1,function(e){return"/*"===e?(t=!0,!1):"*/"===e?(t=!1,!1):!t}))},MAX_RANGE=536870911,PACKABLE_TYPES=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],onfieldoptions=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var r=e.shift();if("("===r&&(r=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[r]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},onfield=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var r=e.shift();t.required="required"===r,t.repeated="repeated"===r,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=onfieldoptions(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},onmessagebody=function(e){for(var t={enums:[],messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(onfield(e));break;case"enum":t.enums.push(onenum(e));break;case"message":t.messages.push(onmessage(e));break;case"extensions":t.extensions=onextensions(e);break;case"oneof":e.shift();var r=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var n=onfield(e);n.oneof=r,t.fields.push(n)}e.shift();break;case"extend":t.extends.push(onextend(e));break;case";":e.shift();break;case"reserved":case"option":for(e.shift();";"!==e[0];)e.shift();break;default:e.unshift("optional"),t.fields.push(onfield(e))}return t},onextend=function(e){return{name:e[1],message:onmessage(e)}},onextensions=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var r=e.shift();if("max"===r&&(r=MAX_RANGE),r=Number(r),isNaN(r))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:r}},onmessage=function(e){e.shift();var t=1,r=[],n={name:e.shift(),enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),r=onmessagebody(r),n.enums=r.enums,n.messages=r.messages,n.fields=r.fields,n.extends=r.extends,n.extensions=r.extensions,n;r.push(e.shift())}if(t)throw new Error("No closing tag for message")},onpackagename=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},onsyntaxversion=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},onenumvalue=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var r={value:null,options:{}};return r.value=Number(e.shift()),"["===e[0]&&(r.options=onfieldoptions(e)),e.shift(),{name:t,val:r}},onenum=function(e){e.shift();var t={},r={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),r;if("option"!==e[0]){var n=onenumvalue(e);r.values[n.name]=n.val}else t=onoption(e),r.options[t.name]=t.value}throw new Error("No closing tag for enum")},onoption=function(e){for(var t=null,r=null,n=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:r};switch(e[0]){case"option":e.shift();var i="("===e[0];if(i&&e.shift(),t=e.shift(),i){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(r=n(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(r))throw new Error("Unexpected value for option optimize_for: "+r);"{"===r&&(r=onoptionMap(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},onoptionMap=function(e){for(var t=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},r={};e.length;){if("}"===e[0])return e.shift(),r;var n="("===e[0];n&&e.shift();var i=e.shift();if(n){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}var o=null;switch(e[0]){case":":if(void 0!==r[i])throw new Error("Duplicate option map key "+i);e.shift(),"{"===(o=t(e.shift()))&&(o=onoptionMap(e)),r[i]=o,";"===e[0]&&e.shift();break;case"{":if(e.shift(),o=onoptionMap(e),void 0===r[i]&&(r[i]=[]),!Array.isArray(r[i]))throw new Error("Duplicate option map key "+i);r[i].push(o);break;default:throw new Error("Unexpected token in option map: "+e[0])}}throw new Error("No closing tag for option map")},onimport=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},onservice=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var r=onoption(e);if(void 0!==t.options[r.name])throw new Error("Duplicate option "+r.name);t.options[r.name]=r.value;break;case"rpc":t.methods.push(onrpc(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},onrpc=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var r=onoption(e);if(void 0!==t.options[r.name])throw new Error("Duplicate option "+r.name);t.options[r.name]=r.value}throw new Error("No closing tag for rpc")},parse$1=function(e){for(var t=tokenize(e.toString()),r=0;r<t.length;r++){var n;if(/^("|')([^'"]*)$/.test(t[r]))for(n=1===t[r].length?r+1:r;n<t.length;n++)if(/^([^'"]*)("|')$/.test(t[n])){t=t.slice(0,r).concat(t.slice(r,n+1).join("")).concat(t.slice(n+1));break}}for(var i={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},o=!0;t.length;){switch(t[0]){case"package":i.package=onpackagename(t);break;case"syntax":if(!o)throw new Error("Protobuf syntax version should be first thing in file");i.syntax=onsyntaxversion(t);break;case"message":i.messages.push(onmessage(t));break;case"enum":i.enums.push(onenum(t));break;case"option":var s=onoption(t);if(i.options[s.name])throw new Error("Duplicate option "+s.name);i.options[s.name]=s.value;break;case"import":i.imports.push(onimport(t));break;case"extend":i.extends.push(onextend(t));break;case"service":i.services||(i.services=[]),i.services.push(onservice(t));break;default:throw new Error("Unexpected token: "+t[0])}o=!1}return i.extends.forEach(function(e){i.messages.forEach(function(t){t.name===e.name&&e.message.fields.forEach(function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)})})}),i.messages.forEach(function(e){e.fields.forEach(function(t){var r,n,o,s;if(t.options&&"true"===t.options.packed&&-1===PACKABLE_TYPES.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some(function(e){return e.name===t.type}))return}else{if((r=t.type.split(".")).length>2)throw new Error("what is this?");if(n=r[0],o=r[1],i.messages.some(function(e){if(e.name===n)return s=e,e}),s&&s.enums&&s.enums.some(function(e){return e.name===o}))return}throw new Error("Fields of type "+t.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}})}),i},parse_1=parse$1,onfield$1=function(e,t){var r=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(r="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(r="");var n=Object.keys(e.options||{}).map(function(t){return t+" = "+e.options[t]}).join(",");return n&&(n=" ["+n+"]"),t.push((r?r+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+n+";"),t},onmessage$1=function(e,t){t.push("message "+e.name+" {"),e.enums||(e.enums=[]),e.enums.forEach(function(e){t.push(onenum$1(e,[]))}),e.messages||(e.messages=[]),e.messages.forEach(function(e){t.push(onmessage$1(e,[]))});var r={};return e.fields||(e.fields=[]),e.fields.forEach(function(e){e.oneof?(r[e.oneof]||(r[e.oneof]=[]),r[e.oneof].push(onfield$1(e,[]))):t.push(onfield$1(e,[]))}),Object.keys(r).forEach(function(e){r[e].unshift("oneof "+e+" {"),r[e].push("}"),t.push(r[e])}),t.push("}",""),t},onenum$1=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var r=onoption$1(e.options,[]);return r.length>1&&t.push(r.slice(0,-1)),Object.keys(e.values).map(function(r){var n=onenumvalue$1(e.values[r]);t.push([r+" = "+n+";"])}),t.push("}",""),t},onenumvalue$1=function(e,t){var r=Object.keys(e.options||{}).map(function(t){return t+" = "+e.options[t]}).join(",");return r&&(r=" ["+r+"]"),e.value+r},onoption$1=function(e,t){var r=Object.keys(e);return r.forEach(function(r){var n=e[r];~r.indexOf(".")&&(r="("+r+")");var i=typeof n;"object"===i?(n=onoptionMap$1(n,[])).length&&t.push("option "+r+" = {",n,"};"):("string"===i&&"optimize_for"!==r&&(n='"'+n+'"'),t.push("option "+r+" = "+n+";"))}),r.length>0&&t.push(""),t},onoptionMap$1=function(e,t){return Object.keys(e).forEach(function(r){var n=e[r],i=typeof n;"object"===i?Array.isArray(n)?n.forEach(function(e){(e=onoptionMap$1(e,[])).length&&t.push(r+" {",e,"}")}):(n=onoptionMap$1(n,[])).length&&t.push(r+" {",n,"}"):("string"===i&&(n='"'+n+'"'),t.push(r+": "+n))}),t},onservices=function(e,t){return t.push("service "+e.name+" {"),e.options||(e.options={}),onoption$1(e.options,t),e.methods||(e.methods=[]),e.methods.forEach(function(e){t.push(onrpc$1(e,[]))}),t.push("}",""),t},onrpc$1=function(e,t){var r="rpc "+e.name+"(";e.client_streaming&&(r+="stream "),r+=e.input_type+") returns (",e.server_streaming&&(r+="stream "),r+=e.output_type+")",e.options||(e.options={});var n=onoption$1(e.options,[]);return n.length>1?t.push(r+" {",n.slice(0,-1),"}"):t.push(r+";"),t},indent=function(e){return function(t){return Array.isArray(t)?t.map(indent(e+"  ")).join("\n"):e+t}},stringify=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),onoption$1(e.options,t),e.enums||(e.enums=[]),e.enums.forEach(function(e){onenum$1(e,t)}),e.messages||(e.messages=[]),e.messages.forEach(function(e){onmessage$1(e,t)}),e.services&&e.services.forEach(function(e){onservices(e,t)}),t.map(indent("")).join("\n")},protocolBuffersSchema=parse$1,parse_1$1=parse$1,stringify_1=stringify;protocolBuffersSchema.parse=parse_1$1,protocolBuffersSchema.stringify=stringify_1;var encode$3=function e(t,r,n){t=t>=0?2*t:-2*t-1;var i=varint.encode(t,r,n);return e.bytes=varint.encode.bytes,i},decode$3=function e(t,r){var n=varint.decode(t,r);return e.bytes=varint.decode.bytes,1&n?(n+1)/-2:n/2},encodingLength=function(e){return varint.encodingLength(e>=0?2*e:-2*e-1)},signedVarint={encode:encode$3,decode:decode$3,encodingLength:encodingLength},encodings=createCommonjsModule(function(e,t){var r=safeBuffer.Buffer,n=function(e,t,r,n){return t.bytes=r.bytes=0,{type:e,encode:t,decode:r,encodingLength:n}};t.make=n,t.bytes=function(e){var t=function(e){return r.isBuffer(e)?e.length:r.byteLength(e)},i=function(e,n,o){var s=o,a=t(e);return varint.encode(a,n,o),o+=varint.encode.bytes,r.isBuffer(e)?e.copy(n,o):n.write(e,o,a),o+=a,i.bytes=o-s,n},o=function(e,t){var r=t,n=varint.decode(e,t);t+=varint.decode.bytes;var i=e.slice(t,t+n);return t+=i.length,o.bytes=t-r,i};return n(2,i,o,function(e){var r=t(e);return varint.encodingLength(r)+r})}(),t.string=function(){var e=function(t,n,i){var o=i,s=r.byteLength(t);return varint.encode(s,n,i,"utf-8"),i+=varint.encode.bytes,n.write(t,i,s),i+=s,e.bytes=i-o,n},t=function(e,r){var n=r,i=varint.decode(e,r);r+=varint.decode.bytes;var o=e.toString("utf-8",r,r+i);return r+=i,t.bytes=r-n,o};return n(2,e,t,function(e){var t=r.byteLength(e);return varint.encodingLength(t)+t})}(),t.bool=function(){var e=function(t,r,n){return r[n]=t?1:0,e.bytes=1,r},t=function(e,r){var n=e[r]>0;return t.bytes=1,n};return n(0,e,t,function(e){return 1})}(),t.int32=function(){var e=function(t,r){var n=varint.decode(t,r);return e.bytes=varint.decode.bytes,n>2147483647?n-4294967296:n};return n(0,varint.encode,e,function(e){return varint.encodingLength(e<0?e+4294967296:e)})}(),t.int64=function(){var e=function(t,n){var i=varint.decode(t,n);if(i>=Math.pow(2,63)){for(var o=9;255===t[n+o-1];)o--;o=o||9;var s=r.allocUnsafe(o);t.copy(s,0,n,n+o),s[o-1]=127&s[o-1],i=-1*varint.decode(s,0),e.bytes=10}else e.bytes=varint.decode.bytes;return i},t=function(e,r,n){if(e<0){var i=n+9;for(varint.encode(-1*e,r,n),r[n+=varint.encode.bytes-1]=128|r[n];n<i-1;)r[++n]=255;r[i]=1,t.bytes=10}else varint.encode(e,r,n),t.bytes=varint.encode.bytes;return r};return n(0,t,e,function(e){return e<0?10:varint.encodingLength(e)})}(),t.sint32=t.sint64=n(0,signedVarint.encode,signedVarint.decode,signedVarint.encodingLength),t.uint32=t.uint64=t.enum=t.varint=n(0,varint.encode,varint.decode,varint.encodingLength),t.fixed64=t.sfixed64=function(){var e=function(t,r,n){return t.copy(r,n),e.bytes=8,r},t=function(e,r){var n=e.slice(r,r+8);return t.bytes=8,n};return n(1,e,t,function(e){return 8})}(),t.double=function(){var e=function(t,r,n){return r.writeDoubleLE(t,n),e.bytes=8,r},t=function(e,r){var n=e.readDoubleLE(r);return t.bytes=8,n};return n(1,e,t,function(e){return 8})}(),t.fixed32=function(){var e=function(t,r,n){return r.writeUInt32LE(t,n),e.bytes=4,r},t=function(e,r){var n=e.readUInt32LE(r);return t.bytes=4,n};return n(5,e,t,function(e){return 4})}(),t.sfixed32=function(){var e=function(t,r,n){return r.writeInt32LE(t,n),e.bytes=4,r},t=function(e,r){var n=e.readInt32LE(r);return t.bytes=4,n};return n(5,e,t,function(e){return 4})}(),t.float=function(){var e=function(t,r,n){return r.writeFloatLE(t,n),e.bytes=4,r},t=function(e,r){var n=e.readFloatLE(r);return t.bytes=4,n};return n(5,e,t,function(e){return 4})}()}),encodings_1=encodings.make,encodings_2=encodings.bytes,encodings_3=encodings.string,encodings_4=encodings.bool,encodings_5=encodings.int32,encodings_6=encodings.int64,encodings_7=encodings.sint32,encodings_8=encodings.sint64,encodings_9=encodings.uint32,encodings_10=encodings.uint64,encodings_11=encodings.varint,encodings_12=encodings.fixed64,encodings_13=encodings.sfixed64,encodings_14=encodings.fixed32,encodings_15=encodings.sfixed32,defined=function(e){return null!=e&&("number"!=typeof e||!isNaN(e))},utils$m={defined:defined},defined$1=utils$m.defined;function compileDecode(e,t,r){for(var n=[],i={},o=[],s=[],a=0;a<r.length;a++){var c=e.fields[a];i[c.tag]=a;var u=c.options&&c.options.default,f=t(c.type,e.id,!1);s[a]=[u,f&&f.values],e.fields[a].packed=c.repeated&&c.options&&c.options.packed&&"false"!==c.options.packed,c.required&&n.push(c.name),c.oneof&&o.push(c.name)}function l(e,t,r,n,i,s){var a=t.name;if(t.oneof)for(var c=Object.keys(r),u=0;u<c.length;u++)o.indexOf(c[u])>-1&&delete r[c[u]];if(e.message){var f=varint.decode(n,i);i+=varint.decode.bytes;var l=e.decode(n,i,i+f);t.map?(r[a]=r[a]||{},r[a][l.key]=l.value):t.repeated?(r[a]=r[a]||[],r[a].push(l)):r[a]=l}else t.repeated?(r[a]=r[a]||[],r[a].push(e.decode(n,i))):r[a]=e.decode(n,i);return i+=e.decode.bytes}return function t(a,c,u){if(null==c&&(c=0),null==u&&(u=a.length),!(u<=a.length&&c<=a.length))throw new Error("Decoded message is not valid");for(var f,d=c,h={};;){if(u<=c){var p,b,m="",g=0;for(g=0;g<n.length;g++)if(m=n[g],!defined$1(h[m]))throw new Error("Decoded message is not valid, missing required field: "+m);for(g=0;g<r.length;g++)if(f=e.fields[g],b=s[g][0],p=s[g][1],m=f.name,!defined$1(h[m])){var y=!1;if(f.oneof)for(var v=Object.keys(h),_=0;_<v.length;_++)if(o.indexOf(v[_])>-1){y=!0;break}y||(p?f.repeated?h[m]=[]:(b=b&&p[b]?p[b].value:p[Object.keys(p)[0]].value,h[m]=parseInt(b||0,10)):h[m]=defaultValue(f,b))}return t.bytes=c-d,h}var $=varint.decode(a,c);c+=varint.decode.bytes;var S=i[$>>3];if(null!=S){var E=r[S];if((f=e.fields[S]).packed){var w=varint.decode(a,c);for(w+=c+=varint.decode.bytes;c<w;)c=l(E,f,h,a,c)}else c=l(E,f,h,a,c)}else c=skip(7&$,a,c)}}}var skip=function(e,t,r){switch(e){case 0:return varint.decode(t,r),r+varint.decode.bytes;case 1:return r+8;case 2:var n=varint.decode(t,r);return r+varint.decode.bytes+n;case 3:case 4:throw new Error("Groups are not supported");case 5:return r+4;default:throw new Error("Unknown wire type: "+e)}},defaultValue=function(e,t){if(e.map)return{};if(e.repeated)return[];switch(e.type){case"string":return null!=t?t:"";case"bool":return"true"===t;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return parseInt(t||0,10);default:return null}},decode$4=compileDecode,defined$2=utils$m.defined;function compileEncode(e,t,r,n,i){for(var o=Object.keys(n),s=r.length,a={},c=0;c<s;c++){a[c]={p:varint.encode(e.fields[c].tag<<3|2),h:varint.encode(e.fields[c].tag<<3|r[c].type)};var u=e.fields[c];e.fields[c].packed=u.repeated&&u.options&&u.options.packed&&"false"!==u.options.packed}function f(e,t,r,n,i,o){var s=0;if(!i)for(s=0;s<r.length;s++)e[t++]=r[s];return n.message&&(varint.encode(n.encodingLength(o),e,t),t+=varint.encode.bytes),n.encode(o,e,t),t+n.encode.bytes}return function t(c,u,l){null==l&&(l=0),null==u&&(u=Buffer.allocUnsafe(i(c)));var d=l,h=Object.keys(c),p=0,b=!1;for(p=0;p<o.length;p++){var m=o[p],g=n[p];if(h.indexOf(g)>-1){if(b)throw new Error("only one of the properties defined in oneof "+m+" can be set");b=!0}}for(p=0;p<s;p++){var y=r[p],v=e.fields[p],_=c[v.name],$=0;if(defined$2(_)){var S,E=a[p].p,w=a[p].h,C=v.packed;if(v.map){var A=Object.keys(_);for($=0;$<A.length;$++)A[$]={key:A[$],value:_[A[$]]};_=A}if(C){var k=0;for($=0;$<_.length;$++)defined$2(_[$])&&(k+=y.encodingLength(_[$]));if(k){for($=0;$<w.length;$++)u[l++]=E[$];varint.encode(k,u,l),l+=varint.encode.bytes}}if(v.repeated)for($=0;$<_.length;$++)S=_[$],defined$2(S)&&(l=f(u,l,w,y,C,S));else l=f(u,l,w,y,C,_)}else if(v.required)throw new Error(v.name+" is required")}return t.bytes=l-d,u}}var encode$4=compileEncode,defined$3=utils$m.defined;function compileEncodingLength(e,t,r){for(var n=Object.keys(r),i=t.length,o=new Array(i),s=0;s<e.fields.length;s++){o[s]=varint.encodingLength(e.fields[s].tag<<3|t[s].type);var a=e.fields[s];e.fields[s].packed=a.repeated&&a.options&&a.options.packed&&"false"!==a.options.packed}return function(s){var a=0,c=0,u=0;for(c=0;c<n.length;c++){var f=n[c],l=r[f],d=!1;for(u=0;u<l.length;u++)if(defined$3(s[l[u]])){if(d)throw new Error("only one of the properties defined in oneof "+f+" can be set");d=!0}}for(c=0;c<i;c++){var h,p=t[c],b=e.fields[c],m=s[b.name],g=o[c];if(defined$3(m)){if(b.map){var y=Object.keys(m);for(u=0;u<y.length;u++)y[u]={key:y[u],value:m[y[u]]};m=y}if(b.packed){var v=0;for(u=0;u<m.length;u++)defined$3(m[u])&&(v+=h=p.encodingLength(m[u]),p.message&&(v+=varint.encodingLength(h)));v&&(a+=g+v+varint.encodingLength(v))}else if(b.repeated)for(u=0;u<m.length;u++)defined$3(m[u])&&(a+=g+(h=p.encodingLength(m[u]))+(p.message?varint.encodingLength(h):0));else a+=g+(h=p.encodingLength(m))+(p.message?varint.encodingLength(h):0)}else if(b.required)throw new Error(b.name+" is required")}return a}}var encodingLength$1=compileEncodingLength,flatten=function(e){if(!e)return null;var t={};return Object.keys(e).forEach(function(r){t[r]=e[r].value}),t},compile=function(e,t){var r={},n={},i={},o=function(e,t){e.enums&&e.enums.forEach(function(e){e.id=t+(t?".":"")+e.name,n[e.id]=e,o(e,e.id)}),e.messages&&e.messages.forEach(function(n){n.id=t+(t?".":"")+n.name,r[n.id]=n,n.fields.forEach(function(n){if(n.map){var i="Map_"+n.map.from+"_"+n.map.to,o={name:i,enums:[],messages:[],fields:[{name:"key",type:n.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:n.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:t+(t?".":"")+i};r[o.id]||(r[o.id]=o,e.messages.push(o)),n.type=i,n.repeated=!0}}),o(n,n.id)})};o(e,"");var s=function(e,o,a){if(t&&t[e])return t[e];if(encodings[e])return encodings[e];var c=(o?o+"."+e:e).split(".").map(function(t,r,n){return n.slice(0,r).concat(e).join(".")}).reverse().reduce(function(e,t){return e||r[t]||n[t]},null);if(!1===a)return c;if(!c)throw new Error("Could not resolve "+e);return c.values?function(e){var t=Object.keys(e.values||[]).map(function(t){return parseInt(e.values[t].value,10)});return encodings.make(0,function e(r,n,i){if(!t.length||-1===t.indexOf(r))throw new Error("Invalid enum value: "+r);return varint.encode(r,n,i),e.bytes=varint.encode.bytes,n},function e(r,n){var i=varint.decode(r,n);if(!t.length||-1===t.indexOf(i))throw new Error("Invalid enum value: "+i);return e.bytes=varint.decode.bytes,i},varint.encodingLength)}(c):i[c.id]||function(e,t){e.messages.forEach(function(r){t[r.name]=s(r.name,e.id)}),e.enums.forEach(function(e){t[e.name]=flatten(e.values)}),t.type=2,t.message=!0,t.name=e.name;var r={};e.fields.forEach(function(e){e.oneof&&(r[e.oneof]||(r[e.oneof]=[]),r[e.oneof].push(e.name))});var n=e.fields.map(function(t){return s(t.type,e.id)}),i=encodingLength$1(e,n,r),o=encode$4(e,s,n,r,i),a=decode$4(e,s,n);return o.bytes=a.bytes=0,t.buffer=!0,t.encode=o,t.decode=a,t.encodingLength=i,t}(c,i[c.id]={})};return(e.enums||[]).concat((e.messages||[]).map(function(e){return s(e.id)}))},flatten$1=function(e){if(!e)return null;var t={};return Object.keys(e).forEach(function(r){t[r]=e[r].value}),t},src$i=function(e,t){if(t||(t={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var r="object"!=typeof e||Buffer.isBuffer(e)?protocolBuffersSchema.parse(e):e,n=function(){var e=this;compile(r,t.encodings||{}).forEach(function(t){e[t.name]=flatten$1(t.values)||t})};return n.prototype.toString=function(){return protocolBuffersSchema.stringify(r)},n.prototype.toJSON=function(){return r},new n},dag_proto="// An IPFS MerkleDAG Link\nmessage PBLink {\n\n  // multihash of the target object\n  optional bytes Hash = 1;\n\n  // utf string name. should be unique per object\n  optional string Name = 2;\n\n  // cumulative size of target object\n  optional uint64 Tsize = 3;\n}\n\n// An IPFS MerkleDAG Node\nmessage PBNode {\n\n  // refs to other objects\n  repeated PBLink Links = 2;\n\n  // opaque user data\n  optional bytes Data = 1;\n}",util$3=createCommonjsModule(function(e,t){e.exports.createDagLinkFromB58EncodedHash=function(e){return new dagLink(e.Name||e.name||"",e.Tsize||e.Size||e.size||0,e.Hash||e.hash||e.multihash||e.cid)}}),util_1$1=util$3.createDagLinkFromB58EncodedHash,dagLink=createCommonjsModule(function(e,t){(e.exports=classIs(class{constructor(e,t,r){assert$t(r,"A link requires a cid to point to"),this._name=e||"",this._nameBuf=null,this._size=t,this._cid=new src$h(r),visibility.hidePrivateFields(this),visibility.addEnumerableGetters(this,["Hash","Name","Tsize"])}toString(){return`DAGLink <${this._cid.toBaseEncodedString()} - name: "${this.Name}", size: ${this.Tsize}>`}toJSON(){return this._json||(this._json=Object.freeze({name:this.Name,size:this.Tsize,cid:this.Hash.toBaseEncodedString()})),Object.assign({},this._json)}get Name(){return this._name}get nameAsBuffer(){return null!==this._nameBuf?this._nameBuf:(this._nameBuf=Buffer.from(this._name),this._nameBuf)}set Name(e){throw new Error("Can't set property: 'name' is immutable")}get Tsize(){return this._size}set Tsize(e){throw new Error("Can't set property: 'size' is immutable")}get Hash(){return this._cid}set Hash(e){throw new Error("Can't set property: 'cid' is immutable")}},{className:"DAGLink",symbolName:"@ipld/js-ipld-dag-pb/daglink"})).util=util$3}),dagLink_1=dagLink.util,sha3$2=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),sha$3=e=>async t=>{switch(e){case"sha1":return crypto$l.createHash("sha1").update(t).digest();case"sha2-256":return crypto$l.createHash("sha256").update(t).digest();case"sha2-512":return crypto$l.createHash("sha512").update(t).digest();case"dbl-sha2-256":{const e=crypto$l.createHash("sha256").update(t).digest();return crypto$l.createHash("sha256").update(e).digest()}default:throw new Error(`${e} is not a supported algorithm`)}};const{Buffer:Buffer$c}=buffer$1,fromNumberTo32BitBuf$2=e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return Buffer$c.from(t)};var utils$n={fromNumberTo32BitBuf:fromNumberTo32BitBuf$2};const{Buffer:Buffer$d}=buffer$1,minB$1=45569,minS$1=45633,blake2b$2={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$2={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$1=(e,t)=>async r=>{const n=t.init(e,null);return t.update(n,r),Buffer$d.from(t.digest(n))};var blake_1$1=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$1(t+1,blake2b$2);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$1(t+1,blake2s$2)};const{Buffer:Buffer$e}=buffer$1,{fromNumberTo32BitBuf:fromNumberTo32BitBuf$3}=utils$n,hash$2=e=>async t=>{switch(e){case"sha3-224":return Buffer$e.from(sha3$2.sha3_224.arrayBuffer(t));case"sha3-256":return Buffer$e.from(sha3$2.sha3_256.arrayBuffer(t));case"sha3-384":return Buffer$e.from(sha3$2.sha3_384.arrayBuffer(t));case"sha3-512":return Buffer$e.from(sha3$2.sha3_512.arrayBuffer(t));case"shake-128":return Buffer$e.from(sha3$2.shake128.create(128).update(t).arrayBuffer());case"shake-256":return Buffer$e.from(sha3$2.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return Buffer$e.from(sha3$2.keccak224.arrayBuffer(t));case"keccak-256":return Buffer$e.from(sha3$2.keccak256.arrayBuffer(t));case"keccak-384":return Buffer$e.from(sha3$2.keccak384.arrayBuffer(t));case"keccak-512":return Buffer$e.from(sha3$2.keccak512.arrayBuffer(t));case"murmur3-128":return Buffer$e.from(murmurhash3jsRevisited.x64.hash128(t),"hex");case"murmur3-32":return fromNumberTo32BitBuf$3(murmurhash3jsRevisited.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};var crypto$3={sha1:sha$3("sha1"),sha2256:sha$3("sha2-256"),sha2512:sha$3("sha2-512"),dblSha2256:sha$3("dbl-sha2-256"),sha3224:hash$2("sha3-224"),sha3256:hash$2("sha3-256"),sha3384:hash$2("sha3-384"),sha3512:hash$2("sha3-512"),shake128:hash$2("shake-128"),shake256:hash$2("shake-256"),keccak224:hash$2("keccak-224"),keccak256:hash$2("keccak-256"),keccak384:hash$2("keccak-384"),keccak512:hash$2("keccak-512"),murmur3128:hash$2("murmur3-128"),murmur332:hash$2("murmur3-32"),addBlake:blake_1$1};const{Buffer:Buffer$f}=buffer$1;async function Multihashing$1(e,t,r){const n=await Multihashing$1.digest(e,t,r);return src.encode(n,t,r)}Multihashing$1.Buffer=Buffer$f,Multihashing$1.multihash=src,Multihashing$1.digest=async(e,t,r)=>{const n=Multihashing$1.createHash(t),i=await n(e);return r?i.slice(0,r):i},Multihashing$1.createHash=function(e){if(!e)throw errCode("hash algorithm must be specified","ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=src.coerceCode(e),!Multihashing$1.functions[e])throw errCode(`multihash function '${e}' not yet supported`,"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing$1.functions[e]},Multihashing$1.functions={17:crypto$3.sha1,18:crypto$3.sha2256,19:crypto$3.sha2512,20:crypto$3.sha3512,21:crypto$3.sha3384,22:crypto$3.sha3256,23:crypto$3.sha3224,24:crypto$3.shake128,25:crypto$3.shake256,26:crypto$3.keccak224,27:crypto$3.keccak256,28:crypto$3.keccak384,29:crypto$3.keccak512,34:crypto$3.murmur3128,35:crypto$3.murmur332,86:crypto$3.dblSha2256},crypto$3.addBlake(Multihashing$1.functions),Multihashing$1.validate=async(e,t)=>{const r=await Multihashing$1(e,src.decode(t).name);return 0===Buffer$f.compare(t,r)};var src$j=Multihashing$1,util$4=createCommonjsModule(function(e,t){const r=src$i(dag_proto);(t=e.exports).codec=src$4.DAG_PB,t.defaultHashAlg=src$4.SHA2_256;t.serialize=e=>{let t=e.Data,n=e.Links||[];return!dagNode.isDAGNode(e)&&n&&(n=n.map(e=>dagLink.isDAGLink(e)?e:dagLink.util.createDagLinkFromB58EncodedHash(e))),r.PBNode.encode(function(e){const t={};return e.Data&&e.Data.length>0?t.Data=e.Data:t.Data=null,e.Links&&e.Links.length>0?t.Links=e.Links.map(e=>({Hash:e.Hash.buffer,Name:e.Name,Tsize:e.Tsize})):t.Links=null,t}({Data:t,Links:n}))},t.deserialize=e=>{const t=r.PBNode.decode(e),n=t.Links.map(e=>new dagLink(e.Name,e.Tsize,e.Hash)),i=null==t.Data?Buffer.alloc(0):t.Data;return new dagNode(i,n,e.length)},t.cid=async(e,r)=>{const n={cidVersion:1,hashAlg:t.defaultHashAlg},i=Object.assign(n,r),o=await src$j(e,i.hashAlg),s=src$4.print[t.codec];return new src$h(i.cidVersion,s,o)}}),util_1$2=util$4.codec,util_2$1=util$4.defaultHashAlg,util_3$1=util$4.serialize,util_4$1=util$4.deserialize,util_5$1=util$4.cid,util$5=createCommonjsModule(function(e,t){const{cid:r,serialize:n}=util$4;(t=e.exports).cloneData=function(e){let t;return e.Data&&e.Data.length>0?(t=Buffer.alloc(e.Data.length),e.Data.copy(t)):t=Buffer.alloc(0),t},t.cloneLinks=function(e){return e.Links.slice()},t.linkSort=function(e,t){return Buffer.compare(e.nameAsBuffer,t.nameAsBuffer)},t.toDAGLink=async(e,t={})=>{const i=n(e),o=await r(i);return new dagLink(t.name||"",i.length,o)}}),util_1$3=util$5.cloneData,util_2$2=util$5.cloneLinks,util_3$2=util$5.linkSort,util_4$2=util$5.toDAGLink;const{serialize:serialize}=util$4,linkSort=util$5.linkSort,create=(e,t=[])=>{if("string"==typeof e&&(e=Buffer.from(e)),!Buffer.isBuffer(e))throw new Error("Passed 'data' is not a buffer or a string!");t=t.map(e=>dagLink.isDAGLink(e)?e:dagLink.util.createDagLinkFromB58EncodedHash(e)),t=stable(t,linkSort);const r=serialize({Data:e,Links:t});return new dagNode(e,t,r.length)};var create_1=create;const cloneLinks=util$5.cloneLinks,cloneData=util$5.cloneData;function clone$2(e){const t=cloneData(e),r=cloneLinks(e);return create_1(t,r)}var clone_1=clone$2;const cloneLinks$1=util$5.cloneLinks,cloneData$1=util$5.cloneData,toDAGLink=util$5.toDAGLink,asDAGLink=async e=>dagLink.isDAGLink(e)?e:dagNode.isDAGNode(e)?toDAGLink(e,{}):new dagLink(e.Name||e.name,e.Tsize||e.size,e.Hash||e.multihash||e.hash||e.cid),addLink=async(e,t)=>{const r=cloneLinks$1(e),n=cloneData$1(e),i=await asDAGLink(t);return r.push(i),create_1(n,r)};var addLink_1=addLink;const cloneLinks$2=util$5.cloneLinks,cloneData$2=util$5.cloneData,rmLink=(e,t)=>{const r=cloneData$2(e);let n=cloneLinks$2(e);if("string"==typeof t)n=n.filter(e=>e.Name!==t);else{if(!Buffer.isBuffer(t)&&!src$h.isCID(t))throw new Error("second arg needs to be a name or CID");n=n.filter(e=>!e.Hash.equals(t))}return create_1(r,n)};var rmLink_1=rmLink,dagNode=createCommonjsModule(function(e,t){(t=e.exports=classIs(class{constructor(e,t,r){0!==r&&assert$t(r,"A DAGNode requires it's serialized size"),this._data=e||Buffer.alloc(0),this._links=t,this._serializedSize=r,visibility.hidePrivateFields(this),visibility.addEnumerableGetters(this,["Data","Links"]),t.forEach((e,t)=>{addNamedLink_1(this,e.Name,t)})}toJSON(){return this._json||(this._json=Object.freeze({data:this.Data,links:this._links.map(e=>e.toJSON()),size:this.size})),Object.assign({},this._json)}toString(){return`DAGNode <data: "${this.Data.toString("base64")}", links: ${this.Links.length}, size: ${this.size}>`}get size(){return void 0===this._size&&(this._size=this._links.reduce((e,t)=>e+t.Tsize,this._serializedSize)),this._size}set size(e){throw new Error("Can't set property: 'size' is immutable")}get Data(){return this._data}set Data(e){throw new Error("Can't set property: 'Data' is immutable")}get Links(){return this._links.map(e=>({Name:e.Name,Tsize:e.Tsize,Hash:e.Hash}))}set Links(e){throw new Error("Can't set property: 'Links' is immutable")}},{className:"DAGNode",symbolName:"@ipld/js-ipld-dag-pb/dagnode"})).create=create_1,t.clone=clone_1,t.addLink=addLink_1,t.rmLink=rmLink_1}),dagNode_1=dagNode.create,dagNode_2=dagNode.clone,dagNode_3=dagNode.addLink,dagNode_4=dagNode.rmLink,resolve$1=(e,t)=>{let r=util$4.deserialize(e);const n=t.split("/").filter(Boolean);for(;n.length;){const e=n.shift();if(void 0===r[e])throw new Error(`Object has no property '${e}'`);if(r=r[e],src$h.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}};const traverse$1=function*(e,t){if(!Buffer.isBuffer(e)&&!src$h.isCID(e)&&"string"!=typeof e&&null!==e)for(const r of Object.keys(e)){const n=void 0===t?r:t+"/"+r;yield n,yield*traverse$1(e[r],n)}};var tree$1=function*(e){const t=util$4.deserialize(e);yield*traverse$1(t)},resolver$1={resolve:resolve$1,tree:tree$1},src$k=createCommonjsModule(function(e,t){t.DAGNode=dagNode,t.DAGLink=dagLink,t.resolver=resolver$1,t.util=util$4,t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg}),src_1$5=src$k.DAGNode,src_2$5=src$k.DAGLink,src_3$5=src$k.resolver,src_4$5=src$k.util,src_5$4=src$k.codec,src_6$3=src$k.defaultHashAlg,CIDUtil$5={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$5=CIDUtil$5;class CID$4{constructor(e,t,r,n){if(_CID$4.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$4.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$4.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$4.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$4(0,this.codec,this.multihash)}toV1(){return new _CID$4(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$5.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$4=classIs(CID$4,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$4.codecs=baseTable;var src$l=_CID$4,sha3$3=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),sha$4=e=>async t=>{switch(e){case"sha1":return crypto$l.createHash("sha1").update(t).digest();case"sha2-256":return crypto$l.createHash("sha256").update(t).digest();case"sha2-512":return crypto$l.createHash("sha512").update(t).digest();case"dbl-sha2-256":{const e=crypto$l.createHash("sha256").update(t).digest();return crypto$l.createHash("sha256").update(e).digest()}default:throw new Error(`${e} is not a supported algorithm`)}};const{Buffer:Buffer$g}=buffer$1,fromNumberTo32BitBuf$4=e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return Buffer$g.from(t)};var utils$o={fromNumberTo32BitBuf:fromNumberTo32BitBuf$4};const{Buffer:Buffer$h}=buffer$1,minB$2=45569,minS$2=45633,blake2b$3={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$3={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$2=(e,t)=>async r=>{const n=t.init(e,null);return t.update(n,r),Buffer$h.from(t.digest(n))};var blake_1$2=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$2(t+1,blake2b$3);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$2(t+1,blake2s$3)};const{Buffer:Buffer$i}=buffer$1,{fromNumberTo32BitBuf:fromNumberTo32BitBuf$5}=utils$o,hash$3=e=>async t=>{switch(e){case"sha3-224":return Buffer$i.from(sha3$3.sha3_224.arrayBuffer(t));case"sha3-256":return Buffer$i.from(sha3$3.sha3_256.arrayBuffer(t));case"sha3-384":return Buffer$i.from(sha3$3.sha3_384.arrayBuffer(t));case"sha3-512":return Buffer$i.from(sha3$3.sha3_512.arrayBuffer(t));case"shake-128":return Buffer$i.from(sha3$3.shake128.create(128).update(t).arrayBuffer());case"shake-256":return Buffer$i.from(sha3$3.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return Buffer$i.from(sha3$3.keccak224.arrayBuffer(t));case"keccak-256":return Buffer$i.from(sha3$3.keccak256.arrayBuffer(t));case"keccak-384":return Buffer$i.from(sha3$3.keccak384.arrayBuffer(t));case"keccak-512":return Buffer$i.from(sha3$3.keccak512.arrayBuffer(t));case"murmur3-128":return Buffer$i.from(murmurhash3jsRevisited.x64.hash128(t),"hex");case"murmur3-32":return fromNumberTo32BitBuf$5(murmurhash3jsRevisited.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};var crypto$4={sha1:sha$4("sha1"),sha2256:sha$4("sha2-256"),sha2512:sha$4("sha2-512"),dblSha2256:sha$4("dbl-sha2-256"),sha3224:hash$3("sha3-224"),sha3256:hash$3("sha3-256"),sha3384:hash$3("sha3-384"),sha3512:hash$3("sha3-512"),shake128:hash$3("shake-128"),shake256:hash$3("shake-256"),keccak224:hash$3("keccak-224"),keccak256:hash$3("keccak-256"),keccak384:hash$3("keccak-384"),keccak512:hash$3("keccak-512"),murmur3128:hash$3("murmur3-128"),murmur332:hash$3("murmur3-32"),addBlake:blake_1$2};const{Buffer:Buffer$j}=buffer$1;async function Multihashing$2(e,t,r){const n=await Multihashing$2.digest(e,t,r);return src.encode(n,t,r)}Multihashing$2.Buffer=Buffer$j,Multihashing$2.multihash=src,Multihashing$2.digest=async(e,t,r)=>{const n=Multihashing$2.createHash(t),i=await n(e);return r?i.slice(0,r):i},Multihashing$2.createHash=function(e){if(!e)throw errCode("hash algorithm must be specified","ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=src.coerceCode(e),!Multihashing$2.functions[e])throw errCode(`multihash function '${e}' not yet supported`,"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing$2.functions[e]},Multihashing$2.functions={17:crypto$4.sha1,18:crypto$4.sha2256,19:crypto$4.sha2512,20:crypto$4.sha3512,21:crypto$4.sha3384,22:crypto$4.sha3256,23:crypto$4.sha3224,24:crypto$4.shake128,25:crypto$4.shake256,26:crypto$4.keccak224,27:crypto$4.keccak256,28:crypto$4.keccak384,29:crypto$4.keccak512,34:crypto$4.murmur3128,35:crypto$4.murmur332,86:crypto$4.dblSha2256},crypto$4.addBlake(Multihashing$2.functions),Multihashing$2.validate=async(e,t)=>{const r=await Multihashing$2(e,src.decode(t).name);return 0===Buffer$j.compare(t,r)};var src$m=Multihashing$2,src$n=createCommonjsModule(function(e){e.exports={codec:src$4.RAW,defaultHashAlg:src$4.SHA2_256,resolver:{resolve:(e,t)=>({value:e,remainderPath:""}),tree:e=>({done:!0})},util:{deserialize:e=>e,serialize:e=>e,cid:async(t,r)=>{const n={cidVersion:1,hashAlg:e.exports.defaultHashAlg},i=Object.assign(n,r),o=await src$m(t,i.hashAlg),s=src$4.print[e.exports.codec];return new src$l(i.cidVersion,s,o)}}}}),src_1$6=src$n.codec,src_2$6=src$n.defaultHashAlg,src_3$6=src$n.resolver,src_4$6=src$n.util,promisifyEs6=createCommonjsModule(function(e,t){var r=function(e,t){return function(){var r=Array.prototype.slice.call(arguments),n=r.length-1,i=r&&r.length>0?r[n]:null;return("function"==typeof i?i:null)?e.apply(t,r):new Promise(function(n,i){r.push(function(e,t){if(e)return i(e);n(t)}),e.apply(t,r)})}};e.exports=function(e,t){t=t||{};var n=Object.prototype.toString.call(e);if("[object Object]"===n||"[object Array]"===n){var i=t.replace?e:{};for(var o in e)e.hasOwnProperty(o)&&(i[o]=r(e[o]));return i}return r(e,t.context||e)}}),dist$2=createCommonjsModule(function(e,t){!function(e){function t(e){return"object"==typeof e&&null!==e}function r(e){return void 0!==e}e.isArrayLike=function(e){return t(e)&&"number"==typeof e.length},e.isClass=function(e){return"function"==typeof e&&/^class /.test(Function.prototype.toString.call(e))},e.isDefined=r,e.isIterable=function(e){return!(null===e||!r(e)||"function"!=typeof e[Symbol.iterator]&&"function"!=typeof e[Symbol.asyncIterator])},e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},e.isObject=t,e.isPlainObject=function(e){return null!==e&&"object"==typeof e&&e.constructor===Object},e.isPrimitive=function(e){if(null===e)return!0;switch(typeof e){case"string":case"number":case"symbol":case"undefined":case"boolean":return!0;default:return!1}},e.isPromise=function(e){if(e){const t=r(Promise)&&e instanceof Promise,n=e.then&&"function"==typeof e.then;return!(!t&&!n)}return!1},Object.defineProperty(e,"__esModule",{value:!0})}(t)});unwrapExports(dist$2);var util$6=createCommonjsModule(function(e,t){t.first=async e=>{for await(const t of e)return t},t.last=async e=>{let t;for await(t of e);return t},t.all=async e=>{const t=[];for await(const r of e)t.push(r);return t},t.extendIterator=e=>(e.first=()=>t.first(e),e.last=()=>t.last(e),e.all=()=>t.all(e),e)}),util_1$4=util$6.first,util_2$3=util$6.last,util_3$3=util$6.all,util_4$3=util$6.extendIterator;const{extendIterator:extendIterator}=util$6;class IPLDResolver{constructor(e){const t=mergeOptions(IPLDResolver.defaultOptions,e);if(!t.blockService)throw new Error("Missing blockservice");this.bs=t.blockService,this.resolvers={},"function"!=typeof t.loadFormat?this.loadFormat=async e=>{const t=src$4.print[e];throw new Error(`No resolver found for codec "${t}"`)}:this.loadFormat=t.loadFormat;for(const e of t.formats)this.addFormat(e)}addFormat(e){const t=e.codec;if(this.resolvers[e.format]){const e=src$4.print[t];throw new Error(`Resolver already exists for codec "${e}"`)}return this.resolvers[t]=e,this}removeFormat(e){return this.resolvers[e]&&delete this.resolvers[e],this}resolve(e,t){if(!src$c.isCID(e))throw new Error("`cid` argument must be a CID");if("string"!=typeof t)throw new Error("`path` argument must be a string");const r=async function*(){for(;null!==e;){const r=await this._getFormat(e.codec),n=await promisifyEs6(this.bs.get.bind(this.bs))(e),i=r.resolver.resolve(n.data,t);t=i.remainderPath;let o=i.value;if(1===Object.keys(o).length&&"/"in o)try{o=new src$c(o["/"])}catch(e){o=null}e=src$c.isCID(o)?o:null,yield{remainderPath:t,value:o}}}.bind(this);return extendIterator(r())}async get(e){const t=await promisifyEs6(this.bs.get.bind(this.bs))(e);return(await this._getFormat(t.cid.codec)).util.deserialize(t.data)}getMany(e){if(!dist$2.isIterable(e)||"string"==typeof e||Buffer.isBuffer(e))throw new Error("`cids` must be an iterable of CIDs");const t=async function*(){for await(const t of e)yield this.get(t)}.bind(this);return extendIterator(t())}async put(e,t,r){if(void 0===t)throw new Error("`put` requires a format");if("number"!=typeof t)throw new Error("`format` parameter must be number (multicodec)");const n=await this._getFormat(t),i={hashAlg:n.defaultHashAlg,cidVersion:1,onlyHash:!1},o=mergeOptions(i,r),s={cidVersion:o.cidVersion,hashAlg:o.hashAlg,onlyHash:o.onlyHash},a=n.util.serialize(e),c=await n.util.cid(a,s);if(!o.onlyHash){const e=new src$b(a,c);await promisifyEs6(this.bs.put.bind(this.bs))(e)}return c}putMany(e,t,r){if(!dist$2.isIterable(e)||"string"==typeof e||Buffer.isBuffer(e))throw new Error("`nodes` must be an iterable");if(void 0===t)throw new Error("`put` requires a format");if("number"!=typeof t)throw new Error("`format` parameter must be number (multicodec)");let n,i;const o=async function*(){for await(const o of e){if(void 0===n){const e={hashAlg:(i=await this._getFormat(t)).defaultHashAlg,cidVersion:1,onlyHash:!1};n=mergeOptions(e,r)}yield this.put(o,t,n)}}.bind(this);return extendIterator(o())}async remove(e){return promisifyEs6(this.bs.delete.bind(this.bs))(e)}removeMany(e){if(!dist$2.isIterable(e)||"string"==typeof e||Buffer.isBuffer(e))throw new Error("`cids` must be an iterable of CIDs");const t=async function*(){for await(const t of e)yield this.remove(t)}.bind(this);return extendIterator(t())}tree(e,t,r){"object"==typeof t&&(r=t,t=void 0),t=t||"";const n=mergeOptions({recursive:!1},r),i=async(e,t)=>{const r=(await this._getFormat(e.cid.codec)).resolver.resolve(e.data,t);return src$c.isCID(r.value)?r.value:null},o=async function*(){const r=[];let o;const s=[{cid:e,basePath:""}];let a;for(;r.length>0||s.length>0;){if(0===r.length&&s.length>0){({cid:e,basePath:a}=s.shift());const t=await this._getFormat(e.codec);o=await promisifyEs6(this.bs.get.bind(this.bs))(e);const n=t.resolver.tree(o.data);r.push(...n)}const c=r.shift();let u=a+c;n.recursive&&null!==(e=await i(o,c))&&s.push({cid:e,basePath:u+"/"}),u.startsWith(t)&&u.length>t.length&&(t.length>0&&(u=u.slice(t.length+1)),yield u)}}.bind(this);return extendIterator(o())}async _getFormat(e){if("string"==typeof e){const t=e.toUpperCase().replace(/-/g,"_");e=src$4[t]}if(this.resolvers[e])return this.resolvers[e];const t=await this.loadFormat(e);return this.addFormat(t),t}}IPLDResolver.defaultOptions={formats:[src$g,src$k,src$n]};var src$o=IPLDResolver,keys_proto="enum KeyType {\n  RSA = 0;\n  Ed25519 = 1;\n  Secp256k1 = 2;\n}\nmessage PublicKey {\n  required KeyType Type = 1;\n  required bytes Data = 2;\n}\nmessage PrivateKey {\n  required KeyType Type = 1;\n  required bytes Data = 2;\n}",forge={options:{usePureJavaScript:!1}},api$1={},baseN=api$1,_reverseAlphabets={};function _encodeWithByteBuffer(e,t){var r=0,n=t.length,i=t.charAt(0),o=[0];for(r=0;r<e.length();++r){for(var s=0,a=e.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=t[o[r]];return c}api$1.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,o=t.length,s=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var c=0,u=e[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%o,u=u/o|0;for(;u>0;)a.push(u%o),u=u/o|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}else n=_encodeWithByteBuffer(e,t);if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join("\r\n")}return n},api$1.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var r=_reverseAlphabets[t];if(!r){r=_reverseAlphabets[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");var i=t.length,o=t.charAt(0),s=[0];for(n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(void 0===a)return;for(var c=0,u=a;c<s.length;++c)u+=s[c]*i,s[c]=255&u,u>>=8;for(;u>0;)s.push(255&u),u>>=8}for(var f=0;e[f]===o&&f<e.length-1;++f)s.push(0);return"undefined"!=typeof Buffer?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};var dbits,util_1$5=createCommonjsModule(function(e){var t=e.exports=forge.util=forge.util||{};function r(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function n(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(t.isArrayBuffer(e)||t.isArrayBufferView(e))if("undefined"!=typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var r=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,r)}catch(e){for(var i=0;i<r.length;++i)this.putByte(r[i])}}else(e instanceof n||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return t.nextTick=process.nextTick,void("function"==typeof setImmediate?t.setImmediate=setImmediate:t.setImmediate=t.nextTick);if("function"==typeof setImmediate)return t.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(t.nextTick=function(e){return setImmediate(e)});if(t.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",r=[];t.setImmediate=function(t){r.push(t),1===r.length&&window.postMessage(e,"*")},window.addEventListener("message",function(t){if(t.source===window&&t.data===e){t.stopPropagation();var n=r.slice();r.length=0,n.forEach(function(e){e()})}},!0)}if("undefined"!=typeof MutationObserver){var n=Date.now(),i=!0,o=document.createElement("div");r=[];new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})}).observe(o,{attributes:!0});var s=t.setImmediate;t.setImmediate=function(e){Date.now()-n>15?(n=Date.now(),s(e)):(r.push(e),1===r.length&&o.setAttribute("a",i=!i))}}t.nextTick=t.setImmediate}(),t.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},t.isArrayBufferView=function(e){return e&&t.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},t.ByteBuffer=n,t.ByteStringBuffer=n;t.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},t.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},t.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},t.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},t.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},t.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},t.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(t.encodeUtf8(e))},t.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},t.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},t.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},t.ByteStringBuffer.prototype.putInt=function(e,t){r(t);var n="";do{t-=8,n+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(n)},t.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},t.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},t.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},t.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},t.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},t.ByteStringBuffer.prototype.getInt=function(e){r(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},t.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},t.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},t.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},t.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},t.ByteStringBuffer.prototype.copy=function(){var e=t.createBuffer(this.data);return e.read=this.read,e},t.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},t.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},t.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},t.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},t.ByteStringBuffer.prototype.toString=function(){return t.decodeUtf8(this.bytes())},t.DataBuffer=function(e,r){r=r||{},this.read=r.readOffset||0,this.growSize=r.growSize||1024;var n=t.isArrayBuffer(e),i=t.isArrayBufferView(e);if(n||i)return this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in r?r.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in r&&(this.write=r.writeOffset)},t.DataBuffer.prototype.length=function(){return this.write-this.read},t.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},t.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},t.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},t.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},t.DataBuffer.prototype.putBytes=function(e,r){if(t.isArrayBufferView(e)){var n=(i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-i.byteOffset;return this.accommodate(n),new Uint8Array(this.data.buffer,this.write).set(i),this.write+=n,this}if(t.isArrayBuffer(e)){var i=new Uint8Array(e);return this.accommodate(i.byteLength),new Uint8Array(this.data.buffer).set(i,this.write),this.write+=i.byteLength,this}if(e instanceof t.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&t.isArrayBufferView(e.data)){i=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(i.byteLength),new Uint8Array(e.data.byteLength,this.write).set(i),this.write+=i.byteLength,this}if(e instanceof t.ByteStringBuffer&&(e=e.data,r="binary"),r=r||"binary","string"==typeof e){var o;if("hex"===r)return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.hex.decode(e,o,this.write),this;if("base64"===r)return this.accommodate(3*Math.ceil(e.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.base64.decode(e,o,this.write),this;if("utf8"===r&&(e=t.encodeUtf8(e),r="binary"),"binary"===r||"raw"===r)return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.raw.decode(o),this;if("utf16"===r)return this.accommodate(2*e.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=t.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+r)}throw Error("Invalid parameter: "+e)},t.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},t.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},t.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},t.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},t.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},t.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},t.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},t.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},t.DataBuffer.prototype.putInt=function(e,t){r(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},t.DataBuffer.prototype.putSignedInt=function(e,t){return r(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},t.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},t.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},t.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},t.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},t.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},t.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},t.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},t.DataBuffer.prototype.getInt=function(e){r(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},t.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},t.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},t.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},t.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},t.DataBuffer.prototype.copy=function(){return new t.DataBuffer(this)},t.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},t.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},t.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},t.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},t.DataBuffer.prototype.toString=function(e){var r=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return t.binary.raw.encode(r);if("hex"===e)return t.binary.hex.encode(r);if("base64"===e)return t.binary.base64.encode(r);if("utf8"===e)return t.text.utf8.decode(r);if("utf16"===e)return t.text.utf16.decode(r);throw new Error("Invalid encoding: "+e)},t.createBuffer=function(e,r){return r=r||"raw",void 0!==e&&"utf8"===r&&(e=t.encodeUtf8(e)),new t.ByteBuffer(e)},t.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},t.xorBytes=function(e,t,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o},t.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},t.bytesToHex=function(e){return t.createBuffer(e).toHex()},t.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.encode64=function(e,t){for(var r,n,o,s="",a="",c=0;c<e.length;)r=e.charCodeAt(c++),n=e.charCodeAt(c++),o=e.charCodeAt(c++),s+=i.charAt(r>>2),s+=i.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=i.charAt((15&n)<<2|o>>6),s+=isNaN(o)?"=":i.charAt(63&o)),t&&s.length>t&&(a+=s.substr(0,t)+"\r\n",s=s.substr(t));return a+=s},t.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,s="",a=0;a<e.length;)t=o[e.charCodeAt(a++)-43],r=o[e.charCodeAt(a++)-43],n=o[e.charCodeAt(a++)-43],i=o[e.charCodeAt(a++)-43],s+=String.fromCharCode(t<<2|r>>4),64!==n&&(s+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(s+=String.fromCharCode((3&n)<<6|i)));return s},t.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},t.decodeUtf8=function(e){return decodeURIComponent(escape(e))},t.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}},t.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},t.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,o=0;o<e.length;++o)n[i++]=e.charCodeAt(o);return t?i-r:n},t.binary.hex.encode=t.bytesToHex,t.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,o=r=r||0;for(1&e.length&&(i=1,n[o++]=parseInt(e[0],16));i<e.length;i+=2)n[o++]=parseInt(e.substr(i,2),16);return t?o-r:n},t.binary.base64.encode=function(e,t){for(var r,n,o,s="",a="",c=0;c<e.byteLength;)r=e[c++],n=e[c++],o=e[c++],s+=i.charAt(r>>2),s+=i.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=i.charAt((15&n)<<2|o>>6),s+=isNaN(o)?"=":i.charAt(63&o)),t&&s.length>t&&(a+=s.substr(0,t)+"\r\n",s=s.substr(t));return a+=s},t.binary.base64.decode=function(e,t,r){var n,i,s,a,c=t;c||(c=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,f=r=r||0;u<e.length;)n=o[e.charCodeAt(u++)-43],i=o[e.charCodeAt(u++)-43],s=o[e.charCodeAt(u++)-43],a=o[e.charCodeAt(u++)-43],c[f++]=n<<2|i>>4,64!==s&&(c[f++]=(15&i)<<4|s>>2,64!==a&&(c[f++]=(3&s)<<6|a));return t?f-r:c.subarray(0,f)},t.binary.base58.encode=function(e,r){return t.binary.baseN.encode(e,s,r)},t.binary.base58.decode=function(e,r){return t.binary.baseN.decode(e,s,r)},t.text={utf8:{},utf16:{}},t.text.utf8.encode=function(e,r,n){e=t.encodeUtf8(e);var i=r;i||(i=new Uint8Array(e.length));for(var o=n=n||0,s=0;s<e.length;++s)i[o++]=e.charCodeAt(s);return r?o-n:i},t.text.utf8.decode=function(e){return t.decodeUtf8(String.fromCharCode.apply(null,e))},t.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),o=r=r||0,s=r,a=0;a<e.length;++a)i[s++]=e.charCodeAt(a),o+=2;return t?o-r:n},t.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},t.deflate=function(e,r,n){if(r=t.decode64(e.deflate(t.encode64(r)).rval),n){var i=2;32&r.charCodeAt(1)&&(i=6),r=r.substring(i,r.length-4)}return r},t.inflate=function(e,r,n){var i=e.inflate(t.encode64(r)).rval;return null===i?null:t.decode64(i)};var a=function(e,r,n){if(!e)throw new Error("WebStorage not available.");var i;if(null===n?i=e.removeItem(r):(n=t.encode64(JSON.stringify(n)),i=e.setItem(r,n)),void 0!==i&&!0!==i.rval){var o=new Error(i.error.message);throw o.id=i.error.id,o.name=i.error.name,o}},c=function(e,r){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(r);if(e.init)if(null===n.rval){if(n.error){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(t.decode64(n))),n},u=function(e,t,r,n){var i=c(e,t);null===i&&(i={}),i[r]=n,a(e,t,i)},f=function(e,t,r){var n=c(e,t);return null!==n&&(n=r in n?n[r]:null),n},l=function(e,t,r){var n=c(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),a(e,t,n)}},d=function(e,t){a(e,t,null)},h=function(e,t,r){var n,i=null;void 0===r&&(r=["web","flash"]);var o=!1,s=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),o="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),o=!0)}catch(e){s=e}if(o)break}if(!o)throw s;return i};t.setItem=function(e,t,r,n,i){h(u,arguments,i)},t.getItem=function(e,t,r,n){return h(f,arguments,n)},t.removeItem=function(e,t,r,n){h(l,arguments,n)},t.clearItems=function(e,t,r){h(d,arguments,r)},t.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=null===r?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?80!==n.port&&"http"===n.scheme?n.fullHost+=":"+n.port:443!==n.port&&"https"===n.scheme&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var p=null;t.getQueryVariables=function(e){var t,r=function(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var i,o,s=r[n].indexOf("=");s>0?(i=r[n].substring(0,s),o=r[n].substring(s+1)):(i=r[n],o=null),i in t||(t[i]=[]),i in Object.prototype||null===o||t[i].push(unescape(o))}return t};return void 0===e?(null===p&&(p="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),t=p):t=r(e),t},t.parseFragment=function(e){var r=e,n="",i=e.indexOf("?");i>0&&(r=e.substring(0,i),n=e.substring(i+1));var o=r.split("/");return o.length>0&&""===o[0]&&o.shift(),{pathString:r,queryString:n,path:o,query:""===n?{}:t.getQueryVariables(n)}},t.makeRequest=function(e){var r=t.parseFragment(e),n={path:r.pathString,query:r.queryString,getPath:function(e){return void 0===e?r.path:r.path[e]},getQuery:function(e,t){var n;return void 0===e?n=r.query:(n=r.query[e])&&void 0!==t&&(n=n[t]),n},getQueryLast:function(e,t){var r=n.getQuery(e);return r?r[r.length-1]:t}};return n},t.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},t.setPath=function(e,t,r){if("object"==typeof e&&null!==e)for(var n=0,i=t.length;n<i;){var o=t[n++];if(n==i)e[o]=r;else{var s=o in e;(!s||s&&"object"!=typeof e[o]||s&&null===e[o])&&(e[o]={}),e=e[o]}}},t.getPath=function(e,t,r){for(var n=0,i=t.length,o=!0;o&&n<i&&"object"==typeof e&&null!==e;){var s=t[n++];(o=s in e)&&(e=e[s])}return o?e:r},t.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var r=0,n=t.length;r<n;){var i=t[r++];if(r==n)delete e[i];else{if(!(i in e)||"object"!=typeof e[i]||null===e[i])break;e=e[i]}}},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.format=function(e){for(var t,r,n=/%./g,i=0,o=[],s=0;t=n.exec(e);){(r=e.substring(s,n.lastIndex-2)).length>0&&o.push(r),s=n.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[1+i++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(e.substring(s)),o.join("")},t.formatNumber=function(e,t,r,n){var i=e,o=isNaN(t=Math.abs(t))?2:t,s=void 0===r?",":r,a=void 0===n?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",f=u.length>3?u.length%3:0;return c+(f?u.substr(0,f)+a:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-u).toFixed(o).slice(2):"")},t.formatSize=function(e){return e=e>=1073741824?t.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?t.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?t.formatNumber(e/1024,0)+" KiB":t.formatNumber(e,0)+" bytes"},t.bytesFromIP=function(e){return-1!==e.indexOf(".")?t.bytesFromIPv4(e):-1!==e.indexOf(":")?t.bytesFromIPv6(e):null},t.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var r=t.createBuffer(),n=0;n<e.length;++n){var i=parseInt(e[n],10);if(isNaN(i))return null;r.putByte(i)}return r.getBytes()},t.bytesFromIPv6=function(e){for(var r=0,n=2*(8-(e=e.split(":").filter(function(e){return 0===e.length&&++r,!0})).length+r),i=t.createBuffer(),o=0;o<8;++o)if(e[o]&&0!==e[o].length){var s=t.hexToBytes(e[o]);s.length<2&&i.putByte(0),i.putBytes(s)}else i.fillWithByte(0,n),n=0;return i.getBytes()},t.bytesToIP=function(e){return 4===e.length?t.bytesToIPv4(e):16===e.length?t.bytesToIPv6(e):null},t.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},t.bytesToIPv6=function(e){if(16!==e.length)return null;for(var r=[],n=[],i=0,o=0;o<e.length;o+=2){for(var s=t.bytesToHex(e[o]+e[o+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var a=n[n.length-1],c=r.length;a&&c===a.end+1?(a.end=c,a.end-a.start>n[i].end-n[i].start&&(i=n.length-1)):n.push({start:c,end:c})}r.push(s)}if(n.length>0){var u=n[i];u.end-u.start>0&&(r.splice(u.start,u.end-u.start+1,""),0===u.start&&r.unshift(""),7===u.end&&r.push(""))}return r.join(":")},t.estimateCores=function(e,r){if("function"==typeof e&&(r=e,e={}),e=e||{},"cores"in t&&!e.update)return r(null,t.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return t.cores=navigator.hardwareConcurrency,r(null,t.cores);if("undefined"==typeof Worker)return t.cores=1,r(null,t.cores);if("undefined"==typeof Blob)return t.cores=2,r(null,t.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){var t=Date.now(),r=t+4;self.postMessage({st:t,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function e(i,o,s){if(0===o){var a=Math.floor(i.reduce(function(e,t){return e+t},0)/i.length);return t.cores=Math.max(1,a),URL.revokeObjectURL(n),r(null,t.cores)}!function(e,t){for(var r=[],i=[],o=0;o<e;++o){var s=new Worker(n);s.addEventListener("message",function(n){if(i.push(n.data),i.length===e){for(var o=0;o<e;++o)r[o].terminate();t(null,i)}}),r.push(s)}for(var o=0;o<e;++o)r[o].postMessage(o)}(s,function(t,r){i.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],o=r[n]=[],s=0;s<e;++s)if(n!==s){var a=t[s];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&o.push(s)}return r.reduce(function(e,t){return Math.max(e,t.length)},0)}(s,r)),e(i,o-1,s)})}([],5,16)}}),oids_1=createCommonjsModule(function(e){forge.pki=forge.pki||{};var t=e.exports=forge.pki.oids=forge.oids=forge.oids||{};function r(e,r){t[e]=r,t[r]=e}function n(e,r){t[e]=r}r("1.2.840.113549.1.1.1","rsaEncryption"),r("1.2.840.113549.1.1.4","md5WithRSAEncryption"),r("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),r("1.2.840.113549.1.1.7","RSAES-OAEP"),r("1.2.840.113549.1.1.8","mgf1"),r("1.2.840.113549.1.1.9","pSpecified"),r("1.2.840.113549.1.1.10","RSASSA-PSS"),r("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),r("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),r("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),r("1.2.840.10040.4.3","dsa-with-sha1"),r("1.3.14.3.2.7","desCBC"),r("1.3.14.3.2.26","sha1"),r("2.16.840.1.101.3.4.2.1","sha256"),r("2.16.840.1.101.3.4.2.2","sha384"),r("2.16.840.1.101.3.4.2.3","sha512"),r("1.2.840.113549.2.5","md5"),r("1.2.840.113549.1.7.1","data"),r("1.2.840.113549.1.7.2","signedData"),r("1.2.840.113549.1.7.3","envelopedData"),r("1.2.840.113549.1.7.4","signedAndEnvelopedData"),r("1.2.840.113549.1.7.5","digestedData"),r("1.2.840.113549.1.7.6","encryptedData"),r("1.2.840.113549.1.9.1","emailAddress"),r("1.2.840.113549.1.9.2","unstructuredName"),r("1.2.840.113549.1.9.3","contentType"),r("1.2.840.113549.1.9.4","messageDigest"),r("1.2.840.113549.1.9.5","signingTime"),r("1.2.840.113549.1.9.6","counterSignature"),r("1.2.840.113549.1.9.7","challengePassword"),r("1.2.840.113549.1.9.8","unstructuredAddress"),r("1.2.840.113549.1.9.14","extensionRequest"),r("1.2.840.113549.1.9.20","friendlyName"),r("1.2.840.113549.1.9.21","localKeyId"),r("1.2.840.113549.1.9.22.1","x509Certificate"),r("1.2.840.113549.1.12.10.1.1","keyBag"),r("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),r("1.2.840.113549.1.12.10.1.3","certBag"),r("1.2.840.113549.1.12.10.1.4","crlBag"),r("1.2.840.113549.1.12.10.1.5","secretBag"),r("1.2.840.113549.1.12.10.1.6","safeContentsBag"),r("1.2.840.113549.1.5.13","pkcs5PBES2"),r("1.2.840.113549.1.5.12","pkcs5PBKDF2"),r("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),r("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),r("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),r("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),r("1.2.840.113549.2.7","hmacWithSHA1"),r("1.2.840.113549.2.8","hmacWithSHA224"),r("1.2.840.113549.2.9","hmacWithSHA256"),r("1.2.840.113549.2.10","hmacWithSHA384"),r("1.2.840.113549.2.11","hmacWithSHA512"),r("1.2.840.113549.3.7","des-EDE3-CBC"),r("2.16.840.1.101.3.4.1.2","aes128-CBC"),r("2.16.840.1.101.3.4.1.22","aes192-CBC"),r("2.16.840.1.101.3.4.1.42","aes256-CBC"),r("2.5.4.3","commonName"),r("2.5.4.5","serialName"),r("2.5.4.6","countryName"),r("2.5.4.7","localityName"),r("2.5.4.8","stateOrProvinceName"),r("2.5.4.10","organizationName"),r("2.5.4.11","organizationalUnitName"),r("2.16.840.1.113730.1.1","nsCertType"),n("2.5.29.1","authorityKeyIdentifier"),n("2.5.29.2","keyAttributes"),n("2.5.29.3","certificatePolicies"),n("2.5.29.4","keyUsageRestriction"),n("2.5.29.5","policyMapping"),n("2.5.29.6","subtreesConstraint"),n("2.5.29.7","subjectAltName"),n("2.5.29.8","issuerAltName"),n("2.5.29.9","subjectDirectoryAttributes"),n("2.5.29.10","basicConstraints"),n("2.5.29.11","nameConstraints"),n("2.5.29.12","policyConstraints"),n("2.5.29.13","basicConstraints"),r("2.5.29.14","subjectKeyIdentifier"),r("2.5.29.15","keyUsage"),n("2.5.29.16","privateKeyUsagePeriod"),r("2.5.29.17","subjectAltName"),r("2.5.29.18","issuerAltName"),r("2.5.29.19","basicConstraints"),n("2.5.29.20","cRLNumber"),n("2.5.29.21","cRLReason"),n("2.5.29.22","expirationDate"),n("2.5.29.23","instructionCode"),n("2.5.29.24","invalidityDate"),n("2.5.29.25","cRLDistributionPoints"),n("2.5.29.26","issuingDistributionPoint"),n("2.5.29.27","deltaCRLIndicator"),n("2.5.29.28","issuingDistributionPoint"),n("2.5.29.29","certificateIssuer"),n("2.5.29.30","nameConstraints"),r("2.5.29.31","cRLDistributionPoints"),r("2.5.29.32","certificatePolicies"),n("2.5.29.33","policyMappings"),n("2.5.29.34","policyConstraints"),r("2.5.29.35","authorityKeyIdentifier"),n("2.5.29.36","policyConstraints"),r("2.5.29.37","extKeyUsage"),n("2.5.29.46","freshestCRL"),n("2.5.29.54","inhibitAnyPolicy"),r("1.3.6.1.4.1.11129.2.4.2","timestampList"),r("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),r("1.3.6.1.5.5.7.3.1","serverAuth"),r("1.3.6.1.5.5.7.3.2","clientAuth"),r("1.3.6.1.5.5.7.3.3","codeSigning"),r("1.3.6.1.5.5.7.3.4","emailProtection"),r("1.3.6.1.5.5.7.3.8","timeStamping")}),asn1_1=createCommonjsModule(function(e){var t=e.exports=forge.asn1=forge.asn1||{};function r(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(e,r,n,i,o){if(forge.util.isArray(i)){for(var s=[],a=0;a<i.length;++a)void 0!==i[a]&&s.push(i[a]);i=s}var c={tagClass:e,type:r,constructed:n,composed:n||forge.util.isArray(i),value:i};return o&&"bitStringContents"in o&&(c.bitStringContents=o.bitStringContents,c.original=t.copy(c)),c},t.copy=function(e,r){var n;if(forge.util.isArray(e)){n=[];for(var i=0;i<e.length;++i)n.push(t.copy(e[i],r));return n}return"string"==typeof e?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:t.copy(e.value,r)},r&&!r.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)},t.equals=function(e,r,n){if(forge.util.isArray(e)){if(!forge.util.isArray(r))return!1;if(e.length!==r.length)return!1;for(var i=0;i<e.length;++i)if(!t.equals(e[i],r[i]))return!1;return!0}if(typeof e!=typeof r)return!1;if("string"==typeof e)return e===r;var o=e.tagClass===r.tagClass&&e.type===r.type&&e.constructed===r.constructed&&e.composed===r.composed&&t.equals(e.value,r.value);return n&&n.includeBitStringContents&&(o=o&&e.bitStringContents===r.bitStringContents),o},t.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};var n=function(e,t){var n=e.getByte();if(128!==n){var i;if(128&n){var o=127&n;r(e,--t,o),i=e.getInt(o<<3)}else i=n;if(i<0)throw new Error("Negative length: "+i);return i}};t.fromDer=function(e,i){return void 0===i&&(i={strict:!0,decodeBitStrings:!0}),"boolean"==typeof i&&(i={strict:i,decodeBitStrings:!0}),"strict"in i||(i.strict=!0),"decodeBitStrings"in i||(i.decodeBitStrings=!0),"string"==typeof e&&(e=forge.util.createBuffer(e)),function e(i,o,s,a){var c;r(i,o,2);var u=i.getByte();o--;var f=192&u;var l=31&u;c=i.length();var d=n(i,o);o-=c-i.length();if(void 0!==d&&d>o){if(a.strict){var h=new Error("Too few bytes to read ASN.1 value.");throw h.available=i.length(),h.remaining=o,h.requested=d,h}d=o}var p;var b;var m=32==(32&u);if(m)if(p=[],void 0===d)for(;;){if(r(i,o,2),i.bytes(2)===String.fromCharCode(0,0)){i.getBytes(2),o-=2;break}c=i.length(),p.push(e(i,o,s+1,a)),o-=c-i.length()}else for(;d>0;)c=i.length(),p.push(e(i,d,s+1,a)),o-=c-i.length(),d-=c-i.length();void 0===p&&f===t.Class.UNIVERSAL&&l===t.Type.BITSTRING&&(b=i.bytes(d));if(void 0===p&&a.decodeBitStrings&&f===t.Class.UNIVERSAL&&l===t.Type.BITSTRING&&d>1){var g=i.read,y=o,v=0;if(l===t.Type.BITSTRING&&(r(i,o,1),v=i.getByte(),o--),0===v)try{c=i.length();var _={verbose:a.verbose,strict:!0,decodeBitStrings:!0},$=e(i,o,s+1,_),S=c-i.length();o-=S,l==t.Type.BITSTRING&&S++;var E=$.tagClass;S!==d||E!==t.Class.UNIVERSAL&&E!==t.Class.CONTEXT_SPECIFIC||(p=[$])}catch(e){}void 0===p&&(i.read=g,o=y)}if(void 0===p){if(void 0===d){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");d=o}if(l===t.Type.BMPSTRING)for(p="";d>0;d-=2)r(i,o,2),p+=String.fromCharCode(i.getInt16()),o-=2;else p=i.getBytes(d)}var w=void 0===b?null:{bitStringContents:b};return t.create(f,l,m,p,w)}(e,e.length(),0,i)},t.toDer=function(e){var r=forge.util.createBuffer(),n=e.tagClass|e.type,i=forge.util.createBuffer(),o=!1;if("bitStringContents"in e&&(o=!0,e.original&&(o=t.equals(e,e.original))),o)i.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:i.putByte(0);for(var s=0;s<e.value.length;++s)void 0!==e.value[s]&&i.putBuffer(t.toDer(e.value[s]))}else if(e.type===t.Type.BMPSTRING)for(s=0;s<e.value.length;++s)i.putInt16(e.value.charCodeAt(s));else e.type===t.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?i.putBytes(e.value.substr(1)):i.putBytes(e.value);if(r.putByte(n),i.length()<=127)r.putByte(127&i.length());else{var a=i.length(),c="";do{c+=String.fromCharCode(255&a),a>>>=8}while(a>0);r.putByte(128|c.length);for(s=c.length-1;s>=0;--s)r.putByte(c.charCodeAt(s))}return r.putBuffer(i),r},t.oidToDer=function(e){var t,r,n,i,o=e.split("."),s=forge.util.createBuffer();s.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var a=2;a<o.length;++a){t=!0,r=[],n=parseInt(o[a],10);do{i=127&n,n>>>=7,t||(i|=128),r.push(i),t=!1}while(n>0);for(var c=r.length-1;c>=0;--c)s.putByte(r[c])}return s},t.derToOid=function(e){var t;"string"==typeof e&&(e=forge.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)n<<=7,128&(r=e.getByte())?n+=127&r:(t+="."+(n+r),n=0);return t},t.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),o=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var c=e.charAt(10),u=10;"+"!==c&&"-"!==c&&(a=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(o,s,a,0),u&&("+"===(c=e.charAt(u))||"-"===c)){var f=60*parseInt(e.substr(u+1,2),10)+parseInt(e.substr(u+4,2),10);f*=6e4,"+"===c?t.setTime(+t-f):t.setTime(+t+f)}return t},t.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),c=0,u=0,f=!1;"Z"===e.charAt(e.length-1)&&(f=!0);var l=e.length-5,d=e.charAt(l);"+"!==d&&"-"!==d||(u=60*parseInt(e.substr(l+1,2),10)+parseInt(e.substr(l+4,2),10),u*=6e4,"+"===d&&(u*=-1),f=!0);return"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),f?(t.setUTCFullYear(r,n,i),t.setUTCHours(o,s,a,c),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(o,s,a,c)),t},t.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},t.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},t.integerToDer=function(e){var t=forge.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},t.derToInteger=function(e){"string"==typeof e&&(e=forge.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},t.validate=function(e,r,n,i){var o=!1;if(e.tagClass!==r.tagClass&&void 0!==r.tagClass||e.type!==r.type&&void 0!==r.type)i&&(e.tagClass!==r.tagClass&&i.push("["+r.name+'] Expected tag class "'+r.tagClass+'", got "'+e.tagClass+'"'),e.type!==r.type&&i.push("["+r.name+'] Expected type "'+r.type+'", got "'+e.type+'"'));else if(e.constructed===r.constructed||void 0===r.constructed){if(o=!0,r.value&&forge.util.isArray(r.value))for(var s=0,a=0;o&&a<r.value.length;++a)o=r.value[a].optional||!1,e.value[s]&&((o=t.validate(e.value[s],r.value[a],n,i))?++s:r.value[a].optional&&(o=!0)),!o&&i&&i.push("["+r.name+'] Tag class "'+r.tagClass+'", type "'+r.type+'" expected value length "'+r.value.length+'", got "'+e.value.length+'"');if(o&&n&&(r.capture&&(n[r.capture]=e.value),r.captureAsn1&&(n[r.captureAsn1]=e),r.captureBitStringContents&&"bitStringContents"in e&&(n[r.captureBitStringContents]=e.bitStringContents),r.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)n[r.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");n[r.captureBitStringValue]=e.bitStringContents.slice(1)}}else i&&i.push("["+r.name+'] Expected constructed "'+r.constructed+'", got "'+e.constructed+'"');return o};var i=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(e,r,n){var o="";n=n||2,(r=r||0)>0&&(o+="\n");for(var s="",a=0;a<r*n;++a)s+=" ";switch(o+=s+"Tag: ",e.tagClass){case t.Class.UNIVERSAL:o+="Universal:";break;case t.Class.APPLICATION:o+="Application:";break;case t.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case t.Class.PRIVATE:o+="Private:"}if(e.tagClass===t.Class.UNIVERSAL)switch(o+=e.type,e.type){case t.Type.NONE:o+=" (None)";break;case t.Type.BOOLEAN:o+=" (Boolean)";break;case t.Type.INTEGER:o+=" (Integer)";break;case t.Type.BITSTRING:o+=" (Bit string)";break;case t.Type.OCTETSTRING:o+=" (Octet string)";break;case t.Type.NULL:o+=" (Null)";break;case t.Type.OID:o+=" (Object Identifier)";break;case t.Type.ODESC:o+=" (Object Descriptor)";break;case t.Type.EXTERNAL:o+=" (External or Instance of)";break;case t.Type.REAL:o+=" (Real)";break;case t.Type.ENUMERATED:o+=" (Enumerated)";break;case t.Type.EMBEDDED:o+=" (Embedded PDV)";break;case t.Type.UTF8:o+=" (UTF8)";break;case t.Type.ROID:o+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:o+=" (Sequence)";break;case t.Type.SET:o+=" (Set)";break;case t.Type.PRINTABLESTRING:o+=" (Printable String)";break;case t.Type.IA5String:o+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:o+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case t.Type.BMPSTRING:o+=" (BMP String)"}else o+=e.type;if(o+="\n",o+=s+"Constructed: "+e.constructed+"\n",e.composed){var c=0,u="";for(a=0;a<e.value.length;++a)void 0!==e.value[a]&&(c+=1,u+=t.prettyPrint(e.value[a],r+1,n),a+1<e.value.length&&(u+=","));o+=s+"Sub values: "+c+u}else{if(o+=s+"Value: ",e.type===t.Type.OID){var f=t.derToOid(e.value);o+=f,forge.pki&&forge.pki.oids&&f in forge.pki.oids&&(o+=" ("+forge.pki.oids[f]+") ")}if(e.type===t.Type.INTEGER)try{o+=t.derToInteger(e.value)}catch(t){o+="0x"+forge.util.bytesToHex(e.value)}else if(e.type===t.Type.BITSTRING){if(e.value.length>1?o+="0x"+forge.util.bytesToHex(e.value.slice(1)):o+="(none)",e.value.length>0){var l=e.value.charCodeAt(0);1==l?o+=" (1 unused bit shown)":l>1&&(o+=" ("+l+" unused bits shown)")}}else e.type===t.Type.OCTETSTRING?(i.test(e.value)||(o+="("+e.value+") "),o+="0x"+forge.util.bytesToHex(e.value)):e.type===t.Type.UTF8?o+=forge.util.decodeUtf8(e.value):e.type===t.Type.PRINTABLESTRING||e.type===t.Type.IA5String?o+=e.value:i.test(e.value)?o+="0x"+forge.util.bytesToHex(e.value):0===e.value.length?o+="[null]":o+=e.value}return o}}),jsbn=forge.jsbn=forge.jsbn||{};function BigInteger(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,r,n,i,o){for(;--o>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=67108863&s}return i}function am2(e,t,r,n,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var c=32767&this.data[e],u=this.data[e++]>>15,f=a*c+u*s;i=((c=s*c+((32767&f)<<15)+r.data[n]+(1073741823&i))>>>30)+(f>>>15)+a*u+(i>>>30),r.data[n++]=1073741823&c}return i}function am3(e,t,r,n,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var c=16383&this.data[e],u=this.data[e++]>>14,f=a*c+u*s;i=((c=s*c+((16383&f)<<14)+r.data[n]+i)>>28)+(f>>14)+a*u,r.data[n++]=268435455&c}return i}forge.jsbn.BigInteger=BigInteger,"undefined"==typeof navigator?(BigInteger.prototype.am=am3,dbits=28):"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var rr,vv,BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(e){return BI_RM.charAt(e)}function intAt(e,t){var r=BI_RC[e.charCodeAt(t)];return null==r?-1:r}function bnpCopyTo(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var s=8==r?255&e[n]:intAt(e,n);s<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==o?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(r=this.data[s]>>a)>0&&(i=!0,o=int2char(r));s>=0;)a<t?(r=(this.data[s]&(1<<a)-1)<<t-a,r|=this.data[--s]>>(a+=this.DB-t)):(r=this.data[s]>>(a-=t)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=int2char(r));return i?o:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0}function nbits(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){var r,n=e%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+s+1]=this.data[r]>>i|a,a=(this.data[r]&o)<<n;for(r=s-1;r>=0;--r)t.data[r]=0;t.data[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&o)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}}function bnpSubTo(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function bnpMultiplyTo(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var o=nbi(),s=this.s,a=e.s,c=this.DB-nbits(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,f=o.data[u-1];if(0!=f){var l=f*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),d=this.FV/l,h=(1<<this.F1)/l,p=1<<this.F2,b=r.t,m=b-u,g=null==t?nbi():t;for(o.dlShiftTo(m,g),r.compareTo(g)>=0&&(r.data[r.t++]=1,r.subTo(g,r)),BigInteger.ONE.dlShiftTo(u,g),g.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--m>=0;){var y=r.data[--b]==f?this.DM:Math.floor(r.data[b]*d+(r.data[b-1]+p)*h);if((r.data[b]+=o.am(0,y,r,m,0,u))<y)for(o.dlShiftTo(m,g),r.subTo(g,r);r.data[b]<--y;)r.subTo(g,r)}null!=t&&(r.drShiftTo(u,t),s!=a&&BigInteger.ZERO.subTo(t,t)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&BigInteger.ZERO.subTo(r,r)}}}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger.ZERO)>0&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function bnpIsEven(){return 0==(this.t>0?1&this.data[0]:this.s)}function bnpExp(e,t){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),n=nbi(),i=t.convert(this),o=nbits(e)-1;for(i.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function bnModPowInt(e,t){var r;return r=e<256||t.isEven()?new Classic(t):new Montgomery(t),this.exp(e,r)}function bnClone(){var e=nbi();return this.copyTo(e),e}function bnIntValue(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return 0==this.t?this.s:this.data[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this.data[0]<<16>>16}function bnpChunkSize(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function bnpToRadix(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=nbv(r),i=nbi(),o=nbi(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(e)+s}function bnpFromRadix(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,s=0,a=0;a<e.length;++a){var c=intAt(e,a);c<0?"-"==e.charAt(a)&&0==this.signum()&&(i=!0):(s=t*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),i&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(e-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(BigInteger.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function bnToByteArray(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function bnEquals(e){return 0==this.compareTo(e)}function bnMin(e){return this.compareTo(e)<0?this:e}function bnMax(e){return this.compareTo(e)>0?this:e}function bnpBitwiseTo(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function op_and(e,t){return e&t}function bnAnd(e){var t=nbi();return this.bitwiseTo(e,op_and,t),t}function op_or(e,t){return e|t}function bnOr(e){var t=nbi();return this.bitwiseTo(e,op_or,t),t}function op_xor(e,t){return e^t}function bnXor(e){var t=nbi();return this.bitwiseTo(e,op_xor,t),t}function op_andnot(e,t){return e&~t}function bnAndNot(e){var t=nbi();return this.bitwiseTo(e,op_andnot,t),t}function bnNot(){for(var e=nbi(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function bnShiftLeft(e){var t=nbi();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function bnShiftRight(e){var t=nbi();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function lbit(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function bnGetLowestSetBit(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+lbit(this.data[e]);return this.s<0?this.t*this.DB:-1}function cbit(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function bnBitCount(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=cbit(this.data[r]^t);return e}function bnTestBit(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)}function bnpChangeBit(e,t){var r=BigInteger.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function bnSetBit(e){return this.changeBit(e,op_or)}function bnClearBit(e){return this.changeBit(e,op_andnot)}function bnFlipBit(e){return this.changeBit(e,op_xor)}function bnpAddTo(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function bnAdd(e){var t=nbi();return this.addTo(e,t),t}function bnSubtract(e){var t=nbi();return this.subTo(e,t),t}function bnMultiply(e){var t=nbi();return this.multiplyTo(e,t),t}function bnDivide(e){var t=nbi();return this.divRemTo(e,t,null),t}function bnRemainder(e){var t=nbi();return this.divRemTo(e,null,t),t}function bnDivideAndRemainder(e){var t=nbi(),r=nbi();return this.divRemTo(e,t,r),new Array(t,r)}function bnpDMultiply(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function NullExp(){}function nNop(e){return e}function nMulTo(e,t,r){e.multiplyTo(t,r)}function nSqrTo(e,t){e.squareTo(t)}function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()}function bnpMultiplyUpperTo(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Barrett(e){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function barrettConvert(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=nbi();return e.copyTo(t),this.reduce(t),t}function barrettRevert(e){return e}function barrettReduce(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function barrettSqrTo(e,t){e.squareTo(t),this.reduce(t)}function barrettMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function bnModPow(e,t){var r,n,i=e.bitLength(),o=nbv(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new Classic(t):t.isEven()?new Barrett(t):new Montgomery(t);var s=new Array,a=3,c=r-1,u=(1<<r)-1;if(s[1]=n.convert(this),r>1){var f=nbi();for(n.sqrTo(s[1],f);a<=u;)s[a]=nbi(),n.mulTo(f,s[a-2],s[a]),a+=2}var l,d,h=e.t-1,p=!0,b=nbi();for(i=nbits(e.data[h])-1;h>=0;){for(i>=c?l=e.data[h]>>i-c&u:(l=(e.data[h]&(1<<i+1)-1)<<c-i,h>0&&(l|=e.data[h-1]>>this.DB+i-c)),a=r;0==(1&l);)l>>=1,--a;if((i-=a)<0&&(i+=this.DB,--h),p)s[l].copyTo(o),p=!1;else{for(;a>1;)n.sqrTo(o,b),n.sqrTo(b,o),a-=2;a>0?n.sqrTo(o,b):(d=o,o=b,b=d),n.mulTo(b,s[l],o)}for(;h>=0&&0==(e.data[h]&1<<i);)n.sqrTo(o,b),d=o,o=b,b=d,--i<0&&(i=this.DB-1,--h)}return n.revert(o)}function bnGCD(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function bnpModInt(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function bnModInverse(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return BigInteger.ZERO;for(var r=e.clone(),n=this.clone(),i=nbv(1),o=nbv(0),s=nbv(0),a=nbv(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),t&&s.subTo(i,s),a.subTo(o,a))}return 0!=n.compareTo(BigInteger.ONE)?BigInteger.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=lowprimes[lowprimes.length-1]){for(t=0;t<lowprimes.length;++t)if(r.data[0]==lowprimes[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<lowprimes.length;){for(var n=lowprimes[t],i=t+1;i<lowprimes.length&&n<lplim;)n*=lowprimes[i++];for(n=r.modInt(n);t<i;)if(n%lowprimes[t++]==0)return!1}return r.millerRabin(e)}function bnpMillerRabin(e){var t=this.subtract(BigInteger.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),o=bnGetPrng(),s=0;s<e;++s){do{n=new BigInteger(this.bitLength(),o)}while(n.compareTo(BigInteger.ONE)<=0||n.compareTo(t)>=0);var a=n.modPow(i,this);if(0!=a.compareTo(BigInteger.ONE)&&0!=a.compareTo(t)){for(var c=1;c++<r&&0!=a.compareTo(t);)if(0==(a=a.modPowInt(2,this)).compareTo(BigInteger.ONE))return!1;if(0!=a.compareTo(t))return!1}}return!0}function bnGetPrng(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}}}BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime;var cipher=forge.cipher=forge.cipher||{};forge.cipher.algorithms=forge.cipher.algorithms||{},forge.cipher.createCipher=function(e,t){var r=e;if("string"==typeof r&&(r=forge.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new forge.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},forge.cipher.createDecipher=function(e,t){var r=e;if("string"==typeof r&&(r=forge.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new forge.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},forge.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),forge.cipher.algorithms[e]=t},forge.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in forge.cipher.algorithms?forge.cipher.algorithms[e]:null};var BlockCipher=forge.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};BlockCipher.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=forge.util.createBuffer(),this.output=e.output||forge.util.createBuffer(),this.mode.start(t)},BlockCipher.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},BlockCipher.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))};var cipherModes=createCommonjsModule(function(e){forge.cipher=forge.cipher||{};var t=e.exports=forge.cipher.modes=forge.cipher.modes||{};function r(e){if("string"==typeof e&&(e=forge.util.createBuffer(e)),forge.util.isArray(e)&&e.length>4){var t=e;e=forge.util.createBuffer();for(var r=0;r<t.length;++r)e.putByte(t[r])}return forge.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function n(e){e[e.length-1]=e[e.length-1]+1&4294967295}function i(e){return[e/4294967296|0,4294967295&e]}t.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(e){},t.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},t.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},t.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},t.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},t.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._prev=this._iv.slice(0)}},t.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},t.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},t.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},t.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},t.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(o>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(e,t,r){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var o=0;o<this._ints;++o)t.putInt32(e.getInt32()^this._outBlock[o]);else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}n(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=forge.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?forge.util.createBuffer(e.additionalData):forge.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=forge.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=r.length();if(12===o)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(i(8*o)))}this._inBlock=this._j0.slice(0),n(this._inBlock),this._partialBytes=0,t=forge.util.createBuffer(t),this._aDataLength=i(8*t.length());var s=t.length()%this.blockSize;for(s&&t.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},t.gcm.prototype.encrypt=function(e,t,r){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize){for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(0===s||r){if(r){var a=i%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),n(this._inBlock)},t.gcm.prototype.decrypt=function(e,t,r){var i=e.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),n(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^this._hashBlock[o]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},t.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=forge.util.createBuffer();var n=this._aDataLength.concat(i(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,n);var o=[];this.cipher.encrypt(this._j0,o);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^o[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},t.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},t.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},t.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},t.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},t.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=(n-1-s%n)*t;a[s/n|0]=1<<t-1<<c,o[s]=this.generateSubHashTable(this.multiply(a,e),t)}return o},t.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i}}),aes=forge.aes=forge.aes||{};function registerAlgorithm(e,t){forge.cipher.registerAlgorithm(e,function(){return new forge.aes.Algorithm(e,t)})}forge.aes.startEncrypting=function(e,t,r,n){var i=_createCipher({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},forge.aes.createEncryptionCipher=function(e,t){return _createCipher({key:e,output:null,decrypt:!1,mode:t})},forge.aes.startDecrypting=function(e,t,r,n){var i=_createCipher({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},forge.aes.createDecryptionCipher=function(e,t){return _createCipher({key:e,output:null,decrypt:!0,mode:t})},forge.aes.Algorithm=function(e,t){init||initialize();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return _updateBlock(r._w,e,t,!1)},decrypt:function(e,t){return _updateBlock(r._w,e,t,!0)}}}),r._init=!1},forge.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(forge.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=forge.util.createBuffer();for(var n=0;n<t.length;++n)r.putByte(t[n])}}else r=forge.util.createBuffer(r);if(!forge.util.isArray(r)){t=r,r=[];var i=t.length();if(16===i||24===i||32===i){i>>>=2;for(n=0;n<i;++n)r.push(t.getInt32())}}if(!forge.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,s=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=_expandKey(r,e.decrypt&&!s),this._init=!0}},forge.aes._expandKey=function(e,t){return init||initialize(),_expandKey(e,t)},forge.aes._updateBlock=_updateBlock,registerAlgorithm("AES-ECB",forge.cipher.modes.ecb),registerAlgorithm("AES-CBC",forge.cipher.modes.cbc),registerAlgorithm("AES-CFB",forge.cipher.modes.cfb),registerAlgorithm("AES-OFB",forge.cipher.modes.ofb),registerAlgorithm("AES-CTR",forge.cipher.modes.ctr),registerAlgorithm("AES-GCM",forge.cipher.modes.gcm);var sbox,isbox,rcon,mix,imix,init=!1,Nb=4;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(t=0;t<4;++t)mix[t]=new Array(256),imix[t]=new Array(256);var r,n,i,o,s,a,c,u=0,f=0;for(t=0;t<256;++t){o=(o=f^f<<1^f<<2^f<<3^f<<4)>>8^255&o^99,sbox[u]=o,isbox[o]=u,a=(s=e[o])<<24^o<<16^o<<8^o^s,c=((r=e[u])^(n=e[r])^(i=e[n]))<<24^(u^i)<<16^(u^n^i)<<8^u^r^i;for(var l=0;l<4;++l)mix[l][u]=a,imix[l][o]=c,a=a<<24|a>>>8,c=c<<24|c>>>8;0===u?u=f=1:(u=r^e[e[e[r^i]]],f^=e[e[f]])}}function _expandKey(e,t){for(var r,n=e.slice(0),i=1,o=n.length,s=Nb*(o+6+1),a=o;a<s;++a)r=n[a-1],a%o==0?(r=sbox[r>>>16&255]<<24^sbox[r>>>8&255]<<16^sbox[255&r]<<8^sbox[r>>>24]^rcon[i]<<24,i++):o>6&&a%o==4&&(r=sbox[r>>>24]<<24^sbox[r>>>16&255]<<16^sbox[r>>>8&255]<<8^sbox[255&r]),n[a]=n[a-o]^r;if(t){for(var c,u=imix[0],f=imix[1],l=imix[2],d=imix[3],h=n.slice(0),p=(a=0,(s=n.length)-Nb);a<s;a+=Nb,p-=Nb)if(0===a||a===s-Nb)h[a]=n[p],h[a+1]=n[p+3],h[a+2]=n[p+2],h[a+3]=n[p+1];else for(var b=0;b<Nb;++b)c=n[p+b],h[a+(3&-b)]=u[sbox[c>>>24]]^f[sbox[c>>>16&255]]^l[sbox[c>>>8&255]]^d[sbox[255&c]];n=h}return n}function _updateBlock(e,t,r,n){var i,o,s,a,c,u,f,l,d,h,p,b,m=e.length/4-1;n?(i=imix[0],o=imix[1],s=imix[2],a=imix[3],c=isbox):(i=mix[0],o=mix[1],s=mix[2],a=mix[3],c=sbox),u=t[0]^e[0],f=t[n?3:1]^e[1],l=t[2]^e[2],d=t[n?1:3]^e[3];for(var g=3,y=1;y<m;++y)h=i[u>>>24]^o[f>>>16&255]^s[l>>>8&255]^a[255&d]^e[++g],p=i[f>>>24]^o[l>>>16&255]^s[d>>>8&255]^a[255&u]^e[++g],b=i[l>>>24]^o[d>>>16&255]^s[u>>>8&255]^a[255&f]^e[++g],d=i[d>>>24]^o[u>>>16&255]^s[f>>>8&255]^a[255&l]^e[++g],u=h,f=p,l=b;r[0]=c[u>>>24]<<24^c[f>>>16&255]<<16^c[l>>>8&255]<<8^c[255&d]^e[++g],r[n?3:1]=c[f>>>24]<<24^c[l>>>16&255]<<16^c[d>>>8&255]<<8^c[255&u]^e[++g],r[2]=c[l>>>24]<<24^c[d>>>16&255]<<16^c[u>>>8&255]<<8^c[255&f]^e[++g],r[n?1:3]=c[d>>>24]<<24^c[u>>>16&255]<<16^c[f>>>8&255]<<8^c[255&l]^e[++g]}function _createCipher(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=(t=e.decrypt?forge.cipher.createDecipher(r,e.key):forge.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof forge.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,n.call(t,r)},t}var md=forge.md=forge.md||{};forge.md.algorithms=forge.md.algorithms||{};var sha256_1=createCommonjsModule(function(e){var t=e.exports=forge.sha256=forge.sha256||{};forge.md.sha256=forge.md.algorithms.sha256=t,t.create=function(){n||(r=String.fromCharCode(128),r+=forge.util.fillString(String.fromCharCode(0),64),i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=!0);var e=null,t=forge.util.createBuffer(),s=new Array(64),a={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var r=a.messageLengthSize/4,n=0;n<r;++n)a.fullMessageLength.push(0);return t=forge.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a}};return a.start(),a.update=function(r,n){"utf8"===n&&(r=forge.util.encodeUtf8(r));var i=r.length;a.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var c=a.fullMessageLength.length-1;c>=0;--c)a.fullMessageLength[c]+=i[1],i[1]=i[0]+(a.fullMessageLength[c]/4294967296>>>0),a.fullMessageLength[c]=a.fullMessageLength[c]>>>0,i[0]=i[1]/4294967296>>>0;return t.putBytes(r),o(e,s,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var n=forge.util.createBuffer();n.putBytes(t.bytes());var i,c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;n.putBytes(r.substr(0,a.blockLength-c));for(var u=8*a.fullMessageLength[0],f=0;f<a.fullMessageLength.length-1;++f)u+=(i=8*a.fullMessageLength[f+1])/4294967296>>>0,n.putInt32(u>>>0),u=i>>>0;n.putInt32(u);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};o(l,s,n);var d=forge.util.createBuffer();return d.putInt32(l.h0),d.putInt32(l.h1),d.putInt32(l.h2),d.putInt32(l.h3),d.putInt32(l.h4),d.putInt32(l.h5),d.putInt32(l.h6),d.putInt32(l.h7),d},a};var r=null,n=!1,i=null;function o(e,t,r){for(var n,o,s,a,c,u,f,l,d,h,p,b,m,g=r.length();g>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=((n=t[c-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,o=((o=t[c-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,t[c]=n+t[c-7]+o+t[c-16]|0;for(u=e.h0,f=e.h1,l=e.h2,d=e.h3,h=e.h4,p=e.h5,b=e.h6,m=e.h7,c=0;c<64;++c)s=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),a=u&f|l&(u^f),n=m+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(b^h&(p^b))+i[c]+t[c],m=b,b=p,p=h,h=d+n>>>0,d=l,l=f,f=u,u=n+(o=s+a)>>>0;e.h0=e.h0+u|0,e.h1=e.h1+f|0,e.h2=e.h2+l|0,e.h3=e.h3+d|0,e.h4=e.h4+h|0,e.h5=e.h5+p|0,e.h6=e.h6+b|0,e.h7=e.h7+m|0,g-=64}}}),prng_1=createCommonjsModule(function(e){var t=null;!forge.util.isNodejs||forge.options.usePureJavaScript||process.versions["node-webkit"]||(t=crypto$l),(e.exports=forge.prng=forge.prng||{}).create=function(e){for(var r={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,i=new Array(32),o=0;o<32;++o)i[o]=n.create();function s(){if(r.pools[0].messageLength>=32)return a();var e=32-r.pools[0].messageLength<<5;r.collect(r.seedFileSync(e)),a()}function a(){r.reseeds=4294967295===r.reseeds?0:r.reseeds+1;var e=r.plugin.md.create();e.update(r.keyBytes);for(var t=1,n=0;n<32;++n)r.reseeds%t==0&&(e.update(r.pools[n].digest().getBytes()),r.pools[n].start()),t<<=1;r.keyBytes=e.digest().getBytes(),e.start(),e.update(r.keyBytes);var i=e.digest().getBytes();r.key=r.plugin.formatKey(r.keyBytes),r.seed=r.plugin.formatSeed(i),r.generated=0}function c(e){var t=null;if("undefined"!=typeof window){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(t=function(e){return r.getRandomValues(e)})}var n=forge.util.createBuffer();if(t)for(;n.length()<e;){var i=Math.max(1,Math.min(e-n.length(),65536)/4),o=new Uint32Array(Math.floor(i));try{t(o);for(var s=0;s<o.length;++s)n.putInt32(o[s])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(n.length()<e)for(var a,c,u,f=Math.floor(65536*Math.random());n.length()<e;){c=16807*(65535&f),c+=(32767&(a=16807*(f>>16)))<<16,f=4294967295&(c=(2147483647&(c+=a>>15))+(c>>31));for(s=0;s<3;++s)u=f>>>(s<<3),u^=Math.floor(256*Math.random()),n.putByte(String.fromCharCode(255&u))}return n.getBytes(e)}return r.pools=i,r.pool=0,r.generate=function(e,t){if(!t)return r.generateSync(e);var n=r.plugin.cipher,i=r.plugin.increment,o=r.plugin.formatKey,s=r.plugin.formatSeed,c=forge.util.createBuffer();r.key=null,function u(f){if(f)return t(f);if(c.length()>=e)return t(null,c.getBytes(e));r.generated>1048575&&(r.key=null);if(null===r.key)return forge.util.nextTick(function(){!function(e){if(r.pools[0].messageLength>=32)return a(),e();var t=32-r.pools[0].messageLength<<5;r.seedFile(t,function(t,n){if(t)return e(t);r.collect(n),a(),e()})}(u)});var l=n(r.key,r.seed);r.generated+=l.length;c.putBytes(l);r.key=o(n(r.key,i(r.seed)));r.seed=s(n(r.key,r.seed));forge.util.setImmediate(u)}()},r.generateSync=function(e){var t=r.plugin.cipher,n=r.plugin.increment,i=r.plugin.formatKey,o=r.plugin.formatSeed;r.key=null;for(var a=forge.util.createBuffer();a.length()<e;){r.generated>1048575&&(r.key=null),null===r.key&&s();var c=t(r.key,r.seed);r.generated+=c.length,a.putBytes(c),r.key=i(t(r.key,n(r.seed))),r.seed=o(t(r.key,r.seed))}return a.getBytes(e)},t?(r.seedFile=function(e,r){t.randomBytes(e,function(e,t){if(e)return r(e);r(null,t.toString())})},r.seedFileSync=function(e){return t.randomBytes(e).toString()}):(r.seedFile=function(e,t){try{t(null,c(e))}catch(e){t(e)}},r.seedFileSync=c),r.collect=function(e){for(var t=e.length,n=0;n<t;++n)r.pools[r.pool].update(e.substr(n,1)),r.pool=31===r.pool?0:r.pool+1},r.collectInt=function(e,t){for(var n="",i=0;i<t;i+=8)n+=String.fromCharCode(e>>i&255);r.collect(n)},r.registerWorker=function(e){if(e===self)r.seedFile=function(e,t){self.addEventListener("message",function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",function(t){var n=t.data;n.forge&&n.forge.prng&&r.seedFile(n.forge.prng.needed,function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})})})}},r}}),random=createCommonjsModule(function(e){forge.random&&forge.random.getBytes?e.exports=forge.random:function(t){var r={},n=new Array(4),i=forge.util.createBuffer();function o(){var e=forge.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=forge.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),forge.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=forge.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return forge.aes._updateBlock(e,t,n,!1),i.putInt32(n[0]),i.putInt32(n[1]),i.putInt32(n[2]),i.putInt32(n[3]),i.getBytes()},r.increment=function(e){return++e[3],e},r.md=forge.md.sha256;var s=o(),a=null;if("undefined"!=typeof window){var c=window.crypto||window.msCrypto;c&&c.getRandomValues&&(a=function(e){return c.getRandomValues(e)})}if(!forge.util.isNodejs&&!a){if("undefined"==typeof window||window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var u="";for(var f in navigator)try{"string"==typeof navigator[f]&&(u+=navigator[f])}catch(e){}s.collect(u),u=null}t&&(t().mousemove(function(e){s.collectInt(e.clientX,16),s.collectInt(e.clientY,16)}),t().keypress(function(e){s.collectInt(e.charCode,8)}))}if(forge.random)for(var f in s)forge.random[f]=s[f];else forge.random=s;forge.random.createInstance=o,e.exports=forge.random}("undefined"!=typeof jQuery?jQuery:null)}),sha1_1=createCommonjsModule(function(e){var t=e.exports=forge.sha1=forge.sha1||{};forge.md.sha1=forge.md.algorithms.sha1=t,t.create=function(){n||(r=String.fromCharCode(128),r+=forge.util.fillString(String.fromCharCode(0),64),n=!0);var e=null,t=forge.util.createBuffer(),o=new Array(80),s={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var r=s.messageLengthSize/4,n=0;n<r;++n)s.fullMessageLength.push(0);return t=forge.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},s}};return s.start(),s.update=function(r,n){"utf8"===n&&(r=forge.util.encodeUtf8(r));var a=r.length;s.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=s.fullMessageLength.length-1;c>=0;--c)s.fullMessageLength[c]+=a[1],a[1]=a[0]+(s.fullMessageLength[c]/4294967296>>>0),s.fullMessageLength[c]=s.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(r),i(e,o,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var n=forge.util.createBuffer();n.putBytes(t.bytes());var a,c=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1;n.putBytes(r.substr(0,s.blockLength-c));for(var u=8*s.fullMessageLength[0],f=0;f<s.fullMessageLength.length-1;++f)u+=(a=8*s.fullMessageLength[f+1])/4294967296>>>0,n.putInt32(u>>>0),u=a>>>0;n.putInt32(u);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};i(l,o,n);var d=forge.util.createBuffer();return d.putInt32(l.h0),d.putInt32(l.h1),d.putInt32(l.h2),d.putInt32(l.h3),d.putInt32(l.h4),d},s};var r=null,n=!1;function i(e,t,r){for(var n,i,o,s,a,c,u,f=r.length();f>=64;){for(i=e.h0,o=e.h1,s=e.h2,a=e.h3,c=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<20;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<32;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<40;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<60;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(o&s|a&(o^s))+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<80;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+o|0,e.h2=e.h2+s|0,e.h3=e.h3+a|0,e.h4=e.h4+c|0,f-=64}}}),pkcs1_1=createCommonjsModule(function(e){var t=e.exports=forge.pkcs1=forge.pkcs1||{};function r(e,t,r){r||(r=forge.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}t.encode_rsa_oaep=function(e,t,n){var i,o,s,a;"string"==typeof n?(i=n,o=arguments[3]||void 0,s=arguments[4]||void 0):n&&(i=n.label||void 0,o=n.seed||void 0,s=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md)),s?s.start():s=forge.md.sha1.create(),a||(a=s);var c=Math.ceil(e.n.bitLength()/8),u=c-2*s.digestLength-2;if(t.length>u)throw(b=new Error("RSAES-OAEP input message length is too long.")).length=t.length,b.maxLength=u,b;i||(i=""),s.update(i,"raw");for(var f=s.digest(),l="",d=u-t.length,h=0;h<d;h++)l+="\0";var p=f.getBytes()+l+""+t;if(o){if(o.length!==s.digestLength){var b;throw(b=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,b.digestLength=s.digestLength,b}}else o=forge.random.getBytes(s.digestLength);var m=r(o,c-s.digestLength-1,a),g=forge.util.xorBytes(p,m,p.length),y=r(g,s.digestLength,a);return"\0"+forge.util.xorBytes(o,y,o.length)+g},t.decode_rsa_oaep=function(e,t,n){var i,o,s;"string"==typeof n?(i=n,o=arguments[3]||void 0):n&&(i=n.label||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(s=n.mgf1.md));var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a)throw(m=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,m.expectedLength=a,m;if(void 0===o?o=forge.md.sha1.create():o.start(),s||(s=o),a<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),o.update(i,"raw");for(var c=o.digest().getBytes(),u=t.charAt(0),f=t.substring(1,o.digestLength+1),l=t.substring(1+o.digestLength),d=r(l,o.digestLength,s),h=r(forge.util.xorBytes(f,d,f.length),a-o.digestLength-1,s),p=forge.util.xorBytes(l,h,l.length),b=p.substring(0,o.digestLength),m="\0"!==u,g=0;g<o.digestLength;++g)m|=c.charAt(g)!==b.charAt(g);for(var y=1,v=o.digestLength,_=o.digestLength;_<p.length;_++){var $=p.charCodeAt(_);m|=$&(y?65534:0),v+=y&=1&$^1}if(m||1!==p.charCodeAt(v))throw new Error("Invalid RSAES-OAEP padding.");return p.substring(v+1)}}),prime=createCommonjsModule(function(e){!function(){if(forge.prime)e.exports=forge.prime;else{var t=e.exports=forge.prime=forge.prime||{},r=forge.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,n){"function"==typeof t&&(n=t,t={});var i=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof i&&(i={name:i}),i.options=i.options||{};var o=t.prng||forge.random,c={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===i.name)return function(e,t,n,i){if("workers"in n)return function(e,t,n,i){if("undefined"==typeof Worker)return s(e,t,n,i);var o=a(e,t),c=n.workers,u=n.workLoad||100,f=30*u/8,l=n.workerScript||"forge/prime.worker.js";if(-1===c)return forge.util.estimateCores(function(e,t){e&&(t=2),c=t-1,d()});function d(){c=Math.max(1,c);for(var n=[],s=0;s<c;++s)n[s]=new Worker(l);for(var s=0;s<c;++s)n[s].addEventListener("message",h);var d=!1;function h(s){if(!d){var c=s.data;if(c.found){for(var l=0;l<n.length;++l)n[l].terminate();return d=!0,i(null,new r(c.prime,16))}o.bitLength()>e&&(o=a(e,t));var h=o.toString(16);s.target.postMessage({hex:h,workLoad:u}),o.dAddOffset(f,0)}}}d()}(e,t,n,i);return s(e,t,n,i)}(e,c,i.options,n);throw new Error("Invalid prime generation algorithm: "+i.name)}}function s(e,t,r,i){var o=a(e,t),s=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(o.bitLength());"millerRabinTests"in r&&(s=r.millerRabinTests);var c=10;"maxBlockTime"in r&&(c=r.maxBlockTime),function e(t,r,i,o,s,c,u){var f=+new Date;do{if(t.bitLength()>r&&(t=a(r,i)),t.isProbablePrime(s))return u(null,t);t.dAddOffset(n[o++%8],0)}while(c<0||+new Date-f<c);forge.util.setImmediate(function(){e(t,r,i,o,s,c,u)})}(o,e,t,0,s,c,i)}function a(e,t){var n=new r(e,t),s=e-1;return n.testBit(s)||n.bitwiseTo(r.ONE.shiftLeft(s),o,n),n.dAddOffset(31-n.mod(i).byteValue(),0),n}}()});if(void 0===BigInteger$1)var BigInteger$1=forge.jsbn.BigInteger;var asn1=forge.asn1;forge.pki=forge.pki||{};var rsa=forge.pki.rsa=forge.rsa=forge.rsa||{},pki=forge.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator=forge.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},emsaPkcs1v15encode$1=function(e){var t;if(!(e.algorithm in pki.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=pki.oids[e.algorithm];var n=asn1.oidToDer(t).getBytes(),i=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[]),o=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[]);o.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,n)),o.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,""));var s=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(o),i.value.push(s),asn1.toDer(i).getBytes()},_modPow=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var n;t.dP||(t.dP=t.d.mod(t.p.subtract(BigInteger$1.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(BigInteger$1.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{n=new BigInteger$1(forge.util.bytesToHex(forge.random.getBytes(t.n.bitLength()/8)),16)}while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(BigInteger$1.ONE));for(var i=(e=e.multiply(n.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),o=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(o)<0;)i=i.add(t.p);var s=i.subtract(o).multiply(t.qInv).mod(t.p).multiply(t.q).add(o);return s=s.multiply(n.modInverse(t.n)).mod(t.n)};function _encodePkcs1_v1_5(e,t,r){var n=forge.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s,a=i-3-e.length;if(0===r||1===r){s=0===r?0:255;for(var c=0;c<a;++c)n.putByte(s)}else for(;a>0;){var u=0,f=forge.random.getBytes(a);for(c=0;c<a;++c)0===(s=f.charCodeAt(c))?++u:n.putByte(s);a=u}return n.putByte(0),n.putBytes(e),n}function _decodePkcs1_v1_5(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),o=forge.util.createBuffer(e),s=o.getByte(),a=o.getByte();if(0!==s||r&&0!==a&&1!==a||!r&&2!=a||r&&0===a&&void 0===n)throw new Error("Encryption block is invalid.");var c=0;if(0===a){c=i-3-n;for(var u=0;u<c;++u)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===a)for(c=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++c}else if(2===a)for(c=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++c}if(0!==o.getByte()||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function _generateKeyPair(e,t,r){"function"==typeof t&&(r=t,t={});var n={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function i(){o(e.pBits,function(t,n){return t?r(t):(e.p=n,null!==e.q?s(t,e.q):void o(e.qBits,s))})}function o(e,t){forge.prime.generateProbablePrime(e,n,t)}function s(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var a=e.p;e.p=e.q,e.q=a}if(0!==e.p.subtract(BigInteger$1.ONE).gcd(e.e).compareTo(BigInteger$1.ONE))return e.p=null,void i();if(0!==e.q.subtract(BigInteger$1.ONE).gcd(e.e).compareTo(BigInteger$1.ONE))return e.q=null,void o(e.qBits,s);if(e.p1=e.p.subtract(BigInteger$1.ONE),e.q1=e.q.subtract(BigInteger$1.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(BigInteger$1.ONE))return e.p=e.q=null,void i();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void o(e.qBits,s);var c=e.e.modInverse(e.phi);e.keys={privateKey:pki.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:pki.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"prng"in t&&(n.prng=t.prng),i()}function _bnToBytes(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=forge.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function _getMillerRabinTests(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function _detectSubtleCrypto(e){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[e]}function _detectSubtleMsCrypto(e){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[e]}function _intToUint8Array(e){for(var t=forge.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}pki.rsa.encrypt=function(e,t,r){var n,i=r,o=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(i=2===r,n=_encodePkcs1_v1_5(e,t,r)):(n=forge.util.createBuffer()).putBytes(e);for(var s=new BigInteger$1(n.toHex(),16),a=_modPow(s,t,i).toString(16),c=forge.util.createBuffer(),u=o-Math.ceil(a.length/2);u>0;)c.putByte(0),--u;return c.putBytes(forge.util.hexToBytes(a)),c.getBytes()},pki.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=e.length,o.expected=i,o}var s=new BigInteger$1(forge.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=_modPow(s,t,r).toString(16),c=forge.util.createBuffer(),u=i-Math.ceil(a.length/2);u>0;)c.putByte(0),--u;return c.putBytes(forge.util.hexToBytes(a)),!1!==n?_decodePkcs1_v1_5(c.getBytes(),t,r):c.getBytes()},pki.rsa.createKeyPairGenerationState=function(e,t,r){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var n,i=(r=r||{}).prng||forge.random,o={nextBytes:function(e){for(var t=i.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},s=r.algorithm||"PRIMEINC";if("PRIMEINC"!==s)throw new Error("Invalid key generation algorithm: "+s);return(n={algorithm:s,state:0,bits:e,rng:o,eInt:t||65537,e:new BigInteger$1(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(n.eInt),n},pki.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new BigInteger$1(null);r.fromInt(30);for(var n,i=0,o=function(e,t){return e|t},s=+new Date,a=0;null===e.keys&&(t<=0||a<t);){if(0===e.state){var c=null===e.p?e.pBits:e.qBits,u=c-1;0===e.pqState?(e.num=new BigInteger$1(c,e.rng),e.num.testBit(u)||e.num.bitwiseTo(BigInteger$1.ONE.shiftLeft(u),o,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(_getMillerRabinTests(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(GCD_30_DELTA[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(BigInteger$1.ONE).gcd(e.e).compareTo(BigInteger$1.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(BigInteger$1.ONE),e.q1=e.q.subtract(BigInteger$1.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(BigInteger$1.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var f=e.e.modInverse(e.phi);e.keys={privateKey:pki.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:pki.rsa.setPublicKey(e.n,e.e)}}a+=(n=+new Date)-s,s=n}return null!==e.keys},pki.rsa.generateKeyPair=function(e,t,r,n){if(1===arguments.length?"object"==typeof e?(r=e,e=void 0):"function"==typeof e&&(n=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(n=t,t=void 0):"number"!=typeof t&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),n&&e>=256&&e<=16384&&(65537===t||3===t)){if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:_intToUint8Array(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return window.crypto.subtle.exportKey("pkcs8",e.privateKey)}).then(void 0,function(e){n(e)}).then(function(e){if(e){var t=pki.privateKeyFromAsn1(asn1.fromDer(forge.util.createBuffer(e)));n(null,{privateKey:t,publicKey:pki.setRsaPublicKey(t.n,t.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var i=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:_intToUint8Array(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return i.oncomplete=function(e){var t=e.target.result,r=window.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=pki.privateKeyFromAsn1(asn1.fromDer(forge.util.createBuffer(t)));n(null,{privateKey:r,publicKey:pki.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){n(e)}},void(i.onerror=function(e){n(e)})}}var o=pki.rsa.createKeyPairGenerationState(e,t,r);if(!n)return pki.rsa.stepKeyPairGenerationState(o,0),o.keys;_generateKeyPair(o,r,n)},pki.setRsaPublicKey=pki.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,n){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return _encodePkcs1_v1_5(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return forge.pkcs1.encode_rsa_oaep(t,e,n)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var i=t.encode(e,r,!0);return pki.rsa.encrypt(i,r,!0)},verify:function(e,t,n){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===n?n={verify:function(e,t){return t=_decodePkcs1_v1_5(t,r,!0),e===asn1.fromDer(t).value[1].value}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(e,t){return e===(t=_decodePkcs1_v1_5(t,r,!0))}});var i=pki.rsa.decrypt(t,r,!0,!1);return n.verify(e,i,r.n.bitLength())}};return r},pki.setRsaPrivateKey=pki.rsa.setPrivateKey=function(e,t,r,n,i,o,s,a){var c={n:e,e:t,d:r,p:n,q:i,dP:o,dQ:s,qInv:a,decrypt:function(e,t,r){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var n=pki.rsa.decrypt(e,c,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:_decodePkcs1_v1_5};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return forge.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(n,c,!1)},sign:function(e,t){var r=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:emsaPkcs1v15encode$1},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,c.n.bitLength());return pki.rsa.encrypt(n,c,r)}};return c},pki.wrapRsaPrivateKey=function(e){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(0).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(pki.oids.rsaEncryption).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,asn1.toDer(e).getBytes())])},pki.privateKeyFromAsn1=function(e){var t,r,n,i,o,s,a,c,u={},f=[];if(asn1.validate(e,privateKeyValidator,u,f)&&(e=asn1.fromDer(forge.util.createBuffer(u.privateKey))),u={},f=[],!asn1.validate(e,rsaPrivateKeyValidator,u,f)){var l=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw l.errors=f,l}return t=forge.util.createBuffer(u.privateKeyModulus).toHex(),r=forge.util.createBuffer(u.privateKeyPublicExponent).toHex(),n=forge.util.createBuffer(u.privateKeyPrivateExponent).toHex(),i=forge.util.createBuffer(u.privateKeyPrime1).toHex(),o=forge.util.createBuffer(u.privateKeyPrime2).toHex(),s=forge.util.createBuffer(u.privateKeyExponent1).toHex(),a=forge.util.createBuffer(u.privateKeyExponent2).toHex(),c=forge.util.createBuffer(u.privateKeyCoefficient).toHex(),pki.setRsaPrivateKey(new BigInteger$1(t,16),new BigInteger$1(r,16),new BigInteger$1(n,16),new BigInteger$1(i,16),new BigInteger$1(o,16),new BigInteger$1(s,16),new BigInteger$1(a,16),new BigInteger$1(c,16))},pki.privateKeyToAsn1=pki.privateKeyToRSAPrivateKey=function(e){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(0).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_bnToBytes(e.n)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_bnToBytes(e.e)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_bnToBytes(e.d)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_bnToBytes(e.p)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_bnToBytes(e.q)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_bnToBytes(e.dP)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_bnToBytes(e.dQ)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_bnToBytes(e.qInv))])},pki.publicKeyFromAsn1=function(e){var t={},r=[];if(asn1.validate(e,publicKeyValidator,t,r)){var n,i=asn1.derToOid(t.publicKeyOid);if(i!==pki.oids.rsaEncryption)throw(n=new Error("Cannot read public key. Unknown OID.")).oid=i,n;e=t.rsaPublicKey}if(r=[],!asn1.validate(e,rsaPublicKeyValidator,t,r))throw(n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,n;var o=forge.util.createBuffer(t.publicKeyModulus).toHex(),s=forge.util.createBuffer(t.publicKeyExponent).toHex();return pki.setRsaPublicKey(new BigInteger$1(o,16),new BigInteger$1(s,16))},pki.publicKeyToAsn1=pki.publicKeyToSubjectPublicKeyInfo=function(e){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(pki.oids.rsaEncryption).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.BITSTRING,!1,[pki.publicKeyToRSAPublicKey(e)])])},pki.publicKeyToRSAPublicKey=function(e){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_bnToBytes(e.n)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_bnToBytes(e.e))])};var des=forge.des=forge.des||{};function registerAlgorithm$1(e,t){forge.cipher.registerAlgorithm(e,function(){return new forge.des.Algorithm(e,t)})}forge.des.startEncrypting=function(e,t,r,n){var i=_createCipher$1({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},forge.des.createEncryptionCipher=function(e,t){return _createCipher$1({key:e,output:null,decrypt:!1,mode:t})},forge.des.startDecrypting=function(e,t,r,n){var i=_createCipher$1({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},forge.des.createDecryptionCipher=function(e,t){return _createCipher$1({key:e,output:null,decrypt:!0,mode:t})},forge.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return _updateBlock$1(r._keys,e,t,!1)},decrypt:function(e,t){return _updateBlock$1(r._keys,e,t,!0)}}}),r._init=!1},forge.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=forge.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=_createKeys(t),this._init=!0}},registerAlgorithm$1("DES-ECB",forge.cipher.modes.ecb),registerAlgorithm$1("DES-CBC",forge.cipher.modes.cbc),registerAlgorithm$1("DES-CFB",forge.cipher.modes.cfb),registerAlgorithm$1("DES-OFB",forge.cipher.modes.ofb),registerAlgorithm$1("DES-CTR",forge.cipher.modes.ctr),registerAlgorithm$1("3DES-ECB",forge.cipher.modes.ecb),registerAlgorithm$1("3DES-CBC",forge.cipher.modes.cbc),registerAlgorithm$1("3DES-CFB",forge.cipher.modes.cfb),registerAlgorithm$1("3DES-OFB",forge.cipher.modes.ofb),registerAlgorithm$1("3DES-CTR",forge.cipher.modes.ctr);var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],b=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,g=[],y=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,_=0;_<m;_++){var $=e.getInt32(),S=e.getInt32();$^=(t=252645135&($>>>4^S))<<4,$^=t=65535&((S^=t)>>>-16^$),$^=(t=858993459&($>>>2^(S^=t<<-16)))<<2,$^=t=65535&((S^=t)>>>-16^$),$^=(t=1431655765&($>>>1^(S^=t<<-16)))<<1,$^=t=16711935&((S^=t)>>>8^$),t=($^=(t=1431655765&($>>>1^(S^=t<<8)))<<1)<<8|(S^=t)>>>20&240,$=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=t;for(var E=0;E<y.length;++E){y[E]?($=$<<2|$>>>26,S=S<<2|S>>>26):($=$<<1|$>>>27,S=S<<1|S>>>27);var w=r[($&=-15)>>>28]|n[$>>>24&15]|i[$>>>20&15]|o[$>>>16&15]|s[$>>>12&15]|a[$>>>8&15]|c[$>>>4&15],C=u[(S&=-15)>>>28]|f[S>>>24&15]|l[S>>>20&15]|d[S>>>16&15]|h[S>>>12&15]|p[S>>>8&15]|b[S>>>4&15];t=65535&(C>>>16^w),g[v++]=w^t,g[v++]=C^t<<16}}return g}function _updateBlock$1(e,t,r,n){var i,o,s=32===e.length?3:9;i=3===s?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a=t[0],c=t[1];a^=(o=252645135&(a>>>4^c))<<4,a^=(o=65535&(a>>>16^(c^=o)))<<16,a^=o=858993459&((c^=o)>>>2^a),a^=o=16711935&((c^=o<<2)>>>8^a),a=(a^=(o=1431655765&(a>>>1^(c^=o<<8)))<<1)<<1|a>>>31,c=(c^=o)<<1|c>>>31;for(var u=0;u<s;u+=3){for(var f=i[u+1],l=i[u+2],d=i[u];d!=f;d+=l){var h=c^e[d],p=(c>>>4|c<<28)^e[d+1];o=a,a=c,c=o^(spfunction2[h>>>24&63]|spfunction4[h>>>16&63]|spfunction6[h>>>8&63]|spfunction8[63&h]|spfunction1[p>>>24&63]|spfunction3[p>>>16&63]|spfunction5[p>>>8&63]|spfunction7[63&p])}o=a,a=c,c=o}c=c>>>1|c<<31,c^=o=1431655765&((a=a>>>1|a<<31)>>>1^c),c^=(o=16711935&(c>>>8^(a^=o<<1)))<<8,c^=(o=858993459&(c>>>2^(a^=o)))<<2,c^=o=65535&((a^=o)>>>16^c),c^=o=252645135&((a^=o<<16)>>>4^c),a^=o<<4,r[0]=a,r[1]=c}function _createCipher$1(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=(t=e.decrypt?forge.cipher.createDecipher(r,e.key):forge.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof forge.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,n.call(t,r)},t}var crypto$5,hmac_1$1=createCommonjsModule(function(e){(e.exports=forge.hmac=forge.hmac||{}).create=function(){var e=null,t=null,r=null,n=null,i={start:function(i,o){if(null!==i)if("string"==typeof i){if(!((i=i.toLowerCase())in forge.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');t=forge.md.algorithms[i].create()}else t=i;if(null===o)o=e;else{if("string"==typeof o)o=forge.util.createBuffer(o);else if(forge.util.isArray(o)){var s=o;o=forge.util.createBuffer();for(var a=0;a<s.length;++a)o.putByte(s[a])}var c=o.length();c>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=forge.util.createBuffer(),n=forge.util.createBuffer(),c=o.length();for(a=0;a<c;++a){s=o.at(a);r.putByte(54^s),n.putByte(92^s)}if(c<t.blockLength)for(s=t.blockLength-c,a=0;a<s;++a)r.putByte(54),n.putByte(92);e=o,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(n),t.update(e),t.digest()}};return i.digest=i.getMac,i}}),pkcs5=forge.pkcs5=forge.pkcs5||{};forge.util.isNodejs&&!forge.options.usePureJavaScript&&(crypto$5=crypto$l);var pbkdf2=forge.pbkdf2=pkcs5.pbkdf2=function(e,t,r,n,i,o){if("function"==typeof i&&(o=i,i=null),forge.util.isNodejs&&!forge.options.usePureJavaScript&&crypto$5.pbkdf2&&(null===i||"object"!=typeof i)&&(crypto$5.pbkdf2Sync.length>4||!i||"sha1"===i))return"string"!=typeof i&&(i="sha1"),e=new Buffer(e,"binary"),t=new Buffer(t,"binary"),o?4===crypto$5.pbkdf2Sync.length?crypto$5.pbkdf2(e,t,r,n,function(e,t){if(e)return o(e);o(null,t.toString("binary"))}):crypto$5.pbkdf2(e,t,r,n,i,function(e,t){if(e)return o(e);o(null,t.toString("binary"))}):4===crypto$5.pbkdf2Sync.length?crypto$5.pbkdf2Sync(e,t,r,n).toString("binary"):crypto$5.pbkdf2Sync(e,t,r,n,i).toString("binary");if(null==i&&(i="sha1"),"string"==typeof i){if(!(i in forge.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=forge.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var c=Math.ceil(n/s),u=n-(c-1)*s,f=forge.hmac.create();f.start(i,e);var l,d,h,p="";if(!o){for(var b=1;b<=c;++b){f.start(null,null),f.update(t),f.update(forge.util.int32ToBytes(b)),l=h=f.digest().getBytes();for(var m=2;m<=r;++m)f.start(null,null),f.update(h),d=f.digest().getBytes(),l=forge.util.xorBytes(l,d,s),h=d;p+=b<c?l:l.substr(0,u)}return p}b=1;function g(){if(b>c)return o(null,p);f.start(null,null),f.update(t),f.update(forge.util.int32ToBytes(b)),l=h=f.digest().getBytes(),m=2,y()}function y(){if(m<=r)return f.start(null,null),f.update(h),d=f.digest().getBytes(),l=forge.util.xorBytes(l,d,s),h=d,++m,forge.util.setImmediate(y);p+=b<c?l:l.substr(0,u),++b,g()}g()},pem_1=createCommonjsModule(function(e){var t=e.exports=forge.pem=forge.pem||{};function r(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var o=0,s=-1;for(i=0;i<t.length;++i,++o)if(o>65&&-1!==s){var a=t[s];","===a?(++s,t=t.substr(0,s)+"\r\n "+t.substr(s)):t=t.substr(0,s)+"\r\n"+a+t.substr(s+1),o=i-s-1,s=-1,++i}else" "!==t[i]&&"\t"!==t[i]&&","!==t[i]||(s=i);return t}function n(e){return e.replace(/^\s+/,"")}t.encode=function(e,t){t=t||{};var n,i="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(i+=r(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(i+=r(n={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),i+=r(n)),e.headers)for(var o=0;o<e.headers.length;++o)i+=r(e.headers[o]);return e.procType&&(i+="\r\n"),i+=forge.util.encode64(e.body,t.maxline||64)+"\r\n",i+="-----END "+e.type+"-----\r\n"},t.decode=function(e){for(var t,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;t=i.exec(e);){var a={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge.util.decode64(t[3])};if(r.push(a),t[2]){for(var c=t[2].split(s),u=0;t&&u<c.length;){for(var f=c[u].replace(/\s+$/,""),l=u+1;l<c.length;++l){var d=c[l];if(!/\s/.test(d[0]))break;f+=d,u=l}if(t=f.match(o)){for(var h={name:t[1],values:[]},p=t[2].split(","),b=0;b<p.length;++b)h.values.push(n(p[b]));if(a.procType)if(a.contentDomain||"Content-Domain"!==h.name)if(a.dekInfo||"DEK-Info"!==h.name)a.headers.push(h);else{if(0===h.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:p[0],parameters:p[1]||null}}else a.contentDomain=p[0]||"";else{if("Proc-Type"!==h.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==h.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:p[0],type:p[1]}}}++u}if("ENCRYPTED"===a.procType&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}}),piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s$2=[1,2,3,5],rol=function(e,t){return e<<t&65535|(65535&e)>>16-t},ror=function(e,t){return(65535&e)>>t|e<<16-t&65535},rc2=forge.rc2=forge.rc2||{};forge.rc2.expandKey=function(e,t){"string"==typeof e&&(e=forge.util.createBuffer(e)),t=t||128;var r,n=e,i=e.length(),o=t,s=Math.ceil(o/8),a=255>>(7&o);for(r=i;r<128;r++)n.putByte(piTable[n.at(r-1)+n.at(r-i)&255]);for(n.setAt(128-s,piTable[n.at(128-s)&a]),r=127-s;r>=0;r--)n.setAt(r,piTable[n.at(r+1)^n.at(r+s)]);return n};var createCipher=function(e,t,r){var n,i,o,s,a=!1,c=null,u=null,f=null,l=[];for(e=forge.rc2.expandKey(e,t),o=0;o<64;o++)l.push(e.getInt16Le());r?(n=function(e){for(o=0;o<4;o++)e[o]+=l[s]+(e[(o+3)%4]&e[(o+2)%4])+(~e[(o+3)%4]&e[(o+1)%4]),e[o]=rol(e[o],s$2[o]),s++},i=function(e){for(o=0;o<4;o++)e[o]+=l[63&e[(o+3)%4]]}):(n=function(e){for(o=3;o>=0;o--)e[o]=ror(e[o],s$2[o]),e[o]-=l[s]+(e[(o+3)%4]&e[(o+2)%4])+(~e[(o+3)%4]&e[(o+1)%4]),s--},i=function(e){for(o=3;o>=0;o--)e[o]-=l[63&e[(o+3)%4]]});var d=function(e){var t=[];for(o=0;o<4;o++){var n=c.getInt16Le();null!==f&&(r?n^=f.getInt16Le():f.putInt16Le(n)),t.push(65535&n)}s=r?0:63;for(var i=0;i<e.length;i++)for(var a=0;a<e[i][0];a++)e[i][1](t);for(o=0;o<4;o++)null!==f&&(r?f.putInt16Le(t[o]):t[o]^=f.getInt16Le()),u.putInt16Le(t[o])},h=null;return h={start:function(e,t){e&&"string"==typeof e&&(e=forge.util.createBuffer(e)),a=!1,c=forge.util.createBuffer(),u=t||new forge.util.createBuffer,f=e,h.output=u},update:function(e){for(a||c.putBuffer(e);c.length()>=8;)d([[5,n],[1,i],[6,n],[1,i],[5,n]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,c,!r);else{var n=8===c.length()?8:8-c.length();c.fillWithByte(n,n)}if(t&&(a=!0,h.update()),!r&&(t=0===c.length()))if(e)t=e(8,u,!r);else{var i=u.length(),o=u.at(i-1);o>i?t=!1:u.truncate(o)}return t}}};if(forge.rc2.startEncrypting=function(e,t,r){var n=forge.rc2.createEncryptionCipher(e,128);return n.start(t,r),n},forge.rc2.createEncryptionCipher=function(e,t){return createCipher(e,t,!0)},forge.rc2.startDecrypting=function(e,t,r){var n=forge.rc2.createDecryptionCipher(e,128);return n.start(t,r),n},forge.rc2.createDecryptionCipher=function(e,t){return createCipher(e,t,!1)},void 0===BigInteger$2)var BigInteger$2=forge.jsbn.BigInteger;var asn1$1=forge.asn1,pki$1=forge.pki=forge.pki||{},pbe=pki$1.pbe=forge.pbe=forge.pbe||{},oids=pki$1.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"iterations"}]};function hash$4(e,t){return e.start().update(t).digest().getBytes()}function prfOidToMessageDigest(e){var t;if(e){if(!(t=pki$1.oids[asn1$1.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return prfAlgorithmToMessageDigest(t)}function prfAlgorithmToMessageDigest(e){var t=forge.md;switch(e){case"hmacWithSHA224":t=forge.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(t&&e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function createPbkdf2Params(e,t,r,n){var i=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,e),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,t.getBytes())]);return"hmacWithSHA1"!==n&&i.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,forge.util.hexToBytes(r.toString(16))),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids[n]).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")])),i}pki$1.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n,i,o,s=forge.random.getBytesSync(r.saltSize),a=r.count,c=asn1$1.integerToDer(a);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var u,f,l;switch(r.algorithm){case"aes128":n=16,u=16,f=oids["aes128-CBC"],l=forge.aes.createEncryptionCipher;break;case"aes192":n=24,u=16,f=oids["aes192-CBC"],l=forge.aes.createEncryptionCipher;break;case"aes256":n=32,u=16,f=oids["aes256-CBC"],l=forge.aes.createEncryptionCipher;break;case"des":n=8,u=8,f=oids.desCBC,l=forge.des.createEncryptionCipher;break;default:throw(g=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,g}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),h=prfAlgorithmToMessageDigest(d),p=forge.pkcs5.pbkdf2(t,s,a,n,h),b=forge.random.getBytesSync(u);(y=l(p)).start(b),y.update(asn1$1.toDer(e)),y.finish(),o=y.output.getBytes();var m=createPbkdf2Params(s,c,n,d);i=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(oids.pkcs5PBES2).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(oids.pkcs5PBKDF2).getBytes()),m]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(f).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,b)])])])}else{var g;if("3des"!==r.algorithm)throw(g=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,g;n=24;var y,v=new forge.util.ByteBuffer(s);p=pki$1.pbe.generatePkcs12Key(t,v,1,a,n),b=pki$1.pbe.generatePkcs12Key(t,v,2,a,n);(y=forge.des.createEncryptionCipher(p)).start(b),y.update(asn1$1.toDer(e)),y.finish(),o=y.output.getBytes(),i=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,s),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,c.getBytes())])])}return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[i,asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,o)])},pki$1.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!asn1$1.validate(e,encryptedPrivateKeyValidator,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=asn1$1.derToOid(n.encryptionOid),a=pki$1.pbe.getCipher(s,n.encryptionParams,t),c=forge.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=asn1$1.fromDer(a.output)),r},pki$1.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:asn1$1.toDer(e).getBytes()};return forge.pem.encode(r,{maxline:t})},pki$1.encryptedPrivateKeyFromPem=function(e){var t=forge.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1$1.fromDer(t.body)},pki$1.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var n=pki$1.wrapRsaPrivateKey(pki$1.privateKeyToAsn1(e));return n=pki$1.encryptPrivateKeyInfo(n,t,r),pki$1.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=forge.random.getBytesSync(16),a=forge.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=forge.random.getBytesSync(16),a=forge.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=forge.random.getBytesSync(16),a=forge.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=forge.random.getBytesSync(8),a=forge.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=forge.random.getBytesSync(8),a=forge.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=a(forge.pbe.opensslDeriveBytes(t,o.substr(0,8),s));u.start(o),u.update(asn1$1.toDer(pki$1.privateKeyToAsn1(e))),u.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:forge.util.bytesToHex(o).toUpperCase()},body:u.output.getBytes()};return forge.pem.encode(f)},pki$1.decryptRsaPrivateKey=function(e,t){var r=null,n=forge.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==n.type&&"PRIVATE KEY"!==n.type&&"RSA PRIVATE KEY"!==n.type)throw(s=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=s,s;if(n.procType&&"ENCRYPTED"===n.procType.type){var i,o;switch(n.dekInfo.algorithm){case"DES-CBC":i=8,o=forge.des.createDecryptionCipher;break;case"DES-EDE3-CBC":i=24,o=forge.des.createDecryptionCipher;break;case"AES-128-CBC":i=16,o=forge.aes.createDecryptionCipher;break;case"AES-192-CBC":i=24,o=forge.aes.createDecryptionCipher;break;case"AES-256-CBC":i=32,o=forge.aes.createDecryptionCipher;break;case"RC2-40-CBC":i=5,o=function(e){return forge.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":i=8,o=function(e){return forge.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":i=16,o=function(e){return forge.rc2.createDecryptionCipher(e,128)};break;default:var s;throw(s=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".')).algorithm=n.dekInfo.algorithm,s}var a=forge.util.hexToBytes(n.dekInfo.parameters),c=o(forge.pbe.opensslDeriveBytes(t,a.substr(0,8),i));if(c.start(a),c.update(forge.util.createBuffer(n.body)),!c.finish())return r;r=c.output.getBytes()}else r=n.body;return null!==(r="ENCRYPTED PRIVATE KEY"===n.type?pki$1.decryptPrivateKeyInfo(asn1$1.fromDer(r),t):asn1$1.fromDer(r))&&(r=pki$1.privateKeyFromAsn1(r)),r},pki$1.pbe.generatePkcs12Key=function(e,t,r,n,i,o){var s,a;if(null==o){if(!("sha1"in forge.md))throw new Error('"sha1" hash algorithm unavailable.');o=forge.md.sha1.create()}var c=o.digestLength,u=o.blockLength,f=new forge.util.ByteBuffer,l=new forge.util.ByteBuffer;if(null!=e){for(a=0;a<e.length;a++)l.putInt16(e.charCodeAt(a));l.putInt16(0)}var d=l.length(),h=t.length(),p=new forge.util.ByteBuffer;p.fillWithByte(r,u);var b=u*Math.ceil(h/u),m=new forge.util.ByteBuffer;for(a=0;a<b;a++)m.putByte(t.at(a%h));var g=u*Math.ceil(d/u),y=new forge.util.ByteBuffer;for(a=0;a<g;a++)y.putByte(l.at(a%d));var v=m;v.putBuffer(y);for(var _=Math.ceil(i/c),$=1;$<=_;$++){var S=new forge.util.ByteBuffer;S.putBytes(p.bytes()),S.putBytes(v.bytes());for(var E=0;E<n;E++)o.start(),o.update(S.getBytes()),S=o.digest();var w=new forge.util.ByteBuffer;for(a=0;a<u;a++)w.putByte(S.at(a%c));var C=Math.ceil(h/u)+Math.ceil(d/u),A=new forge.util.ByteBuffer;for(s=0;s<C;s++){var k=new forge.util.ByteBuffer(v.getBytes(u)),T=511;for(a=w.length()-1;a>=0;a--)T>>=8,T+=w.at(a)+k.at(a),k.setAt(a,255&T);A.putBuffer(k)}v=A,f.putBuffer(S)}return f.truncate(f.length()-i),f},pki$1.pbe.getCipher=function(e,t,r){switch(e){case pki$1.oids.pkcs5PBES2:return pki$1.pbe.getCipherForPBES2(e,t,r);case pki$1.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki$1.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki$1.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},pki$1.pbe.getCipherForPBES2=function(e,t,r){var n,i={},o=[];if(!asn1$1.validate(t,PBES2AlgorithmsValidator,i,o))throw(n=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=o,n;if((e=asn1$1.derToOid(i.kdfOid))!==pki$1.oids.pkcs5PBKDF2)throw(n=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,n.supportedOids=["pkcs5PBKDF2"],n;if((e=asn1$1.derToOid(i.encOid))!==pki$1.oids["aes128-CBC"]&&e!==pki$1.oids["aes192-CBC"]&&e!==pki$1.oids["aes256-CBC"]&&e!==pki$1.oids["des-EDE3-CBC"]&&e!==pki$1.oids.desCBC)throw(n=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,n.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],n;var s,a,c=i.kdfSalt,u=forge.util.createBuffer(i.kdfIterationCount);switch(u=u.getInt(u.length()<<3),pki$1.oids[e]){case"aes128-CBC":s=16,a=forge.aes.createDecryptionCipher;break;case"aes192-CBC":s=24,a=forge.aes.createDecryptionCipher;break;case"aes256-CBC":s=32,a=forge.aes.createDecryptionCipher;break;case"des-EDE3-CBC":s=24,a=forge.des.createDecryptionCipher;break;case"desCBC":s=8,a=forge.des.createDecryptionCipher}var f=prfOidToMessageDigest(i.prfOid),l=forge.pkcs5.pbkdf2(r,c,u,s,f),d=i.encIv,h=a(l);return h.start(d),h},pki$1.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!asn1$1.validate(t,pkcs12PbeParamsValidator,n,i))throw(f=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=i,f;var o,s,a,c=forge.util.createBuffer(n.salt),u=forge.util.createBuffer(n.iterations);switch(u=u.getInt(u.length()<<3),e){case pki$1.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:o=24,s=8,a=forge.des.startDecrypting;break;case pki$1.oids["pbewithSHAAnd40BitRC2-CBC"]:o=5,s=8,a=function(e,t){var r=forge.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var f;throw(f=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,f}var l=prfOidToMessageDigest(n.prfOid),d=pki$1.pbe.generatePkcs12Key(r,c,1,u,o,l);return l.start(),a(d,pki$1.pbe.generatePkcs12Key(r,c,2,u,s,l))},pki$1.pbe.opensslDeriveBytes=function(e,t,r,n){if(null==n){if(!("md5"in forge.md))throw new Error('"md5" hash algorithm unavailable.');n=forge.md.md5.create()}null===t&&(t="");for(var i=[hash$4(n,e+t)],o=16,s=1;o<r;++s,o+=16)i.push(hash$4(n,i[s-1]+e+t));return i.join("").substr(0,r)};var sha3$4=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),murmurHash3js$1=createCommonjsModule(function(e,t){!function(r,n){var i={version:"3.0.1",x86:{},x64:{}};function o(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function s(e,t){return e<<t|e>>>32-t}function a(e){return e=o(e^=e>>>16,2246822507),e=o(e^=e>>>13,3266489909),e^=e>>>16}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function f(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function l(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function d(e,t){return[e[0]^t[0],e[1]^t[1]]}function h(e){return e=d(e,[0,e[0]>>>1]),e=d(e=u(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=d(e=u(e,[3301882366,444984403]),[0,e[0]>>>1])}i.x86.hash32=function(e,t){t=t||0;for(var r=(e=e||"").length%4,n=e.length-r,i=t,c=0,u=3432918353,f=461845907,l=0;l<n;l+=4)c=o(c=255&e.charCodeAt(l)|(255&e.charCodeAt(l+1))<<8|(255&e.charCodeAt(l+2))<<16|(255&e.charCodeAt(l+3))<<24,u),c=o(c=s(c,15),f),i=o(i=s(i^=c,13),5)+3864292196;switch(c=0,r){case 3:c^=(255&e.charCodeAt(l+2))<<16;case 2:c^=(255&e.charCodeAt(l+1))<<8;case 1:c=o(c^=255&e.charCodeAt(l),u),i^=c=o(c=s(c,15),f)}return(i=a(i^=e.length))>>>0},i.x86.hash128=function(e,t){t=t||0;for(var r=(e=e||"").length%16,n=e.length-r,i=t,c=t,u=t,f=t,l=0,d=0,h=0,p=0,b=597399067,m=2869860233,g=951274213,y=2716044179,v=0;v<n;v+=16)l=255&e.charCodeAt(v)|(255&e.charCodeAt(v+1))<<8|(255&e.charCodeAt(v+2))<<16|(255&e.charCodeAt(v+3))<<24,d=255&e.charCodeAt(v+4)|(255&e.charCodeAt(v+5))<<8|(255&e.charCodeAt(v+6))<<16|(255&e.charCodeAt(v+7))<<24,h=255&e.charCodeAt(v+8)|(255&e.charCodeAt(v+9))<<8|(255&e.charCodeAt(v+10))<<16|(255&e.charCodeAt(v+11))<<24,p=255&e.charCodeAt(v+12)|(255&e.charCodeAt(v+13))<<8|(255&e.charCodeAt(v+14))<<16|(255&e.charCodeAt(v+15))<<24,l=s(l=o(l,b),15),i=s(i^=l=o(l,m),19),i=o(i+=c,5)+1444728091,d=s(d=o(d,m),16),c=s(c^=d=o(d,g),17),c=o(c+=u,5)+197830471,h=s(h=o(h,g),17),u=s(u^=h=o(h,y),15),u=o(u+=f,5)+2530024501,p=s(p=o(p,y),18),f=s(f^=p=o(p,b),13),f=o(f+=i,5)+850148119;switch(l=0,d=0,h=0,p=0,r){case 15:p^=e.charCodeAt(v+14)<<16;case 14:p^=e.charCodeAt(v+13)<<8;case 13:p=o(p^=e.charCodeAt(v+12),y),f^=p=o(p=s(p,18),b);case 12:h^=e.charCodeAt(v+11)<<24;case 11:h^=e.charCodeAt(v+10)<<16;case 10:h^=e.charCodeAt(v+9)<<8;case 9:h=o(h^=e.charCodeAt(v+8),g),u^=h=o(h=s(h,17),y);case 8:d^=e.charCodeAt(v+7)<<24;case 7:d^=e.charCodeAt(v+6)<<16;case 6:d^=e.charCodeAt(v+5)<<8;case 5:d=o(d^=e.charCodeAt(v+4),m),c^=d=o(d=s(d,16),g);case 4:l^=e.charCodeAt(v+3)<<24;case 3:l^=e.charCodeAt(v+2)<<16;case 2:l^=e.charCodeAt(v+1)<<8;case 1:l=o(l^=e.charCodeAt(v),b),i^=l=o(l=s(l,15),m)}return i^=e.length,i+=c^=e.length,i+=u^=e.length,c+=i+=f^=e.length,u+=i,f+=i,i=a(i),i+=c=a(c),i+=u=a(u),c+=i+=f=a(f),u+=i,f+=i,("00000000"+(i>>>0).toString(16)).slice(-8)+("00000000"+(c>>>0).toString(16)).slice(-8)+("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)},i.x64.hash128=function(e,t){t=t||0;for(var r=(e=e||"").length%16,n=e.length-r,i=[0,t],o=[0,t],s=[0,0],a=[0,0],p=[2277735313,289559509],b=[1291169091,658871167],m=0;m<n;m+=16)s=[255&e.charCodeAt(m+4)|(255&e.charCodeAt(m+5))<<8|(255&e.charCodeAt(m+6))<<16|(255&e.charCodeAt(m+7))<<24,255&e.charCodeAt(m)|(255&e.charCodeAt(m+1))<<8|(255&e.charCodeAt(m+2))<<16|(255&e.charCodeAt(m+3))<<24],a=[255&e.charCodeAt(m+12)|(255&e.charCodeAt(m+13))<<8|(255&e.charCodeAt(m+14))<<16|(255&e.charCodeAt(m+15))<<24,255&e.charCodeAt(m+8)|(255&e.charCodeAt(m+9))<<8|(255&e.charCodeAt(m+10))<<16|(255&e.charCodeAt(m+11))<<24],s=f(s=u(s,p),31),i=c(i=f(i=d(i,s=u(s,b)),27),o),i=c(u(i,[0,5]),[0,1390208809]),a=f(a=u(a,b),33),o=c(o=f(o=d(o,a=u(a,p)),31),i),o=c(u(o,[0,5]),[0,944331445]);switch(s=[0,0],a=[0,0],r){case 15:a=d(a,l([0,e.charCodeAt(m+14)],48));case 14:a=d(a,l([0,e.charCodeAt(m+13)],40));case 13:a=d(a,l([0,e.charCodeAt(m+12)],32));case 12:a=d(a,l([0,e.charCodeAt(m+11)],24));case 11:a=d(a,l([0,e.charCodeAt(m+10)],16));case 10:a=d(a,l([0,e.charCodeAt(m+9)],8));case 9:a=u(a=d(a,[0,e.charCodeAt(m+8)]),b),o=d(o,a=u(a=f(a,33),p));case 8:s=d(s,l([0,e.charCodeAt(m+7)],56));case 7:s=d(s,l([0,e.charCodeAt(m+6)],48));case 6:s=d(s,l([0,e.charCodeAt(m+5)],40));case 5:s=d(s,l([0,e.charCodeAt(m+4)],32));case 4:s=d(s,l([0,e.charCodeAt(m+3)],24));case 3:s=d(s,l([0,e.charCodeAt(m+2)],16));case 2:s=d(s,l([0,e.charCodeAt(m+1)],8));case 1:s=u(s=d(s,[0,e.charCodeAt(m)]),p),i=d(i,s=u(s=f(s,31),b))}return i=c(i=d(i,[0,e.length]),o=d(o,[0,e.length])),o=c(o,i),i=c(i=h(i),o=h(o)),o=c(o,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=i),t.murmurHash3=i}()}),murmurHash3js_1$1=murmurHash3js$1.murmurHash3,murmurhash3js=murmurHash3js$1,toCallback=e=>(function(t,r){let n;try{n=e(t)}catch(e){return void process.nextTick(r,e)}process.nextTick(r,null,n)}),toBuf=(e,t)=>r=>{let n=e(r,t);return Buffer.from(n,"hex")},fromString$1=(e,t)=>r=>{const n=Buffer.isBuffer(r)?r.toString():r;return e(n,t)},fromNumberTo32BitBuf$6=(e,t)=>r=>{let n=e(r,t);const i=new Array(4);for(let e=0;e<4;e++)i[e]=255&n,n>>=8;return Buffer.from(i)},utils$p={toCallback:toCallback,toBuf:toBuf,fromString:fromString$1,fromNumberTo32BitBuf:fromNumberTo32BitBuf$6};const toCallback$1=utils$p.toCallback,sha1$2=toCallback$1(e=>crypto$l.createHash("sha1").update(e).digest()),sha2256=toCallback$1(e=>crypto$l.createHash("sha256").update(e).digest()),sha2512=toCallback$1(e=>crypto$l.createHash("sha512").update(e).digest());var cryptoSha12={sha1:sha1$2,sha2256:sha2256,sha2512:sha2512};const toCallback$2=utils$p.toCallback,minB$3=45569,minS$3=45633,blake2b$4={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$4={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$3=(e,t)=>toCallback$2(r=>{const n=t.init(e,null);return t.update(n,r),Buffer.from(t.digest(n))});var blake_1$3=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$3(t+1,blake2b$4);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$3(t+1,blake2s$4)};const toCallback$3=utils$p.toCallback,toBuf$1=utils$p.toBuf,fromString$2=utils$p.fromString,fromNumberTo32BitBuf$7=utils$p.fromNumberTo32BitBuf,dblSha2256=(e,t)=>{cryptoSha12.sha2256(e,(e,r)=>{e&&t(e),cryptoSha12.sha2256(Buffer.from(r),t)})};var crypto$6={sha1:cryptoSha12.sha1,sha2256:cryptoSha12.sha2256,sha2512:cryptoSha12.sha2512,sha3512:toCallback$3(toBuf$1(sha3$4.sha3_512)),sha3384:toCallback$3(toBuf$1(sha3$4.sha3_384)),sha3256:toCallback$3(toBuf$1(sha3$4.sha3_256)),sha3224:toCallback$3(toBuf$1(sha3$4.sha3_224)),shake128:toCallback$3(toBuf$1(sha3$4.shake_128,128)),shake256:toCallback$3(toBuf$1(sha3$4.shake_256,256)),keccak224:toCallback$3(toBuf$1(sha3$4.keccak_224)),keccak256:toCallback$3(toBuf$1(sha3$4.keccak_256)),keccak384:toCallback$3(toBuf$1(sha3$4.keccak_384)),keccak512:toCallback$3(toBuf$1(sha3$4.keccak_512)),murmur3128:toCallback$3(toBuf$1(fromString$2(murmurhash3js.x64.hash128))),murmur332:toCallback$3(fromNumberTo32BitBuf$7(fromString$2(murmurhash3js.x86.hash32))),addBlake:blake_1$3,dblSha2256:dblSha2256},src$p=Multihashing$3;function Multihashing$3(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");Multihashing$3.digest(e,t,r,(e,i)=>{if(e)return n(e);n(null,src.encode(i,t,r))})}Multihashing$3.Buffer=Buffer,Multihashing$3.multihash=src,Multihashing$3.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=Multihashing$3.createHash(t)}catch(e){return o(e)}i(e,o)},Multihashing$3.createHash=function(e){if(e=src.coerceCode(e),!Multihashing$3.functions[e])throw new Error("multihash function "+e+" not yet supported");return Multihashing$3.functions[e]},Multihashing$3.functions={17:crypto$6.sha1,18:crypto$6.sha2256,19:crypto$6.sha2512,20:crypto$6.sha3512,21:crypto$6.sha3384,22:crypto$6.sha3256,23:crypto$6.sha3224,24:crypto$6.shake128,25:crypto$6.shake256,26:crypto$6.keccak224,27:crypto$6.keccak256,28:crypto$6.keccak384,29:crypto$6.keccak512,34:crypto$6.murmur3128,35:crypto$6.murmur332,86:crypto$6.dblSha2256},crypto$6.addBlake(Multihashing$3.functions);var nextTick=createCommonjsModule(function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),r=setImmediate_1.hasNextTick?process.nextTick:setImmediate_1.hasSetImmediate?setImmediate:setImmediate_1.fallback,t.default=(0,setImmediate_1.wrap)(r),e.exports=t.default});unwrapExports(nextTick);const{randomBytes:randomBytes}=crypto$l;var random$1=randomBytes,randomBytes_1$1=function(e){if(!e||"number"!=typeof e)throw new Error("first argument must be a Number bigger than 0");return random$1(e)},ursaNative=bindings_1("ursaNative"),RsaWrap=ursaNative.RsaWrap,textToNid=ursaNative.textToNid,BASE64="base64",BINARY="binary",HEX="hex",STRING="string",UTF8="utf8",UTF16="utf16le",MD5="md5",PEM_REGEX=/^(-----BEGIN (.*) KEY-----\r?\n[:\s,-\/+=a-zA-Z0-9\r\n]*\r?\n-----END \2 KEY-----\r?\n)/m,theUnsealer=["ursa unsealer"];function isStringOrBuffer(e){return typeof e===STRING||Buffer.isBuffer(e)}function identifyPemType(e){var t=encodeBuffer(e,UTF8),r=PEM_REGEX.exec(t);if(r)return r[2]}function isPublicKeyPem(e){return"PUBLIC"==identifyPemType(e)}function isPrivateKeyPem(e){return"RSA PRIVATE"==identifyPemType(e)}function toSshBigint(e){var t=0!=(128&e[0]),r=e.length+(t?1:0),n=new Buffer(r+4),i=0;return n.writeUInt32BE(r,i),i+=4,t&&(n[i]=0,i++),e.copy(n,i),n}function createSshPublicKey(e){var t=toSshBigint(e.getExponent()),r=toSshBigint(e.getModulus()),n=toSshBigint(new Buffer("ssh-rsa",UTF8)),i=new Buffer(n.length+r.length+t.length),o=0;return n.copy(i,o),o+=n.length,t.copy(i,o),o+=t.length,r.copy(i,o),i}function validateEncoding(e){switch(e){case BASE64:case BINARY:case HEX:case UTF16:case UTF8:break;default:throw new Error("Invalid encoding: "+e)}}function encodeBuffer(e,t){return void 0===t?e:(validateEncoding(t),e.toString(t))}function decodeString(e,t){return void 0===e||Buffer.isBuffer(e)?e:(void 0===t&&(t=UTF8),validateEncoding(t),new Buffer(e,t))}function openSshPublicKey(e,t){Buffer.isBuffer(e)||(e="ssh"===e.substr(0,3)?e.split(" ")[1]:e,e=new Buffer(e,t||"base64"));var r=function(e){for(var t=[],r=3;e.length;){var n=e.readInt32BE(0),i=e.slice(4,n+4);if(e=e.slice(4+n),t.push(i),!--r)break}return{modulus:t[2],exponent:t[1],type:t[0]}}(e),n=new RsaWrap;if("ssh-rsa"!=r.type)throw new TypeError('Only "ssh-rsa" format supported');return n.openPublicSshKey(r.modulus,r.exponent),PublicKey(n)}function PublicKey(e){var t;function r(t,r,n,i){return t=decodeString(t,r),i=void 0===i?ursaNative.RSA_PKCS1_PADDING:i,encodeBuffer(e.publicDecrypt(t,i),n)}return t={encrypt:function(t,r,n,i){return t=decodeString(t,r),i=void 0===i?ursaNative.RSA_PKCS1_OAEP_PADDING:i,encodeBuffer(e.publicEncrypt(t,i),n)},getExponent:function(t){return encodeBuffer(e.getExponent(),t)},getModulus:function(t){return encodeBuffer(e.getModulus(),t)},hashAndVerify:function(n,i,o,s,a,c){if(a){o=r(o,s,void 0,ursaNative.RSA_NO_PADDING);var u=crypto$l.createHash(n);return u.update(decodeString(i,s)),i=new Buffer(u.digest(BINARY),BINARY),e.verifyPSSPadding(textToNid(n),i,o,void 0===c?ursaNative.RSA_PKCS1_SALT_LEN_HLEN:c)}var f=createVerifier(n);return f.update(i,s),f.verify(t,o,s)},publicDecrypt:r,toPublicPem:function(t){return encodeBuffer(e.getPublicKeyPem(),t)},toPublicSsh:function(t){return encodeBuffer(createSshPublicKey(e),t)},toPublicSshFingerprint:function(t){return sshFingerprint(createSshPublicKey(e),void 0,t)},verify:function(t,r,n,i){return t=textToNid(t),r=decodeString(r,i),n=decodeString(n,i),e.verify(t,r,n)},unseal:function(e){return e===theUnsealer?t:void 0}}}function PrivateKey(e){var t;function r(t){return encodeBuffer(e.getPrivateKeyPem(),t)}function n(t,r,n,i){return t=decodeString(t,r),i=void 0===i?ursaNative.RSA_PKCS1_PADDING:i,encodeBuffer(e.privateEncrypt(t,i),n)}return(t=PublicKey(e)).decrypt=function(t,r,n,i){return t=decodeString(t,r),i=void 0===i?ursaNative.RSA_PKCS1_OAEP_PADDING:i,encodeBuffer(e.privateDecrypt(t,i),n)},t.getPrivateExponent=function(t){return encodeBuffer(e.getPrivateExponent(),t)},t.hashAndSign=function(r,i,o,s,a,c){if(a){var u=crypto$l.createHash(r);return u.update(decodeString(i,o)),i=new Buffer(u.digest(BINARY),BINARY),n(i=e.addPSSPadding(textToNid(r),i,void 0===c?ursaNative.RSA_PKCS1_SALT_LEN_HLEN:c),void 0,s,ursaNative.RSA_NO_PADDING)}var f=createSigner(r);return f.update(i,o),f.sign(t,s)},t.privateEncrypt=n,t.sign=function(t,r,n,i){return t=textToNid(t),r=decodeString(r,n),encodeBuffer(e.sign(t,r),i)},t.toPrivatePem=r,t.toEncryptedPrivatePem=function(t,n,i){return t?encodeBuffer(e.getPrivateKeyPem(t,n)):r(i)},t}function createPublicKey(e,t){var r=new RsaWrap;e=decodeString(e,t);try{r.setPublicKeyPem(e)}catch(t){if(!isPublicKeyPem(e))throw new Error("Not a public key.");throw t}return PublicKey(r)}function createPrivateKey(e,t,r){var n=new RsaWrap;e=decodeString(e,r),t=decodeString(t,r);try{t?n.setPrivateKeyPem(e,t):n.setPrivateKeyPem(e)}catch(t){if(!isPrivateKeyPem(e))throw new Error("Not a private key.");throw t}return PrivateKey(n)}function createPublicKeyFromComponents(e,t){var r=new RsaWrap;return r.createPublicKeyFromComponents(e,t),PublicKey(r)}function createPrivateKeyFromComponents(e,t,r,n,i,o,s,a){var c=new RsaWrap;return c.createPrivateKeyFromComponents(e,t,r,n,i,o,s,a),PrivateKey(c)}function generatePrivateKey(e,t){void 0===e&&(e=2048),void 0===t&&(t=65537);var r=new RsaWrap;return r.generatePrivateKey(e,t),PrivateKey(r)}function createKey(e,t){if(isPublicKeyPem(e=decodeString(e,t)))return createPublicKey(e);if(isPrivateKeyPem(e))return createPrivateKey(e);throw new Error("Not a key.")}function sshFingerprint(e,t,r){var n=crypto$l.createHash(MD5);return n.update(decodeString(e,t)),encodeBuffer(new Buffer(n.digest(BINARY),BINARY),r)}function isKey(e){var t;try{var r=e.unseal;if("function"!=typeof r)return!1;t=r(theUnsealer)}catch(e){return!1}return void 0!==t}function isPrivateKey(e){return isKey(e)&&void 0!==e.decrypt}function isPublicKey(e){return isKey(e)&&!isPrivateKey(e)}function assertKey(e){assert$t(isKey(e))}function assertPrivateKey(e){assert$t(isPrivateKey(e))}function assertPublicKey(e){assert$t(isPublicKey(e))}function coercePrivateKey(e){if(isPrivateKey(e))return e;if(isStringOrBuffer(e))return createPrivateKey(e);throw new Error("Not a private key: "+e)}function coercePublicKey(e){if(isPublicKey(e))return e;if(isStringOrBuffer(e))return createPublicKey(e);throw new Error("Not a public key: "+e)}function coerceKey(e){if(isKey(e))return e;if(isStringOrBuffer(e))return createKey(e);throw new Error("Not a key: "+e)}function matchingPublicKeys(e,t){return!(!isKey(e)||!isKey(t))&&e.toPublicSsh(UTF8)===t.toPublicSsh(UTF8)}function equalKeys(e,t){return isPrivateKey(e)&&isPrivateKey(t)?e.toPrivatePem(UTF8)===t.toPrivatePem(UTF8):!(!isPublicKey(e)||!isPublicKey(t))&&matchingPublicKeys(e,t)}function createSigner(e){var t=crypto$l.createHash(e),r={};return r.sign=function(r,n){var i=new Buffer(t.digest(BINARY),BINARY);return r.sign(e,i,void 0,n)},r.update=function(e,n){return e=decodeString(e,n),t.update(e),r},r}function createVerifier(e){var t=crypto$l.createHash(e),r={};return r.update=function(e,n){return e=decodeString(e,n),t.update(e),r},r.verify=function(r,n,i){var o=new Buffer(t.digest(BINARY),BINARY);return n=decodeString(n,i),r.verify(e,o,n)},r}var ursa={assertKey:assertKey,assertPrivateKey:assertPrivateKey,assertPublicKey:assertPublicKey,coerceKey:coerceKey,coercePrivateKey:coercePrivateKey,coercePublicKey:coercePublicKey,createKey:createKey,createPrivateKey:createPrivateKey,createPrivateKeyFromComponents:createPrivateKeyFromComponents,openSshPublicKey:openSshPublicKey,createPublicKey:createPublicKey,createPublicKeyFromComponents:createPublicKeyFromComponents,createSigner:createSigner,createVerifier:createVerifier,equalKeys:equalKeys,generatePrivateKey:generatePrivateKey,isKey:isKey,isPrivateKey:isPrivateKey,isPublicKey:isPublicKey,matchingPublicKeys:matchingPublicKeys,sshFingerprint:sshFingerprint,RSA_NO_PADDING:ursaNative.RSA_NO_PADDING,RSA_PKCS1_PADDING:ursaNative.RSA_PKCS1_PADDING,RSA_PKCS1_OAEP_PADDING:ursaNative.RSA_PKCS1_OAEP_PADDING,RSA_PKCS1_SALT_LEN_HLEN:ursaNative.RSA_PKCS1_SALT_LEN_HLEN,RSA_PKCS1_SALT_LEN_MAX:ursaNative.RSA_PKCS1_SALT_LEN_MAX,RSA_PKCS1_SALT_LEN_RECOVER:ursaNative.RSA_PKCS1_SALT_LEN_RECOVER},forge$1={},aes$1=forge$1.aes={},md$1=forge$1.md={},pki$2=forge$1.pki={},rsa$1=forge$1.pki.rsa=forge$1.rsa={},keypair=function(e){e||(e={}),void 0===e.bits&&(e.bits=2048);var t=forge$1.rsa.generateKeyPair(e);return t={public:fix(forge$1.pki.publicKeyToRSAPublicKeyPem(t.publicKey,72)),private:fix(forge$1.pki.privateKeyToPem(t.privateKey,72))}};function fix(e){return e.replace(/\r/g,"")+"\n"}(util$7=forge$1.util={}).fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r};var sha1$3=forge$1.sha1=forge$1.md.sha1={},_padding=null,_initialized=!1,_init=function(){_padding=String.fromCharCode(128),_padding+=forge$1.util.fillString(String.fromCharCode(0),64),_initialized=!0},_update=function(e,t,r){for(var n,i,o,s,a,c,u,f=r.length();f>=64;){for(i=e.h0,o=e.h1,s=e.h2,a=e.h3,c=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+c+1518500249+n,c=a,a=s,s=o<<30|o>>>2,o=i,i=n;for(;u<20;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+c+1518500249+n,c=a,a=s,s=o<<30|o>>>2,o=i,i=n;for(;u<32;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+1859775393+n,c=a,a=s,s=o<<30|o>>>2,o=i,i=n;for(;u<40;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+1859775393+n,c=a,a=s,s=o<<30|o>>>2,o=i,i=n;for(;u<60;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(o&s|a&(o^s))+c+2400959708+n,c=a,a=s,s=o<<30|o>>>2,o=i,i=n;for(;u<80;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+3395469782+n,c=a,a=s,s=o<<30|o>>>2,o=i,i=n;e.h0+=i,e.h1+=o,e.h2+=s,e.h3+=a,e.h4+=c,f-=64}};sha1$3.create=function(){_initialized||_init();var e=null,t=forge$1.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,start:function(){n.messageLength=0,t=forge$1.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520}}};return n.start(),n.update=function(i,o){"utf8"===o&&(i=forge$1.util.encodeUtf8(i)),n.messageLength+=i.length,t.putBytes(i),_update(e,r,t),(t.read>2048||0===t.length())&&t.compact()},n.digest=function(){var i=n.messageLength,o=forge$1.util.createBuffer();o.putBytes(t.bytes()),o.putBytes(_padding.substr(0,64-(i+8)%64)),o.putInt32(i>>>29&255),o.putInt32(i<<3&4294967295);var s={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};_update(s,r,o);var a=forge$1.util.createBuffer();return a.putInt32(s.h0),a.putInt32(s.h1),a.putInt32(s.h2),a.putInt32(s.h3),a.putInt32(s.h4),a},n},util$7.ByteBuffer=function(e){this.data=e||"",this.read=0},util$7.ByteBuffer.prototype.length=function(){return this.data.length-this.read},util$7.ByteBuffer.prototype.isEmpty=function(){return this.data.length-this.read==0},util$7.ByteBuffer.prototype.putByte=function(e){this.data+=String.fromCharCode(e)},util$7.ByteBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);this.data=r},util$7.ByteBuffer.prototype.putBytes=function(e){this.data+=e},util$7.ByteBuffer.prototype.putString=function(e){this.data+=util$7.encodeUtf8(e)},util$7.ByteBuffer.prototype.putInt16=function(e){this.data+=String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},util$7.ByteBuffer.prototype.putInt24=function(e){this.data+=String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},util$7.ByteBuffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},util$7.ByteBuffer.prototype.putInt16Le=function(e){this.data+=String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)},util$7.ByteBuffer.prototype.putInt24Le=function(e){this.data+=String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)},util$7.ByteBuffer.prototype.putInt32Le=function(e){this.data+=String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255)},util$7.ByteBuffer.prototype.putInt=function(e,t){do{t-=8,this.data+=String.fromCharCode(e>>t&255)}while(t>0)},util$7.ByteBuffer.prototype.putBuffer=function(e){this.data+=e.getBytes()},util$7.ByteBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},util$7.ByteBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},util$7.ByteBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},util$7.ByteBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},util$7.ByteBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},util$7.ByteBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},util$7.ByteBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},util$7.ByteBuffer.prototype.getInt=function(e){var t=0;do{t=(t<<e)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},util$7.ByteBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},util$7.ByteBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},util$7.ByteBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},util$7.ByteBuffer.prototype.setAt=function(e,t){this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1)},util$7.ByteBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},util$7.ByteBuffer.prototype.copy=function(){var e=util$7.createBuffer(this.data);return e.read=this.read,e},util$7.ByteBuffer.prototype.compact=function(){this.read>0&&(this.data=this.data.slice(this.read),this.read=0)},util$7.ByteBuffer.prototype.clear=function(){this.data="",this.read=0},util$7.ByteBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);this.data=this.data.substr(this.read,t),this.read=0},util$7.ByteBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},util$7.ByteBuffer.prototype.toString=function(){return util$7.decodeUtf8(this.bytes())},util$7.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=util$7.encodeUtf8(e)),new util$7.ByteBuffer(e)};var prng=forge$1.prng={};prng.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();function o(){if(t.pools[0].messageLength>=32)return s();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),s()}function s(){var e=forge$1.md.sha1.create();e.update(t.pools[0].digest().getBytes()),t.pools[0].start();for(var r=1,n=1;n<32;++n)(r=31===r?2147483648:r<<2)%t.reseeds==0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start());var i=e.digest().getBytes();e.start(),e.update(i);var o=e.digest().getBytes();t.key=t.plugin.formatKey(i),t.seed=t.plugin.formatSeed(o),++t.reseeds,t.generated=0,t.time=+new Date}function a(e){var t=forge$1.util.createBuffer();if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var r=new Uint32Array(e/4);try{window.crypto.getRandomValues(r);for(var n=0;n<r.length;++n)t.putInt32(r[n])}catch(e){}}if(t.length()<e)for(var i,o,s,a=Math.floor(65535*Math.random());t.length()<e;){o=16807*(65535&a),o+=(32767&(i=16807*(a>>16)))<<16,a=4294967295&(o=(2147483647&(o+=i>>15))+(o>>31));for(n=0;n<3;++n)s=a>>>(n<<3),s^=Math.floor(255*Math.random()),t.putByte(String.fromCharCode(255&s))}return t.getBytes()}return t.pools=n,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var n=t.plugin.cipher,i=t.plugin.increment,o=t.plugin.formatKey,a=t.plugin.formatSeed,c=forge$1.util.createBuffer();!function u(f){if(f)return r(f);if(c.length()>=e)return r(null,c.getBytes(e));if(t.generated>=1048576){var l=+new Date;(null===t.time||l-t.time>100)&&(t.key=null)}if(null===t.key)return function(e){if(t.pools[0].messageLength>=32)return s(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,function(r,n){if(r)return e(r);t.collect(n),s(),e()})}(u);var d=n(t.key,t.seed);t.generated+=d.length;c.putBytes(d);t.key=o(n(t.key,i(t.seed)));t.seed=a(n(t.key,t.seed));forge$1.util.setImmediate(u)}()},t.generateSync=function(e){for(var r=t.plugin.cipher,n=t.plugin.increment,i=t.plugin.formatKey,s=t.plugin.formatSeed,a=forge$1.util.createBuffer();a.length()<e;){if(t.generated>=1048576){var c=+new Date;(null===t.time||c-t.time>100)&&(t.key=null)}null===t.key&&o();var u=r(t.key,t.seed);t.generated+=u.length,a.putBytes(u),t.key=i(r(t.key,n(t.seed))),t.seed=s(r(t.key,t.seed))}return a.getBytes(e)},t.seedFile=function(e,t){try{t(null,a(e))}catch(e){t(e)}},t.seedFileSync=a,t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(e>>i&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener("message",function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})})})}},t};var sbox$1,isbox$1,rcon$1,mix$1,imix$1,init$1=!1,Nb$1=4,initialize$1=function(){init$1=!0,rcon$1=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;sbox$1=new Array(256),isbox$1=new Array(256),mix$1=new Array(4),imix$1=new Array(4);for(t=0;t<4;++t)mix$1[t]=new Array(256),imix$1[t]=new Array(256);var r,n,i,o,s,a,c,u=0,f=0;for(t=0;t<256;++t){o=(o=f^f<<1^f<<2^f<<3^f<<4)>>8^255&o^99,sbox$1[u]=o,isbox$1[o]=u,a=(s=e[o])<<24^o<<16^o<<8^o^s,c=((r=e[u])^(n=e[r])^(i=e[n]))<<24^(u^i)<<16^(u^n^i)<<8^u^r^i;for(var l=0;l<4;++l)mix$1[l][u]=a,imix$1[l][o]=c,a=a<<24|a>>>8,c=c<<24|c>>>8;0===u?u=f=1:(u=r^e[e[e[r^i]]],f^=e[e[f]])}},expandKey=function(e,t){for(var r,n=e.slice(0),i=1,o=n.length,s=Nb$1*(o+6+1),a=o;a<s;++a)r=n[a-1],a%o==0?(r=sbox$1[r>>>16&255]<<24^sbox$1[r>>>8&255]<<16^sbox$1[255&r]<<8^sbox$1[r>>>24]^rcon$1[i]<<24,i++):o>6&&a%o==4&&(r=sbox$1[r>>>24]<<24^sbox$1[r>>>16&255]<<16^sbox$1[r>>>8&255]<<8^sbox$1[255&r]),n[a]=n[a-o]^r;if(t){for(var c,u=imix$1[0],f=imix$1[1],l=imix$1[2],d=imix$1[3],h=n.slice(0),p=(a=0,(s=n.length)-Nb$1);a<s;a+=Nb$1,p-=Nb$1)if(0===a||a===s-Nb$1)h[a]=n[p],h[a+1]=n[p+3],h[a+2]=n[p+2],h[a+3]=n[p+1];else for(var b=0;b<Nb$1;++b)c=n[p+b],h[a+(3&-b)]=u[sbox$1[c>>>24]]^f[sbox$1[c>>>16&255]]^l[sbox$1[c>>>8&255]]^d[sbox$1[255&c]];n=h}return n};forge$1.aes._expandKey=function(e,t){return init$1||initialize$1(),expandKey(e,t)};var _updateBlock$2=function(e,t,r,n){var i,o,s,a,c,u,f,l,d,h,p,b,m=e.length/4-1;n?(i=imix$1[0],o=imix$1[1],s=imix$1[2],a=imix$1[3],c=isbox$1):(i=mix$1[0],o=mix$1[1],s=mix$1[2],a=mix$1[3],c=sbox$1),u=t[0]^e[0],f=t[n?3:1]^e[1],l=t[2]^e[2],d=t[n?1:3]^e[3];for(var g=3,y=1;y<m;++y)h=i[u>>>24]^o[f>>>16&255]^s[l>>>8&255]^a[255&d]^e[++g],p=i[f>>>24]^o[l>>>16&255]^s[d>>>8&255]^a[255&u]^e[++g],b=i[l>>>24]^o[d>>>16&255]^s[u>>>8&255]^a[255&f]^e[++g],d=i[d>>>24]^o[u>>>16&255]^s[f>>>8&255]^a[255&l]^e[++g],u=h,f=p,l=b;r[0]=c[u>>>24]<<24^c[f>>>16&255]<<16^c[l>>>8&255]<<8^c[255&d]^e[++g],r[n?3:1]=c[f>>>24]<<24^c[l>>>16&255]<<16^c[d>>>8&255]<<8^c[255&u]^e[++g],r[2]=c[l>>>24]<<24^c[d>>>16&255]<<16^c[u>>>8&255]<<8^c[255&f]^e[++g],r[n?1:3]=c[d>>>24]<<24^c[u>>>16&255]<<16^c[f>>>8&255]<<8^c[255&l]^e[++g]};forge$1.aes._updateBlock=_updateBlock$2;var prng_aes={},_prng_aes_output=new Array(4),_prng_aes_buffer=forge$1.util.createBuffer();prng_aes.formatKey=function(e){var t=forge$1.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),forge$1.aes._expandKey(e,!1)},prng_aes.formatSeed=function(e){var t=forge$1.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},prng_aes.cipher=function(e,t){return forge$1.aes._updateBlock(e,t,_prng_aes_output,!1),_prng_aes_buffer.putInt32(_prng_aes_output[0]),_prng_aes_buffer.putInt32(_prng_aes_output[1]),_prng_aes_buffer.putInt32(_prng_aes_output[2]),_prng_aes_buffer.putInt32(_prng_aes_output[3]),_prng_aes_buffer.getBytes()},prng_aes.increment=function(e){return++e[3],e},prng_aes.md=forge$1.md.sha1;var dbits$1,_ctx=forge$1.prng.create(prng_aes);if(!("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues||("undefined"==typeof window||window.document,_ctx.collectInt(+new Date,32),"undefined"==typeof navigator))){var _navBytes="";for(var key$4 in navigator)try{"string"==typeof navigator[key$4]&&(_navBytes+=navigator[key$4])}catch(e){}_ctx.collect(_navBytes),_navBytes=null}function BigInteger$3(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi$1(){return new BigInteger$3(null)}function am1$1(e,t,r,n,i,o){for(;--o>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=67108863&s}return i}function am2$1(e,t,r,n,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var c=32767&this.data[e],u=this.data[e++]>>15,f=a*c+u*s;i=((c=s*c+((32767&f)<<15)+r.data[n]+(1073741823&i))>>>30)+(f>>>15)+a*u+(i>>>30),r.data[n++]=1073741823&c}return i}function am3$1(e,t,r,n,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var c=16383&this.data[e],u=this.data[e++]>>14,f=a*c+u*s;i=((c=s*c+((16383&f)<<14)+r.data[n]+i)>>28)+(f>>14)+a*u,r.data[n++]=268435455&c}return i}forge$1.random=_ctx,forge$1.random.getBytes=function(e,t){return forge$1.random.generate(e,t)},forge$1.pki.rsa.createKeyPairGenerationState=function(e,t){"string"==typeof e&&(e=parseInt(e,10));var r={state:0,bits:e=e||1024,rng:{nextBytes:function(e){for(var t=forge$1.random.getBytes(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},eInt:t||65537,e:new BigInteger$3(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null};return r.e.fromInt(r.eInt),r},"undefined"==typeof navigator?(BigInteger$3.prototype.am=am3$1,dbits$1=28):"Microsoft Internet Explorer"==navigator.appName?(BigInteger$3.prototype.am=am2$1,dbits$1=30):"Netscape"!=navigator.appName?(BigInteger$3.prototype.am=am1$1,dbits$1=26):(BigInteger$3.prototype.am=am3$1,dbits$1=28),BigInteger$3.prototype.DB=dbits$1,BigInteger$3.prototype.DM=(1<<dbits$1)-1,BigInteger$3.prototype.DV=1<<dbits$1;var BI_FP$1=52;BigInteger$3.prototype.FV=Math.pow(2,BI_FP$1),BigInteger$3.prototype.F1=BI_FP$1-dbits$1,BigInteger$3.prototype.F2=2*dbits$1-BI_FP$1;var rr$1,vv$1,BI_RM$1="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC$1=new Array;for(rr$1="0".charCodeAt(0),vv$1=0;vv$1<=9;++vv$1)BI_RC$1[rr$1++]=vv$1;for(rr$1="a".charCodeAt(0),vv$1=10;vv$1<36;++vv$1)BI_RC$1[rr$1++]=vv$1;for(rr$1="A".charCodeAt(0),vv$1=10;vv$1<36;++vv$1)BI_RC$1[rr$1++]=vv$1;function int2char$1(e){return BI_RM$1.charAt(e)}function intAt$1(e,t){var r=BI_RC$1[e.charCodeAt(t)];return null==r?-1:r}function bnpCopyTo$1(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function bnpFromInt$1(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+DV:this.t=0}function nbv$1(e){var t=nbi$1();return t.fromInt(e),t}function bnpFromString$1(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var s=8==r?255&e[n]:intAt$1(e,n);s<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==o?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&BigInteger$3.ZERO.subTo(this,this)}function bnpClamp$1(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function bnToString$1(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(r=this.data[s]>>a)>0&&(i=!0,o=int2char$1(r));s>=0;)a<t?(r=(this.data[s]&(1<<a)-1)<<t-a,r|=this.data[--s]>>(a+=this.DB-t)):(r=this.data[s]>>(a-=t)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=int2char$1(r));return i?o:"0"}function bnNegate$1(){var e=nbi$1();return BigInteger$3.ZERO.subTo(this,e),e}function bnAbs$1(){return this.s<0?this.negate():this}function bnCompareTo$1(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0}function nbits$1(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function bnBitLength$1(){return this.t<=0?0:this.DB*(this.t-1)+nbits$1(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo$1(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo$1(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo$1(e,t){var r,n=e%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+s+1]=this.data[r]>>i|a,a=(this.data[r]&o)<<n;for(r=s-1;r>=0;--r)t.data[r]=0;t.data[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()}function bnpRShiftTo$1(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&o)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}}function bnpSubTo$1(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function bnpMultiplyTo$1(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger$3.ZERO.subTo(t,t)}function bnpSquareTo$1(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function bnpDivRemTo$1(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi$1());var o=nbi$1(),s=this.s,a=e.s,c=this.DB-nbits$1(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,f=o.data[u-1];if(0!=f){var l=f*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),d=this.FV/l,h=(1<<this.F1)/l,p=1<<this.F2,b=r.t,m=b-u,g=null==t?nbi$1():t;for(o.dlShiftTo(m,g),r.compareTo(g)>=0&&(r.data[r.t++]=1,r.subTo(g,r)),BigInteger$3.ONE.dlShiftTo(u,g),g.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--m>=0;){var y=r.data[--b]==f?this.DM:Math.floor(r.data[b]*d+(r.data[b-1]+p)*h);if((r.data[b]+=o.am(0,y,r,m,0,u))<y)for(o.dlShiftTo(m,g),r.subTo(g,r);r.data[b]<--y;)r.subTo(g,r)}null!=t&&(r.drShiftTo(u,t),s!=a&&BigInteger$3.ZERO.subTo(t,t)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&BigInteger$3.ZERO.subTo(r,r)}}}function bnMod$1(e){var t=nbi$1();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger$3.ZERO)>0&&e.subTo(t,t),t}function Classic$1(e){this.m=e}function cConvert$1(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert$1(e){return e}function cReduce$1(e){e.divRemTo(this.m,null,e)}function cMulTo$1(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function cSqrTo$1(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit$1(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t}function Montgomery$1(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert$1(e){var t=nbi$1();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger$3.ZERO)>0&&this.m.subTo(t,t),t}function montRevert$1(e){var t=nbi$1();return e.copyTo(t),this.reduce(t),t}function montReduce$1(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo$1(e,t){e.squareTo(t),this.reduce(t)}function montMulTo$1(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function bnpIsEven$1(){return 0==(this.t>0?1&this.data[0]:this.s)}function bnpExp$1(e,t){if(e>4294967295||e<1)return BigInteger$3.ONE;var r=nbi$1(),n=nbi$1(),i=t.convert(this),o=nbits$1(e)-1;for(i.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function bnModPowInt$1(e,t){var r;return r=e<256||t.isEven()?new Classic$1(t):new Montgomery$1(t),this.exp(e,r)}function bnClone$1(){var e=nbi$1();return this.copyTo(e),e}function bnIntValue$1(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue$1(){return 0==this.t?this.s:this.data[0]<<24>>24}function bnShortValue$1(){return 0==this.t?this.s:this.data[0]<<16>>16}function bnpChunkSize$1(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function bnSigNum$1(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function bnpToRadix$1(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=nbv$1(r),i=nbi$1(),o=nbi$1(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(e)+s}function bnpFromRadix$1(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,s=0,a=0;a<e.length;++a){var c=intAt$1(e,a);c<0?"-"==e.charAt(a)&&0==this.signum()&&(i=!0):(s=t*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),i&&BigInteger$3.ZERO.subTo(this,this)}function bnpFromNumber$1(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(BigInteger$3.ONE.shiftLeft(e-1),op_or$1,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(BigInteger$3.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function bnToByteArray$1(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function bnEquals$1(e){return 0==this.compareTo(e)}function bnMin$1(e){return this.compareTo(e)<0?this:e}function bnMax$1(e){return this.compareTo(e)>0?this:e}function bnpBitwiseTo$1(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function op_and$1(e,t){return e&t}function bnAnd$1(e){var t=nbi$1();return this.bitwiseTo(e,op_and$1,t),t}function op_or$1(e,t){return e|t}function bnOr$1(e){var t=nbi$1();return this.bitwiseTo(e,op_or$1,t),t}function op_xor$1(e,t){return e^t}function bnXor$1(e){var t=nbi$1();return this.bitwiseTo(e,op_xor$1,t),t}function op_andnot$1(e,t){return e&~t}function bnAndNot$1(e){var t=nbi$1();return this.bitwiseTo(e,op_andnot$1,t),t}function bnNot$1(){for(var e=nbi$1(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function bnShiftLeft$1(e){var t=nbi$1();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function bnShiftRight$1(e){var t=nbi$1();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function lbit$1(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function bnGetLowestSetBit$1(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+lbit$1(this.data[e]);return this.s<0?this.t*this.DB:-1}function cbit$1(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function bnBitCount$1(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=cbit$1(this.data[r]^t);return e}function bnTestBit$1(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)}function bnpChangeBit$1(e,t){var r=BigInteger$3.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function bnSetBit$1(e){return this.changeBit(e,op_or$1)}function bnClearBit$1(e){return this.changeBit(e,op_andnot$1)}function bnFlipBit$1(e){return this.changeBit(e,op_xor$1)}function bnpAddTo$1(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function bnAdd$1(e){var t=nbi$1();return this.addTo(e,t),t}function bnSubtract$1(e){var t=nbi$1();return this.subTo(e,t),t}function bnMultiply$1(e){var t=nbi$1();return this.multiplyTo(e,t),t}function bnDivide$1(e){var t=nbi$1();return this.divRemTo(e,t,null),t}function bnRemainder$1(e){var t=nbi$1();return this.divRemTo(e,null,t),t}function bnDivideAndRemainder$1(e){var t=nbi$1(),r=nbi$1();return this.divRemTo(e,t,r),new Array(t,r)}function bnpDMultiply$1(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset$1(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function NullExp$1(){}function nNop$1(e){return e}function nMulTo$1(e,t,r){e.multiplyTo(t,r)}function nSqrTo$1(e,t){e.squareTo(t)}function bnPow$1(e){return this.exp(e,new NullExp$1)}function bnpMultiplyLowerTo$1(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()}function bnpMultiplyUpperTo$1(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Barrett$1(e){this.r2=nbi$1(),this.q3=nbi$1(),BigInteger$3.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function barrettConvert$1(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=nbi$1();return e.copyTo(t),this.reduce(t),t}function barrettRevert$1(e){return e}function barrettReduce$1(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function barrettSqrTo$1(e,t){e.squareTo(t),this.reduce(t)}function barrettMulTo$1(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function bnModPow$1(e,t){var r,n,i=e.bitLength(),o=nbv$1(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new Classic$1(t):t.isEven()?new Barrett$1(t):new Montgomery$1(t);var s=new Array,a=3,c=r-1,u=(1<<r)-1;if(s[1]=n.convert(this),r>1){var f=nbi$1();for(n.sqrTo(s[1],f);a<=u;)s[a]=nbi$1(),n.mulTo(f,s[a-2],s[a]),a+=2}var l,d,h=e.t-1,p=!0,b=nbi$1();for(i=nbits$1(e.data[h])-1;h>=0;){for(i>=c?l=e.data[h]>>i-c&u:(l=(e.data[h]&(1<<i+1)-1)<<c-i,h>0&&(l|=e.data[h-1]>>this.DB+i-c)),a=r;0==(1&l);)l>>=1,--a;if((i-=a)<0&&(i+=this.DB,--h),p)s[l].copyTo(o),p=!1;else{for(;a>1;)n.sqrTo(o,b),n.sqrTo(b,o),a-=2;a>0?n.sqrTo(o,b):(d=o,o=b,b=d),n.mulTo(b,s[l],o)}for(;h>=0&&0==(e.data[h]&1<<i);)n.sqrTo(o,b),d=o,o=b,b=d,--i<0&&(i=this.DB-1,--h)}return n.revert(o)}function bnGCD$1(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function bnpModInt$1(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function bnModInverse$1(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return BigInteger$3.ZERO;for(var r=e.clone(),n=this.clone(),i=nbv$1(1),o=nbv$1(0),s=nbv$1(0),a=nbv$1(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),t&&s.subTo(i,s),a.subTo(o,a))}return 0!=n.compareTo(BigInteger$3.ONE)?BigInteger$3.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a}Classic$1.prototype.convert=cConvert$1,Classic$1.prototype.revert=cRevert$1,Classic$1.prototype.reduce=cReduce$1,Classic$1.prototype.mulTo=cMulTo$1,Classic$1.prototype.sqrTo=cSqrTo$1,Montgomery$1.prototype.convert=montConvert$1,Montgomery$1.prototype.revert=montRevert$1,Montgomery$1.prototype.reduce=montReduce$1,Montgomery$1.prototype.mulTo=montMulTo$1,Montgomery$1.prototype.sqrTo=montSqrTo$1,BigInteger$3.prototype.copyTo=bnpCopyTo$1,BigInteger$3.prototype.fromInt=bnpFromInt$1,BigInteger$3.prototype.fromString=bnpFromString$1,BigInteger$3.prototype.clamp=bnpClamp$1,BigInteger$3.prototype.dlShiftTo=bnpDLShiftTo$1,BigInteger$3.prototype.drShiftTo=bnpDRShiftTo$1,BigInteger$3.prototype.lShiftTo=bnpLShiftTo$1,BigInteger$3.prototype.rShiftTo=bnpRShiftTo$1,BigInteger$3.prototype.subTo=bnpSubTo$1,BigInteger$3.prototype.multiplyTo=bnpMultiplyTo$1,BigInteger$3.prototype.squareTo=bnpSquareTo$1,BigInteger$3.prototype.divRemTo=bnpDivRemTo$1,BigInteger$3.prototype.invDigit=bnpInvDigit$1,BigInteger$3.prototype.isEven=bnpIsEven$1,BigInteger$3.prototype.exp=bnpExp$1,BigInteger$3.prototype.toString=bnToString$1,BigInteger$3.prototype.negate=bnNegate$1,BigInteger$3.prototype.abs=bnAbs$1,BigInteger$3.prototype.compareTo=bnCompareTo$1,BigInteger$3.prototype.bitLength=bnBitLength$1,BigInteger$3.prototype.mod=bnMod$1,BigInteger$3.prototype.modPowInt=bnModPowInt$1,BigInteger$3.ZERO=nbv$1(0),BigInteger$3.ONE=nbv$1(1),NullExp$1.prototype.convert=nNop$1,NullExp$1.prototype.revert=nNop$1,NullExp$1.prototype.mulTo=nMulTo$1,NullExp$1.prototype.sqrTo=nSqrTo$1,Barrett$1.prototype.convert=barrettConvert$1,Barrett$1.prototype.revert=barrettRevert$1,Barrett$1.prototype.reduce=barrettReduce$1,Barrett$1.prototype.mulTo=barrettMulTo$1,Barrett$1.prototype.sqrTo=barrettSqrTo$1;var lowprimes$1=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim$1=(1<<26)/lowprimes$1[lowprimes$1.length-1];function bnIsProbablePrime$1(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=lowprimes$1[lowprimes$1.length-1]){for(t=0;t<lowprimes$1.length;++t)if(r.data[0]==lowprimes$1[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<lowprimes$1.length;){for(var n=lowprimes$1[t],i=t+1;i<lowprimes$1.length&&n<lplim$1;)n*=lowprimes$1[i++];for(n=r.modInt(n);t<i;)if(n%lowprimes$1[t++]==0)return!1}return r.millerRabin(e)}function bnpMillerRabin$1(e){var t=this.subtract(BigInteger$3.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>lowprimes$1.length&&(e=lowprimes$1.length);for(var i=nbi$1(),o=0;o<e;++o){i.fromInt(lowprimes$1[o]);var s=i.modPow(n,this);if(0!=s.compareTo(BigInteger$3.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(BigInteger$3.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0}BigInteger$3.prototype.chunkSize=bnpChunkSize$1,BigInteger$3.prototype.toRadix=bnpToRadix$1,BigInteger$3.prototype.fromRadix=bnpFromRadix$1,BigInteger$3.prototype.fromNumber=bnpFromNumber$1,BigInteger$3.prototype.bitwiseTo=bnpBitwiseTo$1,BigInteger$3.prototype.changeBit=bnpChangeBit$1,BigInteger$3.prototype.addTo=bnpAddTo$1,BigInteger$3.prototype.dMultiply=bnpDMultiply$1,BigInteger$3.prototype.dAddOffset=bnpDAddOffset$1,BigInteger$3.prototype.multiplyLowerTo=bnpMultiplyLowerTo$1,BigInteger$3.prototype.multiplyUpperTo=bnpMultiplyUpperTo$1,BigInteger$3.prototype.modInt=bnpModInt$1,BigInteger$3.prototype.millerRabin=bnpMillerRabin$1,BigInteger$3.prototype.clone=bnClone$1,BigInteger$3.prototype.intValue=bnIntValue$1,BigInteger$3.prototype.byteValue=bnByteValue$1,BigInteger$3.prototype.shortValue=bnShortValue$1,BigInteger$3.prototype.signum=bnSigNum$1,BigInteger$3.prototype.toByteArray=bnToByteArray$1,BigInteger$3.prototype.equals=bnEquals$1,BigInteger$3.prototype.min=bnMin$1,BigInteger$3.prototype.max=bnMax$1,BigInteger$3.prototype.and=bnAnd$1,BigInteger$3.prototype.or=bnOr$1,BigInteger$3.prototype.xor=bnXor$1,BigInteger$3.prototype.andNot=bnAndNot$1,BigInteger$3.prototype.not=bnNot$1,BigInteger$3.prototype.shiftLeft=bnShiftLeft$1,BigInteger$3.prototype.shiftRight=bnShiftRight$1,BigInteger$3.prototype.getLowestSetBit=bnGetLowestSetBit$1,BigInteger$3.prototype.bitCount=bnBitCount$1,BigInteger$3.prototype.testBit=bnTestBit$1,BigInteger$3.prototype.setBit=bnSetBit$1,BigInteger$3.prototype.clearBit=bnClearBit$1,BigInteger$3.prototype.flipBit=bnFlipBit$1,BigInteger$3.prototype.add=bnAdd$1,BigInteger$3.prototype.subtract=bnSubtract$1,BigInteger$3.prototype.multiply=bnMultiply$1,BigInteger$3.prototype.divide=bnDivide$1,BigInteger$3.prototype.remainder=bnRemainder$1,BigInteger$3.prototype.divideAndRemainder=bnDivideAndRemainder$1,BigInteger$3.prototype.modPow=bnModPow$1,BigInteger$3.prototype.modInverse=bnModInverse$1,BigInteger$3.prototype.pow=bnPow$1,BigInteger$3.prototype.gcd=bnGCD$1,BigInteger$3.prototype.isProbablePrime=bnIsProbablePrime$1,forge$1.jsbn=forge$1.jsbn||{},forge$1.jsbn.BigInteger=BigInteger$3;var util$7=forge$1.util=forge$1.util||{};"undefined"!=typeof process&&process.nextTick?(util$7.nextTick=process.nextTick,"function"==typeof setImmediate?util$7.setImmediate=setImmediate:util$7.setImmediate=util$7.nextTick):"function"==typeof setImmediate?(util$7.setImmediate=setImmediate,util$7.nextTick=function(e){return setImmediate(e)}):(util$7.setImmediate=function(e){setTimeout(e,0)},util$7.nextTick=util$7.setImmediate);var _modPow$1=function(e,t,r){var n;if(r)n=e.modPow(t.e,t.n);else{t.dP||(t.dP=t.d.mod(t.p.subtract(BigInteger$3.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(BigInteger$3.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));for(var i=e.mod(t.p).modPow(t.dP,t.p),o=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(o)<0;)i=i.add(t.p);n=i.subtract(o).multiply(t.qInv).mod(t.p).multiply(t.q).add(o)}return n};util$7.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},util$7.decodeUtf8=function(e){return decodeURIComponent(escape(e))},util$7.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=util$7.encodeUtf8(e)),new util$7.ByteBuffer(e)},util$7.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},pki$2.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!=i)throw{message:"Encrypted message length is invalid.",length:e.length,expected:i};for(var o=new BigInteger$3(forge$1.util.createBuffer(e).toHex(),16),s=_modPow$1(o,t,r).toString(16),a=forge$1.util.createBuffer(),c=i-Math.ceil(s.length/2);c>0;)a.putByte(0),--c;if(a.putBytes(forge$1.util.hexToBytes(s)),!1!==n){var u=a.getByte(),f=a.getByte();if(0!==u||r&&0!==f&&1!==f||!r&&2!=f||r&&0===f&&void 0===n)throw{message:"Encryption block is invalid."};var l=0;if(0===f){l=i-3-n;for(var d=0;d<l;++d)if(0!==a.getByte())throw{message:"Encryption block is invalid."}}else if(1===f)for(l=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++l}else if(2===f)for(l=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++l}if(0!==a.getByte()||l!==i-3-a.length())throw{message:"Encryption block is invalid."}}return a.getBytes()},pki$2.rsa.encrypt=function(e,t,r){var n=r,i=forge$1.util.createBuffer(),o=Math.ceil(t.n.bitLength()/8);if(!1!==r&&!0!==r){if(e.length>o-11)throw{message:"Message is too long to encrypt.",length:e.length,max:o-11};i.putByte(0),i.putByte(r);var s,a=o-3-e.length;if(0===r||1===r){n=!1,s=0===r?0:255;for(var c=0;c<a;++c)i.putByte(s)}else{n=!0;for(c=0;c<a;++c)s=Math.floor(255*Math.random())+1,i.putByte(s)}i.putByte(0)}i.putBytes(e);for(var u=new BigInteger$3(i.toHex(),16),f=_modPow$1(u,t,n).toString(16),l=forge$1.util.createBuffer(),d=o-Math.ceil(f.length/2);d>0;)l.putByte(0),--d;return l.putBytes(forge$1.util.hexToBytes(f)),l.getBytes()},pki$2.rsa.setPrivateKey=function(e,t,r,n,i,o,s,a){var c={n:e,e:t,d:r,p:n,q:i,dP:o,dQ:s,qInv:a,decrypt:function(e){return pki$2.rsa.decrypt(e,c,!1)},sign:function(e,t){var r=!1;void 0===t&&(t={encode:emsaPkcs1v15encode},r=1);var n=t.encode(e,c.n.bitLength());return pki$2.rsa.encrypt(n,c,r)}};return c};var _getValueLength=function(e){var t=e.getByte();if(128!=t)return 128&t?e.getInt((127&t)<<3):t},asn1$2=forge$1.asn1=forge$1.asn1||{};asn1$2.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},asn1$2.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},asn1$2.create=function(e,t,r,n){if(n.constructor==Array){for(var i=[],o=0;o<n.length;++o)void 0!==n[o]&&i.push(n[o]);n=i}return{tagClass:e,type:t,constructed:r,composed:r||n.constructor==Array,value:n}},asn1$2.fromDer=function(e){if(e.constructor==String&&(e=forge$1.util.createBuffer(e)),e.length()<2)throw{message:"Too few bytes to parse DER.",bytes:e.length()};var t,r=e.getByte(),n=192&r,i=31&r,o=_getValueLength(e);if(e.length()<o)throw{message:"Too few bytes to read ASN.1 value.",detail:e.length()+" < "+o};var s=32==(32&r),a=s;if(!a&&n===asn1$2.Class.UNIVERSAL&&i===asn1$2.Type.BITSTRING&&o>1){var c=e.read;if(0===e.getByte()){var u=192&(r=e.getByte());if(u===asn1$2.Class.UNIVERSAL||u===asn1$2.Class.CONTEXT_SPECIFIC)try{(a=_getValueLength(e)===o-(e.read-c))&&(++c,--o)}catch(e){}}e.read=c}if(a)if(t=[],void 0===o)for(;;){if(e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2);break}t.push(asn1$2.fromDer(e))}else for(var f=e.length();o>0;)t.push(asn1$2.fromDer(e)),o-=f-e.length(),f=e.length();else{if(void 0===o)throw{message:"Non-constructed ASN.1 object of indefinite length."};if(i===asn1$2.Type.BMPSTRING){t="";for(var l=0;l<o;l+=2)t+=String.fromCharCode(e.getInt16())}else t=e.getBytes(o)}return asn1$2.create(n,i,s,t)},asn1$2.toDer=function(e){var t=forge$1.util.createBuffer(),r=e.tagClass|e.type,n=forge$1.util.createBuffer();if(e.composed){e.constructed?r|=32:n.putByte(0);for(var i=0;i<e.value.length;++i)void 0!==e.value[i]&&n.putBuffer(asn1$2.toDer(e.value[i]))}else if(e.type===asn1$2.Type.BMPSTRING)for(i=0;i<e.value.length;++i)n.putInt16(e.value.charCodeAt(i));else n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(127&n.length());else{var o=n.length(),s="";do{s+=String.fromCharCode(255&o),o>>>=8}while(o>0);t.putByte(128|s.length);for(i=s.length-1;i>=0;--i)t.putByte(s.charCodeAt(i))}return t.putBuffer(n),t},pki$2.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e){return pki$2.rsa.encrypt(e,r,2)},verify:function(e,t,n){var i=void 0===n&&void 0,o=pki$2.rsa.decrypt(t,r,!0,i);return void 0===n?e===asn1$2.fromDer(o).value[1].value:n.verify(e,o,r.n.bitLength())}};return r};var GCD_30_DELTA$1=[6,4,2,4,2,4,6,2];function _generateKeyPair$1(e,t,r){if("function"==typeof t&&(r=t,t={}),"undefined"==typeof Worker){return function t(){if(forge$1.pki.rsa.stepKeyPairGenerationState(e,10))return r(null,e.keys);forge$1.util.setImmediate(t)}()}var n=t.workers||2,i=t.workLoad||100,o=30*i/8,s=t.workerScript||"forge/prime.worker.js",a=new BigInteger$3(null);a.fromInt(30);var c=function(e,t){return e|t};function u(){f(e.pBits,function(t,n){if(t)return r(t);e.p=n,f(e.qBits,l)})}function f(t,r){for(var u=[],f=0;f<n;++f)u[f]=new Worker(s);var l=d();for(f=0;f<n;++f)u[f].addEventListener("message",p);function d(){var r=t-1,n=new BigInteger$3(t,e.rng);return n.testBit(r)||n.bitwiseTo(BigInteger$3.ONE.shiftLeft(r),c,n),n.dAddOffset(31-n.mod(a).byteValue(),0),n}var h=!1;function p(n){if(!h){var s=n.data;if(s.found){for(var a=0;a<u.length;++a)u[a].terminate();return h=!0,r(null,new BigInteger$3(s.prime,16))}l.bitLength()>t&&(l=d());var c=l.toString(16);n.target.postMessage({e:e.eInt,hex:c,workLoad:i}),l.dAddOffset(o,0)}}}function l(t,n){if(e.q=n,e.p.compareTo(e.q)<0){var i=e.p;e.p=e.q,e.q=i}if(e.p1=e.p.subtract(BigInteger$3.ONE),e.q1=e.q.subtract(BigInteger$3.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(BigInteger$3.ONE))return e.p=e.q=null,void u();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void f(e.qBits,l);var o=e.e.modInverse(e.phi);e.keys={privateKey:forge$1.pki.rsa.setPrivateKey(e.n,e.e,o,e.p,e.q,o.mod(e.p1),o.mod(e.q1),e.q.modInverse(e.p)),publicKey:forge$1.pki.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}u()}pki$2.rsa.stepKeyPairGenerationState=function(e,t){var r=new BigInteger$3(null);r.fromInt(30);for(var n,i=0,o=function(e,t){return e|t},s=+new Date,a=0;null===e.keys&&(t<=0||a<t);){if(0===e.state){var c=null===e.p?e.pBits:e.qBits,u=c-1;0===e.pqState?(e.num=new BigInteger$3(c,e.rng),e.num.testBit(u)||e.num.bitwiseTo(BigInteger$3.ONE.shiftLeft(u),o,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(1)?++e.pqState:e.num.dAddOffset(GCD_30_DELTA$1[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(BigInteger$3.ONE).gcd(e.e).compareTo(BigInteger$3.ONE)?3:0:3===e.pqState&&(e.pqState=0,e.num.isProbablePrime(10)&&(null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state),e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(BigInteger$3.ONE),e.q1=e.q.subtract(BigInteger$3.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(BigInteger$3.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var f=e.e.modInverse(e.phi);e.keys={privateKey:forge$1.pki.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:forge$1.pki.rsa.setPublicKey(e.n,e.e)}}a+=(n=+new Date)-s,s=n}return null!==e.keys},pki$2.rsa.generateKeyPair=function(e,t,r,n){1===arguments.length?"object"==typeof e?(r=e,e=void 0):"function"==typeof e&&(n=e,e=void 0):2===arguments.length?("number"==typeof e?"function"==typeof t?n=t:r=t:(r=e,n=t,e=void 0),t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||1024),void 0===t&&(t=r.e||65537);var i=pki$2.rsa.createKeyPairGenerationState(e,t);if(!n)return pki$2.rsa.stepKeyPairGenerationState(i,0),i.keys;_generateKeyPair$1(i,r,n)};var _bnToBytes$1=function(e){var t=e.toString(16);return t[0]>="8"&&(t="00"+t),forge$1.util.hexToBytes(t)};pki$2.publicKeyToRSAPublicKey=function(e){return asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.SEQUENCE,!0,[asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,_bnToBytes$1(e.n)),asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,_bnToBytes$1(e.e))])};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";util$7.encode64=function(e,t){for(var r,n,i,o="",s="",a=0;a<e.length;)r=e.charCodeAt(a++),n=e.charCodeAt(a++),i=e.charCodeAt(a++),o+=_base64.charAt(r>>2),o+=_base64.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=_base64.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":_base64.charAt(63&i)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+=o},pki$2.publicKeyToRSAPublicKeyPem=function(e,t){var r=asn1$2.toDer(pki$2.publicKeyToRSAPublicKey(e));return"-----BEGIN RSA PUBLIC KEY-----\r\n"+(r=forge$1.util.encode64(r.getBytes(),t||64))+"\r\n-----END RSA PUBLIC KEY-----"},pki$2.privateKeyToAsn1=pki$2.privateKeyToRSAPrivateKey=function(e){return asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.SEQUENCE,!0,[asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,String.fromCharCode(0)),asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,_bnToBytes$1(e.n)),asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,_bnToBytes$1(e.e)),asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,_bnToBytes$1(e.d)),asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,_bnToBytes$1(e.p)),asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,_bnToBytes$1(e.q)),asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,_bnToBytes$1(e.dP)),asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,_bnToBytes$1(e.dQ)),asn1$2.create(asn1$2.Class.UNIVERSAL,asn1$2.Type.INTEGER,!1,_bnToBytes$1(e.qInv))])},pki$2.privateKeyToPem=function(e,t){var r=asn1$2.toDer(pki$2.privateKeyToAsn1(e));return"-----BEGIN RSA PRIVATE KEY-----\r\n"+(r=forge$1.util.encode64(r.getBytes(),t||64))+"\r\n-----END RSA PRIVATE KEY-----"};var api_1=createCommonjsModule(function(e,t){function r(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new r(e,t)},r.prototype._createNamed=function(e){let t;try{t=vm$9.runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){t=function(e){this._initNamed(e)}}return inherits(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},r.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(asn1_1$1.decoders[e])),this.decoders[e]},r.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},r.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(asn1_1$1.encoders[e])),this.encoders[e]},r.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}});function Reporter(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}var Reporter_1=Reporter;function ReporterError(e,t){this.path=e,this.rethrow(t)}Reporter.prototype.isError=function(e){return e instanceof ReporterError},Reporter.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},Reporter.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},Reporter.prototype.enterKey=function(e){return this._reporterState.path.push(e)},Reporter.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},Reporter.prototype.leaveKey=function(e,t,r){const n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},Reporter.prototype.path=function(){return this._reporterState.path.join("/")},Reporter.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},Reporter.prototype.leaveObject=function(e){const t=this._reporterState,r=t.obj;return t.obj=e,r},Reporter.prototype.error=function(e){let t;const r=this._reporterState,n=e instanceof ReporterError;if(t=n?e:new ReporterError(r.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},Reporter.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},inherits(ReporterError,Error),ReporterError.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this};var reporter={Reporter:Reporter_1};const Reporter$1=base_1.Reporter,Buffer$k=buffer$1.Buffer;function DecoderBuffer(e,t){Reporter$1.call(this,t),Buffer$k.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}inherits(DecoderBuffer,Reporter$1);var DecoderBuffer_1=DecoderBuffer;function EncoderBuffer(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof EncoderBuffer||(e=new EncoderBuffer(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=Buffer$k.byteLength(e);else{if(!Buffer$k.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}DecoderBuffer.prototype.save=function(){return{offset:this.offset,reporter:Reporter$1.prototype.save.call(this)}},DecoderBuffer.prototype.restore=function(e){const t=new DecoderBuffer(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,Reporter$1.prototype.restore.call(this,e.reporter),t},DecoderBuffer.prototype.isEmpty=function(){return this.offset===this.length},DecoderBuffer.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},DecoderBuffer.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const r=new DecoderBuffer(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},DecoderBuffer.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};var EncoderBuffer_1=EncoderBuffer;EncoderBuffer.prototype.join=function(e,t){return e||(e=new Buffer$k(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):Buffer$k.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)};var buffer={DecoderBuffer:DecoderBuffer_1,EncoderBuffer:EncoderBuffer_1};const Reporter$2=base_1.Reporter,EncoderBuffer$1=base_1.EncoderBuffer,DecoderBuffer$1=base_1.DecoderBuffer,tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],methods=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags),overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Node$2(e,t){const r={};this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}var node$1=Node$2;const stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node$2.prototype.clone=function(){const e=this._baseState,t={};stateProps.forEach(function(r){t[r]=e[r]});const r=new this.constructor(t.parent);return r._baseState=t,r},Node$2.prototype._wrap=function(){const e=this._baseState;methods.forEach(function(t){this[t]=function(){const r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},Node$2.prototype._init=function(e){const t=this._baseState;minimalisticAssert(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),minimalisticAssert.equal(t.children.length,1,"Root node can have only one child")},Node$2.prototype._useArgs=function(e){const t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(minimalisticAssert(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(minimalisticAssert(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0);const n=e[r];t[n]=r}),t}))},overrided.forEach(function(e){Node$2.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),tags.forEach(function(e){Node$2.prototype[e]=function(){const t=this._baseState,r=Array.prototype.slice.call(arguments);return minimalisticAssert(null===t.tag),t.tag=e,this._useArgs(r),this}}),Node$2.prototype.use=function(e){minimalisticAssert(e);const t=this._baseState;return minimalisticAssert(null===t.use),t.use=e,this},Node$2.prototype.optional=function(){return this._baseState.optional=!0,this},Node$2.prototype.def=function(e){const t=this._baseState;return minimalisticAssert(null===t.default),t.default=e,t.optional=!0,this},Node$2.prototype.explicit=function(e){const t=this._baseState;return minimalisticAssert(null===t.explicit&&null===t.implicit),t.explicit=e,this},Node$2.prototype.implicit=function(e){const t=this._baseState;return minimalisticAssert(null===t.explicit&&null===t.implicit),t.implicit=e,this},Node$2.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},Node$2.prototype.key=function(e){const t=this._baseState;return minimalisticAssert(null===t.key),t.key=e,this},Node$2.prototype.any=function(){return this._baseState.any=!0,this},Node$2.prototype.choice=function(e){const t=this._baseState;return minimalisticAssert(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},Node$2.prototype.contains=function(e){const t=this._baseState;return minimalisticAssert(null===t.use),t.contains=e,this},Node$2.prototype._decode=function(e,t){const r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));let n,i=r.default,o=!0,s=null;if(null!==r.key&&(s=e.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(o=this._peekTag(e,n,r.any),e.isError(o))return o}else{const n=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),o=!0}catch(e){o=!1}e.restore(n)}}if(r.obj&&o&&(n=e.enterObject()),o){if(null!==r.explicit){const t=this._decodeTag(e,r.explicit);if(e.isError(t))return t;e=t}const n=e.offset;if(null===r.use&&null===r.choice){let t;r.any&&(t=e.save());const n=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(n))return n;r.any?i=e.raw(t):e=n}if(t&&t.track&&null!==r.tag&&t.track(e.path(),n,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach(function(r){r._decode(e,t)}),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new DecoderBuffer$1(i);i=this._getUse(r.contains,e._reporterState.obj)._decode(n,t)}}return r.obj&&o&&(i=e.leaveObject(n)),null===r.key||null===i&&!0!==o?null!==s&&e.exitKey(s):e.leaveKey(s,r.key,i),i},Node$2.prototype._decodeGeneric=function(e,t,r){const n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},Node$2.prototype._getUse=function(e,t){const r=this._baseState;return r.useDecoder=this._use(e,t),minimalisticAssert(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},Node$2.prototype._decodeChoice=function(e,t){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some(function(o){const s=e.save(),a=r.choice[o];try{const r=a._decode(e,t);if(e.isError(r))return!1;n={type:o,value:r},i=!0}catch(t){return e.restore(s),!1}return!0},this),i?n:e.error("Choice not matched")},Node$2.prototype._createEncoderBuffer=function(e){return new EncoderBuffer$1(e,this.reporter)},Node$2.prototype._encode=function(e,t,r){const n=this._baseState;if(null!==n.default&&n.default===e)return;const i=this._encodeValue(e,t,r);return void 0===i||this._skipDefault(i,t,r)?void 0:i},Node$2.prototype._encodeValue=function(e,t,r){const n=this._baseState;if(null===n.parent)return n.children[0]._encode(e,t||new Reporter$2);let i=null;if(this.reporter=t,n.optional&&void 0===e){if(null===n.default)return;e=n.default}let o=null,s=!1;if(n.any)i=this._createEncoderBuffer(e);else if(n.choice)i=this._encodeChoice(e,t);else if(n.contains)o=this._getUse(n.contains,r)._encode(e,t),s=!0;else if(n.children)o=n.children.map(function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");const n=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const i=r._encode(e[r._baseState.key],t,e);return t.leaveKey(n),i},this).filter(function(e){return e}),o=this._createEncoderBuffer(o);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return t.error("Too many args for : "+n.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,o=this._createEncoderBuffer(e.map(function(r){const n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)},r))}else null!==n.use?i=this._getUse(n.use,r)._encode(e,t):(o=this._encodePrimitive(n.tag,e),s=!0);if(!n.any&&null===n.choice){const e=null!==n.implicit?n.implicit:n.tag,r=null===n.implicit?"universal":"context";null===e?null===n.use&&t.error("Tag could be omitted only for .use()"):null===n.use&&(i=this._encodeComposite(e,s,r,o))}return null!==n.explicit&&(i=this._encodeComposite(n.explicit,!1,"context",i)),i},Node$2.prototype._encodeChoice=function(e,t){const r=this._baseState,n=r.choice[e.type];return n||minimalisticAssert(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},Node$2.prototype._encodePrimitive=function(e,t){const r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},Node$2.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},Node$2.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-.\/:=?]*$/.test(e)};var base_1=createCommonjsModule(function(e,t){const r=t;r.Reporter=reporter.Reporter,r.DecoderBuffer=buffer.DecoderBuffer,r.EncoderBuffer=buffer.EncoderBuffer,r.Node=node$1}),der$1=createCommonjsModule(function(e,t){t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=constants_1$4._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=constants_1$4._reverse(t.tag)}),der_1=der$1.tagClass,der_2=der$1.tagClassByName,der_3=der$1.tag,der_4=der$1.tagByName,constants_1$4=createCommonjsModule(function(e,t){const r=t;r._reverse=function(e){const t={};return Object.keys(e).forEach(function(r){(0|r)==r&&(r|=0);const n=e[r];t[n]=r}),t},r.der=der$1});const base$4=asn1_1$1.base,bignum=asn1_1$1.bignum,der$2=asn1_1$1.constants.der;function DERDecoder(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new DERNode,this.tree._init(e.body)}var der_1$1=DERDecoder;function DERNode(e){base$4.Node.call(this,"der",e)}function derDecodeTag(e,t){let r=e.readUInt8(t);if(e.isError(r))return r;const n=der$2.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){let n=r;for(r=0;128==(128&n);){if(n=e.readUInt8(t),e.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:der$2.tag[r]}}function derDecodeLen(e,t,r){let n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0==(128&n))return n;const i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(let t=0;t<i;t++){n<<=8;const t=e.readUInt8(r);if(e.isError(t))return t;n|=t}return n}DERDecoder.prototype.decode=function(e,t){return e instanceof base$4.DecoderBuffer||(e=new base$4.DecoderBuffer(e,t)),this.tree._decode(e,t)},inherits(DERNode,base$4.Node),DERNode.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;const n=e.save(),i=derDecodeTag(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},DERNode.prototype._decodeTag=function(e,t,r){const n=derDecodeTag(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;let i=derDecodeLen(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');const o=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(i=e.offset-o.offset,e.restore(o),e.skip(i,'Failed to match body of: "'+t+'"'))},DERNode.prototype._skipUntilEnd=function(e,t){for(;;){const r=derDecodeTag(e,t);if(e.isError(r))return r;const n=derDecodeLen(e,r.primitive,t);if(e.isError(n))return n;let i;if(i=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===r.tagStr)break}},DERNode.prototype._decodeList=function(e,t,r,n){const i=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const o=r.decode(e,"der",n);if(e.isError(o)&&t)break;i.push(o)}return i},DERNode.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let r="";for(let e=0;e<t.length/2;e++)r+=String.fromCharCode(t.readUInt16BE(2*e));return r}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},DERNode.prototype._decodeObjid=function(e,t,r){let n;const i=[];let o=0,s=0;for(;!e.isEmpty();)o<<=7,o|=127&(s=e.readUInt8()),0==(128&s)&&(i.push(o),o=0);128&s&&i.push(o);const a=i[0]/40|0,c=i[0]%40;if(n=r?i:[a,c].concat(i.slice(1)),t){let e=t[n.join(" ")];void 0===e&&(e=t[n.join(".")]),void 0!==e&&(n=e)}return n},DERNode.prototype._decodeTime=function(e,t){const r=e.raw().toString();let n,i,o,s,a,c;if("gentime"===t)n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),a=0|r.slice(10,12),c=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),s=0|r.slice(6,8),a=0|r.slice(8,10),c=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,s,a,c,0)},DERNode.prototype._decodeNull=function(){return null},DERNode.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},DERNode.prototype._decodeInt=function(e,t){const r=e.raw();let n=new bignum(r);return t&&(n=t[n.toString(10)]||n),n},DERNode.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree};const Buffer$l=buffer$1.Buffer;function PEMDecoder(e){der_1$1.call(this,e),this.enc="pem"}inherits(PEMDecoder,der_1$1);var pem=PEMDecoder;PEMDecoder.prototype.decode=function(e,t){const r=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),i=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,s=-1;for(let e=0;e<r.length;e++){const t=r[e].match(i);if(null!==t&&t[2]===n){if(-1!==o){if("END"!==t[1])break;s=e;break}if("BEGIN"!==t[1])break;o=e}}if(-1===o||-1===s)throw new Error("PEM section not found for: "+n);const a=r.slice(o+1,s).join("");a.replace(/[^a-z0-9+\/=]+/gi,"");const c=new Buffer$l(a,"base64");return der_1$1.prototype.decode.call(this,c,t)};var decoders_1=createCommonjsModule(function(e,t){const r=t;r.der=der_1$1,r.pem=pem});const Buffer$m=buffer$1.Buffer,base$5=asn1_1$1.base,der$3=asn1_1$1.constants.der;function DEREncoder(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new DERNode$1,this.tree._init(e.body)}var der_1$2=DEREncoder;function DERNode$1(e){base$5.Node.call(this,"der",e)}function two(e){return e<10?"0"+e:e}function encodeTag(e,t,r,n){let i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),der$3.tagByName.hasOwnProperty(e))i=der$3.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}return i>=31?n.error("Multi-octet tag encoding unsupported"):(t||(i|=32),i|=der$3.tagClassByName[r||"universal"]<<6)}function PEMEncoder(e){der_1$2.call(this,e),this.enc="pem"}DEREncoder.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},inherits(DERNode$1,base$5.Node),DERNode$1.prototype._encodeComposite=function(e,t,r,n){const i=encodeTag(e,t,r,this.reporter);if(n.length<128){const e=new Buffer$m(2);return e[0]=i,e[1]=n.length,this._createEncoderBuffer([e,n])}let o=1;for(let e=n.length;e>=256;e>>=8)o++;const s=new Buffer$m(2+o);s[0]=i,s[1]=128|o;for(let e=1+o,t=n.length;t>0;e--,t>>=8)s[e]=255&t;return this._createEncoderBuffer([s,n])},DERNode$1.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=new Buffer$m(2*e.length);for(let r=0;r<e.length;r++)t.writeUInt16BE(e.charCodeAt(r),2*r);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},DERNode$1.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let n=0;for(let t=0;t<e.length;t++){let r=e[t];for(n++;r>=128;r>>=7)n++}const i=new Buffer$m(n);let o=i.length-1;for(let t=e.length-1;t>=0;t--){let r=e[t];for(i[o--]=127&r;(r>>=7)>0;)i[o--]=128|127&r}return this._createEncoderBuffer(i)},DERNode$1.prototype._encodeTime=function(e,t){let r;const n=new Date(e);return"gentime"===t?r=[two(n.getUTCFullYear()),two(n.getUTCMonth()+1),two(n.getUTCDate()),two(n.getUTCHours()),two(n.getUTCMinutes()),two(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[two(n.getUTCFullYear()%100),two(n.getUTCMonth()+1),two(n.getUTCDate()),two(n.getUTCHours()),two(n.getUTCMinutes()),two(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},DERNode$1.prototype._encodeNull=function(){return this._createEncoderBuffer("")},DERNode$1.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!Buffer$m.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=new Buffer$m(t)}if(Buffer$m.isBuffer(e)){let t=e.length;0===e.length&&t++;const r=new Buffer$m(t);return e.copy(r),0===e.length&&(r[0]=0),this._createEncoderBuffer(r)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let r=1;for(let t=e;t>=256;t>>=8)r++;const n=new Array(r);for(let t=n.length-1;t>=0;t--)n[t]=255&e,e>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(new Buffer$m(n))},DERNode$1.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},DERNode$1.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},DERNode$1.prototype._skipDefault=function(e,t,r){const n=this._baseState;let i;if(null===n.default)return!1;const o=e.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,t,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0},inherits(PEMEncoder,der_1$2);var pem$1=PEMEncoder;PEMEncoder.prototype.encode=function(e,t){const r=der_1$2.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+t.label+"-----"];for(let e=0;e<r.length;e+=64)n.push(r.slice(e,e+64));return n.push("-----END "+t.label+"-----"),n.join("\n")};var encoders_1=createCommonjsModule(function(e,t){const r=t;r.der=der_1$2,r.pem=pem$1}),asn1_1$1=createCommonjsModule(function(e,t){const r=t;r.bignum=bn,r.define=api_1.define,r.base=base_1,r.constants=constants_1$4,r.decoders=decoders_1,r.encoders=encoders_1}),BN=asn1_1$1.bignum,zero=new BN(0),one=new BN(1),two$1=new BN(2);function rand(e,t){do{var r=new BN(crypto$l.randomBytes(t.byteLength()))}while(r.cmp(e)<=0||r.cmp(t)>=0);return r}function odd(e){if(0===e.cmp(zero))return zero;for(var t=e;t.isEven();)t=t.div(two$1);return t}function rootOne(e,t,r){for(var n=e.toRed(BN.red(r)).redPow(t).fromRed(),i=zero;0!==n.cmp(one);)i=n,n=n.mul(n).mod(r);return 0===i.cmp(r.sub(one))?zero:i}function factor(e,t,r){var n=odd(e.mul(t).sub(one));do{var i=rootOne(rand(two$1,r),n,r)}while(0===i.cmp(zero));var o=i.sub(one).gcd(r);return{p:o,q:r.div(o)}}var factor_1=factor,one$1=new asn1_1$1.bignum(1);function urlize(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function hex2b64url(e){return urlize(Buffer.from(e,"hex").toString("base64"))}var RSAPublicKey=asn1_1$1.define("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),AlgorithmIdentifier=asn1_1$1.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),PublicKeyInfo=asn1_1$1.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("publicKey").bitstr())}),Version=asn1_1$1.define("Version",function(){this.int({0:"two-prime",1:"multi"})}),OtherPrimeInfos=asn1_1$1.define("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),RSAPrivateKey=asn1_1$1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(Version),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(OtherPrimeInfos))}),PrivateKeyInfo=asn1_1$1.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(Version),this.key("algorithm").use(AlgorithmIdentifier),this.key("privateKey").bitstr())});function addExtras(e,t){return t=t||{},Object.keys(t).forEach(function(r){e[r]=t[r]}),e}function pad(e){return e.length%2==1?"0"+e:e}function decodeRsaPublic(e,t){var r=RSAPublicKey.decode(e,"der"),n=pad(r.e.toString(16));return addExtras({kty:"RSA",n:bn2base64url(r.n),e:hex2b64url(n)},t)}function decodeRsaPrivate(e,t){var r=RSAPrivateKey.decode(e,"der"),n=pad(r.e.toString(16));return addExtras({kty:"RSA",n:bn2base64url(r.n),e:hex2b64url(n),d:bn2base64url(r.d),p:bn2base64url(r.p),q:bn2base64url(r.q),dp:bn2base64url(r.dp),dq:bn2base64url(r.dq),qi:bn2base64url(r.qi)},t)}function decodePublic(e,t){return decodeRsaPublic(PublicKeyInfo.decode(e,"der").publicKey.data,t)}function decodePrivate(e,t){return decodeRsaPrivate(PrivateKeyInfo.decode(e,"der").privateKey.data,t)}function getDecoder(e){var t=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(e);if(!t)return null;var r=!!t[1];return"PRIVATE"===t[2]?r?decodeRsaPrivate:decodePrivate:r?decodeRsaPublic:decodePublic}function pem2jwk(e,t){var r=e.toString().split(/(\r\n|\r|\n)+/g),n=getDecoder((r=r.filter(function(e){return 0!==e.trim().length}))[0]);return r=r.slice(1,-1).join(""),n(Buffer.from(r.replace(/[^\w\d\+\/=]+/g,""),"base64"),t)}function recomputePrimes(e){var t=factor_1(e.e,e.d,e.n),r=t.p,n=t.q,i=e.d.mod(r.sub(one$1)),o=e.d.mod(n.sub(one$1)),s=n.invm(r);return{n:e.n,e:e.e,d:e.d,p:r,q:n,dp:i,dq:o,qi:s}}function parse$2(e){return{n:string2bn(e.n),e:string2bn(e.e),d:e.d&&string2bn(e.d),p:e.p&&string2bn(e.p),q:e.q&&string2bn(e.q),dp:e.dp&&string2bn(e.dp),dq:e.dq&&string2bn(e.dq),qi:e.qi&&string2bn(e.qi)}}function jwk2pem(e){var t=parse$2(e),r=!!t.d,n=r?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+" KEY-----\n",o="\n-----END RSA "+n+" KEY-----\n",s=null;return r?(t.p||(t=recomputePrimes(t)),t.version="two-prime",s=RSAPrivateKey.encode(t,"der")):s=RSAPublicKey.encode(t,"der"),i+s.toString("base64").match(/.{1,64}/g).join("\n")+o}function bn2base64url(e){return hex2b64url(pad(e.toString(16)))}function base64url2bn(e){return new asn1_1$1.bignum(Buffer.from(e,"base64"))}function string2bn(e){return/^[0-9]+$/.test(e)?new asn1_1$1.bignum(e,10):base64url2bn(e)}var pemJwk={pem2jwk:pem2jwk,jwk2pem:jwk2pem,BN:asn1_1$1.bignum};const BN$1=asn1_1$1.bignum;var toBase64=function(e,t){return e.toArrayLike(Buffer,"be",t).toString("base64").replace(/(=*)$/,"").replace(/\+/g,"-").replace(/\//g,"_")},toBn=function(e){return new BN$1(Buffer.from(e,"base64"))},util$8={toBase64:toBase64,toBn:toBn};const toBase64$1=util$8.toBase64,toBn$1=util$8.toBn,RSAPrivateKey$1=asn1_1$1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}),AlgorithmIdentifier$1=asn1_1$1.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid({"1.2.840.113549.1.1.1":"rsa"}),this.key("none").optional().null_(),this.key("curve").optional().objid(),this.key("params").optional().seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()))}),PublicKey$1=asn1_1$1.define("RSAPublicKey",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier$1),this.key("subjectPublicKey").bitstr())}),RSAPublicKey$1=asn1_1$1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});var pkcs1ToJwk=function(e){const t=RSAPrivateKey$1.decode(e,"der");return{kty:"RSA",n:toBase64$1(t.modulus),e:toBase64$1(t.publicExponent),d:toBase64$1(t.privateExponent),p:toBase64$1(t.prime1),q:toBase64$1(t.prime2),dp:toBase64$1(t.exponent1),dq:toBase64$1(t.exponent2),qi:toBase64$1(t.coefficient),alg:"RS256",kid:"2011-04-29"}},jwkToPkcs1=function(e){return RSAPrivateKey$1.encode({version:0,modulus:toBn$1(e.n),publicExponent:toBn$1(e.e),privateExponent:toBn$1(e.d),prime1:toBn$1(e.p),prime2:toBn$1(e.q),exponent1:toBn$1(e.dp),exponent2:toBn$1(e.dq),coefficient:toBn$1(e.qi)},"der")},pkixToJwk=function(e){const t=PublicKey$1.decode(e,"der"),r=RSAPublicKey$1.decode(t.subjectPublicKey.data,"der");return{kty:"RSA",n:toBase64$1(r.modulus),e:toBase64$1(r.publicExponent),alg:"RS256",kid:"2011-04-29"}},jwkToPkix=function(e){return PublicKey$1.encode({algorithm:{algorithm:"rsa",none:null},subjectPublicKey:{data:RSAPublicKey$1.encode({modulus:toBn$1(e.n),publicExponent:toBn$1(e.e)},"der")}},"der")},rsaUtils={pkcs1ToJwk:pkcs1ToJwk,jwkToPkcs1:jwkToPkcs1,pkixToJwk:pkixToJwk,jwkToPkix:jwkToPkix};let keypair$1;try{if("keypair"===process.env.LP2P_FORCE_CRYPTO_LIB)throw new Error("Force keypair usage");const e=ursa;keypair$1=({bits:t})=>{const r=e.generatePrivateKey(t);return{private:r.toPrivatePem(),public:r.toPublicPem()}}}catch(e){if("ursa"===process.env.LP2P_FORCE_CRYPTO_LIB)throw e;keypair$1=keypair}const pemToJwk=pemJwk.pem2jwk,jwkToPem=pemJwk.jwk2pem;var utils$q=rsaUtils,generateKey=function(e,t){nextTick(()=>{let r;try{const n=keypair$1({bits:e});r={privateKey:pemToJwk(n.private),publicKey:pemToJwk(n.public)}}catch(e){return t(e)}t(null,r)})},unmarshalPrivateKey=function(e,t){nextTick(()=>{if(!e)return t(new Error("Key is invalid"));t(null,{privateKey:e,publicKey:{kty:e.kty,n:e.n,e:e.e}})})},getRandomValues=randomBytes_1$1,hashAndSign=function(e,t,r){nextTick(()=>{let n;try{const i=crypto$l.createSign("RSA-SHA256");i.update(t);const o=jwkToPem(e);n=i.sign(o)}catch(e){return r(new Error("Key or message is invalid!: "+e.message))}r(null,n)})},hashAndVerify=function(e,t,r,n){nextTick(()=>{let i;try{const o=crypto$l.createVerify("RSA-SHA256");o.update(r);const s=jwkToPem(e);i=o.verify(s,t)}catch(e){return n(new Error("Key or message is invalid!:"+e.message))}n(null,i)})},rsa$2={utils:utils$q,generateKey:generateKey,unmarshalPrivateKey:unmarshalPrivateKey,getRandomValues:getRandomValues,hashAndSign:hashAndSign,hashAndVerify:hashAndVerify},sha512_1=createCommonjsModule(function(e){var t=e.exports=forge.sha512=forge.sha512||{};forge.md.sha512=forge.md.algorithms.sha512=t;var r=forge.sha384=forge.sha512.sha384=forge.sha512.sha384||{};r.create=function(){return t.create("SHA-384")},forge.md.sha384=forge.md.algorithms.sha384=r,forge.sha512.sha256=forge.sha512.sha256||{create:function(){return t.create("SHA-512/256")}},forge.md["sha512/256"]=forge.md.algorithms["sha512/256"]=forge.sha512.sha256,forge.sha512.sha224=forge.sha512.sha224||{create:function(){return t.create("SHA-512/224")}},forge.md["sha512/224"]=forge.md.algorithms["sha512/224"]=forge.sha512.sha224,t.create=function(e){if(i||(n=String.fromCharCode(128),n+=forge.util.fillString(String.fromCharCode(0),128),o=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(s={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],s["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],s["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],s["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],i=!0),void 0===e&&(e="SHA-512"),!(e in s))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=s[e],r=null,c=forge.util.createBuffer(),u=new Array(80),f=0;f<80;++f)u[f]=new Array(2);var l=64;switch(e){case"SHA-384":l=48;break;case"SHA-512/256":l=32;break;case"SHA-512/224":l=28}var d={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:l,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var e=d.messageLengthSize/4,n=0;n<e;++n)d.fullMessageLength.push(0);c=forge.util.createBuffer(),r=new Array(t.length);for(n=0;n<t.length;++n)r[n]=t[n].slice(0);return d}};return d.start(),d.update=function(e,t){"utf8"===t&&(e=forge.util.encodeUtf8(e));var n=e.length;d.messageLength+=n,n=[n/4294967296>>>0,n>>>0];for(var i=d.fullMessageLength.length-1;i>=0;--i)d.fullMessageLength[i]+=n[1],n[1]=n[0]+(d.fullMessageLength[i]/4294967296>>>0),d.fullMessageLength[i]=d.fullMessageLength[i]>>>0,n[0]=n[1]/4294967296>>>0;return c.putBytes(e),a(r,u,c),(c.read>2048||0===c.length())&&c.compact(),d},d.digest=function(){var t=forge.util.createBuffer();t.putBytes(c.bytes());var i,o=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize&d.blockLength-1;t.putBytes(n.substr(0,d.blockLength-o));for(var s=8*d.fullMessageLength[0],f=0;f<d.fullMessageLength.length-1;++f)s+=(i=8*d.fullMessageLength[f+1])/4294967296>>>0,t.putInt32(s>>>0),s=i>>>0;t.putInt32(s);var l=new Array(r.length);for(f=0;f<r.length;++f)l[f]=r[f].slice(0);a(l,u,t);var h,p=forge.util.createBuffer();h="SHA-512"===e?l.length:"SHA-384"===e?l.length-2:l.length-4;for(f=0;f<h;++f)p.putInt32(l[f][0]),f===h-1&&"SHA-512/224"===e||p.putInt32(l[f][1]);return p},d};var n=null,i=!1,o=null,s=null;function a(e,t,r){for(var n,i,s,a,c,u,f,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M=r.length();M>=128;){for(B=0;B<16;++B)t[B][0]=r.getInt32()>>>0,t[B][1]=r.getInt32()>>>0;for(;B<80;++B)n=(((P=(O=t[B-2])[0])>>>19|(R=O[1])<<13)^(R>>>29|P<<3)^P>>>6)>>>0,i=((P<<13|R>>>19)^(R<<3|P>>>29)^(P<<26|R>>>6))>>>0,s=(((P=(x=t[B-15])[0])>>>1|(R=x[1])<<31)^(P>>>8|R<<24)^P>>>7)>>>0,a=((P<<31|R>>>1)^(P<<24|R>>>8)^(P<<25|R>>>7))>>>0,N=t[B-7],L=t[B-16],R=i+N[1]+a+L[1],t[B][0]=n+N[0]+s+L[0]+(R/4294967296>>>0)>>>0,t[B][1]=R>>>0;for(p=e[0][0],b=e[0][1],m=e[1][0],g=e[1][1],y=e[2][0],v=e[2][1],_=e[3][0],$=e[3][1],S=e[4][0],E=e[4][1],w=e[5][0],C=e[5][1],A=e[6][0],k=e[6][1],T=e[7][0],I=e[7][1],B=0;B<80;++B)f=((S>>>14|E<<18)^(S>>>18|E<<14)^(E>>>9|S<<23))>>>0,l=(A^S&(w^A))>>>0,c=((p>>>28|b<<4)^(b>>>2|p<<30)^(b>>>7|p<<25))>>>0,u=((p<<4|b>>>28)^(b<<30|p>>>2)^(b<<25|p>>>7))>>>0,d=(p&m|y&(p^m))>>>0,h=(b&g|v&(b^g))>>>0,R=I+(((S<<18|E>>>14)^(S<<14|E>>>18)^(E<<23|S>>>9))>>>0)+((k^E&(C^k))>>>0)+o[B][1]+t[B][1],n=T+f+l+o[B][0]+t[B][0]+(R/4294967296>>>0)>>>0,i=R>>>0,s=c+d+((R=u+h)/4294967296>>>0)>>>0,a=R>>>0,T=A,I=k,A=w,k=C,w=S,C=E,S=_+n+((R=$+i)/4294967296>>>0)>>>0,E=R>>>0,_=y,$=v,y=m,v=g,m=p,g=b,p=n+s+((R=i+a)/4294967296>>>0)>>>0,b=R>>>0;R=e[0][1]+b,e[0][0]=e[0][0]+p+(R/4294967296>>>0)>>>0,e[0][1]=R>>>0,R=e[1][1]+g,e[1][0]=e[1][0]+m+(R/4294967296>>>0)>>>0,e[1][1]=R>>>0,R=e[2][1]+v,e[2][0]=e[2][0]+y+(R/4294967296>>>0)>>>0,e[2][1]=R>>>0,R=e[3][1]+$,e[3][0]=e[3][0]+_+(R/4294967296>>>0)>>>0,e[3][1]=R>>>0,R=e[4][1]+E,e[4][0]=e[4][0]+S+(R/4294967296>>>0)>>>0,e[4][1]=R>>>0,R=e[5][1]+C,e[5][0]=e[5][0]+w+(R/4294967296>>>0)>>>0,e[5][1]=R>>>0,R=e[6][1]+k,e[6][0]=e[6][0]+A+(R/4294967296>>>0)>>>0,e[6][1]=R>>>0,R=e[7][1]+I,e[7][0]=e[7][0]+T+(R/4294967296>>>0)>>>0,e[7][1]=R>>>0,M-=128}}});const pbm=src$i(keys_proto);class RsaPublicKey{constructor(e){this._key=e}verify(e,t,r){ensure(r),rsa$2.hashAndVerify(this._key,t,e,r)}marshal(){return rsa$2.utils.jwkToPkix(this._key)}get bytes(){return pbm.PublicKey.encode({Type:pbm.KeyType.RSA,Data:this.marshal()})}encrypt(e){return this._key.encrypt(e,"RSAES-PKCS1-V1_5")}equals(e){return this.bytes.equals(e.bytes)}hash(e){ensure(e),src$p(this.bytes,"sha2-256",e)}}class RsaPrivateKey{constructor(e,t){this._key=e,this._publicKey=t}genSecret(){return rsa$2.getRandomValues(16)}sign(e,t){ensure(t),rsa$2.hashAndSign(this._key,e,t)}get public(){if(!this._publicKey)throw new Error("public key not provided");return new RsaPublicKey(this._publicKey)}decrypt(e,t){rsa$2.decrypt(this._key,e,t)}marshal(){return rsa$2.utils.jwkToPkcs1(this._key)}get bytes(){return pbm.PrivateKey.encode({Type:pbm.KeyType.RSA,Data:this.marshal()})}equals(e){return this.bytes.equals(e.bytes)}hash(e){ensure(e),src$p(this.bytes,"sha2-256",e)}id(e){this.public.hash((t,r)=>{if(t)return e(t);e(null,bs58.encode(r))})}export(e,t,r){"function"==typeof t&&(r=t,t=e,e="pkcs-8"),ensure(r),nextTick(()=>{let n=null,i=null;try{const r=new forge.util.ByteBuffer(this.marshal()),o=forge.asn1.fromDer(r),s=forge.pki.privateKeyFromAsn1(o);if("pkcs-8"===e){const e={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};i=forge.pki.encryptRsaPrivateKey(s,t,e)}else n=new Error(`Unknown export format '${e}'`)}catch(e){n=e}r(n,i)})}}function unmarshalRsaPrivateKey(e,t){const r=rsa$2.utils.pkcs1ToJwk(e);rsa$2.unmarshalPrivateKey(r,(e,r)=>{if(e)return t(e);t(null,new RsaPrivateKey(r.privateKey,r.publicKey))})}function unmarshalRsaPublicKey(e){const t=rsa$2.utils.pkixToJwk(e);return new RsaPublicKey(t)}function fromJwk(e,t){rsa$2.unmarshalPrivateKey(e,(e,r)=>{if(e)return t(e);t(null,new RsaPrivateKey(r.privateKey,r.publicKey))})}function generateKeyPair(e,t){rsa$2.generateKey(e,(e,r)=>{if(e)return t(e);t(null,new RsaPrivateKey(r.privateKey,r.publicKey))})}function ensure(e){if("function"!=typeof e)throw new Error("callback is required")}var rsaClass={RsaPublicKey:RsaPublicKey,RsaPrivateKey:RsaPrivateKey,unmarshalRsaPublicKey:unmarshalRsaPublicKey,unmarshalRsaPrivateKey:unmarshalRsaPrivateKey,generateKeyPair:generateKeyPair,fromJwk:fromJwk},naclFast=createCommonjsModule(function(e){!function(e){var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=t(),s=t([1]),a=t([56129,1]),c=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function h(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function p(e,t,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=e[t+o]^r[n+o];return(1&s-1>>>8)-1}function b(e,t,r,n){return p(e,t,r,n,16)}function m(e,t,r,n){return p(e,t,r,n,32)}function g(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,f=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,b=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,v=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,$=o,S=s,E=a,w=c,C=u,A=f,k=l,T=d,I=h,B=p,P=b,R=m,O=g,N=y,x=v,L=_,M=0;M<20;M+=2)$^=(i=(O^=(i=(I^=(i=(C^=(i=$+O|0)<<7|i>>>25)+$|0)<<9|i>>>23)+C|0)<<13|i>>>19)+I|0)<<18|i>>>14,A^=(i=(S^=(i=(N^=(i=(B^=(i=A+S|0)<<7|i>>>25)+A|0)<<9|i>>>23)+B|0)<<13|i>>>19)+N|0)<<18|i>>>14,P^=(i=(k^=(i=(E^=(i=(x^=(i=P+k|0)<<7|i>>>25)+P|0)<<9|i>>>23)+x|0)<<13|i>>>19)+E|0)<<18|i>>>14,L^=(i=(R^=(i=(T^=(i=(w^=(i=L+R|0)<<7|i>>>25)+L|0)<<9|i>>>23)+w|0)<<13|i>>>19)+T|0)<<18|i>>>14,$^=(i=(w^=(i=(E^=(i=(S^=(i=$+w|0)<<7|i>>>25)+$|0)<<9|i>>>23)+S|0)<<13|i>>>19)+E|0)<<18|i>>>14,A^=(i=(C^=(i=(T^=(i=(k^=(i=A+C|0)<<7|i>>>25)+A|0)<<9|i>>>23)+k|0)<<13|i>>>19)+T|0)<<18|i>>>14,P^=(i=(B^=(i=(I^=(i=(R^=(i=P+B|0)<<7|i>>>25)+P|0)<<9|i>>>23)+R|0)<<13|i>>>19)+I|0)<<18|i>>>14,L^=(i=(x^=(i=(N^=(i=(O^=(i=L+x|0)<<7|i>>>25)+L|0)<<9|i>>>23)+O|0)<<13|i>>>19)+N|0)<<18|i>>>14;$=$+o|0,S=S+s|0,E=E+a|0,w=w+c|0,C=C+u|0,A=A+f|0,k=k+l|0,T=T+d|0,I=I+h|0,B=B+p|0,P=P+b|0,R=R+m|0,O=O+g|0,N=N+y|0,x=x+v|0,L=L+_|0,e[0]=$>>>0&255,e[1]=$>>>8&255,e[2]=$>>>16&255,e[3]=$>>>24&255,e[4]=S>>>0&255,e[5]=S>>>8&255,e[6]=S>>>16&255,e[7]=S>>>24&255,e[8]=E>>>0&255,e[9]=E>>>8&255,e[10]=E>>>16&255,e[11]=E>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=C>>>0&255,e[17]=C>>>8&255,e[18]=C>>>16&255,e[19]=C>>>24&255,e[20]=A>>>0&255,e[21]=A>>>8&255,e[22]=A>>>16&255,e[23]=A>>>24&255,e[24]=k>>>0&255,e[25]=k>>>8&255,e[26]=k>>>16&255,e[27]=k>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=I>>>0&255,e[33]=I>>>8&255,e[34]=I>>>16&255,e[35]=I>>>24&255,e[36]=B>>>0&255,e[37]=B>>>8&255,e[38]=B>>>16&255,e[39]=B>>>24&255,e[40]=P>>>0&255,e[41]=P>>>8&255,e[42]=P>>>16&255,e[43]=P>>>24&255,e[44]=R>>>0&255,e[45]=R>>>8&255,e[46]=R>>>16&255,e[47]=R>>>24&255,e[48]=O>>>0&255,e[49]=O>>>8&255,e[50]=O>>>16&255,e[51]=O>>>24&255,e[52]=N>>>0&255,e[53]=N>>>8&255,e[54]=N>>>16&255,e[55]=N>>>24&255,e[56]=x>>>0&255,e[57]=x>>>8&255,e[58]=x>>>16&255,e[59]=x>>>24&255,e[60]=L>>>0&255,e[61]=L>>>8&255,e[62]=L>>>16&255,e[63]=L>>>24&255}(e,t,r,n)}function y(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,f=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,b=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,v=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,$=0;$<20;$+=2)o^=(i=(g^=(i=(h^=(i=(u^=(i=o+g|0)<<7|i>>>25)+o|0)<<9|i>>>23)+u|0)<<13|i>>>19)+h|0)<<18|i>>>14,f^=(i=(s^=(i=(y^=(i=(p^=(i=f+s|0)<<7|i>>>25)+f|0)<<9|i>>>23)+p|0)<<13|i>>>19)+y|0)<<18|i>>>14,b^=(i=(l^=(i=(a^=(i=(v^=(i=b+l|0)<<7|i>>>25)+b|0)<<9|i>>>23)+v|0)<<13|i>>>19)+a|0)<<18|i>>>14,_^=(i=(m^=(i=(d^=(i=(c^=(i=_+m|0)<<7|i>>>25)+_|0)<<9|i>>>23)+c|0)<<13|i>>>19)+d|0)<<18|i>>>14,o^=(i=(c^=(i=(a^=(i=(s^=(i=o+c|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,f^=(i=(u^=(i=(d^=(i=(l^=(i=f+u|0)<<7|i>>>25)+f|0)<<9|i>>>23)+l|0)<<13|i>>>19)+d|0)<<18|i>>>14,b^=(i=(p^=(i=(h^=(i=(m^=(i=b+p|0)<<7|i>>>25)+b|0)<<9|i>>>23)+m|0)<<13|i>>>19)+h|0)<<18|i>>>14,_^=(i=(v^=(i=(y^=(i=(g^=(i=_+v|0)<<7|i>>>25)+_|0)<<9|i>>>23)+g|0)<<13|i>>>19)+y|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=f>>>0&255,e[5]=f>>>8&255,e[6]=f>>>16&255,e[7]=f>>>24&255,e[8]=b>>>0&255,e[9]=b>>>8&255,e[10]=b>>>16&255,e[11]=b>>>24&255,e[12]=_>>>0&255,e[13]=_>>>8&255,e[14]=_>>>16&255,e[15]=_>>>24&255,e[16]=l>>>0&255,e[17]=l>>>8&255,e[18]=l>>>16&255,e[19]=l>>>24&255,e[20]=d>>>0&255,e[21]=d>>>8&255,e[22]=d>>>16&255,e[23]=d>>>24&255,e[24]=h>>>0&255,e[25]=h>>>8&255,e[26]=h>>>16&255,e[27]=h>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,n)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function _(e,t,r,n,i,o,s){var a,c,u=new Uint8Array(16),f=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=o[c];for(;i>=64;){for(g(f,u,s,v),c=0;c<64;c++)e[t+c]=r[n+c]^f[c];for(a=1,c=8;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(g(f,u,s,v),c=0;c<i;c++)e[t+c]=r[n+c]^f[c];return 0}function $(e,t,r,n,i){var o,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(g(c,a,i,v),s=0;s<64;s++)e[t+s]=c[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(g(c,a,i,v),s=0;s<r;s++)e[t+s]=c[s];return 0}function S(e,t,r,n,i){var o=new Uint8Array(32);y(o,n,i,v);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return $(e,t,r,s,o)}function E(e,t,r,n,i,o,s){var a=new Uint8Array(32);y(a,o,s,v);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=o[u+16];return _(e,t,r,n,i,c,a)}var w=function(e){var t,r,n,i,o,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function C(e,t,r,n,i,o){var s=new w(o);return s.update(r,n,i),s.finish(e,t),0}function A(e,t,r,n,i,o){var s=new Uint8Array(16);return C(s,0,r,n,i,o),b(e,t,s,0)}function k(e,t,r,n,i){var o;if(r<32)return-1;for(E(e,0,t,0,r,n,i),C(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function T(e,t,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(S(s,0,32,n,i),0!==A(t,16,t,32,r-32,s))return-1;for(E(e,0,t,0,r,n,i),o=0;o<32;o++)e[o]=0;return 0}function I(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function B(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function P(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function R(e,r){var n,i,o,s=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(B(a),B(a),B(a),i=0;i<2;i++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,P(a,s,1-o)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function O(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return R(r,e),R(n,t),m(r,0,n,0)}function N(e){var t=new Uint8Array(32);return R(t,e),1&t[0]}function x(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function L(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function M(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function D(e,t,r){var n,i,o=0,s=0,a=0,c=0,u=0,f=0,l=0,d=0,h=0,p=0,b=0,m=0,g=0,y=0,v=0,_=0,$=0,S=0,E=0,w=0,C=0,A=0,k=0,T=0,I=0,B=0,P=0,R=0,O=0,N=0,x=0,L=r[0],M=r[1],D=r[2],F=r[3],j=r[4],U=r[5],H=r[6],K=r[7],G=r[8],V=r[9],z=r[10],q=r[11],W=r[12],J=r[13],X=r[14],Y=r[15];o+=(n=t[0])*L,s+=n*M,a+=n*D,c+=n*F,u+=n*j,f+=n*U,l+=n*H,d+=n*K,h+=n*G,p+=n*V,b+=n*z,m+=n*q,g+=n*W,y+=n*J,v+=n*X,_+=n*Y,s+=(n=t[1])*L,a+=n*M,c+=n*D,u+=n*F,f+=n*j,l+=n*U,d+=n*H,h+=n*K,p+=n*G,b+=n*V,m+=n*z,g+=n*q,y+=n*W,v+=n*J,_+=n*X,$+=n*Y,a+=(n=t[2])*L,c+=n*M,u+=n*D,f+=n*F,l+=n*j,d+=n*U,h+=n*H,p+=n*K,b+=n*G,m+=n*V,g+=n*z,y+=n*q,v+=n*W,_+=n*J,$+=n*X,S+=n*Y,c+=(n=t[3])*L,u+=n*M,f+=n*D,l+=n*F,d+=n*j,h+=n*U,p+=n*H,b+=n*K,m+=n*G,g+=n*V,y+=n*z,v+=n*q,_+=n*W,$+=n*J,S+=n*X,E+=n*Y,u+=(n=t[4])*L,f+=n*M,l+=n*D,d+=n*F,h+=n*j,p+=n*U,b+=n*H,m+=n*K,g+=n*G,y+=n*V,v+=n*z,_+=n*q,$+=n*W,S+=n*J,E+=n*X,w+=n*Y,f+=(n=t[5])*L,l+=n*M,d+=n*D,h+=n*F,p+=n*j,b+=n*U,m+=n*H,g+=n*K,y+=n*G,v+=n*V,_+=n*z,$+=n*q,S+=n*W,E+=n*J,w+=n*X,C+=n*Y,l+=(n=t[6])*L,d+=n*M,h+=n*D,p+=n*F,b+=n*j,m+=n*U,g+=n*H,y+=n*K,v+=n*G,_+=n*V,$+=n*z,S+=n*q,E+=n*W,w+=n*J,C+=n*X,A+=n*Y,d+=(n=t[7])*L,h+=n*M,p+=n*D,b+=n*F,m+=n*j,g+=n*U,y+=n*H,v+=n*K,_+=n*G,$+=n*V,S+=n*z,E+=n*q,w+=n*W,C+=n*J,A+=n*X,k+=n*Y,h+=(n=t[8])*L,p+=n*M,b+=n*D,m+=n*F,g+=n*j,y+=n*U,v+=n*H,_+=n*K,$+=n*G,S+=n*V,E+=n*z,w+=n*q,C+=n*W,A+=n*J,k+=n*X,T+=n*Y,p+=(n=t[9])*L,b+=n*M,m+=n*D,g+=n*F,y+=n*j,v+=n*U,_+=n*H,$+=n*K,S+=n*G,E+=n*V,w+=n*z,C+=n*q,A+=n*W,k+=n*J,T+=n*X,I+=n*Y,b+=(n=t[10])*L,m+=n*M,g+=n*D,y+=n*F,v+=n*j,_+=n*U,$+=n*H,S+=n*K,E+=n*G,w+=n*V,C+=n*z,A+=n*q,k+=n*W,T+=n*J,I+=n*X,B+=n*Y,m+=(n=t[11])*L,g+=n*M,y+=n*D,v+=n*F,_+=n*j,$+=n*U,S+=n*H,E+=n*K,w+=n*G,C+=n*V,A+=n*z,k+=n*q,T+=n*W,I+=n*J,B+=n*X,P+=n*Y,g+=(n=t[12])*L,y+=n*M,v+=n*D,_+=n*F,$+=n*j,S+=n*U,E+=n*H,w+=n*K,C+=n*G,A+=n*V,k+=n*z,T+=n*q,I+=n*W,B+=n*J,P+=n*X,R+=n*Y,y+=(n=t[13])*L,v+=n*M,_+=n*D,$+=n*F,S+=n*j,E+=n*U,w+=n*H,C+=n*K,A+=n*G,k+=n*V,T+=n*z,I+=n*q,B+=n*W,P+=n*J,R+=n*X,O+=n*Y,v+=(n=t[14])*L,_+=n*M,$+=n*D,S+=n*F,E+=n*j,w+=n*U,C+=n*H,A+=n*K,k+=n*G,T+=n*V,I+=n*z,B+=n*q,P+=n*W,R+=n*J,O+=n*X,N+=n*Y,_+=(n=t[15])*L,s+=38*(S+=n*D),a+=38*(E+=n*F),c+=38*(w+=n*j),u+=38*(C+=n*U),f+=38*(A+=n*H),l+=38*(k+=n*K),d+=38*(T+=n*G),h+=38*(I+=n*V),p+=38*(B+=n*z),b+=38*(P+=n*q),m+=38*(R+=n*W),g+=38*(O+=n*J),y+=38*(N+=n*X),v+=38*(x+=n*Y),o=(n=(o+=38*($+=n*M))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=u,e[5]=f,e[6]=l,e[7]=d,e[8]=h,e[9]=p,e[10]=b,e[11]=m,e[12]=g,e[13]=y,e[14]=v,e[15]=_}function F(e,t){D(e,t,t)}function j(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)F(i,i),2!==n&&4!==n&&D(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function U(e,r,n){var i,o,s=new Uint8Array(32),c=new Float64Array(80),u=t(),f=t(),l=t(),d=t(),h=t(),p=t();for(o=0;o<31;o++)s[o]=r[o];for(s[31]=127&r[31]|64,s[0]&=248,x(c,n),o=0;o<16;o++)f[o]=c[o],d[o]=u[o]=l[o]=0;for(u[0]=d[0]=1,o=254;o>=0;--o)P(u,f,i=s[o>>>3]>>>(7&o)&1),P(l,d,i),L(h,u,l),M(u,u,l),L(l,f,d),M(f,f,d),F(d,h),F(p,u),D(u,l,u),D(l,f,h),L(h,u,l),M(u,u,l),F(f,u),M(l,d,p),D(u,l,a),L(u,u,d),D(l,l,u),D(u,d,p),D(d,f,c),F(f,h),P(u,f,i),P(l,d,i);for(o=0;o<16;o++)c[o+16]=u[o],c[o+32]=l[o],c[o+48]=f[o],c[o+64]=d[o];var b=c.subarray(32),m=c.subarray(16);return j(b,b),D(m,m,b),R(e,m),0}function H(e,t){return U(e,t,i)}function K(e,t){return r(t,32),H(e,t)}function G(e,t,r){var i=new Uint8Array(32);return U(i,r,t),y(e,n,i,v)}w.prototype.blocks=function(e,t,r){for(var n,i,o,s,a,c,u,f,l,d,h,p,b,m,g,y,v,_,$,S=this.fin?0:2048,E=this.h[0],w=this.h[1],C=this.h[2],A=this.h[3],k=this.h[4],T=this.h[5],I=this.h[6],B=this.h[7],P=this.h[8],R=this.h[9],O=this.r[0],N=this.r[1],x=this.r[2],L=this.r[3],M=this.r[4],D=this.r[5],F=this.r[6],j=this.r[7],U=this.r[8],H=this.r[9];r>=16;)d=l=0,d+=(E+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*O,d+=(w+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*H),d+=(C+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*U),d+=(A+=8191&(o>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*j),l=(d+=(k+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*F))>>>13,d&=8191,d+=(T+=a>>>1&8191)*(5*D),d+=(I+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*M),d+=(B+=8191&(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*L),d+=(P+=8191&(u>>>8|(f=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*x),h=l+=(d+=(R+=f>>>5|S)*(5*N))>>>13,h+=E*N,h+=w*O,h+=C*(5*H),h+=A*(5*U),l=(h+=k*(5*j))>>>13,h&=8191,h+=T*(5*F),h+=I*(5*D),h+=B*(5*M),h+=P*(5*L),l+=(h+=R*(5*x))>>>13,h&=8191,p=l,p+=E*x,p+=w*N,p+=C*O,p+=A*(5*H),l=(p+=k*(5*U))>>>13,p&=8191,p+=T*(5*j),p+=I*(5*F),p+=B*(5*D),p+=P*(5*M),b=l+=(p+=R*(5*L))>>>13,b+=E*L,b+=w*x,b+=C*N,b+=A*O,l=(b+=k*(5*H))>>>13,b&=8191,b+=T*(5*U),b+=I*(5*j),b+=B*(5*F),b+=P*(5*D),m=l+=(b+=R*(5*M))>>>13,m+=E*M,m+=w*L,m+=C*x,m+=A*N,l=(m+=k*O)>>>13,m&=8191,m+=T*(5*H),m+=I*(5*U),m+=B*(5*j),m+=P*(5*F),g=l+=(m+=R*(5*D))>>>13,g+=E*D,g+=w*M,g+=C*L,g+=A*x,l=(g+=k*N)>>>13,g&=8191,g+=T*O,g+=I*(5*H),g+=B*(5*U),g+=P*(5*j),y=l+=(g+=R*(5*F))>>>13,y+=E*F,y+=w*D,y+=C*M,y+=A*L,l=(y+=k*x)>>>13,y&=8191,y+=T*N,y+=I*O,y+=B*(5*H),y+=P*(5*U),v=l+=(y+=R*(5*j))>>>13,v+=E*j,v+=w*F,v+=C*D,v+=A*M,l=(v+=k*L)>>>13,v&=8191,v+=T*x,v+=I*N,v+=B*O,v+=P*(5*H),_=l+=(v+=R*(5*U))>>>13,_+=E*U,_+=w*j,_+=C*F,_+=A*D,l=(_+=k*M)>>>13,_&=8191,_+=T*L,_+=I*x,_+=B*N,_+=P*O,$=l+=(_+=R*(5*H))>>>13,$+=E*H,$+=w*U,$+=C*j,$+=A*F,l=($+=k*D)>>>13,$&=8191,$+=T*M,$+=I*L,$+=B*x,$+=P*N,E=d=8191&(l=(l=((l+=($+=R*O)>>>13)<<2)+l|0)+(d&=8191)|0),w=h+=l>>>=13,C=p&=8191,A=b&=8191,k=m&=8191,T=g&=8191,I=y&=8191,B=v&=8191,P=_&=8191,R=$&=8191,t+=16,r-=16;this.h[0]=E,this.h[1]=w,this.h[2]=C,this.h[3]=A,this.h[4]=k,this.h[5]=T,this.h[6]=I,this.h[7]=B,this.h[8]=P,this.h[9]=R},w.prototype.finish=function(e,t){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},w.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var V=k,z=T;var q=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function W(e,t,r,n){for(var i,o,s,a,c,u,f,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B=new Int32Array(16),P=new Int32Array(16),R=e[0],O=e[1],N=e[2],x=e[3],L=e[4],M=e[5],D=e[6],F=e[7],j=t[0],U=t[1],H=t[2],K=t[3],G=t[4],V=t[5],z=t[6],W=t[7],J=0;n>=128;){for(S=0;S<16;S++)E=8*S+J,B[S]=r[E+0]<<24|r[E+1]<<16|r[E+2]<<8|r[E+3],P[S]=r[E+4]<<24|r[E+5]<<16|r[E+6]<<8|r[E+7];for(S=0;S<80;S++)if(i=R,o=O,s=N,a=x,c=L,u=M,f=D,F,d=j,h=U,p=H,b=K,m=G,g=V,y=z,W,A=65535&(C=W),k=C>>>16,T=65535&(w=F),I=w>>>16,A+=65535&(C=(G>>>14|L<<18)^(G>>>18|L<<14)^(L>>>9|G<<23)),k+=C>>>16,T+=65535&(w=(L>>>14|G<<18)^(L>>>18|G<<14)^(G>>>9|L<<23)),I+=w>>>16,A+=65535&(C=G&V^~G&z),k+=C>>>16,T+=65535&(w=L&M^~L&D),I+=w>>>16,w=q[2*S],A+=65535&(C=q[2*S+1]),k+=C>>>16,T+=65535&w,I+=w>>>16,w=B[S%16],k+=(C=P[S%16])>>>16,T+=65535&w,I+=w>>>16,T+=(k+=(A+=65535&C)>>>16)>>>16,A=65535&(C=$=65535&A|k<<16),k=C>>>16,T=65535&(w=_=65535&T|(I+=T>>>16)<<16),I=w>>>16,A+=65535&(C=(j>>>28|R<<4)^(R>>>2|j<<30)^(R>>>7|j<<25)),k+=C>>>16,T+=65535&(w=(R>>>28|j<<4)^(j>>>2|R<<30)^(j>>>7|R<<25)),I+=w>>>16,k+=(C=j&U^j&H^U&H)>>>16,T+=65535&(w=R&O^R&N^O&N),I+=w>>>16,l=65535&(T+=(k+=(A+=65535&C)>>>16)>>>16)|(I+=T>>>16)<<16,v=65535&A|k<<16,A=65535&(C=b),k=C>>>16,T=65535&(w=a),I=w>>>16,k+=(C=$)>>>16,T+=65535&(w=_),I+=w>>>16,O=i,N=o,x=s,L=a=65535&(T+=(k+=(A+=65535&C)>>>16)>>>16)|(I+=T>>>16)<<16,M=c,D=u,F=f,R=l,U=d,H=h,K=p,G=b=65535&A|k<<16,V=m,z=g,W=y,j=v,S%16==15)for(E=0;E<16;E++)w=B[E],A=65535&(C=P[E]),k=C>>>16,T=65535&w,I=w>>>16,w=B[(E+9)%16],A+=65535&(C=P[(E+9)%16]),k+=C>>>16,T+=65535&w,I+=w>>>16,_=B[(E+1)%16],A+=65535&(C=(($=P[(E+1)%16])>>>1|_<<31)^($>>>8|_<<24)^($>>>7|_<<25)),k+=C>>>16,T+=65535&(w=(_>>>1|$<<31)^(_>>>8|$<<24)^_>>>7),I+=w>>>16,_=B[(E+14)%16],k+=(C=(($=P[(E+14)%16])>>>19|_<<13)^(_>>>29|$<<3)^($>>>6|_<<26))>>>16,T+=65535&(w=(_>>>19|$<<13)^($>>>29|_<<3)^_>>>6),I+=w>>>16,I+=(T+=(k+=(A+=65535&C)>>>16)>>>16)>>>16,B[E]=65535&T|I<<16,P[E]=65535&A|k<<16;A=65535&(C=j),k=C>>>16,T=65535&(w=R),I=w>>>16,w=e[0],k+=(C=t[0])>>>16,T+=65535&w,I+=w>>>16,I+=(T+=(k+=(A+=65535&C)>>>16)>>>16)>>>16,e[0]=R=65535&T|I<<16,t[0]=j=65535&A|k<<16,A=65535&(C=U),k=C>>>16,T=65535&(w=O),I=w>>>16,w=e[1],k+=(C=t[1])>>>16,T+=65535&w,I+=w>>>16,I+=(T+=(k+=(A+=65535&C)>>>16)>>>16)>>>16,e[1]=O=65535&T|I<<16,t[1]=U=65535&A|k<<16,A=65535&(C=H),k=C>>>16,T=65535&(w=N),I=w>>>16,w=e[2],k+=(C=t[2])>>>16,T+=65535&w,I+=w>>>16,I+=(T+=(k+=(A+=65535&C)>>>16)>>>16)>>>16,e[2]=N=65535&T|I<<16,t[2]=H=65535&A|k<<16,A=65535&(C=K),k=C>>>16,T=65535&(w=x),I=w>>>16,w=e[3],k+=(C=t[3])>>>16,T+=65535&w,I+=w>>>16,I+=(T+=(k+=(A+=65535&C)>>>16)>>>16)>>>16,e[3]=x=65535&T|I<<16,t[3]=K=65535&A|k<<16,A=65535&(C=G),k=C>>>16,T=65535&(w=L),I=w>>>16,w=e[4],k+=(C=t[4])>>>16,T+=65535&w,I+=w>>>16,I+=(T+=(k+=(A+=65535&C)>>>16)>>>16)>>>16,e[4]=L=65535&T|I<<16,t[4]=G=65535&A|k<<16,A=65535&(C=V),k=C>>>16,T=65535&(w=M),I=w>>>16,w=e[5],k+=(C=t[5])>>>16,T+=65535&w,I+=w>>>16,I+=(T+=(k+=(A+=65535&C)>>>16)>>>16)>>>16,e[5]=M=65535&T|I<<16,t[5]=V=65535&A|k<<16,A=65535&(C=z),k=C>>>16,T=65535&(w=D),I=w>>>16,w=e[6],k+=(C=t[6])>>>16,T+=65535&w,I+=w>>>16,I+=(T+=(k+=(A+=65535&C)>>>16)>>>16)>>>16,e[6]=D=65535&T|I<<16,t[6]=z=65535&A|k<<16,A=65535&(C=W),k=C>>>16,T=65535&(w=F),I=w>>>16,w=e[7],k+=(C=t[7])>>>16,T+=65535&w,I+=w>>>16,I+=(T+=(k+=(A+=65535&C)>>>16)>>>16)>>>16,e[7]=F=65535&T|I<<16,t[7]=W=65535&A|k<<16,J+=128,n-=128}return n}function J(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,W(i,o,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,h(s,r-8,a/536870912|0,a<<3),W(i,o,s,r),n=0;n<8;n++)h(e,8*n,i[n],o[n]);return 0}function X(e,r){var n=t(),i=t(),o=t(),s=t(),a=t(),c=t(),f=t(),l=t(),d=t();M(n,e[1],e[0]),M(d,r[1],r[0]),D(n,n,d),L(i,e[0],e[1]),L(d,r[0],r[1]),D(i,i,d),D(o,e[3],r[3]),D(o,o,u),D(s,e[2],r[2]),L(s,s,s),M(a,i,n),M(c,s,o),L(f,s,o),L(l,i,n),D(e[0],a,c),D(e[1],l,f),D(e[2],f,c),D(e[3],a,l)}function Y(e,t,r){var n;for(n=0;n<4;n++)P(e[n],t[n],r)}function Z(e,r){var n=t(),i=t(),o=t();j(o,r[2]),D(n,r[0],o),D(i,r[1],o),R(e,i),e[31]^=N(n)<<7}function Q(e,t,r){var n,i;for(I(e[0],o),I(e[1],s),I(e[2],s),I(e[3],o),i=255;i>=0;--i)Y(e,t,n=r[i/8|0]>>(7&i)&1),X(t,e),X(e,e),Y(e,t,n)}function ee(e,r){var n=[t(),t(),t(),t()];I(n[0],f),I(n[1],l),I(n[2],s),D(n[3],f,l),Q(e,n,r)}function te(e,n,i){var o,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||r(n,32),J(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64,ee(a,s),Z(e,a),o=0;o<32;o++)n[o+32]=e[o];return 0}var re=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ne(e,t){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*re[i-(n-32)],r=t[i]+128>>8,t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*re[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*re[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function ie(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ne(e,r)}function oe(e,r,n,i){var o,s,a=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),f=new Float64Array(64),l=[t(),t(),t(),t()];J(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var d=n+64;for(o=0;o<n;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=a[32+o];for(J(u,e.subarray(32),n+32),ie(u),ee(l,u),Z(e,l),o=32;o<64;o++)e[o]=i[o];for(J(c,e,n+64),ie(c),o=0;o<64;o++)f[o]=0;for(o=0;o<32;o++)f[o]=u[o];for(o=0;o<32;o++)for(s=0;s<32;s++)f[o+s]+=c[o]*a[s];return ne(e.subarray(32),f),d}function se(e,r){var n=t(),i=t(),a=t(),u=t(),f=t(),l=t(),h=t();return I(e[2],s),x(e[1],r),F(a,e[1]),D(u,a,c),M(a,a,e[2]),L(u,e[2],u),F(f,u),F(l,f),D(h,l,f),D(n,h,a),D(n,n,u),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)F(i,i),1!==n&&D(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(n,n),D(n,n,a),D(n,n,u),D(n,n,u),D(e[0],n,u),F(i,e[0]),D(i,i,u),O(i,a)&&D(e[0],e[0],d),F(i,e[0]),D(i,i,u),O(i,a)?-1:(N(e[0])===r[31]>>7&&M(e[0],o,e[0]),D(e[3],e[0],e[1]),0)}function ae(e,r,n,i){var o,s=new Uint8Array(32),a=new Uint8Array(64),c=[t(),t(),t(),t()],u=[t(),t(),t(),t()];if(-1,n<64)return-1;if(se(u,i))return-1;for(o=0;o<n;o++)e[o]=r[o];for(o=0;o<32;o++)e[o+32]=i[o];if(J(a,e,n),ie(a),Q(c,u,a),ee(u,r.subarray(32)),X(c,u),Z(s,c),n-=64,m(r,0,s,0)){for(o=0;o<n;o++)e[o]=0;return-1}for(o=0;o<n;o++)e[o]=r[o+64];return n}var ce=32,ue=24,fe=32,le=32,de=ue;function he(e,t){if(e.length!==ce)throw new Error("bad key size");if(t.length!==ue)throw new Error("bad nonce size")}function pe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function be(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:y,crypto_stream_xor:E,crypto_stream:S,crypto_stream_salsa20_xor:_,crypto_stream_salsa20:$,crypto_onetimeauth:C,crypto_onetimeauth_verify:A,crypto_verify_16:b,crypto_verify_32:m,crypto_secretbox:k,crypto_secretbox_open:T,crypto_scalarmult:U,crypto_scalarmult_base:H,crypto_box_beforenm:G,crypto_box_afternm:V,crypto_box:function(e,t,r,n,i,o){var s=new Uint8Array(32);return G(s,i,o),V(e,t,r,n,s)},crypto_box_open:function(e,t,r,n,i,o){var s=new Uint8Array(32);return G(s,i,o),z(e,t,r,n,s)},crypto_box_keypair:K,crypto_hash:J,crypto_sign:oe,crypto_sign_keypair:te,crypto_sign_open:ae,crypto_secretbox_KEYBYTES:ce,crypto_secretbox_NONCEBYTES:ue,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:fe,crypto_box_SECRETKEYBYTES:le,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:de,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,r){pe(e,t,r),he(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+32]=e[o];return k(i,n,n.length,t,r),i.subarray(16)},e.secretbox.open=function(e,t,r){pe(e,t,r),he(r,t);for(var n=new Uint8Array(16+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+16]=e[o];return n.length<32?null:0!==T(i,n,n.length,t,r)?null:i.subarray(32)},e.secretbox.keyLength=ce,e.secretbox.nonceLength=ue,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(pe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return U(r,e,t),r},e.scalarMult.base=function(e){if(pe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return H(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox(t,r,o)},e.box.before=function(e,t){pe(e,t),function(e,t){if(e.length!==fe)throw new Error("bad public key size");if(t.length!==le)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return G(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(fe),t=new Uint8Array(le);return K(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(pe(e),e.length!==le)throw new Error("bad secret key size");var t=new Uint8Array(fe);return H(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=fe,e.box.secretKeyLength=le,e.box.sharedKeyLength=32,e.box.nonceLength=de,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(pe(e,t),64!==t.length)throw new Error("bad secret key size");var r=new Uint8Array(64+e.length);return oe(r,e,e.length,t),r},e.sign.open=function(e,t){if(pe(e,t),32!==t.length)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ae(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(64),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached.verify=function(e,t,r){if(pe(e,t,r),64!==t.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var n,i=new Uint8Array(64+e.length),o=new Uint8Array(64+e.length);for(n=0;n<64;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+64]=e[n];return ae(o,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return te(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(pe(e),64!==e.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(pe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=e[n];return te(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){pe(e);var t=new Uint8Array(64);return J(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return pe(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===p(e,0,t,0,e.length))},e.setPRNG=function(e){r=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG(function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];be(i)})}else void 0!==commonjsRequire&&(t=crypto$l)&&t.randomBytes&&e.setPRNG(function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];be(i)})}()}(e.exports?e.exports:self.nacl=self.nacl||{})}),publicKeyLength=naclFast.sign.publicKeyLength,privateKeyLength=naclFast.sign.secretKeyLength,generateKey$1=function(e){nextTick(()=>{let t;try{t=naclFast.sign.keyPair()}catch(t){return e(t)}e(null,t)})},generateKeyFromSeed=function(e,t){nextTick(()=>{let r;try{r=naclFast.sign.keyPair.fromSeed(e)}catch(e){return t(e)}t(null,r)})},hashAndSign$1=function(e,t,r){nextTick(()=>{r(null,Buffer.from(naclFast.sign.detached(t,e)))})},hashAndVerify$1=function(e,t,r,n){nextTick(()=>{let i;try{i=naclFast.sign.detached.verify(r,t,e)}catch(e){return n(e)}n(null,i)})},ed25519={publicKeyLength:publicKeyLength,privateKeyLength:privateKeyLength,generateKey:generateKey$1,generateKeyFromSeed:generateKeyFromSeed,hashAndSign:hashAndSign$1,hashAndVerify:hashAndVerify$1};const pbm$1=src$i(keys_proto);class Ed25519PublicKey{constructor(e){this._key=ensureKey(e,ed25519.publicKeyLength)}verify(e,t,r){ensure$1(r),ed25519.hashAndVerify(this._key,t,e,r)}marshal(){return Buffer.from(this._key)}get bytes(){return pbm$1.PublicKey.encode({Type:pbm$1.KeyType.Ed25519,Data:this.marshal()})}equals(e){return this.bytes.equals(e.bytes)}hash(e){ensure$1(e),src$p(this.bytes,"sha2-256",e)}}class Ed25519PrivateKey{constructor(e,t){this._key=ensureKey(e,ed25519.privateKeyLength),this._publicKey=ensureKey(t,ed25519.publicKeyLength)}sign(e,t){ensure$1(t),ed25519.hashAndSign(this._key,e,t)}get public(){if(!this._publicKey)throw new Error("public key not provided");return new Ed25519PublicKey(this._publicKey)}marshal(){return Buffer.concat([Buffer.from(this._key),Buffer.from(this._publicKey)])}get bytes(){return pbm$1.PrivateKey.encode({Type:pbm$1.KeyType.Ed25519,Data:this.marshal()})}equals(e){return this.bytes.equals(e.bytes)}hash(e){ensure$1(e),src$p(this.bytes,"sha2-256",e)}id(e){this.public.hash((t,r)=>{if(t)return e(t);e(null,bs58.encode(r))})}}function unmarshalEd25519PrivateKey(e,t){try{e=ensureKey(e,ed25519.privateKeyLength+ed25519.publicKeyLength)}catch(e){return t(e)}const r=e.slice(0,ed25519.privateKeyLength),n=e.slice(ed25519.privateKeyLength,e.length);t(null,new Ed25519PrivateKey(r,n))}function unmarshalEd25519PublicKey(e){return e=ensureKey(e,ed25519.publicKeyLength),new Ed25519PublicKey(e)}function generateKeyPair$1(e,t){void 0===t&&"function"==typeof e&&(t=e),ed25519.generateKey((e,r)=>{if(e)return t(e);let n;try{n=new Ed25519PrivateKey(r.secretKey,r.publicKey)}catch(e){return void t(e)}t(null,n)})}function generateKeyPairFromSeed(e,t,r){void 0===r&&"function"==typeof t&&(r=t),ed25519.generateKeyFromSeed(e,(e,t)=>{if(e)return r(e);let n;try{n=new Ed25519PrivateKey(t.secretKey,t.publicKey)}catch(e){return void r(e)}r(null,n)})}function ensure$1(e){if("function"!=typeof e)throw new Error("callback is required")}function ensureKey(e,t){if(Buffer.isBuffer(e)&&(e=new Uint8Array(e)),!(e instanceof Uint8Array)||e.length!==t)throw new Error("Key must be a Uint8Array or Buffer of length "+t);return e}var ed25519Class={Ed25519PublicKey:Ed25519PublicKey,Ed25519PrivateKey:Ed25519PrivateKey,unmarshalEd25519PrivateKey:unmarshalEd25519PrivateKey,unmarshalEd25519PublicKey:unmarshalEd25519PublicKey,generateKeyPair:generateKeyPair$1,generateKeyPairFromSeed:generateKeyPairFromSeed},sha3$5=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),toCallback$4=e=>(function(t,r){let n;try{n=e(t)}catch(e){return void process.nextTick(r,e)}process.nextTick(r,null,n)}),toBuf$2=(e,t)=>r=>{let n=e(r,t);return Buffer.from(n,"hex")},fromString$3=(e,t)=>r=>{const n=Buffer.isBuffer(r)?r.toString():r;return e(n,t)},fromNumberTo32BitBuf$8=(e,t)=>r=>{let n=e(r,t);const i=new Array(4);for(let e=0;e<4;e++)i[e]=255&n,n>>=8;return Buffer.from(i)},utils$r={toCallback:toCallback$4,toBuf:toBuf$2,fromString:fromString$3,fromNumberTo32BitBuf:fromNumberTo32BitBuf$8};const toCallback$5=utils$r.toCallback,sha1$4=toCallback$5(e=>crypto$l.createHash("sha1").update(e).digest()),sha2256$1=toCallback$5(e=>crypto$l.createHash("sha256").update(e).digest()),sha2512$1=toCallback$5(e=>crypto$l.createHash("sha512").update(e).digest());var cryptoSha12$1={sha1:sha1$4,sha2256:sha2256$1,sha2512:sha2512$1};const toCallback$6=utils$r.toCallback,minB$4=45569,minS$4=45633,blake2b$5={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$5={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$4=(e,t)=>toCallback$6(r=>{const n=t.init(e,null);return t.update(n,r),Buffer.from(t.digest(n))});var blake_1$4=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$4(t+1,blake2b$5);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$4(t+1,blake2s$5)};const toCallback$7=utils$r.toCallback,toBuf$3=utils$r.toBuf,fromString$4=utils$r.fromString,fromNumberTo32BitBuf$9=utils$r.fromNumberTo32BitBuf,dblSha2256$1=(e,t)=>{cryptoSha12$1.sha2256(e,(e,r)=>{e&&t(e),cryptoSha12$1.sha2256(Buffer.from(r),t)})};var crypto$7={sha1:cryptoSha12$1.sha1,sha2256:cryptoSha12$1.sha2256,sha2512:cryptoSha12$1.sha2512,sha3512:toCallback$7(toBuf$3(sha3$5.sha3_512)),sha3384:toCallback$7(toBuf$3(sha3$5.sha3_384)),sha3256:toCallback$7(toBuf$3(sha3$5.sha3_256)),sha3224:toCallback$7(toBuf$3(sha3$5.sha3_224)),shake128:toCallback$7(toBuf$3(sha3$5.shake_128,128)),shake256:toCallback$7(toBuf$3(sha3$5.shake_256,256)),keccak224:toCallback$7(toBuf$3(sha3$5.keccak_224)),keccak256:toCallback$7(toBuf$3(sha3$5.keccak_256)),keccak384:toCallback$7(toBuf$3(sha3$5.keccak_384)),keccak512:toCallback$7(toBuf$3(sha3$5.keccak_512)),murmur3128:toCallback$7(toBuf$3(fromString$4(murmurhash3js.x64.hash128))),murmur332:toCallback$7(fromNumberTo32BitBuf$9(fromString$4(murmurhash3js.x86.hash32))),addBlake:blake_1$4,dblSha2256:dblSha2256$1},src$q=Multihashing$4;function Multihashing$4(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");Multihashing$4.digest(e,t,r,(e,i)=>{if(e)return n(e);n(null,src.encode(i,t,r))})}Multihashing$4.Buffer=Buffer,Multihashing$4.multihash=src,Multihashing$4.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=Multihashing$4.createHash(t)}catch(e){return o(e)}i(e,o)},Multihashing$4.createHash=function(e){if(e=src.coerceCode(e),!Multihashing$4.functions[e])throw new Error("multihash function "+e+" not yet supported");return Multihashing$4.functions[e]},Multihashing$4.functions={17:crypto$7.sha1,18:crypto$7.sha2256,19:crypto$7.sha2512,20:crypto$7.sha3512,21:crypto$7.sha3384,22:crypto$7.sha3256,23:crypto$7.sha3224,24:crypto$7.shake128,25:crypto$7.shake256,26:crypto$7.keccak224,27:crypto$7.keccak256,28:crypto$7.keccak384,29:crypto$7.keccak512,34:crypto$7.murmur3128,35:crypto$7.murmur332,86:crypto$7.dblSha2256},crypto$7.addBlake(Multihashing$4.functions);var setImmediate$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=setImmediate_1)&&r.__esModule?r:{default:r};t.default=n.default,e.exports=t.default});unwrapExports(setImmediate$1);const HASH_ALGORITHM="sha2-256";var crypto$8=e=>{function t(e){if(!secp256k1$1.privateKeyVerify(e))throw new Error("Invalid private key")}return{generateKey:function(t){let r;do{r=e(32)}while(!secp256k1$1.privateKeyVerify(r));((e,r)=>setImmediate$1(()=>t(e,r)))(null,r)},privateKeyLength:32,hashAndSign:function(e,t,r){const n=(e,t)=>setImmediate$1(()=>r(e,t));src$q.digest(t,HASH_ALGORITHM,(t,r)=>{if(t)return n(t);try{const i=secp256k1$1.sign(r,e),o=secp256k1$1.signatureExport(i.signature);return n(null,o)}catch(t){n(t)}})},hashAndVerify:function(e,t,r,n){const i=(e,t)=>setImmediate$1(()=>n(e,t));src$q.digest(r,HASH_ALGORITHM,(r,n)=>{if(r)return i(r);try{t=secp256k1$1.signatureImport(t);const o=secp256k1$1.verify(n,t,e);return i(null,o)}catch(r){i(r)}})},compressPublicKey:function(e){if(!secp256k1$1.publicKeyVerify(e))throw new Error("Invalid public key");return secp256k1$1.publicKeyConvert(e,!0)},decompressPublicKey:function(e){return secp256k1$1.publicKeyConvert(e,!1)},validatePrivateKey:t,validatePublicKey:function(e){if(!secp256k1$1.publicKeyVerify(e))throw new Error("Invalid public key")},computePublicKey:function(e){return t(e),secp256k1$1.publicKeyCreate(e)}}},src$r=(e,t,r)=>{r=r||crypto$8(t);class n{constructor(e){r.validatePublicKey(e),this._key=e}verify(e,t,n){o(n),r.hashAndVerify(this._key,t,e,n)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return e.PublicKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()})}equals(e){return this.bytes.equals(e.bytes)}hash(e){o(e),src$q(this.bytes,"sha2-256",e)}}class i{constructor(e,t){this._key=e,this._publicKey=t||r.computePublicKey(e),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(e,t){o(t),r.hashAndSign(this._key,e,t)}get public(){return new n(this._publicKey)}marshal(){return this._key}get bytes(){return e.PrivateKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()})}equals(e){return this.bytes.equals(e.bytes)}hash(e){o(e),src$q(this.bytes,"sha2-256",e)}id(e){this.public.hash((t,r)=>{if(t)return e(t);e(null,bs58.encode(r))})}}function o(e){if("function"!=typeof e)throw new Error("callback is required")}return{Secp256k1PublicKey:n,Secp256k1PrivateKey:i,unmarshalSecp256k1PrivateKey:function(e,t){t(null,new i(e),null)},unmarshalSecp256k1PublicKey:function(e){return new n(e)},generateKeyPair:function(e,t){void 0===t&&"function"==typeof e&&(t=e),o(t),r.generateKey((e,r)=>{if(e)return t(e);let n;try{n=new i(r)}catch(e){return t(e)}t(null,n)})}}},whilst_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){s=(0,i.default)(s||r.default);var a=(0,o.default)(t);if(!e())return s(null);var c=function(t){if(t)return s(t);if(e())return a(c);var r=(0,n.default)(arguments,1);s.apply(null,[null].concat(r))};a(c)};var r=s(noop_1),n=s(slice_1),i=s(onlyOnce_1),o=s(wrapAsync_1);function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(whilst_1);var lengths={SHA1:20,SHA256:32,SHA512:64},create$1=function(e,t,r){r(null,{digest(r,n){const i=crypto$l.createHmac(e.toLowerCase(),t);i.update(r),nextTick(()=>{n(null,i.digest())})},length:lengths[e]})},hmac$3={create:create$1};const cipherMap={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};var keyStretcher=(e,t,r,n)=>{const i=cipherMap[e];if(!i)return n(new Error("unkown cipherType passed"));if(!t)return n(new Error("unkown hashType passed"));const o=i.keySize,s=i.ivSize,a=Buffer.from("key expansion"),c=2*(s+o+20);hmac$3.create(t,r,(e,t)=>{if(e)return n(e);t.digest(a,(e,r)=>{if(e)return n(e);let i=[],u=0;whilst_1(()=>u<c,function(e){t.digest(Buffer.concat([r,a]),(n,o)=>{if(n)return e(n);let s=o.length;u+s>c&&(s=c-u),i.push(o),u+=s,t.digest(r,(t,n)=>{if(t)return e(t);r=n,e()})})},function(e){if(e)return n(e);const t=c/2,r=Buffer.concat(i),a=r.slice(0,t),u=r.slice(t,c),f=e=>({iv:e.slice(0,s),cipherKey:e.slice(s,s+o),macKey:e.slice(s+o)});n(null,{k1:f(a),k2:f(u)})})})})};const curves={"P-256":"prime256v1","P-384":"secp384r1","P-521":"secp521r1"};var generateEphmeralKeyPair=function(e,t){if(!curves[e])return t(new Error(`Unkown curve: ${e}`));const r=crypto$l.createECDH(curves[e]);r.generateKeys(),nextTick(()=>t(null,{key:r.getPublicKey(),genSharedKey(e,t,n){let i;"function"==typeof t&&(n=t,t=null),t&&r.setPrivateKey(t.private);try{i=r.computeSecret(e)}catch(e){return n(e)}nextTick(()=>n(null,i))}}))},ecdh={generateEphmeralKeyPair:generateEphmeralKeyPair},ephemeralKeys=(e,t)=>{ecdh.generateEphmeralKeyPair(e,t)},keys$1=createCommonjsModule(function(e,t){const r=src$i(keys_proto);t=e.exports;const n={rsa:rsaClass,ed25519:ed25519Class,secp256k1:src$r(r,randomBytes_1$1)};function i(e){return void 0!==n[e.toLowerCase()]}t.supportedKeys=n,t.keysPBM=r,t.keyStretcher=keyStretcher,t.generateEphemeralKeyPair=ephemeralKeys,t.generateKeyPair=(e,t,r)=>{let i=n[e.toLowerCase()];if(!i)return r(new Error("invalid or unsupported key type"));i.generateKeyPair(t,r)},t.generateKeyPairFromSeed=(e,t,r,i)=>{let o=n[e.toLowerCase()];return o?"ed25519"!==e.toLowerCase()?i(new Error("Seed key derivation is unimplemented for RSA or secp256k1")):void o.generateKeyPairFromSeed(t,r,i):i(new Error("invalid or unsupported key type"))},t.unmarshalPublicKey=e=>{const t=r.PublicKey.decode(e),i=t.Data;switch(t.Type){case r.KeyType.RSA:return n.rsa.unmarshalRsaPublicKey(i);case r.KeyType.Ed25519:return n.ed25519.unmarshalEd25519PublicKey(i);case r.KeyType.Secp256k1:if(n.secp256k1)return n.secp256k1.unmarshalSecp256k1PublicKey(i);throw new Error("secp256k1 support requires libp2p-crypto-secp256k1 package");default:throw new Error("invalid or unsupported key type")}},t.marshalPublicKey=(e,t)=>{if(!i(t=(t||"rsa").toLowerCase()))throw new Error("invalid or unsupported key type");return e.bytes},t.unmarshalPrivateKey=(e,t)=>{let i;try{i=r.PrivateKey.decode(e)}catch(e){return t(e)}const o=i.Data;switch(i.Type){case r.KeyType.RSA:return n.rsa.unmarshalRsaPrivateKey(o,t);case r.KeyType.Ed25519:return n.ed25519.unmarshalEd25519PrivateKey(o,t);case r.KeyType.Secp256k1:return n.secp256k1?n.secp256k1.unmarshalSecp256k1PrivateKey(o,t):t(new Error("secp256k1 support requires libp2p-crypto-secp256k1 package"));default:t(new Error("invalid or unsupported key type"))}},t.marshalPrivateKey=(e,t)=>{if(!i(t=(t||"rsa").toLowerCase()))throw new Error("invalid or unsupported key type");return e.bytes},t.import=(e,t,r)=>{try{const i=forge.pki.decryptRsaPrivateKey(e,t);if(null===i)throw new Error("Cannot read the key, most likely the password is wrong or not a RSA key");let o=forge.asn1.toDer(forge.pki.privateKeyToAsn1(i));return o=Buffer.from(o.getBytes(),"binary"),n.rsa.unmarshalRsaPrivateKey(o,r)}catch(e){r(e)}}}),keys_1$1=keys$1.supportedKeys,keys_2=keys$1.keysPBM,keys_3=keys$1.keyStretcher,keys_4=keys$1.generateEphemeralKeyPair,keys_5=keys$1.generateKeyPair,keys_6=keys$1.generateKeyPairFromSeed,keys_7=keys$1.unmarshalPublicKey,keys_8=keys$1.marshalPublicKey,keys_9=keys$1.unmarshalPrivateKey,keys_10=keys$1.marshalPrivateKey,waterfall=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t=(0,i.default)(t||n.default),!(0,r.default)(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var c=0;function u(t){var r=(0,a.default)(e[c++]);t.push((0,s.default)(f)),r.apply(null,t)}function f(r){if(r||c===e.length)return t.apply(null,arguments);u((0,o.default)(arguments,1))}u([])};var r=c(isArray_1),n=c(noop_1),i=c(once_1),o=c(slice_1),s=c(onlyOnce_1),a=c(wrapAsync_1);function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(waterfall);var src$s=createCommonjsModule(function(e,t){const r=classIs(class{constructor(e,t,r){assert$t(Buffer.isBuffer(e),"invalid id provided"),t&&r&&assert$t(t.public.bytes.equals(r.bytes),"inconsistent arguments"),this._id=e,this._idB58String=src.toB58String(this.id),this._privKey=t,this._pubKey=r}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){return this._pubKey?this._pubKey:this._privKey?this._privKey.public:void 0}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return keys$1.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return keys$1.marshalPrivateKey(this.privKey)}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let t=6;return e.length<t&&(t=e.length),"<peer.ID "+e.substr(0,t)+">"}toJSON(){return{id:this.toB58String(),privKey:n(this.marshalPrivKey()),pubKey:n(this.marshalPubKey())}}toHexString(){return src.toHexString(this.id)}toBytes(){return this.id}toB58String(){return this._idB58String}isEqual(e){if(Buffer.isBuffer(e))return this.id.equals(e);if(e.id)return this.id.equals(e.id);throw new Error("not valid Id")}isValid(e){this.privKey&&this.privKey.public&&this.privKey.public.bytes&&Buffer.isBuffer(this.pubKey.bytes)&&this.privKey.public.bytes.equals(this.pubKey.bytes)?e():e(new Error("Keys not match"))}},{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});function n(e){if(e)return e.toString("base64")}(t=e.exports=r).create=function(e,t){"function"==typeof e&&(t=e,e={}),(e=e||{}).bits=e.bits||2048,waterfall([t=>keys$1.generateKeyPair("RSA",e.bits,t),(e,t)=>e.public.hash((r,n)=>{t(r,n,e)})],(e,n,i)=>{if(e)return t(e);t(null,new r(n,i))})},t.createFromHexString=function(e){return new r(src.fromHexString(e))},t.createFromBytes=function(e){return new r(e)},t.createFromB58String=function(e){return new r(src.fromB58String(e))},t.createFromPubKey=function(e,t){if("function"!=typeof t)throw new Error("callback is required");let n;try{let r=e;if("string"==typeof r&&(r=Buffer.from(e,"base64")),!Buffer.isBuffer(r))throw new Error("Supplied key is neither a base64 string nor a buffer");n=keys$1.unmarshalPublicKey(r)}catch(e){return t(e)}n.hash((e,i)=>{if(e)return t(e);t(null,new r(i,null,n))})},t.createFromPrivKey=function(e,t){if("function"!=typeof t)throw new Error("callback is required");let n=e;try{if("string"==typeof n&&(n=Buffer.from(e,"base64")),!Buffer.isBuffer(n))throw new Error("Supplied key is neither a base64 string nor a buffer")}catch(e){return t(e)}waterfall([e=>keys$1.unmarshalPrivateKey(n,e),(e,t)=>e.public.hash((r,n)=>{t(r,n,e)})],(e,n,i)=>{if(e)return t(e);t(null,new r(n,i,i.public))})},t.createFromJSON=function(e,t){if("function"!=typeof t)throw new Error("callback is required");let n,i,o,s;try{n=src.fromB58String(e.id),i=e.privKey&&Buffer.from(e.privKey,"base64"),o=e.pubKey&&Buffer.from(e.pubKey,"base64"),s=o&&keys$1.unmarshalPublicKey(o)}catch(e){return t(e)}i?waterfall([e=>keys$1.unmarshalPrivateKey(i,e),(e,t)=>e.public.hash((r,n)=>{t(r,n,e)}),(e,t,r)=>{s?s.hash((n,i)=>{r(n,e,t,i)}):r(null,e,t)}],(e,i,o,a)=>e?t(e):s&&!i.equals(a)?t(new Error("Public and private key do not match")):n&&!i.equals(n)?t(new Error("Id and private key do not match")):void t(null,new r(n,o,s))):t(null,new r(n,null,s))},t.isPeerId=function(e){return Boolean("object"==typeof e&&e._id&&e._idB58String)}}),src_1$7=src$s.create,src_2$7=src$s.createFromHexString,src_3$7=src$s.createFromBytes,src_4$7=src$s.createFromB58String,src_5$5=src$s.createFromPubKey,src_6$4=src$s.createFromPrivKey,src_7$3=src$s.createFromJSON,src_8$3=src$s.isPeerId;function ensureMultiaddr(e){return src$2.isMultiaddr(e)?e:src$2(e)}var utils$s={ensureMultiaddr:ensureMultiaddr},uniqueBy_1=uniqueBy;function uniqueBy(e,t){var r=[],n={};if("function"!=typeof t){var i=t;t=function(e){return e[i]}}return e.forEach(function(e){var i=t(e);n[i]||(n[i]=!0,r.push(e))}),r}const{ensureMultiaddr:ensureMultiaddr$1}=utils$s;class MultiaddrSet{constructor(e){this._multiaddrs=e||[],this._observedMultiaddrs=[]}add(e){e=ensureMultiaddr$1(e),this.has(e)||this._multiaddrs.push(e)}addSafe(e){e=ensureMultiaddr$1(e),this._observedMultiaddrs.some((t,r)=>{if(t.equals(e))return this.add(e),this._observedMultiaddrs.splice(r,1),!0})||this._observedMultiaddrs.push(e)}toArray(){return this._multiaddrs.slice()}get size(){return this._multiaddrs.length}forEach(e){return this._multiaddrs.forEach(e)}filterBy(e){return"object"!=typeof e||"function"!=typeof e.matches||"function"!=typeof e.partialMatch||"function"!=typeof e.toString?[]:this._multiaddrs.filter(t=>e.matches(t))}has(e){return e=ensureMultiaddr$1(e),this._multiaddrs.some(t=>t.equals(e))}delete(e){e=ensureMultiaddr$1(e),this._multiaddrs.some((t,r)=>{if(t.equals(e))return this._multiaddrs.splice(r,1),!0})}replace(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),e.forEach(e=>this.delete(e)),t.forEach(e=>this.add(e))}clear(){this._multiaddrs=[]}distinct(){return uniqueBy_1(this._multiaddrs,e=>[e.toOptions().port,e.toOptions().transport].join())}}var multiaddrSet=MultiaddrSet;const{ensureMultiaddr:ensureMultiaddr$2}=utils$s;class PeerInfo{constructor(e){assert$t(e,"Missing peerId. Use Peer.create(cb) to create one"),this.id=e,this.multiaddrs=new multiaddrSet,this.protocols=new Set,this._connectedMultiaddr=void 0}connect(e){if(e=ensureMultiaddr$2(e),!this.multiaddrs.has(e)&&e.toString()!==`/ipfs/${this.id.toB58String()}`)throw new Error("can't be connected to missing multiaddr from set");this._connectedMultiaddr=e}disconnect(){this._connectedMultiaddr=void 0}isConnected(){return this._connectedMultiaddr}}PeerInfo.create=(e,t)=>{if("function"==typeof e)return t=e,e=null,void src$s.create((e,r)=>{if(e)return t(e);t(null,new PeerInfo(r))});"function"==typeof e.toJSON?t(null,new PeerInfo(e)):src$s.createFromJSON(e,(e,r)=>t(e,new PeerInfo(r)))},PeerInfo.isPeerInfo=e=>Boolean("object"==typeof e&&e.id&&e.multiaddrs);var src$t=PeerInfo,ciphers={createCipheriv:crypto$l.createCipheriv,createDecipheriv:crypto$l.createDecipheriv};const CIPHER_MODES={16:"aes-128-ctr",32:"aes-256-ctr"};var create$2=function(e,t,r){const n=CIPHER_MODES[e.length];if(!n)return r(new Error("Invalid key length"));const i=ciphers.createCipheriv(n,e,t),o=ciphers.createDecipheriv(n,e,t);r(null,{encrypt(e,t){t(null,i.update(e))},decrypt(e,t){t(null,o.update(e))}})},aes$2={create:create$2};const hashName={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function pbkdf2$1(e,t,r,n,i){const o=hashName[i];if(!o)throw new Error(`Hash '${i}' is unknown or not supported`);const s=pbkdf2(e,t,r,n,o);return util_1$5.encode64(s)}var pbkdf2_1$1=pbkdf2$1,src$u=createCommonjsModule(function(e,t){(t=e.exports).aes=aes$2,t.hmac=hmac$3,t.keys=keys$1,t.randomBytes=randomBytes_1$1,t.pbkdf2=pbkdf2_1$1}),src_1$8=src$u.aes,src_2$8=src$u.hmac,src_3$8=src$u.keys,src_4$8=src$u.randomBytes,src_5$6=src$u.pbkdf2,CIDUtil$6={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$6=CIDUtil$6;class CID$5{constructor(e,t,r,n){if(_CID$5.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$5.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$5.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$5.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$5(0,this.codec,this.multihash)}toV1(){return new _CID$5(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$6.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$5=classIs(CID$5,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$5.codecs=baseTable;var src$v=_CID$5;const urlPattern$1=/^https?:\/\/[^\/]+\/(ip(f|n)s)\/((\w+).*)/,pathPattern$1=/^\/(ip(f|n)s)\/((\w+).*)/,defaultProtocolMatch$1=1,defaultHashMath$1=4,fqdnPattern$1=/^https?:\/\/([^\/]+)\.(ip(?:f|n)s)\.[^\/]+/,fqdnHashMatch$1=1,fqdnProtocolMatch$1=2;function isMultihash$1(e){const t=convertToString$1(e);try{const e=Buffer.from(bs58.decode(t));return src.decode(e),!0}catch(e){return!1}}function isMultibase$1(e){try{return src$1.isEncoded(e)}catch(e){return!1}}function isCID$1(e){try{return new src$v(e),!0}catch(e){return!1}}function isMultiaddr$1(e){if(!e)return!1;if(src$2.isMultiaddr(e))return!0;try{return new src$2(e),!0}catch(e){return!1}}function isPeerMultiaddr$1(e){return isMultiaddr$1(e)&&src$3.IPFS.matches(e)}function isIpfs$1(e,t,r=defaultProtocolMatch$1,n=defaultHashMath$1){const i=convertToString$1(e);if(!i)return!1;const o=i.match(t);if(!o)return!1;if("ipfs"!==o[r])return!1;let s=o[n];return s&&t===fqdnPattern$1&&(s=s.toLowerCase()),isCID$1(s)}function isIpns$1(e,t,r=defaultProtocolMatch$1,n){const i=convertToString$1(e);if(!i)return!1;const o=i.match(t);if(!o)return!1;if("ipns"!==o[r])return!1;if(n&&t===fqdnPattern$1){let e=o[n];return isCID$1(e=e.toLowerCase())}return!0}function isString$1(e){return"string"==typeof e}function convertToString$1(e){return Buffer.isBuffer(e)?bs58.encode(e):!!isString$1(e)&&e}const ipfsSubdomain$1=e=>isIpfs$1(e,fqdnPattern$1,2,1),ipnsSubdomain$1=e=>isIpns$1(e,fqdnPattern$1,2,1);var src$w={multihash:isMultihash$1,multiaddr:isMultiaddr$1,peerMultiaddr:isPeerMultiaddr$1,cid:isCID$1,base32cid:e=>"base32"===isMultibase$1(e)&&isCID$1(e),ipfsSubdomain:ipfsSubdomain$1,ipnsSubdomain:ipnsSubdomain$1,subdomain:e=>ipfsSubdomain$1(e)||ipnsSubdomain$1(e),subdomainPattern:fqdnPattern$1,ipfsUrl:e=>isIpfs$1(e,urlPattern$1),ipnsUrl:e=>isIpns$1(e,urlPattern$1),url:e=>isIpfs$1(e,urlPattern$1)||isIpns$1(e,urlPattern$1),urlPattern:urlPattern$1,ipfsPath:e=>isIpfs$1(e,pathPattern$1),ipnsPath:e=>isIpns$1(e,pathPattern$1),path:e=>isIpfs$1(e,pathPattern$1)||isIpns$1(e,pathPattern$1),pathPattern:pathPattern$1,urlOrPath:e=>isIpfs$1(e,urlPattern$1)||isIpns$1(e,urlPattern$1)||isIpfs$1(e,pathPattern$1)||isIpns$1(e,pathPattern$1),cidPath:e=>isString$1(e)&&!isCID$1(e)&&isIpfs$1(`/ipfs/${e}`,pathPattern$1)};function getB58Str(e){let t;if("string"==typeof e)t=e;else if(Buffer.isBuffer(e))t=bs58.encode(e).toString();else if(src$s.isPeerId(e))t=e.toB58String();else{if(!src$t.isPeerInfo(e))throw new Error("not valid PeerId or PeerInfo, or B58Str");t=e.id.toB58String()}return t}class PeerBook{constructor(){this._peers={}}has(e){const t=getB58Str(e);return Boolean(this._peers[t])}put(e,t){const r=this._peers[e.id.toB58String()];if(!r||t)return this._peers[e.id.toB58String()]=e,e;e.multiaddrs.forEach(e=>r.multiaddrs.add(e));const n=e.isConnected();return n&&r.connect(n),e.protocols.forEach(e=>r.protocols.add(e)),!r.id.privKey&&e.id.privKey&&(r.id.privKey=e.id.privKey),!r.id.pubKey&&e.id.pubKey&&(r.id.pubKey=e.id.pubKey),r}get(e){const t=getB58Str(e),r=this._peers[t];if(r)return r;throw new Error("PeerInfo not found")}getAll(){return this._peers}getAllArray(){return Object.keys(this._peers).map(e=>this._peers[e])}getMultiaddrs(e){return this.get(e).multiaddrs.toArray()}remove(e){const t=getB58Str(e);this._peers[t]&&delete this._peers[t]}}var src$x=PeerBook,sha3$6=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),toCallback$8=e=>(function(t,r){let n;try{n=e(t)}catch(e){return void process.nextTick(r,e)}process.nextTick(r,null,n)}),toBuf$4=(e,t)=>r=>{let n=e(r,t);return Buffer.from(n,"hex")},fromString$5=(e,t)=>r=>{const n=Buffer.isBuffer(r)?r.toString():r;return e(n,t)},fromNumberTo32BitBuf$a=(e,t)=>r=>{let n=e(r,t);const i=new Array(4);for(let e=0;e<4;e++)i[e]=255&n,n>>=8;return Buffer.from(i)},utils$t={toCallback:toCallback$8,toBuf:toBuf$4,fromString:fromString$5,fromNumberTo32BitBuf:fromNumberTo32BitBuf$a};const toCallback$9=utils$t.toCallback,sha1$5=toCallback$9(e=>crypto$l.createHash("sha1").update(e).digest()),sha2256$2=toCallback$9(e=>crypto$l.createHash("sha256").update(e).digest()),sha2512$2=toCallback$9(e=>crypto$l.createHash("sha512").update(e).digest());var cryptoSha12$2={sha1:sha1$5,sha2256:sha2256$2,sha2512:sha2512$2};const toCallback$a=utils$t.toCallback,minB$5=45569,minS$5=45633,blake2b$6={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$6={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$5=(e,t)=>toCallback$a(r=>{const n=t.init(e,null);return t.update(n,r),Buffer.from(t.digest(n))});var blake_1$5=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$5(t+1,blake2b$6);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$5(t+1,blake2s$6)};const toCallback$b=utils$t.toCallback,toBuf$5=utils$t.toBuf,fromString$6=utils$t.fromString,fromNumberTo32BitBuf$b=utils$t.fromNumberTo32BitBuf,dblSha2256$2=(e,t)=>{cryptoSha12$2.sha2256(e,(e,r)=>{e&&t(e),cryptoSha12$2.sha2256(Buffer.from(r),t)})};var crypto$9={sha1:cryptoSha12$2.sha1,sha2256:cryptoSha12$2.sha2256,sha2512:cryptoSha12$2.sha2512,sha3512:toCallback$b(toBuf$5(sha3$6.sha3_512)),sha3384:toCallback$b(toBuf$5(sha3$6.sha3_384)),sha3256:toCallback$b(toBuf$5(sha3$6.sha3_256)),sha3224:toCallback$b(toBuf$5(sha3$6.sha3_224)),shake128:toCallback$b(toBuf$5(sha3$6.shake_128,128)),shake256:toCallback$b(toBuf$5(sha3$6.shake_256,256)),keccak224:toCallback$b(toBuf$5(sha3$6.keccak_224)),keccak256:toCallback$b(toBuf$5(sha3$6.keccak_256)),keccak384:toCallback$b(toBuf$5(sha3$6.keccak_384)),keccak512:toCallback$b(toBuf$5(sha3$6.keccak_512)),murmur3128:toCallback$b(toBuf$5(fromString$6(murmurhash3js.x64.hash128))),murmur332:toCallback$b(fromNumberTo32BitBuf$b(fromString$6(murmurhash3js.x86.hash32))),addBlake:blake_1$5,dblSha2256:dblSha2256$2},src$y=Multihashing$5;function Multihashing$5(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");Multihashing$5.digest(e,t,r,(e,i)=>{if(e)return n(e);n(null,src.encode(i,t,r))})}Multihashing$5.Buffer=Buffer,Multihashing$5.multihash=src,Multihashing$5.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=Multihashing$5.createHash(t)}catch(e){return o(e)}i(e,o)},Multihashing$5.createHash=function(e){if(e=src.coerceCode(e),!Multihashing$5.functions[e])throw new Error("multihash function "+e+" not yet supported");return Multihashing$5.functions[e]},Multihashing$5.functions={17:crypto$9.sha1,18:crypto$9.sha2256,19:crypto$9.sha2512,20:crypto$9.sha3512,21:crypto$9.sha3384,22:crypto$9.sha3256,23:crypto$9.sha3224,24:crypto$9.shake128,25:crypto$9.shake256,26:crypto$9.keccak224,27:crypto$9.keccak256,28:crypto$9.keccak384,29:crypto$9.keccak512,34:crypto$9.murmur3128,35:crypto$9.murmur332,86:crypto$9.dblSha2256},crypto$9.addBlake(Multihashing$5.functions),Multihashing$5.validate=(e,t,r)=>{Multihashing$5(e,src.decode(t).name,(e,n)=>{if(e)return r(e);r(e,0===Buffer.compare(t,n))})};var s$3=1e3,m$2=60*s$3,h=60*m$2,d=24*h,w=7*d,y=365.25*d,ms=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$3(e);if("number"===r&&isFinite(e))return t.long?fmtLong(e):fmtShort(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$3(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y;case"weeks":case"week":case"w":return r*w;case"days":case"day":case"d":return r*d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$2;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort(e){var t=Math.abs(e);return t>=d?Math.round(e/d)+"d":t>=h?Math.round(e/h)+"h":t>=m$2?Math.round(e/m$2)+"m":t>=s$3?Math.round(e/s$3)+"s":e+"ms"}function fmtLong(e){var t=Math.abs(e);return t>=d?plural(e,t,d,"day"):t>=h?plural(e,t,h,"hour"):t>=m$2?plural(e,t,m$2,"minute"):t>=s$3?plural(e,t,s$3,"second"):e+" ms"}function plural(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$4=setup,browser=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$4(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1=browser.log,browser_2=browser.formatArgs,browser_3=browser.save,browser_4=browser.load,browser_5=browser.useColors,browser_6=browser.storage,browser_7=browser.colors,hasFlag=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return-1!==n&&(-1===i||n<i)};const env=process.env;let forceColor;function translateLevel(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function supportsColor(e){if(!1===forceColor)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(e&&!e.isTTY&&!0!==forceColor)return 0;const t=forceColor?1:0;if("win32"===process.platform){const e=os.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in env)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in env)||"codeship"===env.CI_NAME?1:t;if("TEAMCITY_VERSION"in env)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;if("truecolor"===env.COLORTERM)return 3;if("TERM_PROGRAM"in env){const e=parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(env.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)?1:"COLORTERM"in env?1:(env.TERM,t)}function getSupportLevel(e){return translateLevel(supportsColor(e))}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")?forceColor=!1:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(forceColor=!0),"FORCE_COLOR"in env&&(forceColor=0===env.FORCE_COLOR.length||0!==parseInt(env.FORCE_COLOR,10));var supportsColor_1={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)},node$2=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$4(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1=node$2.init,node_2=node$2.log,node_3=node$2.formatArgs,node_4=node$2.save,node_5=node$2.load,node_6=node$2.useColors,node_7=node$2.colors,node_8=node$2.inspectOpts,src$z=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser:e.exports=node$2});class StructError extends TypeError{static format(e){const{type:t,path:r,value:n}=e;return`Expected a value of type \`${t}\`${r.length?` for \`${r.join(".")}\``:""} but received \`${JSON.stringify(n)}\`.`}constructor(e){super(StructError.format(e));const{data:t,path:r,value:n,reason:i,type:o,errors:s=[]}=e;this.data=t,this.path=r,this.value=n,this.reason=i,this.type=o,this.errors=s,s.length||s.push(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack}}var toString$2=Object.prototype.toString,kindOf=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;if("boolean"===t)return"boolean";if("string"===t)return"string";if("number"===t)return"number";if("symbol"===t)return"symbol";if("function"===t)return isGeneratorFn(e)?"generatorfunction":"function";if(isArray$3(e))return"array";if(isBuffer$1(e))return"buffer";if(isArguments$1(e))return"arguments";if(isDate(e))return"date";if(isError(e))return"error";if(isRegexp(e))return"regexp";switch(ctorName(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(isGeneratorObj(e))return"generator";switch(t=toString$2.call(e)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")};function ctorName(e){return e.constructor?e.constructor.name:null}function isArray$3(e){return Array.isArray?Array.isArray(e):e instanceof Array}function isError(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}function isDate(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}function isRegexp(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}function isGeneratorFn(e,t){return"GeneratorFunction"===ctorName(e)}function isGeneratorObj(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}function isArguments$1(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}function isBuffer$1(e){return!(!e.constructor||"function"!=typeof e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const IS_STRUCT="@@__STRUCT__@@",KIND="@@__KIND__@@";function isStruct(e){return!(!e||!e[IS_STRUCT])}function resolveDefaults(e,t){return"function"==typeof e?e(t):e}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};class Kind{constructor(e,t,r){this.name=e,this.type=t,this.validate=r}}function any(e,t,r){if(isStruct(e))return e[KIND];if(e instanceof Kind)return e;switch(kindOf(e)){case"array":return e.length>1?tuple(e,t,r):list(e,t,r);case"function":return func(e,t);case"object":return object(e,t,r);case"string":{let n,i=!0;if(e.endsWith("?")&&(i=!1,e=e.slice(0,-1)),e.includes("|")){n=union(e.split(/\s*\|\s*/g),t,r)}else if(e.includes("&")){n=intersection(e.split(/\s*&\s*/g),t,r)}else n=scalar(e,t,r);return i||(n=optional(n,void 0,r)),n}}throw"production"!==process.env.NODE_ENV?new Error(`A schema definition must be an object, array, string or function, but you passed: ${e}`):new Error(`Invalid schema: ${e}`)}function dict(e,t,r){if("array"!==kindOf(e)||2!==e.length)throw"production"!==process.env.NODE_ENV?new Error(`Dict structs must be defined as an array with two elements, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);const n=scalar("object",void 0,r),i=any(e[0],void 0,r),o=any(e[1],void 0,r),s=`dict<${i.type},${o.type}>`;return new Kind("dict",s,e=>{const r=resolveDefaults(t);e=r?_extends({},r,e):e;const[a]=n.validate(e);if(a)return a.type=s,[a];const c={},u=[];for(let t in e){const r=e[t],[n,s]=i.validate(t);if(n){(n.errors||[n]).forEach(r=>{r.path=[t].concat(r.path),r.data=e,u.push(r)});continue}t=s;const[a,f]=o.validate(r);a?(a.errors||[a]).forEach(r=>{r.path=[t].concat(r.path),r.data=e,u.push(r)}):c[t]=f}if(u.length){const e=u[0];return e.errors=u,[e]}return[void 0,c]})}function en(e,t,r){if("array"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Enum structs must be defined as an array, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);const n=e.map(e=>{try{return JSON.stringify(e)}catch(t){return String(e)}}).join(" | ");return new Kind("enum",n,(r=resolveDefaults(t))=>e.includes(r)?[void 0,r]:[{data:r,path:[],value:r,type:n}])}function enums(e,t,r){return list([en(e,void 0)],t,r)}function func(e,t,r){if("function"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Function structs must be defined as a function, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);return new Kind("function","<function>",(r=resolveDefaults(t),n)=>{const i=e(r,n);let o,s={path:[],reason:null};switch(kindOf(i)){case"boolean":o=i;break;case"string":o=!1,s.reason=i;break;case"object":o=!1,s=_extends({},s,i);break;default:throw"production"!==process.env.NODE_ENV?new Error(`Validator functions must return a boolean, an error reason string or an error reason object, but you passed: ${e}`):new Error(`Invalid result: ${i}`)}return o?[void 0,r]:[_extends({type:"<function>",value:r,data:r},s)]})}function instance(e,t,r){const n=`instance<${e.name}>`;return new Kind("instance",n,(r=resolveDefaults(t))=>r instanceof e?[void 0,r]:[{data:r,path:[],value:r,type:n}])}function inter(e,t,r){if("object"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Interface structs must be defined as an object, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);const n=[],i={};for(const t in e){n.push(t);const o=any(e[t],void 0,r);i[t]=o}const o=`{${n.join()}}`;return new Kind("interface",o,e=>{const r=resolveDefaults(t);e=r?_extends({},r,e):e;const n=[],o=e;for(const r in i){let s=e[r];const a=i[r];void 0===s&&(s=resolveDefaults(t&&t[r],e));const[c,u]=a.validate(s,e);c?(c.errors||[c]).forEach(t=>{t.path=[r].concat(t.path),t.data=e,n.push(t)}):(r in e||void 0!==u)&&(o[r]=u)}if(n.length){const e=n[0];return e.errors=n,[e]}return[void 0,o]})}function lazy(e,t,r){if("function"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Lazy structs must be defined as an function that returns a schema, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);let n,i;return n=new Kind("lazy","lazy...",t=>(i=e(),n.name=i.kind,n.type=i.type,n.validate=i.validate,n.validate(t)))}function dynamic(e,t,r){if("function"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Dynamic structs must be defined as a function, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);return new Kind("dynamic","dynamic...",(r=resolveDefaults(t),n)=>{const i=e(r,n);if("function"!==kindOf(i))throw"production"!==process.env.NODE_ENV?new Error(`Dynamic structs must return a schema, but you passed: ${i}`):new Error(`Invalid schema: ${i}`);const[o,s]=i.validate(r);return o?[o]:[void 0,s]})}function list(e,t,r){if("array"!==kindOf(e)||1!==e.length)throw"production"!==process.env.NODE_ENV?new Error(`List structs must be defined as an array with a single element, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);const n=scalar("array",void 0,r),i=any(e[0],void 0,r),o=`[${i.type}]`;return new Kind("list",o,(e=resolveDefaults(t))=>{const[r,s]=n.validate(e);if(r)return r.type=o,[r];e=s;const a=[],c=[];for(let t=0;t<e.length;t++){const r=e[t],[n,o]=i.validate(r);n?(n.errors||[n]).forEach(r=>{r.path=[t].concat(r.path),r.data=e,a.push(r)}):c[t]=o}if(a.length){const e=a[0];return e.errors=a,[e]}return[void 0,c]})}function literal(e,t,r){const n=`literal: ${JSON.stringify(e)}`;return new Kind("literal",n,(r=resolveDefaults(t))=>r===e?[void 0,r]:[{data:r,path:[],value:r,type:n}])}function object(e,t,r){if("object"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Object structs must be defined as an object, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);const n=scalar("object",void 0,r),i=[],o={};for(const t in e){i.push(t);const n=any(e[t],void 0,r);o[t]=n}const s=`{${i.join()}}`;return new Kind("object",s,(e=resolveDefaults(t))=>{const[r]=n.validate(e);if(r)return r.type=s,[r];const i=[],a={},c=Object.keys(e),u=Object.keys(o);if(new Set(c.concat(u)).forEach(r=>{let n=e[r];const s=o[r];if(void 0===n&&(n=resolveDefaults(t&&t[r],e)),!s){const t={data:e,path:[r],value:n};return void i.push(t)}const[c,u]=s.validate(n,e);c?(c.errors||[c]).forEach(t=>{t.path=[r].concat(t.path),t.data=e,i.push(t)}):(r in e||void 0!==u)&&(a[r]=u)}),i.length){const e=i[0];return e.errors=i,[e]}return[void 0,a]})}function optional(e,t,r){return union([e,"undefined"],t,r)}function partial(e,t,r){if("object"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Partial structs must be defined as an object, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);const n=scalar("object",void 0,r),i=[],o={};for(const t in e){i.push(t);const n=any(e[t],void 0,r);o[t]=n}const s=`{${i.join()},...}`;return new Kind("partial",s,(e=resolveDefaults(t))=>{const[r]=n.validate(e);if(r)return r.type=s,[r];const i=[],a={};for(const r in o){let n=e[r];const s=o[r];void 0===n&&(n=resolveDefaults(t&&t[r],e));const[c,u]=s.validate(n,e);c?(c.errors||[c]).forEach(t=>{t.path=[r].concat(t.path),t.data=e,i.push(t)}):(r in e||void 0!==u)&&(a[r]=u)}if(i.length){const e=i[0];return e.errors=i,[e]}return[void 0,a]})}function scalar(e,t,r){if("string"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Scalar structs must be defined as a string, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);const{types:n}=r,i=n[e];if("function"!==kindOf(i))throw"production"!==process.env.NODE_ENV?new Error(`No struct validator function found for type "${e}".`):new Error(`Invalid type: ${e}`);const o=func(i,t),s=e;return new Kind("scalar",s,e=>{const[t,r]=o.validate(e);return t?(t.type=s,[t]):[void 0,r]})}function tuple(e,t,r){if("array"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Tuple structs must be defined as an array, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);const n=e.map(e=>any(e,void 0,r)),i=scalar("array",void 0,r),o=`[${n.map(e=>e.type).join()}]`;return new Kind("tuple",o,(e=resolveDefaults(t))=>{const[r]=i.validate(e);if(r)return r.type=o,[r];const s=[],a=[],c=Math.max(e.length,n.length);for(let t=0;t<c;t++){const r=n[t],i=e[t];if(!r){const r={data:e,path:[t],value:i};a.push(r);continue}const[o,c]=r.validate(i);o?(o.errors||[o]).forEach(r=>{r.path=[t].concat(r.path),r.data=e,a.push(r)}):s[t]=c}if(a.length){const e=a[0];return e.errors=a,[e]}return[void 0,s]})}function union(e,t,r){if("array"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Union structs must be defined as an array, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);const n=e.map(e=>any(e,void 0,r)),i=n.map(e=>e.type).join(" | ");return new Kind("union",i,(e=resolveDefaults(t))=>{const r=[];for(const t of n){const[n,i]=t.validate(e);if(!n)return[void 0,i];r.push(n)}return r[0].type=i,r})}function intersection(e,t,r){if("array"!==kindOf(e))throw"production"!==process.env.NODE_ENV?new Error(`Intersection structs must be defined as an array, but you passed: ${e}`):new Error(`Invalid schema: ${e}`);const n=e.map(e=>any(e,void 0,r)),i=n.map(e=>e.type).join(" & ");return new Kind("intersection",i,(e=resolveDefaults(t))=>{let r=e;for(const e of n){const[t,n]=e.validate(r);if(t)return t.type=i,[t];r=n}return[void 0,r]})}const Kinds={any:any,dict:dict,enum:en,enums:enums,function:func,instance:instance,interface:inter,lazy:lazy,list:list,literal:literal,object:object,optional:optional,partial:partial,scalar:scalar,tuple:tuple,union:union,intersection:intersection,dynamic:dynamic},TYPES=["arguments","array","boolean","buffer","error","float32array","float64array","function","generatorfunction","int16array","int32array","int8array","map","null","number","object","promise","regexp","set","string","symbol","uint16array","uint32array","uint8array","uint8clampedarray","undefined","weakmap","weakset"],Types={any:e=>void 0!==e};function superstruct(e={}){const t=_extends({},Types,e.types||{});function r(e,r,n={}){isStruct(e)&&(e=e.schema);const i=Kinds.any(e,r,_extends({},n,{types:t}));function o(e){if(this instanceof o)throw"production"!==process.env.NODE_ENV?new Error("The `Struct` creation function should not be used with the `new` keyword."):new Error("Invalid `new` keyword!");return o.assert(e)}return Object.defineProperty(o,IS_STRUCT,{value:!0}),Object.defineProperty(o,KIND,{value:i}),o.kind=i.name,o.type=i.type,o.schema=e,o.defaults=r,o.options=n,o.assert=e=>{const[t,r]=i.validate(e);if(t)throw new StructError(t);return r},o.test=e=>{const[t]=i.validate(e);return!t},o.validate=e=>{const[t,r]=i.validate(e);return t?[new StructError(t)]:[void 0,r]},o}return Object.keys(Kinds).forEach(e=>{const n=Kinds[e];r[e]=(e,i,o)=>{return r(n(e,i,_extends({},o,{types:t})),i,o)}}),r}TYPES.forEach(e=>{Types[e]=t=>kindOf(t)===e}),Types.date=e=>"date"===kindOf(e)&&!isNaN(e);const struct=superstruct();var index_es=Object.freeze({struct:struct,superstruct:superstruct,isStruct:isStruct,StructError:StructError});const{struct:struct$1,superstruct:superstruct$1}=index_es,{optional:optional$1,union:union$1}=struct$1,s$4=superstruct$1({types:{multiaddr:e=>{if(null===e)return`multiaddr invalid, value must be a string, Buffer, or another Multiaddr got ${e}`;try{src$2(e)}catch(e){return`multiaddr invalid, ${e.message}`}return!0},"multiaddr-ipfs":e=>!!src$3.IPFS.matches(e)||"multiaddr IPFS invalid"}}),configSchema=s$4({repo:optional$1(s$4("object|string")),repoOwner:"boolean?",preload:s$4({enabled:"boolean?",addresses:optional$1(s$4(["multiaddr"])),interval:"number?"},{enabled:!0,interval:3e4}),init:optional$1(union$1(["boolean",s$4({bits:"number?",emptyRepo:"boolean?",privateKey:optional$1(s$4("object|string")),pass:"string?"})])),start:"boolean?",offline:"boolean?",pass:"string?",silent:"boolean?",relay:"object?",EXPERIMENTAL:optional$1(s$4({pubsub:"boolean?",ipnsPubsub:"boolean?",sharding:"boolean?",dht:"boolean?"})),connectionManager:"object?",config:optional$1(s$4({API:"object?",Addresses:optional$1(s$4({Swarm:optional$1(s$4(["multiaddr"])),API:"multiaddr?",Gateway:"multiaddr"})),Discovery:optional$1(s$4({MDNS:optional$1(s$4({Enabled:"boolean?",Interval:"number?"})),webRTCStar:optional$1(s$4({Enabled:"boolean?"}))})),Bootstrap:optional$1(s$4(["multiaddr-ipfs"]))})),ipld:"object?",libp2p:optional$1(union$1(["function","object"]))},{repoOwner:!0}),validate=e=>{const[t,r]=configSchema.validate(e);if(t)throw t;return r};var config$1={validate:validate},parallel=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){s=s||r.default;var a=(0,n.default)(t)?[]:{};e(t,function(e,t,r){(0,o.default)(e)(function(e,n){arguments.length>2&&(n=(0,i.default)(arguments,1)),a[t]=n,r(e)})},function(e){s(e,a)})};var r=s(noop_1),n=s(isArrayLike_1),i=s(slice_1),o=s(wrapAsync_1);function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(parallel);var eachOfSeries=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(eachOfLimit_1),n=i(doLimit_1);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(r.default,1),e.exports=t.default});unwrapExports(eachOfSeries);var series_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(n.default,e,t)};var r=i(parallel),n=i(eachOfSeries);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(series_1);var parallel$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(r.default,e,t)};var r=i(eachOf),n=i(parallel);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(parallel$1);var withoutIndex=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,r,n){return e(t,n)}},e.exports=t.default});unwrapExports(withoutIndex);var each=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o){(0,r.default)(e,(0,n.default)((0,i.default)(t)),o)};var r=o(eachOf),n=o(withoutIndex),i=o(wrapAsync_1);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});function get$1(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}unwrapExports(each);var s$5=1e3,m$3=60*s$5,h$1=60*m$3,d$1=24*h$1,w$1=7*d$1,y$1=365.25*d$1,ms$1=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$4(e);if("number"===r&&isFinite(e))return t.long?fmtLong$1(e):fmtShort$1(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$4(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$1;case"weeks":case"week":case"w":return r*w$1;case"days":case"day":case"d":return r*d$1;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$1;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$3;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$5;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$1(e){var t=Math.abs(e);return t>=d$1?Math.round(e/d$1)+"d":t>=h$1?Math.round(e/h$1)+"h":t>=m$3?Math.round(e/m$3)+"m":t>=s$5?Math.round(e/s$5)+"s":e+"ms"}function fmtLong$1(e){var t=Math.abs(e);return t>=d$1?plural$1(e,t,d$1,"day"):t>=h$1?plural$1(e,t,h$1,"hour"):t>=m$3?plural$1(e,t,m$3,"minute"):t>=s$5?plural$1(e,t,s$5,"second"):e+" ms"}function plural$1(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$1(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$1,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$5=setup$1,browser$1=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$5(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$1=browser$1.log,browser_2$1=browser$1.formatArgs,browser_3$1=browser$1.save,browser_4$1=browser$1.load,browser_5$1=browser$1.useColors,browser_6$1=browser$1.storage,browser_7$1=browser$1.colors,node$3=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$5(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$1=node$3.init,node_2$1=node$3.log,node_3$1=node$3.formatArgs,node_4$1=node$3.save,node_5$1=node$3.load,node_6$1=node$3.useColors,node_7$1=node$3.colors,node_8$1=node$3.inspectOpts,src$A=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$1:e.exports=node$3}),isNumeric$2=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil$1=Math.ceil,mathfloor$1=Math.floor,bignumberError$1="[BigNumber Error] ",tooManyDigits$1=bignumberError$1+"Number primitive has more than 15 significant digits: ",BASE$1=1e14,LOG_BASE$1=14,MAX_SAFE_INTEGER$3=9007199254740991,POWS_TEN$1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE$1=1e7,MAX$2=1e9;function clone$3(e){var t,r,n,i,o,s,a,c,u,f=E.prototype={constructor:E,toString:null,valueOf:null},l=new E(1),d=20,h=4,p=-7,b=21,m=-1e7,g=1e7,y=!1,v=1,_=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},S="0123456789abcdefghijklmnopqrstuvwxyz";function E(e,t){var i,o,s,a,c,u,f,l,p=this;if(!(p instanceof E))return new E(e,t);if(null==t){if(e&&!0===e._isBigNumber)return p.s=e.s,void(!e.c||e.e>g?p.c=p.e=null:e.e<m?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,c=e;c>=10;c/=10,a++);return void(a>g?p.c=p.e=null:(p.e=a,p.c=[e]))}l=String(e)}else{if(!isNumeric$2.test(l=String(e)))return n(p,l,u);p.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}(a=l.indexOf("."))>-1&&(l=l.replace(".","")),(c=l.search(/e/i))>0?(a<0&&(a=c),a+=+l.slice(c+1),l=l.substring(0,c)):a<0&&(a=l.length)}else{if(intCheck$1(t,2,S.length,"Base"),10==t)return k(p=new E(e),d+p.e+1,h);if(l=String(e),u="number"==typeof e){if(0*e!=0)return n(p,l,u,t);if(p.s=1/e<0?(l=l.slice(1),-1):1,E.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits$1+e)}else p.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(i=S.slice(0,t),a=c=0,f=l.length;c<f;c++)if(i.indexOf(o=l.charAt(c))<0){if("."==o){if(c>a){a=f;continue}}else if(!s&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){s=!0,c=-1,a=0;continue}return n(p,String(e),u,t)}u=!1,(a=(l=r(l,t,10,p.s)).indexOf("."))>-1?l=l.replace(".",""):a=l.length}for(c=0;48===l.charCodeAt(c);c++);for(f=l.length;48===l.charCodeAt(--f););if(l=l.slice(c,++f)){if(f-=c,u&&E.DEBUG&&f>15&&(e>MAX_SAFE_INTEGER$3||e!==mathfloor$1(e)))throw Error(tooManyDigits$1+p.s*e);if((a=a-c-1)>g)p.c=p.e=null;else if(a<m)p.c=[p.e=0];else{if(p.e=a,p.c=[],c=(a+1)%LOG_BASE$1,a<0&&(c+=LOG_BASE$1),c<f){for(c&&p.c.push(+l.slice(0,c)),f-=LOG_BASE$1;c<f;)p.c.push(+l.slice(c,c+=LOG_BASE$1));c=LOG_BASE$1-(l=l.slice(c)).length}else c-=f;for(;c--;l+="0");p.c.push(+l)}}else p.c=[p.e=0]}function w(e,t,r,n){var i,o,s,a,c;if(null==r?r=h:intCheck$1(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)c=coeffToString$1(e.c),c=1==n||2==n&&(s<=p||s>=b)?toExponential$1(c,s):toFixedPoint$1(c,s,"0");else if(o=(e=k(new E(e),t,r)).e,a=(c=coeffToString$1(e.c)).length,1==n||2==n&&(t<=o||o<=p)){for(;a<t;c+="0",a++);c=toExponential$1(c,o)}else if(t-=s,c=toFixedPoint$1(c,o,"0"),o+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=o-a)>0)for(o+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function C(e,t){for(var r,n=1,i=new E(e[0]);n<e.length;n++){if(!(r=new E(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function A(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*LOG_BASE$1-1)>g?e.c=e.e=null:r<m?e.c=[e.e=0]:(e.e=r,e.c=t),e}function k(e,t,r,n){var i,o,s,a,c,u,f,l=e.c,d=POWS_TEN$1;if(l){e:{for(i=1,a=l[0];a>=10;a/=10,i++);if((o=t-i)<0)o+=LOG_BASE$1,s=t,f=(c=l[u=0])/d[i-s-1]%10|0;else if((u=mathceil$1((o+1)/LOG_BASE$1))>=l.length){if(!n)break e;for(;l.length<=u;l.push(0));c=f=0,i=1,s=(o%=LOG_BASE$1)-LOG_BASE$1+1}else{for(c=a=l[u],i=1;a>=10;a/=10,i++);f=(s=(o%=LOG_BASE$1)-LOG_BASE$1+i)<0?0:c/d[i-s-1]%10|0}if(n=n||t<0||null!=l[u+1]||(s<0?c:c%d[i-s-1]),n=r<4?(f||n)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||n||6==r&&(o>0?s>0?c/d[i-s]:0:l[u-1])%10&1||r==(e.s<0?8:7)),t<1||!l[0])return l.length=0,n?(t-=e.e+1,l[0]=d[(LOG_BASE$1-t%LOG_BASE$1)%LOG_BASE$1],e.e=-t||0):l[0]=e.e=0,e;if(0==o?(l.length=u,a=1,u--):(l.length=u+1,a=d[LOG_BASE$1-o],l[u]=s>0?mathfloor$1(c/d[i-s]%d[s])*a:0),n)for(;;){if(0==u){for(o=1,s=l[0];s>=10;s/=10,o++);for(s=l[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(e.e++,l[0]==BASE$1&&(l[0]=1));break}if(l[u]+=a,l[u]!=BASE$1)break;l[u--]=0,a=1}for(o=l.length;0===l[--o];l.pop());}e.e>g?e.c=e.e=null:e.e<m&&(e.c=[e.e=0])}return e}function T(e){var t,r=e.e;return null===r?e.toString():(t=coeffToString$1(e.c),t=r<=p||r>=b?toExponential$1(t,r):toFixedPoint$1(t,r,"0"),e.s<0?"-"+t:t)}return E.clone=clone$3,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(bignumberError$1+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(intCheck$1(r=e[t],0,MAX$2,t),d=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(intCheck$1(r=e[t],0,8,t),h=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(intCheck$1(r[0],-MAX$2,0,t),intCheck$1(r[1],0,MAX$2,t),p=r[0],b=r[1]):(intCheck$1(r,-MAX$2,MAX$2,t),p=-(b=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)intCheck$1(r[0],-MAX$2,-1,t),intCheck$1(r[1],1,MAX$2,t),m=r[0],g=r[1];else{if(intCheck$1(r,-MAX$2,MAX$2,t),!r)throw Error(bignumberError$1+t+" cannot be zero: "+r);m=-(g=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(bignumberError$1+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw y=!r,Error(bignumberError$1+"crypto unavailable");y=r}else y=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(intCheck$1(r=e[t],0,9,t),v=r),e.hasOwnProperty(t="POW_PRECISION")&&(intCheck$1(r=e[t],0,MAX$2,t),_=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(bignumberError$1+t+" not an object: "+r);$=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(bignumberError$1+t+" invalid: "+r);S=r}}return{DECIMAL_PLACES:d,ROUNDING_MODE:h,EXPONENTIAL_AT:[p,b],RANGE:[m,g],CRYPTO:y,MODULO_MODE:v,POW_PRECISION:_,FORMAT:$,ALPHABET:S}},E.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!E.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-MAX$2&&i<=MAX$2&&i===mathfloor$1(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%LOG_BASE$1)<1&&(t+=LOG_BASE$1),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=BASE$1||r!==mathfloor$1(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(bignumberError$1+"Invalid BigNumber: "+e)},E.maximum=E.max=function(){return C(arguments,f.lt)},E.minimum=E.min=function(){return C(arguments,f.gt)},E.random=(i=9007199254740992*Math.random()&2097151?function(){return mathfloor$1(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,s,a=0,c=[],u=new E(l);if(null==e?e=d:intCheck$1(e,0,MAX$2),o=mathceil$1(e/LOG_BASE$1),y)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(s=131072*t[a]+(t[a+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[a]=r[0],t[a+1]=r[1]):(c.push(s%1e14),a+=2);a=o/2}else{if(!crypto.randomBytes)throw y=!1,Error(bignumberError$1+"crypto unavailable");for(t=crypto.randomBytes(o*=7);a<o;)(s=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(c.push(s%1e14),a+=7);a=o/7}if(!y)for(;a<o;)(s=i())<9e15&&(c[a++]=s%1e14);for(o=c[--a],e%=LOG_BASE$1,o&&e&&(s=POWS_TEN$1[LOG_BASE$1-e],c[a]=mathfloor$1(o/s)*s);0===c[a];c.pop(),a--);if(a<0)c=[n=0];else{for(n=-1;0===c[0];c.splice(0,1),n-=LOG_BASE$1);for(a=1,s=c[0];s>=10;s/=10,a++);a<LOG_BASE$1&&(n-=LOG_BASE$1-a)}return u.e=n,u.c=c,u}),E.sum=function(){for(var e=1,t=arguments,r=new E(t[0]);e<t.length;)r=r.plus(t[e++]);return r},r=function(){function e(e,t,r,n){for(var i,o,s=[0],a=0,c=e.length;a<c;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(r,n,i,o,s){var a,c,u,f,l,p,b,m,g=r.indexOf("."),y=d,v=h;for(g>=0&&(f=_,_=0,r=r.replace(".",""),p=(m=new E(n)).pow(r.length-g),_=f,m.c=e(toFixedPoint$1(coeffToString$1(p.c),p.e,"0"),10,i,"0123456789"),m.e=m.c.length),u=f=(b=e(r,n,i,s?(a=S,"0123456789"):(a="0123456789",S))).length;0==b[--f];b.pop());if(!b[0])return a.charAt(0);if(g<0?--u:(p.c=b,p.e=u,p.s=o,b=(p=t(p,m,y,v,i)).c,l=p.r,u=p.e),g=b[c=u+y+1],f=i/2,l=l||c<0||null!=b[c+1],l=v<4?(null!=g||l)&&(0==v||v==(p.s<0?3:2)):g>f||g==f&&(4==v||l||6==v&&1&b[c-1]||v==(p.s<0?8:7)),c<1||!b[0])r=l?toFixedPoint$1(a.charAt(1),-y,a.charAt(0)):a.charAt(0);else{if(b.length=c,l)for(--i;++b[--c]>i;)b[c]=0,c||(++u,b=[1].concat(b));for(f=b.length;!b[--f];);for(g=0,r="";g<=f;r+=a.charAt(b[g++]));r=toFixedPoint$1(r,u,a.charAt(0))}return r}}(),t=function(){function e(e,t,r){var n,i,o,s,a=0,c=e.length,u=t%SQRT_BASE$1,f=t/SQRT_BASE$1|0;for(e=e.slice();c--;)a=((i=u*(o=e[c]%SQRT_BASE$1)+(n=f*o+(s=e[c]/SQRT_BASE$1|0)*u)%SQRT_BASE$1*SQRT_BASE$1+a)/r|0)+(n/SQRT_BASE$1|0)+f*s,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,s,a){var c,u,f,l,d,h,p,b,m,g,y,v,_,$,S,w,C,A=n.s==i.s?1:-1,T=n.c,I=i.c;if(!(T&&T[0]&&I&&I[0]))return new E(n.s&&i.s&&(T?!I||T[0]!=I[0]:I)?T&&0==T[0]||!I?0*A:A/0:NaN);for(m=(b=new E(A)).c=[],A=o+(u=n.e-i.e)+1,a||(a=BASE$1,u=bitFloor$1(n.e/LOG_BASE$1)-bitFloor$1(i.e/LOG_BASE$1),A=A/LOG_BASE$1|0),f=0;I[f]==(T[f]||0);f++);if(I[f]>(T[f]||0)&&u--,A<0)m.push(1),l=!0;else{for($=T.length,w=I.length,f=0,A+=2,(d=mathfloor$1(a/(I[0]+1)))>1&&(I=e(I,d,a),T=e(T,d,a),w=I.length,$=T.length),_=w,y=(g=T.slice(0,w)).length;y<w;g[y++]=0);C=I.slice(),C=[0].concat(C),S=I[0],I[1]>=a/2&&S++;do{if(d=0,(c=t(I,g,w,y))<0){if(v=g[0],w!=y&&(v=v*a+(g[1]||0)),(d=mathfloor$1(v/S))>1)for(d>=a&&(d=a-1),p=(h=e(I,d,a)).length,y=g.length;1==t(h,g,p,y);)d--,r(h,w<p?C:I,p,a),p=h.length,c=1;else 0==d&&(c=d=1),p=(h=I.slice()).length;if(p<y&&(h=[0].concat(h)),r(g,h,y,a),y=g.length,-1==c)for(;t(I,g,w,y)<1;)d++,r(g,w<y?C:I,y,a),y=g.length}else 0===c&&(d++,g=[0]);m[f++]=d,g[0]?g[y++]=T[_]||0:(g=[T[_]],y=1)}while((_++<$||null!=g[0])&&A--);l=null!=g[0],m[0]||m.splice(0,1)}if(a==BASE$1){for(f=1,A=m[0];A>=10;A/=10,f++);k(b,o+(b.e=f+u*LOG_BASE$1-1)+1,s,l)}else b.e=u,b.r=+l;return b}}(),o=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,a=/^\.([^.]+)$/,c=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(e,t,r,n){var i,f=r?t:t.replace(u,"");if(c.test(f))e.s=isNaN(f)?null:f<0?-1:1;else{if(!r&&(f=f.replace(o,function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t}),n&&(i=n,f=f.replace(s,"$1").replace(a,"0.$1")),t!=f))return new E(f,i);if(E.DEBUG)throw Error(bignumberError$1+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},f.absoluteValue=f.abs=function(){var e=new E(this);return e.s<0&&(e.s=1),e},f.comparedTo=function(e,t){return compare$1(this,new E(e,t))},f.decimalPlaces=f.dp=function(e,t){var r,n,i,o=this;if(null!=e)return intCheck$1(e,0,MAX$2),null==t?t=h:intCheck$1(t,0,8),k(new E(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-bitFloor$1(this.e/LOG_BASE$1))*LOG_BASE$1,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},f.dividedBy=f.div=function(e,r){return t(this,new E(e,r),d,h)},f.dividedToIntegerBy=f.idiv=function(e,r){return t(this,new E(e,r),0,1)},f.exponentiatedBy=f.pow=function(e,t){var r,n,i,o,s,a,c,u,f=this;if((e=new E(e)).c&&!e.isInteger())throw Error(bignumberError$1+"Exponent not an integer: "+T(e));if(null!=t&&(t=new E(t)),s=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return u=new E(Math.pow(+T(f),s?2-isOdd$1(e):+T(e))),t?u.mod(t):u;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new E(NaN);(n=!a&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||s&&f.c[1]>=24e7:f.c[0]<8e13||s&&f.c[0]<=9999975e7)))return o=f.s<0&&isOdd$1(e)?-0:0,f.e>-1&&(o=1/o),new E(a?1/o:o);_&&(o=mathceil$1(_/LOG_BASE$1+2))}for(s?(r=new E(.5),a&&(e.s=1),c=isOdd$1(e)):c=(i=Math.abs(+T(e)))%2,u=new E(l);;){if(c){if(!(u=u.times(f)).c)break;o?u.c.length>o&&(u.c.length=o):n&&(u=u.mod(t))}if(i){if(0===(i=mathfloor$1(i/2)))break;c=i%2}else if(k(e=e.times(r),e.e+1,1),e.e>14)c=isOdd$1(e);else{if(0===(i=+T(e)))break;c=i%2}f=f.times(f),o?f.c&&f.c.length>o&&(f.c.length=o):n&&(f=f.mod(t))}return n?u:(a&&(u=l.div(u)),t?u.mod(t):o?k(u,_,h,void 0):u)},f.integerValue=function(e){var t=new E(this);return null==e?e=h:intCheck$1(e,0,8),k(t,t.e+1,e)},f.isEqualTo=f.eq=function(e,t){return 0===compare$1(this,new E(e,t))},f.isFinite=function(){return!!this.c},f.isGreaterThan=f.gt=function(e,t){return compare$1(this,new E(e,t))>0},f.isGreaterThanOrEqualTo=f.gte=function(e,t){return 1===(t=compare$1(this,new E(e,t)))||0===t},f.isInteger=function(){return!!this.c&&bitFloor$1(this.e/LOG_BASE$1)>this.c.length-2},f.isLessThan=f.lt=function(e,t){return compare$1(this,new E(e,t))<0},f.isLessThanOrEqualTo=f.lte=function(e,t){return-1===(t=compare$1(this,new E(e,t)))||0===t},f.isNaN=function(){return!this.s},f.isNegative=function(){return this.s<0},f.isPositive=function(){return this.s>0},f.isZero=function(){return!!this.c&&0==this.c[0]},f.minus=function(e,t){var r,n,i,o,s=this,a=s.s;if(t=(e=new E(e,t)).s,!a||!t)return new E(NaN);if(a!=t)return e.s=-t,s.plus(e);var c=s.e/LOG_BASE$1,u=e.e/LOG_BASE$1,f=s.c,l=e.c;if(!c||!u){if(!f||!l)return f?(e.s=-t,e):new E(l?s:NaN);if(!f[0]||!l[0])return l[0]?(e.s=-t,e):new E(f[0]?s:3==h?-0:0)}if(c=bitFloor$1(c),u=bitFloor$1(u),f=f.slice(),a=c-u){for((o=a<0)?(a=-a,i=f):(u=c,i=l),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(o=(a=f.length)<(t=l.length))?a:t,a=t=0;t<n;t++)if(f[t]!=l[t]){o=f[t]<l[t];break}if(o&&(i=f,f=l,l=i,e.s=-e.s),(t=(n=l.length)-(r=f.length))>0)for(;t--;f[r++]=0);for(t=BASE$1-1;n>a;){if(f[--n]<l[n]){for(r=n;r&&!f[--r];f[r]=t);--f[r],f[n]+=BASE$1}f[n]-=l[n]}for(;0==f[0];f.splice(0,1),--u);return f[0]?A(e,f,u):(e.s=3==h?-1:1,e.c=[e.e=0],e)},f.modulo=f.mod=function(e,r){var n,i,o=this;return e=new E(e,r),!o.c||!e.s||e.c&&!e.c[0]?new E(NaN):!e.c||o.c&&!o.c[0]?new E(o):(9==v?(i=e.s,e.s=1,n=t(o,e,0,3),e.s=i,n.s*=i):n=t(o,e,0,v),(e=o.minus(n.times(e))).c[0]||1!=v||(e.s=o.s),e)},f.multipliedBy=f.times=function(e,t){var r,n,i,o,s,a,c,u,f,l,d,h,p,b,m,g=this,y=g.c,v=(e=new E(e,t)).c;if(!(y&&v&&y[0]&&v[0]))return!g.s||!e.s||y&&!y[0]&&!v||v&&!v[0]&&!y?e.c=e.e=e.s=null:(e.s*=g.s,y&&v?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=bitFloor$1(g.e/LOG_BASE$1)+bitFloor$1(e.e/LOG_BASE$1),e.s*=g.s,(c=y.length)<(l=v.length)&&(p=y,y=v,v=p,i=c,c=l,l=i),i=c+l,p=[];i--;p.push(0));for(b=BASE$1,m=SQRT_BASE$1,i=l;--i>=0;){for(r=0,d=v[i]%m,h=v[i]/m|0,o=i+(s=c);o>i;)r=((u=d*(u=y[--s]%m)+(a=h*u+(f=y[s]/m|0)*d)%m*m+p[o]+r)/b|0)+(a/m|0)+h*f,p[o--]=u%b;p[o]=r}return r?++n:p.splice(0,1),A(e,p,n)},f.negated=function(){var e=new E(this);return e.s=-e.s||null,e},f.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new E(e,t)).s,!i||!t)return new E(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/LOG_BASE$1,s=e.e/LOG_BASE$1,a=n.c,c=e.c;if(!o||!s){if(!a||!c)return new E(i/0);if(!a[0]||!c[0])return c[0]?e:new E(a[0]?n:0*i)}if(o=bitFloor$1(o),s=bitFloor$1(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/BASE$1|0,a[t]=BASE$1===a[t]?0:a[t]%BASE$1;return i&&(a=[i].concat(a),++s),A(e,a,s)},f.precision=f.sd=function(e,t){var r,n,i,o=this;if(null!=e&&e!==!!e)return intCheck$1(e,1,MAX$2),null==t?t=h:intCheck$1(t,0,8),k(new E(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*LOG_BASE$1+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},f.shiftedBy=function(e){return intCheck$1(e,-MAX_SAFE_INTEGER$3,MAX_SAFE_INTEGER$3),this.times("1e"+e)},f.squareRoot=f.sqrt=function(){var e,r,n,i,o,s=this,a=s.c,c=s.s,u=s.e,f=d+4,l=new E("0.5");if(1!==c||!a||!a[0])return new E(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+T(s)))||c==1/0?(((r=coeffToString$1(a)).length+u)%2==0&&(r+="0"),c=Math.sqrt(+r),u=bitFloor$1((u+1)/2)-(u<0||u%2),n=new E(r=c==1/0?"1e"+u:(r=c.toExponential()).slice(0,r.indexOf("e")+1)+u)):n=new E(c+""),n.c[0])for((c=(u=n.e)+f)<3&&(c=0);;)if(o=n,n=l.times(o.plus(t(s,o,f,1))),coeffToString$1(o.c).slice(0,c)===(r=coeffToString$1(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(r=r.slice(c-3,c+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(k(n,n.e+d+2,1),e=!n.times(n).eq(s));break}if(!i&&(k(o,o.e+d+2,0),o.times(o).eq(s))){n=o;break}f+=4,c+=4,i=1}return k(n,n.e+d+1,h,e)},f.toExponential=function(e,t){return null!=e&&(intCheck$1(e,0,MAX$2),e++),w(this,e,t,1)},f.toFixed=function(e,t){return null!=e&&(intCheck$1(e,0,MAX$2),e=e+this.e+1),w(this,e,t)},f.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=$;else if("object"!=typeof r)throw Error(bignumberError$1+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,s=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",f=s[0],l=s[1],d=i.s<0,h=d?f.slice(1):f,p=h.length;if(c&&(o=a,a=c,c=o,p-=o),a>0&&p>0){for(o=p%a||a,f=h.substr(0,o);o<p;o+=a)f+=u+h.substr(o,a);c>0&&(f+=u+h.slice(o)),d&&(f="-"+f)}n=l?f+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):f}return(r.prefix||"")+n+(r.suffix||"")},f.toFraction=function(e){var r,n,i,o,s,a,c,u,f,d,p,b,m=this,y=m.c;if(null!=e&&(!(c=new E(e)).isInteger()&&(c.c||1!==c.s)||c.lt(l)))throw Error(bignumberError$1+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+T(c));if(!y)return new E(m);for(r=new E(l),f=n=new E(l),i=u=new E(l),b=coeffToString$1(y),s=r.e=b.length-m.e-1,r.c[0]=POWS_TEN$1[(a=s%LOG_BASE$1)<0?LOG_BASE$1+a:a],e=!e||c.comparedTo(r)>0?s>0?r:f:c,a=g,g=1/0,c=new E(b),u.c[0]=0;d=t(c,r,0,1),1!=(o=n.plus(d.times(i))).comparedTo(e);)n=i,i=o,f=u.plus(d.times(o=f)),u=o,r=c.minus(d.times(o=r)),c=o;return o=t(e.minus(n),i,0,1),u=u.plus(o.times(f)),n=n.plus(o.times(i)),u.s=f.s=m.s,p=t(f,i,s*=2,h).minus(m).abs().comparedTo(t(u,n,s,h).minus(m).abs())<1?[f,i]:[u,n],g=a,p},f.toNumber=function(){return+T(this)},f.toPrecision=function(e,t){return null!=e&&intCheck$1(e,1,MAX$2),w(this,e,t,2)},f.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=p||o>=b?toExponential$1(coeffToString$1(n.c),o):toFixedPoint$1(coeffToString$1(n.c),o,"0"):10===e?t=toFixedPoint$1(coeffToString$1((n=k(new E(n),d+o+1,h)).c),n.e,"0"):(intCheck$1(e,2,S.length,"Base"),t=r(toFixedPoint$1(coeffToString$1(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},f.valueOf=f.toJSON=function(){return T(this)},f._isBigNumber=!0,f[Symbol.toStringTag]="BigNumber",f[Symbol.for("nodejs.util.inspect.custom")]=f.valueOf,null!=e&&E.set(e),E}function bitFloor$1(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString$1(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=LOG_BASE$1-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function compare$1(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,c=e.e,u=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=c==u,!i||!o)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=o.length)?c:u,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return c==u?0:c>u^r?1:-1}function intCheck$1(e,t,r,n){if(e<t||e>r||e!==mathfloor$1(e))throw Error(bignumberError$1+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function isOdd$1(e){var t=e.c.length-1;return bitFloor$1(e.e/LOG_BASE$1)==t&&e.c[t]%2!=0}function toExponential$1(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint$1(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}for(var BigNumber$1=clone$3(),bignumber$2=Object.freeze({BigNumber:BigNumber$1,default:BigNumber$1}),pull=function e(t){var r=arguments.length;if("function"==typeof t&&1===t.length){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(t){if(null==n)throw new TypeError("partial sink should only be called once!");var i=n;switch(n=null,r){case 1:return e(t,i[0]);case 2:return e(t,i[0],i[1]);case 3:return e(t,i[0],i[1],i[2]);case 4:return e(t,i[0],i[1],i[2],i[3]);default:return i.unshift(t),e.apply(null,i)}}}var o=t;o&&"function"==typeof o.source&&(o=o.source);for(i=1;i<r;i++){var s=arguments[i];"function"==typeof s?o=s(o):s&&"object"==typeof s&&(s.sink(o),o=s.source)}return o},drain=function(e,t){var r,n;function i(o){if(r=o,n)return i.abort();!function i(){for(var o=!0,s=!1;o;)if(s=!1,r(null,function(a,c){if(s=!0,a=a||n){if(o=!1,t)t(!0===a?null:a);else if(a&&!0!==a)throw a}else e&&!1===e(c)||n?(o=!1,r(n||!0,t||function(){})):o||i()}),!s)return void(o=!1)}()}return i.abort=function(e,t){if("function"==typeof e&&(t=e,e=!0),n=e||!0,r)return r(n,t||function(){})},i},reduce=function(e,t,r){r||(r=t,t=null);var n=drain(function(r){t=e(t,r)},function(e){r(e,t)});return 2===arguments.length?function(e){e(null,function(i,o){if(i)return r(!0===i?null:i);t=o,n(e)})}:n},create$3=function(e,t,r){return new(0,r.storageBackends[e])(t,Object.assign({},r.storageBackendOptions[e]||{}))},backends={create:create$3},rng$1=function(){return crypto$l.randomBytes(16)},byteToHex=[],i$1=0;i$1<256;++i$1)byteToHex[i$1]=(i$1+256).toString(16).substr(1);function bytesToUuid(e,t){var r=t||0,n=byteToHex;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}var bytesToUuid_1=bytesToUuid;function v4$1(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||rng$1)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||bytesToUuid_1(i)}var v4_1=v4$1;const pathSepS="/",pathSepB=Buffer.from(pathSepS),pathSep=pathSepB[0];class Key{constructor(e,t){if("string"==typeof e?this._buf=Buffer.from(e):Buffer.isBuffer(e)&&(this._buf=e),null==t&&(t=!0),t&&this.clean(),0===this._buf.length||this._buf[0]!==pathSep)throw new Error(`Invalid key: ${this.toString()}`)}toString(e){return this._buf.toString(e||"utf8")}toBuffer(){return this._buf}get[Symbol.toStringTag](){return`[Key ${this.toString()}]`}static withNamespaces(e){return new _Key(e.join(pathSepS))}static random(){return new _Key(v4_1().replace(/-/g,""))}clean(){for(this._buf&&0!==this._buf.length||(this._buf=Buffer.from(pathSepS)),this._buf[0]!==pathSep&&(this._buf=Buffer.concat([pathSepB,this._buf]));this._buf.length>1&&this._buf[this._buf.length-1]===pathSep;)this._buf=this._buf.slice(0,-1)}less(e){const t=this.list(),r=e.list();for(let e=0;e<t.length;e++){if(r.length<e+1)return!1;const n=t[e],i=r[e];if(n<i)return!0;if(n>i)return!1}return t.length<r.length}reverse(){return Key.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(pathSepS).slice(1)}type(){return namespaceType(this.baseNamespace())}name(){return namespaceValue(this.baseNamespace())}instance(e){return new _Key(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(pathSepS)||(e+=pathSepS),e+=this.type(),new _Key(e)}parent(){const e=this.list();return 1===e.length?new _Key(pathSepS):new _Key(e.slice(0,-1).join(pathSepS))}child(e){return this.toString()===pathSepS?e:e.toString()===pathSepS?this:new _Key(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}}function namespaceType(e){const t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function namespaceValue(e){const t=e.split(":");return t[t.length-1]}const _Key=classIs(Key,{className:"Key",symbolName:"@ipfs/interface-datastore/key"});var key$5=_Key,abortCb=function(e,t,r){e(t),r&&r(!0===t?null:t)},values=function(e,t){if(!e)return function(e,r){return e?abortCb(r,e,t):r(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(t){return e[t]}));var r=0;return function(n,i){if(n)return abortCb(i,n,t);r>=e.length?i(!0):i(null,e[r++])}},keys$2=function(e){return values(Object.keys(e))},once=function(e,t){return function(r,n){if(r)return abortCb(n,r,t);if(null!=e){var i=e;e=null,n(null,i)}else n(!0)}},count=function(e){var t=0;return e=e||1/0,function(r,n){return r?n&&n(r):t>e?n(!0):void n(null,t++)}},infinite=function(e){return e=e||Math.random,function(t,r){return t?r&&r(t):r(null,e())}},empty$2=function(){return function(e,t){t(!0)}},error=function(e){return function(t,r){r(e)}},sources={keys:keys$2,once:once,values:values,count:count,infinite:infinite,empty:empty$2,error:error},onEnd=function(e){return drain(null,e)},log=function(e){return drain(function(e){console.log(e)},e)},prop=function(e){return e&&("string"==typeof e?function(t){return t[e]}:"object"==typeof e&&"function"==typeof e.exec?function(t){var r=e.exec(t);return r&&r[0]}:e)};function id(e){return e}var find=function(e,t){var r=!1;return t?e=prop(e)||id:(t=e,e=id),drain(function(n){if(e(n))return r=!0,t(null,n),!1},function(e){r||t(!0===e?null:e,null)})},collect=function(e){return reduce(function(e,t){return e.push(t),e},[],e)},concat$1=function(e){return reduce(function(e,t){return e+t},"",e)},sinks={drain:drain,onEnd:onEnd,log:log,find:find,reduce:reduce,collect:collect,concat:concat$1};function id$1(e){return e}var map$3=function(e){return e?(e=prop(e),function(t){return function(r,n){t(r,function(r,i){try{i=r?null:e(i)}catch(e){return t(e,function(){return n(e)})}n(r,i)})}}):id$1};function id$2(e){return e}var asyncMap=function(e){if(!e)return id$2;e=prop(e);var t,r,n=!1;return function(i){return function o(s,a){if(r)return a(r);s?(r=s,i(s,n?function(e){n?t=a:a(s)}:function(e){a(s)})):i(null,function(i,s){i?a(i):r?a(r):(n=!0,e(s,function(e,i){n=!1,r?(a(r),t&&t(r)):e?o(e,a):a(null,i)}))})}}};function id$3(e){return e}var tester=function(e){return"object"==typeof e&&"function"==typeof e.test?function(t){return e.test(t)}:prop(e)||id$3},filter$1=function(e){return e=tester(e),function(t){return function r(n,i){for(var o,s=!0;s;)s=!1,o=!0,t(n,function(t,n){if(!t&&!e(n))return o?s=!0:r(t,i);i(t,n)}),o=!1}}},filterNot=function(e){return e=tester(e),filter$1(function(t){return!e(t)})},through=function(e,t){var r=!1;function n(e){!r&&t&&(r=!0,t(!0===e?null:e))}return function(t){return function(r,i){return r&&n(r),t(r,function(t,r){t?n(t):e&&e(r),i(t,r)})}}},take=function(e,t){var r=(t=t||{}).last||!1,n=!1;if("number"==typeof e){r=!0;var i=e;e=function(){return--i}}return function(t){function i(e){t(!0,function(t){r=!1,e(t||!0)})}return function(o,s){n&&!o?r?i(s):s(n):(n=o)?t(n,s):t(null,function(t,o){(n=n||t)?s(n):e(o)?s(null,o):(n=!0,r?s(null,o):i(s))})}}};function id$4(e){return e}var unique=function(e,t){e=prop(e)||id$4;var r={};return filter$1(function(n){var i=e(n);return r[i]?!!t:(r[i]=!0,!t)})},nonUnique=function(e){return unique(e,!0)},flatten$2=function(){return function(e){var t;return function(r,n){function i(){t(null,function(t,r){!0===t?o():t?e(!0,function(e){n(t)}):n(null,r)})}function o(){t=null,e(null,function(e,r){if(e)return n(e);Array.isArray(r)||r&&"object"==typeof r?r=values(r):"function"!=typeof r&&(r=once(r)),t=r,i()})}r?t?t(r,function(t){e(t||r,n)}):e(r,n):t?i():o()}}},throughs={map:map$3,asyncMap:asyncMap,filter:filter$1,filterNot:filterNot,through:through,take:take,unique:unique,nonUnique:nonUnique,flatten:flatten$2},pullStream=createCommonjsModule(function(e,t){for(var r in(t=e.exports=pull).pull=t,sources)t[r]=sources[r];for(var r in throughs)t[r]=throughs[r];for(var r in sinks)t[r]=sinks[r]}),pullStream_1=pullStream.pull,source=function(){var e,t,r,n,i=function(i,o){e?e(i,o):i?(n=i,r=o):t=o};return i.resolve=function(i){if(e)throw new Error("already resolved");if(!(e=i))throw new Error("no read cannot resolve!"+e);t&&i(null,t),r&&i(n,r)},i.abort=function(e){i.resolve(function(t,r){r(e||!0)})},i},asyncFilter=function(e){let t,r,n=!1;return function(i){return function o(s,a){if(r)return a(r);s?(r=s,i(s,n?()=>{n?t=a:a(s)}:a)):i(null,(i,s)=>{i?a(i):r?a(r):(n=!0,e(s,(e,i)=>{n=!1,r?(a(r),t(r)):e?o(e,a):i?a(null,s):o(null,a)}))})}}},asyncSort=function(e){const t=source(),r=pullStream.collect((r,n)=>{if(r)return t.abort(r);e(n,(e,r)=>{if(e)return t.abort(e);t.resolve(pullStream.values(n))})});return function(e){return r(e),t}},replaceStartWith=function(e,t){const r=new RegExp("^"+t);return e.replace(r,"")},tmpdir=()=>path$4.join(os.tmpdir(),v4_1()),utils$u={asyncFilter:asyncFilter,asyncSort:asyncSort,replaceStartWith:replaceStartWith,tmpdir:tmpdir},dbOpenFailedError=e=>(e=e||new Error("Cannot open database"),errCode(e,"ERR_DB_OPEN_FAILED")),dbDeleteFailedError=e=>(e=e||new Error("Delete failed"),errCode(e,"ERR_DB_DELETE_FAILED")),dbWriteFailedError=e=>(e=e||new Error("Write failed"),errCode(e,"ERR_DB_WRITE_FAILED")),notFoundError=e=>(e=e||new Error("Not Found"),errCode(e,"ERR_NOT_FOUND")),errors$1={dbOpenFailedError:dbOpenFailedError,dbDeleteFailedError:dbDeleteFailedError,dbWriteFailedError:dbWriteFailedError,notFoundError:notFoundError};const asyncFilter$1=utils$u.asyncFilter,asyncSort$1=utils$u.asyncSort;class MemoryDatastore{constructor(){this.data={}}open(e){setImmediate$1(e)}put(e,t,r){this.data[e.toString()]=t,setImmediate$1(r)}get(e,t){this.has(e,(r,n)=>r?t(r):n?void t(null,this.data[e.toString()]):t(errors$1.notFoundError()))}has(e,t){setImmediate$1(()=>{t(null,void 0!==this.data[e.toString()])})}delete(e,t){delete this.data[e.toString()],setImmediate$1(()=>{t()})}batch(){let e=[],t=[];return{put(t,r){e.push([t,r])},delete(e){t.push(e)},commit:r=>{e.forEach(e=>{this.data[e[0].toString()]=e[1]}),e=[],t.forEach(e=>{delete this.data[e.toString()]}),t=[],setImmediate$1(r)}}}query(e){let t=[pullStream.keys(this.data),pullStream.map(e=>({key:new key$5(e),value:this.data[e]}))],r=[];if(null!=e.prefix){const t=e.prefix;r.push((e,r)=>r(null,e.key.toString().startsWith(t)))}if(null!=e.filters&&(r=r.concat(e.filters)),t=t.concat(r.map(e=>asyncFilter$1(e))),null!=e.orders&&(t=t.concat(e.orders.map(e=>asyncSort$1(e)))),null!=e.offset){let r=0;t.push(pullStream.filter(()=>r++>=e.offset))}return null!=e.limit&&t.push(pullStream.take(e.limit)),!0===e.keysOnly&&t.push(pullStream.map(e=>({key:e.key}))),pullStream.apply(null,t)}close(e){setImmediate$1(e)}}var memory=MemoryDatastore,Key_1=key$5,MemoryDatastore_1=memory,utils_1$5=utils$u,Errors_1=errors$1,src$B={Key:Key_1,MemoryDatastore:MemoryDatastore_1,utils:utils_1$5,Errors:Errors_1};const Key$1=src$B.Key,log$1=src$A("repo:version"),versionKey=new Key$1("version");var version$2=e=>({exists(t){e.has(versionKey,t)},get(t){e.get(versionKey,(e,r)=>{if(e)return t(e);t(null,parseInt(r.toString().trim(),10))})},set(t,r){e.put(versionKey,Buffer.from(String(t)),r)},check(e,t){this.get((r,n)=>{if(r)return t(r);if(log$1("comparing version: %s and %s",n,e),n!==e&&!(6===n&&7===e||6===e&&7===n))return t(new Error(`ipfs repo needs migration: expected version v${e}, found version v${n}`));t()})}});function baseFindIndex(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var _baseFindIndex=baseFindIndex;function baseIsNaN(e){return e!=e}var _baseIsNaN=baseIsNaN;function strictIndexOf(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var _strictIndexOf=strictIndexOf;function baseIndexOf(e,t,r){return t==t?_strictIndexOf(e,t,r):_baseFindIndex(e,_baseIsNaN,r)}var _baseIndexOf=baseIndexOf,DoublyLinkedList=createCommonjsModule(function(e,t){function r(){this.head=this.tail=null,this.length=0}function n(e,t){e.length=1,e.head=e.tail=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},r.prototype.empty=function(){for(;this.head;)this.shift();return this},r.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},r.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},r.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):n(this,e)},r.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):n(this,e)},r.prototype.shift=function(){return this.head&&this.removeLink(this.head)},r.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},r.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,r=0;r<this.length;r++)e[r]=t.data,t=t.next;return e},r.prototype.remove=function(e){for(var t=this.head;t;){var r=t.next;e(t)&&this.removeLink(t),t=r}return this},e.exports=t.default});unwrapExports(DoublyLinkedList);var queue_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,u){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var f=(0,c.default)(e),l=0,d=[],h=!1;function p(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(g.started=!0,(0,n.default)(e)||(e=[e]),0===e.length&&g.idle())return(0,s.default)(function(){g.drain()});for(var o=0,a=e.length;o<a;o++){var c={data:e[o],callback:r||i.default};t?g._tasks.unshift(c):g._tasks.push(c)}h||(h=!0,(0,s.default)(function(){h=!1,g.process()}))}function b(e){return function(t){l-=1;for(var n=0,i=e.length;n<i;n++){var o=e[n],s=(0,r.default)(d,o,0);0===s?d.shift():s>0&&d.splice(s,1),o.callback.apply(o,arguments),null!=t&&g.error(t,o.data)}l<=g.concurrency-g.buffer&&g.unsaturated(),g.idle()&&g.drain(),g.process()}}var m=!1,g={_tasks:new a.default,concurrency:t,payload:u,saturated:i.default,unsaturated:i.default,buffer:t/4,empty:i.default,drain:i.default,error:i.default,started:!1,paused:!1,push:function(e,t){p(e,!1,t)},kill:function(){g.drain=i.default,g._tasks.empty()},unshift:function(e,t){p(e,!0,t)},remove:function(e){g._tasks.remove(e)},process:function(){if(!m){for(m=!0;!g.paused&&l<g.concurrency&&g._tasks.length;){var e=[],t=[],r=g._tasks.length;g.payload&&(r=Math.min(r,g.payload));for(var n=0;n<r;n++){var i=g._tasks.shift();e.push(i),d.push(i),t.push(i.data)}l+=1,0===g._tasks.length&&g.empty(),l===g.concurrency&&g.saturated();var s=(0,o.default)(b(e));f(t,s)}m=!1}},length:function(){return g._tasks.length},running:function(){return l},workersList:function(){return d},idle:function(){return g._tasks.length+l===0},pause:function(){g.paused=!0},resume:function(){!1!==g.paused&&(g.paused=!1,(0,s.default)(g.process))}};return g};var r=u(_baseIndexOf),n=u(isArray_1),i=u(noop_1),o=u(onlyOnce_1),s=u(setImmediate_1),a=u(DoublyLinkedList),c=u(wrapAsync_1);function u(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(queue_1);var queue$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i=(0,n.default)(e);return(0,r.default)(function(e,t){i(e[0],t)},t,1)};var r=i(queue_1),n=i(wrapAsync_1);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(queue$1);var justSafeSet=set;function set(e,t,r){"string"==typeof t&&(t=t.split(".")),"symbol"==typeof t&&(t=[t]);var n,i=t.pop();if(!i)return!1;for(;n=t.shift();)if(void 0===e[n]&&(e[n]={}),!(e=e[n])||"object"!=typeof e)return!1;return e[i]=r,!0}const Key$2=src$B.Key,Buffer$n=buffer$1.Buffer,configKey=new Key$2("config");var config$2=e=>{const t=queue$1(function(e,t){const i=e.key,o=e.value;i?waterfall([e=>r.get(e),(e,t)=>{justSafeSet(e,i,o),t(null,e)},n],t):n(o,t)},1),r={get(t,r){"function"==typeof t&&(r=t,t=void 0),t||(t=void 0),e.get(configKey,(e,n)=>{if(e)return r(e);let i;try{i=JSON.parse(n.toString())}catch(e){return r(e)}if(void 0===t)return r(null,i);if("string"!=typeof t)return r(new Error("Key "+t+" must be a string."));const o=get$1(i,t,null);if(null===o)return r(new Error("Key "+t+" does not exist in config."));r(null,o)})},set(e,r,n){if("function"==typeof r)n=r,r=e,e=void 0;else if(!e||"string"!=typeof e)return n(new Error("Invalid key type"));if(void 0===r||Buffer$n.isBuffer(r))return n(new Error("Invalid value type"));t.push({key:e,value:r},n)},exists(t){e.has(configKey,t)}};return r;function n(t,r){const n=Buffer$n.from(JSON.stringify(t,null,2));e.put(configKey,n,r)}},sortKeys=(e,t)=>{if(!isPlainObj(e))throw new TypeError("Expected a plain object");if("function"==typeof(t=t||{}))throw new TypeError("Specify the compare function as an option instead");const r=t.deep,n=[],i=[],o=e=>{const s=n.indexOf(e);if(-1!==s)return i[s];const a={},c=Object.keys(e).sort(t.compare);n.push(e),i.push(a);for(let t=0;t<c.length;t++){const n=c[t],i=e[n];if(r&&Array.isArray(i)){const e=[];for(let t=0;t<i.length;t++)e[t]=isPlainObj(i[t])?o(i[t]):i[t];a[n]=e}else a[n]=r&&isPlainObj(i)?o(i):i}return a};return o(e)};const Key$3=src$B.Key,specKey=new Key$3("datastore_spec");var spec=e=>({exists(t){e.has(specKey,t)},get(t){e.get(specKey,(e,r)=>{if(e)return t(e);t(null,JSON.parse(r.toString()))})},set(t,r){e.put(specKey,Buffer.from(JSON.stringify(sortKeys(t,{deep:!0}))),r)}});const Key$4=src$B.Key,apiFile=new Key$4("api");var apiAddr=e=>({get(t){e.get(apiFile,(e,r)=>t(e,r&&r.toString()))},set(t,r){e.put(apiFile,Buffer.from(t.toString()),r)},delete(t){e.delete(apiFile,t)}});class KeyTransformDatastore{constructor(e,t){this.child=e,this.transform=t}open(e){this.child.open(e)}put(e,t,r){this.child.put(this.transform.convert(e),t,r)}get(e,t){this.child.get(this.transform.convert(e),t)}has(e,t){this.child.has(this.transform.convert(e),t)}delete(e,t){this.child.delete(this.transform.convert(e),t)}batch(){const e=this.child.batch();return{put:(t,r)=>{e.put(this.transform.convert(t),r)},delete:t=>{e.delete(this.transform.convert(t))},commit:t=>{e.commit(t)}}}query(e){return pullStream(this.child.query(e),pullStream.map(e=>(e.key=this.transform.invert(e.key),e)))}close(e){this.child.close(e)}}var keytransform=KeyTransformDatastore,shardReadme="This is a repository of IPLD objects. Each IPLD object is in a single file,\nnamed <base32 encoding of cid>.data. Where <base32 encoding of cid> is the\n\"base32\" encoding of the CID (as specified in\nhttps://github.com/multiformats/multibase) without the 'B' prefix.\nAll the object files are placed in a tree of directories, based on a\nfunction of the CID. This is a form of sharding similar to\nthe objects directory in git repositories. Previously, we used\nprefixes, we now use the next-to-last two charters.\n    func NextToLast(base32cid string) {\n      nextToLastLen := 2\n      offset := len(base32cid) - nextToLastLen - 1\n      return str[offset : offset+nextToLastLen]\n    }\nFor example, an object with a base58 CIDv1 of\n    zb2rhYSxw4ZjuzgCnWSt19Q94ERaeFhu9uSqRgjSdx9bsgM6f\nhas a base32 CIDv1 of\n    BAFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA\nand will be placed at\n    SC/AFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA.data\nwith 'SC' being the last-to-next two characters and the 'B' at the\nbeginning of the CIDv1 string is the multibase prefix that is not\nstored in the filename.\n",shard=createCommonjsModule(function(e,t){const r=src$B.Key,n=t.PREFIX="/repo/flatfs/shard/",i=t.SHARDING_FN="SHARDING";t.README_FN="_README";class o{constructor(e){this.param=e}fun(e){throw new Error("implement me")}toString(){return`${n}v1/${this.name}/${this.param}`}}class s extends o{constructor(e){super(e),this._padding="".padStart(e,"_"),this.name="prefix"}fun(e){return(e+this._padding).slice(0,this.param)}}class a extends o{constructor(e){super(e),this._padding="".padStart(e,"_"),this.name="suffix"}fun(e){const t=this._padding+e;return t.slice(t.length-this.param)}}class c extends o{constructor(e){super(e),this._padding="".padStart(e+1,"_"),this.name="next-to-last"}fun(e){const t=this._padding+e,r=t.length-this.param-1;return t.slice(r,r+this.param)}}function u(e){if(0===(e=e.trim()).length)throw new Error("empty shard string");if(!e.startsWith(n))throw new Error(`invalid or no path prefix: ${e}`);const t=e.slice(n.length).split("/"),r=t[0];if("v1"!==r)throw new Error(`expect 'v1' version, got '${r}'`);const i=t[1];if(!t[2])throw new Error("missing param");const o=parseInt(t[2],10);switch(i){case"prefix":return new s(o);case"suffix":return new a(o);case"next-to-last":return new c(o);default:throw new Error(`unkown sharding function: ${i}`)}}t.readShardFun=(e,t,n)=>{const o=new r(e).child(new r(i));("function"==typeof t.getRaw?t.getRaw.bind(t):t.get.bind(t))(o,(e,t)=>{if(e)return n(e);let r;try{r=u((t||"").toString().trim())}catch(e){return n(e)}n(null,r)})},t.readme=shardReadme,t.parseShardFun=u,t.Prefix=s,t.Suffix=a,t.NextToLast=c}),shard_1=shard.PREFIX,shard_2=shard.SHARDING_FN,shard_3=shard.README_FN,shard_4=shard.readShardFun,shard_5=shard.readme,shard_6=shard.parseShardFun,shard_7=shard.Prefix,shard_8=shard.Suffix,shard_9=shard.NextToLast;const Key$5=src$B.Key,shardKey=new Key$5(shard.SHARDING_FN),shardReadmeKey=new Key$5(shard.README_FN);class ShardingDatastore{constructor(e,t){this.child=new keytransform(e,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)}),this.shard=t}open(e){this.child.open(e)}_convertKey(e){const t=e.toString();return t===shardKey.toString()||t===shardReadmeKey.toString()?e:new Key$5(this.shard.fun(t)).child(e)}_invertKey(e){const t=e.toString();return t===shardKey.toString()||t===shardReadmeKey.toString()?e:Key$5.withNamespaces(e.list().slice(1))}static createOrOpen(e,t,r){ShardingDatastore.create(e,t,t=>{if(t&&"datastore exists"!==t.message)return r(t);ShardingDatastore.open(e,r)})}static open(e,t){waterfall([t=>shard.readShardFun("/",e,t),(t,r)=>{r(null,new ShardingDatastore(e,t))}],t)}static create(e,t,r){e.has(shardKey,(n,i)=>{if(n)return r(n);if(!i){const n="function"==typeof e.putRaw?e.putRaw.bind(e):e.put.bind(e);return parallel$1([e=>n(shardKey,Buffer.from(t.toString()+"\n"),e),e=>n(shardReadmeKey,Buffer.from(shard.readme),e)],e=>r(e))}shard.readShardFun("/",e,(e,n)=>{if(e)return r(e);const i=(n||"").toString(),o=t.toString();if(i!==o)return r(new Error(`specified fun ${o} does not match repo shard fun ${i}`));r(new Error("datastore exists"))})})}put(e,t,r){this.child.put(e,t,r)}get(e,t){this.child.get(e,t)}has(e,t){this.child.has(e,t)}delete(e,t){this.child.delete(e,t)}batch(){return this.child.batch()}query(e){const t={keysOnly:e.keysOnly,offset:e.offset,limit:e.limit,filters:[(e,t)=>t(null,e.key.toString()!==shardKey.toString()),(e,t)=>t(null,e.key.toString()!==shardReadmeKey.toString())]};if(null!=e.prefix&&t.filters.push((t,r)=>{r(null,this._invertKey(t.key).toString().startsWith(e.prefix))}),null!=e.filters){const r=e.filters.map(e=>(t,r)=>{e(Object.assign({},t,{key:this._invertKey(t.key)}),r)});t.filters=t.filters.concat(r)}return null!=e.orders&&(t.orders=e.orders.map(e=>(t,r)=>{t.forEach(e=>{e.key=this._invertKey(e.key)}),e(t,(e,t)=>{if(e)return r(e);t.forEach(e=>{e.key=this._convertKey(e.key)}),r(null,t)})})),this.child.query(t)}close(e){this.child.close(e)}}var sharding=ShardingDatastore,pullMany=function(e){var t,r,n=!!e,i=(e||[]).map(s),o=0;function s(e){return{ready:!1,reading:!1,ended:!1,read:e,data:null}}function a(){if(r){!function(){var e=i.length;for(;e--;)i[e].ended&&i.splice(e,1)}();var e=i.length,s=r;if(0===e&&(t||n))return r=null,void s(t||!0);for(var a=0;a<e;a++){var c=i[(o+a)%e];if(c.ready&&!c.ended){var u=c.data;return c.ready=!1,c.data=null,o++,r=null,s(null,u)}}}}function c(){for(var e=i.length;e--;)!function(r){if(e>i.length)throw new Error("this should never happen");if(!(r.reading||r.ended||r.ready)){r.reading=!0;var n=!0;r.read(t,function e(i,o){r.data=o,r.ready=!0,r.reading=!1,!0===i||t?r.ended=!0:i&&(t=r.ended=i),t&&!i&&r.read(t,e),n||a()}),n=!1}}(i[e]);a()}function u(e,n){t=t||e,r=n,c()}return u.add=function(e){if(!e)return n=!0,c();i.push(s(e)),c()},u.cap=function(e){u.add(null)},u};const Key$6=src$B.Key,Errors=src$B.Errors,utils$v=src$B.utils,asyncFilter$2=utils$v.asyncFilter,asyncSort$2=utils$v.asyncSort,replaceStartWith$1=utils$v.replaceStartWith;class MountDatastore{constructor(e){this.mounts=e.slice()}open(e){each(this.mounts,(e,t)=>{e.datastore.open(t)},e)}_lookup(e){for(let t of this.mounts)if(t.prefix.toString()===e.toString()||t.prefix.isAncestorOf(e)){const r=replaceStartWith$1(e.toString(),t.prefix.toString());return{datastore:t.datastore,mountpoint:t.prefix,rest:new Key$6(r)}}}put(e,t,r){const n=this._lookup(e);if(null==n)return r(Errors.dbWriteFailedError(new Error("No datastore mounted for this key")));n.datastore.put(n.rest,t,r)}get(e,t){const r=this._lookup(e);if(null==r)return t(Errors.notFoundError(new Error("No datastore mounted for this key")));r.datastore.get(r.rest,t)}has(e,t){const r=this._lookup(e);null!=r?r.datastore.has(r.rest,t):t(null,!1)}delete(e,t){const r=this._lookup(e);if(null==r)return t(Errors.dbDeleteFailedError(new Error("No datastore mounted for this key")));r.datastore.delete(r.rest,t)}close(e){each(this.mounts,(e,t)=>{e.datastore.close(t)},e)}batch(){const e={},t=t=>{const r=this._lookup(t);if(null==r)throw new Error("No datastore mounted for this key");const n=r.mountpoint.toString();return null==e[n]&&(e[n]=r.datastore.batch()),{batch:e[n],rest:r.rest}};return{put:(e,r)=>{const n=t(e);n.batch.put(n.rest,r)},delete:e=>{const r=t(e);r.batch.delete(r.rest)},commit:t=>{each(Object.keys(e),(t,r)=>{e[t].commit(r)},t)}}}query(e){const t=this.mounts.map(t=>{const r=new keytransform(t.datastore,{convert:e=>{throw new Error("should never be called")},invert:e=>t.prefix.child(e)});let n;return null!=e.prefix&&(n=replaceStartWith$1(e.prefix,t.prefix.toString())),r.query({prefix:n,filters:e.filters,keysOnly:e.keysOnly})});let r=[pullMany(t)];if(null!=e.filters&&(r=r.concat(e.filters.map(e=>asyncFilter$2(e)))),null!=e.orders&&(r=r.concat(e.orders.map(e=>asyncSort$2(e)))),null!=e.offset){let t=0;r.push(pullStream.filter(()=>t++>=e.offset))}return null!=e.limit&&r.push(pullStream.take(e.limit)),pullStream.apply(null,r)}}var mount=MountDatastore;const Errors$1=src$B.Errors;class TieredDatastore{constructor(e){this.stores=e.slice()}open(e){each(this.stores,(e,t)=>{e.open(t)},t=>{if(t)return e(Errors$1.dbOpenFailedError());e()})}put(e,t,r){each(this.stores,(r,n)=>{r.put(e,t,n)},e=>{if(e)return r(Errors$1.dbWriteFailedError());r()})}get(e,t){const r=this.stores.length;let n=!1,i=0;whilst_1(()=>!n&&i<r,t=>{this.stores[i++].get(e,(e,r)=>{if(null==e)return n=!0,t(null,r);t()})},(e,r)=>{if(e||!r)return t(Errors$1.notFoundError());t(null,r)})}has(e,t){const r=this.stores.length;let n=!1,i=0;whilst_1(()=>!n&&i<r,t=>{this.stores[i++].has(e,(e,r)=>{if(null==e)return n=!0,t(null,r);t()})},t)}delete(e,t){each(this.stores,(t,r)=>{t.delete(e,r)},e=>{if(e)return t(Errors$1.dbDeleteFailedError());t()})}close(e){each(this.stores,(e,t)=>{e.close(t)},e)}batch(){const e=this.stores.map(e=>e.batch());return{put:(t,r)=>{e.forEach(e=>e.put(t,r))},delete:t=>{e.forEach(e=>e.delete(t))},commit:t=>{each(e,(e,t)=>{e.commit(t)},t)}}}query(e){return this.stores[this.stores.length-1].query(e)}}var tiered=TieredDatastore;const Key$7=src$B.Key;class NamespaceDatastore extends keytransform{constructor(e,t){super(e,{convert:e=>t.child(e),invert(e){if("/"===t.toString())return e;if(!t.isAncestorOf(e))throw new Error(`Expected prefix: (${t.toString()}) in key: ${e.toString()}`);return new Key$7(e.toString().slice(t.toString().length),!1)}}),this.prefix=t}query(e){return e.prefix&&"/"!==this.prefix.toString()?super.query(Object.assign({},e,{prefix:this.prefix.child(new Key$7(e.prefix)).toString()})):super.query(e)}}var namespace=NamespaceDatastore,KeytransformDatastore_1=keytransform,ShardingDatastore_1=sharding,MountDatastore_1=mount,TieredDatastore_1=tiered,NamespaceDatastore_1=namespace,shard_1$1=shard,src$C={KeytransformDatastore:KeytransformDatastore_1,ShardingDatastore:ShardingDatastore_1,MountDatastore:MountDatastore_1,TieredDatastore:TieredDatastore_1,NamespaceDatastore:NamespaceDatastore_1,shard:shard_1$1},base32$2=createCommonjsModule(function(e,t){var r=function(e,t){return t||(t={}),e.split("").forEach(function(e,r){e in t||(t[e]=r)}),t},n={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",charmap:{0:14,1:8}};n.charmap=r(n.alphabet,n.charmap);var i={alphabet:"0123456789ABCDEFGHJKMNPQRSTVWXYZ",charmap:{O:0,I:1,L:1}};i.charmap=r(i.alphabet,i.charmap);var o={alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",charmap:{}};function s(e){if(this.buf=[],this.shift=8,this.carry=0,e){switch(e.type){case"rfc4648":this.charmap=t.rfc4648.charmap;break;case"crockford":this.charmap=t.crockford.charmap;break;case"base32hex":this.charmap=t.base32hex.charmap;break;default:throw new Error("invalid type")}e.charmap&&(this.charmap=e.charmap)}}function a(e){if(this.buf="",this.shift=3,this.carry=0,e){switch(e.type){case"rfc4648":this.alphabet=t.rfc4648.alphabet;break;case"crockford":this.alphabet=t.crockford.alphabet;break;case"base32hex":this.alphabet=t.base32hex.alphabet;break;default:throw new Error("invalid type")}e.alphabet?this.alphabet=e.alphabet:e.lc&&(this.alphabet=this.alphabet.toLowerCase())}}o.charmap=r(o.alphabet,o.charmap),s.prototype.charmap=n.charmap,s.prototype.write=function(e){var t=this.charmap,r=this.buf,n=this.shift,i=this.carry;return e.toUpperCase().split("").forEach(function(e){if("="!=e){var o=255&t[e];(n-=5)>0?i|=o<<n:n<0?(r.push(i|o>>-n),i=o<<(n+=8)&255):(r.push(i|o),n=8,i=0)}}),this.shift=n,this.carry=i,this},s.prototype.finalize=function(e){return e&&this.write(e),8!==this.shift&&0!==this.carry&&(this.buf.push(this.carry),this.shift=8,this.carry=0),this.buf},a.prototype.alphabet=n.alphabet,a.prototype.write=function(e){var t,r,n,i=this.shift,o=this.carry;for(n=0;n<e.length;n++)t=o|(r=e[n])>>i,this.buf+=this.alphabet[31&t],i>5&&(t=r>>(i-=5),this.buf+=this.alphabet[31&t]),o=r<<(i=5-i),i=8-i;return this.shift=i,this.carry=o,this},a.prototype.finalize=function(e){return e&&this.write(e),3!==this.shift&&(this.buf+=this.alphabet[31&this.carry],this.shift=3,this.carry=0),this.buf},t.encode=function(e,t){return new a(t).finalize(e)},t.decode=function(e,t){return new s(t).finalize(e)},t.Decoder=s,t.Encoder=a,t.charmap=r,t.crockford=i,t.rfc4648=n,t.base32hex=o}),base32_1=base32$2.encode,base32_2=base32$2.decode,base32_3=base32$2.Decoder,base32_4=base32$2.Encoder,base32_5=base32$2.charmap,base32_6=base32$2.crockford,base32_7=base32$2.rfc4648,base32_8=base32$2.base32hex,finalizeDecode=base32$2.Decoder.prototype.finalize;base32$2.Decoder.prototype.finalize=function(e){var t=finalizeDecode.call(this,e);return new Buffer(t)};var base32_js=base32$2;function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var _arrayMap=arrayMap;function baseProperty(e){return function(t){return null==t?void 0:t[e]}}var _baseProperty=baseProperty,filter$2=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i){((0,n.default)(t)?c:u)(e,t,(0,s.default)(r),i||o.default)};var r=a(_arrayMap),n=a(isArrayLike_1),i=a(_baseProperty),o=a(noop_1),s=a(wrapAsync_1);function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,n){var i=new Array(t.length);e(t,function(e,t,n){r(e,function(e,r){i[t]=!!r,n(e)})},function(e){if(e)return n(e);for(var r=[],o=0;o<t.length;o++)i[o]&&r.push(t[o]);n(null,r)})}function u(e,t,n,o){var s=[];e(t,function(e,t,r){n(e,function(n,i){n?r(n):(i&&s.push({index:t,value:e}),r())})},function(e){e?o(e):o(null,(0,r.default)(s.sort(function(e,t){return e.index-t.index}),(0,i.default)("value")))})}e.exports=t.default});unwrapExports(filter$2);var reject_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i){(0,n.default)(e,t,function(e,t){r(e,function(e,r){t(e,!r)})},i)};var r,n=(r=filter$2)&&r.__esModule?r:{default:r};e.exports=t.default});unwrapExports(reject_1);var reject=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(reject_1),n=i(doParallel_1);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(r.default),e.exports=t.default});unwrapExports(reject);var CIDUtil$7={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$7=CIDUtil$7;class CID$6{constructor(e,t,r,n){if(_CID$6.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$6.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$6.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$6.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$6(0,this.codec,this.multihash)}toV1(){return new _CID$6(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$7.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$6=classIs(CID$6,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$6.codecs=baseTable;var src$D=_CID$6;const ShardingStore=src$C.ShardingDatastore,Key$8=src$B.Key,keyFromBuffer=e=>{const t=new base32_js.Encoder;return new Key$8("/"+t.write(e).finalize(),!1)},cidToDsKey=e=>keyFromBuffer(e.buffer);var blockstore=(e,t,r)=>{maybeWithSharding(e,t,(e,t)=>{if(e)return r(e);r(null,createBaseStore(t))})};function maybeWithSharding(e,t,r){if(t.sharding){const t=new src$C.shard.NextToLast(2);ShardingStore.createOrOpen(e,t,r)}else setImmediate$1(()=>r(null,e))}function createBaseStore(e){return{query(t,r){pull(e.query(t),collect(r))},get(t,r){if(!src$D.isCID(t))return setImmediate$1(()=>{r(new Error("Not a valid cid"))});const n=cidToDsKey(t);e.get(n,(i,o)=>{if(i){if("ERR_NOT_FOUND"===i.code){const o=cidToOtherVersion(t);if(!o)return r(i);const s=cidToDsKey(o);return e.get(s,(i,o)=>{if(i)return r(i);e.put(n,o,e=>{if(e)return r(e);r(null,new src$b(o,t))})})}return r(i)}r(null,new src$b(o,t))})},put(t,r){if(!src$b.isBlock(t))return setImmediate$1(()=>{r(new Error("invalid block"))});const n=cidToDsKey(t.cid);e.has(n,(i,o)=>i?r(i):o?r():void e.put(n,t.data,r))},putMany(t,r){const n=t.map(e=>({key:cidToDsKey(e.cid),block:e})),i=e.batch();reject(n,(t,r)=>e.has(t.key,r),(e,t)=>{if(e)return r(e);t.forEach(e=>{i.put(e.key,e.block.data)}),i.commit(r)})},has(t,r){if(!src$D.isCID(t))return setImmediate$1(()=>{r(new Error("Not a valid cid"))});e.has(cidToDsKey(t),(n,i)=>{if(n)return r(n);if(i)return r(null,!0);const o=cidToOtherVersion(t);if(!o)return r(null,!1);e.has(cidToDsKey(o),r)})},delete(t,r){if(!src$D.isCID(t))return setImmediate$1(()=>{r(new Error("Not a valid cid"))});e.delete(cidToDsKey(t),r)},close(t){e.close(t)}}}function cidToOtherVersion(e){try{return 0===e.version?e.toV1():e.toV0()}catch(e){return null}}var origCwd=process.cwd,cwd=null,platform=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return cwd||(cwd=origCwd.call(process)),cwd};try{process.cwd()}catch(e){}var chdir=process.chdir;process.chdir=function(e){cwd=null,chdir.call(process,e)};var polyfills=patch;function patch(e){var t,r,n;function i(t){return t?function(r,n,i){return t.call(e,r,n,function(e){f(e)&&(e=null),i&&i.apply(this,arguments)})}:t}function o(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!f(e))throw e}}:t}function s(t){return t?function(r,n,i,o){return t.call(e,r,n,i,function(e){f(e)&&(e=null),o&&o.apply(this,arguments)})}:t}function a(t){return t?function(r,n,i){try{return t.call(e,r,n,i)}catch(e){if(!f(e))throw e}}:t}function c(t){return t?function(r,n){return t.call(e,r,function(e,t){if(!t)return n.apply(this,arguments);t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296),n&&n.apply(this,arguments)})}:t}function u(t){return t?function(r){var n=t.call(e,r);return n.uid<0&&(n.uid+=4294967296),n.gid<0&&(n.gid+=4294967296),n}:t}function f(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}constants$j.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,n){e.open(t,constants$j.O_WRONLY|constants$j.O_SYMLINK,r,function(t,i){t?n&&n(t):e.fchmod(i,r,function(t){e.close(i,function(e){n&&n(t||e)})})})},e.lchmodSync=function(t,r){var n,i=e.openSync(t,constants$j.O_WRONLY|constants$j.O_SYMLINK,r),o=!0;try{n=e.fchmodSync(i,r),o=!1}finally{if(o)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return n}}(e),e.lutimes||function(e){constants$j.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,r,n,i){e.open(t,constants$j.O_SYMLINK,function(t,o){t?i&&i(t):e.futimes(o,r,n,function(t){e.close(o,function(e){i&&i(t||e)})})})},e.lutimesSync=function(t,r,n){var i,o=e.openSync(t,constants$j.O_SYMLINK),s=!0;try{i=e.futimesSync(o,r,n),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}):(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=i(e.chmod),e.fchmod=i(e.fchmod),e.lchmod=i(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=o(e.chmodSync),e.fchmodSync=o(e.fchmodSync),e.lchmodSync=o(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){}),e.lchown||(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){}),"win32"===platform&&(e.rename=(t=e.rename,function(r,n,i){var o=Date.now(),s=0;t(r,n,function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-o<6e4)return setTimeout(function(){e.stat(n,function(e,o){e&&"ENOENT"===e.code?t(r,n,a):i(c)})},s),void(s<100&&(s+=10));i&&i(c)})})),e.read=(r=e.read,function(t,n,i,o,s,a){var c;if(a&&"function"==typeof a){var u=0;c=function(f,l,d){if(f&&"EAGAIN"===f.code&&u<10)return u++,r.call(e,t,n,i,o,s,c);a.apply(this,arguments)}}return r.call(e,t,n,i,o,s,c)}),e.readSync=(n=e.readSync,function(t,r,i,o,s){for(var a=0;;)try{return n.call(e,t,r,i,o,s)}catch(e){if("EAGAIN"===e.code&&a<10){a++;continue}throw e}})}var Stream=Stream$1.Stream,legacyStreams=legacy;function legacy(e){return{ReadStream:function t(r,n){if(!(this instanceof t))return new t(r,n);Stream.call(this);var i=this;this.path=r;this.fd=null;this.readable=!0;this.paused=!1;this.flags="r";this.mode=438;this.bufferSize=65536;n=n||{};var o=Object.keys(n);for(var s=0,a=o.length;s<a;s++){var c=o[s];this[c]=n[c]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){i._read()});e.open(this.path,this.flags,this.mode,function(e,t){if(e)return i.emit("error",e),void(i.readable=!1);i.fd=t,i.emit("open",t),i._read()})},WriteStream:function t(r,n){if(!(this instanceof t))return new t(r,n);Stream.call(this);this.path=r;this.fd=null;this.writable=!0;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;n=n||{};var i=Object.keys(n);for(var o=0,s=i.length;o<s;o++){var a=i[o];this[a]=n[a]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1;this._queue=[];null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}var clone_1$1=clone$4;function clone$4(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:e.__proto__};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}var gracefulFs=createCommonjsModule(function(e){var t=[];var r,n,i=function(){};function o(e){polyfills(e),e.gracefulify=o,e.FileReadStream=d,e.FileWriteStream=h,e.createReadStream=function(e,t){return new d(e,t)},e.createWriteStream=function(e,t){return new h(e,t)};var t=e.readFile;e.readFile=function(e,r,n){"function"==typeof r&&(n=r,r=null);return function e(r,n,i){return t(r,n,function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof i&&i.apply(this,arguments),a()):s([e,[r,n,i]])})}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);return function e(t,n,i,o){return r(t,n,i,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof o&&o.apply(this,arguments),a()):s([e,[t,n,i,o]])})}(e,t,n,i)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,i){"function"==typeof r&&(i=r,r=null);return function e(t,r,i,o){return n(t,r,i,function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof o&&o.apply(this,arguments),a()):s([e,[t,r,i,o]])})}(e,t,r,i)});var i=e.readdir;function c(t){return i.apply(e,t)}if(e.readdir=function(e,t,r){var n=[e];"function"!=typeof t?n.push(t):r=t;return n.push(function(e,t){t&&t.sort&&t.sort(),!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof r&&r.apply(this,arguments),a()):s([c,[n]])}),c(n)},"v0.8"===process.version.substr(0,4)){var u=legacyStreams(e);d=u.ReadStream,h=u.WriteStream}var f=e.ReadStream;f&&(d.prototype=Object.create(f.prototype),d.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())})});var l=e.WriteStream;function d(e,t){return this instanceof d?(f.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}function h(e,t){return this instanceof h?(l.apply(this,arguments),this):h.apply(Object.create(h.prototype),arguments)}l&&(h.prototype=Object.create(l.prototype),h.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))})}),e.ReadStream=d,e.WriteStream=h;var p=e.open;function b(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,i){return p(t,r,n,function(o,c){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?("function"==typeof i&&i.apply(this,arguments),a()):s([e,[t,r,n,i]])})}(e,t,r,n)}return e.open=b,e}function s(e){i("ENQUEUE",e[0].name,e[1]),t.push(e)}function a(){var e=t.shift();e&&(i("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}util$j.debuglog?i=util$j.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(i=function(){var e=util$j.format.apply(util$j,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){i(t),assert$t.equal(t.length,0)}),e.exports=o(clone_1$1(fs)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!fs.__patched&&(e.exports=o(fs),fs.__patched=!0),e.exports.close=(r=fs.close,function(e,t){return r.call(fs,e,function(e){e||a(),"function"==typeof t&&t.apply(this,arguments)})}),e.exports.closeSync=(n=fs.closeSync,function(e){var t=n.apply(fs,arguments);return a(),t}),/\bgraceful-fs\b/.test(fs.closeSync.toString())||(fs.closeSync=e.exports.closeSync,fs.close=e.exports.close)}),gracefulFs_1=gracefulFs.close,gracefulFs_2=gracefulFs.closeSync,isWindows="win32"===process.platform,DEBUG=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function rethrow(){var e;if(DEBUG){var t=new Error;e=function(e){e&&(t.message=e.message,r(e=t))}}else e=r;return e;function r(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}function maybeCallback(e){return"function"==typeof e?e:rethrow()}var normalize=path$4.normalize;if(isWindows)var nextPartRe=/(.*?)(?:[\/\\]+|$)/g;else nextPartRe=/(.*?)(?:[\/]+|$)/g;if(isWindows)var splitRootRe=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else splitRootRe=/^[\/]*/;var realpathSync=function(e,t){if(e=path$4.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,n,i,o,s=e,a={},c={};function u(){var t=splitRootRe.exec(e);r=t[0].length,n=t[0],i=t[0],o="",isWindows&&!c[i]&&(fs.lstatSync(i),c[i]=!0)}for(u();r<e.length;){nextPartRe.lastIndex=r;var f=nextPartRe.exec(e);if(o=n,n+=f[0],i=o+f[1],r=nextPartRe.lastIndex,!(c[i]||t&&t[i]===i)){var l;if(t&&Object.prototype.hasOwnProperty.call(t,i))l=t[i];else{var d=fs.lstatSync(i);if(!d.isSymbolicLink()){c[i]=!0,t&&(t[i]=i);continue}var h=null;if(!isWindows){var p=d.dev.toString(32)+":"+d.ino.toString(32);a.hasOwnProperty(p)&&(h=a[p])}null===h&&(fs.statSync(i),h=fs.readlinkSync(i)),l=path$4.resolve(o,h),t&&(t[i]=l),isWindows||(a[p]=h)}e=path$4.resolve(l,e.slice(r)),u()}}return t&&(t[s]=e),e},realpath=function(e,t,r){if("function"!=typeof r&&(r=maybeCallback(t),t=null),e=path$4.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var n,i,o,s,a=e,c={},u={};function f(){var t=splitRootRe.exec(e);n=t[0].length,i=t[0],o=t[0],s="",isWindows&&!u[o]?fs.lstat(o,function(e){if(e)return r(e);u[o]=!0,l()}):process.nextTick(l)}function l(){if(n>=e.length)return t&&(t[a]=e),r(null,e);nextPartRe.lastIndex=n;var c=nextPartRe.exec(e);return s=i,i+=c[0],o=s+c[1],n=nextPartRe.lastIndex,u[o]||t&&t[o]===o?process.nextTick(l):t&&Object.prototype.hasOwnProperty.call(t,o)?p(t[o]):fs.lstat(o,d)}function d(e,n){if(e)return r(e);if(!n.isSymbolicLink())return u[o]=!0,t&&(t[o]=o),process.nextTick(l);if(!isWindows){var i=n.dev.toString(32)+":"+n.ino.toString(32);if(c.hasOwnProperty(i))return h(null,c[i],o)}fs.stat(o,function(e){if(e)return r(e);fs.readlink(o,function(e,t){isWindows||(c[i]=t),h(e,t)})})}function h(e,n,i){if(e)return r(e);var o=path$4.resolve(s,n);t&&(t[i]=o),p(o)}function p(t){e=path$4.resolve(t,e.slice(n)),f()}f()},old={realpathSync:realpathSync,realpath:realpath},fs_realpath=realpath$1;realpath$1.realpath=realpath$1,realpath$1.sync=realpathSync$1,realpath$1.realpathSync=realpathSync$1,realpath$1.monkeypatch=monkeypatch,realpath$1.unmonkeypatch=unmonkeypatch;var origRealpath=fs.realpath,origRealpathSync=fs.realpathSync,version$3=process.version,ok=/^v[0-5]\./.test(version$3);function newError(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function realpath$1(e,t,r){if(ok)return origRealpath(e,t,r);"function"==typeof t&&(r=t,t=null),origRealpath(e,t,function(n,i){newError(n)?old.realpath(e,t,r):r(n,i)})}function realpathSync$1(e,t){if(ok)return origRealpathSync(e,t);try{return origRealpathSync(e,t)}catch(r){if(newError(r))return old.realpathSync(e,t);throw r}}function monkeypatch(){fs.realpath=realpath$1,fs.realpathSync=realpathSync$1}function unmonkeypatch(){fs.realpath=origRealpath,fs.realpathSync=origRealpathSync}var concatMap=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=t(e[n],n);isArray$4(i)?r.push.apply(r,i):r.push(i)}return r},isArray$4=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},balancedMatch=balanced;function balanced(e,t,r){e instanceof RegExp&&(e=maybeMatch(e,r)),t instanceof RegExp&&(t=maybeMatch(t,r));var n=range$1(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function maybeMatch(e,t){var r=t.match(e);return r?r[0]:null}function range$1(e,t,r){var n,i,o,s,a,c=r.indexOf(e),u=r.indexOf(t,c+1),f=c;if(c>=0&&u>0){for(n=[],o=r.length;f>=0&&!a;)f==c?(n.push(f),c=r.indexOf(e,f+1)):1==n.length?a=[n.pop(),u]:((i=n.pop())<o&&(o=i,s=u),u=r.indexOf(t,f+1)),f=c<u&&c>=0?c:u;n.length&&(a=[o,s])}return a}balanced.range=range$1;var braceExpansion=expandTop,escSlash="\0SLASH"+Math.random()+"\0",escOpen="\0OPEN"+Math.random()+"\0",escClose="\0CLOSE"+Math.random()+"\0",escComma="\0COMMA"+Math.random()+"\0",escPeriod="\0PERIOD"+Math.random()+"\0";function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}function unescapeBraces(e){return e.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function parseCommaParts(e){if(!e)return[""];var t=[],r=balancedMatch("{","}",e);if(!r)return e.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=parseCommaParts(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),t.push.apply(t,s),t}function expandTop(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),expand(escapeBraces(e),!0).map(unescapeBraces)):[]}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand(e,t){var r=[],n=balancedMatch("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var i,o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),a=o||s,c=n.body.indexOf(",")>=0;if(!a&&!c)return n.post.match(/,.*\}/)?expand(e=n.pre+"{"+n.body+escClose+n.post):[e];if(a)i=n.body.split(/\.\./);else if(1===(i=parseCommaParts(n.body)).length&&1===(i=expand(i[0],!1).map(embrace)).length)return(l=n.post.length?expand(n.post,!1):[""]).map(function(e){return n.pre+i[0]+e});var u,f=n.pre,l=n.post.length?expand(n.post,!1):[""];if(a){var d=numeric(i[0]),h=numeric(i[1]),p=Math.max(i[0].length,i[1].length),b=3==i.length?Math.abs(numeric(i[2])):1,m=lte;h<d&&(b*=-1,m=gte);var g=i.some(isPadded);u=[];for(var y=d;m(y,h);y+=b){var v;if(s)"\\"===(v=String.fromCharCode(y))&&(v="");else if(v=String(y),g){var _=p-v.length;if(_>0){var $=new Array(_+1).join("0");v=y<0?"-"+$+v.slice(1):$+v}}u.push(v)}}else u=concatMap(i,function(e){return expand(e,!1)});for(var S=0;S<u.length;S++)for(var E=0;E<l.length;E++){var w=f+u[S]+l[E];(!t||a||w)&&r.push(w)}return r}var minimatch_1=minimatch;minimatch.Minimatch=Minimatch;var path={sep:"/"};try{path=path$4}catch(e){}var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},plTypes={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},qmark="[^/]",star=qmark+"*?",twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?",reSpecials=charSet("().*{}+?[]^$\\!");function charSet(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}var slashSplit=/\/+/;function filter$3(e,t){return t=t||{},function(r,n,i){return minimatch(r,e,t)}}function ext(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach(function(e){r[e]=t[e]}),Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function minimatch(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new Minimatch(t,r).match(e))}function Minimatch(e,t){if(!(this instanceof Minimatch))return new Minimatch(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==path.sep&&(e=e.split(path.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function make(){if(!this._made){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,r),r=this.globParts=r.map(function(e){return e.split(slashSplit)}),this.debug(this.pattern,r),r=r.map(function(e,t,r){return e.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(e){return-1===e.indexOf(!1)}),this.debug(this.pattern,r),this.set=r}else this.empty=!0;else this.comment=!0}}function parseNegate(){var e=this.pattern,t=!1,r=0;if(!this.options.nonegate){for(var n=0,i=e.length;n<i&&"!"===e.charAt(n);n++)t=!t,r++;r&&(this.pattern=e.substr(r)),this.negate=t}}function braceExpand(e,t){if(t||(t=this instanceof Minimatch?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:braceExpansion(e)}minimatch.filter=filter$3,minimatch.defaults=function(e){if(!e||!Object.keys(e).length)return minimatch;var t=minimatch,r=function(r,n,i){return t.minimatch(r,n,ext(e,i))};return r.Minimatch=function(r,n){return new t.Minimatch(r,ext(e,n))},r},Minimatch.defaults=function(e){return e&&Object.keys(e).length?minimatch.defaults(e).Minimatch:Minimatch},Minimatch.prototype.debug=function(){},Minimatch.prototype.make=make,Minimatch.prototype.parseNegate=parseNegate,minimatch.braceExpand=function(e,t){return braceExpand(e,t)},Minimatch.prototype.braceExpand=braceExpand,Minimatch.prototype.parse=parse$5;var SUBPARSE={};function parse$5(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return GLOBSTAR;if(""===e)return"";var n,i="",o=!!r.nocase,s=!1,a=[],c=[],u=!1,f=-1,l=-1,d="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",h=this;function p(){if(n){switch(n){case"*":i+=star,o=!0;break;case"?":i+=qmark,o=!0;break;default:i+="\\"+n}h.debug("clearStateChar %j %j",n,i),n=!1}}for(var b,m=0,g=e.length;m<g&&(b=e.charAt(m));m++)if(this.debug("%s\t%s %s %j",e,m,i,b),s&&reSpecials[b])i+="\\"+b,s=!1;else switch(b){case"/":return!1;case"\\":p(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,m,i,b),u){this.debug("  in class"),"!"===b&&m===l+1&&(b="^"),i+=b;continue}h.debug("call clearStateChar %j",n),p(),n=b,r.noext&&p();continue;case"(":if(u){i+="(";continue}if(!n){i+="\\(";continue}a.push({type:n,start:m-1,reStart:i.length,open:plTypes[n].open,close:plTypes[n].close}),i+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,i),n=!1;continue;case")":if(u||!a.length){i+="\\)";continue}p(),o=!0;var y=a.pop();i+=y.close,"!"===y.type&&c.push(y),y.reEnd=i.length;continue;case"|":if(u||!a.length||s){i+="\\|",s=!1;continue}p(),i+="|";continue;case"[":if(p(),u){i+="\\"+b;continue}u=!0,l=m,f=i.length,i+=b;continue;case"]":if(m===l+1||!u){i+="\\"+b,s=!1;continue}if(u){var v=e.substring(l+1,m);try{RegExp("["+v+"]")}catch(e){var _=this.parse(v,SUBPARSE);i=i.substr(0,f)+"\\["+_[0]+"\\]",o=o||_[1],u=!1;continue}}o=!0,u=!1,i+=b;continue;default:p(),s?s=!1:!reSpecials[b]||"^"===b&&u||(i+="\\"),i+=b}for(u&&(v=e.substr(l+1),_=this.parse(v,SUBPARSE),i=i.substr(0,f)+"\\["+_[0],o=o||_[1]),y=a.pop();y;y=a.pop()){var $=i.slice(y.reStart+y.open.length);this.debug("setting tail",i,y),$=$.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,r){return r||(r="\\"),t+t+r+"|"}),this.debug("tail=%j\n   %s",$,$,y,i);var S="*"===y.type?star:"?"===y.type?qmark:"\\"+y.type;o=!0,i=i.slice(0,y.reStart)+S+"\\("+$}p(),s&&(i+="\\\\");var E=!1;switch(i.charAt(0)){case".":case"[":case"(":E=!0}for(var w=c.length-1;w>-1;w--){var C=c[w],A=i.slice(0,C.reStart),k=i.slice(C.reStart,C.reEnd-8),T=i.slice(C.reEnd-8,C.reEnd),I=i.slice(C.reEnd);T+=I;var B=A.split("(").length-1,P=I;for(m=0;m<B;m++)P=P.replace(/\)[+*?]?/,"");var R="";""===(I=P)&&t!==SUBPARSE&&(R="$"),i=A+k+I+R+T}if(""!==i&&o&&(i="(?=.)"+i),E&&(i=d+i),t===SUBPARSE)return[i,o];if(!o)return globUnescape(e);var O=r.nocase?"i":"";try{var N=new RegExp("^"+i+"$",O)}catch(e){return new RegExp("$.")}return N._glob=e,N._src=i,N}function makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?star:t.dot?twoStarDot:twoStarNoDot,n=t.nocase?"i":"",i=e.map(function(e){return e.map(function(e){return e===GLOBSTAR?r:"string"==typeof e?regExpEscape(e):e._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(e){this.regexp=!1}return this.regexp}function match(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==path.sep&&(e=e.split(path.sep).join("/")),e=e.split(slashSplit),this.debug(this.pattern,"split",e);var n,i,o=this.set;for(this.debug(this.pattern,"set",o),i=e.length-1;i>=0&&!(n=e[i]);i--);for(i=0;i<o.length;i++){var s=o[i],a=e;if(r.matchBase&&1===s.length&&(a=[n]),this.matchOne(a,s,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate}function globUnescape(e){return e.replace(/\\(.)/g,"$1")}function regExpEscape(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function posix(e){return"/"===e.charAt(0)}function win32(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}minimatch.makeRe=function(e,t){return new Minimatch(e,t||{}).makeRe()},Minimatch.prototype.makeRe=makeRe,minimatch.match=function(e,t,r){var n=new Minimatch(t,r=r||{});return e=e.filter(function(e){return n.match(e)}),n.options.nonull&&!e.length&&e.push(t),e},Minimatch.prototype.match=match,Minimatch.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,o=0,s=e.length,a=t.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var c,u=t[o],f=e[i];if(this.debug(t,u,f),!1===u)return!1;if(u===GLOBSTAR){this.debug("GLOBSTAR",[t,u,f]);var l=i,d=o+1;if(d===a){for(this.debug("** at the end");i<s;i++)if("."===e[i]||".."===e[i]||!n.dot&&"."===e[i].charAt(0))return!1;return!0}for(;l<s;){var h=e[l];if(this.debug("\nglobstar while",e,l,t,d,h),this.matchOne(e.slice(l),t.slice(d),r))return this.debug("globstar found match!",l,s,h),!0;if("."===h||".."===h||!n.dot&&"."===h.charAt(0)){this.debug("dot detected!",e,l,t,d);break}this.debug("globstar swallow a segment, and continue"),l++}return!(!r||(this.debug("\n>>> no match, partial?",e,l,t,d),l!==s))}if("string"==typeof u?(c=n.nocase?f.toLowerCase()===u.toLowerCase():f===u,this.debug("string match",u,f,c)):(c=f.match(u),this.debug("pattern match",u,f,c)),!c)return!1}if(i===s&&o===a)return!0;if(i===s)return r;if(o===a)return i===s-1&&""===e[i];throw new Error("wtf?")};var pathIsAbsolute="win32"===process.platform?win32:posix,posix_1=posix,win32_1=win32;pathIsAbsolute.posix=posix_1,pathIsAbsolute.win32=win32_1;var alphasort_1=alphasort,alphasorti_1=alphasorti,setopts_1=setopts,ownProp_1=ownProp,makeAbs_1=makeAbs,finish_1=finish,mark_1=mark,isIgnored_1=isIgnored,childrenIgnored_1=childrenIgnored;function ownProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Minimatch$1=minimatch_1.Minimatch;function alphasorti(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function alphasort(e,t){return e.localeCompare(t)}function setupIgnores(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(ignoreMap))}function ignoreMap(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new Minimatch$1(r,{dot:!0})}return{matcher:new Minimatch$1(e,{dot:!0}),gmatcher:t}}function setopts(e,t,r){if(r||(r={}),r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),setupIgnores(e,r),e.changedCwd=!1;var n=process.cwd();ownProp(r,"cwd")?(e.cwd=path$4.resolve(r.cwd),e.changedCwd=e.cwd!==n):e.cwd=n,e.root=r.root||path$4.resolve(e.cwd,"/"),e.root=path$4.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=pathIsAbsolute(e.cwd)?e.cwd:makeAbs(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new Minimatch$1(t,r),e.options=e.minimatch.options}function finish(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var o=e.matches[n];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?r.push.apply(r,s):s.forEach(function(e){r[e]=!0})}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(e.nocase?alphasorti:alphasort)),e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter(function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[makeAbs(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r}))}e.ignore.length&&(r=r.filter(function(t){return!isIgnored(e,t)})),e.found=r}function mark(e,t){var r=makeAbs(e,t),n=e.cache[r],i=t;if(n){var o="DIR"===n||Array.isArray(n),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=makeAbs(e,i);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return i}function makeAbs(e,t){var r=t;return r="/"===t.charAt(0)?path$4.join(e.root,t):pathIsAbsolute(t)||""===t?t:e.changedCwd?path$4.resolve(e.cwd,t):path$4.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function isIgnored(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))})}function childrenIgnored(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return!(!e.gmatcher||!e.gmatcher.match(t))})}var common$6={alphasort:alphasort_1,alphasorti:alphasorti_1,setopts:setopts_1,ownProp:ownProp_1,makeAbs:makeAbs_1,finish:finish_1,mark:mark_1,isIgnored:isIgnored_1,childrenIgnored:childrenIgnored_1},sync=globSync;globSync.GlobSync=GlobSync;var setopts$1=common$6.setopts,ownProp$1=common$6.ownProp,childrenIgnored$1=common$6.childrenIgnored,isIgnored$1=common$6.isIgnored;function globSync(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new GlobSync(e,t).found}function GlobSync(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof GlobSync))return new GlobSync(e,t);if(setopts$1(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}GlobSync.prototype._finish=function(){if(assert$t(this instanceof GlobSync),this.realpath){var e=this;this.matches.forEach(function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i),n[fs_realpath.realpathSync(i,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;n[e._makeAbs(i)]=!0}})}common$6.finish(this)},GlobSync.prototype._process=function(e,t,r){assert$t(this instanceof GlobSync);for(var n,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,i).join("/")}var o,s=e.slice(i);null===n?o=".":pathIsAbsolute(n)||pathIsAbsolute(e.join("/"))?(n&&pathIsAbsolute(n)||(n="/"+n),o=n):o=n;var a=this._makeAbs(o);childrenIgnored$1(this,o)||(s[0]===minimatch_1.GLOBSTAR?this._processGlobStar(n,o,a,s,t,r):this._processReaddir(n,o,a,s,t,r))},GlobSync.prototype._processReaddir=function(e,t,r,n,i,o){var s=this._readdir(r,o);if(s){for(var a=n[0],c=!!this.minimatch.negate,u=a._glob,f=this.dot||"."===u.charAt(0),l=[],d=0;d<s.length;d++){if("."!==(b=s[d]).charAt(0)||f)(c&&!e?!b.match(a):b.match(a))&&l.push(b)}var h=l.length;if(0!==h)if(1!==n.length||this.mark||this.stat){n.shift();for(d=0;d<h;d++){var p;b=l[d];p=e?[e,b]:[b],this._process(p.concat(n),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var d=0;d<h;d++){var b=l[d];e&&(b="/"!==e.slice(-1)?e+"/"+b:e+b),"/"!==b.charAt(0)||this.nomount||(b=path$4.join(this.root,b)),this._emitMatch(i,b)}}}},GlobSync.prototype._emitMatch=function(e,t){if(!isIgnored$1(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},GlobSync.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=fs.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var n=r&&r.isSymbolicLink();return this.symlinks[e]=n,n||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},GlobSync.prototype._readdir=function(e,t){if(t&&!ownProp$1(this.symlinks,e))return this._readdirInGlobStar(e);if(ownProp$1(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,fs.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},GlobSync.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},GlobSync.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},GlobSync.prototype._processGlobStar=function(e,t,r,n,i,o){var s=this._readdir(r,o);if(s){var a=n.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,i,!1);var f=s.length;if(!this.symlinks[r]||!o)for(var l=0;l<f;l++){if("."!==s[l].charAt(0)||this.dot){var d=c.concat(s[l],a);this._process(d,i,!0);var h=c.concat(s[l],n);this._process(h,i,!0)}}}},GlobSync.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&pathIsAbsolute(e)&&!this.nomount){var n=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=path$4.join(this.root,e):(e=path$4.resolve(this.root,e),n&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},GlobSync.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&ownProp$1(this.cache,t)){var n=this.cache[t];if(Array.isArray(n)&&(n="DIR"),!r||"DIR"===n)return n;if(r&&"FILE"===n)return!1}var i=this.statCache[t];if(!i){var o;try{o=fs.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(o&&o.isSymbolicLink())try{i=fs.statSync(t)}catch(e){i=o}else i=o}this.statCache[t]=i;n=!0;return i&&(n=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||n,(!r||"FILE"!==n)&&n},GlobSync.prototype._mark=function(e){return common$6.mark(this,e)},GlobSync.prototype._makeAbs=function(e){return common$6.makeAbs(this,e)};var wrappy_1=wrappy;function wrappy(e,t){if(e&&t)return wrappy(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){r[t]=e[t]}),r;function r(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var n=e.apply(this,t),i=t[t.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach(function(e){n[e]=i[e]}),n}}var once_1$1=wrappy_1(once$1),strict=wrappy_1(onceStrict);function once$1(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function onceStrict(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}once$1.proto=once$1(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once$1(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})}),once_1$1.strict=strict;var reqs=Object.create(null),inflight_1=wrappy_1(inflight);function inflight(e,t){return reqs[e]?(reqs[e].push(t),null):(reqs[e]=[t],makeres(e))}function makeres(e){return once_1$1(function t(){var r=reqs[e],n=r.length,i=slice(arguments);try{for(var o=0;o<n;o++)r[o].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick(function(){t.apply(null,i)})):delete reqs[e]}})}function slice(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}var glob_1=glob,EE=events$1.EventEmitter,setopts$2=common$6.setopts,ownProp$2=common$6.ownProp,childrenIgnored$2=common$6.childrenIgnored,isIgnored$2=common$6.isIgnored;function glob(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return sync(e,t)}return new Glob(e,t,r)}glob.sync=sync;var GlobSync$1=glob.GlobSync=sync.GlobSync;function extend(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Glob(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new GlobSync$1(e,t)}if(!(this instanceof Glob))return new Glob(e,t,r);setopts$2(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=once_1$1(r),this.on("error",r),this.on("end",function(e){r(null,e)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return a();for(var o=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,a);function a(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}o=!1}function readdirCb(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}glob.glob=glob,glob.hasMagic=function(e,t){var r=extend({},t);r.noprocess=!0;var n=new Glob(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var i=0;i<n[0].length;i++)if("string"!=typeof n[0][i])return!0;return!1},glob.Glob=Glob,inherits(Glob,EE),Glob.prototype._finish=function(){if(assert$t(this instanceof Glob),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();common$6.finish(this),this.emit("end",this.found)}},Glob.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},Glob.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,o=n.length;if(0===o)return t();var s=this.matches[e]=Object.create(null);n.forEach(function(r,n){r=i._makeAbs(r),fs_realpath.realpath(r,i.realpathCache,function(n,a){n?"stat"===n.syscall?s[r]=!0:i.emit("error",n):s[a]=!0,0==--o&&(i.matches[e]=s,t())})})},Glob.prototype._mark=function(e){return common$6.mark(this,e)},Glob.prototype._makeAbs=function(e){return common$6.makeAbs(this,e)},Glob.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Glob.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},Glob.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},Glob.prototype._process=function(e,t,r,n){if(assert$t(this instanceof Glob),assert$t("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var i,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:i=null;break;default:i=e.slice(0,o).join("/")}var s,a=e.slice(o);null===i?s=".":pathIsAbsolute(i)||pathIsAbsolute(e.join("/"))?(i&&pathIsAbsolute(i)||(i="/"+i),s=i):s=i;var c=this._makeAbs(s);if(childrenIgnored$2(this,s))return n();a[0]===minimatch_1.GLOBSTAR?this._processGlobStar(i,s,c,a,t,r,n):this._processReaddir(i,s,c,a,t,r,n)}},Glob.prototype._processReaddir=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,function(c,u){return a._processReaddir2(e,t,r,n,i,o,u,s)})},Glob.prototype._processReaddir2=function(e,t,r,n,i,o,s,a){if(!s)return a();for(var c=n[0],u=!!this.minimatch.negate,f=c._glob,l=this.dot||"."===f.charAt(0),d=[],h=0;h<s.length;h++){if("."!==(b=s[h]).charAt(0)||l)(u&&!e?!b.match(c):b.match(c))&&d.push(b)}var p=d.length;if(0===p)return a();if(1===n.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(h=0;h<p;h++){var b=d[h];e&&(b="/"!==e?e+"/"+b:e+b),"/"!==b.charAt(0)||this.nomount||(b=path$4.join(this.root,b)),this._emitMatch(i,b)}return a()}n.shift();for(h=0;h<p;h++){b=d[h];e&&(b="/"!==e?e+"/"+b:e+b),this._process([b].concat(n),i,o,a)}a()},Glob.prototype._emitMatch=function(e,t){if(!this.aborted&&!isIgnored$2(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=pathIsAbsolute(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}},Glob.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,n=inflight_1("lstat\0"+e,function(n,i){if(n&&"ENOENT"===n.code)return t();var o=i&&i.isSymbolicLink();r.symlinks[e]=o,o||!i||i.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())});n&&fs.lstat(e,n)}},Glob.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=inflight_1("readdir\0"+e+"\0"+t,r))){if(t&&!ownProp$2(this.symlinks,e))return this._readdirInGlobStar(e,r);if(ownProp$2(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return r();if(Array.isArray(n))return r(null,n)}fs.readdir(e,readdirCb(this,e,r))}},Glob.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}},Glob.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},Glob.prototype._processGlobStar=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,function(c,u){a._processGlobStar2(e,t,r,n,i,o,u,s)})},Glob.prototype._processGlobStar2=function(e,t,r,n,i,o,s,a){if(!s)return a();var c=n.slice(1),u=e?[e]:[],f=u.concat(c);this._process(f,i,!1,a);var l=this.symlinks[r],d=s.length;if(l&&o)return a();for(var h=0;h<d;h++){if("."!==s[h].charAt(0)||this.dot){var p=u.concat(s[h],c);this._process(p,i,!0,a);var b=u.concat(s[h],n);this._process(b,i,!0,a)}}a()},Glob.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,function(i,o){n._processSimple2(e,t,i,o,r)})},Glob.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&pathIsAbsolute(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=path$4.join(this.root,e):(e=path$4.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},Glob.prototype._stat=function(e,t){var r=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&ownProp$2(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||"DIR"===i)return t(null,i);if(n&&"FILE"===i)return t()}var o=this.statCache[r];if(void 0!==o){if(!1===o)return t(null,o);var s=o.isDirectory()?"DIR":"FILE";return n&&"FILE"===s?t():t(null,s,o)}var a=this,c=inflight_1("stat\0"+r,function(n,i){if(i&&i.isSymbolicLink())return fs.stat(r,function(n,o){n?a._stat2(e,r,null,i,t):a._stat2(e,r,n,o,t)});a._stat2(e,r,n,i,t)});c&&fs.lstat(r,c)},Glob.prototype._stat2=function(e,t,r,n,i){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,n)};var _0777=parseInt("0777",8),mkdirp=mkdirP.mkdirp=mkdirP.mkdirP=mkdirP;function mkdirP(e,t,r,n){"function"==typeof t?(r=t,t={}):t&&"object"==typeof t||(t={mode:t});var i=t.mode,o=t.fs||fs;void 0===i&&(i=_0777&~process.umask()),n||(n=null);var s=r||function(){};e=path$4.resolve(e),o.mkdir(e,i,function(r){if(!r)return s(null,n=n||e);switch(r.code){case"ENOENT":mkdirP(path$4.dirname(e),t,function(r,n){r?s(r,n):mkdirP(e,t,s,n)});break;default:o.stat(e,function(e,t){e||!t.isDirectory()?s(r,n):s(null,n)})}})}mkdirP.sync=function e(t,r,n){r&&"object"==typeof r||(r={mode:r});var i=r.mode,o=r.fs||fs;void 0===i&&(i=_0777&~process.umask()),n||(n=null),t=path$4.resolve(t);try{o.mkdirSync(t,i),n=n||t}catch(i){switch(i.code){case"ENOENT":n=e(path$4.dirname(t),r,n),e(t,r,n);break;default:var s;try{s=o.statSync(t)}catch(e){throw i}if(!s.isDirectory())throw i}}return n};const{open:open,write:write$1,close:close,rename:rename,fsync:fsync,unlink:unlink}=fs,{join:join,dirname:dirname}=path$4;var counter=0;function cleanup(e,t,r){unlink(e,function(){r(t)})}function closeAndCleanup(e,t,r,n){close(e,cleanup.bind(null,t,r,n))}function writeLoop(e,t,r,n,i){write$1(e,t,n,function(o,s){if(!o)return s<r-n?writeLoop(e,t,r,n+s,i):i(null);i(o)})}function openLoop(e,t){open(e,"w",function(r,n){if(r)return"EMFILE"===r.code?openLoop(e,t):t(r);t(null,n)})}function writeAtomic(e,t,r){const n=join(dirname(e),"."+process.pid+"."+counter++);openLoop(n,function(i,o){if(i)return void r(i);const s=Buffer.byteLength(t);writeLoop(o,t,s,0,function(t){t?closeAndCleanup(o,n,t,r):fsync(o,function(t){t?closeAndCleanup(o,n,t,r):close(o,function(t){t?cleanup(n,t,r):rename(n,e,e=>{e?cleanup(n,e,r):r(null)})})})}),t=null})}var fastWriteAtomic=writeAtomic;const asyncFilter$3=src$B.utils.asyncFilter,asyncSort$3=src$B.utils.asyncSort,IDatastore=src$B,Key$9=IDatastore.Key,Errors$2=IDatastore.Errors;class FsDatastore{constructor(e,t){this.path=path$4.resolve(e),this.opts=Object.assign({},{createIfMissing:!0,errorIfExists:!1,extension:".data"},t),this.opts.createIfMissing?this._openOrCreate():this._open()}open(e){this._openOrCreate(),setImmediate$1(e)}_open(){if(!gracefulFs.existsSync(this.path))throw new Error(`Datastore directory: ${this.path} does not exist`);if(this.opts.errorIfExists)throw new Error(`Datastore directory: ${this.path} already exists`)}_create(){mkdirp.sync(this.path,{fs:gracefulFs})}_openOrCreate(){try{this._open()}catch(e){if(e.message.match("does not exist"))return void this._create();throw e}}_encode(e){const t=e.parent().toString(),r=path$4.join(this.path,t),n=e.toString().slice(t.length);return{dir:r,file:path$4.join(r,n+this.opts.extension)}}_decode(e){const t=this.opts.extension;if(path$4.extname(e)!==t)throw new Error(`Invalid extension: ${path$4.extname(e)}`);const r=e.slice(this.path.length,-t.length).split(path$4.sep).join("/");return new Key$9(r)}putRaw(e,t,r){const n=this._encode(e),i=n.file.slice(0,-this.opts.extension.length);series_1([e=>mkdirp(n.dir,{fs:gracefulFs},e),e=>fastWriteAtomic(i,t,e)],e=>r(e))}put(e,t,r){const n=this._encode(e);series_1([e=>mkdirp(n.dir,{fs:gracefulFs},e),e=>fastWriteAtomic(n.file,t,e)],e=>{if(e)return r(Errors$2.dbWriteFailedError(e));r()})}getRaw(e,t){let r=this._encode(e).file;r=r.slice(0,-this.opts.extension.length),gracefulFs.readFile(r,(e,r)=>{if(e)return t(Errors$2.notFoundError(e));t(null,r)})}get(e,t){const r=this._encode(e);gracefulFs.readFile(r.file,(e,r)=>{if(e)return t(Errors$2.notFoundError(e));t(null,r)})}has(e,t){const r=this._encode(e);gracefulFs.access(r.file,e=>{t(null,!e)})}delete(e,t){const r=this._encode(e);gracefulFs.unlink(r.file,e=>{if(e)return t(Errors$2.dbDeleteFailedError(e));t()})}batch(){const e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:r=>{series_1([t=>each(e,(e,t)=>{this.put(e.key,e.value,t)},t),e=>each(t,(e,t)=>{this.delete(e,t)},e)],e=>r(e))}}}query(e){let t=e.prefix||"**",r=path$4.join(this.path,t,"*"+this.opts.extension).split(path$4.sep).join("/"),n=[pullStream.values(glob_1.sync(r))];if(e.keysOnly?n.push(pullStream.map(e=>({key:this._decode(e)}))):n.push(pullStream.asyncMap((e,t)=>{gracefulFs.readFile(e,(r,n)=>{if(r)return t(r);t(null,{key:this._decode(e),value:n})})})),null!=e.filters&&(n=n.concat(e.filters.map(asyncFilter$3))),null!=e.orders&&(n=n.concat(e.orders.map(asyncSort$3))),null!=e.offset){let t=0;n.push(pullStream.filter(()=>t++>=e.offset))}return null!=e.limit&&n.push(pullStream.take(e.limit)),pullStream.apply(null,n)}close(e){setImmediate$1(e)}}var src$E=FsDatastore,immutable=extend$1,hasOwnProperty$5=Object.prototype.hasOwnProperty;function extend$1(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)hasOwnProperty$5.call(r,n)&&(e[n]=r[n])}return e}function AbstractIterator(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._ended=!1,this._nexting=!1}AbstractIterator.prototype.next=function(e){var t=this;if("function"!=typeof e)throw new Error("next() requires a callback argument");return t._ended?(process.nextTick(e,new Error("cannot call next() after end()")),t):t._nexting?(process.nextTick(e,new Error("cannot call next() before previous next() has completed")),t):(t._nexting=!0,t._next(function(){t._nexting=!1,e.apply(null,arguments)}),t)},AbstractIterator.prototype._next=function(e){process.nextTick(e)},AbstractIterator.prototype.seek=function(e){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");e=this.db._serializeKey(e),this._seek(e)},AbstractIterator.prototype._seek=function(e){},AbstractIterator.prototype.end=function(e){if("function"!=typeof e)throw new Error("end() requires a callback argument");if(this._ended)return process.nextTick(e,new Error("end() already called on iterator"));this._ended=!0,this._end(e)},AbstractIterator.prototype._end=function(e){process.nextTick(e)};var abstractIterator=AbstractIterator;function AbstractChainedBatch(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._operations=[],this._written=!1}AbstractChainedBatch.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},AbstractChainedBatch.prototype.put=function(e,t){this._checkWritten();var r=this.db._checkKey(e)||this.db._checkValue(t);if(r)throw r;return e=this.db._serializeKey(e),t=this.db._serializeValue(t),this._put(e,t),this},AbstractChainedBatch.prototype._put=function(e,t){this._operations.push({type:"put",key:e,value:t})},AbstractChainedBatch.prototype.del=function(e){this._checkWritten();var t=this.db._checkKey(e);if(t)throw t;return e=this.db._serializeKey(e),this._del(e),this},AbstractChainedBatch.prototype._del=function(e){this._operations.push({type:"del",key:e})},AbstractChainedBatch.prototype.clear=function(){return this._checkWritten(),this._clear(),this},AbstractChainedBatch.prototype._clear=function(){this._operations=[]},AbstractChainedBatch.prototype.write=function(e,t){if(this._checkWritten(),"function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("write() requires a callback argument");"object"==typeof e&&null!==e||(e={}),this._written=!0,this._write(e,t)},AbstractChainedBatch.prototype._write=function(e,t){this.db._batch(this._operations,e,t)};var abstractChainedBatch=AbstractChainedBatch,hasOwnProperty$6=Object.prototype.hasOwnProperty,rangeOptions="start end gt gte lt lte".split(" ");function AbstractLevelDOWN(){this.status="new"}function cleanRangeOptions(e,t){var r={};for(var n in t)if(hasOwnProperty$6.call(t,n)){var i=t[n];isRangeOption(n)&&(i=e._serializeKey(i)),r[n]=i}return r}function isRangeOption(e){return-1!==rangeOptions.indexOf(e)}AbstractLevelDOWN.prototype.open=function(e,t){var r=this,n=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"==typeof e&&null!==e||(e={}),e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists,this.status="opening",this._open(e,function(e){if(e)return r.status=n,t(e);r.status="open",t()})},AbstractLevelDOWN.prototype._open=function(e,t){process.nextTick(t)},AbstractLevelDOWN.prototype.close=function(e){var t=this,r=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");this.status="closing",this._close(function(n){if(n)return t.status=r,e(n);t.status="closed",e()})},AbstractLevelDOWN.prototype._close=function(e){process.nextTick(e)},AbstractLevelDOWN.prototype.get=function(e,t,r){if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("get() requires a callback argument");var n=this._checkKey(e);if(n)return process.nextTick(r,n);e=this._serializeKey(e),"object"==typeof t&&null!==t||(t={}),t.asBuffer=!1!==t.asBuffer,this._get(e,t,r)},AbstractLevelDOWN.prototype._get=function(e,t,r){process.nextTick(function(){r(new Error("NotFound"))})},AbstractLevelDOWN.prototype.put=function(e,t,r,n){if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("put() requires a callback argument");var i=this._checkKey(e)||this._checkValue(t);if(i)return process.nextTick(n,i);e=this._serializeKey(e),t=this._serializeValue(t),"object"==typeof r&&null!==r||(r={}),this._put(e,t,r,n)},AbstractLevelDOWN.prototype._put=function(e,t,r,n){process.nextTick(n)},AbstractLevelDOWN.prototype.del=function(e,t,r){if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("del() requires a callback argument");var n=this._checkKey(e);if(n)return process.nextTick(r,n);e=this._serializeKey(e),"object"==typeof t&&null!==t||(t={}),this._del(e,t,r)},AbstractLevelDOWN.prototype._del=function(e,t,r){process.nextTick(r)},AbstractLevelDOWN.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(r=t),"function"==typeof e&&(r=e),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return process.nextTick(r,new Error("batch(array) requires an array argument"));if(0===e.length)return process.nextTick(r);"object"==typeof t&&null!==t||(t={});for(var n=new Array(e.length),i=0;i<e.length;i++){if("object"!=typeof e[i]||null===e[i])return process.nextTick(r,new Error("batch(array) element must be an object and not `null`"));var o=immutable(e[i]);if("put"!==o.type&&"del"!==o.type)return process.nextTick(r,new Error("`type` must be 'put' or 'del'"));var s=this._checkKey(o.key);if(s)return process.nextTick(r,s);if(o.key=this._serializeKey(o.key),"put"===o.type){var a=this._checkValue(o.value);if(a)return process.nextTick(r,a);o.value=this._serializeValue(o.value)}n[i]=o}this._batch(n,t,r)},AbstractLevelDOWN.prototype._batch=function(e,t,r){process.nextTick(r)},AbstractLevelDOWN.prototype._setupIteratorOptions=function(e){return(e=cleanRangeOptions(this,e)).reverse=!!e.reverse,e.keys=!1!==e.keys,e.values=!1!==e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=!1!==e.keyAsBuffer,e.valueAsBuffer=!1!==e.valueAsBuffer,e},AbstractLevelDOWN.prototype.iterator=function(e){return"object"==typeof e&&null!==e||(e={}),e=this._setupIteratorOptions(e),this._iterator(e)},AbstractLevelDOWN.prototype._iterator=function(e){return new abstractIterator(this)},AbstractLevelDOWN.prototype._chainedBatch=function(){return new abstractChainedBatch(this)},AbstractLevelDOWN.prototype._serializeKey=function(e){return e},AbstractLevelDOWN.prototype._serializeValue=function(e){return e},AbstractLevelDOWN.prototype._checkKey=function(e){return null==e?new Error("key cannot be `null` or `undefined`"):Buffer.isBuffer(e)&&0===e.length?new Error("key cannot be an empty Buffer"):""===e?new Error("key cannot be an empty String"):Array.isArray(e)&&0===e.length?new Error("key cannot be an empty Array"):void 0},AbstractLevelDOWN.prototype._checkValue=function(e){if(null==e)return new Error("value cannot be `null` or `undefined`")};var abstractLeveldown=AbstractLevelDOWN,AbstractLevelDOWN$1=abstractLeveldown,AbstractIterator$1=abstractIterator,AbstractChainedBatch$1=abstractChainedBatch,abstractLeveldown$1={AbstractLevelDOWN:AbstractLevelDOWN$1,AbstractIterator:AbstractIterator$1,AbstractChainedBatch:AbstractChainedBatch$1},AbstractIterator$2=abstractLeveldown$1.AbstractIterator;function DeferredIterator(e){AbstractIterator$2.call(this,e),this._options=e,this._iterator=null,this._operations=[]}inherits(DeferredIterator,AbstractIterator$2),DeferredIterator.prototype.setDb=function(e){var t=this._iterator=e.iterator(this._options);this._operations.forEach(function(e){t[e.method].apply(t,e.args)})},DeferredIterator.prototype._operation=function(e,t){if(this._iterator)return this._iterator[e].apply(this._iterator,t);this._operations.push({method:e,args:t})},"next end".split(" ").forEach(function(e){DeferredIterator.prototype["_"+e]=function(){this._operation(e,arguments)}});var deferredIterator=DeferredIterator,AbstractLevelDOWN$2=abstractLeveldown$1.AbstractLevelDOWN,deferrables="put get del batch".split(" ");function DeferredLevelDOWN(e){AbstractLevelDOWN$2.call(this,""),this._db=e,this._operations=[],this._iterators=[],closed(this)}function open$1(e){deferrables.concat("iterator").forEach(function(t){e["_"+t]=function(){return this._db[t].apply(this._db,arguments)}}),e._db.approximateSize&&(e.approximateSize=function(){return this._db.approximateSize.apply(this._db,arguments)})}function closed(e){deferrables.forEach(function(t){e["_"+t]=function(){this._operations.push({method:t,args:arguments})}}),"function"==typeof e._db.approximateSize&&(e.approximateSize=function(){this._operations.push({method:"approximateSize",args:arguments})}),e._iterator=function(e){var t=new deferredIterator(e);return this._iterators.push(t),t}}inherits(DeferredLevelDOWN,AbstractLevelDOWN$2),DeferredLevelDOWN.prototype._open=function(e,t){var r=this;this._db.open(e,function(e){if(e)return t(e);r._operations.forEach(function(e){r._db[e.method].apply(r._db,e.args)}),r._operations=[],r._iterators.forEach(function(e){e.setDb(r._db)}),r._iterators=[],open$1(r),t()})},DeferredLevelDOWN.prototype._close=function(e){var t=this;this._db.close(function(r){if(r)return e(r);closed(t),e()})},DeferredLevelDOWN.prototype._serializeKey=function(e){return e},DeferredLevelDOWN.prototype._serializeValue=function(e){return e};var deferredLeveldown=DeferredLevelDOWN,DeferredIterator_1=deferredIterator;deferredLeveldown.DeferredIterator=DeferredIterator_1;var stream=Stream$1;function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Buffer$o=buffer$1.Buffer,inspect=util$j.inspect,custom=inspect&&inspect.custom||"inspect";function copyBuffer(e,t,r){Buffer$o.prototype.copy.call(e,t,r)}var buffer_list=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},t.concat=function(e){if(0===this.length)return Buffer$o.alloc(0);for(var t=Buffer$o.allocUnsafe(e>>>0),r=this.head,n=0;r;)copyBuffer(r.data,t,n),n+=r.data.length,r=r.next;return t},t.consume=function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n},t._getBuffer=function(e){var t=Buffer$o.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t},t[custom]=function(e,t){return inspect(this,_objectSpread({},t,{depth:0,customInspect:!1}))},e}();function destroy(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||process.nextTick(emitErrorNT,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(process.nextTick(emitErrorAndCloseNT,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t?(process.nextTick(emitCloseNT,r),t(e)):process.nextTick(emitCloseNT,r)}),this)}function emitErrorAndCloseNT(e,t){emitErrorNT(e,t),emitCloseNT(e)}function emitCloseNT(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(e,t){e.emit("error",t)}var destroy_1={destroy:destroy,undestroy:undestroy};const codes$2={};function createErrorType(e,t,r){r||(r=Error);class n extends r{constructor(e,r,n){super(function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(e,r,n))}}n.prototype.name=r.name,n.prototype.code=e,codes$2[e]=n}function oneOf(e,t){if(Array.isArray(e)){const r=e.length;return e=e.map(e=>String(e)),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}function startsWith(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function endsWith(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function includes(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}createErrorType("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(e,t,r){let n,i;if("string"==typeof t&&startsWith(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",endsWith(e," argument"))i=`The ${e} ${n} ${oneOf(t,"type")}`;else{i=`The "${e}" ${includes(e,".")?"property":"argument"} ${n} ${oneOf(t,"type")}`}return i+=`. Received type ${typeof r}`},TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");var codes_1=codes$2,errors$2={codes:codes_1},ERR_INVALID_OPT_VALUE=errors$2.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function getHighWaterMark(e,t,r,n){var i=highWaterMarkFrom(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new ERR_INVALID_OPT_VALUE(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}var state={getHighWaterMark:getHighWaterMark},experimentalWarnings=new Set;function emitExperimentalWarning(e){if(!experimentalWarnings.has(e)){var t=e+" is an experimental feature. This feature could change at any time";experimentalWarnings.add(e),process.emitWarning(t,"ExperimentalWarning")}}function noop$2(){}var Duplex,emitExperimentalWarning_1=process.emitWarning?emitExperimentalWarning:noop$2,experimentalWarning={emitExperimentalWarning:emitExperimentalWarning_1},node$4=util$j.deprecate,_stream_writable=Writable;function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(t,e)}}Writable.WritableState=WritableState;var internalUtil={deprecate:node$4},Buffer$p=buffer$1.Buffer,OurUint8Array=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer$p.from(e)}function _isUint8Array(e){return Buffer$p.isBuffer(e)||e instanceof OurUint8Array}var realHasInstance,getHighWaterMark$1=state.getHighWaterMark,_require$codes=errors$2.codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING;function nop(){}function WritableState(e,t,r){Duplex=Duplex||_stream_duplex,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=getHighWaterMark$1(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){var t=this instanceof(Duplex=Duplex||_stream_duplex);if(!t&&!realHasInstance.call(Writable,this))return new Writable(e);this._writableState=new WritableState(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),stream.call(this)}function writeAfterEnd(e,t){var r=new ERR_STREAM_WRITE_AFTER_END;e.emit("error",r),process.nextTick(t,r)}function validChunk(e,t,r,n){var i;return null===r?i=new ERR_STREAM_NULL_VALUES:"string"==typeof r||t.objectMode||(i=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],r)),!i||(e.emit("error",i),process.nextTick(n,i),!1)}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer$p.from(t,r)),t}function writeOrBuffer(e,t,r,n,i,o){if(!r){var s=decodeChunk(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,a,n,i,o);return c}function doWrite(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new ERR_STREAM_DESTROYED("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function onwriteError(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(finishMaybe,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),finishMaybe(e,t))}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new ERR_MULTIPLE_CALLBACK;if(onwriteStateUpdate(r),t)onwriteError(e,r,n,t,i);else{var o=needFinish(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),n?process.nextTick(afterWrite,e,r,o,i):afterWrite(e,r,o,i)}}function afterWrite(e,t,r,n){r||onwriteDrain(e,t),t.pendingcb--,n(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,doWrite(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,f=r.callback;if(doWrite(e,t,!1,t.objectMode?1:c.length,c,u,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),finishMaybe(e,t)})}function prefinish(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(callFinal,e,t)))}function finishMaybe(e,t){var r=needFinish(t);return r&&(prefinish(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}inherits(Writable,stream),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!realHasInstance.call(this,e)||this===Writable&&(e&&e._writableState instanceof WritableState)}})):realHasInstance=function(e){return e instanceof this},Writable.prototype.pipe=function(){this.emit("error",new ERR_STREAM_CANNOT_PIPE)},Writable.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&_isUint8Array(e);return o&&!Buffer$p.isBuffer(e)&&(e=_uint8ArrayToBuffer(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=nop),n.ending?writeAfterEnd(this,r):(o||validChunk(this,n,e,r))&&(n.pendingcb++,i=writeOrBuffer(this,n,o,e,t,r)),i},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||endWritable(this,n,r),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable.prototype.destroy=destroy_1.destroy,Writable.prototype._undestroy=destroy_1.undestroy,Writable.prototype._destroy=function(e,t){t(e)};var objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},_stream_duplex=Duplex$1;inherits(Duplex$1,_stream_readable);for(var keys$3=objectKeys(_stream_writable.prototype),v$2=0;v$2<keys$3.length;v$2++){var method=keys$3[v$2];Duplex$1.prototype[method]||(Duplex$1.prototype[method]=_stream_writable.prototype[method])}function Duplex$1(e){if(!(this instanceof Duplex$1))return new Duplex$1(e);_stream_readable.call(this,e),_stream_writable.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex$1.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex$1.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex$1.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex$1.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var Buffer$q=safeBuffer.Buffer,isEncoding=Buffer$q.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if("string"!=typeof t&&(Buffer$q.isEncoding===isEncoding||!isEncoding(e)))throw new Error("Unknown encoding: "+e);return t||e}var StringDecoder_1=StringDecoder;function StringDecoder(e){var t;switch(this.encoding=normalizeEncoding(e),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,t=4;break;case"utf8":this.fillLast=utf8FillLast,t=4;break;case"base64":this.text=base64Text,this.end=base64End,t=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$q.allocUnsafe(t)}function utf8CheckByte(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function utf8CheckIncomplete(e,t,r){var n=t.length-1;if(n<r)return 0;var i=utf8CheckByte(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=utf8CheckByte(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=utf8CheckByte(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function utf8CheckExtraBytes(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function utf8Text(e,t){var r=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function utf8End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function utf16Text(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function base64Text(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function base64End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}StringDecoder.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var string_decoder={StringDecoder:StringDecoder_1},ERR_STREAM_PREMATURE_CLOSE=errors$2.codes.ERR_STREAM_PREMATURE_CLOSE;function once$2(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function noop$3(){}function isRequest(e){return e.setHeader&&"function"==typeof e.abort}function eos(e,t,r){if("function"==typeof t)return eos(e,null,t);t||(t={}),r=once$2(r||noop$3);var n=t.readable||!1!==t.readable&&e.readable,i=t.writable||!1!==t.writable&&e.writable,o=function(){e.writable||a()},s=e._writableState&&e._writableState.finished,a=function(){i=!1,s=!0,n||r.call(e)},c=e._readableState&&e._readableState.endEmitted,u=function(){n=!1,c=!0,i||r.call(e)},f=function(t){r.call(e,t)},l=function(){var t;return n&&!c?(e._readableState&&e._readableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE),r.call(e,t)):i&&!s?(e._writableState&&e._writableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE),r.call(e,t)):void 0},d=function(){e.req.on("finish",a)};return isRequest(e)?(e.on("complete",a),e.on("abort",l),e.req?d():e.on("request",d)):i&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",a),!1!==t.error&&e.on("error",f),e.on("close",l),function(){e.removeListener("complete",a),e.removeListener("abort",l),e.removeListener("request",d),e.req&&e.req.removeListener("finish",a),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",a),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",l)}}var _Object$setPrototypeO,endOfStream=eos;function _defineProperty$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream");function createIterResult(e,t){return{value:e,done:t}}function readAndResolve(e){var t=e[kLastResolve];if(null!==t){var r=e[kStream].read();null!==r&&(e[kLastPromise]=null,e[kLastResolve]=null,e[kLastReject]=null,t(createIterResult(r,!1)))}}function onReadable(e){process.nextTick(readAndResolve,e)}function wrapForNext(e,t){return function(r,n){e.then(function(){t[kEnded]?r(createIterResult(void 0,!0)):t[kHandlePromise](r,n)},n)}}var Duplex$2,AsyncIteratorPrototype=Object.getPrototypeOf(function(){}),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_defineProperty$1(_Object$setPrototypeO={get stream(){return this[kStream]},next:function(){var e=this,t=this[kError];if(null!==t)return Promise.reject(t);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise(function(t,r){process.nextTick(function(){e[kError]?r(e[kError]):t(createIterResult(void 0,!0))})});var r,n=this[kLastPromise];if(n)r=new Promise(wrapForNext(n,this));else{var i=this[kStream].read();if(null!==i)return Promise.resolve(createIterResult(i,!1));r=new Promise(this[kHandlePromise])}return this[kLastPromise]=r,r}},Symbol.asyncIterator,function(){return this}),_defineProperty$1(_Object$setPrototypeO,"return",function(){var e=this;return new Promise(function(t,r){e[kStream].destroy(null,function(e){e?r(e):t(createIterResult(void 0,!0))})})}),_Object$setPrototypeO),AsyncIteratorPrototype),createReadableStreamAsyncIterator=function(e){var t,r=Object.create(ReadableStreamAsyncIteratorPrototype,(_defineProperty$1(t={},kStream,{value:e,writable:!0}),_defineProperty$1(t,kLastResolve,{value:null,writable:!0}),_defineProperty$1(t,kLastReject,{value:null,writable:!0}),_defineProperty$1(t,kError,{value:null,writable:!0}),_defineProperty$1(t,kEnded,{value:e._readableState.endEmitted,writable:!0}),_defineProperty$1(t,kHandlePromise,{value:function(e,t){var n=r[kStream].read();n?(r[kLastPromise]=null,r[kLastResolve]=null,r[kLastReject]=null,e(createIterResult(n,!1))):(r[kLastResolve]=e,r[kLastReject]=t)},writable:!0}),t));return r[kLastPromise]=null,endOfStream(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[kLastReject];return null!==t&&(r[kLastPromise]=null,r[kLastResolve]=null,r[kLastReject]=null,t(e)),void(r[kError]=e)}var n=r[kLastResolve];null!==n&&(r[kLastPromise]=null,r[kLastResolve]=null,r[kLastReject]=null,n(createIterResult(void 0,!0))),r[kEnded]=!0}),e.on("readable",onReadable.bind(null,r)),r},async_iterator=createReadableStreamAsyncIterator,_stream_readable=Readable;Readable.ReadableState=ReadableState;var debug,EE$1=events$1.EventEmitter,EElistenerCount=function(e,t){return e.listeners(t).length},Buffer$r=buffer$1.Buffer,OurUint8Array$1=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer$1(e){return Buffer$r.from(e)}function _isUint8Array$1(e){return Buffer$r.isBuffer(e)||e instanceof OurUint8Array$1}debug=util$j&&util$j.debuglog?util$j.debuglog("stream"):function(){};var StringDecoder$1,createReadableStreamAsyncIterator$1,getHighWaterMark$2=state.getHighWaterMark,_require$codes$1=errors$2.codes,ERR_INVALID_ARG_TYPE$1=_require$codes$1.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes$1.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED$1=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes$1.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,emitExperimentalWarning$1=experimentalWarning.emitExperimentalWarning;inherits(Readable,stream);var kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState(e,t,r){Duplex$2=Duplex$2||_stream_duplex,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$2),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=getHighWaterMark$2(this,e,"readableHighWaterMark",r),this.buffer=new buffer_list,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder$1||(StringDecoder$1=string_decoder.StringDecoder),this.decoder=new StringDecoder$1(e.encoding),this.encoding=e.encoding)}function Readable(e){if(Duplex$2=Duplex$2||_stream_duplex,!(this instanceof Readable))return new Readable(e);var t=this instanceof Duplex$2;this._readableState=new ReadableState(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),stream.call(this)}function readableAddChunk(e,t,r,n,i){debug("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,onEofChunk(e,s);else if(i||(o=chunkInvalid(s,t)),o)e.emit("error",o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===Buffer$r.prototype||(t=_uint8ArrayToBuffer$1(t)),n)s.endEmitted?e.emit("error",new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(e,s,t,!0);else if(s.ended)e.emit("error",new ERR_STREAM_PUSH_AFTER_EOF);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?addChunk(e,s,t,!1):maybeReadMore(e,s)):addChunk(e,s,t,!1)}else n||(s.reading=!1,maybeReadMore(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function addChunk(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}function chunkInvalid(e,t){var r;return _isUint8Array$1(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new ERR_INVALID_ARG_TYPE$1("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=destroy_1.destroy,Readable.prototype._undestroy=destroy_1.undestroy,Readable.prototype._destroy=function(e,t){t(e)},Readable.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Buffer$r.from(e,t),t=""),r=!0),readableAddChunk(this,e,t,!1,r)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){return StringDecoder$1||(StringDecoder$1=string_decoder.StringDecoder),this._readableState.decoder=new StringDecoder$1(e),this._readableState.encoding=this._readableState.decoder.encoding,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?emitReadable(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,emitReadable_(e)))}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(emitReadable_,e))}function emitReadable_(e){var t=e._readableState;debug("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(debug("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount(e,"data")&&(t.flowing=!0,flow(e))}}function updateReadableListening(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(resume_,e,t))}function resume_(e,t){debug("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function endReadable(e){var t=e._readableState;debug("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){debug("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var n,i=t.needReadable;return debug("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&debug("length less than watermark",i=!0),t.ended||t.reading?debug("reading or ended",i=!1):i&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t))),null===(n=e>0?fromList(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==n&&this.emit("data",n),n},Readable.prototype._read=function(e){this.emit("error",new ERR_METHOD_NOT_IMPLEMENTED$1("_read()"))},Readable.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,debug("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?s:h;function o(t,i){debug("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,debug("cleanup"),e.removeListener("close",l),e.removeListener("finish",d),e.removeListener("drain",a),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",h),r.removeListener("data",u),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||a())}function s(){debug("onend"),e.end()}n.endEmitted?process.nextTick(i):r.once("end",i),e.on("unpipe",o);var a=pipeOnDrain(r);e.on("drain",a);var c=!1;function u(t){debug("ondata");var i=e.write(t);debug("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf(n.pipes,e))&&!c&&(debug("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(t){debug("onerror",t),h(),e.removeListener("error",f),0===EElistenerCount(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",d),h()}function d(){debug("onfinish"),e.removeListener("close",l),h()}function h(){debug("unpipe"),r.unpipe(e)}return r.on("data",u),prependListener(e,"error",f),e.once("close",l),e.once("finish",d),e.emit("pipe",r),n.flowing||(debug("pipe resume"),r.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=indexOf(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Readable.prototype.on=function(e,t){var r=stream.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,debug("on readable",n.length,n.reading),n.length?emitReadable(this):n.reading||process.nextTick(nReadingNextTick,this))),r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(e,t){var r=stream.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(updateReadableListening,this),r},Readable.prototype.removeAllListeners=function(e){var t=stream.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(updateReadableListening,this),t},Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!e.readableListening,resume(this,e)),e.paused=!1,this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(debug("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(debug("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<kProxyEvents.length;o++)e.on(kProxyEvents[o],this.emit.bind(this,kProxyEvents[o]));return this._read=function(t){debug("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return emitExperimentalWarning$1("Readable[Symbol.asyncIterator]"),void 0===createReadableStreamAsyncIterator$1&&(createReadableStreamAsyncIterator$1=async_iterator),createReadableStreamAsyncIterator$1(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});var _stream_transform=Transform$2,_require$codes$2=errors$2.codes,ERR_METHOD_NOT_IMPLEMENTED$2=_require$codes$2.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$1=_require$codes$2.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$2.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$2.ERR_TRANSFORM_WITH_LENGTH_0;function afterTransform(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new ERR_MULTIPLE_CALLBACK$1);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform$2(e){if(!(this instanceof Transform$2))return new Transform$2(e);_stream_duplex.call(this,e),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish$1)}function prefinish$1(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush(function(t,r){done(e,t,r)})}function done(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(e._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return e.push(null)}inherits(Transform$2,_stream_duplex),Transform$2.prototype.push=function(e,t){return this._transformState.needTransform=!1,_stream_duplex.prototype.push.call(this,e,t)},Transform$2.prototype._transform=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED$2("_transform()"))},Transform$2.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform$2.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},Transform$2.prototype._destroy=function(e,t){_stream_duplex.prototype._destroy.call(this,e,function(e){t(e)})};var eos$1,_stream_passthrough=PassThrough;function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);_stream_transform.call(this,e)}function once$3(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}inherits(PassThrough,_stream_transform),PassThrough.prototype._transform=function(e,t,r){r(null,e)};var _require$codes$3=errors$2.codes,ERR_MISSING_ARGS=_require$codes$3.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED$1=_require$codes$3.ERR_STREAM_DESTROYED;function noop$4(e){if(e)throw e}function isRequest$1(e){return e.setHeader&&"function"==typeof e.abort}function destroyer(e,t,r,n){n=once$3(n);var i=!1;e.on("close",function(){i=!0}),void 0===eos$1&&(eos$1=endOfStream),eos$1(e,{readable:t,writable:r},function(e){if(e)return n(e);i=!0,n()});var o=!1;return function(t){if(!i&&!o)return o=!0,isRequest$1(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new ERR_STREAM_DESTROYED$1("pipe"))}}function call(e){e()}function pipe$1(e,t){return e.pipe(t)}function popCallback(e){return e.length?"function"!=typeof e[e.length-1]?noop$4:e.pop():noop$4}function pipeline(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=popCallback(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new ERR_MISSING_ARGS("streams");var o=t.map(function(e,r){var s=r<t.length-1;return destroyer(e,s,r>0,function(e){n||(n=e),e&&o.forEach(call),s||(o.forEach(call),i(n))})});return t.reduce(pipe$1)}var pipeline_1=pipeline,readable=createCommonjsModule(function(e,t){"disable"===process.env.READABLE_STREAM&&Stream$1?(e.exports=Stream$1.Readable,Object.assign(e.exports,Stream$1),e.exports.Stream=Stream$1):((t=e.exports=_stream_readable).Stream=Stream$1||t,t.Readable=t,t.Writable=_stream_writable,t.Duplex=_stream_duplex,t.Transform=_stream_transform,t.PassThrough=_stream_passthrough,t.finished=endOfStream,t.pipeline=pipeline_1)}),readable_1=readable.Stream,readable_2=readable.Readable,readable_3=readable.Writable,readable_4=readable.Duplex,readable_5=readable.Transform,readable_6=readable.PassThrough,readable_7=readable.finished,readable_8=readable.pipeline,Readable$1=readable.Readable,levelIteratorStream=ReadStream;function ReadStream(e,t){if(!(this instanceof ReadStream))return new ReadStream(e,t);t=t||{},Readable$1.call(this,immutable(t,{objectMode:!0})),this._iterator=e,this._options=t,this.on("end",this.destroy.bind(this,null,null))}inherits(ReadStream,Readable$1),ReadStream.prototype._read=function(){var e=this,t=this._options;this.destroyed||this._iterator.next(function(r,n,i){if(!e.destroyed)return r?e.destroy(r):void(void 0===n&&void 0===i?e.push(null):!1!==t.keys&&!1===t.values?e.push(n):!1===t.keys&&!1!==t.values?e.push(i):e.push({key:n,value:i}))})},ReadStream.prototype._destroy=function(e,t){this._iterator.end(function(r){t(e||r)})};var prr=createCommonjsModule(function(e){var t,r;t=commonjsGlobal,r=function(){var e="function"==typeof Object.defineProperty?function(e,t,r){return Object.defineProperty(e,t,r),e}:function(e,t,r){return e[t]=r.value,e};return function(t,r,n,i){var o;if(i=function(e,t){var r="object"==typeof t,n=!r&&"string"==typeof t,i=function(e){return r?!!t[e]:!!n&&t.indexOf(e[0])>-1};return{enumerable:i("enumerable"),configurable:i("configurable"),writable:i("writable"),value:e}}(n,i),"object"==typeof r){for(o in r)Object.hasOwnProperty.call(r,o)&&(i.value=r[o],e(t,o,i));return t}return e(t,r,i)}},e.exports?e.exports=r():t.prr=r()});function init$2(e,t,r){t&&"string"!=typeof t&&(t=t.message||t.name),prr(this,{type:e,name:e,cause:"string"!=typeof t?t:r,message:t},"ewr")}function CustomError(e,t){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),init$2.call(this,"CustomError",e,t)}function createError$1(e,t,r){var n=function(r,i){init$2.call(this,t,r,i),"FilesystemError"==t&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,n)};return n.prototype=r?new r:new CustomError,n}CustomError.prototype=new Error;var custom$1=function(e){var t=function(t,r){return createError$1(e,t,r)};return{CustomError:CustomError,FilesystemError:t("FilesystemError"),createError:t}},errno=createCommonjsModule(function(e){var t=e.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];e.exports.errno={},e.exports.code={},t.forEach(function(t){e.exports.errno[t.errno]=t,e.exports.code[t.code]=t}),e.exports.custom=custom$1(e.exports),e.exports.create=e.exports.custom.createError}),errno_1=errno.all,errno_2=errno.errno,errno_3=errno.code,errno_4=errno.custom,errno_5=errno.create,createError$2=errno.create,LevelUPError=createError$2("LevelUPError"),NotFoundError=createError$2("NotFoundError",LevelUPError);NotFoundError.prototype.notFound=!0,NotFoundError.prototype.status=404;var errors$3={LevelUPError:LevelUPError,InitializationError:createError$2("InitializationError",LevelUPError),OpenError:createError$2("OpenError",LevelUPError),ReadError:createError$2("ReadError",LevelUPError),WriteError:createError$2("WriteError",LevelUPError),NotFoundError:NotFoundError,EncodingError:createError$2("EncodingError",LevelUPError)};function promisify(){var e,t=new Promise(function(t,r){e=function(e,n){e?r(e):t(n)}});return e.promise=t,e}var promisify_1=promisify,getCallback=function(e,t){return"function"==typeof e?e:t},getOptions=function(e){return"object"==typeof e&&null!==e?e:{}},common$7={getCallback:getCallback,getOptions:getOptions},WriteError=errors$3.WriteError,getCallback$1=common$7.getCallback,getOptions$1=common$7.getOptions;function Batch(e){this._levelup=e,this.batch=e.db.batch(),this.ops=[],this.length=0}Batch.prototype.put=function(e,t){try{this.batch.put(e,t)}catch(e){throw new WriteError(e)}return this.ops.push({type:"put",key:e,value:t}),this.length++,this},Batch.prototype.del=function(e){try{this.batch.del(e)}catch(e){throw new WriteError(e)}return this.ops.push({type:"del",key:e}),this.length++,this},Batch.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new WriteError(e)}return this.ops=[],this.length=0,this},Batch.prototype.write=function(e,t){var r,n=this._levelup,i=this.ops;(t=getCallback$1(e,t))||(r=(t=promisify_1()).promise),e=getOptions$1(e);try{this.batch.write(e,function(e){if(e)return t(new WriteError(e));n.emit("batch",i),t()})}catch(e){throw new WriteError(e)}return r};var batch=Batch,EventEmitter=events$1.EventEmitter,inherits$1=util$j.inherits,getCallback$2=common$7.getCallback,getOptions$2=common$7.getOptions,WriteError$1=errors$3.WriteError,ReadError=errors$3.ReadError,NotFoundError$1=errors$3.NotFoundError,OpenError=errors$3.OpenError,InitializationError=errors$3.InitializationError;function LevelUP(e,t,r){if(!(this instanceof LevelUP))return new LevelUP(e,t,r);var n;if(EventEmitter.call(this),this.setMaxListeners(1/0),"function"==typeof t&&(r=t,t={}),t=t||{},!e||"object"!=typeof e){if(n=new InitializationError("First argument must be an abstract-leveldown compliant store"),"function"==typeof r)return process.nextTick(r,n);throw n}assert$t.strictEqual(typeof e.status,"string",".status required, old abstract-leveldown"),this.options=getOptions$2(t),this._db=e,this.db=new deferredLeveldown(e),this.open(r)}function maybeError(e,t){if(!e._isOpening()&&!e.isOpen())return process.nextTick(t,new ReadError("Database is not open")),!0}LevelUP.prototype.emit=EventEmitter.prototype.emit,LevelUP.prototype.once=EventEmitter.prototype.once,inherits$1(LevelUP,EventEmitter),LevelUP.prototype.open=function(e){var t,r=this;return e||(t=(e=promisify_1()).promise),this.isOpen()?(process.nextTick(e,null,r),t):this._isOpening()?(this.once("open",function(){e(null,r)}),t):(this.emit("opening"),this.db.open(this.options,function(t){if(t)return e(new OpenError(t));r.db=r._db,e(null,r),r.emit("open"),r.emit("ready")}),t)},LevelUP.prototype.close=function(e){var t,r=this;return e||(t=(e=promisify_1()).promise),this.isOpen()?(this.db.close(function(){r.emit("closed"),e.apply(null,arguments)}),this.emit("closing"),this.db=new deferredLeveldown(this._db)):this.isClosed()?process.nextTick(e):"closing"===this.db.status?this.once("closed",e):this._isOpening()&&this.once("open",function(){r.close(e)}),t},LevelUP.prototype.isOpen=function(){return"open"===this.db.status},LevelUP.prototype._isOpening=function(){return"opening"===this.db.status},LevelUP.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},LevelUP.prototype.get=function(e,t,r){if(null==e)throw new ReadError("get() requires a key argument");var n;return(r=getCallback$2(t,r))||(n=(r=promisify_1()).promise),maybeError(this,r)?n:(t=getOptions$2(t),this.db.get(e,t,function(t,n){if(t)return t=/notfound/i.test(t)||t.notFound?new NotFoundError$1("Key not found in database ["+e+"]",t):new ReadError(t),r(t);r(null,n)}),n)},LevelUP.prototype.put=function(e,t,r,n){if(null==e)throw new WriteError$1("put() requires a key argument");var i,o=this;return(n=getCallback$2(r,n))||(i=(n=promisify_1()).promise),maybeError(this,n)?i:(r=getOptions$2(r),this.db.put(e,t,r,function(r){if(r)return n(new WriteError$1(r));o.emit("put",e,t),n()}),i)},LevelUP.prototype.del=function(e,t,r){if(null==e)throw new WriteError$1("del() requires a key argument");var n,i=this;return(r=getCallback$2(t,r))||(n=(r=promisify_1()).promise),maybeError(this,r)?n:(t=getOptions$2(t),this.db.del(e,t,function(t){if(t)return r(new WriteError$1(t));i.emit("del",e),r()}),n)},LevelUP.prototype.batch=function(e,t,r){if(!arguments.length)return new batch(this);if(!Array.isArray(e))throw new WriteError$1("batch() requires an array argument");var n,i=this;return(r=getCallback$2(t,r))||(n=(r=promisify_1()).promise),maybeError(this,r)?n:(t=getOptions$2(t),this.db.batch(e,t,function(t){if(t)return r(new WriteError$1(t));i.emit("batch",e),r()}),n)},LevelUP.prototype.iterator=function(e){return this.db.iterator(e)},LevelUP.prototype.readStream=LevelUP.prototype.createReadStream=function(e){return"number"!=typeof(e=immutable({keys:!0,values:!0},e)).limit&&(e.limit=-1),new levelIteratorStream(this.db.iterator(e),e)},LevelUP.prototype.keyStream=LevelUP.prototype.createKeyStream=function(e){return this.createReadStream(immutable(e,{keys:!0,values:!1}))},LevelUP.prototype.valueStream=LevelUP.prototype.createValueStream=function(e){return this.createReadStream(immutable(e,{keys:!1,values:!0}))},LevelUP.prototype.toString=function(){return"LevelUP"},LevelUP.errors=errors$3;var levelup=LevelUP.default=LevelUP,encodings$1=createCommonjsModule(function(e,t){t.utf8=t["utf-8"]={encode:function(e){return n(e)?e:String(e)},decode:r,buffer:!1,type:"utf8"},t.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},t.binary={encode:function(e){return n(e)?e:Buffer.from(e)},decode:r,buffer:!0,type:"binary"},t.none={encode:r,decode:r,buffer:!1,type:"id"},t.id=t.none;function r(e){return e}function n(e){return null==e||Buffer.isBuffer(e)}["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"].forEach(function(e){t[e]={encode:function(t){return n(t)?t:Buffer.from(t,e)},decode:function(t){return t.toString(e)},buffer:!0,type:e}})}),encodings_1$1=encodings$1.utf8,encodings_2$1=encodings$1.json,encodings_3$1=encodings$1.binary,encodings_4$1=encodings$1.none,encodings_5$1=encodings$1.id,levelCodec=Codec;function Codec(e){if(!(this instanceof Codec))return new Codec(e);this.opts=e||{},this.encodings=encodings$1}Codec.prototype._encoding=function(e){return"string"==typeof e&&(e=encodings$1[e]),e||(e=encodings$1.id),e},Codec.prototype._keyEncoding=function(e,t){return this._encoding(t&&t.keyEncoding||e&&e.keyEncoding||this.opts.keyEncoding)},Codec.prototype._valueEncoding=function(e,t){return this._encoding(t&&(t.valueEncoding||t.encoding)||e&&(e.valueEncoding||e.encoding)||this.opts.valueEncoding||this.opts.encoding)},Codec.prototype.encodeKey=function(e,t,r){return this._keyEncoding(t,r).encode(e)},Codec.prototype.encodeValue=function(e,t,r){return this._valueEncoding(t,r).encode(e)},Codec.prototype.decodeKey=function(e,t){return this._keyEncoding(t).decode(e)},Codec.prototype.decodeValue=function(e,t){return this._valueEncoding(t).decode(e)},Codec.prototype.encodeBatch=function(e,t){var r=this;return e.map(function(e){var n={type:e.type,key:r.encodeKey(e.key,t,e)};return r.keyAsBuffer(t,e)&&(n.keyEncoding="binary"),e.prefix&&(n.prefix=e.prefix),"value"in e&&(n.value=r.encodeValue(e.value,t,e),r.valueAsBuffer(t,e)&&(n.valueEncoding="binary")),n})};var ltgtKeys=["lt","gt","lte","gte","start","end"];Codec.prototype.encodeLtgt=function(e){var t=this,r={};return Object.keys(e).forEach(function(n){r[n]=ltgtKeys.indexOf(n)>-1?t.encodeKey(e[n],e):e[n]}),r},Codec.prototype.createStreamDecoder=function(e){var t=this;return e.keys&&e.values?function(r,n){return{key:t.decodeKey(r,e),value:t.decodeValue(n,e)}}:e.keys?function(r){return t.decodeKey(r,e)}:e.values?function(r,n){return t.decodeValue(n,e)}:function(){}},Codec.prototype.keyAsBuffer=function(e){return this._keyEncoding(e).buffer},Codec.prototype.valueAsBuffer=function(e){return this._valueEncoding(e).buffer};var AbstractLevelDOWN$3=abstractLeveldown$1.AbstractLevelDOWN,AbstractChainedBatch$2=abstractLeveldown$1.AbstractChainedBatch,AbstractIterator$3=abstractLeveldown$1.AbstractIterator,EncodingError=errors$3.EncodingError,encodingDown=DB.default=DB;function DB(e,t){if(!(this instanceof DB))return new DB(e,t);AbstractLevelDOWN$3.call(this,""),void 0===(t=t||{}).keyEncoding&&(t.keyEncoding="utf8"),void 0===t.valueEncoding&&(t.valueEncoding="utf8"),this.db=e,this.codec=new levelCodec(t)}function Iterator(e,t){AbstractIterator$3.call(this,e),this.codec=e.codec,this.keys=t.keys,this.values=t.values,this.opts=this.codec.encodeLtgt(t),this.it=e.db.iterator(this.opts)}function Batch$1(e,t){AbstractChainedBatch$2.call(this,e),this.codec=e.codec,this.batch=e.db.batch()}inherits(DB,AbstractLevelDOWN$3),DB.prototype._serializeKey=DB.prototype._serializeValue=function(e){return e},DB.prototype._open=function(e,t){this.db.open(e,t)},DB.prototype._close=function(e){this.db.close(e)},DB.prototype._put=function(e,t,r,n){e=this.codec.encodeKey(e,r),t=this.codec.encodeValue(t,r),this.db.put(e,t,r,n)},DB.prototype._get=function(e,t,r){var n=this;e=this.codec.encodeKey(e,t),t.asBuffer=this.codec.valueAsBuffer(t),this.db.get(e,t,function(e,i){if(e)return r(e);try{i=n.codec.decodeValue(i,t)}catch(e){return r(new EncodingError(e))}r(null,i)})},DB.prototype._del=function(e,t,r){e=this.codec.encodeKey(e,t),this.db.del(e,t,r)},DB.prototype._chainedBatch=function(){return new Batch$1(this)},DB.prototype._batch=function(e,t,r){e=this.codec.encodeBatch(e,t),this.db.batch(e,t,r)},DB.prototype._iterator=function(e){return e.keyAsBuffer=this.codec.keyAsBuffer(e),e.valueAsBuffer=this.codec.valueAsBuffer(e),new Iterator(this,e)},DB.prototype.approximateSize=function(e,t,r,n){return e=this.codec.encodeKey(e,r),t=this.codec.encodeKey(t,r),this.db.approximateSize(e,t,r,n)},inherits(Iterator,AbstractIterator$3),Iterator.prototype._next=function(e){var t=this;this.it.next(function(r,n,i){if(r)return e(r);try{n=t.keys&&void 0!==n?t.codec.decodeKey(n,t.opts):void 0,i=t.values&&void 0!==i?t.codec.decodeValue(i,t.opts):void 0}catch(r){return e(new EncodingError(r))}e(null,n,i)})},Iterator.prototype._end=function(e){this.it.end(e)},inherits(Batch$1,AbstractChainedBatch$2),Batch$1.prototype._put=function(e,t){e=this.codec.encodeKey(e),t=this.codec.encodeValue(t),this.batch.put(e,t)},Batch$1.prototype._del=function(e){e=this.codec.encodeKey(e),this.batch.del(e)},Batch$1.prototype._clear=function(){this.batch.clear()},Batch$1.prototype._write=function(e,t){this.batch.write(e,t)};var runtimeRequire="function"==typeof __webpack_require__?__non_webpack_require__:commonjsRequire,prebuildsOnly=!!process.env.PREBUILDS_ONLY,abi=process.versions.modules,runtime$1=isElectron()?"electron":"node",arch=os.arch(),platform$1=os.platform(),libc=process.env.LIBC||(isAlpine(platform$1)?"musl":"glibc"),armv=process.env.ARM_VERSION||("arm64"===arch?"8":process.config.variables.arm_version)||"",uv=(process.versions.uv||"").split(".")[0],nodeGypBuild=load;function load(e){return runtimeRequire(load.path(e))}function readdirSync(e){try{return fs.readdirSync(e)}catch(e){return[]}}function getFirst(e,t){var r=readdirSync(e).filter(t);return r[0]&&path$4.join(e,r[0])}function matchBuild(e){return/\.node$/.test(e)}function parseTags(e){var t=e.split("."),r={file:e,specificity:0};if("node"===t.pop()){for(var n=0;n<t.length;n++){var i=t[n];if("node"===i||"electron"===i||"node-webkit"===i)r.runtime=i;else if("napi"===i)r.napi=!0;else if("abi"===i.slice(0,3))r.abi=i.slice(3);else if("uv"===i.slice(0,2))r.uv=i.slice(2);else if("armv"===i.slice(0,4))r.armv=i.slice(4);else{if("glibc"!==i&&"musl"!==i)continue;r.libc=i}r.specificity++}return r}}function matchTags(e,t){return function(r){return null!=r&&(!(r.runtime!==e&&!runtimeAgnostic(r))&&(!(r.abi!==t&&!r.napi)&&((!r.uv||r.uv===uv)&&((!r.armv||r.armv===armv)&&(!r.libc||r.libc===libc)))))}}function runtimeAgnostic(e){return"node"===e.runtime&&e.napi}function compareTags(e){return function(t,r){return t.runtime!==r.runtime?t.runtime===e?-1:1:t.abi!==r.abi?t.abi?-1:1:t.specificity!==r.specificity?t.specificity>r.specificity?-1:1:0}}function isElectron(){return!(!process.versions||!process.versions.electron)||(!!process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type)}function isAlpine(e){return"linux"===e&&fs.existsSync("/etc/alpine-release")}load.path=function(e){e=path$4.resolve(e||".");try{var t=runtimeRequire(path$4.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!prebuildsOnly){var r=getFirst(path$4.join(e,"build/Release"),matchBuild);if(r)return r;var n=getFirst(path$4.join(e,"build/Debug"),matchBuild);if(n)return n}var i=path$4.join(e,"prebuilds",platform$1+"-"+arch),o=readdirSync(i).map(parseTags).filter(matchTags(runtime$1,abi)).sort(compareTags(runtime$1))[0];if(o)return path$4.join(i,o.file);var s=["platform="+platform$1,"arch="+arch,"runtime="+runtime$1,"abi="+abi,"uv="+uv,armv?"armv="+armv:"","libc="+libc].filter(Boolean).join(" ");throw new Error("No native build was found for "+s)},load.parseTags=parseTags,load.matchTags=matchTags,load.compareTags=compareTags;var binding=nodeGypBuild(__dirname);const AbstractChainedBatch$3=abstractLeveldown$1.AbstractChainedBatch;function ChainedBatch(e){AbstractChainedBatch$3.call(this,e),this.context=binding.batch_init(e.context)}ChainedBatch.prototype._put=function(e,t){binding.batch_put(this.context,e,t)},ChainedBatch.prototype._del=function(e){binding.batch_del(this.context,e)},ChainedBatch.prototype._clear=function(){binding.batch_clear(this.context)},ChainedBatch.prototype._write=function(e,t){binding.batch_write(this.context,e,t)},util$j.inherits(ChainedBatch,AbstractChainedBatch$3);var chainedBatch=ChainedBatch,LIMIT=process.maxTickDepth/2||1e3,factory=function(){var e=0;return function(t){e>=LIMIT?(commonjsGlobal.setImmediate(t),e=0):process.nextTick(t),e++}},fastFuture=commonjsGlobal.setImmediate?factory:function(){return process.nextTick};const AbstractIterator$4=abstractLeveldown$1.AbstractIterator;function Iterator$1(e,t){AbstractIterator$4.call(this,e),this.context=binding.iterator_init(e.context,t),this.cache=null,this.finished=!1,this.fastFuture=fastFuture()}util$j.inherits(Iterator$1,AbstractIterator$4),Iterator$1.prototype._seek=function(e){if(0===e.length)throw new Error("cannot seek() to an empty target");this.cache=null,binding.iterator_seek(this.context,e),this.finished=!1},Iterator$1.prototype._next=function(e){var t,r,n=this;return this.cache&&this.cache.length?(t=this.cache.pop(),r=this.cache.pop(),this.fastFuture(function(){e(null,t,r)})):this.finished?this.fastFuture(function(){e()}):binding.iterator_next(this.context,function(t,r,i){if(t)return e(t);n.cache=r,n.finished=i,n._next(e)}),this},Iterator$1.prototype._end=function(e){delete this.cache,binding.iterator_end(this.context,e)};var iterator$2=Iterator$1;const AbstractLevelDOWN$4=abstractLeveldown$1.AbstractLevelDOWN;function LevelDOWN(e){if(!(this instanceof LevelDOWN))return new LevelDOWN(e);if("string"!=typeof e)throw new Error("constructor requires a location string argument");AbstractLevelDOWN$4.call(this),this.location=e,this.context=binding.db_init()}util$j.inherits(LevelDOWN,AbstractLevelDOWN$4),LevelDOWN.prototype._open=function(e,t){binding.db_open(this.context,this.location,e,t)},LevelDOWN.prototype._close=function(e){binding.db_close(this.context,e)},LevelDOWN.prototype._serializeKey=function(e){return Buffer.isBuffer(e)?e:String(e)},LevelDOWN.prototype._serializeValue=function(e){return Buffer.isBuffer(e)?e:String(e)},LevelDOWN.prototype._put=function(e,t,r,n){binding.db_put(this.context,e,t,r,n)},LevelDOWN.prototype._get=function(e,t,r){binding.db_get(this.context,e,t,r)},LevelDOWN.prototype._del=function(e,t,r){binding.db_del(this.context,e,t,r)},LevelDOWN.prototype._chainedBatch=function(){return new chainedBatch(this)},LevelDOWN.prototype._batch=function(e,t,r){binding.batch_do(this.context,e,t,r)},LevelDOWN.prototype.approximateSize=function(e,t,r){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start` and `end` arguments");if("function"!=typeof r)throw new Error("approximateSize() requires a callback argument");e=this._serializeKey(e),t=this._serializeKey(t),binding.db_approximate_size(this.context,e,t,r)},LevelDOWN.prototype.compactRange=function(e,t,r){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("compactRange() requires valid `start` and `end` arguments");if("function"!=typeof r)throw new Error("compactRange() requires a callback argument");e=this._serializeKey(e),t=this._serializeKey(t),binding.db_compact_range(this.context,e,t,r)},LevelDOWN.prototype.getProperty=function(e){if("string"!=typeof e)throw new Error("getProperty() requires a valid `property` argument");return binding.db_get_property(this.context,e)},LevelDOWN.prototype._iterator=function(e){if("open"!==this.status)throw new Error("cannot call iterator() before open()");return new iterator$2(this,e)},LevelDOWN.destroy=function(e,t){if(arguments.length<2)throw new Error("destroy() requires `location` and `callback` arguments");if("string"!=typeof e)throw new Error("destroy() requires a location string argument");if("function"!=typeof t)throw new Error("destroy() requires a callback function argument");binding.destroy_db(e,t)},LevelDOWN.repair=function(e,t){if(arguments.length<2)throw new Error("repair() requires `location` and `callback` arguments");if("string"!=typeof e)throw new Error("repair() requires a location string argument");if("function"!=typeof t)throw new Error("repair() requires a callback function argument");binding.repair_db(e,t)};var leveldown=LevelDOWN.default=LevelDOWN;const asyncFilter$4=src$B.utils.asyncFilter,asyncSort$4=src$B.utils.asyncSort,Key$a=src$B.Key,Errors$3=src$B.Errors;class LevelDatastore{constructor(e,t){let r;t&&t.db?(r=t.db,delete t.db):r=leveldown,this.db=levelup(encodingDown(r(e),{valueEncoding:"binary"}),Object.assign({},t,{compression:!1}),e=>{if(e)throw e})}open(e){this.db.open(t=>{if(t)return e(Errors$3.dbOpenFailedError(t));e()})}put(e,t,r){this.db.put(e.toString(),t,e=>{if(e)return r(Errors$3.dbWriteFailedError(e));r()})}get(e,t){this.db.get(e.toString(),(e,r)=>{if(e)return t(Errors$3.notFoundError(e));t(null,r)})}has(e,t){this.db.get(e.toString(),(e,r)=>{if(e)return e.notFound?void t(null,!1):void t(e);t(null,!0)})}delete(e,t){this.db.del(e.toString(),e=>{if(e)return t(Errors$3.dbDeleteFailedError(e));t()})}close(e){this.db.close(e)}batch(){const e=[];return{put:(t,r)=>{e.push({type:"put",key:t.toString(),value:r})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:t=>{this.db.batch(e,t)}}}query(e){let t=!0;null!=e.keysOnly&&(t=!e.keysOnly);const r=this.db.db.iterator({keys:!0,values:t,keyAsBuffer:!0});let n=[(e,n)=>{if(e)return r.end(t=>{n(t||e)});r.next((e,i,o)=>{if(e)return n(e);if(null==e&&null==i&&null==o)return r.end(e=>{n(e||!0)});const s={key:new Key$a(i,!1)};t&&(s.value=Buffer.from(o)),n(null,s)})}],i=[];if(null!=e.prefix){const t=e.prefix;i.push((e,r)=>r(null,e.key.toString().startsWith(t)))}if(null!=e.filters&&(i=i.concat(e.filters)),n=n.concat(i.map(e=>asyncFilter$4(e))),null!=e.orders&&(n=n.concat(e.orders.map(e=>asyncSort$4(e)))),null!=e.offset){let t=0;n.push(pullStream.filter(()=>t++>=e.offset))}return null!=e.limit&&n.push(pullStream.take(e.limit)),pullStream.apply(null,n)}}var src$F=LevelDatastore,defaultOptions={lock:"fs",storageBackends:{root:src$E,blocks:src$E,keys:src$E,datastore:src$F},storageBackendOptions:{root:{extension:""},blocks:{sharding:!0,extension:".data"},keys:{}}},defaultDatastore={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}},ERR_REPO_NOT_INITIALIZED="ERR_REPO_NOT_INITIALIZED",errors$4={ERR_REPO_NOT_INITIALIZED:ERR_REPO_NOT_INITIALIZED};const log$2=src$A("repo:lock"),lockFile="repo.lock",LOCKS={};var lock=(e,t)=>{const r=e+"/"+lockFile;log$2("locking %s",r),LOCKS[r]=!0;const n={close(e){LOCKS[r]&&delete LOCKS[r],setImmediate$1(e)}};setImmediate$1(()=>{t(null,n)})},locked=(e,t)=>{const r=e+"/"+lockFile;log$2("checking lock: %s");const n=LOCKS[r];setImmediate$1(()=>{t(null,n)})},lockMemory={lock:lock,locked:locked};function RetryOperation(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var retry_operation=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},RetryOperation.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},RetryOperation.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift()}var n=this,i=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r);return this._options.unref&&i.unref(),!0},RetryOperation.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},RetryOperation.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},RetryOperation.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},RetryOperation.prototype.start=RetryOperation.prototype.try,RetryOperation.prototype.errors=function(){return this._errors},RetryOperation.prototype.attempts=function(){return this._attempts},RetryOperation.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,s=(e[o]||0)+1;e[o]=s,s>=r&&(t=i,r=s)}return t};var emitter,retry=createCommonjsModule(function(e,t){t.operation=function(e){var r=t.timeouts(e);return new retry_operation(r,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort(function(e,t){return e-t}),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],e)"function"==typeof e[i]&&n.push(i);for(var o=0;o<n.length;o++){var s=n[o],a=e[s];e[s]=function(n){var i=t.operation(r),o=Array.prototype.slice.call(arguments,1),s=o.pop();o.push(function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),s.apply(this,arguments))}),i.attempt(function(){n.apply(e,o)})}.bind(e,a),e[s].options=r}}}),retry_1=retry.operation,retry_2=retry.timeouts,retry_3=retry.createTimeout,retry_4=retry.wrap,retry$1=retry,signals=createCommonjsModule(function(e){e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")}),signals$1=signals,EE$2=events$1;"function"!=typeof EE$2&&(EE$2=EE$2.EventEmitter),process.__signal_exit_emitter__?emitter=process.__signal_exit_emitter__:((emitter=process.__signal_exit_emitter__=new EE$2).count=0,emitter.emitted={}),emitter.infinite||(emitter.setMaxListeners(1/0),emitter.infinite=!0);var signalExit=function(e,t){assert$t.equal(typeof e,"function","a callback must be provided for exit handler"),!1===loaded&&load$1();var r="exit";t&&t.alwaysLast&&(r="afterexit");return emitter.on(r,e),function(){emitter.removeListener(r,e),0===emitter.listeners("exit").length&&0===emitter.listeners("afterexit").length&&unload()}},unload_1=unload;function unload(){loaded&&(loaded=!1,signals$1.forEach(function(e){try{process.removeListener(e,sigListeners[e])}catch(e){}}),process.emit=originalProcessEmit,process.reallyExit=originalProcessReallyExit,emitter.count-=1)}function emit(e,t,r){emitter.emitted[e]||(emitter.emitted[e]=!0,emitter.emit(e,t,r))}var sigListeners={};signals$1.forEach(function(e){sigListeners[e]=function(){process.listeners(e).length===emitter.count&&(unload(),emit("exit",null,e),emit("afterexit",null,e),process.kill(process.pid,e))}});var signals_1=function(){return signals$1},load_1=load$1,loaded=!1;function load$1(){loaded||(loaded=!0,emitter.count+=1,signals$1=signals$1.filter(function(e){try{return process.on(e,sigListeners[e]),!0}catch(e){return!1}}),process.emit=processEmit,process.reallyExit=processReallyExit)}var originalProcessReallyExit=process.reallyExit;function processReallyExit(e){process.exitCode=e||0,emit("exit",process.exitCode,null),emit("afterexit",process.exitCode,null),originalProcessReallyExit.call(process,process.exitCode)}var originalProcessEmit=process.emit;function processEmit(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var r=originalProcessEmit.apply(this,arguments);return emit("exit",process.exitCode,null),emit("afterexit",process.exitCode,null),r}return originalProcessEmit.apply(this,arguments)}signalExit.unload=unload_1,signalExit.signals=signals_1,signalExit.load=load_1;const cacheSymbol=Symbol();function probe(e,t,r){const n=t[cacheSymbol];if(n)return t.stat(e,(e,t)=>{if(e)return r(e);r(null,t.mtime,n)});const i=new Date(1e3*Math.ceil(Date.now()/1e3)+5);t.utimes(e,i,i,n=>{if(n)return r(n);t.stat(e,(e,n)=>{if(e)return r(e);const i=n.mtime.getTime()%1e3==0?"s":"ms";Object.defineProperty(t,cacheSymbol,{value:i}),r(null,n.mtime,i)})})}function getMtime(e){let t=Date.now();return"s"===e&&(t=1e3*Math.ceil(t/1e3)),new Date(t)}var probe_1=probe,getMtime_1=getMtime,mtimePrecision={probe:probe_1,getMtime:getMtime_1};const locks={};function getLockFile(e,t){return t.lockfilePath||`${e}.lock`}function resolveCanonicalPath(e,t,r){if(!t.realpath)return r(null,path$4.resolve(e));t.fs.realpath(e,r)}function acquireLock(e,t,r){const n=getLockFile(e,t);t.fs.mkdir(n,i=>i?"EEXIST"!==i.code?r(i):t.stale<=0?r(Object.assign(new Error("Lock file is already being held"),{code:"ELOCKED",file:e})):void t.fs.stat(n,(n,i)=>n?"ENOENT"===n.code?acquireLock(e,{...t,stale:0},r):r(n):isLockStale(i,t)?void removeLock(e,t,n=>{if(n)return r(n);acquireLock(e,{...t,stale:0},r)}):r(Object.assign(new Error("Lock file is already being held"),{code:"ELOCKED",file:e}))):mtimePrecision.probe(n,t.fs,(e,i,o)=>{if(e)return t.fs.rmdir(n,()=>{}),r(e);r(null,i,o)}))}function isLockStale(e,t){return e.mtime.getTime()<Date.now()-t.stale}function removeLock(e,t,r){t.fs.rmdir(getLockFile(e,t),e=>{if(e&&"ENOENT"!==e.code)return r(e);r()})}function updateLock(e,t){const r=locks[e];r.updateTimeout||(r.updateDelay=r.updateDelay||t.update,r.updateTimeout=setTimeout(()=>{r.updateTimeout=null,t.fs.stat(r.lockfilePath,(n,i)=>{const o=r.lastUpdate+t.stale<Date.now();if(n)return"ENOENT"===n.code||o?setLockAsCompromised(e,r,Object.assign(n,{code:"ECOMPROMISED"})):(r.updateDelay=1e3,updateLock(e,t));if(!(r.mtime.getTime()===i.mtime.getTime()))return setLockAsCompromised(e,r,Object.assign(new Error("Unable to update lock within the stale threshold"),{code:"ECOMPROMISED"}));const s=mtimePrecision.getMtime(r.mtimePrecision);t.fs.utimes(r.lockfilePath,s,s,n=>{const i=r.lastUpdate+t.stale<Date.now();if(!r.released){if(n)return"ENOENT"===n.code||i?setLockAsCompromised(e,r,Object.assign(n,{code:"ECOMPROMISED"})):(r.updateDelay=1e3,updateLock(e,t));r.mtime=s,r.lastUpdate=Date.now(),r.updateDelay=null,updateLock(e,t)}})})},r.updateDelay),r.updateTimeout.unref&&r.updateTimeout.unref())}function setLockAsCompromised(e,t,r){t.released=!0,t.updateTimeout&&clearTimeout(t.updateTimeout),locks[e]===t&&delete locks[e],t.options.onCompromised(r)}function lock$1(e,t,r){(t={stale:1e4,update:null,realpath:!0,retries:0,fs:gracefulFs,onCompromised:e=>{throw e},...t}).retries=t.retries||0,t.retries="number"==typeof t.retries?{retries:t.retries}:t.retries,t.stale=Math.max(t.stale||0,2e3),t.update=null==t.update?t.stale/2:t.update||0,t.update=Math.max(Math.min(t.update,t.stale/2),1e3),resolveCanonicalPath(e,t,(e,n)=>{if(e)return r(e);const i=retry$1.operation(t.retries);i.attempt(()=>{acquireLock(n,t,(e,o,s)=>{if(i.retry(e))return;if(e)return r(i.mainError());const a=locks[n]={lockfilePath:getLockFile(n,t),mtime:o,mtimePrecision:s,options:t,lastUpdate:Date.now()};updateLock(n,t),r(null,e=>{if(a.released)return e&&e(Object.assign(new Error("Lock is already released"),{code:"ERELEASED"}));unlock(n,{...t,realpath:!1},e)})})})})}function unlock(e,t,r){resolveCanonicalPath(e,t={fs:gracefulFs,realpath:!0,...t},(e,n)=>{if(e)return r(e);const i=locks[n];if(!i)return r(Object.assign(new Error("Lock is not acquired/owned by you"),{code:"ENOTACQUIRED"}));i.updateTimeout&&clearTimeout(i.updateTimeout),i.released=!0,delete locks[n],removeLock(n,t,r)})}function check$1(e,t,r){(t={stale:1e4,realpath:!0,fs:gracefulFs,...t}).stale=Math.max(t.stale||0,2e3),resolveCanonicalPath(e,t,(e,n)=>{if(e)return r(e);t.fs.stat(getLockFile(n,t),(e,n)=>e?"ENOENT"===e.code?r(null,!1):r(e):r(null,!isLockStale(n,t)))})}function getLocks(){return locks}signalExit(()=>{for(const e in locks){const t=locks[e].options;try{t.fs.rmdirSync(getLockFile(e,t))}catch(e){}}});var lock_1=lock$1,unlock_1=unlock,check_1=check$1,getLocks_1=getLocks,lockfile={lock:lock_1,unlock:unlock_1,check:check_1,getLocks:getLocks_1};function createSyncFs(e){const t={...e};return["mkdir","realpath","stat","rmdir","utimes"].forEach(r=>{t[r]=(...t)=>{const n=t.pop();let i;try{i=e[`${r}Sync`](...t)}catch(e){return n(e)}n(null,i)}}),t}function toPromise(e){return(...t)=>new Promise((r,n)=>{t.push((e,t)=>{e?n(e):r(t)}),e(...t)})}function toSync(e){return(...t)=>{let r,n;if(t.push((e,t)=>{r=e,n=t}),e(...t),r)throw r;return n}}function toSyncOptions(e){if((e={...e}).fs=createSyncFs(e.fs||gracefulFs),"number"==typeof e.retries&&e.retries>0||e.retries&&"number"==typeof e.retries.retries&&e.retries.retries>0)throw Object.assign(new Error("Cannot use retries with the sync api"),{code:"ESYNC"});return e}var adapter={toPromise:toPromise,toSync:toSync,toSyncOptions:toSyncOptions};const{toPromise:toPromise$1,toSync:toSync$1,toSyncOptions:toSyncOptions$1}=adapter;async function lock$2(e,t){const r=await toPromise$1(lockfile.lock)(e,t);return toPromise$1(r)}function lockSync(e,t){const r=toSync$1(lockfile.lock)(e,toSyncOptions$1(t));return toSync$1(r)}function unlock$1(e,t){return toPromise$1(lockfile.unlock)(e,t)}function unlockSync(e,t){return toSync$1(lockfile.unlock)(e,toSyncOptions$1(t))}function check$2(e,t){return toPromise$1(lockfile.check)(e,t)}function checkSync(e,t){return toSync$1(lockfile.check)(e,toSyncOptions$1(t))}var properLockfile=lock$2,lock_1$1=lock$2,unlock_1$1=unlock$1,lockSync_1=lockSync,unlockSync_1=unlockSync,check_1$1=check$2,checkSync_1=checkSync;properLockfile.lock=lock_1$1,properLockfile.unlock=unlock_1$1,properLockfile.lockSync=lockSync_1,properLockfile.unlockSync=unlockSync_1,properLockfile.check=check_1$1,properLockfile.checkSync=checkSync_1;const{lock:lock$3}=properLockfile,log$3=src$A("repo:lock"),lockFile$1="repo.lock",STALE_TIME=2e4;var lock_2=(e,t)=>{const r=path$4.join(e,lockFile$1);log$3("locking %s",r),lock$3(e,{lockfilePath:r,stale:2e4}).then(e=>{t(null,{close:t=>{e().then(()=>t()).catch(e=>t(e))}})},t).catch(e=>{log$3(e)})},lock_1$2={lock:lock_2},constants$7={repoVersion:7},Big=getCjsExportFromNamespace(bignumber$2);const log$4=src$A("repo"),noLimit=Number.MAX_SAFE_INTEGER,lockers={memory:lockMemory,fs:lock_1$2},repoVersion=constants$7.repoVersion;class IpfsRepo{constructor(e,t){assert$t.strictEqual(typeof e,"string","missing repoPath"),this.options=buildOptions(t),this.closed=!0,this.path=e,this._locker=this._getLocker(),this.root=backends.create("root",this.path,this.options),this.version=version$2(this.root),this.config=config$2(this.root),this.spec=spec(this.root),this.apiAddr=apiAddr(this.root)}init(e,t){log$4("initializing at: %s",this.path),series_1([e=>this.root.open(ignoringAlreadyOpened(e)),t=>this.config.set(buildConfig(e),t),t=>this.spec.set(buildDatastoreSpec(e),t),e=>this.version.set(repoVersion,e)],t)}open(e){this.closed?(log$4("opening at: %s",this.path),waterfall([e=>this.root.open(ignoringAlreadyOpened(e)),e=>this._isInitialized(e),e=>this._openLock(this.path,e),(e,t)=>{log$4("aquired repo.lock"),this.lockfile=e,t()},e=>{log$4("creating datastore"),this.datastore=backends.create("datastore",path$4.join(this.path,"datastore"),this.options),log$4("creating blocks");const t=backends.create("blocks",path$4.join(this.path,"blocks"),this.options);blockstore(t,this.options.storageBackendOptions.blocks,e)},(e,t)=>{this.blocks=e,t()},e=>{log$4("creating keystore"),this.keys=backends.create("keys",path$4.join(this.path,"keys"),this.options),e()},e=>{this.closed=!1,log$4("all opened"),e()}],t=>{t&&this.lockfile?this._closeLock(r=>{r?log$4("error removing lock",r):this.lockfile=null,e(t)}):e(t)})):setImmediate(()=>e(new Error("repo is already open")))}_getLocker(){return"string"==typeof this.options.lock?(assert$t(lockers[this.options.lock],"Unknown lock type: "+this.options.lock),lockers[this.options.lock]):(assert$t(this.options.lock,"No lock provided"),this.options.lock)}_openLock(e,t){this._locker.lock(e,(e,r)=>{if(e)return t(e,null);assert$t.strictEqual(typeof r.close,"function","Locks must have a close method"),t(null,r)})}_closeLock(e){if(this.lockfile)return this.lockfile.close(e);e()}_isInitialized(e){log$4("init check"),parallel$1({config:e=>this.config.exists(e),spec:e=>this.spec.exists(e),version:e=>this.version.check(repoVersion,e)},(t,r)=>{if(log$4("init",t,r),t&&!r.config)return e(Object.assign(new Error("repo is not initialized yet"),{code:errors$4.ERR_REPO_NOT_INITIALIZED,path:this.path}));e(t)})}close(e){if(this.closed)return e(new Error("repo is already closed"));log$4("closing at: %s",this.path),series_1([e=>this.apiAddr.delete(ignoringNotFound(e)),e=>{each([this.blocks,this.keys,this.datastore],(e,t)=>e.close(t),e)},e=>{log$4("unlocking"),this.closed=!0,this._closeLock(e)},e=>{this.lockfile=null,e()}],t=>e(t))}exists(e){this.version.exists(e)}stat(e,t){"function"==typeof e&&(t=e,e={}),e=Object.assign({},{human:!1},e),parallel$1({storageMax:e=>this.config.get("Datastore.StorageMax",(t,r)=>{e(null,new Big(t?noLimit:r))}),version:e=>this.version.get(e),blocks:e=>this.blocks.query({},(t,r)=>{const n=new Big((r=r||[]).length);let i=new Big(0);r.forEach(e=>{i=i.plus(e.value.byteLength).plus(e.key._buf.byteLength)}),e(t,{count:n,size:i})}),datastore:e=>getSize(this.datastore,e),keys:e=>getSize(this.keys,e)},(r,n)=>{if(r)return t(r);let i=n.blocks.size.plus(n.datastore).plus(n.keys);e.human&&(i=i.div(1048576)),t(null,{repoPath:this.path,storageMax:n.storageMax,version:n.version,numObjects:n.blocks.count,repoSize:i})})}}function getSize(e,t){pull(e.query({}),reduce((e,t)=>e.plus(t.value.byteLength).plus(t.key._buf.byteLength),new Big(0),t))}var src$G=IpfsRepo,repoVersion_1=repoVersion,errors$5=errors$4;function ignoringIf(e,t){return r=>{t(r&&!e(r)?r:null)}}function ignoringAlreadyOpened(e){return ignoringIf(e=>"Already open"===e.message,e)}function ignoringNotFound(e){return ignoringIf(e=>e&&(e.code===errors$4.ERR_REPO_NOT_INITIALIZED||e.message.startsWith("ENOENT")),e)}function buildOptions(e){const t=Object.assign({},defaultOptions,e);return t.storageBackends=Object.assign({},defaultOptions.storageBackends,t.storageBackends),t.storageBackendOptions=Object.assign({},defaultOptions.storageBackendOptions,t.storageBackendOptions),t}function buildConfig(e){return e.datastore=Object.assign({},defaultDatastore,get$1(e,"datastore",{})),e}function buildDatastoreSpec(e){const t=Object.assign({},defaultDatastore.Spec,get$1(e,"datastore.Spec",{}));return{type:t.type,mounts:t.mounts.map(e=>({mountpoint:e.mountpoint,type:e.child.type,path:e.child.path,shardFunc:e.child.shardFunc}))}}src$G.repoVersion=repoVersion_1,src$G.errors=errors$5;const RepoErrors=src$G.errors;var boot=e=>{e.log("booting");const t=e._options,r=t.init,n=t.start;waterfall([t=>{if(!e._repo.closed)return t(null,!0);e._repo.open((e,r)=>isRepoUninitializedError(e)?t(null,!1):e?t(e):void t(null,!0))},(n,i)=>{if(n)return e.init({repo:e._repo},e=>{if(e)return i(Object.assign(e,{emitted:!0}));i()});if(r){const r=Object.assign({bits:2048,pass:e._options.pass},"object"==typeof t.init?t.init:{});return e.init(r,e=>{if(e)return i(Object.assign(e,{emitted:!0}));i()})}i()},t=>{if(!n)return t();e.start(e=>{if(e)return t(Object.assign(e,{emitted:!0}));t()})}],t=>{t?t.emitted||e.emit("error",t):(e.log("booted"),e.emit("ready"))})};function isRepoUninitializedError(e){return!!e&&(e.code===RepoErrors.ERR_REPO_NOT_INITIALIZED||!!(e.message.match(/not found/)||e.message.match(/ENOENT/)||e.message.match(/No value/)))}function isHighSurrogate(e){return e>=55296&&e<=56319}function isLowSurrogate(e){return e>=56320&&e<=57343}var truncate=function(e,t,r){if("string"!=typeof t)throw new Error("Input must be string");for(var n,i,o=t.length,s=0,a=0;a<o;a+=1){if(n=t.charCodeAt(a),i=t[a],isHighSurrogate(n)&&isLowSurrogate(t.charCodeAt(a+1))&&(i+=t[a+=1]),(s+=e(i))===r)return t.slice(0,a+1);if(s>r)return t.slice(0,a-i.length+1)}return t},getLength$2=Buffer.byteLength.bind(Buffer),truncateUtf8Bytes=truncate.bind(null,getLength$2),illegalRe=/[\/\?<>\\:\*\|":]/g,controlRe=/[\x00-\x1f\x80-\x9f]/g,reservedRe=/^\.+$/,windowsReservedRe=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,windowsTrailingRe=/[\. ]+$/;function sanitize(e,t){var r=e.replace(illegalRe,t).replace(controlRe,t).replace(reservedRe,t).replace(windowsReservedRe,t).replace(windowsTrailingRe,t);return truncateUtf8Bytes(r,255)}var sanitizeFilename=function(e,t){var r=t&&t.replacement||"",n=sanitize(e,r);return""===r?n:sanitize(n,"")};function identity$1(e){return e}var identity_1=identity$1,createTester=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(i,o,s,a){a=a||r.default;var c,u=!1;i(o,function(r,i,o){s(r,function(i,s){i?o(i):e(s)&&!c?(u=!0,c=t(!0,r),o(null,n.default)):o()})},function(e){e?a(e):a(null,u?c:t(!1))})}};var r=i(noop_1),n=i(breakLoop);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(createTester);var findGetResult=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t},e.exports=t.default});unwrapExports(findGetResult);var detect=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(identity_1),n=s(createTester),i=s(doParallel_1),o=s(findGetResult);function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)((0,n.default)(r.default,o.default)),e.exports=t.default});unwrapExports(detect);var pkcs7asn1=createCommonjsModule(function(e){var t=forge.asn1,r=e.exports=forge.pkcs7asn1=forge.pkcs7asn1||{};forge.pkcs7=forge.pkcs7||{},forge.pkcs7.asn1=r;var n={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};r.contentInfoValidator=n;var i={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};r.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(i)},r.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(i)};var o={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};r.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},n,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[o]}]},r.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}),mgf1_1=createCommonjsModule(function(e){forge.mgf=forge.mgf||{},(e.exports=forge.mgf.mgf1=forge.mgf1=forge.mgf1||{}).create=function(e){return{generate:function(t,r){for(var n=new forge.util.ByteBuffer,i=Math.ceil(r/e.digestLength),o=0;o<i;o++){var s=new forge.util.ByteBuffer;s.putInt32(o),e.start(),e.update(t+s.getBytes()),n.putBuffer(e.digest())}return n.truncate(n.length()-r),n.getBytes()}}}}),mgf=forge.mgf=forge.mgf||{};forge.mgf.mgf1=forge.mgf1;var pss_1=createCommonjsModule(function(e){(e.exports=forge.pss=forge.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,n=e.mgf,i=r.digestLength,o=e.salt||null;if("string"==typeof o&&(o=forge.util.createBuffer(o)),"saltLength"in e)t=e.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");t=o.length()}if(null!==o&&o.length()!==t)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||forge.random,a={encode:function(e,a){var c,u,f=a-1,l=Math.ceil(f/8),d=e.digest().getBytes();if(l<i+t+2)throw new Error("Message is too long to encrypt.");u=null===o?s.getBytesSync(t):o.bytes();var h=new forge.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(d),h.putBytes(u),r.start(),r.update(h.getBytes());var p=r.digest().getBytes(),b=new forge.util.ByteBuffer;b.fillWithByte(0,l-t-i-2),b.putByte(1),b.putBytes(u);var m=b.getBytes(),g=l-i-1,y=n.generate(p,g),v="";for(c=0;c<g;c++)v+=String.fromCharCode(m.charCodeAt(c)^y.charCodeAt(c));var _=65280>>8*l-f&255;return(v=String.fromCharCode(v.charCodeAt(0)&~_)+v.substr(1))+p+String.fromCharCode(188)},verify:function(e,o,s){var a,c=s-1,u=Math.ceil(c/8);if(o=o.substr(-u),u<i+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(u-1))throw new Error("Encoded message does not end in 0xBC.");var f=u-i-1,l=o.substr(0,f),d=o.substr(f,i),h=65280>>8*u-c&255;if(0!=(l.charCodeAt(0)&h))throw new Error("Bits beyond keysize not zero as expected.");var p=n.generate(d,f),b="";for(a=0;a<f;a++)b+=String.fromCharCode(l.charCodeAt(a)^p.charCodeAt(a));b=String.fromCharCode(b.charCodeAt(0)&~h)+b.substr(1);var m=u-i-t-2;for(a=0;a<m;a++)if(0!==b.charCodeAt(a))throw new Error("Leftmost octets not zero as expected");if(1!==b.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var g=b.substr(-t),y=new forge.util.ByteBuffer;return y.fillWithByte(0,8),y.putBytes(e),y.putBytes(g),r.start(),r.update(y.getBytes()),d===r.digest().getBytes()}};return a}}),x509=createCommonjsModule(function(e){var t=forge.asn1,r=e.exports=forge.pki=forge.pki||{},n=r.oids,i={};i.CN=n.commonName,i.commonName="CN",i.C=n.countryName,i.countryName="C",i.L=n.localityName,i.localityName="L",i.ST=n.stateOrProvinceName,i.stateOrProvinceName="ST",i.O=n.organizationName,i.organizationName="O",i.OU=n.organizationalUnitName,i.organizationalUnitName="OU",i.E=n.emailAddress,i.emailAddress="E";var o=forge.pki.rsa.publicKeyValidator,s={name:"Certificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},o,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},a={name:"rsapss",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},c={name:"CertificationRequestInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},o,{name:"CertificationRequestInfo.attributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},u={name:"CertificationRequest",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[c,{name:"CertificationRequest.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function f(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],t.type&&t.type===r.type?n=r:t.name&&t.name===r.name?n=r:t.shortName&&t.shortName===r.shortName&&(n=r);return n}r.RDNAttributesAsArray=function(e,r){for(var o,s,a,c=[],u=0;u<e.value.length;++u){o=e.value[u];for(var f=0;f<o.value.length;++f)a={},s=o.value[f],a.type=t.derToOid(s.value[0].value),a.value=s.value[1].value,a.valueTagClass=s.value[1].type,a.type in n&&(a.name=n[a.type],a.name in i&&(a.shortName=i[a.name])),r&&(r.update(a.type),r.update(a.value)),c.push(a)}return c},r.CRIAttributesAsArray=function(e){for(var o=[],s=0;s<e.length;++s)for(var a=e[s],c=t.derToOid(a.value[0].value),u=a.value[1].value,f=0;f<u.length;++f){var l={};if(l.type=c,l.value=u[f].value,l.valueTagClass=u[f].type,l.type in n&&(l.name=n[l.type],l.name in i&&(l.shortName=i[l.name])),l.type===n.extensionRequest){l.extensions=[];for(var d=0;d<l.value.length;++d)l.extensions.push(r.certificateExtensionFromAsn1(l.value[d]))}o.push(l)}return o};var l=function(e,r,i){var o={};if(e!==n["RSASSA-PSS"])return o;i&&(o={hash:{algorithmOid:n.sha1},mgf:{algorithmOid:n.mgf1,hash:{algorithmOid:n.sha1}},saltLength:20});var s={},c=[];if(!t.validate(r,a,s,c)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=c,u}return void 0!==s.hashOid&&(o.hash=o.hash||{},o.hash.algorithmOid=t.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(o.mgf=o.mgf||{},o.mgf.algorithmOid=t.derToOid(s.maskGenOid),o.mgf.hash=o.mgf.hash||{},o.mgf.hash.algorithmOid=t.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(o.saltLength=s.saltLength.charCodeAt(0)),o};function d(e){for(var r,n,i=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),o=e.attributes,s=0;s<o.length;++s){var a=(r=o[s]).value,c=t.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass)===t.Type.UTF8&&(a=forge.util.encodeUtf8(a)),n=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.type).getBytes()),t.create(t.Class.UNIVERSAL,c,!1,a)])]),i.value.push(n)}return i}function h(e){for(var o,s=0;s<e.length;++s){if(void 0===(o=e[s]).name&&(o.type&&o.type in r.oids?o.name=r.oids[o.type]:o.shortName&&o.shortName in i&&(o.name=r.oids[i[o.shortName]])),void 0===o.type){if(!(o.name&&o.name in r.oids))throw(c=new Error("Attribute type not specified.")).attribute=o,c;o.type=r.oids[o.name]}if(void 0===o.shortName&&o.name&&o.name in i&&(o.shortName=i[o.name]),o.type===n.extensionRequest&&(o.valueConstructed=!0,o.valueTagClass=t.Type.SEQUENCE,!o.value&&o.extensions)){o.value=[];for(var a=0;a<o.extensions.length;++a)o.value.push(r.certificateExtensionToAsn1(p(o.extensions[a])))}var c;if(void 0===o.value)throw(c=new Error("Attribute value not specified.")).attribute=o,c}}function p(e,i){if(i=i||{},void 0===e.name&&e.id&&e.id in r.oids&&(e.name=r.oids[e.id]),void 0===e.id){if(!(e.name&&e.name in r.oids))throw(_=new Error("Extension ID not specified.")).extension=e,_;e.id=r.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var o=0,s=0,a=0;e.digitalSignature&&(s|=128,o=7),e.nonRepudiation&&(s|=64,o=6),e.keyEncipherment&&(s|=32,o=5),e.dataEncipherment&&(s|=16,o=4),e.keyAgreement&&(s|=8,o=3),e.keyCertSign&&(s|=4,o=2),e.cRLSign&&(s|=2,o=1),e.encipherOnly&&(s|=1,o=0),e.decipherOnly&&(a|=128,o=7);var c=String.fromCharCode(o);0!==a?c+=String.fromCharCode(s)+String.fromCharCode(a):0!==s&&(c+=String.fromCharCode(s)),e.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,c)}else if("basicConstraints"===e.name)e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var u=e.value.value;for(var f in e)!0===e[f]&&(f in n?u.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n[f]).getBytes())):-1!==f.indexOf(".")&&u.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(f).getBytes())))}else if("nsCertType"===e.name){o=0,s=0;e.client&&(s|=128,o=7),e.server&&(s|=64,o=6),e.email&&(s|=32,o=5),e.objsign&&(s|=16,o=4),e.reserved&&(s|=8,o=3),e.sslCA&&(s|=4,o=2),e.emailCA&&(s|=2,o=1),e.objCA&&(s|=1,o=0);c=String.fromCharCode(o);0!==s&&(c+=String.fromCharCode(s)),e.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,c)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var l=0;l<e.altNames.length;++l){c=(g=e.altNames[l]).value;if(7===g.type&&g.ip){if(null===(c=forge.util.bytesFromIP(g.ip)))throw(_=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,_}else 8===g.type&&(c=g.oid?t.oidToDer(t.oidToDer(g.oid)):t.oidToDer(c));e.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,g.type,!1,c))}}else if("subjectKeyIdentifier"===e.name&&i.cert){var h=i.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=h.toHex(),e.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,h.getBytes())}else if("authorityKeyIdentifier"===e.name&&i.cert){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);u=e.value.value;if(e.keyIdentifier){var p=!0===e.keyIdentifier?i.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;u.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,p))}if(e.authorityCertIssuer){var b=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[d(!0===e.authorityCertIssuer?i.cert.issuer:e.authorityCertIssuer)])];u.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,b))}if(e.serialNumber){var m=forge.util.hexToBytes(!0===e.serialNumber?i.cert.serialNumber:e.serialNumber);u.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if("cRLDistributionPoints"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);u=e.value.value;var g,y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),v=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(l=0;l<e.altNames.length;++l){c=(g=e.altNames[l]).value;if(7===g.type&&g.ip){if(null===(c=forge.util.bytesFromIP(g.ip)))throw(_=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,_}else 8===g.type&&(c=g.oid?t.oidToDer(t.oidToDer(g.oid)):t.oidToDer(c));v.value.push(t.create(t.Class.CONTEXT_SPECIFIC,g.type,!1,c))}y.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[v])),u.push(y)}var _;if(void 0===e.value)throw(_=new Error("Extension value not specified.")).extension=e,_;return e}function b(e,r){switch(e){case n["RSASSA-PSS"]:var i=[];return void 0!==r.hash.algorithmOid&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])),void 0!==r.mgf.algorithmOid&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])])),void 0!==r.saltLength&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,i);default:return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")}}function m(e){var r=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return r;for(var n=e.attributes,i=0;i<n.length;++i){var o=n[i],s=o.value,a=t.Type.UTF8;"valueTagClass"in o&&(a=o.valueTagClass),a===t.Type.UTF8&&(s=forge.util.encodeUtf8(s));var c=!1;"valueConstructed"in o&&(c=o.valueConstructed);var u=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,a,c,s)])]);r.value.push(u)}return r}r.certificateFromPem=function(e,n,i){var o=forge.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=o.type,s}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=t.fromDer(o.body,i);return r.certificateFromAsn1(a,n)},r.certificateToPem=function(e,n){var i={type:"CERTIFICATE",body:t.toDer(r.certificateToAsn1(e)).getBytes()};return forge.pem.encode(i,{maxline:n})},r.publicKeyFromPem=function(e){var n=forge.pem.decode(e)[0];if("PUBLIC KEY"!==n.type&&"RSA PUBLIC KEY"!==n.type){var i=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=t.fromDer(n.body);return r.publicKeyFromAsn1(o)},r.publicKeyToPem=function(e,n){var i={type:"PUBLIC KEY",body:t.toDer(r.publicKeyToAsn1(e)).getBytes()};return forge.pem.encode(i,{maxline:n})},r.publicKeyToRSAPublicKeyPem=function(e,n){var i={type:"RSA PUBLIC KEY",body:t.toDer(r.publicKeyToRSAPublicKey(e)).getBytes()};return forge.pem.encode(i,{maxline:n})},r.getPublicKeyFingerprint=function(e,n){var i,o=(n=n||{}).md||forge.md.sha1.create();switch(n.type||"RSAPublicKey"){case"RSAPublicKey":i=t.toDer(r.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=t.toDer(r.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+n.type+'".')}o.start(),o.update(i);var s=o.digest();if("hex"===n.encoding){var a=s.toHex();return n.delimiter?a.match(/.{2}/g).join(n.delimiter):a}if("binary"===n.encoding)return s.getBytes();if(n.encoding)throw new Error('Unknown encoding "'+n.encoding+'".');return s},r.certificationRequestFromPem=function(e,n,i){var o=forge.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=o.type,s}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=t.fromDer(o.body,i);return r.certificationRequestFromAsn1(a,n)},r.certificationRequestToPem=function(e,n){var i={type:"CERTIFICATE REQUEST",body:t.toDer(r.certificationRequestToAsn1(e)).getBytes()};return forge.pem.encode(i,{maxline:n})},r.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return f(e.issuer,t)},e.issuer.addField=function(t){h([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return f(e.subject,t)},e.subject.addField=function(t){h([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){h(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){h(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)p(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var r,n=null,i=0;null===n&&i<e.extensions.length;++i)r=e.extensions[i],t.id&&r.id===t.id?n=r:t.name&&r.name===t.name&&(n=r);return n},e.sign=function(i,o){e.md=o||forge.md.sha1.create();var s=n[e.md.algorithm+"WithRSAEncryption"];if(!s){var a=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw a.algorithm=e.md.algorithm,a}e.signatureOid=e.siginfo.algorithmOid=s,e.tbsCertificate=r.getTBSCertificate(e);var c=t.toDer(e.tbsCertificate);e.md.update(c.getBytes()),e.signature=i.sign(e.md)},e.verify=function(i){var o=!1;if(!e.issued(i)){var s=i.issuer,a=e.subject;throw(p=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=s.attributes,p.actualIssuer=a.attributes,p}var c=i.md;if(null===c){if(i.signatureOid in n)switch(n[i.signatureOid]){case"sha1WithRSAEncryption":c=forge.md.sha1.create();break;case"md5WithRSAEncryption":c=forge.md.md5.create();break;case"sha256WithRSAEncryption":c=forge.md.sha256.create();break;case"sha384WithRSAEncryption":c=forge.md.sha384.create();break;case"sha512WithRSAEncryption":c=forge.md.sha512.create();break;case"RSASSA-PSS":c=forge.md.sha256.create()}if(null===c)throw(p=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=i.signatureOid,p;var u=i.tbsCertificate||r.getTBSCertificate(i),f=t.toDer(u);c.update(f.getBytes())}if(null!==c){var l;switch(i.signatureOid){case n.sha1WithRSAEncryption:l=void 0;break;case n["RSASSA-PSS"]:var d,h,p;if(void 0===(d=n[i.signatureParameters.mgf.hash.algorithmOid])||void 0===forge.md[d])throw(p=new Error("Unsupported MGF hash function.")).oid=i.signatureParameters.mgf.hash.algorithmOid,p.name=d,p;if(void 0===(h=n[i.signatureParameters.mgf.algorithmOid])||void 0===forge.mgf[h])throw(p=new Error("Unsupported MGF function.")).oid=i.signatureParameters.mgf.algorithmOid,p.name=h,p;if(h=forge.mgf[h].create(forge.md[d].create()),void 0===(d=n[i.signatureParameters.hash.algorithmOid])||void 0===forge.md[d])throw{message:"Unsupported RSASSA-PSS hash function.",oid:i.signatureParameters.hash.algorithmOid,name:d};l=forge.pss.create(forge.md[d].create(),h,i.signatureParameters.saltLength)}o=e.publicKey.verify(c.digest().getBytes(),i.signature,l)}return o},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var o,s;r=!0;for(var a=0;r&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],o.type===s.type&&o.value===s.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return r.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=n.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var i=e.extensions[r];if(i.id===t){var o=e.generateSubjectKeyIdentifier().getBytes();return forge.util.hexToBytes(i.subjectKeyIdentifier)===o}}return!1},e},r.certificateFromAsn1=function(e,i){var o={},a=[];if(!t.validate(e,s,o,a))throw(p=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=a,p;if(t.derToOid(o.publicKeyOid)!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=r.createCertificate();c.version=o.certVersion?o.certVersion.charCodeAt(0):0;var u=forge.util.createBuffer(o.certSerialNumber);c.serialNumber=u.toHex(),c.signatureOid=forge.asn1.derToOid(o.certSignatureOid),c.signatureParameters=l(c.signatureOid,o.certSignatureParams,!0),c.siginfo.algorithmOid=forge.asn1.derToOid(o.certinfoSignatureOid),c.siginfo.parameters=l(c.siginfo.algorithmOid,o.certinfoSignatureParams,!1),c.signature=o.certSignature;var d=[];if(void 0!==o.certValidity1UTCTime&&d.push(t.utcTimeToDate(o.certValidity1UTCTime)),void 0!==o.certValidity2GeneralizedTime&&d.push(t.generalizedTimeToDate(o.certValidity2GeneralizedTime)),void 0!==o.certValidity3UTCTime&&d.push(t.utcTimeToDate(o.certValidity3UTCTime)),void 0!==o.certValidity4GeneralizedTime&&d.push(t.generalizedTimeToDate(o.certValidity4GeneralizedTime)),d.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(d.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=d[0],c.validity.notAfter=d[1],c.tbsCertificate=o.tbsCertificate,i){var p;if(c.md=null,c.signatureOid in n)switch(n[c.signatureOid]){case"sha1WithRSAEncryption":c.md=forge.md.sha1.create();break;case"md5WithRSAEncryption":c.md=forge.md.md5.create();break;case"sha256WithRSAEncryption":c.md=forge.md.sha256.create();break;case"sha384WithRSAEncryption":c.md=forge.md.sha384.create();break;case"sha512WithRSAEncryption":c.md=forge.md.sha512.create();break;case"RSASSA-PSS":c.md=forge.md.sha256.create()}if(null===c.md)throw(p=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=c.signatureOid,p;var b=t.toDer(c.tbsCertificate);c.md.update(b.getBytes())}var m=forge.md.sha1.create();c.issuer.getField=function(e){return f(c.issuer,e)},c.issuer.addField=function(e){h([e]),c.issuer.attributes.push(e)},c.issuer.attributes=r.RDNAttributesAsArray(o.certIssuer,m),o.certIssuerUniqueId&&(c.issuer.uniqueId=o.certIssuerUniqueId),c.issuer.hash=m.digest().toHex();var g=forge.md.sha1.create();return c.subject.getField=function(e){return f(c.subject,e)},c.subject.addField=function(e){h([e]),c.subject.attributes.push(e)},c.subject.attributes=r.RDNAttributesAsArray(o.certSubject,g),o.certSubjectUniqueId&&(c.subject.uniqueId=o.certSubjectUniqueId),c.subject.hash=g.digest().toHex(),o.certExtensions?c.extensions=r.certificateExtensionsFromAsn1(o.certExtensions):c.extensions=[],c.publicKey=r.publicKeyFromAsn1(o.subjectPublicKeyInfo),c},r.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var i=e.value[n],o=0;o<i.value.length;++o)t.push(r.certificateExtensionFromAsn1(i.value[o]));return t},r.certificateExtensionFromAsn1=function(e){var r={};if(r.id=t.derToOid(e.value[0].value),r.critical=!1,e.value[1].type===t.Type.BOOLEAN?(r.critical=0!==e.value[1].value.charCodeAt(0),r.value=e.value[2].value):r.value=e.value[1].value,r.id in n)if(r.name=n[r.id],"keyUsage"===r.name){var i=0,o=0;(a=t.fromDer(r.value)).value.length>1&&(i=a.value.charCodeAt(1),o=a.value.length>2?a.value.charCodeAt(2):0),r.digitalSignature=128==(128&i),r.nonRepudiation=64==(64&i),r.keyEncipherment=32==(32&i),r.dataEncipherment=16==(16&i),r.keyAgreement=8==(8&i),r.keyCertSign=4==(4&i),r.cRLSign=2==(2&i),r.encipherOnly=1==(1&i),r.decipherOnly=128==(128&o)}else if("basicConstraints"===r.name){(a=t.fromDer(r.value)).value.length>0&&a.value[0].type===t.Type.BOOLEAN?r.cA=0!==a.value[0].value.charCodeAt(0):r.cA=!1;var s=null;a.value.length>0&&a.value[0].type===t.Type.INTEGER?s=a.value[0].value:a.value.length>1&&(s=a.value[1].value),null!==s&&(r.pathLenConstraint=t.derToInteger(s))}else if("extKeyUsage"===r.name)for(var a=t.fromDer(r.value),c=0;c<a.value.length;++c){var u=t.derToOid(a.value[c].value);u in n?r[n[u]]=!0:r[u]=!0}else if("nsCertType"===r.name){i=0;(a=t.fromDer(r.value)).value.length>1&&(i=a.value.charCodeAt(1)),r.client=128==(128&i),r.server=64==(64&i),r.email=32==(32&i),r.objsign=16==(16&i),r.reserved=8==(8&i),r.sslCA=4==(4&i),r.emailCA=2==(2&i),r.objCA=1==(1&i)}else if("subjectAltName"===r.name||"issuerAltName"===r.name){var f;r.altNames=[];a=t.fromDer(r.value);for(var l=0;l<a.value.length;++l){var d={type:(f=a.value[l]).type,value:f.value};switch(r.altNames.push(d),f.type){case 1:case 2:case 6:break;case 7:d.ip=forge.util.bytesToIP(f.value);break;case 8:d.oid=t.derToOid(f.value)}}}else if("subjectKeyIdentifier"===r.name){a=t.fromDer(r.value);r.subjectKeyIdentifier=forge.util.bytesToHex(a.value)}return r},r.certificationRequestFromAsn1=function(e,i){var o={},s=[];if(!t.validate(e,u,o,s))throw(c=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=s,c;if(t.derToOid(o.publicKeyOid)!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=r.createCertificationRequest();if(a.version=o.csrVersion?o.csrVersion.charCodeAt(0):0,a.signatureOid=forge.asn1.derToOid(o.csrSignatureOid),a.signatureParameters=l(a.signatureOid,o.csrSignatureParams,!0),a.siginfo.algorithmOid=forge.asn1.derToOid(o.csrSignatureOid),a.siginfo.parameters=l(a.siginfo.algorithmOid,o.csrSignatureParams,!1),a.signature=o.csrSignature,a.certificationRequestInfo=o.certificationRequestInfo,i){var c;if(a.md=null,a.signatureOid in n)switch(n[a.signatureOid]){case"sha1WithRSAEncryption":a.md=forge.md.sha1.create();break;case"md5WithRSAEncryption":a.md=forge.md.md5.create();break;case"sha256WithRSAEncryption":a.md=forge.md.sha256.create();break;case"sha384WithRSAEncryption":a.md=forge.md.sha384.create();break;case"sha512WithRSAEncryption":a.md=forge.md.sha512.create();break;case"RSASSA-PSS":a.md=forge.md.sha256.create()}if(null===a.md)throw(c=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=a.signatureOid,c;var d=t.toDer(a.certificationRequestInfo);a.md.update(d.getBytes())}var p=forge.md.sha1.create();return a.subject.getField=function(e){return f(a.subject,e)},a.subject.addField=function(e){h([e]),a.subject.attributes.push(e)},a.subject.attributes=r.RDNAttributesAsArray(o.certificationRequestInfoSubject,p),a.subject.hash=p.digest().toHex(),a.publicKey=r.publicKeyFromAsn1(o.subjectPublicKeyInfo),a.getAttribute=function(e){return f(a,e)},a.addAttribute=function(e){h([e]),a.attributes.push(e)},a.attributes=r.CRIAttributesAsArray(o.certificationRequestInfoAttributes||[]),a},r.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return f(e.subject,t)},e.subject.addField=function(t){h([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return f(e,t)},e.addAttribute=function(t){h([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){h(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){h(t),e.attributes=t},e.sign=function(i,o){e.md=o||forge.md.sha1.create();var s=n[e.md.algorithm+"WithRSAEncryption"];if(!s){var a=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw a.algorithm=e.md.algorithm,a}e.signatureOid=e.siginfo.algorithmOid=s,e.certificationRequestInfo=r.getCertificationRequestInfo(e);var c=t.toDer(e.certificationRequestInfo);e.md.update(c.getBytes()),e.signature=i.sign(e.md)},e.verify=function(){var i=!1,o=e.md;if(null===o){if(e.signatureOid in n)switch(n[e.signatureOid]){case"sha1WithRSAEncryption":o=forge.md.sha1.create();break;case"md5WithRSAEncryption":o=forge.md.md5.create();break;case"sha256WithRSAEncryption":o=forge.md.sha256.create();break;case"sha384WithRSAEncryption":o=forge.md.sha384.create();break;case"sha512WithRSAEncryption":o=forge.md.sha512.create();break;case"RSASSA-PSS":o=forge.md.sha256.create()}if(null===o)throw(l=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=e.signatureOid,l;var s=e.certificationRequestInfo||r.getCertificationRequestInfo(e),a=t.toDer(s);o.update(a.getBytes())}if(null!==o){var c;switch(e.signatureOid){case n.sha1WithRSAEncryption:break;case n["RSASSA-PSS"]:var u,f,l;if(void 0===(u=n[e.signatureParameters.mgf.hash.algorithmOid])||void 0===forge.md[u])throw(l=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,l.name=u,l;if(void 0===(f=n[e.signatureParameters.mgf.algorithmOid])||void 0===forge.mgf[f])throw(l=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,l.name=f,l;if(f=forge.mgf[f].create(forge.md[u].create()),void 0===(u=n[e.signatureParameters.hash.algorithmOid])||void 0===forge.md[u])throw(l=new Error("Unsupported RSASSA-PSS hash function.")).oid=e.signatureParameters.hash.algorithmOid,l.name=u,l;c=forge.pss.create(forge.md[u].create(),f,e.signatureParameters.saltLength)}i=e.publicKey.verify(o.digest().getBytes(),e.signature,c)}return i},e},r.getTBSCertificate=function(e){var n=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,forge.util.hexToBytes(e.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.siginfo.algorithmOid).getBytes()),b(e.siginfo.algorithmOid,e.siginfo.parameters)]),d(e.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(e.validity.notBefore)),t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(e.validity.notAfter))]),d(e.subject),r.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(r.certificateExtensionsToAsn1(e.extensions)),n},r.getCertificationRequestInfo=function(e){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),d(e.subject),r.publicKeyToAsn1(e.publicKey),m(e)])},r.distinguishedNameToAsn1=function(e){return d(e)},r.certificateToAsn1=function(e){var n=e.tbsCertificate||r.getTBSCertificate(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[n,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),b(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},r.certificateExtensionsToAsn1=function(e){var n=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),i=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);n.value.push(i);for(var o=0;o<e.length;++o)i.value.push(r.certificateExtensionToAsn1(e[o]));return n},r.certificateExtensionToAsn1=function(e){var r=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);r.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.id).getBytes())),e.critical&&r.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return"string"!=typeof e.value&&(n=t.toDer(n).getBytes()),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n)),r},r.certificationRequestToAsn1=function(e){var n=e.certificationRequestInfo||r.getCertificationRequestInfo(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[n,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),b(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},r.createCaStore=function(e){var n={certs:{}};function i(e){return o(e),n.certs[e.hash]||null}function o(e){if(!e.hash){var t=forge.md.sha1.create();e.attributes=r.RDNAttributesAsArray(d(e),t),e.hash=t.digest().toHex()}}if(n.getIssuer=function(e){return i(e.issuer)},n.addCertificate=function(e){if("string"==typeof e&&(e=forge.pki.certificateFromPem(e)),o(e.subject),!n.hasCertificate(e))if(e.subject.hash in n.certs){var t=n.certs[e.subject.hash];forge.util.isArray(t)||(t=[t]),t.push(e),n.certs[e.subject.hash]=t}else n.certs[e.subject.hash]=e},n.hasCertificate=function(e){"string"==typeof e&&(e=forge.pki.certificateFromPem(e));var n=i(e.subject);if(!n)return!1;forge.util.isArray(n)||(n=[n]);for(var o=t.toDer(r.certificateToAsn1(e)).getBytes(),s=0;s<n.length;++s){if(o===t.toDer(r.certificateToAsn1(n[s])).getBytes())return!0}return!1},n.listAllCertificates=function(){var e=[];for(var t in n.certs)if(n.certs.hasOwnProperty(t)){var r=n.certs[t];if(forge.util.isArray(r))for(var i=0;i<r.length;++i)e.push(r[i]);else e.push(r)}return e},n.removeCertificate=function(e){var s;if("string"==typeof e&&(e=forge.pki.certificateFromPem(e)),o(e.subject),!n.hasCertificate(e))return null;var a=i(e.subject);if(!forge.util.isArray(a))return s=n.certs[e.subject.hash],delete n.certs[e.subject.hash],s;for(var c=t.toDer(r.certificateToAsn1(e)).getBytes(),u=0;u<a.length;++u){c===t.toDer(r.certificateToAsn1(a[u])).getBytes()&&(s=a[u],a.splice(u,1))}return 0===a.length&&delete n.certs[e.subject.hash],s},e)for(var s=0;s<e.length;++s){var a=e[s];n.addCertificate(a)}return n},r.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},r.verifyCertificateChain=function(e,t,n){var i=(t=t.slice(0)).slice(0),o=new Date,s=!0,a=null,c=0;do{var u=t.shift(),f=null,l=!1;if((o<u.validity.notBefore||o>u.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:r.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:o}),null===a){if(null===(f=t[0]||e.getIssuer(u))&&u.isIssuer(u)&&(l=!0,f=u),f){var d=f;forge.util.isArray(d)||(d=[d]);for(var h=!1;!h&&d.length>0;){f=d.shift();try{h=f.verify(u)}catch(e){}}h||(a={message:"Certificate signature is invalid.",error:r.certificateError.bad_certificate})}null!==a||f&&!l||e.hasCertificate(u)||(a={message:"Certificate is not trusted.",error:r.certificateError.unknown_ca})}if(null===a&&f&&!u.isIssuer(f)&&(a={message:"Certificate issuer is invalid.",error:r.certificateError.bad_certificate}),null===a)for(var p={keyUsage:!0,basicConstraints:!0},b=0;null===a&&b<u.extensions.length;++b){var m=u.extensions[b];!m.critical||m.name in p||(a={message:"Certificate has an unsupported critical extension.",error:r.certificateError.unsupported_certificate})}if(null===a&&(!s||0===t.length&&(!f||l))){var g=u.getExtension("basicConstraints"),y=u.getExtension("keyUsage");if(null!==y&&(y.keyCertSign&&null!==g||(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:r.certificateError.bad_certificate})),null!==a||null===g||g.cA||(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:r.certificateError.bad_certificate}),null===a&&null!==y&&"pathLenConstraint"in g)c-1>g.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:r.certificateError.bad_certificate})}var v=null===a||a.error,_=n?n(v,c,i):v;if(!0!==_)throw!0===v&&(a={message:"The application rejected the certificate.",error:r.certificateError.bad_certificate}),(_||0===_)&&("object"!=typeof _||forge.util.isArray(_)?"string"==typeof _&&(a.error=_):(_.message&&(a.message=_.message),_.error&&(a.error=_.error))),a;a=null,s=!1,++c}while(t.length>0);return!0}}),pkcs7=createCommonjsModule(function(e){var t=forge.asn1,r=e.exports=forge.pkcs7=forge.pkcs7||{};function n(e){var n={},i=[];if(!t.validate(e,r.asn1.recipientInfoValidator,n,i)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=i,o}return{version:n.version.charCodeAt(0),issuer:forge.pki.RDNAttributesAsArray(n.issuer),serialNumber:forge.util.createBuffer(n.serial).toHex(),encryptedContent:{algorithm:t.derToOid(n.encAlgorithm),parameter:n.encParameter.value,content:n.encKey}}}function i(e){for(var r,n=[],i=0;i<e.length;++i)n.push((r=e[i],t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[forge.pki.distinguishedNameToAsn1({attributes:r.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,forge.util.hexToBytes(r.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r.encryptedContent.content)])));return n}function o(e){var r=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[forge.pki.distinguishedNameToAsn1({attributes:e.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,forge.util.hexToBytes(e.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&r.value.push(e.authenticatedAttributesAsn1),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var n=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<e.unauthenticatedAttributes.length;++i){var o=e.unauthenticatedAttributes[i];n.values.push(s(o))}r.value.push(n)}return r}function s(e){var r;if(e.type===forge.pki.oids.contentType)r=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.value).getBytes());else if(e.type===forge.pki.oids.messageDigest)r=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===forge.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),o=e.value;if("string"==typeof o){var s=Date.parse(o);o=isNaN(s)?13===o.length?t.utcTimeToDate(o):t.generalizedTimeToDate(o):new Date(s)}r=o>=n&&o<i?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(o)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(o))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[r])])}function a(e){return[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(forge.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.parameter.getBytes())]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.content.getBytes())])]}function c(e,r,n){var i={};if(!t.validate(r,n,i,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(t.derToOid(i.contentType)!==forge.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var s="";if(forge.util.isArray(i.encryptedContent))for(var a=0;a<i.encryptedContent.length;++a){if(i.encryptedContent[a].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=i.encryptedContent[a].value}else s=i.encryptedContent;e.encryptedContent={algorithm:t.derToOid(i.encAlgorithm),parameter:forge.util.createBuffer(i.encParameter.value),content:forge.util.createBuffer(s)}}if(i.content){s="";if(forge.util.isArray(i.content))for(a=0;a<i.content.length;++a){if(i.content[a].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=i.content[a].value}else s=i.content;e.content=forge.util.createBuffer(s)}return e.version=i.version.charCodeAt(0),e.rawCapture=i,i}function u(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case forge.pki.oids["aes128-CBC"]:case forge.pki.oids["aes192-CBC"]:case forge.pki.oids["aes256-CBC"]:t=forge.aes.createDecryptionCipher(e.encryptedContent.key);break;case forge.pki.oids.desCBC:case forge.pki.oids["des-EDE3-CBC"]:t=forge.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}r.messageFromPem=function(e){var n=forge.pem.decode(e)[0];if("PKCS7"!==n.type){var i=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=t.fromDer(n.body);return r.messageFromAsn1(o)},r.messageToPem=function(e,r){var n={type:"PKCS7",body:t.toDer(e.toAsn1()).getBytes()};return forge.pem.encode(n,{maxline:r})},r.messageFromAsn1=function(e){var n={},i=[];if(!t.validate(e,r.asn1.contentInfoValidator,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=i,o}var s,a=t.derToOid(n.contentType);switch(a){case forge.pki.oids.envelopedData:s=r.createEnvelopedData();break;case forge.pki.oids.encryptedData:s=r.createEncryptedData();break;case forge.pki.oids.signedData:s=r.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+a+" is not (yet) supported.")}return s.fromAsn1(n.content.value[0]),s},r.createSignedData=function(){var e=null;return e={type:forge.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(c(e,t,r.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var n=e.rawCapture.certificates.value,i=0;i<n.length;++i)e.certificates.push(forge.pki.certificateFromAsn1(n[i]))},toAsn1:function(){e.contentInfo||e.sign();for(var r=[],n=0;n<e.certificates.length;++n)r.push(forge.pki.certificateToAsn1(e.certificates[n]));var i=[],o=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return r.length>0&&o.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,r)),i.length>0&&o.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,i)),o.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var r=t.issuer,n=t.serialNumber;if(t.certificate){var i=t.certificate;"string"==typeof i&&(i=forge.pki.certificateFromPem(i)),r=i.issuer.attributes,n=i.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof o&&(o=forge.pki.privateKeyFromPem(o));var s=t.digestAlgorithm||forge.pki.oids.sha1;switch(s){case forge.pki.oids.sha1:case forge.pki.oids.sha256:case forge.pki.oids.sha384:case forge.pki.oids.sha512:case forge.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var a=t.authenticatedAttributes||[];if(a.length>0){for(var c=!1,u=!1,f=0;f<a.length;++f){var l=a[f];if(c||l.type!==forge.pki.oids.contentType){if(u||l.type!==forge.pki.oids.messageDigest);else if(u=!0,c)break}else if(c=!0,u)break}if(!c||!u)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:r,serialNumber:n,digestAlgorithm:s,signatureAlgorithm:forge.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:a,unauthenticatedAttributes:[]})},sign:function(r){var n;(r=r||{},"object"!=typeof e.content||null===e.contentInfo)&&(e.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(forge.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof forge.util.ByteBuffer?n=e.content.bytes():"string"==typeof e.content&&(n=forge.util.encodeUtf8(e.content)),r.detached?e.detachedContent=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n):e.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n)]))));0!==e.signers.length&&function(r){var n;n=e.detachedContent?e.detachedContent:(n=e.contentInfo.value[1]).value[0];if(!n)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=t.derToOid(e.contentInfo.value[0].value),a=t.toDer(n);for(var c in a.getByte(),t.getBerValueLength(a),a=a.getBytes(),r)r[c].start().update(a);for(var u=new Date,f=0;f<e.signers.length;++f){var l=e.signers[f];if(0===l.authenticatedAttributes.length){if(i!==forge.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]),h=0;h<l.authenticatedAttributes.length;++h){var p=l.authenticatedAttributes[h];p.type===forge.pki.oids.messageDigest?p.value=r[l.digestAlgorithm].digest():p.type===forge.pki.oids.signingTime&&(p.value||(p.value=u)),d.value.push(s(p)),l.authenticatedAttributesAsn1.value.push(s(p))}a=t.toDer(d).getBytes(),l.md.start().update(a)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(o(e[r]));return t}(e.signers)}(function(){for(var r={},n=0;n<e.signers.length;++n){var i=e.signers[n],o=i.digestAlgorithm;o in r||(r[o]=forge.md[forge.pki.oids[o]].create()),0===i.authenticatedAttributes.length?i.md=r[o]:i.md=forge.md[forge.pki.oids[o]].create()}for(var o in e.digestAlgorithmIdentifiers=[],r)e.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]));return r}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=forge.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},r.createEncryptedData=function(){var e=null;return e={type:forge.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:forge.pki.oids["aes256-CBC"]},fromAsn1:function(t){c(e,t,r.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),u(e)}}},r.createEnvelopedData=function(){var e=null;return e={type:forge.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:forge.pki.oids["aes256-CBC"]},fromAsn1:function(t){var i=c(e,t,r.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(n(e[r]));return t}(i.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,i(e.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,a(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],o=i.issuer;if(i.serialNumber===t.serialNumber&&o.length===r.length){for(var s=!0,a=0;a<r.length;++a)if(o[a].type!==r[a].type||o[a].value!==r[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case forge.pki.oids.rsaEncryption:case forge.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=forge.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}u(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:forge.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){var n,i,o;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case forge.pki.oids["aes128-CBC"]:n=16,i=16,o=forge.aes.createEncryptionCipher;break;case forge.pki.oids["aes192-CBC"]:n=24,i=16,o=forge.aes.createEncryptionCipher;break;case forge.pki.oids["aes256-CBC"]:n=32,i=16,o=forge.aes.createEncryptionCipher;break;case forge.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=forge.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=forge.util.createBuffer(forge.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=forge.util.createBuffer(forge.random.getBytes(i));var s=o(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var a=0;a<e.recipients.length;++a){var c=e.recipients[a];if(void 0===c.encryptedContent.content)switch(c.encryptedContent.algorithm){case forge.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}}}}),util$9=createCommonjsModule(function(e,t){const r=forge.pki;e.exports.certificateForKey=(e,t,n)=>{const i=r.setRsaPublicKey(t.n,t.e),o=r.createCertificate();o.publicKey=i,o.serialNumber="01",o.validity.notBefore=new Date,o.validity.notAfter=new Date,o.validity.notAfter.setFullYear(o.validity.notBefore.getFullYear()+10);const s=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:e.id}];return o.setSubject(s),o.setIssuer(s),o.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),o.sign(t),n(null,o)}}),util_1$6=util$9.certificateForKey;class CMS{constructor(e){if(!e)throw new Error("keychain is required");this.keychain=e}encrypt(e,t,r){const n=this,i=(e,t)=>setImmediate$1(()=>r(e,t));if(!Buffer.isBuffer(t))return i(new Error("Plain data must be a Buffer"));series_1([t=>n.keychain.findKeyByName(e,t),t=>n.keychain._getPrivateKey(e,t)],(e,o)=>{if(e)return i(e);let s=o[0],a=o[1];try{const o=forge.pki.decryptRsaPrivateKey(a,n.keychain._());util$9.certificateForKey(s,o,(e,n)=>{if(e)return r(e);const o=forge.pkcs7.createEnvelopedData();o.addRecipient(n),o.content=forge.util.createBuffer(t),o.encrypt();const s=forge.asn1.toDer(o.toAsn1()).getBytes();i(null,Buffer.from(s,"binary"))})}catch(e){i(e)}})}decrypt(e,t){const r=(e,r)=>setImmediate$1(()=>t(e,r));if(!Buffer.isBuffer(e))return r(new Error("CMS data is required"));const n=this;let i;try{const t=forge.util.createBuffer(e.toString("binary")),n=forge.asn1.fromDer(t);i=forge.pkcs7.messageFromAsn1(n)}catch(e){return r(new Error("Invalid CMS: "+e.message))}const o=i.recipients.filter(e=>e.issuer.find(e=>"O"===e.shortName&&"ipfs"===e.value)).filter(e=>e.issuer.find(e=>"CN"===e.shortName)).map(e=>({recipient:e,keyId:e.issuer.find(e=>"CN"===e.shortName).value}));detect(o,(e,t)=>n.keychain.findKeyById(e.keyId,(e,r)=>t(null,!e&&r)),(e,t)=>{if(e)return r(e);if(!t){const t=o.map(e=>e.keyId);return(e=new Error("Decryption needs one of the key(s): "+t.join(", "))).missingKeys=t,r(e)}waterfall([e=>n.keychain.findKeyById(t.keyId,e),(e,t)=>n.keychain._getPrivateKey(e.name,t)],(e,o)=>{if(e)return r(e);const s=forge.pki.decryptRsaPrivateKey(o,n.keychain._());i.decrypt(t.recipient,s),r(null,Buffer.from(i.content.getBytes(),"binary"))})})}}var cms=CMS;const keyPrefix="/pkcs8/",infoPrefix="/info/",NIST={minKeyLength:14,minSaltLength:16,minIterationCount:1e3},defaultOptions$1={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function validateKeyName(e){return!!e&&("string"==typeof e&&e===sanitizeFilename(e.trim()))}function _error(e,t){const r=800*Math.random()+200;"string"==typeof t&&(t=new Error(t)),setTimeout(e,r,t,null)}function DsName(e){return new src$B.Key(keyPrefix+e)}function DsInfoName(e){return new src$B.Key(infoPrefix+e)}class Keychain{constructor(e,t){if(!e)throw new Error("store is required");this.store=e;const r=mergeOptions(defaultOptions$1,t);if(!r.passPhrase||r.passPhrase.length<20)throw new Error("passPhrase must be least 20 characters");if(r.dek.keyLength<NIST.minKeyLength)throw new Error(`dek.keyLength must be least ${NIST.minKeyLength} bytes`);if(r.dek.salt.length<NIST.minSaltLength)throw new Error(`dek.saltLength must be least ${NIST.minSaltLength} bytes`);if(r.dek.iterationCount<NIST.minIterationCount)throw new Error(`dek.iterationCount must be least ${NIST.minIterationCount}`);const n=src$u.pbkdf2(r.passPhrase,r.dek.salt,r.dek.iterationCount,r.dek.keyLength,r.dek.hash);Object.defineProperty(this,"_",{value:()=>n})}get cms(){return new cms(this)}static generateOptions(){const e=Object.assign({},defaultOptions$1),t=3*Math.ceil(NIST.minSaltLength/3);return e.dek.salt=src$u.randomBytes(t).toString("base64"),e}static get options(){return defaultOptions$1}createKey(e,t,r,n){const i=this;if(!validateKeyName(e)||"self"===e)return _error(n,`Invalid key name '${e}'`);if("string"!=typeof t)return _error(n,`Invalid key type '${t}'`);if(!Number.isSafeInteger(r))return _error(n,`Invalid key size '${r}'`);const o=DsName(e);i.store.has(o,(s,a)=>{if(s)return _error(n,s);if(a)return _error(n,`Key '${e}' already exists`);switch(t.toLowerCase()){case"rsa":if(r<2048)return _error(n,`Invalid RSA key size ${r}`)}src$u.keys.generateKeyPair(t,r,(t,r)=>{if(t)return _error(n,t);r.id((t,s)=>{if(t)return _error(n,t);r.export(this._(),(t,r)=>{if(t)return _error(n,t);const a={name:e,id:s},c=i.store.batch();c.put(o,r),c.put(DsInfoName(e),JSON.stringify(a)),c.commit(e=>{if(e)return _error(n,e);n(null,a)})})})})})}listKeys(e){const t={prefix:infoPrefix};pull(this.store.query(t),collect((t,r)=>{if(t)return _error(e,t);const n=r.map(e=>JSON.parse(e.value));e(null,n)}))}findKeyById(e,t){this.listKeys((r,n)=>{if(r)return _error(t,r);const i=n.find(t=>t.id===e);t(null,i)})}findKeyByName(e,t){if(!validateKeyName(e))return _error(t,`Invalid key name '${e}'`);const r=DsInfoName(e);this.store.get(r,(r,n)=>{if(r)return _error(t,`Key '${e}' does not exist. ${r.message}`);t(null,JSON.parse(n.toString()))})}removeKey(e,t){const r=this;if(!validateKeyName(e)||"self"===e)return _error(t,`Invalid key name '${e}'`);const n=DsName(e);r.findKeyByName(e,(i,o)=>{if(i)return _error(t,i);const s=r.store.batch();s.delete(n),s.delete(DsInfoName(e)),s.commit(e=>{if(e)return _error(t,e);t(null,o)})})}renameKey(e,t,r){const n=this;if(!validateKeyName(e)||"self"===e)return _error(r,`Invalid old key name '${e}'`);if(!validateKeyName(t)||"self"===t)return _error(r,`Invalid new key name '${t}'`);const i=DsName(e),o=DsName(t),s=DsInfoName(e),a=DsInfoName(t);this.store.get(i,(c,u)=>{if(c)return _error(r,`Key '${e}' does not exist. ${c.message}`);const f=u.toString();n.store.has(o,(e,c)=>e?_error(r,e):c?_error(r,`Key '${t}' already exists`):void n.store.get(s,(e,c)=>{if(e)return _error(r,e);const u=JSON.parse(c.toString());u.name=t;const l=n.store.batch();l.put(o,f),l.put(a,JSON.stringify(u)),l.delete(i),l.delete(s),l.commit(e=>{if(e)return _error(r,e);r(null,u)})}))})}exportKey(e,t,r){if(!validateKeyName(e))return _error(r,`Invalid key name '${e}'`);if(!t)return _error(r,"Password is required");const n=DsName(e);this.store.get(n,(n,i)=>{if(n)return _error(r,`Key '${e}' does not exist. ${n.message}`);const o=i.toString();src$u.keys.import(o,this._(),(e,n)=>{if(e)return _error(r,e);n.export(t,r)})})}importKey(e,t,r,n){const i=this;if(!validateKeyName(e)||"self"===e)return _error(n,`Invalid key name '${e}'`);if(!t)return _error(n,"PEM encoded key is required");const o=DsName(e);i.store.has(o,(s,a)=>s?_error(n,s):a?_error(n,`Key '${e}' already exists`):void src$u.keys.import(t,r,(t,r)=>{if(t)return _error(n,"Cannot read the key, most likely the password is wrong");r.id((t,s)=>{if(t)return _error(n,t);r.export(this._(),(t,r)=>{if(t)return _error(n,t);const a={name:e,id:s},c=i.store.batch();c.put(o,r),c.put(DsInfoName(e),JSON.stringify(a)),c.commit(e=>{if(e)return _error(n,e);n(null,a)})})})}))}importPeer(e,t,r){const n=this;if(!validateKeyName(e))return _error(r,`Invalid key name '${e}'`);if(!t||!t.privKey)return _error(r,"Peer.privKey is required");const i=t.privKey,o=DsName(e);n.store.has(o,(t,s)=>t?_error(r,t):s?_error(r,`Key '${e}' already exists`):void i.id((t,s)=>{if(t)return _error(r,t);i.export(this._(),(t,i)=>{if(t)return _error(r,t);const a={name:e,id:s},c=n.store.batch();c.put(o,i),c.put(DsInfoName(e),JSON.stringify(a)),c.commit(e=>{if(e)return _error(r,e);r(null,a)})})}))}_getPrivateKey(e,t){if(!validateKeyName(e))return _error(t,`Invalid key name '${e}'`);this.store.get(DsName(e),(r,n)=>{if(r)return _error(t,`Key '${e}' does not exist. ${r.message}`);t(null,n.toString())})}}var keychain=Keychain,src$H=keychain;function fail(){throw new Error("Key management requires '--pass ...' option")}class NoKeychain{static get options(){fail()}static generateOptions(){fail()}createKey(){fail()}listKeys(){fail()}findKeyById(){fail()}findKeyByName(){fail()}renameKey(){fail()}removeKey(){fail()}exportKey(){fail()}importKey(){fail()}importPeer(){fail()}get cms(){fail()}}var noKeychain=NoKeychain,preStart=function(e){return t=>{e.log("pre-start");const r=e._options.pass;waterfall([t=>e._repo.config.get(t),(t,r)=>{if(!e._options.config)return r(null,t);t=mergeOptions(t,e._options.config),e.config.replace(t,e=>{if(e)return r(e);r(null,t)})},(t,r)=>{if(t.Keychain)return r(null,t);t.Keychain=src$H.generateOptions(),e.config.set("Keychain",t.Keychain,n=>{e.log("using default keychain options"),r(n,t)})},(t,n)=>{if(e._keychain);else if(r){const n=Object.assign({passPhrase:r},t.Keychain);e._keychain=new src$H(e._repo.keys,n),e.log("keychain constructed")}else e._keychain=new noKeychain,e.log("no keychain, use --pass");n(null,t)},(e,t)=>{const r=e.Identity.PrivKey;src$s.createFromPrivKey(r,(r,n)=>{t(r,e,n)})},(t,n,i)=>{if(!r)return i(null,t,n);e._keychain.findKeyByName("self",r=>{if(r)return e.log('Creating "self" key'),e._keychain.importPeer("self",n,e=>i(e,t,n));i(null,t,n)})},(t,r,n)=>{e.log("peer created"),e._peerInfo=new src$t(r),t.Addresses&&t.Addresses.Swarm&&t.Addresses.Swarm.forEach(t=>{let r=src$2(t);r.getPeerId()&&(r=r.encapsulate("/ipfs/"+e._peerInfo.id.toB58String())),e._peerInfo.multiaddrs.add(r)}),n()},t=>e.pin._load(t)],t)}},lodash_isequalwith=createCommonjsModule(function(e,t){var r=200,n="__lodash_hash_undefined__",i=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object Boolean]",f="[object Date]",l="[object Error]",d="[object Function]",h="[object GeneratorFunction]",p="[object Map]",b="[object Number]",m="[object Object]",g="[object RegExp]",y="[object Set]",v="[object String]",_="[object Symbol]",$="[object ArrayBuffer]",S="[object DataView]",E=/^\[object .+?Constructor\]$/,w=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[a]=C[c]=C[$]=C[u]=C[S]=C[f]=C[l]=C[d]=C[p]=C[b]=C[m]=C[g]=C[y]=C[v]=C["[object WeakMap]"]=!1;var A="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,k="object"==typeof self&&self&&self.Object===Object&&self,T=A||k||Function("return this")(),I=t&&!t.nodeType&&t,B=I&&e&&!e.nodeType&&e,P=B&&B.exports===I&&A.process,R=function(){try{return P&&P.binding("util")}catch(e){}}(),O=R&&R.isTypedArray;function N(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function x(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function L(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function M(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var D,F=Array.prototype,j=Function.prototype,U=Object.prototype,H=T["__core-js_shared__"],K=(D=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"",G=j.toString,V=U.hasOwnProperty,z=U.toString,q=RegExp("^"+G.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=T.Symbol,J=T.Uint8Array,X=U.propertyIsEnumerable,Y=F.splice,Z=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Q=we(T,"DataView"),ee=we(T,"Map"),te=we(T,"Promise"),re=we(T,"Set"),ne=we(T,"WeakMap"),ie=we(Object,"create"),oe=ke(Q),se=ke(ee),ae=ke(te),ce=ke(re),ue=ke(ne),fe=W?W.prototype:void 0,le=fe?fe.valueOf:void 0;function de(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function he(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function pe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function be(e){var t=-1,r=e?e.length:0;for(this.__data__=new pe;++t<r;)this.add(e[t])}function me(e){this.__data__=new he(e)}function ge(e,t){var r=Ie(e)||function(e){return function(e){return Ne(e)&&Be(e)}(e)&&V.call(e,"callee")&&(!X.call(e,"callee")||z.call(e)==a)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!V.call(e,o)||i&&("length"==o||Ae(o,n))||r.push(o);return r}function ye(e,t){for(var r=e.length;r--;)if(Te(e[r][0],t))return r;return-1}function ve(e,t,r,n,s){return e===t||(null==e||null==t||!Oe(e)&&!Ne(t)?e!=e&&t!=t:function(e,t,r,n,s,d){var h=Ie(e),E=Ie(t),w=c,C=c;h||(w=(w=Ce(e))==a?m:w);E||(C=(C=Ce(t))==a?m:C);var A=w==m&&!x(e),k=C==m&&!x(t),T=w==C;if(T&&!A)return d||(d=new me),h||xe(e)?Se(e,t,r,n,s,d):function(e,t,r,n,s,a,c){switch(r){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case $:return!(e.byteLength!=t.byteLength||!n(new J(e),new J(t)));case u:case f:case b:return Te(+e,+t);case l:return e.name==t.name&&e.message==t.message;case g:case v:return e==t+"";case p:var d=L;case y:var h=a&o;if(d||(d=M),e.size!=t.size&&!h)return!1;var m=c.get(e);if(m)return m==t;a|=i,c.set(e,t);var E=Se(d(e),d(t),n,s,a,c);return c.delete(e),E;case _:if(le)return le.call(e)==le.call(t)}return!1}(e,t,w,r,n,s,d);if(!(s&o)){var I=A&&V.call(e,"__wrapped__"),B=k&&V.call(t,"__wrapped__");if(I||B){var P=I?e.value():e,R=B?t.value():t;return d||(d=new me),r(P,R,n,s,d)}}if(!T)return!1;return d||(d=new me),function(e,t,r,n,i,s){var a=i&o,c=Le(e),u=c.length,f=Le(t).length;if(u!=f&&!a)return!1;for(var l=u;l--;){var d=c[l];if(!(a?d in t:V.call(t,d)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var p=!0;s.set(e,t),s.set(t,e);for(var b=a;++l<u;){d=c[l];var m=e[d],g=t[d];if(n)var y=a?n(g,m,d,t,e,s):n(m,g,d,e,t,s);if(!(void 0===y?m===g||r(m,g,n,i,s):y)){p=!1;break}b||(b="constructor"==d)}if(p&&!b){var v=e.constructor,_=t.constructor;v!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return s.delete(e),s.delete(t),p}(e,t,r,n,s,d)}(e,t,ve,r,n,s))}function _e(e){return!(!Oe(e)||function(e){return!!K&&K in e}(e))&&(Pe(e)||x(e)?q:E).test(ke(e))}function $e(e){if(!function(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||U;return e===r}(e))return Z(e);var t=[];for(var r in Object(e))V.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Se(e,t,r,n,s,a){var c=s&o,u=e.length,f=t.length;if(u!=f&&!(c&&f>u))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var d=-1,h=!0,p=s&i?new be:void 0;for(a.set(e,t),a.set(t,e);++d<u;){var b=e[d],m=t[d];if(n)var g=c?n(m,b,d,t,e,a):n(b,m,d,e,t,a);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!N(t,function(e,t){if(!p.has(t)&&(b===e||r(b,e,n,s,a)))return p.add(t)})){h=!1;break}}else if(b!==m&&!r(b,m,n,s,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function Ee(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function we(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return _e(r)?r:void 0}de.prototype.clear=function(){this.__data__=ie?ie(null):{}},de.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},de.prototype.get=function(e){var t=this.__data__;if(ie){var r=t[e];return r===n?void 0:r}return V.call(t,e)?t[e]:void 0},de.prototype.has=function(e){var t=this.__data__;return ie?void 0!==t[e]:V.call(t,e)},de.prototype.set=function(e,t){return this.__data__[e]=ie&&void 0===t?n:t,this},he.prototype.clear=function(){this.__data__=[]},he.prototype.delete=function(e){var t=this.__data__,r=ye(t,e);return!(r<0||(r==t.length-1?t.pop():Y.call(t,r,1),0))},he.prototype.get=function(e){var t=this.__data__,r=ye(t,e);return r<0?void 0:t[r][1]},he.prototype.has=function(e){return ye(this.__data__,e)>-1},he.prototype.set=function(e,t){var r=this.__data__,n=ye(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},pe.prototype.clear=function(){this.__data__={hash:new de,map:new(ee||he),string:new de}},pe.prototype.delete=function(e){return Ee(this,e).delete(e)},pe.prototype.get=function(e){return Ee(this,e).get(e)},pe.prototype.has=function(e){return Ee(this,e).has(e)},pe.prototype.set=function(e,t){return Ee(this,e).set(e,t),this},be.prototype.add=be.prototype.push=function(e){return this.__data__.set(e,n),this},be.prototype.has=function(e){return this.__data__.has(e)},me.prototype.clear=function(){this.__data__=new he},me.prototype.delete=function(e){return this.__data__.delete(e)},me.prototype.get=function(e){return this.__data__.get(e)},me.prototype.has=function(e){return this.__data__.has(e)},me.prototype.set=function(e,t){var n=this.__data__;if(n instanceof he){var i=n.__data__;if(!ee||i.length<r-1)return i.push([e,t]),this;n=this.__data__=new pe(i)}return n.set(e,t),this};var Ce=function(e){return z.call(e)};function Ae(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||w.test(e))&&e>-1&&e%1==0&&e<t}function ke(e){if(null!=e){try{return G.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Te(e,t){return e===t||e!=e&&t!=t}(Q&&Ce(new Q(new ArrayBuffer(1)))!=S||ee&&Ce(new ee)!=p||te&&"[object Promise]"!=Ce(te.resolve())||re&&Ce(new re)!=y||ne&&"[object WeakMap]"!=Ce(new ne))&&(Ce=function(e){var t=z.call(e),r=t==m?e.constructor:void 0,n=r?ke(r):void 0;if(n)switch(n){case oe:return S;case se:return p;case ae:return"[object Promise]";case ce:return y;case ue:return"[object WeakMap]"}return t});var Ie=Array.isArray;function Be(e){return null!=e&&Re(e.length)&&!Pe(e)}function Pe(e){var t=Oe(e)?z.call(e):"";return t==d||t==h}function Re(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Oe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ne(e){return!!e&&"object"==typeof e}var xe=O?function(e){return function(t){return e(t)}}(O):function(e){return Ne(e)&&Re(e.length)&&!!C[z.call(e)]};function Le(e){return Be(e)?ge(e):$e(e)}e.exports=function(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?ve(e,t,r):!!n}}),CIDUtil$8={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$8=CIDUtil$8;class CID$7{constructor(e,t,r,n){if(_CID$7.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$7.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$7.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$7.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$7(0,this.codec,this.multihash)}toV1(){return new _CID$7(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$8.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$7=classIs(CID$7,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$7.codecs=baseTable;var src$I=_CID$7,src$J=e=>{if(!Buffer.isBuffer(e))throw new Error("arg needs to be a buffer");let t=[];for(;e.length>0;){const r=varint.decode(e);t.push(r),e=e.slice(varint.decode.bytes)}return t},sha3$7=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),toCallback$c=e=>(function(t,r){let n;try{n=e(t)}catch(e){return void process.nextTick(r,e)}process.nextTick(r,null,n)}),toBuf$6=(e,t)=>r=>{let n=e(r,t);return Buffer.from(n,"hex")},fromString$7=(e,t)=>r=>{const n=Buffer.isBuffer(r)?r.toString():r;return e(n,t)},fromNumberTo32BitBuf$c=(e,t)=>r=>{let n=e(r,t);const i=new Array(4);for(let e=0;e<4;e++)i[e]=255&n,n>>=8;return Buffer.from(i)},utils$w={toCallback:toCallback$c,toBuf:toBuf$6,fromString:fromString$7,fromNumberTo32BitBuf:fromNumberTo32BitBuf$c};const toCallback$d=utils$w.toCallback,sha1$6=toCallback$d(e=>crypto$l.createHash("sha1").update(e).digest()),sha2256$3=toCallback$d(e=>crypto$l.createHash("sha256").update(e).digest()),sha2512$3=toCallback$d(e=>crypto$l.createHash("sha512").update(e).digest());var cryptoSha12$3={sha1:sha1$6,sha2256:sha2256$3,sha2512:sha2512$3};const toCallback$e=utils$w.toCallback,minB$6=45569,minS$6=45633,blake2b$7={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$7={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$6=(e,t)=>toCallback$e(r=>{const n=t.init(e,null);return t.update(n,r),Buffer.from(t.digest(n))});var blake_1$6=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$6(t+1,blake2b$7);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$6(t+1,blake2s$7)};const toCallback$f=utils$w.toCallback,toBuf$7=utils$w.toBuf,fromString$8=utils$w.fromString,fromNumberTo32BitBuf$d=utils$w.fromNumberTo32BitBuf,dblSha2256$3=(e,t)=>{cryptoSha12$3.sha2256(e,(e,r)=>{e&&t(e),cryptoSha12$3.sha2256(Buffer.from(r),t)})};var crypto$a={sha1:cryptoSha12$3.sha1,sha2256:cryptoSha12$3.sha2256,sha2512:cryptoSha12$3.sha2512,sha3512:toCallback$f(toBuf$7(sha3$7.sha3_512)),sha3384:toCallback$f(toBuf$7(sha3$7.sha3_384)),sha3256:toCallback$f(toBuf$7(sha3$7.sha3_256)),sha3224:toCallback$f(toBuf$7(sha3$7.sha3_224)),shake128:toCallback$f(toBuf$7(sha3$7.shake_128,128)),shake256:toCallback$f(toBuf$7(sha3$7.shake_256,256)),keccak224:toCallback$f(toBuf$7(sha3$7.keccak_224)),keccak256:toCallback$f(toBuf$7(sha3$7.keccak_256)),keccak384:toCallback$f(toBuf$7(sha3$7.keccak_384)),keccak512:toCallback$f(toBuf$7(sha3$7.keccak_512)),murmur3128:toCallback$f(toBuf$7(fromString$8(murmurhash3js.x64.hash128))),murmur332:toCallback$f(fromNumberTo32BitBuf$d(fromString$8(murmurhash3js.x86.hash32))),addBlake:blake_1$6,dblSha2256:dblSha2256$3},src$K=Multihashing$6;function Multihashing$6(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");Multihashing$6.digest(e,t,r,(e,i)=>{if(e)return n(e);n(null,src.encode(i,t,r))})}Multihashing$6.Buffer=Buffer,Multihashing$6.multihash=src,Multihashing$6.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=Multihashing$6.createHash(t)}catch(e){return o(e)}i(e,o)},Multihashing$6.createHash=function(e){if(e=src.coerceCode(e),!Multihashing$6.functions[e])throw new Error("multihash function "+e+" not yet supported");return Multihashing$6.functions[e]},Multihashing$6.functions={17:crypto$a.sha1,18:crypto$a.sha2256,19:crypto$a.sha2512,20:crypto$a.sha3512,21:crypto$a.sha3384,22:crypto$a.sha3256,23:crypto$a.sha3224,24:crypto$a.shake128,25:crypto$a.shake256,26:crypto$a.keccak224,27:crypto$a.keccak256,28:crypto$a.keccak384,29:crypto$a.keccak512,34:crypto$a.murmur3128,35:crypto$a.murmur332,86:crypto$a.dblSha2256},crypto$a.addBlake(Multihashing$6.functions);var message_proto="\n  message Message {\n    message Wantlist {\n      message Entry {\n        // changed from string to bytes, it makes a difference in JavaScript\n        optional bytes block = 1;      // the block cid (cidV0 in bitswap 1.0.0, cidV1 in bitswap 1.1.0)\n        optional int32 priority = 2;    // the priority (normalized). default to 1\n        optional bool cancel = 3;       // whether this revokes an entry\n      }\n\n      repeated Entry entries = 1;       // a list of wantlist entries\n      optional bool full = 2;           // whether this is the full wantlist. default to false\n    }\n\n    message Block {\n      optional bytes prefix = 1;        // CID prefix (cid version, multicodec and multihash prefix (type + length)\n      optional bytes data = 2;\n    }\n\n    optional Wantlist wantlist = 1;\n    repeated bytes blocks = 2;          // used to send Blocks in bitswap 1.0.0\n    repeated Block payload = 3;         // used to send Blocks in bitswap 1.1.0\n  }\n",s$6=1e3,m$4=60*s$6,h$2=60*m$4,d$2=24*h$2,w$2=7*d$2,y$2=365.25*d$2,ms$2=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$6(e);if("number"===r&&isFinite(e))return t.long?fmtLong$2(e):fmtShort$2(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$6(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$2;case"weeks":case"week":case"w":return r*w$2;case"days":case"day":case"d":return r*d$2;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$2;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$4;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$6;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$2(e){var t=Math.abs(e);return t>=d$2?Math.round(e/d$2)+"d":t>=h$2?Math.round(e/h$2)+"h":t>=m$4?Math.round(e/m$4)+"m":t>=s$6?Math.round(e/s$6)+"s":e+"ms"}function fmtLong$2(e){var t=Math.abs(e);return t>=d$2?plural$2(e,t,d$2,"day"):t>=h$2?plural$2(e,t,h$2,"hour"):t>=m$4?plural$2(e,t,m$4,"minute"):t>=s$6?plural$2(e,t,s$6,"second"):e+" ms"}function plural$2(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$2(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$2,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$8=setup$2,browser$2=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$8(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$2=browser$2.log,browser_2$2=browser$2.formatArgs,browser_3$2=browser$2.save,browser_4$2=browser$2.load,browser_5$2=browser$2.useColors,browser_6$2=browser$2.storage,browser_7$2=browser$2.colors,node$5=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$8(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$2=node$5.init,node_2$2=node$5.log,node_3$2=node$5.formatArgs,node_4$2=node$5.save,node_5$2=node$5.load,node_6$2=node$5.useColors,node_7$2=node$5.colors,node_8$2=node$5.inspectOpts,src$L=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$2:e.exports=node$5});const logger=(e,t)=>{const r=["bitswap"];t&&r.push(t),e&&r.push(`${e.toB58String().slice(0,8)}`);const n=src$L(r.join(":"));return n.error=src$L(r.concat(["error"]).join(":")),n},includesWith=(e,t,r)=>{let n=0;const i=r.length;for(;n<i;){if(e(t,r[n]))return!0;n+=1}return!1},uniqWith=(e,t)=>{let r=0;const n=t.length,i=[];let o;for(;r<n;)o=t[r],includesWith(e,o,i)||(i[i.length]=o),r+=1;return i},groupBy=(e,t)=>t.reduce((t,r)=>{const n=e(r);return t[n]?t[n].push(r):t[n]=[r],t},{}),pullAllWith=(e,t,r)=>t.filter(t=>!includesWith(e,t,r)),sortBy=(e,t)=>Array.prototype.slice.call(t,0).sort((t,r)=>{const n=e(t),i=e(r);return n<i?-1:n>i?1:0});var utils$x={logger:logger,includesWith:includesWith,uniqWith:uniqWith,groupBy:groupBy,pullAllWith:pullAllWith,sortBy:sortBy};class WantListEntry{constructor(e,t){assert$t(src$I.isCID(e),"must be valid CID"),this._refCounter=1,this.cid=e,this.priority=t||1}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toBaseEncodedString()}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority}}var entry=WantListEntry;const{sortBy:sortBy$1}=utils$x;class Wantlist{constructor(e){this.set=new Map,this._stats=e}get length(){return this.set.size}add(e,t){const r=e.buffer.toString(),n=this.set.get(r);n?(n.inc(),n.priority=t):(this.set.set(r,new entry(e,t)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){const t=e.buffer.toString(),r=this.set.get(t);r&&(r.dec(),r.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(sortBy$1(e=>e[1].key,Array.from(this.set.entries())))}contains(e){const t=e.buffer.toString();return this.set.get(t)}}Wantlist.Entry=entry;var wantlist=Wantlist;const WantlistEntry=wantlist.Entry;var entry$1=class{constructor(e,t,r){assert$t(src$I.isCID(e),"needs valid cid"),this.entry=new WantlistEntry(e,t),this.cancel=Boolean(r)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toBaseEncodedString()} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.entry.equals(e.entry)}};const pbm$2=src$i(message_proto);class BitswapMessage{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map}get empty(){return 0===this.blocks.size&&0===this.wantlist.size}addEntry(e,t,r){assert$t(e&&src$I.isCID(e),"must be a valid cid");const n=e.buffer.toString(),i=this.wantlist.get(n);i?(i.priority=t,i.cancel=Boolean(r)):this.wantlist.set(n,new entry$1(e,t,r))}addBlock(e){assert$t(src$b.isBlock(e),"must be a valid cid");const t=e.cid.buffer.toString();this.blocks.set(t,e)}cancel(e){assert$t(src$I.isCID(e),"must be a valid cid");const t=e.buffer.toString();this.wantlist.delete(t),this.addEntry(e,0,!0)}serializeToBitswap100(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map(e=>({block:e.cid.buffer,priority:Number(e.priority),cancel:Boolean(e.cancel)}))},blocks:Array.from(this.blocks.values()).map(e=>e.data)};return this.full&&(e.wantlist.full=!0),pbm$2.Message.encode(e)}serializeToBitswap110(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map(e=>({block:e.cid.buffer,priority:Number(e.priority),cancel:Boolean(e.cancel)}))},payload:[]};return this.full&&(e.wantlist.full=!0),this.blocks.forEach(t=>{e.payload.push({prefix:t.cid.prefix,data:t.data})}),pbm$2.Message.encode(e)}equals(e){const t=(e,t)=>{if(e.equals&&"function"==typeof e.equals)return e.equals(t)};return!(this.full!==e.full||!lodash_isequalwith(this.wantlist,e.wantlist,t)||!lodash_isequalwith(this.blocks,e.blocks,t))}get[Symbol.toStringTag](){const e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${t}>`}}BitswapMessage.deserialize=(e,t)=>{let r;try{r=pbm$2.Message.decode(e)}catch(e){return nextTick(()=>t(e))}const n=r.wantlist&&r.wantlist.full||!1,i=new BitswapMessage(n);return r.wantlist&&r.wantlist.entries.forEach(e=>{let r;try{r=new src$I(e.block)}catch(e){return t(e)}i.addEntry(r,e.priority,e.cancel)}),r.blocks.length>0?each(r.blocks,(e,r)=>{src$K(e,"sha2-256",(n,o)=>{if(n)return r(n);let s;try{s=new src$I(o)}catch(n){return t(n)}i.addBlock(new src$b(e,s)),r()})},e=>{if(e)return t(e);t(null,i)}):r.payload.length>0?each(r.payload,(e,t)=>{if(!e.prefix||!e.data)return nextTick(t);const r=src$J(e.prefix),n=r[0],o=r[1],s=r[2];src$K(e.data,s,(r,s)=>{if(r)return t(r);let a;try{a=new src$I(n,nameTable_1[o.toString("16")],s)}catch(r){return t(r)}i.addBlock(new src$b(e.data,a)),t()})},e=>{if(e)return t(e);t(null,i)}):void t(null,i)},BitswapMessage.Entry=entry$1;var message=BitswapMessage;const SECOND=1e3;var constants$8={maxProvidersPerRequest:3,providerRequestTimeout:1e4,hasBlockTimeout:15e3,provideTimeout:15e3,kMaxPriority:Math.pow(2,31)-1,rebroadcastDelay:1e4,maxListeners:1e3},justDebounceIt=debounce;function debounce(e,t,r){var n;return function(){if(!t)return e.apply(this,arguments);var i=this,o=arguments,s=r&&!n;return clearTimeout(n),n=setTimeout(function(){if(n=null,!s)return e.apply(i,o)},t),s?e.apply(this,arguments):void 0}}const logger$1=utils$x.logger;var msgQueue=class{constructor(e,t,r){this.peerId=t,this.network=r,this.refcnt=1,this._entries=[],this._log=logger$1(e,"msgqueue",t.toB58String().slice(0,8)),this.sendEntries=justDebounceIt(this._sendEntries.bind(this),200)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new message(!1);this._entries.forEach(t=>{t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)}),this._entries=[],this.addMessage(e)}send(e){this.network.connectTo(this.peerId,t=>{t?this._log.error("cant connect to peer %s: %s",this.peerId.toB58String(),t.message):(this._log("sending message"),this.network.sendMessage(this.peerId,e,e=>{e&&this._log.error("send error: %s",e.message)}))})}};const logger$2=utils$x.logger;var wantManager=class{constructor(e,t,r){this.peers=new Map,this.wantlist=new wantlist(r),this.network=t,this._stats=r,this._peerId=e,this._log=logger$2(e,"want")}_addEntries(e,t,r){const n=e.map((e,r)=>new message.Entry(e,constants$8.kMaxPriority-r,t));n.forEach(e=>{e.cancel?r?this.wantlist.removeForce(e.cid):this.wantlist.remove(e.cid):(this._log("adding to wl"),this.wantlist.add(e.cid,e.priority))});for(let e of this.peers.values())e.addEntries(n)}_startPeerHandler(e){let t=this.peers.get(e.toB58String());if(t)return void t.refcnt++;t=new msgQueue(this._peerId,e,this.network);const r=new message(!0);for(let e of this.wantlist.entries())r.addEntry(e[1].cid,e[1].priority);return t.addMessage(r),this.peers.set(e.toB58String(),t),t}_stopPeerHandler(e){const t=this.peers.get(e.toB58String());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toB58String()))}wantBlocks(e){this._addEntries(e,!1)}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(e){this.timer=setInterval(()=>{this._log("resend full-wantlist");const e=new message(!0);this.wantlist.forEach(t=>{e.addEntry(t.cid,t.priority)}),this.peers.forEach(t=>t.addMessage(e))},6e4),nextTick(()=>e())}stop(e){this.peers.forEach(e=>this.disconnected(e.peerId)),clearInterval(this.timer),nextTick(()=>e())}};const Buffer$s=safeBuffer.Buffer;var encode_1$1=encode$5;const poolSize=10240;function encode$5(e){e=Object.assign({fixed:!1},e||{});const t=varint;let r=e.fixed?null:createPool(),n=0,i=!1;return o=>(s,a)=>{if(s&&(i=s),i)return a(i);o(null,(o,s)=>{if(o&&(i=o),i)return a(i);if(!i&&!Buffer$s.isBuffer(s))return i=new Error("data must be a buffer"),a(i);const c=i?0:s.length;let u;if(e.fixed?(u=Buffer$s.alloc(4)).writeInt32BE(c,0):(t.encode(c,r,n),n+=t.encode.bytes,u=r.slice(n-t.encode.bytes,n),r.length-n<100&&(r=createPool(),n=0)),i)return a(null,u);a(null,Buffer$s.concat([u,s],(e.fixed?4:t.encode.bytes)+c))})}}function createPool(){return Buffer$s.alloc(poolSize)}var state$1=function(){var e=[],t=0;return{length:t,data:this,add:function(r){if(!Buffer.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=t+=r.length,e.push(r),this},has:function(e){return null==e?t>0:t>=e},get:function(r){var n;if(null==r||r===t){t=0;var i=e;return e=[],1==i.length?i[0]:Buffer.concat(i)}if(e.length>1&&r<=(n=e[0].length)){var o=e[0].slice(0,r);return r===n?e.shift():e[0]=e[0].slice(r,n),t-=r,o}if(r<t){for(var s=[],a=0;a+e[0].length<r;){var c=e.shift();a+=c.length,s.push(c)}return a<r&&(s.push(e[0].slice(0,r-a)),e[0]=e[0].slice(r-a,e[0].length),this.length=t-=r),Buffer.concat(s)}throw new Error("could not get "+r+" bytes")}}};function isInteger(e){return Number.isFinite(e)}function isFunction$3(e){return"function"==typeof e}function maxDelay(e,t){return t?function(r,n){var i=setTimeout(function(){e(new Error("pull-reader: read exceeded timeout"),n)},t);e(r,function(e,t){clearTimeout(i),n(e,t)})}:e}var pullReader=function(e){var t,r,n,i,o,s=[],a=!1,c=state$1();function u(){for(;s.length;)if(null==s[0].length&&c.has(1))s.shift().cb(null,c.get());else if(c.has(s[0].length)){var e=s.shift();e.cb(null,c.get(e.length))}else if(1==n&&s[0].length&&c.length<s[0].length){var t="stream ended with:"+c.length+" but wanted:"+s[0].length;s.shift().cb(new Error(t))}else{if(!n)return!!s.length;s.shift().cb(n)}return s.length||!c.has(1)||o}function f(){u()&&!a&&(!t||a||i||(a=!0,r(null,function(e,t){if(a=!1,e)return n=e,u();c.add(t),f()})))}function l(n){if(o){for(;s.length;)s.shift().cb(o);return cb&&cb(o)}r=maxDelay(n,e),t=n,f()}return l.abort=function(e,r){o=e||!0,t?(a=!0,t(o,function(){for(;s.length;)s.shift().cb(o);r&&r(o)})):r()},l.read=function(r,n,o){if(isFunction$3(n)&&(o=n,n=e),!isFunction$3(o))return i=!0,function(e,r){if(a||c.has(1)){if(e)return t(e,r);s.push({length:null,cb:r}),f()}else maxDelay(t,n)(e,function(e,t){r(e,t)})};s.push({length:isInteger(r)?r:null,cb:o}),f()},l},pullPushable_1=pullPushable;function pullPushable(e,t){"function"==typeof e&&(t=e,e=!1);var r,n,i,o=[];function s(e,t){e&&(r=e,n&&f(r)),n=t,u()}function a(e){i=i||e||!0,u()}function c(e){i||(n?f(r,e):o.push(e))}return e?{push:c,end:a,source:s,buffer:o}:(s.push=c,s.end=a,s.buffer=o,s);function u(){n&&(r?f(r):!o.length&&i?f(i):o.length&&f(null,o.shift()))}function f(e,r){var i=n;if(e&&t){var o=t;t=null,o(!0===e?null:e)}n=null,i(e,r)}}const Buffer$t=safeBuffer.Buffer;var decode_2=decode$5,decodeFromReader_1=decodeFromReader;const MSB$2=128,isEndByte=e=>!(128&e),MAX_LENGTH=4194304;function decode$5(e){let t=new pullReader,r=pullPushable_1(e=>{t.abort(e)});return n=>{return t(n),function n(){let i=!0,o=!1;const s=(e,t)=>{o=!0,e?(r.end(e),i=!1):(r.push(t),i||n())};for(;i;)o=!1,_decodeFromReader(t,e,s),o||(i=!1)}(),r}}function decodeFromReader(e,t,r){"function"==typeof t&&(r=t,t={}),_decodeFromReader(e,t,function(e,t){if(e)return r(!0===e?new Error("Unexpected end of input from reader."):e);r(null,t)})}function _decodeFromReader(e,t,r){(t=Object.assign({fixed:!1,maxLength:MAX_LENGTH},t||{})).fixed?readFixedMessage(e,t.maxLength,r):readVarintMessage(e,t.maxLength,r)}function readFixedMessage(e,t,r){e.read(4,(n,i)=>{if(n)return r(n);const o=i.readInt32BE(0);if(o>t)return r(new Error("size longer than max permitted length of "+t+"!"));readMessage(e,o,r)})}function readVarintMessage(e,t,r){let n=[];0===n.length&&function i(){e.read(1,(o,s)=>{if(o)return r(o);if(n.push(s),s&&!isEndByte(s[0]))return void i();const a=varint.decode(Buffer$t.concat(n));if(a>t)return r(new Error("size longer than max permitted length of "+t+"!"));readMessage(e,a,(e,t)=>e?r(e):(n=[],t.length<a?r(new Error("Message length does not match prefix specified length.")):void r(null,t)))})}()}function readMessage(e,t,r){e.read(t,(e,t)=>{if(e)return r(e);r(null,t)})}var decode_1={decode:decode_2,decodeFromReader:decodeFromReader_1},encode_1$2=encode_1$1,decode$6=decode_1.decode,decodeFromReader$1=decode_1.decodeFromReader,src$M={encode:encode_1$2,decode:decode$6,decodeFromReader:decodeFromReader$1};const logger$3=utils$x.logger,BITSWAP100="/ipfs/bitswap/1.0.0",BITSWAP110="/ipfs/bitswap/1.1.0";class Network{constructor(e,t,r,n){this._log=logger$3(e.peerInfo.id,"network"),r=r||{},this.libp2p=e,this.bitswap=t,this.b100Only=r.b100Only||!1,this._stats=n,this._running=!1}start(e){this._running=!0,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this.libp2p.handle(BITSWAP100,this._onConnection),this.b100Only||this.libp2p.handle(BITSWAP110,this._onConnection),this.libp2p.on("peer:connect",this._onPeerConnect),this.libp2p.on("peer:disconnect",this._onPeerDisconnect),this.libp2p.peerBook.getAllArray().filter(e=>e.isConnected()).forEach(e=>this._onPeerConnect(e)),nextTick(()=>e())}stop(e){this._running=!1,this.libp2p.unhandle(BITSWAP100),this.b100Only||this.libp2p.unhandle(BITSWAP110),this.libp2p.removeListener("peer:connect",this._onPeerConnect),this.libp2p.removeListener("peer:disconnect",this._onPeerDisconnect),nextTick(()=>e())}_onConnection(e,t){this._running&&(this._log("incomming new bitswap connection: %s",e),pullStream(t,src$M.decode(),pullStream.asyncMap((e,t)=>message.deserialize(e,t)),pullStream.asyncMap((e,r)=>{t.getPeerInfo((t,n)=>{if(t)return r(t);this.bitswap._receiveMessage(n.id,e,r)})}),pullStream.onEnd(e=>{this._log("ending connection"),e&&this.bitswap._receiveError(e)})))}_onPeerConnect(e){this._running&&this.bitswap._onPeerConnected(e.id)}_onPeerDisconnect(e){this._running&&this.bitswap._onPeerDisconnected(e.id)}findProviders(e,t,r){this.libp2p.contentRouting.findProviders(e,{maxTimeout:constants$8.providerRequestTimeout,maxNumProviders:t},r)}findAndConnect(e,t){waterfall([t=>this.findProviders(e,constants$8.maxProvidersPerRequest,t),(e,t)=>{this._log("connecting to providers",e.map(e=>e.id.toB58String())),each(e,(e,t)=>this.connectTo(e,t))}],t)}provide(e,t){this.libp2p.contentRouting.provide(e,t)}sendMessage(e,t,r){if(!this._running)return r(new Error("network isn't running"));const n=e.toB58String()?e.toB58String():e.id.toB58String();this._log("sendMessage to %s",n,t),this._dialPeer(e,(n,i,o)=>{if(n)return r(n);let s;switch(o){case BITSWAP100:s=t.serializeToBitswap100();break;case BITSWAP110:s=t.serializeToBitswap110();break;default:return r(new Error("Unkown protocol: "+o))}writeMessage(i,s,e=>{e&&this._log.error(e)}),r(),this._updateSentStats(e,t.blocks)})}connectTo(e,t){if(!this._running)return t(new Error("network isn't running"));this.libp2p.dial(e,t)}_dialPeer(e,t){this.libp2p.dialProtocol(e,BITSWAP110,(r,n)=>{r?this.libp2p.dialProtocol(e,BITSWAP100,(e,r)=>{if(e)return t(e);t(null,r,BITSWAP100)}):t(null,n,BITSWAP110)})}_updateSentStats(e,t){const r=e.toB58String();this._stats&&(t.forEach(e=>this._stats.push(r,"dataSent",e.data.length)),this._stats.push(r,"blocksSent",t.size))}}function writeMessage(e,t,r){pullStream(pullStream.values([t]),src$M.encode(),e,pullStream.onEnd(r))}var network=Network,eachLimit_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o,s){(0,r.default)(t)(e,(0,n.default)((0,i.default)(o)),s)};var r=o(eachOfLimit),n=o(withoutIndex),i=o(wrapAsync_1);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(eachLimit_1);var eachSeries=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(eachLimit_1),n=i(doLimit_1);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(r.default,1),e.exports=t.default});unwrapExports(eachSeries);class Ledger{constructor(e){this.partner=e,this.wantlist=new wantlist,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}wants(e,t){this.wantlist.add(e,t)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.contains(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}var ledger=Ledger;const{logger:logger$4,groupBy:groupBy$1,pullAllWith:pullAllWith$1,uniqWith:uniqWith$1}=utils$x,MAX_MESSAGE_SIZE=524288;class DecisionEngine{constructor(e,t,r,n){this._log=logger$4(e,"engine"),this.blockstore=t,this.network=r,this._stats=n,this.ledgerMap=new Map,this._running=!1,this._tasks=[],this._outbox=justDebounceIt(this._processTasks.bind(this),100)}_sendBlocks(e,t,r){if(t.reduce((e,t)=>e+t.data.byteLength,0)<MAX_MESSAGE_SIZE)return this._sendSafeBlocks(e,t,r);let n=0,i=[],o=t.length;eachSeries(t,(t,r)=>{if(o--,i.push(t),(n+=t.data.byteLength)>=MAX_MESSAGE_SIZE||0===o){n=0;const t=i.slice();i=[],this._sendSafeBlocks(e,t,e=>{e&&this._log("sendblock error: %s",e.message),r()})}else nextTick(r)},r)}_sendSafeBlocks(e,t,r){const n=new message(!1);t.forEach(e=>n.addBlock(e)),this.network.sendMessage(e,n,r)}_processTasks(){if(!this._running||!this._tasks.length)return;const e=this._tasks;this._tasks=[];const t=e.map(e=>e.entry).map(e=>e.cid),r=uniqWith$1((e,t)=>e.equals(t),t),n=groupBy$1(e=>e.target.toB58String(),e);waterfall([e=>map$2(r,(e,t)=>{this.blockstore.get(e,t)},e),(e,r)=>each(Object.values(n),(r,n)=>{const i=r[0].target,o=t.map(t=>e.find(e=>e.cid.equals(t)));this._sendBlocks(i,o,e=>{e?this._log.error("should never happen: ",e):o.forEach(e=>this.messageSent(i,e)),n()})},r)],e=>{this._tasks=[],e&&this._log.error(e)})}wantlistForPeer(e){const t=e.toB58String();return this.ledgerMap.has(t)?this.ledgerMap.get(t).wantlist.sortedEntries():new Map}ledgerForPeer(e){const t=e.toB58String(),r=this.ledgerMap.get(t);return r?{peer:r.partner.toPrint(),value:r.debtRatio(),sent:r.accounting.bytesSent,recv:r.accounting.bytesRecv,exchanged:r.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map(e=>e.partner)}receivedBlocks(e){e.length&&(this.ledgerMap.forEach(t=>{e.map(e=>t.wantlistContains(e)).filter(Boolean).forEach(e=>{this._tasks.push({entry:e,target:t.partner})})}),this._outbox())}messageReceived(e,t,r){const n=this._findOrCreate(e);if(t.empty)return nextTick(r);if(t.full&&(n.wantlist=new wantlist),this._processBlocks(t.blocks,n),0===t.wantlist.size)return nextTick(r);let i=[],o=[];t.wantlist.forEach(e=>{e.cancel?(n.cancelWant(e.cid),i.push(e)):(n.wants(e.cid,e.priority),o.push(e))}),this._cancelWants(n,e,i),this._addWants(n,e,o,r)}_cancelWants(e,t,r){const n=t.toB58String();this._tasks=pullAllWith$1((e,t)=>{const r=e.target.toB58String()===n,i=e.entry.cid.equals(t.cid);return r&&i},this._tasks,r)}_addWants(e,t,r,n){each(r,(e,r)=>{this.blockstore.has(e.cid,(n,i)=>{n?this._log.error("failed existence check"):i&&this._tasks.push({entry:e.entry,target:t}),r()})},()=>{this._outbox(),n()})}_processBlocks(e,t,r){const n=[];e.forEach((e,r)=>{this._log("got block (%s bytes)",e.data.length),t.receivedBytes(e.data.length),n.push(e.cid)}),this.receivedBlocks(n)}messageSent(e,t){const r=this._findOrCreate(e);r.sentBytes(t?t.data.length:0),t&&t.cid&&r.wantlist.remove(t.cid)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){}_findOrCreate(e){const t=e.toB58String();if(this.ledgerMap.has(t))return this.ledgerMap.get(t);const r=new ledger(e);return this.ledgerMap.set(t,r),this._stats&&this._stats.push(t,"peerCount",1),r}start(e){this._running=!0,nextTick(()=>e())}stop(e){this._running=!1,nextTick(()=>e())}}var decisionEngine=DecisionEngine;const EventEmitter$1=events$1.EventEmitter,logger$5=utils$x.logger,unwantEvent=e=>`unwant:${e}`,blockEvent=e=>`block:${e}`;class Notifications extends EventEmitter$1{constructor(e){super(),this.setMaxListeners(constants$8.maxListeners),this._log=logger$5(e,"notif"),this._unwantListeners={},this._blockListeners={}}hasBlock(e){const t=`block:${e.cid.buffer.toString()}`;this._log(t),this.emit(t,e)}wantBlock(e,t,r){const n=e.buffer.toString();this._log(`wantBlock:${n}`),this._unwantListeners[n]=()=>{this._log(`manual unwant: ${n}`),this._cleanup(n),r()},this._blockListeners[n]=e=>{this._cleanup(n),t(e)},this.once(unwantEvent(n),this._unwantListeners[n]),this.once(blockEvent(n),this._blockListeners[n])}unwantBlock(e){const t=`unwant:${e.buffer.toString()}`;this._log(t),this.emit(t)}_cleanup(e){this._unwantListeners[e]&&(this.removeListener(unwantEvent(e),this._unwantListeners[e]),delete this._unwantListeners[e]),this._blockListeners[e]&&(this.removeListener(blockEvent(e),this._blockListeners[e]),delete this._blockListeners[e])}}var notifications=Notifications,isNumeric$3=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil$2=Math.ceil,mathfloor$2=Math.floor,bignumberError$2="[BigNumber Error] ",tooManyDigits$2=bignumberError$2+"Number primitive has more than 15 significant digits: ",BASE$2=1e14,LOG_BASE$2=14,MAX_SAFE_INTEGER$4=9007199254740991,POWS_TEN$2=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE$2=1e7,MAX$3=1e9;function clone$5(e){var t,r,n,i,o,s,a,c,u,f=E.prototype={constructor:E,toString:null,valueOf:null},l=new E(1),d=20,h=4,p=-7,b=21,m=-1e7,g=1e7,y=!1,v=1,_=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},S="0123456789abcdefghijklmnopqrstuvwxyz";function E(e,t){var i,o,s,a,c,u,f,l,p=this;if(!(p instanceof E))return new E(e,t);if(null==t){if(e&&!0===e._isBigNumber)return p.s=e.s,void(!e.c||e.e>g?p.c=p.e=null:e.e<m?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,c=e;c>=10;c/=10,a++);return void(a>g?p.c=p.e=null:(p.e=a,p.c=[e]))}l=String(e)}else{if(!isNumeric$3.test(l=String(e)))return n(p,l,u);p.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}(a=l.indexOf("."))>-1&&(l=l.replace(".","")),(c=l.search(/e/i))>0?(a<0&&(a=c),a+=+l.slice(c+1),l=l.substring(0,c)):a<0&&(a=l.length)}else{if(intCheck$2(t,2,S.length,"Base"),10==t)return k(p=new E(e),d+p.e+1,h);if(l=String(e),u="number"==typeof e){if(0*e!=0)return n(p,l,u,t);if(p.s=1/e<0?(l=l.slice(1),-1):1,E.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits$2+e)}else p.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(i=S.slice(0,t),a=c=0,f=l.length;c<f;c++)if(i.indexOf(o=l.charAt(c))<0){if("."==o){if(c>a){a=f;continue}}else if(!s&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){s=!0,c=-1,a=0;continue}return n(p,String(e),u,t)}u=!1,(a=(l=r(l,t,10,p.s)).indexOf("."))>-1?l=l.replace(".",""):a=l.length}for(c=0;48===l.charCodeAt(c);c++);for(f=l.length;48===l.charCodeAt(--f););if(l=l.slice(c,++f)){if(f-=c,u&&E.DEBUG&&f>15&&(e>MAX_SAFE_INTEGER$4||e!==mathfloor$2(e)))throw Error(tooManyDigits$2+p.s*e);if((a=a-c-1)>g)p.c=p.e=null;else if(a<m)p.c=[p.e=0];else{if(p.e=a,p.c=[],c=(a+1)%LOG_BASE$2,a<0&&(c+=LOG_BASE$2),c<f){for(c&&p.c.push(+l.slice(0,c)),f-=LOG_BASE$2;c<f;)p.c.push(+l.slice(c,c+=LOG_BASE$2));c=LOG_BASE$2-(l=l.slice(c)).length}else c-=f;for(;c--;l+="0");p.c.push(+l)}}else p.c=[p.e=0]}function w(e,t,r,n){var i,o,s,a,c;if(null==r?r=h:intCheck$2(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)c=coeffToString$2(e.c),c=1==n||2==n&&(s<=p||s>=b)?toExponential$2(c,s):toFixedPoint$2(c,s,"0");else if(o=(e=k(new E(e),t,r)).e,a=(c=coeffToString$2(e.c)).length,1==n||2==n&&(t<=o||o<=p)){for(;a<t;c+="0",a++);c=toExponential$2(c,o)}else if(t-=s,c=toFixedPoint$2(c,o,"0"),o+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=o-a)>0)for(o+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function C(e,t){for(var r,n=1,i=new E(e[0]);n<e.length;n++){if(!(r=new E(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function A(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*LOG_BASE$2-1)>g?e.c=e.e=null:r<m?e.c=[e.e=0]:(e.e=r,e.c=t),e}function k(e,t,r,n){var i,o,s,a,c,u,f,l=e.c,d=POWS_TEN$2;if(l){e:{for(i=1,a=l[0];a>=10;a/=10,i++);if((o=t-i)<0)o+=LOG_BASE$2,s=t,f=(c=l[u=0])/d[i-s-1]%10|0;else if((u=mathceil$2((o+1)/LOG_BASE$2))>=l.length){if(!n)break e;for(;l.length<=u;l.push(0));c=f=0,i=1,s=(o%=LOG_BASE$2)-LOG_BASE$2+1}else{for(c=a=l[u],i=1;a>=10;a/=10,i++);f=(s=(o%=LOG_BASE$2)-LOG_BASE$2+i)<0?0:c/d[i-s-1]%10|0}if(n=n||t<0||null!=l[u+1]||(s<0?c:c%d[i-s-1]),n=r<4?(f||n)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||n||6==r&&(o>0?s>0?c/d[i-s]:0:l[u-1])%10&1||r==(e.s<0?8:7)),t<1||!l[0])return l.length=0,n?(t-=e.e+1,l[0]=d[(LOG_BASE$2-t%LOG_BASE$2)%LOG_BASE$2],e.e=-t||0):l[0]=e.e=0,e;if(0==o?(l.length=u,a=1,u--):(l.length=u+1,a=d[LOG_BASE$2-o],l[u]=s>0?mathfloor$2(c/d[i-s]%d[s])*a:0),n)for(;;){if(0==u){for(o=1,s=l[0];s>=10;s/=10,o++);for(s=l[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(e.e++,l[0]==BASE$2&&(l[0]=1));break}if(l[u]+=a,l[u]!=BASE$2)break;l[u--]=0,a=1}for(o=l.length;0===l[--o];l.pop());}e.e>g?e.c=e.e=null:e.e<m&&(e.c=[e.e=0])}return e}function T(e){var t,r=e.e;return null===r?e.toString():(t=coeffToString$2(e.c),t=r<=p||r>=b?toExponential$2(t,r):toFixedPoint$2(t,r,"0"),e.s<0?"-"+t:t)}return E.clone=clone$5,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(bignumberError$2+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(intCheck$2(r=e[t],0,MAX$3,t),d=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(intCheck$2(r=e[t],0,8,t),h=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(intCheck$2(r[0],-MAX$3,0,t),intCheck$2(r[1],0,MAX$3,t),p=r[0],b=r[1]):(intCheck$2(r,-MAX$3,MAX$3,t),p=-(b=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)intCheck$2(r[0],-MAX$3,-1,t),intCheck$2(r[1],1,MAX$3,t),m=r[0],g=r[1];else{if(intCheck$2(r,-MAX$3,MAX$3,t),!r)throw Error(bignumberError$2+t+" cannot be zero: "+r);m=-(g=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(bignumberError$2+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw y=!r,Error(bignumberError$2+"crypto unavailable");y=r}else y=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(intCheck$2(r=e[t],0,9,t),v=r),e.hasOwnProperty(t="POW_PRECISION")&&(intCheck$2(r=e[t],0,MAX$3,t),_=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(bignumberError$2+t+" not an object: "+r);$=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(bignumberError$2+t+" invalid: "+r);S=r}}return{DECIMAL_PLACES:d,ROUNDING_MODE:h,EXPONENTIAL_AT:[p,b],RANGE:[m,g],CRYPTO:y,MODULO_MODE:v,POW_PRECISION:_,FORMAT:$,ALPHABET:S}},E.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!E.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-MAX$3&&i<=MAX$3&&i===mathfloor$2(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%LOG_BASE$2)<1&&(t+=LOG_BASE$2),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=BASE$2||r!==mathfloor$2(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(bignumberError$2+"Invalid BigNumber: "+e)},E.maximum=E.max=function(){return C(arguments,f.lt)},E.minimum=E.min=function(){return C(arguments,f.gt)},E.random=(i=9007199254740992*Math.random()&2097151?function(){return mathfloor$2(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,s,a=0,c=[],u=new E(l);if(null==e?e=d:intCheck$2(e,0,MAX$3),o=mathceil$2(e/LOG_BASE$2),y)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(s=131072*t[a]+(t[a+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[a]=r[0],t[a+1]=r[1]):(c.push(s%1e14),a+=2);a=o/2}else{if(!crypto.randomBytes)throw y=!1,Error(bignumberError$2+"crypto unavailable");for(t=crypto.randomBytes(o*=7);a<o;)(s=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(c.push(s%1e14),a+=7);a=o/7}if(!y)for(;a<o;)(s=i())<9e15&&(c[a++]=s%1e14);for(o=c[--a],e%=LOG_BASE$2,o&&e&&(s=POWS_TEN$2[LOG_BASE$2-e],c[a]=mathfloor$2(o/s)*s);0===c[a];c.pop(),a--);if(a<0)c=[n=0];else{for(n=-1;0===c[0];c.splice(0,1),n-=LOG_BASE$2);for(a=1,s=c[0];s>=10;s/=10,a++);a<LOG_BASE$2&&(n-=LOG_BASE$2-a)}return u.e=n,u.c=c,u}),E.sum=function(){for(var e=1,t=arguments,r=new E(t[0]);e<t.length;)r=r.plus(t[e++]);return r},r=function(){function e(e,t,r,n){for(var i,o,s=[0],a=0,c=e.length;a<c;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(r,n,i,o,s){var a,c,u,f,l,p,b,m,g=r.indexOf("."),y=d,v=h;for(g>=0&&(f=_,_=0,r=r.replace(".",""),p=(m=new E(n)).pow(r.length-g),_=f,m.c=e(toFixedPoint$2(coeffToString$2(p.c),p.e,"0"),10,i,"0123456789"),m.e=m.c.length),u=f=(b=e(r,n,i,s?(a=S,"0123456789"):(a="0123456789",S))).length;0==b[--f];b.pop());if(!b[0])return a.charAt(0);if(g<0?--u:(p.c=b,p.e=u,p.s=o,b=(p=t(p,m,y,v,i)).c,l=p.r,u=p.e),g=b[c=u+y+1],f=i/2,l=l||c<0||null!=b[c+1],l=v<4?(null!=g||l)&&(0==v||v==(p.s<0?3:2)):g>f||g==f&&(4==v||l||6==v&&1&b[c-1]||v==(p.s<0?8:7)),c<1||!b[0])r=l?toFixedPoint$2(a.charAt(1),-y,a.charAt(0)):a.charAt(0);else{if(b.length=c,l)for(--i;++b[--c]>i;)b[c]=0,c||(++u,b=[1].concat(b));for(f=b.length;!b[--f];);for(g=0,r="";g<=f;r+=a.charAt(b[g++]));r=toFixedPoint$2(r,u,a.charAt(0))}return r}}(),t=function(){function e(e,t,r){var n,i,o,s,a=0,c=e.length,u=t%SQRT_BASE$2,f=t/SQRT_BASE$2|0;for(e=e.slice();c--;)a=((i=u*(o=e[c]%SQRT_BASE$2)+(n=f*o+(s=e[c]/SQRT_BASE$2|0)*u)%SQRT_BASE$2*SQRT_BASE$2+a)/r|0)+(n/SQRT_BASE$2|0)+f*s,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,s,a){var c,u,f,l,d,h,p,b,m,g,y,v,_,$,S,w,C,A=n.s==i.s?1:-1,T=n.c,I=i.c;if(!(T&&T[0]&&I&&I[0]))return new E(n.s&&i.s&&(T?!I||T[0]!=I[0]:I)?T&&0==T[0]||!I?0*A:A/0:NaN);for(m=(b=new E(A)).c=[],A=o+(u=n.e-i.e)+1,a||(a=BASE$2,u=bitFloor$2(n.e/LOG_BASE$2)-bitFloor$2(i.e/LOG_BASE$2),A=A/LOG_BASE$2|0),f=0;I[f]==(T[f]||0);f++);if(I[f]>(T[f]||0)&&u--,A<0)m.push(1),l=!0;else{for($=T.length,w=I.length,f=0,A+=2,(d=mathfloor$2(a/(I[0]+1)))>1&&(I=e(I,d,a),T=e(T,d,a),w=I.length,$=T.length),_=w,y=(g=T.slice(0,w)).length;y<w;g[y++]=0);C=I.slice(),C=[0].concat(C),S=I[0],I[1]>=a/2&&S++;do{if(d=0,(c=t(I,g,w,y))<0){if(v=g[0],w!=y&&(v=v*a+(g[1]||0)),(d=mathfloor$2(v/S))>1)for(d>=a&&(d=a-1),p=(h=e(I,d,a)).length,y=g.length;1==t(h,g,p,y);)d--,r(h,w<p?C:I,p,a),p=h.length,c=1;else 0==d&&(c=d=1),p=(h=I.slice()).length;if(p<y&&(h=[0].concat(h)),r(g,h,y,a),y=g.length,-1==c)for(;t(I,g,w,y)<1;)d++,r(g,w<y?C:I,y,a),y=g.length}else 0===c&&(d++,g=[0]);m[f++]=d,g[0]?g[y++]=T[_]||0:(g=[T[_]],y=1)}while((_++<$||null!=g[0])&&A--);l=null!=g[0],m[0]||m.splice(0,1)}if(a==BASE$2){for(f=1,A=m[0];A>=10;A/=10,f++);k(b,o+(b.e=f+u*LOG_BASE$2-1)+1,s,l)}else b.e=u,b.r=+l;return b}}(),o=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,a=/^\.([^.]+)$/,c=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(e,t,r,n){var i,f=r?t:t.replace(u,"");if(c.test(f))e.s=isNaN(f)?null:f<0?-1:1;else{if(!r&&(f=f.replace(o,function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t}),n&&(i=n,f=f.replace(s,"$1").replace(a,"0.$1")),t!=f))return new E(f,i);if(E.DEBUG)throw Error(bignumberError$2+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},f.absoluteValue=f.abs=function(){var e=new E(this);return e.s<0&&(e.s=1),e},f.comparedTo=function(e,t){return compare$2(this,new E(e,t))},f.decimalPlaces=f.dp=function(e,t){var r,n,i,o=this;if(null!=e)return intCheck$2(e,0,MAX$3),null==t?t=h:intCheck$2(t,0,8),k(new E(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-bitFloor$2(this.e/LOG_BASE$2))*LOG_BASE$2,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},f.dividedBy=f.div=function(e,r){return t(this,new E(e,r),d,h)},f.dividedToIntegerBy=f.idiv=function(e,r){return t(this,new E(e,r),0,1)},f.exponentiatedBy=f.pow=function(e,t){var r,n,i,o,s,a,c,u,f=this;if((e=new E(e)).c&&!e.isInteger())throw Error(bignumberError$2+"Exponent not an integer: "+T(e));if(null!=t&&(t=new E(t)),s=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return u=new E(Math.pow(+T(f),s?2-isOdd$2(e):+T(e))),t?u.mod(t):u;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new E(NaN);(n=!a&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||s&&f.c[1]>=24e7:f.c[0]<8e13||s&&f.c[0]<=9999975e7)))return o=f.s<0&&isOdd$2(e)?-0:0,f.e>-1&&(o=1/o),new E(a?1/o:o);_&&(o=mathceil$2(_/LOG_BASE$2+2))}for(s?(r=new E(.5),a&&(e.s=1),c=isOdd$2(e)):c=(i=Math.abs(+T(e)))%2,u=new E(l);;){if(c){if(!(u=u.times(f)).c)break;o?u.c.length>o&&(u.c.length=o):n&&(u=u.mod(t))}if(i){if(0===(i=mathfloor$2(i/2)))break;c=i%2}else if(k(e=e.times(r),e.e+1,1),e.e>14)c=isOdd$2(e);else{if(0===(i=+T(e)))break;c=i%2}f=f.times(f),o?f.c&&f.c.length>o&&(f.c.length=o):n&&(f=f.mod(t))}return n?u:(a&&(u=l.div(u)),t?u.mod(t):o?k(u,_,h,void 0):u)},f.integerValue=function(e){var t=new E(this);return null==e?e=h:intCheck$2(e,0,8),k(t,t.e+1,e)},f.isEqualTo=f.eq=function(e,t){return 0===compare$2(this,new E(e,t))},f.isFinite=function(){return!!this.c},f.isGreaterThan=f.gt=function(e,t){return compare$2(this,new E(e,t))>0},f.isGreaterThanOrEqualTo=f.gte=function(e,t){return 1===(t=compare$2(this,new E(e,t)))||0===t},f.isInteger=function(){return!!this.c&&bitFloor$2(this.e/LOG_BASE$2)>this.c.length-2},f.isLessThan=f.lt=function(e,t){return compare$2(this,new E(e,t))<0},f.isLessThanOrEqualTo=f.lte=function(e,t){return-1===(t=compare$2(this,new E(e,t)))||0===t},f.isNaN=function(){return!this.s},f.isNegative=function(){return this.s<0},f.isPositive=function(){return this.s>0},f.isZero=function(){return!!this.c&&0==this.c[0]},f.minus=function(e,t){var r,n,i,o,s=this,a=s.s;if(t=(e=new E(e,t)).s,!a||!t)return new E(NaN);if(a!=t)return e.s=-t,s.plus(e);var c=s.e/LOG_BASE$2,u=e.e/LOG_BASE$2,f=s.c,l=e.c;if(!c||!u){if(!f||!l)return f?(e.s=-t,e):new E(l?s:NaN);if(!f[0]||!l[0])return l[0]?(e.s=-t,e):new E(f[0]?s:3==h?-0:0)}if(c=bitFloor$2(c),u=bitFloor$2(u),f=f.slice(),a=c-u){for((o=a<0)?(a=-a,i=f):(u=c,i=l),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(o=(a=f.length)<(t=l.length))?a:t,a=t=0;t<n;t++)if(f[t]!=l[t]){o=f[t]<l[t];break}if(o&&(i=f,f=l,l=i,e.s=-e.s),(t=(n=l.length)-(r=f.length))>0)for(;t--;f[r++]=0);for(t=BASE$2-1;n>a;){if(f[--n]<l[n]){for(r=n;r&&!f[--r];f[r]=t);--f[r],f[n]+=BASE$2}f[n]-=l[n]}for(;0==f[0];f.splice(0,1),--u);return f[0]?A(e,f,u):(e.s=3==h?-1:1,e.c=[e.e=0],e)},f.modulo=f.mod=function(e,r){var n,i,o=this;return e=new E(e,r),!o.c||!e.s||e.c&&!e.c[0]?new E(NaN):!e.c||o.c&&!o.c[0]?new E(o):(9==v?(i=e.s,e.s=1,n=t(o,e,0,3),e.s=i,n.s*=i):n=t(o,e,0,v),(e=o.minus(n.times(e))).c[0]||1!=v||(e.s=o.s),e)},f.multipliedBy=f.times=function(e,t){var r,n,i,o,s,a,c,u,f,l,d,h,p,b,m,g=this,y=g.c,v=(e=new E(e,t)).c;if(!(y&&v&&y[0]&&v[0]))return!g.s||!e.s||y&&!y[0]&&!v||v&&!v[0]&&!y?e.c=e.e=e.s=null:(e.s*=g.s,y&&v?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=bitFloor$2(g.e/LOG_BASE$2)+bitFloor$2(e.e/LOG_BASE$2),e.s*=g.s,(c=y.length)<(l=v.length)&&(p=y,y=v,v=p,i=c,c=l,l=i),i=c+l,p=[];i--;p.push(0));for(b=BASE$2,m=SQRT_BASE$2,i=l;--i>=0;){for(r=0,d=v[i]%m,h=v[i]/m|0,o=i+(s=c);o>i;)r=((u=d*(u=y[--s]%m)+(a=h*u+(f=y[s]/m|0)*d)%m*m+p[o]+r)/b|0)+(a/m|0)+h*f,p[o--]=u%b;p[o]=r}return r?++n:p.splice(0,1),A(e,p,n)},f.negated=function(){var e=new E(this);return e.s=-e.s||null,e},f.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new E(e,t)).s,!i||!t)return new E(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/LOG_BASE$2,s=e.e/LOG_BASE$2,a=n.c,c=e.c;if(!o||!s){if(!a||!c)return new E(i/0);if(!a[0]||!c[0])return c[0]?e:new E(a[0]?n:0*i)}if(o=bitFloor$2(o),s=bitFloor$2(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/BASE$2|0,a[t]=BASE$2===a[t]?0:a[t]%BASE$2;return i&&(a=[i].concat(a),++s),A(e,a,s)},f.precision=f.sd=function(e,t){var r,n,i,o=this;if(null!=e&&e!==!!e)return intCheck$2(e,1,MAX$3),null==t?t=h:intCheck$2(t,0,8),k(new E(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*LOG_BASE$2+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},f.shiftedBy=function(e){return intCheck$2(e,-MAX_SAFE_INTEGER$4,MAX_SAFE_INTEGER$4),this.times("1e"+e)},f.squareRoot=f.sqrt=function(){var e,r,n,i,o,s=this,a=s.c,c=s.s,u=s.e,f=d+4,l=new E("0.5");if(1!==c||!a||!a[0])return new E(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+T(s)))||c==1/0?(((r=coeffToString$2(a)).length+u)%2==0&&(r+="0"),c=Math.sqrt(+r),u=bitFloor$2((u+1)/2)-(u<0||u%2),n=new E(r=c==1/0?"1e"+u:(r=c.toExponential()).slice(0,r.indexOf("e")+1)+u)):n=new E(c+""),n.c[0])for((c=(u=n.e)+f)<3&&(c=0);;)if(o=n,n=l.times(o.plus(t(s,o,f,1))),coeffToString$2(o.c).slice(0,c)===(r=coeffToString$2(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(r=r.slice(c-3,c+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(k(n,n.e+d+2,1),e=!n.times(n).eq(s));break}if(!i&&(k(o,o.e+d+2,0),o.times(o).eq(s))){n=o;break}f+=4,c+=4,i=1}return k(n,n.e+d+1,h,e)},f.toExponential=function(e,t){return null!=e&&(intCheck$2(e,0,MAX$3),e++),w(this,e,t,1)},f.toFixed=function(e,t){return null!=e&&(intCheck$2(e,0,MAX$3),e=e+this.e+1),w(this,e,t)},f.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=$;else if("object"!=typeof r)throw Error(bignumberError$2+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,s=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",f=s[0],l=s[1],d=i.s<0,h=d?f.slice(1):f,p=h.length;if(c&&(o=a,a=c,c=o,p-=o),a>0&&p>0){for(o=p%a||a,f=h.substr(0,o);o<p;o+=a)f+=u+h.substr(o,a);c>0&&(f+=u+h.slice(o)),d&&(f="-"+f)}n=l?f+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):f}return(r.prefix||"")+n+(r.suffix||"")},f.toFraction=function(e){var r,n,i,o,s,a,c,u,f,d,p,b,m=this,y=m.c;if(null!=e&&(!(c=new E(e)).isInteger()&&(c.c||1!==c.s)||c.lt(l)))throw Error(bignumberError$2+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+T(c));if(!y)return new E(m);for(r=new E(l),f=n=new E(l),i=u=new E(l),b=coeffToString$2(y),s=r.e=b.length-m.e-1,r.c[0]=POWS_TEN$2[(a=s%LOG_BASE$2)<0?LOG_BASE$2+a:a],e=!e||c.comparedTo(r)>0?s>0?r:f:c,a=g,g=1/0,c=new E(b),u.c[0]=0;d=t(c,r,0,1),1!=(o=n.plus(d.times(i))).comparedTo(e);)n=i,i=o,f=u.plus(d.times(o=f)),u=o,r=c.minus(d.times(o=r)),c=o;return o=t(e.minus(n),i,0,1),u=u.plus(o.times(f)),n=n.plus(o.times(i)),u.s=f.s=m.s,p=t(f,i,s*=2,h).minus(m).abs().comparedTo(t(u,n,s,h).minus(m).abs())<1?[f,i]:[u,n],g=a,p},f.toNumber=function(){return+T(this)},f.toPrecision=function(e,t){return null!=e&&intCheck$2(e,1,MAX$3),w(this,e,t,2)},f.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=p||o>=b?toExponential$2(coeffToString$2(n.c),o):toFixedPoint$2(coeffToString$2(n.c),o,"0"):10===e?t=toFixedPoint$2(coeffToString$2((n=k(new E(n),d+o+1,h)).c),n.e,"0"):(intCheck$2(e,2,S.length,"Base"),t=r(toFixedPoint$2(coeffToString$2(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},f.valueOf=f.toJSON=function(){return T(this)},f._isBigNumber=!0,f[Symbol.toStringTag]="BigNumber",f[Symbol.for("nodejs.util.inspect.custom")]=f.valueOf,null!=e&&E.set(e),E}function bitFloor$2(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString$2(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=LOG_BASE$2-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function compare$2(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,c=e.e,u=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=c==u,!i||!o)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=o.length)?c:u,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return c==u?0:c>u^r?1:-1}function intCheck$2(e,t,r,n){if(e<t||e>r||e!==mathfloor$2(e))throw Error(bignumberError$2+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function isOdd$2(e){var t=e.c.length-1;return bitFloor$2(e.e/LOG_BASE$2)==t&&e.c[t]%2!=0}function toExponential$2(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint$2(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var BigNumber$2=clone$5(),bignumber$3=Object.freeze({BigNumber:BigNumber$2,default:BigNumber$2}),movingAverage=createCommonjsModule(function(e,t){const r=Math.exp;e.exports=function(e){if("number"!=typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let t,n,i=0,o=0,s=0,a={};return a.push=function(a,c){if(n){const u=1-r(-(a-n)/e),f=c-t;t=u*c+(1-u)*t,i=(1-u)*(i+f*(u*f)),o=Math.sqrt(i),s=t+u*f}else t=c;n=a},a.movingAverage=function(){return t},a.variance=function(){return i},a.deviation=function(){return o},a.forecast=function(){return s},a}}),Big$1=getCjsExportFromNamespace(bignumber$3);class Stats extends events$1{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach(e=>{this._stats[e]=Big$1(0),this._movingAverages[e]={},this._options.movingAverageIntervals.forEach(t=>{(this._movingAverages[e][t]=movingAverage(t)).push(this._frequencyLastTime,0)})}),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const t=e=this._queue.shift();this._applyOp(t)}this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;Object.keys(this._stats).forEach(r=>{this._updateFrequencyFor(r,t,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,t,r){const n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const i=n/t*1e3;let o=this._movingAverages[e];o||(o=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach(e=>{let t=o[e];t||(t=o[e]=movingAverage(e)),t.push(r,i)})}_applyOp(e){const t=e[0],r=e[1];if("number"!=typeof r)throw new Error("invalid increment number:",r);let n;n=this._stats.hasOwnProperty(t)?this._stats[t]:this._stats[t]=Big$1(0),this._stats[t]=n.plus(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}var stat=Stats;const defaultOptions$2={movingAverageIntervals:[6e4,3e5,9e5]};class Stats$1 extends events$1{constructor(e,t){super();const r=Object.assign({},defaultOptions$2,t);if("number"!=typeof r.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!=typeof r.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=e,this._options=r,this._enabled=this._options.enabled,this._global=new stat(e,r),this._global.on("update",e=>this.emit("update",e)),this._peers=new Map}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(let e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){return e.toB58String&&(e=e.toB58String()),this._peers.get(e)}push(e,t,r){if(this._enabled&&(this._global.push(t,r),e)){let n=this._peers.get(e);n||(n=new stat(this._initialCounters,this._options),this._peers.set(e,n)),n.push(t,r)}}disconnected(e){const t=e.toB58String(),r=this._peers.get(t);r&&(r.stop(),this._peers.delete(t))}}var stats=Stats$1;const logger$6=utils$x.logger,defaultOptions$3={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},statsKeys=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"];class Bitswap{constructor(e,t,r){this._libp2p=e,this._log=logger$6(this.peerInfo.id),this._options=Object.assign({},defaultOptions$3,r),this._stats=new stats(statsKeys,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new network(e,this,{},this._stats),this.blockstore=t,this.engine=new decisionEngine(this.peerInfo.id,t,this.network,this._stats),this.wm=new wantManager(this.peerInfo.id,this.network,this._stats),this.notifications=new notifications(this.peerInfo.id)}get peerInfo(){return this._libp2p.peerInfo}_receiveMessage(e,t,r){this.engine.messageReceived(e,t,n=>{if(n&&this._log("failed to receive message",t),0===t.blocks.size)return r();const i=Array.from(t.blocks.values()),o=i.filter(e=>this.wm.wantlist.contains(e.cid)).map(e=>e.cid);this.wm.cancelWants(o),each(i,(t,r)=>{const n=o.includes(t.cid);this._handleReceivedBlock(e,t,n,r)},r)})}_handleReceivedBlock(e,t,r,n){this._log("received block"),waterfall([e=>this.blockstore.has(t.cid,e),(n,i)=>{if(this._updateReceiveCounters(e.toB58String(),t,n),n||!r)return nextTick(i);this._putBlock(t,i)}],n)}_updateReceiveCounters(e,t,r){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",t.data.length),r&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",t.data.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}_putBlock(e,t){this.blockstore.put(e,r=>{if(r)return t(r);this.notifications.hasBlock(e),this.network.provide(e.cid,e=>{e&&this._log.error("Failed to provide: %s",e.message)}),this.engine.receivedBlocks([e.cid]),t()})}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}get(e,t){this.getMany([e],(e,r)=>{if(e)return t(e);r&&r.length>0?t(null,r[0]):t()})}getMany(e,t){let r=e.length;const n=[];let i=!1;const o=(e,t)=>{n.push(e),this.notifications.wantBlock(e,r=>{this.wm.cancelWants([e]),t(null,r)},()=>{this.wm.cancelWants([e]),t(null,void 0)}),r||this.wm.wantBlocks(n)};map$2(e,(t,s)=>{waterfall([e=>this.blockstore.has(t,e),(s,a)=>{if(r--,s)return r||this.wm.wantBlocks(n),this.blockstore.get(t,a);i||(i=!0,this.network.findAndConnect(e[0],e=>{e&&this._log.error(e)})),o(t,a)}],s)},t)}unwant(e){Array.isArray(e)||(e=[e]),this.wm.unwantBlocks(e),e.forEach(e=>this.notifications.unwantBlock(e))}cancelWants(e){Array.isArray(e)||(e=[e]),this.wm.cancelWants(e)}put(e,t){this._log("putting block"),waterfall([t=>this.blockstore.has(e.cid,t),(t,r)=>{if(t)return nextTick(r);this._putBlock(e,r)}],t)}putMany(e,t){waterfall([t=>reject(e,(e,t)=>{this.blockstore.has(e.cid,t)},t),(e,t)=>this.blockstore.putMany(e,r=>{if(r)return t(r);e.forEach(e=>{this.notifications.hasBlock(e),this.engine.receivedBlocks([e.cid]),this.network.provide(e.cid,e=>{e&&this._log.error("Failed to provide: %s",e.message)})}),t()})],t)}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}start(e){series_1([e=>this.wm.start(e),e=>this.network.start(e),e=>this.engine.start(e)],e)}stop(e){this._stats.stop(),series_1([e=>this.wm.stop(e),e=>this.network.stop(e),e=>this.engine.stop(e)],e)}}var src$N=Bitswap,s$7=1e3,m$5=60*s$7,h$3=60*m$5,d$3=24*h$3,w$3=7*d$3,y$3=365.25*d$3,ms$3=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$7(e);if("number"===r&&isFinite(e))return t.long?fmtLong$3(e):fmtShort$3(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$7(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$3;case"weeks":case"week":case"w":return r*w$3;case"days":case"day":case"d":return r*d$3;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$3;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$5;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$7;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$3(e){var t=Math.abs(e);return t>=d$3?Math.round(e/d$3)+"d":t>=h$3?Math.round(e/h$3)+"h":t>=m$5?Math.round(e/m$5)+"m":t>=s$7?Math.round(e/s$7)+"s":e+"ms"}function fmtLong$3(e){var t=Math.abs(e);return t>=d$3?plural$3(e,t,d$3,"day"):t>=h$3?plural$3(e,t,h$3,"hour"):t>=m$5?plural$3(e,t,m$5,"minute"):t>=s$7?plural$3(e,t,s$7,"second"):e+" ms"}function plural$3(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}var receptacle=Receptacle,cache=Receptacle.prototype,counter$1=new Date%1e9;function getUID(){return(1e9*Math.random()>>>0)+counter$1++}function Receptacle(e){e=e||{},this.id=e.id||getUID(),this.max=e.max||1/0,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,r,n=this.items.length;n--;)t=this.items[n],r=new Date(t.expires)-new Date,this._lookup[t.key]=t,r>0?this.expire(t.key,r):r<=0&&this.delete(t.key)}cache.has=function(e){return e in this._lookup},cache.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},cache.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},cache.set=function(e,t,r){var n=this._lookup[e],i=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),r&&("ttl"in r&&this.expire(e,r.ttl),"meta"in r&&(i.meta=r.meta),r.refresh&&(i.refresh=r.ttl)),this},cache.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},cache.expire=function(e,t){var r=t||0,n=this._lookup[e];if(!n)return this;if("string"==typeof r&&(r=ms$3(t)),"number"!=typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(n.timeout),n.timeout=setTimeout(this.delete.bind(this,n.key),r),n.expires=Number(new Date)+r,this},cache.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},cache.toJSON=function(){for(var e,t=new Array(this.items.length),r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}};var RFC4648="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",RFC4648_HEX="0123456789ABCDEFGHIJKLMNOPQRSTUV",CROCKFORD="0123456789ABCDEFGHJKMNPQRSTVWXYZ",base32Encode=function(e,t,r){var n,i;switch(r=r||{},t){case"RFC3548":case"RFC4648":n=RFC4648,i=!0;break;case"RFC4648-HEX":n=RFC4648_HEX,i=!0;break;case"Crockford":n=CROCKFORD,i=!1;break;default:throw new Error("Unknown base32 variant: "+t)}for(var o=void 0!==r.padding?r.padding:i,s=e.byteLength,a=new Uint8Array(e),c=0,u=0,f="",l=0;l<s;l++)for(u=u<<8|a[l],c+=8;c>=5;)f+=n[u>>>c-5&31],c-=5;if(c>0&&(f+=n[u<<5-c&31]),o)for(;f.length%8!=0;)f+="=";return f},timestamp=createCommonjsModule(function(e){!function(){e.exports=y;var t=86400,r=3200,n=146097*r/400,i=t*n,o=1e3*i,s=1e11*t,a=16777216,c=4294967296,u=1e6,f=1e9,l="000000000",d=Math.trunc||function(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!=1/0)?-0:t},h=y.prototype;y.fromDate=function(e){return new y(+e)},y.fromInt64BE=E(0,1,2,3,0,4),y.fromInt64LE=E(3,2,1,0,4,0),y.fromString=function(e){var t,r=new y,n=(e+="").replace(/^\s*[+\-]?\d+/,function(e){var t=+e,n=1970+(t-1970)%400;return r.year=t-n,n}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(e,r,n){return r<0&&(n*=-1),t=6e4*(60*+r+ +n),""}).replace(/\.\d+$/,function(e){return r.nano=+(e+l).substr(1,9),""}).split(/\D+/);n.length>1?n[1]--:n[1]=0;if(r.time=t=Date.UTC.apply(Date,n)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return v(r)},y.fromTimeT=function(e){return $(e,0)},h.year=0,h.time=0,h.nano=0,h.addNano=function(e){return this.nano+=+e||0,this},h.getNano=function(){var e=v(this);return(e.time%1e3*u+ +e.nano+f)%f},h.getTimeT=function(){var e=v(this),i=Math.floor(e.time/1e3),o=e.year;o&&(i+=o*n*t/r);return i},h.getYear=function(){return this.toDate().getUTCFullYear()+this.year},h.toDate=function(){return _(v(this).time)},h.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},h.toString=function(e){var t=this,r=t.toDate(),n={H:function(){return C(r.getUTCHours())},L:function(){return A(r.getUTCMilliseconds(),3)},M:function(){return C(r.getUTCMinutes())},N:function(){return A(t.getNano(),9)},S:function(){return C(r.getUTCSeconds())},Y:function(){var e=t.getYear();return e>999999?"+"+e:e>9999?"+"+A(e,6):e>=0?A(e,4):e>=-999999?"-"+A(-e,6):e},a:function(){return m[r.getUTCDay()]},b:function(){return b[r.getUTCMonth()]},d:function(){return C(r.getUTCDate())},e:function(){return function(e){return(e>9?"":" ")+(0|e)}(r.getUTCDate())},m:function(){return C(r.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,function(t){var r=t[1],i=g[r],o=n[r];return i?e(i):o?o():t})}(e||p)},h.writeInt64BE=S(0,1,2,3,0,4),h.writeInt64LE=S(3,2,1,0,4,0);var p="%Y-%m-%dT%H:%M:%S.%NZ",b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return y;function y(e,t,r){var n=this;if(!(n instanceof y))return new y(e,t,r);n.time=+e||0,n.nano=+t||0,n.year=+r||0,v(n)}function v(e){var t,n,i=e.year,a=e.time,c=e.nano;if(c<0||u<=c){var f=Math.floor(c/u);c-=f*u,a+=f,t=1}var l=i%r;if(a<-s||s<a||l){(n=d(a/o))&&(i+=n*r,a-=n*o);var h=_(a);h.setUTCFullYear(l+h.getUTCFullYear());var p=(a=+h)+(n=d((i-=l)/r))*o;n&&-s<=p&&p<=s&&(i-=n*r,a=p),t=1}return t&&(e.year=i,e.time=a,e.nano=c),e}function _(e){var t=new Date(0);return t.setTime(e),t}function $(e,t){t|=0,e=+e||0;var n=d((t*=c)/i)+d(e/i),o=t%i+e%i,s=d(o/i);return s&&(n+=s,o-=s*i),new y(1e3*o,0,n*r)}function S(e,i,o,s,a,u){return function(e,i){var o=v(this);e||(e=new Array(8));w(e,i|=0);var s=Math.floor(o.time/1e3),l=o.year*(n*t/r),h=d(l/c)+d(s/c),p=l%c+s%c,b=Math.floor(p/c);b&&(h+=b,p-=b*c);return f(e,i+a,h),f(e,i+u,p),e};function f(t,r,n){t[r+e]=n>>24&255,t[r+i]=n>>16&255,t[r+o]=n>>8&255,t[r+s]=255&n}}function E(e,t,r,n,i,o){return function(e,t){w(e,t|=0);var r=s(e,t+i);return $(s(e,t+o),r)};function s(i,o){return i[o+e]*a+(i[o+t]<<16|i[o+r]<<8|i[o+n])}}function w(e,t){var r=e&&e.length;if(null==r)throw new TypeError("Invalid Buffer");if(r<t+8)throw new RangeError("Out of range")}function C(e){return(e>9?"":"0")+(0|e)}function A(e,t){return(l+(0|e)).substr(-t)}}()}),s$8=1e3,m$6=60*s$8,h$4=60*m$6,d$4=24*h$4,w$4=7*d$4,y$4=365.25*d$4,ms$4=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$8(e);if("number"===r&&isFinite(e))return t.long?fmtLong$4(e):fmtShort$4(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$8(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$4;case"weeks":case"week":case"w":return r*w$4;case"days":case"day":case"d":return r*d$4;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$4;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$6;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$8;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$4(e){var t=Math.abs(e);return t>=d$4?Math.round(e/d$4)+"d":t>=h$4?Math.round(e/h$4)+"h":t>=m$6?Math.round(e/m$6)+"m":t>=s$8?Math.round(e/s$8)+"s":e+"ms"}function fmtLong$4(e){var t=Math.abs(e);return t>=d$4?plural$4(e,t,d$4,"day"):t>=h$4?plural$4(e,t,h$4,"hour"):t>=m$6?plural$4(e,t,m$6,"minute"):t>=s$8?plural$4(e,t,s$8,"second"):e+" ms"}function plural$4(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$3(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$4,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$9=setup$3,browser$3=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$9(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$3=browser$3.log,browser_2$3=browser$3.formatArgs,browser_3$3=browser$3.save,browser_4$3=browser$3.load,browser_5$3=browser$3.useColors,browser_6$3=browser$3.storage,browser_7$3=browser$3.colors,node$6=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$9(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$3=node$6.init,node_2$3=node$6.log,node_3$3=node$6.formatArgs,node_4$3=node$6.save,node_5$3=node$6.load,node_6$3=node$6.useColors,node_7$3=node$6.colors,node_8$3=node$6.inspectOpts,src$O=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$3:e.exports=node$6});const message$1='\nmessage IpnsEntry {\n  enum ValidityType {\n\t\tEOL = 0; // setting an EOL says "this record is valid until..."\n\t}\n\n  required bytes value = 1;\n\trequired bytes signature = 2;\n\n\toptional ValidityType validityType = 3;\n\toptional bytes validity = 4;\n\n\toptional uint64 sequence = 5;\n\n\toptional uint64 ttl = 6;\n\n\t// in order for nodes to properly validate a record upon receipt, they need the public\n\t// key associated with it. For old RSA keys, its easiest if we just send this as part of\n\t// the record itself. For newer ed25519 keys, the public key can be embedded in the\n\t// peerID, making this field unnecessary.\n\toptional bytes pubKey = 7;\n}\n';var ipns_proto=src$i(message$1).IpnsEntry,toRFC3339=e=>{return`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}T${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}:${String(e.getUTCSeconds()).padStart(2,"0")}.${1e3*e.getUTCMilliseconds()*1e3}Z`},parseRFC3339=e=>{const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(!r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,o=parseInt(r[3],10),s=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,o,s,a,c,u))},utils$y={toRFC3339:toRFC3339,parseRFC3339:parseRFC3339},ERR_IPNS_EXPIRED_RECORD="ERR_IPNS_EXPIRED_RECORD",ERR_UNRECOGNIZED_VALIDITY="ERR_UNRECOGNIZED_VALIDITY",ERR_SIGNATURE_CREATION="ERR_SIGNATURE_CREATION",ERR_SIGNATURE_VERIFICATION="ERR_SIGNATURE_VERIFICATION",ERR_UNRECOGNIZED_FORMAT="ERR_UNRECOGNIZED_FORMAT",ERR_PEER_ID_FROM_PUBLIC_KEY="ERR_PEER_ID_FROM_PUBLIC_KEY",ERR_PUBLIC_KEY_FROM_ID="ERR_PUBLIC_KEY_FROM_ID",ERR_UNDEFINED_PARAMETER="ERR_UNDEFINED_PARAMETER",errors$6={ERR_IPNS_EXPIRED_RECORD:ERR_IPNS_EXPIRED_RECORD,ERR_UNRECOGNIZED_VALIDITY:ERR_UNRECOGNIZED_VALIDITY,ERR_SIGNATURE_CREATION:ERR_SIGNATURE_CREATION,ERR_SIGNATURE_VERIFICATION:ERR_SIGNATURE_VERIFICATION,ERR_UNRECOGNIZED_FORMAT:ERR_UNRECOGNIZED_FORMAT,ERR_PEER_ID_FROM_PUBLIC_KEY:ERR_PEER_ID_FROM_PUBLIC_KEY,ERR_PUBLIC_KEY_FROM_ID:ERR_PUBLIC_KEY_FROM_ID,ERR_UNDEFINED_PARAMETER:ERR_UNDEFINED_PARAMETER};const{Key:Key$b}=src$B,log$5=src$O("jsipns");log$5.error=src$O("jsipns:error");const{parseRFC3339:parseRFC3339$1}=utils$y,ID_MULTIHASH_CODE=src.names.id,namespace$1="/ipns/",create$4=(e,t,r,n,i)=>{const o=new timestamp(Date.now()+Number(n)).toString(),s=ipns_proto.ValidityType.EOL;_create(e,t,r,o,s,i)},createWithExpiration=(e,t,r,n,i)=>{const o=ipns_proto.ValidityType.EOL;_create(e,t,r,n,o,i)},_create=(e,t,r,n,i,o)=>{sign(e,t,i,n,(e,s)=>{if(e)return log$5.error("record signature creation failed"),o(Object.assign(new Error("record signature verification failed"),{code:errors$6.ERR_SIGNATURE_CREATION}));const a={value:t,signature:s,validityType:i,validity:n,sequence:r};return log$5(`ipns entry for ${t} created`),o(null,a)})},validate$1=(e,t,r)=>{const{value:n,validityType:i,validity:o}=t,s=ipnsEntryDataForSig(n,i,o);e.verify(s,t.signature,(e,t)=>{if(e||!t)return log$5.error("record signature verification failed"),r(Object.assign(new Error("record signature verification failed"),{code:errors$6.ERR_SIGNATURE_VERIFICATION}));if(i===ipns_proto.ValidityType.EOL){let e;try{e=parseRFC3339$1(o.toString())}catch(e){return log$5.error("unrecognized validity format (not an rfc3339 format)"),r(Object.assign(new Error("unrecognized validity format (not an rfc3339 format)"),{code:errors$6.ERR_UNRECOGNIZED_FORMAT}))}if(e<Date.now())return log$5.error("record has expired"),r(Object.assign(new Error("record has expired"),{code:errors$6.ERR_IPNS_EXPIRED_RECORD}))}else if(i)return log$5.error("unrecognized validity type"),r(Object.assign(new Error("unrecognized validity type"),{code:errors$6.ERR_UNRECOGNIZED_VALIDITY}));return log$5(`ipns entry for ${n} is valid`),r(null,null)})},embedPublicKey=(e,t,r)=>{if(!e||!e.bytes||!t){const e="one or more of the provided parameters are not defined";return log$5.error(e),r(Object.assign(new Error(e),{code:errors$6.ERR_UNDEFINED_PARAMETER}))}src$s.createFromPubKey(e.bytes,(n,i)=>{if(n)return log$5.error(n),r(Object.assign(new Error(n),{code:errors$6.ERR_PEER_ID_FROM_PUBLIC_KEY}));let o;try{o=extractPublicKeyFromId(i)}catch(n){return log$5.error(n),r(Object.assign(new Error(n),{code:errors$6.ERR_PUBLIC_KEY_FROM_ID}))}if(o)return r(null,null);try{t.pubKey=src$u.keys.marshalPublicKey(e)}catch(n){return log$5.error(n),r(n)}r(null,t)})},extractPublicKey=(e,t,r)=>{if(!t||!e){const e="one or more of the provided parameters are not defined";return log$5.error(e),r(Object.assign(new Error(e),{code:errors$6.ERR_UNDEFINED_PARAMETER}))}if(t.pubKey){let e;try{e=src$u.keys.unmarshalPublicKey(t.pubKey)}catch(e){return log$5.error(e),r(e)}return r(null,e)}e.pubKey?r(null,e.pubKey):r(Object.assign(new Error("no public key is available"),{code:errors$6.ERR_UNDEFINED_PARAMETER}))},rawStdEncoding=e=>base32Encode(e,"RFC4648",{padding:!1}),getLocalKey=e=>new Key$b(`/ipns/${rawStdEncoding(e)}`),getIdKeys=e=>{const t=Buffer.from("/pk/"),r=Buffer.from("/ipns/");return{routingPubKey:new Key$b(Buffer.concat([t,e])),pkKey:new Key$b(rawStdEncoding(Buffer.concat([t,e]))),routingKey:new Key$b(Buffer.concat([r,e])),ipnsKey:new Key$b(rawStdEncoding(Buffer.concat([r,e])))}},sign=(e,t,r,n,i)=>{const o=ipnsEntryDataForSig(t,r,n);e.sign(o,(e,t)=>e?i(e):i(null,t))},getValidityType=e=>{if("0"===e.toString())return"EOL";{const t=`unrecognized validity type ${e.toString()}`;throw log$5.error(t),Object.assign(new Error(t),{code:errors$6.ERR_UNRECOGNIZED_VALIDITY})}},ipnsEntryDataForSig=(e,t,r)=>{const n=Buffer.from(e),i=Buffer.from(getValidityType(t)),o=Buffer.from(r);return Buffer.concat([n,o,i])},extractPublicKeyFromId=e=>{const t=src.decode(e.id);return t.code!==ID_MULTIHASH_CODE?null:src$u.keys.unmarshalPublicKey(t.digest)},marshal=ipns_proto.encode,unmarshal=ipns_proto.decode,validator$1={validate:(e,t,r)=>{const n=unmarshal(e),i=t.slice("/ipns/".length);let o;try{o=src$s.createFromBytes(i)}catch(e){return r(e)}extractPublicKey(o,n,(e,t)=>{if(e)return r(e);validate$1(t,n,e=>{if(e)return r(e);r(null,!0)})})},select:(e,t,r)=>{const n=unmarshal(e),i=unmarshal(t),o=n.sequence>i.sequence?0:1;if("function"!=typeof r)return o;r(null,o)}};var src$P={create:create$4,createWithExpiration:createWithExpiration,validate:validate$1,embedPublicKey:embedPublicKey,extractPublicKey:extractPublicKey,getLocalKey:getLocalKey,getIdKeys:getIdKeys,marshal:marshal,unmarshal:unmarshal,validator:validator$1,namespace:"/ipns/",namespaceLength:"/ipns/".length},publisher=createCommonjsModule(function(e,t){const{Key:r}=src$B,n=src$z("ipfs:ipns:publisher");n.error=src$z("ipfs:ipns:publisher:error");const i=36e5;e.exports=class{constructor(e,t){this._routing=e,this._datastore=t}publishWithEOL(e,t,r,i){if(!e||!e.bytes){const e="one or more of the provided parameters are not defined";return n.error(e),i(errCode(new Error(e),"ERR_UNDEFINED_PARAMETER"))}src$s.createFromPrivKey(e.bytes,(n,o)=>{if(n)return i(n);this._updateOrCreateRecord(e,t,r,o,(e,t)=>{if(e)return i(e);this._putRecordToRouting(t,o,i)})})}publish(e,t,r){this.publishWithEOL(e,t,i,r)}_putRecordToRouting(e,t,r){if(!src$s.isPeerId(t)){const e="peerId received is not valid";return n.error(e),r(errCode(new Error(e),"ERR_INVALID_PEER_ID"))}const i=t._pubKey;src$P.embedPublicKey(i,e,(o,s)=>{if(o)return r(o);let a;try{a=src$P.getIdKeys(t.toBytes())}catch(o){return n.error(o),r(o)}series_1([r=>this._publishEntry(a.routingKey,s||e,t,r),e=>this._publishPublicKey(a.routingPubKey,i,t,e)],t=>{if(t)return n.error(t),r(t);r(null,s||e)})})}_publishEntry(e,t,i,o){if(!r.isKey(e)){const e="datastore key does not have a valid format";return n.error(e),o(errCode(new Error(e),"ERR_INVALID_DATASTORE_KEY"))}let s;try{s=src$P.marshal(t)}catch(e){return n.error(e),o(e)}this._routing.put(e.toBuffer(),s,(t,r)=>{if(t){const t=`ipns record for ${e.toString()} could not be stored in the routing`;return n.error(t),o(errCode(new Error(t),"ERR_PUTTING_TO_ROUTING"))}n(`ipns record for ${e.toString()} was stored in the routing`),o(null,r)})}_publishPublicKey(e,t,i,o){if(!r.isKey(e)){const e="datastore key does not have a valid format";return n.error(e),o(errCode(new Error(e),"ERR_INVALID_DATASTORE_KEY"))}if(!t||!t.bytes){const e="one or more of the provided parameters are not defined";return n.error(e),o(errCode(new Error(e),"ERR_UNDEFINED_PARAMETER"))}this._routing.put(e.toBuffer(),t.bytes,(t,r)=>{if(t){const t=`public key for ${e.toString()} could not be stored in the routing`;return n.error(t),o(errCode(new Error(t),"ERR_PUTTING_TO_ROUTING"))}n(`public key for ${e.toString()} was stored in the routing`),o(null,r)})}_getPublished(e,t,r){if(!src$s.isPeerId(e)){const e="peerId received is not valid";return n.error(e),r(errCode(new Error(e),"ERR_INVALID_PEER_ID"))}const i=!1!==(t=t||{}).checkRouting;this._datastore.get(src$P.getLocalKey(e.id),(t,o)=>{if(t){if("ERR_NOT_FOUND"!==t.code){const t=`unexpected error getting the ipns record ${e.id} from datastore`;return n.error(t),r(errCode(new Error(t),"ERR_UNEXPECTED_DATASTORE_RESPONSE"))}if(!i)return r(errCode(t));let o;try{o=src$P.getIdKeys(e.toBytes())}catch(t){return n.error(t),r(t)}this._routing.get(o.routingKey.toBuffer(),(e,t)=>{if(e)return r(e);this._unmarshalData(t,r)})}else this._unmarshalData(o,r)})}_unmarshalData(e,t){let r;try{r=src$P.unmarshal(e)}catch(e){return n.error(e),t(errCode(e,"ERR_INVALID_RECORD_DATA"))}t(null,r)}_updateOrCreateRecord(e,t,r,i,o){if(!src$s.isPeerId(i)){const e="peerId received is not valid";return n.error(e),o(errCode(new Error(e),"ERR_INVALID_PEER_ID"))}this._getPublished(i,{checkRouting:!0},(s,a)=>{if(s&&"ERR_NOT_FOUND"!==s.code){const e=`unexpected error when determining the last published IPNS record for ${i.id}`;return n.error(e),o(errCode(new Error(e),"ERR_DETERMINING_PUBLISHED_RECORD"))}let c=0;a&&void 0!==a.sequence&&(c=a.value.toString()!==t?a.sequence+1:a.sequence),src$P.create(e,t,c,r,(e,r)=>{if(e){const e=`ipns record for ${t} could not be created`;return n.error(e),o(errCode(new Error(e),"ERR_CREATING_IPNS_RECORD"))}const s=src$P.marshal(r);this._datastore.put(src$P.getLocalKey(i.id),s,(e,i)=>{if(e){const e=`ipns record for ${t} could not be stored in the datastore`;return n.error(e),o(errCode(new Error(e),"ERR_STORING_IN_DATASTORE"))}n(`ipns record for ${t} was stored in the datastore`),o(null,r)})})})}}}),republisher=createCommonjsModule(function(e,t){const r=src$z("ipfs:ipns:republisher");r.error=src$z("ipfs:ipns:republisher:error");const n=6e4,i=60*n,o=4*i,s=24*i;e.exports=class{constructor(e,t,r,n,i){this._publisher=e,this._datastore=t,this._peerInfo=r,this._keychain=n,this._options=i,this._republishHandle=null}start(){if(this._republishHandle){const e="already running";throw r.error(e),errCode(new Error(e),"ERR_REPUBLISH_ALREADY_RUNNING")}const e={_onCancel:null,_timeoutId:null,runPeriodically:(t,r)=>{e._timeoutId=setTimeout(()=>{e._timeoutId=null,t(n=>{if(e._onCancel)return e._onCancel();e.runPeriodically(t,n||r)})},r)},cancel:t=>{if(e._timeoutId)return clearTimeout(e._timeoutId),t();e._onCancel=t}},{privKey:t}=this._peerInfo.id,{pass:i}=this._options;e.runPeriodically(e=>{this._republishEntries(t,i,()=>e(o))},n),this._republishHandle=e}stop(e){const t=this._republishHandle;if(!t){const t="not running";return r.error(t),e(errCode(new Error(t),"ERR_REPUBLISH_NOT_RUNNING"))}this._republishHandle=null,t.cancel(e)}_republishEntries(e,t,n){this._republishEntry(e,e=>{if(e){const e="cannot republish entry for the node's private key";r.error(e)}else t?this._keychain.listKeys((e,i)=>{e?r.error(e):each(i,(e,n)=>{waterfall([r=>this._keychain.exportKey(e.name,t,r),(e,r)=>src$u.keys.import(e,t,r)],(e,t)=>{e?r.error(e):this._republishEntry(t,n)})},e=>{e&&r.error(e),n(null)})}):n(null)})}_republishEntry(e,t){if(!e||!e.bytes){const e="one or more of the provided parameters are not defined";return r.error(e),t(errCode(new Error(e),"ERR_UNDEFINED_PARAMETER"))}waterfall([t=>src$s.createFromPrivKey(e.bytes,t),(e,t)=>this._getPreviousValue(e,t)],(r,n)=>{if(r)return t("ERR_NO_ENTRY_FOUND"===r.code?null:r);this._publisher.publishWithEOL(e,n,s,t)})}_getPreviousValue(e,t){if(!src$s.isPeerId(e)){const e="peerId received is not valid";return r.error(e),t(errCode(new Error(e),"ERR_INVALID_PEER_ID"))}this._datastore.get(src$P.getLocalKey(e.id),(n,i)=>{if(n&&n.notFound){const n=`no previous entry for record with id: ${e.id}`;return r.error(n),t(errCode(new Error(n),"ERR_NO_ENTRY_FOUND"))}if(n)return t(n);if(!Buffer.isBuffer(i)){const e="found ipns record that we couldn't process";return r.error(e),t(errCode(new Error(e),"ERR_INVALID_IPNS_RECORD"))}let o;try{o=src$P.unmarshal(i)}catch(n){const e="found ipns record that we couldn't convert to a value";return r.error(e),t(errCode(new Error(e),"ERR_INVALID_IPNS_RECORD"))}t(null,o.value)})}}}),resolver$2=createCommonjsModule(function(e,t){const r=src$z("ipfs:ipns:resolver");r.error=src$z("ipfs:ipns:resolver:error");const n=32;e.exports=class{constructor(e){this._routing=e}resolve(e,t,i){if("function"==typeof t&&(i=t,t={}),"string"!=typeof e){const e="one or more of the provided parameters are not valid";return r.error(e),i(errCode(new Error(e),"ERR_INVALID_PARAMETER"))}const o=(t=t||{}).recursive&&"true"===t.recursive.toString(),s=e.split("/");if(3!==s.length||""!==s[0]){const t=`invalid name syntax for ${e}`;return r.error(t),i(errCode(new Error(t),"ERR_INVALID_NAME_SYNTAX"))}const a=s[2];let c;o&&(c=n),this.resolver(a,c,(t,n)=>{if(t)return i(t);r(`${e} was locally resolved correctly`),i(null,n)})}resolver(e,t,i){if(0===t){const e=`could not resolve name (recursion limit of ${n} exceeded)`;return r.error(e),i(errCode(new Error(e),"ERR_RESOLVE_RECURSION_LIMIT"))}this._resolveName(e,(e,r)=>{if(e)return i(e);const n=r.split("/");if("ipfs"===n[1]||!t)return i(null,r);this.resolver(n[2],t-1,i)})}_resolveName(e,t){let n;try{n=src$s.createFromB58String(e)}catch(e){return t(e)}const{routingKey:i,routingPubKey:o}=src$P.getIdKeys(n.toBytes());this._routing.get(i.toBuffer(),(s,a)=>{if(s){if("ERR_NOT_FOUND"!==s.code){const e=`unexpected error getting the ipns record ${n.id}`;return r.error(e),t(errCode(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_RECORD"))}const o=`record requested was not found for ${e} (${i}) in the network`;return r.error(o),t(errCode(new Error(o),"ERR_NO_RECORD_FOUND"))}let c;try{c=src$P.unmarshal(a)}catch(s){const e="found ipns record that we couldn't convert to a value";return r.error(e),t(errCode(new Error(e),"ERR_INVALID_RECORD_RECEIVED"))}if(c.pubKey)return this._validateRecord(n,c,t);this._routing.get(i.toBuffer(),(i,s)=>{if(i){if("ERR_NOT_FOUND"!==i.code){const e=`unexpected error getting the public key for the ipns record ${n.id}`;return r.error(e),t(errCode(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_PUB_KEY"))}const s=`public key requested was not found for ${e} (${o}) in the network`;return r.error(s),t(errCode(new Error(s),"ERR_NO_RECORD_FOUND"))}try{n.pubKey=src$u.keys.unmarshalPublicKey(s)}catch(i){const e="found public key record that we couldn't convert to a value";return r.error(e),t(errCode(new Error(e),"ERR_INVALID_PUB_KEY_RECEIVED"))}this._validateRecord(n,c,t)})})}_validateRecord(e,t,r){src$P.extractPublicKey(e,t,(e,n)=>{if(e)return r(e);src$P.validate(n,t,e=>{if(e)return r(e);r(null,t.value.toString())})})}}});const log$6=src$z("ipfs:ipns:path");log$6.error=src$z("ipfs:ipns:path:error");const resolvePath=(e,t,r)=>{if(src$w.ipnsPath(t))return log$6(`resolve ipns path ${t}`),e._ipns.resolve(t,r);e.dag.get(t.substring("/ipfs/".length),(e,t)=>e?r(e):r(null,t))};var path$1={resolvePath:resolvePath},ipns=createCommonjsModule(function(e,t){const{createFromPrivKey:r}=src$s,n=src$z("ipfs:ipns");n.error=src$z("ipfs:ipns:error");const i=6e4;(e.exports=class{constructor(e,t,r,n,i){this.publisher=new publisher(e,t),this.republisher=new republisher(this.publisher,t,r,n,i),this.resolver=new resolver$2(e),this.cache=new receptacle({max:1e3}),this.routing=e}publish(e,t,o,s){series_1([t=>r(e.bytes,t),r=>this.publisher.publishWithEOL(e,t,o,r)],(e,r)=>{if(e)return n.error(e),s(e);n(`IPNS value ${t} was published correctly`);const a=r[0].toB58String(),c=parseFloat(o),u=c<i?c:i;this.cache.set(a,t,{ttl:u}),n(`IPNS value ${t} was cached correctly`),s(null,{name:a,value:t})})}resolve(e,t,r){if("string"!=typeof e){const e="name received is not valid";return n.error(e),r(errCode(new Error(e),"ERR_INVALID_NAME"))}if("function"==typeof t&&(r=t,t={}),!(t=t||{}).nocache&&!t.recursive){const t=e.split("/")[2],n=this.cache.get(t);if(n)return r(null,{path:n})}this.resolver.resolve(e,t,(t,i)=>{if(t)return n.error(t),r(t);n(`IPNS record from ${e} was resolved correctly`),r(null,{path:i})})}initializeKeyspace(e,t,r){this.publisher.publish(e,t,r)}}).path=path$1}),ipns_1=ipns.path;const namespace$2="/record/",base64urlCode="u";var encodeBase32=e=>src$1.encode("base32",e).slice(1),keyToTopic=e=>{return`/record/${src$1.encode("base64url",e).slice(1).toString()}`},topicToKey=e=>{if("/record/"!==e.substring(0,"/record/".length))throw errCode(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const t=`u${e.substring("/record/".length)}`;return src$1.decode(t).toString()},utils$z={encodeBase32:encodeBase32,keyToTopic:keyToTopic,topicToKey:topicToKey},s$9=1e3,m$7=60*s$9,h$5=60*m$7,d$5=24*h$5,w$5=7*d$5,y$5=365.25*d$5,ms$5=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$9(e);if("number"===r&&isFinite(e))return t.long?fmtLong$5(e):fmtShort$5(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$9(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$5;case"weeks":case"week":case"w":return r*w$5;case"days":case"day":case"d":return r*d$5;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$5;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$7;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$9;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$5(e){var t=Math.abs(e);return t>=d$5?Math.round(e/d$5)+"d":t>=h$5?Math.round(e/h$5)+"h":t>=m$7?Math.round(e/m$7)+"m":t>=s$9?Math.round(e/s$9)+"s":e+"ms"}function fmtLong$5(e){var t=Math.abs(e);return t>=d$5?plural$5(e,t,d$5,"day"):t>=h$5?plural$5(e,t,h$5,"hour"):t>=m$7?plural$5(e,t,m$7,"minute"):t>=s$9?plural$5(e,t,s$9,"second"):e+" ms"}function plural$5(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$4(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$5,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$a=setup$4,browser$4=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$a(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$4=browser$4.log,browser_2$4=browser$4.formatArgs,browser_3$4=browser$4.save,browser_4$4=browser$4.load,browser_5$4=browser$4.useColors,browser_6$4=browser$4.storage,browser_7$4=browser$4.colors,node$7=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$a(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$4=node$7.init,node_2$4=node$7.log,node_3$4=node$7.formatArgs,node_4$4=node$7.save,node_5$4=node$7.load,node_6$4=node$7.useColors,node_7$4=node$7.colors,node_8$4=node$7.inspectOpts,src$Q=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$4:e.exports=node$7}),src$R=createCommonjsModule(function(e,t){const{Key:r}=src$B,{encodeBase32:n,keyToTopic:i,topicToKey:o}=utils$z,s=src$Q("datastore-pubsub:publisher");s.error=src$Q("datastore-pubsub:publisher:error");e.exports=class{constructor(e,t,r,n,i){assert$t.strictEqual(typeof n,"object","missing validator"),assert$t.strictEqual(typeof n.validate,"function","missing validate function"),assert$t.strictEqual(typeof n.select,"function","missing select function"),i&&assert$t.strictEqual(typeof i,"function","invalid subscriptionKeyFn received"),this._pubsub=e,this._datastore=t,this._peerId=r,this._validator=n,this._handleSubscriptionKeyFn=i,this._onMessage=this._onMessage.bind(this)}put(e,t,r){if(!Buffer.isBuffer(e)){const e="datastore key does not have a valid format";return s.error(e),r(errCode(new Error(e),"ERR_INVALID_DATASTORE_KEY"))}if(!Buffer.isBuffer(t)){const e="received value is not a buffer";return s.error(e),r(errCode(new Error(e),"ERR_INVALID_VALUE_RECEIVED"))}const n=i(e);s(`publish value for topic ${n}`),this._pubsub.publish(n,t,r)}get(e,t){if(!Buffer.isBuffer(e)){const e="datastore key does not have a valid format";return s.error(e),t(errCode(new Error(e),"ERR_INVALID_DATASTORE_KEY"))}const r=i(e);this._pubsub.ls((n,i)=>n?t(n):i&&Array.isArray(i)&&i.indexOf(r)>-1?this._getLocal(e,t):void this._pubsub.subscribe(r,this._onMessage,n=>{if(n){const e=`cannot subscribe topic ${r}`;return s.error(e),t(errCode(new Error(e),"ERR_SUBSCRIBING_TOPIC"))}s(`subscribed values for key ${r}`),this._getLocal(e,t)}))}unsubscribe(e){const t=i(e);this._pubsub.unsubscribe(t,this._onMessage)}_getLocal(e,t){const i=new r("/"+n(e),!1);this._datastore.get(i,(e,r)=>{if(e){if("ERR_NOT_FOUND"!==e.code){const e=`unexpected error getting the ipns record for ${i.toString()}`;return s.error(e),t(errCode(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_RECORD"))}const r=`local record requested was not found for ${i.toString()}`;return s.error(r),t(errCode(new Error(r),"ERR_NOT_FOUND"))}if(!Buffer.isBuffer(r)){const e="found record that we couldn't convert to a value";return s.error(e),t(errCode(new Error(e),"ERR_INVALID_RECORD_RECEIVED"))}t(null,r)})}_onMessage(e){const{data:t,from:r,topicIDs:n}=e;let i;try{i=o(n[0])}catch(e){return void s.error(e)}s(`message received for ${i} topic`),r!==this._peerId.toB58String()?this._handleSubscriptionKeyFn?this._handleSubscriptionKeyFn(i,(e,r)=>{e?s.error("message discarded by the subscriptionKeyFn"):this._storeIfSubscriptionIsBetter(r,t)}):this._storeIfSubscriptionIsBetter(i,t):s("message discarded as it is from the same peer")}_storeIfSubscriptionIsBetter(e,t){this._isBetter(e,t,(r,n)=>{!r&&n&&this._storeRecord(Buffer.from(e),t)})}_validateRecord(e,t,r){this._validator.validate(e,t,r)}_selectRecord(e,t,r){this._validator.select(e,t,(e,t)=>{if(e)return s.error(e),r(e);r(null,0===t)})}_isBetter(e,t,n){this._validateRecord(t,e,(i,o)=>{if(i||!o){const e="record received through pubsub is not valid";return s.error(e),n(errCode(new Error(e),"ERR_NOT_VALID_RECORD"))}const a=new r(e);this._getLocal(a.toBuffer(),(e,r)=>e?n(null,!0):r.equals(t)?n(null,!1):void this._selectRecord(t,r,n))})}_storeRecord(e,t){const i=new r("/"+n(e),!1);this._datastore.put(i,t,t=>{t?s.error(`record for ${e.toString()} could not be stored in the routing`):s(`record for ${e.toString()} was stored in the datastore`)})}open(e){const t="open function was not implemented yet";return s.error(t),e(errCode(new Error(t),"ERR_NOT_IMPLEMENTED_YET"))}has(e,t){const r="has function was not implemented yet";return s.error(r),t(errCode(new Error(r),"ERR_NOT_IMPLEMENTED_YET"))}delete(e,t){const r="delete function was not implemented yet";return s.error(r),t(errCode(new Error(r),"ERR_NOT_IMPLEMENTED_YET"))}close(e){const t="close function was not implemented yet";return s.error(t),e(errCode(new Error(t),"ERR_NOT_IMPLEMENTED_YET"))}batch(){const e="batch function was not implemented yet";throw s.error(e),errCode(new Error(e),"ERR_NOT_IMPLEMENTED_YET")}query(){const e="query function was not implemented yet";throw s.error(e),errCode(new Error(e),"ERR_NOT_IMPLEMENTED_YET")}}}),pubsubDatastore=createCommonjsModule(function(e,t){const{fromB58String:r,toB58String:n}=src,i=src$z("ipfs:ipns:pubsub");i.error=src$z("ipfs:ipns:pubsub:error");e.exports=classIs(class{constructor(e,t,r){this._pubsub=e,this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new src$R(e,t,r,src$P.validator,this._handleSubscriptionKey)}put(e,t,r){this._pubsubDs.put(e,t,r)}get(e,t){this._pubsubDs.get(e,(r,o)=>{if(e.slice(0,src$P.namespaceLength).toString()===src$P.namespace){const t=e.toString(),r=n(e.slice(src$P.namespaceLength));this._subscriptions[t]=r,i(`subscribed pubsub ${t}: ${r}`)}if(r)return t(r);t(null,o)})}_handleSubscriptionKey(e,t){const n=this._subscriptions[e];if(!n){const r=`key ${e} does not correspond to a subscription`;return i.error(r),t(errCode(new Error(r),"ERR_INVALID_KEY"))}let o;try{o=src$P.getIdKeys(r(n))}catch(e){return i.error(e),t(e)}t(null,o.routingKey.toBuffer())}getSubscriptions(e){return e(null,Object.values(this._subscriptions).filter(Boolean).map(e=>`${src$P.namespace}${e}`))}cancel(e,t){if("string"!=typeof e){const e="received subscription name is not valid";return i.error(e),t(errCode(new Error(e),"ERR_INVALID_SUBSCRIPTION_NAME"))}e.startsWith(src$P.namespace)&&(e=e.substring(src$P.namespaceLength));const r=Object.keys(this._subscriptions).find(t=>this._subscriptions[t]===e);if(!r)return t(null,{canceled:!1});try{const e=Buffer.from(r);this._pubsubDs.unsubscribe(e)}catch(e){return t(e)}this._subscriptions[r]=void 0,i(`unsubscribed pubsub ${r}: ${e}`),t(null,{canceled:!0})}},{className:"IpnsPubsubDatastore",symbolName:"@js-ipfs/ipns/IpnsPubsubDatastore"})}),record_proto="// Record represents a dht record that contains a value\n// for a key value pair\nmessage Record {\n  // The key that references this record\n  bytes key = 1;\n\n  // The actual value this record is storing\n  bytes value = 2;\n\n  // Note: These fields were removed from the Record message\n  // hash of the authors public key\n  // optional bytes author = 3;\n  // A PKI signature for the key+value+author\n  // optional bytes signature = 4;\n\n  // Time the record was received, set by receiver\n  optional string timeReceived = 5;\n}",toRFC3339$1=e=>{return`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}T${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}:${String(e.getUTCSeconds()).padStart(2,"0")}.${1e3*e.getUTCMilliseconds()*1e3}Z`},parseRFC3339$2=e=>{const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(!r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,o=parseInt(r[3],10),s=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,o,s,a,c,u))},utils$A={toRFC3339:toRFC3339$1,parseRFC3339:parseRFC3339$2};const pb=src$i(record_proto).Record;class Record{constructor(e,t,r){e&&assert$t(Buffer.isBuffer(e),"key must be a Buffer"),t&&assert$t(Buffer.isBuffer(t),"value must be a buffer"),this.key=e,this.value=t,this.timeReceived=r}serialize(){return pb.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&utils$A.toRFC3339(this.timeReceived)}}static deserialize(e){const t=pb.decode(e);return Record.fromDeserialized(t)}static fromDeserialized(e){let t;return e.timeReceived&&(t=utils$A.parseRFC3339(e.timeReceived)),new Record(e.key,e.value,t)}}var record=Record,bufferIndexof=function(e,t,r){for(var n=0,i=-1,o=r=r||0;o<e.length;++o)if(e[o]==t[n]){if(-1==i&&(i=o),++n==t.length)break}else i=-1,n=0;return i>-1&&e.length-i<t.length?-1:i},bufferSplit=function(e,t,r){for(var n=-1,i=[],o=r?t.length:0;(n=bufferIndexof(e,t))>-1;)i.push(e.slice(0,n+o)),e=e.slice(n+t.length,e.length);return i.push(e),i};const validatePublicKeyRecord=(e,t,r)=>{const n=e=>setImmediate$1(()=>r(e));if(!Buffer.isBuffer(e))return n(new Error('"key" must be a Buffer'));if(e.length<3)return n(new Error("invalid public key record"));if("/pk/"!==e.slice(0,4).toString())return n(new Error("key was not prefixed with /pk/"));const i=e.slice(4);src$y(t,"sha2-256",(e,t)=>e?n(e):i.equals(t)?void n():n(new Error("public key does not match passed in key")))};var publicKey={func:validatePublicKeyRecord,sign:!1},validators$1={pk:publicKey};const verifyRecord=(e,t,r)=>{const n=t.key,i=bufferSplit(n,Buffer.from("/"));if(i.length<3)return r();const o=e[i[1].toString()];if(!o){return r(errCode(new Error("Invalid record keytype"),"ERR_INVALID_RECORD_KEY_TYPE"))}o.func(n,t.value,r)};var validator$2={verifyRecord:verifyRecord,validators:validators$1};const publicKeySelector=(e,t)=>0;var publicKey$1=publicKeySelector,selectors={pk:publicKey$1};const bestRecord=(e,t,r)=>{if(0===r.length){throw errCode(new Error("No records given"),"ERR_NO_RECORDS_RECEIVED")}const n=bufferSplit(t,Buffer.from("/"));if(n.length<3){throw errCode(new Error("Record key does not have a selector function"),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}const i=e[n[1].toString()];if(!i){const e=`Unrecognized key prefix: ${n[1]}`;throw errCode(new Error(e),"ERR_UNRECOGNIZED_KEY_PREFIX")}return i(t,r)};var selection={bestRecord:bestRecord,selectors:selectors},src$S={Record:record,validator:validator$2,selection:selection},utils$B={encodeBase32:e=>{return src$1.encode("base32",e).slice(1).toString().toUpperCase()},validator:{func:(e,t,r)=>src$P.validator.validate(t,e,r)},selector:(e,t)=>src$P.validator.select(t[0],t[1])},offlineDatastore=createCommonjsModule(function(e,t){const{Key:r}=src$B,{Record:n}=src$S,{encodeBase32:i}=utils$B,o=src$z("ipfs:ipns:offline-datastore");o.error=src$z("ipfs:ipns:offline-datastore:error");e.exports=class{constructor(e){this._repo=e}put(e,t,r){if(!Buffer.isBuffer(e)){const e="Offline datastore key must be a buffer";return o.error(e),r(errCode(new Error(e),"ERR_INVALID_KEY"))}if(!Buffer.isBuffer(t)){const e="Offline datastore value must be a buffer";return o.error(e),r(errCode(new Error(e),"ERR_INVALID_VALUE"))}let i;try{i=this._routingKey(e)}catch(e){const t="Not possible to generate the routing key";return o.error(t),r(errCode(new Error(t),"ERR_GENERATING_ROUTING_KEY"))}const s=new n(e,t);this._repo.datastore.put(i,s.serialize(),r)}get(e,t){if(!Buffer.isBuffer(e)){const e="Offline datastore key must be a buffer";return o.error(e),t(errCode(new Error(e),"ERR_INVALID_KEY"))}let r;try{r=this._routingKey(e)}catch(e){const r="Not possible to generate the routing key";return o.error(r),t(errCode(new Error(r),"ERR_GENERATING_ROUTING_KEY"))}this._repo.datastore.get(r,(e,r)=>{if(e)return t(e);let i;try{i=n.deserialize(r)}catch(e){return o.error(e),t(e)}t(null,i.value)})}_routingKey(e){return new r("/"+i(e),!1)}}});const{TieredDatastore:TieredDatastore$1}=src$C;var config$3=e=>{const t=[];let r;if(get$1(e._options,"EXPERIMENTAL.ipnsPubsub",!1)){const n=e.libp2p.pubsub,i=e._repo.datastore,o=e._peerInfo.id;r=new pubsubDatastore(n,i,o),t.push(r)}if(get$1(e._options,"offline")||!get$1(e._options,"libp2p.dht.enabled",!1)){const r=new offlineDatastore(e._repo);t.push(r)}else t.push(e.libp2p.dht);return new TieredDatastore$1(t)},looper_1=createCommonjsModule(function(e){e.exports=function(e){!function t(){var r=!0,n=!1;do{n=!0,r=!1,e.call(this,function(){n?r=!0:t()}),n=!1}while(r)}()}}),streamToPullStream=createCommonjsModule(function(e,t){function r(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function n(e,t,n){var i,o,s=!1;function a(){o||(o=!0,n&&n(!0===i?null:i))}function c(){s||(s=!0,f(),i?a():e(i=!0,a))}function u(t){f(),i||e(i=t,a)}function f(){t.on("finish",c),t.removeListener("close",c),t.removeListener("error",u)}t.on("close",c),t.on("finish",c),t.on("error",u),process.nextTick(function(){looper_1(function(n){e(null,function(e,o){if(i=i||e,!0===e)return t._isStdio?a():t.end();if(i=i||e)return r(t),a();t._isStdio?t.write(o,function(){n()}):!1===t.write(o)?t.once("drain",n):n()})})})}function i(e){var t,n=[],i=[],o=!1;function s(){for(;(n.length||t)&&i.length;)i.shift()(n.length?null:t,n.shift());!n.length&&o&&(o=!1,e.resume())}return e.on("data",function(t){n.push(t),s(),n.length&&e.pause&&(o=!0,e.pause())}),e.on("end",function(){t=!0,s()}),e.on("close",function(){t=!0,s()}),e.on("error",function(e){t=e,s()}),function(n,o){if(!o)throw new Error("*must* provide cb");if(n){function a(){for(;i.length;)i.shift()(n);o(n)}if(t)return a();e.once("close",a),r(e)}else i.push(o),s()}}var o=i,s=function(e,t){return function(r){return n(r,e,t)}},a=function(e){return i(e)};(t=e.exports=function(e,t){return e.writable&&e.write?e.readable?function(r){return n(r,e,t),i(e)}:s(e,t):a(e)}).sink=s,t.source=a,t.read=o,t.read1=i,t.read2=function(e){var t,r=!1,n=!1;function i(){var r=e.read();if(null!==r&&t){var n=t;t=null,n(null,r)}}return e.on("readable",function(){n=!0,t&&i()}).on("end",function(){r=!0,t&&t(r)}).on("error",function(e){r=e,t&&t(r)}),function(e,o){t=o,r?o(r):n&&i()}},t.duplex=function(e,t){return{source:a(e),sink:s(e,t)}},t.transform=function(e){return function(t){var r=a(e);return s(e)(t),r}}}),streamToPullStream_1=streamToPullStream.sink,streamToPullStream_2=streamToPullStream.source,streamToPullStream_3=streamToPullStream.read,streamToPullStream_4=streamToPullStream.read1,streamToPullStream_5=streamToPullStream.read2,streamToPullStream_6=streamToPullStream.duplex,streamToPullStream_7=streamToPullStream.transform,INFINITY=1/0,MAX_SAFE_INTEGER$5=9007199254740991,MAX_INTEGER=1.7976931348623157e308,NAN=NaN,argsTag$2="[object Arguments]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",stringTag$1="[object String]",symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,reIsUint$1=/^(?:0|[1-9]\d*)$/,freeParseInt=parseInt;function arrayMap$1(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function baseFindIndex$1(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function baseIndexOf$1(e,t,r){if(t!=t)return baseFindIndex$1(e,baseIsNaN$1,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function baseIsNaN$1(e){return e!=e}function baseTimes$1(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function baseValues(e,t){return arrayMap$1(t,function(t){return e[t]})}function overArg$1(e,t){return function(r){return e(t(r))}}var objectProto$6=Object.prototype,hasOwnProperty$7=objectProto$6.hasOwnProperty,objectToString$1=objectProto$6.toString,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,nativeKeys$1=overArg$1(Object.keys,Object),nativeMax=Math.max;function arrayLikeKeys$1(e,t){var r=isArray$5(e)||isArguments$2(e)?baseTimes$1(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!hasOwnProperty$7.call(e,o)||i&&("length"==o||isIndex$1(o,n))||r.push(o);return r}function baseKeys$1(e){if(!isPrototype$1(e))return nativeKeys$1(e);var t=[];for(var r in Object(e))hasOwnProperty$7.call(e,r)&&"constructor"!=r&&t.push(r);return t}function isIndex$1(e,t){return!!(t=null==t?MAX_SAFE_INTEGER$5:t)&&("number"==typeof e||reIsUint$1.test(e))&&e>-1&&e%1==0&&e<t}function isPrototype$1(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$6)}function includes$1(e,t,r,n){e=isArrayLike$2(e)?e:values$1(e),r=r&&!n?toInteger(r):0;var i=e.length;return r<0&&(r=nativeMax(i+r,0)),isString$2(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&baseIndexOf$1(e,t,r)>-1}function isArguments$2(e){return isArrayLikeObject(e)&&hasOwnProperty$7.call(e,"callee")&&(!propertyIsEnumerable$1.call(e,"callee")||objectToString$1.call(e)==argsTag$2)}var isArray$5=Array.isArray;function isArrayLike$2(e){return null!=e&&isLength$1(e.length)&&!isFunction$4(e)}function isArrayLikeObject(e){return isObjectLike$1(e)&&isArrayLike$2(e)}function isFunction$4(e){var t=isObject$3(e)?objectToString$1.call(e):"";return t==funcTag$2||t==genTag$1}function isLength$1(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$5}function isObject$3(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike$1(e){return!!e&&"object"==typeof e}function isString$2(e){return"string"==typeof e||!isArray$5(e)&&isObjectLike$1(e)&&objectToString$1.call(e)==stringTag$1}function isSymbol(e){return"symbol"==typeof e||isObjectLike$1(e)&&objectToString$1.call(e)==symbolTag}function toFinite(e){return e?(e=toNumber(e))===INFINITY||e===-INFINITY?(e<0?-1:1)*MAX_INTEGER:e==e?e:0:0===e?e:0}function toInteger(e){var t=toFinite(e),r=t%1;return t==t?r?t-r:t:0}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject$3(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$3(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}function keys$4(e){return isArrayLike$2(e)?arrayLikeKeys$1(e):baseKeys$1(e)}function values$1(e){return e?baseValues(e,keys$4(e)):[]}var lodash_includes=includes$1,asyncTag$1="[object AsyncFunction]",funcTag$3="[object Function]",genTag$2="[object GeneratorFunction]",nullTag$1="[object Null]",proxyTag$1="[object Proxy]",undefinedTag$1="[object Undefined]",freeGlobal$1="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf$1="object"==typeof self&&self&&self.Object===Object&&self,root$1=freeGlobal$1||freeSelf$1||Function("return this")(),objectProto$7=Object.prototype,hasOwnProperty$8=objectProto$7.hasOwnProperty,nativeObjectToString$2=objectProto$7.toString,Symbol$2=root$1.Symbol,symToStringTag$2=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$1(e){return null==e?void 0===e?undefinedTag$1:nullTag$1:symToStringTag$2&&symToStringTag$2 in Object(e)?getRawTag$1(e):objectToString$2(e)}function getRawTag$1(e){var t=hasOwnProperty$8.call(e,symToStringTag$2),r=e[symToStringTag$2];try{e[symToStringTag$2]=void 0;var n=!0}catch(e){}var i=nativeObjectToString$2.call(e);return n&&(t?e[symToStringTag$2]=r:delete e[symToStringTag$2]),i}function objectToString$2(e){return nativeObjectToString$2.call(e)}function isFunction$5(e){if(!isObject$4(e))return!1;var t=baseGetTag$1(e);return t==funcTag$3||t==genTag$2||t==asyncTag$1||t==proxyTag$1}function isObject$4(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var lodash_isfunction=isFunction$5,sink=function(e){var t,r=!1;function n(n){if(!n)throw new Error("must be passed a readable");t=n,r&&e(t)}return n.resolve=n.ready=n.start=function(i){return r=!0,e=i||e,t&&e(t),n},n},duplex=function(){var e=source(),t=sink();return{source:e,sink:t,resolve:function(r){e.resolve(r.source),t.resolve(r.sink)}}},connection=class{constructor(e,t){this.peerInfo=null,this.conn=duplex(),e?this.setInnerConn(e,t):t&&(this.info=t)}get source(){return this.conn.source}get sink(){return this.conn.sink}getPeerInfo(e){return this.info&&this.info.getPeerInfo?this.info.getPeerInfo(e):this.peerInfo?void e(null,this.peerInfo):e(new Error("Peer Info not set yet"))}setPeerInfo(e){if(this.info&&this.info.setPeerInfo)return this.info.setPeerInfo(e);this.peerInfo=e}getObservedAddrs(e){if(this.info&&this.info.getObservedAddrs)return this.info.getObservedAddrs(e);e(null,[])}setInnerConn(e,t){this.conn.resolve(e),this.info=t||e}},Connection=connection,src$T={Connection:Connection},s$a=1e3,m$8=60*s$a,h$6=60*m$8,d$6=24*h$6,w$6=7*d$6,y$6=365.25*d$6,ms$6=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$a(e);if("number"===r&&isFinite(e))return t.long?fmtLong$6(e):fmtShort$6(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$a(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$6;case"weeks":case"week":case"w":return r*w$6;case"days":case"day":case"d":return r*d$6;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$6;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$8;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$6(e){var t=Math.abs(e);return t>=d$6?Math.round(e/d$6)+"d":t>=h$6?Math.round(e/h$6)+"h":t>=m$8?Math.round(e/m$8)+"m":t>=s$a?Math.round(e/s$a)+"s":e+"ms"}function fmtLong$6(e){var t=Math.abs(e);return t>=d$6?plural$6(e,t,d$6,"day"):t>=h$6?plural$6(e,t,h$6,"hour"):t>=m$8?plural$6(e,t,m$8,"minute"):t>=s$a?plural$6(e,t,s$a,"second"):e+" ms"}function plural$6(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$5(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var o;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=s,a=Number(new Date),c=a-(o||a);i.diff=c,i.prev=o,i.curr=a,o=a,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;u++;var o=r.formatters[n];if("function"==typeof o){var s=t[u];e=o.call(i,s),t.splice(u,1),u--}return e}),r.formatArgs.call(i,t),(i.log||r.log).apply(i,t)}}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$6,Object.keys(e).forEach(function(t){r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$b=setup$5,browser$5=createCommonjsModule(function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$b(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$5=browser$5.log,browser_2$5=browser$5.formatArgs,browser_3$5=browser$5.save,browser_4$5=browser$5.load,browser_5$5=browser$5.useColors,browser_6$5=browser$5.storage,browser_7$5=browser$5.colors,node$8=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return process.stderr.write(util$j.format.apply(util$j,arguments)+"\n")},t.formatArgs=function(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var r=supportsColor_1;r&&(r.stderr||r).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$b(t);var n=e.exports.formatters;n.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$5=node$8.init,node_2$5=node$8.log,node_3$5=node$8.formatArgs,node_4$5=node$8.save,node_5$5=node$8.load,node_6$5=node$8.useColors,node_7$5=node$8.colors,node_8$5=node$8.inspectOpts,src$U=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$5:e.exports=node$8}),lodash_map=createCommonjsModule(function(e,t){var r=200,n="Expected a function",i="__lodash_hash_undefined__",o=1,s=2,a=1/0,c=9007199254740991,u="[object Arguments]",f="[object Array]",l="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Function]",b="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Object]",v="[object RegExp]",_="[object Set]",$="[object String]",S="[object Symbol]",E="[object ArrayBuffer]",w="[object DataView]",C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/,k=/^\./,T=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,I=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R[u]=R[f]=R[E]=R[l]=R[w]=R[d]=R[h]=R[p]=R[m]=R[g]=R[y]=R[v]=R[_]=R[$]=R["[object WeakMap]"]=!1;var O="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,N="object"==typeof self&&self&&self.Object===Object&&self,x=O||N||Function("return this")(),L=t&&!t.nodeType&&t,M=L&&e&&!e.nodeType&&e,D=M&&M.exports===L&&O.process,F=function(){try{return D&&D.binding("util")}catch(e){}}(),j=F&&F.isTypedArray;function U(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function H(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function K(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function G(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function V(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var z,q=Array.prototype,W=Function.prototype,J=Object.prototype,X=x["__core-js_shared__"],Y=(z=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",Z=W.toString,Q=J.hasOwnProperty,ee=J.toString,te=RegExp("^"+Z.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=x.Symbol,ne=x.Uint8Array,ie=J.propertyIsEnumerable,oe=q.splice,se=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),ae=He(x,"DataView"),ce=He(x,"Map"),ue=He(x,"Promise"),fe=He(x,"Set"),le=He(x,"WeakMap"),de=He(Object,"create"),he=Xe(ae),pe=Xe(ce),be=Xe(ue),me=Xe(fe),ge=Xe(le),ye=re?re.prototype:void 0,ve=ye?ye.valueOf:void 0,_e=ye?ye.toString:void 0;function $e(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Se(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ee(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function we(e){var t=-1,r=e?e.length:0;for(this.__data__=new Ee;++t<r;)this.add(e[t])}function Ce(e){this.__data__=new Se(e)}function Ae(e,t){var r=et(e)||Qe(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!Q.call(e,o)||i&&("length"==o||Ge(o,n))||r.push(o);return r}function ke(e,t){for(var r=e.length;r--;)if(Ze(e[r][0],t))return r;return-1}$e.prototype.clear=function(){this.__data__=de?de(null):{}},$e.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},$e.prototype.get=function(e){var t=this.__data__;if(de){var r=t[e];return r===i?void 0:r}return Q.call(t,e)?t[e]:void 0},$e.prototype.has=function(e){var t=this.__data__;return de?void 0!==t[e]:Q.call(t,e)},$e.prototype.set=function(e,t){return this.__data__[e]=de&&void 0===t?i:t,this},Se.prototype.clear=function(){this.__data__=[]},Se.prototype.delete=function(e){var t=this.__data__,r=ke(t,e);return!(r<0||(r==t.length-1?t.pop():oe.call(t,r,1),0))},Se.prototype.get=function(e){var t=this.__data__,r=ke(t,e);return r<0?void 0:t[r][1]},Se.prototype.has=function(e){return ke(this.__data__,e)>-1},Se.prototype.set=function(e,t){var r=this.__data__,n=ke(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Ee.prototype.clear=function(){this.__data__={hash:new $e,map:new(ce||Se),string:new $e}},Ee.prototype.delete=function(e){return Ue(this,e).delete(e)},Ee.prototype.get=function(e){return Ue(this,e).get(e)},Ee.prototype.has=function(e){return Ue(this,e).has(e)},Ee.prototype.set=function(e,t){return Ue(this,e).set(e,t),this},we.prototype.add=we.prototype.push=function(e){return this.__data__.set(e,i),this},we.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.clear=function(){this.__data__=new Se},Ce.prototype.delete=function(e){return this.__data__.delete(e)},Ce.prototype.get=function(e){return this.__data__.get(e)},Ce.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Se){var i=n.__data__;if(!ce||i.length<r-1)return i.push([e,t]),this;n=this.__data__=new Ee(i)}return n.set(e,t),this};var Te,Ie,Be=(Te=function(e,t){return e&&Pe(e,t,ct)},function(e,t){if(null==e)return e;if(!tt(e))return Te(e,t);for(var r=e.length,n=Ie?r:-1,i=Object(e);(Ie?n--:++n<r)&&!1!==t(i[n],n,i););return e}),Pe=function(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}}();function Re(e,t){for(var r=0,n=(t=Ve(t,e)?[t]:Fe(t)).length;null!=e&&r<n;)e=e[Je(t[r++])];return r&&r==n?e:void 0}function Oe(e,t){return null!=e&&t in Object(e)}function Ne(e,t,r,n,i){return e===t||(null==e||null==t||!it(e)&&!ot(t)?e!=e&&t!=t:function(e,t,r,n,i,a){var c=et(e),p=et(t),b=f,C=f;c||(b=(b=Ke(e))==u?y:b);p||(C=(C=Ke(t))==u?y:C);var A=b==y&&!K(e),k=C==y&&!K(t),T=b==C;if(T&&!A)return a||(a=new Ce),c||at(e)?je(e,t,r,n,i,a):function(e,t,r,n,i,a,c){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!n(new ne(e),new ne(t)));case l:case d:case g:return Ze(+e,+t);case h:return e.name==t.name&&e.message==t.message;case v:case $:return e==t+"";case m:var u=G;case _:var f=a&s;if(u||(u=V),e.size!=t.size&&!f)return!1;var p=c.get(e);if(p)return p==t;a|=o,c.set(e,t);var b=je(u(e),u(t),n,i,a,c);return c.delete(e),b;case S:if(ve)return ve.call(e)==ve.call(t)}return!1}(e,t,b,r,n,i,a);if(!(i&s)){var I=A&&Q.call(e,"__wrapped__"),B=k&&Q.call(t,"__wrapped__");if(I||B){var P=I?e.value():e,R=B?t.value():t;return a||(a=new Ce),r(P,R,n,i,a)}}if(!T)return!1;return a||(a=new Ce),function(e,t,r,n,i,o){var a=i&s,c=ct(e),u=c.length,f=ct(t).length;if(u!=f&&!a)return!1;for(var l=u;l--;){var d=c[l];if(!(a?d in t:Q.call(t,d)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var p=!0;o.set(e,t),o.set(t,e);for(var b=a;++l<u;){d=c[l];var m=e[d],g=t[d];if(n)var y=a?n(g,m,d,t,e,o):n(m,g,d,e,t,o);if(!(void 0===y?m===g||r(m,g,n,i,o):y)){p=!1;break}b||(b="constructor"==d)}if(p&&!b){var v=e.constructor,_=t.constructor;v!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,r,n,i,a)}(e,t,Ne,r,n,i))}function xe(e){return!(!it(e)||function(e){return!!Y&&Y in e}(e))&&(rt(e)||K(e)?te:B).test(Xe(e))}function Le(e){return"function"==typeof e?e:null==e?ut:"object"==typeof e?et(e)?function(e,t){if(Ve(e)&&ze(t))return qe(Je(e),t);return function(r){var n=function(e,t,r){var n=null==e?void 0:Re(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){t=Ve(t,e)?[t]:Fe(t);var n,i=-1,o=t.length;for(;++i<o;){var s=Je(t[i]);if(!(n=null!=e&&r(e,s)))break;e=e[s]}if(n)return n;return!!(o=e?e.length:0)&&nt(o)&&Ge(s,o)&&(et(e)||Qe(e))}(e,t,Oe)}(r,e):Ne(t,n,void 0,o|s)}}(e[0],e[1]):function(e){var t=function(e){var t=ct(e),r=t.length;for(;r--;){var n=t[r],i=e[n];t[r]=[n,i,ze(i)]}return t}(e);if(1==t.length&&t[0][2])return qe(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,n){var i=r.length,a=i,c=!n;if(null==e)return!a;for(e=Object(e);i--;){var u=r[i];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var f=(u=r[i])[0],l=e[f],d=u[1];if(c&&u[2]){if(void 0===l&&!(f in e))return!1}else{var h=new Ce;if(n)var p=n(l,d,f,e,t,h);if(!(void 0===p?Ne(d,l,n,o|s,h):p))return!1}}return!0}(r,e,t)}}(e):function(e){return Ve(e)?function(e){return function(t){return null==t?void 0:t[e]}}(Je(e)):function(e){return function(t){return Re(t,e)}}(e)}(e)}function Me(e){if(!function(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||J;return e===r}(e))return se(e);var t=[];for(var r in Object(e))Q.call(e,r)&&"constructor"!=r&&t.push(r);return t}function De(e,t){var r=-1,n=tt(e)?Array(e.length):[];return Be(e,function(e,i,o){n[++r]=t(e,i,o)}),n}function Fe(e){return et(e)?e:We(e)}function je(e,t,r,n,i,a){var c=i&s,u=e.length,f=t.length;if(u!=f&&!(c&&f>u))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var d=-1,h=!0,p=i&o?new we:void 0;for(a.set(e,t),a.set(t,e);++d<u;){var b=e[d],m=t[d];if(n)var g=c?n(m,b,d,t,e,a):n(b,m,d,e,t,a);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!H(t,function(e,t){if(!p.has(t)&&(b===e||r(b,e,n,i,a)))return p.add(t)})){h=!1;break}}else if(b!==m&&!r(b,m,n,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function Ue(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function He(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return xe(r)?r:void 0}var Ke=function(e){return ee.call(e)};function Ge(e,t){return!!(t=null==t?c:t)&&("number"==typeof e||P.test(e))&&e>-1&&e%1==0&&e<t}function Ve(e,t){if(et(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!st(e))||(A.test(e)||!C.test(e)||null!=t&&e in Object(t))}function ze(e){return e==e&&!it(e)}function qe(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}(ae&&Ke(new ae(new ArrayBuffer(1)))!=w||ce&&Ke(new ce)!=m||ue&&"[object Promise]"!=Ke(ue.resolve())||fe&&Ke(new fe)!=_||le&&"[object WeakMap]"!=Ke(new le))&&(Ke=function(e){var t=ee.call(e),r=t==y?e.constructor:void 0,n=r?Xe(r):void 0;if(n)switch(n){case he:return w;case pe:return m;case be:return"[object Promise]";case me:return _;case ge:return"[object WeakMap]"}return t});var We=Ye(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(st(e))return _e?_e.call(e):"";var t=e+"";return"0"==t&&1/e==-a?"-0":t}(t);var r=[];return k.test(e)&&r.push(""),e.replace(T,function(e,t,n,i){r.push(n?i.replace(I,"$1"):t||e)}),r});function Je(e){if("string"==typeof e||st(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function Xe(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ye(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Ye.Cache||Ee),r}function Ze(e,t){return e===t||e!=e&&t!=t}function Qe(e){return function(e){return ot(e)&&tt(e)}(e)&&Q.call(e,"callee")&&(!ie.call(e,"callee")||ee.call(e)==u)}Ye.Cache=Ee;var et=Array.isArray;function tt(e){return null!=e&&nt(e.length)&&!rt(e)}function rt(e){var t=it(e)?ee.call(e):"";return t==p||t==b}function nt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function it(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ot(e){return!!e&&"object"==typeof e}function st(e){return"symbol"==typeof e||ot(e)&&ee.call(e)==S}var at=j?function(e){return function(t){return e(t)}}(j):function(e){return ot(e)&&nt(e.length)&&!!R[ee.call(e)]};function ct(e){return tt(e)?Ae(e):Me(e)}function ut(e){return e}e.exports=function(e,t){return(et(e)?U:De)(e,Le(t))}}),lodash_filter=createCommonjsModule(function(e,t){var r=200,n="Expected a function",i="__lodash_hash_undefined__",o=1,s=2,a=1/0,c=9007199254740991,u="[object Arguments]",f="[object Array]",l="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Function]",b="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Object]",v="[object RegExp]",_="[object Set]",$="[object String]",S="[object Symbol]",E="[object ArrayBuffer]",w="[object DataView]",C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/,k=/^\./,T=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,I=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R[u]=R[f]=R[E]=R[l]=R[w]=R[d]=R[h]=R[p]=R[m]=R[g]=R[y]=R[v]=R[_]=R[$]=R["[object WeakMap]"]=!1;var O="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,N="object"==typeof self&&self&&self.Object===Object&&self,x=O||N||Function("return this")(),L=t&&!t.nodeType&&t,M=L&&e&&!e.nodeType&&e,D=M&&M.exports===L&&O.process,F=function(){try{return D&&D.binding("util")}catch(e){}}(),j=F&&F.isTypedArray;function U(e,t){for(var r=-1,n=e?e.length:0,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function H(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function K(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function G(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function V(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var z,q=Array.prototype,W=Function.prototype,J=Object.prototype,X=x["__core-js_shared__"],Y=(z=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",Z=W.toString,Q=J.hasOwnProperty,ee=J.toString,te=RegExp("^"+Z.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=x.Symbol,ne=x.Uint8Array,ie=J.propertyIsEnumerable,oe=q.splice,se=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),ae=He(x,"DataView"),ce=He(x,"Map"),ue=He(x,"Promise"),fe=He(x,"Set"),le=He(x,"WeakMap"),de=He(Object,"create"),he=Xe(ae),pe=Xe(ce),be=Xe(ue),me=Xe(fe),ge=Xe(le),ye=re?re.prototype:void 0,ve=ye?ye.valueOf:void 0,_e=ye?ye.toString:void 0;function $e(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Se(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ee(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function we(e){var t=-1,r=e?e.length:0;for(this.__data__=new Ee;++t<r;)this.add(e[t])}function Ce(e){this.__data__=new Se(e)}function Ae(e,t){var r=et(e)||Qe(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!Q.call(e,o)||i&&("length"==o||Ge(o,n))||r.push(o);return r}function ke(e,t){for(var r=e.length;r--;)if(Ze(e[r][0],t))return r;return-1}$e.prototype.clear=function(){this.__data__=de?de(null):{}},$e.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},$e.prototype.get=function(e){var t=this.__data__;if(de){var r=t[e];return r===i?void 0:r}return Q.call(t,e)?t[e]:void 0},$e.prototype.has=function(e){var t=this.__data__;return de?void 0!==t[e]:Q.call(t,e)},$e.prototype.set=function(e,t){return this.__data__[e]=de&&void 0===t?i:t,this},Se.prototype.clear=function(){this.__data__=[]},Se.prototype.delete=function(e){var t=this.__data__,r=ke(t,e);return!(r<0||(r==t.length-1?t.pop():oe.call(t,r,1),0))},Se.prototype.get=function(e){var t=this.__data__,r=ke(t,e);return r<0?void 0:t[r][1]},Se.prototype.has=function(e){return ke(this.__data__,e)>-1},Se.prototype.set=function(e,t){var r=this.__data__,n=ke(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Ee.prototype.clear=function(){this.__data__={hash:new $e,map:new(ce||Se),string:new $e}},Ee.prototype.delete=function(e){return Ue(this,e).delete(e)},Ee.prototype.get=function(e){return Ue(this,e).get(e)},Ee.prototype.has=function(e){return Ue(this,e).has(e)},Ee.prototype.set=function(e,t){return Ue(this,e).set(e,t),this},we.prototype.add=we.prototype.push=function(e){return this.__data__.set(e,i),this},we.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.clear=function(){this.__data__=new Se},Ce.prototype.delete=function(e){return this.__data__.delete(e)},Ce.prototype.get=function(e){return this.__data__.get(e)},Ce.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Se){var i=n.__data__;if(!ce||i.length<r-1)return i.push([e,t]),this;n=this.__data__=new Ee(i)}return n.set(e,t),this};var Te,Ie,Be=(Te=function(e,t){return e&&Re(e,t,ct)},function(e,t){if(null==e)return e;if(!tt(e))return Te(e,t);for(var r=e.length,n=Ie?r:-1,i=Object(e);(Ie?n--:++n<r)&&!1!==t(i[n],n,i););return e});function Pe(e,t){var r=[];return Be(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}var Re=function(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}}();function Oe(e,t){for(var r=0,n=(t=Ve(t,e)?[t]:Fe(t)).length;null!=e&&r<n;)e=e[Je(t[r++])];return r&&r==n?e:void 0}function Ne(e,t){return null!=e&&t in Object(e)}function xe(e,t,r,n,i){return e===t||(null==e||null==t||!it(e)&&!ot(t)?e!=e&&t!=t:function(e,t,r,n,i,a){var c=et(e),p=et(t),b=f,C=f;c||(b=(b=Ke(e))==u?y:b);p||(C=(C=Ke(t))==u?y:C);var A=b==y&&!K(e),k=C==y&&!K(t),T=b==C;if(T&&!A)return a||(a=new Ce),c||at(e)?je(e,t,r,n,i,a):function(e,t,r,n,i,a,c){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!n(new ne(e),new ne(t)));case l:case d:case g:return Ze(+e,+t);case h:return e.name==t.name&&e.message==t.message;case v:case $:return e==t+"";case m:var u=G;case _:var f=a&s;if(u||(u=V),e.size!=t.size&&!f)return!1;var p=c.get(e);if(p)return p==t;a|=o,c.set(e,t);var b=je(u(e),u(t),n,i,a,c);return c.delete(e),b;case S:if(ve)return ve.call(e)==ve.call(t)}return!1}(e,t,b,r,n,i,a);if(!(i&s)){var I=A&&Q.call(e,"__wrapped__"),B=k&&Q.call(t,"__wrapped__");if(I||B){var P=I?e.value():e,R=B?t.value():t;return a||(a=new Ce),r(P,R,n,i,a)}}if(!T)return!1;return a||(a=new Ce),function(e,t,r,n,i,o){var a=i&s,c=ct(e),u=c.length,f=ct(t).length;if(u!=f&&!a)return!1;for(var l=u;l--;){var d=c[l];if(!(a?d in t:Q.call(t,d)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var p=!0;o.set(e,t),o.set(t,e);for(var b=a;++l<u;){d=c[l];var m=e[d],g=t[d];if(n)var y=a?n(g,m,d,t,e,o):n(m,g,d,e,t,o);if(!(void 0===y?m===g||r(m,g,n,i,o):y)){p=!1;break}b||(b="constructor"==d)}if(p&&!b){var v=e.constructor,_=t.constructor;v!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,r,n,i,a)}(e,t,xe,r,n,i))}function Le(e){return!(!it(e)||function(e){return!!Y&&Y in e}(e))&&(rt(e)||K(e)?te:B).test(Xe(e))}function Me(e){return"function"==typeof e?e:null==e?ut:"object"==typeof e?et(e)?function(e,t){if(Ve(e)&&ze(t))return qe(Je(e),t);return function(r){var n=function(e,t,r){var n=null==e?void 0:Oe(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){t=Ve(t,e)?[t]:Fe(t);var n,i=-1,o=t.length;for(;++i<o;){var s=Je(t[i]);if(!(n=null!=e&&r(e,s)))break;e=e[s]}if(n)return n;return!!(o=e?e.length:0)&&nt(o)&&Ge(s,o)&&(et(e)||Qe(e))}(e,t,Ne)}(r,e):xe(t,n,void 0,o|s)}}(e[0],e[1]):function(e){var t=function(e){var t=ct(e),r=t.length;for(;r--;){var n=t[r],i=e[n];t[r]=[n,i,ze(i)]}return t}(e);if(1==t.length&&t[0][2])return qe(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,n){var i=r.length,a=i,c=!n;if(null==e)return!a;for(e=Object(e);i--;){var u=r[i];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var f=(u=r[i])[0],l=e[f],d=u[1];if(c&&u[2]){if(void 0===l&&!(f in e))return!1}else{var h=new Ce;if(n)var p=n(l,d,f,e,t,h);if(!(void 0===p?xe(d,l,n,o|s,h):p))return!1}}return!0}(r,e,t)}}(e):function(e){return Ve(e)?function(e){return function(t){return null==t?void 0:t[e]}}(Je(e)):function(e){return function(t){return Oe(t,e)}}(e)}(e)}function De(e){if(!function(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||J;return e===r}(e))return se(e);var t=[];for(var r in Object(e))Q.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Fe(e){return et(e)?e:We(e)}function je(e,t,r,n,i,a){var c=i&s,u=e.length,f=t.length;if(u!=f&&!(c&&f>u))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var d=-1,h=!0,p=i&o?new we:void 0;for(a.set(e,t),a.set(t,e);++d<u;){var b=e[d],m=t[d];if(n)var g=c?n(m,b,d,t,e,a):n(b,m,d,e,t,a);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!H(t,function(e,t){if(!p.has(t)&&(b===e||r(b,e,n,i,a)))return p.add(t)})){h=!1;break}}else if(b!==m&&!r(b,m,n,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function Ue(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function He(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Le(r)?r:void 0}var Ke=function(e){return ee.call(e)};function Ge(e,t){return!!(t=null==t?c:t)&&("number"==typeof e||P.test(e))&&e>-1&&e%1==0&&e<t}function Ve(e,t){if(et(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!st(e))||(A.test(e)||!C.test(e)||null!=t&&e in Object(t))}function ze(e){return e==e&&!it(e)}function qe(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}(ae&&Ke(new ae(new ArrayBuffer(1)))!=w||ce&&Ke(new ce)!=m||ue&&"[object Promise]"!=Ke(ue.resolve())||fe&&Ke(new fe)!=_||le&&"[object WeakMap]"!=Ke(new le))&&(Ke=function(e){var t=ee.call(e),r=t==y?e.constructor:void 0,n=r?Xe(r):void 0;if(n)switch(n){case he:return w;case pe:return m;case be:return"[object Promise]";case me:return _;case ge:return"[object WeakMap]"}return t});var We=Ye(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(st(e))return _e?_e.call(e):"";var t=e+"";return"0"==t&&1/e==-a?"-0":t}(t);var r=[];return k.test(e)&&r.push(""),e.replace(T,function(e,t,n,i){r.push(n?i.replace(I,"$1"):t||e)}),r});function Je(e){if("string"==typeof e||st(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function Xe(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ye(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Ye.Cache||Ee),r}function Ze(e,t){return e===t||e!=e&&t!=t}function Qe(e){return function(e){return ot(e)&&tt(e)}(e)&&Q.call(e,"callee")&&(!ie.call(e,"callee")||ee.call(e)==u)}Ye.Cache=Ee;var et=Array.isArray;function tt(e){return null!=e&&nt(e.length)&&!rt(e)}function rt(e){var t=it(e)?ee.call(e):"";return t==p||t==b}function nt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function it(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ot(e){return!!e&&"object"==typeof e}function st(e){return"symbol"==typeof e||ot(e)&&ee.call(e)==S}var at=j?function(e){return function(t){return e(t)}}(j):function(e){return ot(e)&&nt(e.length)&&!!R[ee.call(e)]};function ct(e){return tt(e)?Ae(e):De(e)}function ut(e){return e}e.exports=function(e,t){return(et(e)?U:Pe)(e,Me(t))}}),jsbn$1=createCommonjsModule(function(e,t){(function(){var t;function r(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function n(){return new r(null)}var i="undefined"!=typeof navigator;i&&"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=function(e,t,r,n,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var c=32767&this[e],u=this[e++]>>15,f=a*c+u*s;i=((c=s*c+((32767&f)<<15)+r[n]+(1073741823&i))>>>30)+(f>>>15)+a*u+(i>>>30),r[n++]=1073741823&c}return i},t=30):i&&"Netscape"!=navigator.appName?(r.prototype.am=function(e,t,r,n,i,o){for(;--o>=0;){var s=t*this[e++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=67108863&s}return i},t=26):(r.prototype.am=function(e,t,r,n,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var c=16383&this[e],u=this[e++]>>14,f=a*c+u*s;i=((c=s*c+((16383&f)<<14)+r[n]+i)>>28)+(f>>14)+a*u,r[n++]=268435455&c}return i},t=28),r.prototype.DB=t,r.prototype.DM=(1<<t)-1,r.prototype.DV=1<<t;r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-t,r.prototype.F2=2*t-52;var o,s,a="0123456789abcdefghijklmnopqrstuvwxyz",c=new Array;for(o="0".charCodeAt(0),s=0;s<=9;++s)c[o++]=s;for(o="a".charCodeAt(0),s=10;s<36;++s)c[o++]=s;for(o="A".charCodeAt(0),s=10;s<36;++s)c[o++]=s;function u(e){return a.charAt(e)}function f(e,t){var r=c[e.charCodeAt(t)];return null==r?-1:r}function l(e){var t=n();return t.fromInt(e),t}function d(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function h(e){this.m=e}function p(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function b(e,t){return e&t}function m(e,t){return e|t}function g(e,t){return e^t}function y(e,t){return e&~t}function v(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function _(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function $(){}function S(e){return e}function E(e){this.r2=n(),this.q3=n(),r.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}h.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},h.prototype.revert=function(e){return e},h.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},h.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},h.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},p.prototype.convert=function(e){var t=n();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t},p.prototype.revert=function(e){var t=n();return e.copyTo(t),this.reduce(t),t},p.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},p.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},r.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},r.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},r.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var i=e.length,o=!1,s=0;--i>=0;){var a=8==n?255&e[i]:f(e,i);a<0?"-"==e.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&r.ZERO.subTo(this,this)},r.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},r.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},r.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},r.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)t[r]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},r.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&o)<<i,t[s-r]=this[s]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}},r.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},r.prototype.multiplyTo=function(e,t){var n=this.abs(),i=e.abs(),o=n.t;for(t.t=o+i.t;--o>=0;)t[o]=0;for(o=0;o<i.t;++o)t[o+n.t]=n.am(0,i[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&r.ZERO.subTo(t,t)},r.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},r.prototype.divRemTo=function(e,t,i){var o=e.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var a=n(),c=this.s,u=e.s,f=this.DB-d(o[o.t-1]);f>0?(o.lShiftTo(f,a),s.lShiftTo(f,i)):(o.copyTo(a),s.copyTo(i));var l=a.t,h=a[l-1];if(0!=h){var p=h*(1<<this.F1)+(l>1?a[l-2]>>this.F2:0),b=this.FV/p,m=(1<<this.F1)/p,g=1<<this.F2,y=i.t,v=y-l,_=null==t?n():t;for(a.dlShiftTo(v,_),i.compareTo(_)>=0&&(i[i.t++]=1,i.subTo(_,i)),r.ONE.dlShiftTo(l,_),_.subTo(a,a);a.t<l;)a[a.t++]=0;for(;--v>=0;){var $=i[--y]==h?this.DM:Math.floor(i[y]*b+(i[y-1]+g)*m);if((i[y]+=a.am(0,$,i,v,0,l))<$)for(a.dlShiftTo(v,_),i.subTo(_,i);i[y]<--$;)i.subTo(_,i)}null!=t&&(i.drShiftTo(l,t),c!=u&&r.ZERO.subTo(t,t)),i.t=l,i.clamp(),f>0&&i.rShiftTo(f,i),c<0&&r.ZERO.subTo(i,i)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},r.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},r.prototype.exp=function(e,t){if(e>4294967295||e<1)return r.ONE;var i=n(),o=n(),s=t.convert(this),a=d(e)-1;for(s.copyTo(i);--a>=0;)if(t.sqrTo(i,o),(e&1<<a)>0)t.mulTo(o,s,i);else{var c=i;i=o,o=c}return t.revert(i)},r.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=u(r));s>=0;)a<t?(r=(this[s]&(1<<a)-1)<<t-a,r|=this[--s]>>(a+=this.DB-t)):(r=this[s]>>(a-=t)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=u(r));return i?o:"0"},r.prototype.negate=function(){var e=n();return r.ZERO.subTo(this,e),e},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this[this.t-1]^this.s&this.DM)},r.prototype.mod=function(e){var t=n();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(r.ZERO)>0&&e.subTo(t,t),t},r.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new h(t):new p(t),this.exp(e,r)},r.ZERO=l(0),r.ONE=l(1),$.prototype.convert=S,$.prototype.revert=S,$.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},$.prototype.sqrTo=function(e,t){e.squareTo(t)},E.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t},E.prototype.revert=function(e){return e},E.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},E.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},E.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var w,C,A,k=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],T=(1<<26)/k[k.length-1];function I(){!function(e){C[A++]^=255&e,C[A++]^=e>>8&255,C[A++]^=e>>16&255,C[A++]^=e>>24&255,A>=L&&(A-=L)}((new Date).getTime())}if(r.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},r.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=l(r),o=n(),s=n(),a="";for(this.divRemTo(i,o,s);o.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,o.divRemTo(i,o,s);return s.intValue().toString(e)+a},r.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),i=Math.pow(t,n),o=!1,s=0,a=0,c=0;c<e.length;++c){var u=f(e,c);u<0?"-"==e.charAt(c)&&0==this.signum()&&(o=!0):(a=t*a+u,++s>=n&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),o&&r.ZERO.subTo(this,this)},r.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(r.ONE.shiftLeft(e-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(r.ONE.shiftLeft(e-1),this);else{var i=new Array,o=7&e;i.length=1+(e>>3),t.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}},r.prototype.bitwiseTo=function(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},r.prototype.changeBit=function(e,t){var n=r.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},r.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},r.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},r.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},r.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()},r.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},r.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},r.prototype.millerRabin=function(e){var t=this.subtract(r.ONE),i=t.getLowestSetBit();if(i<=0)return!1;var o=t.shiftRight(i);(e=e+1>>1)>k.length&&(e=k.length);for(var s=n(),a=0;a<e;++a){s.fromInt(k[Math.floor(Math.random()*k.length)]);var c=s.modPow(o,this);if(0!=c.compareTo(r.ONE)&&0!=c.compareTo(t)){for(var u=1;u++<i&&0!=c.compareTo(t);)if(0==(c=c.modPowInt(2,this)).compareTo(r.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},r.prototype.clone=function(){var e=n();return this.copyTo(e),e},r.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},r.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},r.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},r.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},r.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},r.prototype.equals=function(e){return 0==this.compareTo(e)},r.prototype.min=function(e){return this.compareTo(e)<0?this:e},r.prototype.max=function(e){return this.compareTo(e)>0?this:e},r.prototype.and=function(e){var t=n();return this.bitwiseTo(e,b,t),t},r.prototype.or=function(e){var t=n();return this.bitwiseTo(e,m,t),t},r.prototype.xor=function(e){var t=n();return this.bitwiseTo(e,g,t),t},r.prototype.andNot=function(e){var t=n();return this.bitwiseTo(e,y,t),t},r.prototype.not=function(){for(var e=n(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},r.prototype.shiftLeft=function(e){var t=n();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},r.prototype.shiftRight=function(e){var t=n();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},r.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+v(this[e]);return this.s<0?this.t*this.DB:-1},r.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=_(this[r]^t);return e},r.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},r.prototype.setBit=function(e){return this.changeBit(e,m)},r.prototype.clearBit=function(e){return this.changeBit(e,y)},r.prototype.flipBit=function(e){return this.changeBit(e,g)},r.prototype.add=function(e){var t=n();return this.addTo(e,t),t},r.prototype.subtract=function(e){var t=n();return this.subTo(e,t),t},r.prototype.multiply=function(e){var t=n();return this.multiplyTo(e,t),t},r.prototype.divide=function(e){var t=n();return this.divRemTo(e,t,null),t},r.prototype.remainder=function(e){var t=n();return this.divRemTo(e,null,t),t},r.prototype.divideAndRemainder=function(e){var t=n(),r=n();return this.divRemTo(e,t,r),new Array(t,r)},r.prototype.modPow=function(e,t){var r,i,o=e.bitLength(),s=l(1);if(o<=0)return s;r=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new h(t):t.isEven()?new E(t):new p(t);var a=new Array,c=3,u=r-1,f=(1<<r)-1;if(a[1]=i.convert(this),r>1){var b=n();for(i.sqrTo(a[1],b);c<=f;)a[c]=n(),i.mulTo(b,a[c-2],a[c]),c+=2}var m,g,y=e.t-1,v=!0,_=n();for(o=d(e[y])-1;y>=0;){for(o>=u?m=e[y]>>o-u&f:(m=(e[y]&(1<<o+1)-1)<<u-o,y>0&&(m|=e[y-1]>>this.DB+o-u)),c=r;0==(1&m);)m>>=1,--c;if((o-=c)<0&&(o+=this.DB,--y),v)a[m].copyTo(s),v=!1;else{for(;c>1;)i.sqrTo(s,_),i.sqrTo(_,s),c-=2;c>0?i.sqrTo(s,_):(g=s,s=_,_=g),i.mulTo(_,a[m],s)}for(;y>=0&&0==(e[y]&1<<o);)i.sqrTo(s,_),g=s,s=_,_=g,--o<0&&(o=this.DB-1,--y)}return i.revert(s)},r.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return r.ZERO;for(var n=e.clone(),i=this.clone(),o=l(1),s=l(0),a=l(0),c=l(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),t?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(e,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);n.compareTo(i)>=0?(n.subTo(i,n),t&&o.subTo(a,o),s.subTo(c,s)):(i.subTo(n,i),t&&a.subTo(o,a),c.subTo(s,c))}return 0!=i.compareTo(r.ONE)?r.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},r.prototype.pow=function(e){return this.exp(e,new $)},r.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},r.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=k[k.length-1]){for(t=0;t<k.length;++t)if(r[0]==k[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<k.length;){for(var n=k[t],i=t+1;i<k.length&&n<T;)n*=k[i++];for(n=r.modInt(n);t<i;)if(n%k[t++]==0)return!1}return r.millerRabin(e)},r.prototype.square=function(){var e=n();return this.squareTo(e),e},r.prototype.Barrett=E,null==C){var B;if(C=new Array,A=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var P=new Uint8Array(32);for(window.crypto.getRandomValues(P),B=0;B<32;++B)C[A++]=P[B]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var R=window.crypto.random(32);for(B=0;B<R.length;++B)C[A++]=255&R.charCodeAt(B)}for(;A<L;)B=Math.floor(65536*Math.random()),C[A++]=B>>>8,C[A++]=255&B;A=0,I()}function O(){if(null==w){for(I(),(w=new x).init(C),A=0;A<C.length;++A)C[A]=0;A=0}return w.next()}function N(){}function x(){this.i=0,this.j=0,this.S=new Array}N.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=O()},x.prototype.init=function(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0},x.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var L=256;e.exports={default:r,BigInteger:r,SecureRandom:N}}).call(commonjsGlobal)}),jsbn_1=jsbn$1.BigInteger,jsbn_2=jsbn$1.SecureRandom,common$c=createCommonjsModule(function(e,t){var r=t.falseIfInvalid=function(e){return function(){return!!this.valid&&e.apply(this,arguments)}};t.isInSubnet=r(function(e){return!(this.subnetMask<e.subnetMask)&&this.mask(e.subnetMask)===e.mask()}),t.isCorrect=function(e){return r(function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===e&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))})}}),common_1=common$c.falseIfInvalid,common_2=common$c.isInSubnet,common_3=common$c.isCorrect,sprintf=createCommonjsModule(function(e,t){!function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(t){return function(t,n){var i,o,s,a,c,u,f,l,d,h=1,p=t.length,b="";for(o=0;o<p;o++)if("string"==typeof t[o])b+=t[o];else if("object"==typeof t[o]){if((a=t[o]).keys)for(i=n[h],s=0;s<a.keys.length;s++){if(null==i)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[s],a.keys[s-1]));i=i[a.keys[s]]}else i=a.param_no?n[a.param_no]:n[h++];if(e.not_type.test(a.type)&&e.not_primitive.test(a.type)&&i instanceof Function&&(i=i()),e.numeric_arg.test(a.type)&&"number"!=typeof i&&isNaN(i))throw new TypeError(r("[sprintf] expecting number but found %T",i));switch(e.number.test(a.type)&&(l=i>=0),a.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,a.width?parseInt(a.width):0);break;case"e":i=a.precision?parseFloat(i).toExponential(a.precision):parseFloat(i).toExponential();break;case"f":i=a.precision?parseFloat(i).toFixed(a.precision):parseFloat(i);break;case"g":i=a.precision?String(Number(i.toPrecision(a.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=a.precision?i.substring(0,a.precision):i;break;case"t":i=String(!!i),i=a.precision?i.substring(0,a.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=a.precision?i.substring(0,a.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=a.precision?i.substring(0,a.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}e.json.test(a.type)?b+=i:(!e.number.test(a.type)||l&&!a.sign?d="":(d=l?"+":"-",i=i.toString().replace(e.sign,"")),u=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",f=a.width-(d+i).length,c=a.width&&f>0?u.repeat(f):"",b+=a.align?d+i+c:"0"===u?d+c+i:c+d+i)}return b}(function(t){if(i[t])return i[t];var r,n=t,o=[],s=0;for(;n;){if(null!==(r=e.text.exec(n)))o.push(r[0]);else if(null!==(r=e.modulo.exec(n)))o.push("%");else{if(null===(r=e.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){s|=1;var a=[],c=r[2],u=[];if(null===(u=e.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(u[1]);""!==(c=c.substring(u[0].length));)if(null!==(u=e.key_access.exec(c)))a.push(u[1]);else{if(null===(u=e.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(u[1])}r[2]=a}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}n=n.substring(r[0].length)}return i[t]=o}(t),arguments)}function n(e,t){return r.apply(null,[e].concat(t||[]))}var i=Object.create(null);t.sprintf=r,t.vsprintf=n,"undefined"!=typeof window&&(window.sprintf=r,window.vsprintf=n)}()}),lodash=createCommonjsModule(function(e,t){(function(){var r,n=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="__lodash_hash_undefined__",a=500,c="__lodash_placeholder__",u=1,f=2,l=4,d=1,h=2,p=1,b=2,m=4,g=8,y=16,v=32,_=64,$=128,S=256,E=512,w=30,C="...",A=800,k=16,T=1,I=2,B=1/0,P=9007199254740991,R=1.7976931348623157e308,O=NaN,N=4294967295,x=N-1,L=N>>>1,M=[["ary",$],["bind",p],["bindKey",b],["curry",g],["curryRight",y],["flip",E],["partial",v],["partialRight",_],["rearg",S]],D="[object Arguments]",F="[object Array]",j="[object AsyncFunction]",U="[object Boolean]",H="[object Date]",K="[object DOMException]",G="[object Error]",V="[object Function]",z="[object GeneratorFunction]",q="[object Map]",W="[object Number]",J="[object Null]",X="[object Object]",Y="[object Proxy]",Z="[object RegExp]",Q="[object Set]",ee="[object String]",te="[object Symbol]",re="[object Undefined]",ne="[object WeakMap]",ie="[object WeakSet]",oe="[object ArrayBuffer]",se="[object DataView]",ae="[object Float32Array]",ce="[object Float64Array]",ue="[object Int8Array]",fe="[object Int16Array]",le="[object Int32Array]",de="[object Uint8Array]",he="[object Uint8ClampedArray]",pe="[object Uint16Array]",be="[object Uint32Array]",me=/\b__p \+= '';/g,ge=/\b(__p \+=) '' \+/g,ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ve=/&(?:amp|lt|gt|quot|#39);/g,_e=/[&<>"']/g,$e=RegExp(ve.source),Se=RegExp(_e.source),Ee=/<%-([\s\S]+?)%>/g,we=/<%([\s\S]+?)%>/g,Ce=/<%=([\s\S]+?)%>/g,Ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ke=/^\w*$/,Te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ie=/[\\^$.*+?()[\]{}|]/g,Be=RegExp(Ie.source),Pe=/^\s+|\s+$/g,Re=/^\s+/,Oe=/\s+$/,Ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xe=/\{\n\/\* \[wrapped with (.+)\] \*/,Le=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,De=/\\(\\)?/g,Fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,je=/\w*$/,Ue=/^[-+]0x[0-9a-f]+$/i,He=/^0b[01]+$/i,Ke=/^\[object .+?Constructor\]$/,Ge=/^0o[0-7]+$/i,Ve=/^(?:0|[1-9]\d*)$/,ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qe=/($^)/,We=/['\n\r\u2028\u2029\\]/g,Je="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ye="[\\ud800-\\udfff]",Ze="["+Xe+"]",Qe="["+Je+"]",et="\\d+",tt="[\\u2700-\\u27bf]",rt="[a-z\\xdf-\\xf6\\xf8-\\xff]",nt="[^\\ud800-\\udfff"+Xe+et+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",it="\\ud83c[\\udffb-\\udfff]",ot="[^\\ud800-\\udfff]",st="(?:\\ud83c[\\udde6-\\uddff]){2}",at="[\\ud800-\\udbff][\\udc00-\\udfff]",ct="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ut="(?:"+rt+"|"+nt+")",ft="(?:"+ct+"|"+nt+")",lt="(?:"+Qe+"|"+it+")"+"?",dt="[\\ufe0e\\ufe0f]?"+lt+("(?:\\u200d(?:"+[ot,st,at].join("|")+")[\\ufe0e\\ufe0f]?"+lt+")*"),ht="(?:"+[tt,st,at].join("|")+")"+dt,pt="(?:"+[ot+Qe+"?",Qe,st,at,Ye].join("|")+")",bt=RegExp("['’]","g"),mt=RegExp(Qe,"g"),gt=RegExp(it+"(?="+it+")|"+pt+dt,"g"),yt=RegExp([ct+"?"+rt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Ze,ct,"$"].join("|")+")",ft+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Ze,ct+ut,"$"].join("|")+")",ct+"?"+ut+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ct+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",et,ht].join("|"),"g"),vt=RegExp("[\\u200d\\ud800-\\udfff"+Je+"\\ufe0e\\ufe0f]"),_t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$t=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],St=-1,Et={};Et[ae]=Et[ce]=Et[ue]=Et[fe]=Et[le]=Et[de]=Et[he]=Et[pe]=Et[be]=!0,Et[D]=Et[F]=Et[oe]=Et[U]=Et[se]=Et[H]=Et[G]=Et[V]=Et[q]=Et[W]=Et[X]=Et[Z]=Et[Q]=Et[ee]=Et[ne]=!1;var wt={};wt[D]=wt[F]=wt[oe]=wt[se]=wt[U]=wt[H]=wt[ae]=wt[ce]=wt[ue]=wt[fe]=wt[le]=wt[q]=wt[W]=wt[X]=wt[Z]=wt[Q]=wt[ee]=wt[te]=wt[de]=wt[he]=wt[pe]=wt[be]=!0,wt[G]=wt[V]=wt[ne]=!1;var Ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},At=parseFloat,kt=parseInt,Tt="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,It="object"==typeof self&&self&&self.Object===Object&&self,Bt=Tt||It||Function("return this")(),Pt=t&&!t.nodeType&&t,Rt=Pt&&e&&!e.nodeType&&e,Ot=Rt&&Rt.exports===Pt,Nt=Ot&&Tt.process,xt=function(){try{var e=Rt&&Rt.require&&Rt.require("util").types;return e||Nt&&Nt.binding&&Nt.binding("util")}catch(e){}}(),Lt=xt&&xt.isArrayBuffer,Mt=xt&&xt.isDate,Dt=xt&&xt.isMap,Ft=xt&&xt.isRegExp,jt=xt&&xt.isSet,Ut=xt&&xt.isTypedArray;function Ht(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Kt(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}function Gt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Vt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function zt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function qt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function Wt(e,t){return!!(null==e?0:e.length)&&ir(e,t,0)>-1}function Jt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function Xt(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Yt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Zt(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function Qt(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function er(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var tr=cr("length");function rr(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function nr(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function ir(e,t,r){return t==t?function(e,t,r){var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):nr(e,sr,r)}function or(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function sr(e){return e!=e}function ar(e,t){var r=null==e?0:e.length;return r?lr(e,t)/r:O}function cr(e){return function(t){return null==t?r:t[e]}}function ur(e){return function(t){return null==e?r:e[t]}}function fr(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r}function lr(e,t){for(var n,i=-1,o=e.length;++i<o;){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function dr(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function hr(e){return function(t){return e(t)}}function pr(e,t){return Xt(t,function(t){return e[t]})}function br(e,t){return e.has(t)}function mr(e,t){for(var r=-1,n=e.length;++r<n&&ir(t,e[r],0)>-1;);return r}function gr(e,t){for(var r=e.length;r--&&ir(t,e[r],0)>-1;);return r}var yr=ur({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),vr=ur({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function _r(e){return"\\"+Ct[e]}function $r(e){return vt.test(e)}function Sr(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function Er(e,t){return function(r){return e(t(r))}}function wr(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r];s!==t&&s!==c||(e[r]=c,o[i++]=r)}return o}function Cr(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function Ar(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function kr(e){return $r(e)?function(e){var t=gt.lastIndex=0;for(;gt.test(e);)++t;return t}(e):tr(e)}function Tr(e){return $r(e)?function(e){return e.match(gt)||[]}(e):function(e){return e.split("")}(e)}var Ir=ur({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Br=function e(t){var Je,Xe=(t=null==t?Bt:Br.defaults(Bt.Object(),t,Br.pick(Bt,$t))).Array,Ye=t.Date,Ze=t.Error,Qe=t.Function,et=t.Math,tt=t.Object,rt=t.RegExp,nt=t.String,it=t.TypeError,ot=Xe.prototype,st=Qe.prototype,at=tt.prototype,ct=t["__core-js_shared__"],ut=st.toString,ft=at.hasOwnProperty,lt=0,dt=(Je=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+Je:"",ht=at.toString,pt=ut.call(tt),gt=Bt._,vt=rt("^"+ut.call(ft).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ct=Ot?t.Buffer:r,Tt=t.Symbol,It=t.Uint8Array,Pt=Ct?Ct.allocUnsafe:r,Rt=Er(tt.getPrototypeOf,tt),Nt=tt.create,xt=at.propertyIsEnumerable,tr=ot.splice,ur=Tt?Tt.isConcatSpreadable:r,Pr=Tt?Tt.iterator:r,Rr=Tt?Tt.toStringTag:r,Or=function(){try{var e=Fo(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),Nr=t.clearTimeout!==Bt.clearTimeout&&t.clearTimeout,xr=Ye&&Ye.now!==Bt.Date.now&&Ye.now,Lr=t.setTimeout!==Bt.setTimeout&&t.setTimeout,Mr=et.ceil,Dr=et.floor,Fr=tt.getOwnPropertySymbols,jr=Ct?Ct.isBuffer:r,Ur=t.isFinite,Hr=ot.join,Kr=Er(tt.keys,tt),Gr=et.max,Vr=et.min,zr=Ye.now,qr=t.parseInt,Wr=et.random,Jr=ot.reverse,Xr=Fo(t,"DataView"),Yr=Fo(t,"Map"),Zr=Fo(t,"Promise"),Qr=Fo(t,"Set"),en=Fo(t,"WeakMap"),tn=Fo(tt,"create"),rn=en&&new en,nn={},on=ls(Xr),sn=ls(Yr),an=ls(Zr),cn=ls(Qr),un=ls(en),fn=Tt?Tt.prototype:r,ln=fn?fn.valueOf:r,dn=fn?fn.toString:r;function hn(e){if(Ta(e)&&!ga(e)&&!(e instanceof gn)){if(e instanceof mn)return e;if(ft.call(e,"__wrapped__"))return ds(e)}return new mn(e)}var pn=function(){function e(){}return function(t){if(!ka(t))return{};if(Nt)return Nt(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function bn(){}function mn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=N,this.__views__=[]}function yn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function vn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function _n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new _n;++t<r;)this.add(e[t])}function Sn(e){var t=this.__data__=new vn(e);this.size=t.size}function En(e,t){var r=ga(e),n=!r&&ma(e),i=!r&&!n&&$a(e),o=!r&&!n&&!i&&La(e),s=r||n||i||o,a=s?dr(e.length,nt):[],c=a.length;for(var u in e)!t&&!ft.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||zo(u,c))||a.push(u);return a}function wn(e){var t=e.length;return t?e[$i(0,t-1)]:r}function Cn(e,t){return cs(ro(e),Nn(t,0,e.length))}function An(e){return cs(ro(e))}function kn(e,t,n){(n===r||ha(e[t],n))&&(n!==r||t in e)||Rn(e,t,n)}function Tn(e,t,n){var i=e[t];ft.call(e,t)&&ha(i,n)&&(n!==r||t in e)||Rn(e,t,n)}function In(e,t){for(var r=e.length;r--;)if(ha(e[r][0],t))return r;return-1}function Bn(e,t,r,n){return Fn(e,function(e,i,o){t(n,e,r(e),o)}),n}function Pn(e,t){return e&&no(t,ic(t),e)}function Rn(e,t,r){"__proto__"==t&&Or?Or(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function On(e,t){for(var n=-1,i=t.length,o=Xe(i),s=null==e;++n<i;)o[n]=s?r:Qa(e,t[n]);return o}function Nn(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function xn(e,t,n,i,o,s){var a,c=t&u,d=t&f,h=t&l;if(n&&(a=o?n(e,i,o,s):n(e)),a!==r)return a;if(!ka(e))return e;var p=ga(e);if(p){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&ft.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!c)return ro(e,a)}else{var b=Ho(e),m=b==V||b==z;if($a(e))return Xi(e,c);if(b==X||b==D||m&&!o){if(a=d||m?{}:Go(e),!c)return d?function(e,t){return no(e,Uo(e),t)}(e,function(e,t){return e&&no(t,oc(t),e)}(a,e)):function(e,t){return no(e,jo(e),t)}(e,Pn(a,e))}else{if(!wt[b])return o?e:{};a=function(e,t,r){var n,i=e.constructor;switch(t){case oe:return Yi(e);case U:case H:return new i(+e);case se:return function(e,t){var r=t?Yi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case ae:case ce:case ue:case fe:case le:case de:case he:case pe:case be:return Zi(e,r);case q:return new i;case W:case ee:return new i(e);case Z:return function(e){var t=new e.constructor(e.source,je.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Q:return new i;case te:return n=e,ln?tt(ln.call(n)):{}}}(e,b,c)}}s||(s=new Sn);var g=s.get(e);if(g)return g;if(s.set(e,a),Oa(e))return e.forEach(function(r){a.add(xn(r,t,n,r,e,s))}),a;if(Ia(e))return e.forEach(function(r,i){a.set(i,xn(r,t,n,i,e,s))}),a;var y=p?r:(h?d?Ro:Po:d?oc:ic)(e);return Gt(y||e,function(r,i){y&&(r=e[i=r]),Tn(a,i,xn(r,t,n,i,e,s))}),a}function Ln(e,t,n){var i=n.length;if(null==e)return!i;for(e=tt(e);i--;){var o=n[i],s=t[o],a=e[o];if(a===r&&!(o in e)||!s(a))return!1}return!0}function Mn(e,t,n){if("function"!=typeof e)throw new it(o);return is(function(){e.apply(r,n)},t)}function Dn(e,t,r,i){var o=-1,s=Wt,a=!0,c=e.length,u=[],f=t.length;if(!c)return u;r&&(t=Xt(t,hr(r))),i?(s=Jt,a=!1):t.length>=n&&(s=br,a=!1,t=new $n(t));e:for(;++o<c;){var l=e[o],d=null==r?l:r(l);if(l=i||0!==l?l:0,a&&d==d){for(var h=f;h--;)if(t[h]===d)continue e;u.push(l)}else s(t,d,i)||u.push(l)}return u}hn.templateSettings={escape:Ee,evaluate:we,interpolate:Ce,variable:"",imports:{_:hn}},hn.prototype=bn.prototype,hn.prototype.constructor=hn,mn.prototype=pn(bn.prototype),mn.prototype.constructor=mn,gn.prototype=pn(bn.prototype),gn.prototype.constructor=gn,yn.prototype.clear=function(){this.__data__=tn?tn(null):{},this.size=0},yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},yn.prototype.get=function(e){var t=this.__data__;if(tn){var n=t[e];return n===s?r:n}return ft.call(t,e)?t[e]:r},yn.prototype.has=function(e){var t=this.__data__;return tn?t[e]!==r:ft.call(t,e)},yn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=tn&&t===r?s:t,this},vn.prototype.clear=function(){this.__data__=[],this.size=0},vn.prototype.delete=function(e){var t=this.__data__,r=In(t,e);return!(r<0||(r==t.length-1?t.pop():tr.call(t,r,1),--this.size,0))},vn.prototype.get=function(e){var t=this.__data__,n=In(t,e);return n<0?r:t[n][1]},vn.prototype.has=function(e){return In(this.__data__,e)>-1},vn.prototype.set=function(e,t){var r=this.__data__,n=In(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},_n.prototype.clear=function(){this.size=0,this.__data__={hash:new yn,map:new(Yr||vn),string:new yn}},_n.prototype.delete=function(e){var t=Mo(this,e).delete(e);return this.size-=t?1:0,t},_n.prototype.get=function(e){return Mo(this,e).get(e)},_n.prototype.has=function(e){return Mo(this,e).has(e)},_n.prototype.set=function(e,t){var r=Mo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},$n.prototype.add=$n.prototype.push=function(e){return this.__data__.set(e,s),this},$n.prototype.has=function(e){return this.__data__.has(e)},Sn.prototype.clear=function(){this.__data__=new vn,this.size=0},Sn.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Sn.prototype.get=function(e){return this.__data__.get(e)},Sn.prototype.has=function(e){return this.__data__.has(e)},Sn.prototype.set=function(e,t){var r=this.__data__;if(r instanceof vn){var i=r.__data__;if(!Yr||i.length<n-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new _n(i)}return r.set(e,t),this.size=r.size,this};var Fn=so(qn),jn=so(Wn,!0);function Un(e,t){var r=!0;return Fn(e,function(e,n,i){return r=!!t(e,n,i)}),r}function Hn(e,t,n){for(var i=-1,o=e.length;++i<o;){var s=e[i],a=t(s);if(null!=a&&(c===r?a==a&&!xa(a):n(a,c)))var c=a,u=s}return u}function Kn(e,t){var r=[];return Fn(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function Gn(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=Vo),i||(i=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?Gn(a,t-1,r,n,i):Yt(i,a):n||(i[i.length]=a)}return i}var Vn=ao(),zn=ao(!0);function qn(e,t){return e&&Vn(e,t,ic)}function Wn(e,t){return e&&zn(e,t,ic)}function Jn(e,t){return qt(t,function(t){return wa(e[t])})}function Xn(e,t){for(var n=0,i=(t=zi(t,e)).length;null!=e&&n<i;)e=e[fs(t[n++])];return n&&n==i?e:r}function Yn(e,t,r){var n=t(e);return ga(e)?n:Yt(n,r(e))}function Zn(e){return null==e?e===r?re:J:Rr&&Rr in tt(e)?function(e){var t=ft.call(e,Rr),n=e[Rr];try{e[Rr]=r;var i=!0}catch(e){}var o=ht.call(e);return i&&(t?e[Rr]=n:delete e[Rr]),o}(e):function(e){return ht.call(e)}(e)}function Qn(e,t){return e>t}function ei(e,t){return null!=e&&ft.call(e,t)}function ti(e,t){return null!=e&&t in tt(e)}function ri(e,t,n){for(var i=n?Jt:Wt,o=e[0].length,s=e.length,a=s,c=Xe(s),u=1/0,f=[];a--;){var l=e[a];a&&t&&(l=Xt(l,hr(t))),u=Vr(l.length,u),c[a]=!n&&(t||o>=120&&l.length>=120)?new $n(a&&l):r}l=e[0];var d=-1,h=c[0];e:for(;++d<o&&f.length<u;){var p=l[d],b=t?t(p):p;if(p=n||0!==p?p:0,!(h?br(h,b):i(f,b,n))){for(a=s;--a;){var m=c[a];if(!(m?br(m,b):i(e[a],b,n)))continue e}h&&h.push(b),f.push(p)}}return f}function ni(e,t,n){var i=null==(e=ts(e,t=zi(t,e)))?e:e[fs(Es(t))];return null==i?r:Ht(i,e,n)}function ii(e){return Ta(e)&&Zn(e)==D}function oi(e,t,n,i,o){return e===t||(null==e||null==t||!Ta(e)&&!Ta(t)?e!=e&&t!=t:function(e,t,n,i,o,s){var a=ga(e),c=ga(t),u=a?F:Ho(e),f=c?F:Ho(t),l=(u=u==D?X:u)==X,p=(f=f==D?X:f)==X,b=u==f;if(b&&$a(e)){if(!$a(t))return!1;a=!0,l=!1}if(b&&!l)return s||(s=new Sn),a||La(e)?Io(e,t,n,i,o,s):function(e,t,r,n,i,o,s){switch(r){case se:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case oe:return!(e.byteLength!=t.byteLength||!o(new It(e),new It(t)));case U:case H:case W:return ha(+e,+t);case G:return e.name==t.name&&e.message==t.message;case Z:case ee:return e==t+"";case q:var a=Sr;case Q:var c=n&d;if(a||(a=Cr),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=h,s.set(e,t);var f=Io(a(e),a(t),n,i,o,s);return s.delete(e),f;case te:if(ln)return ln.call(e)==ln.call(t)}return!1}(e,t,u,n,i,o,s);if(!(n&d)){var m=l&&ft.call(e,"__wrapped__"),g=p&&ft.call(t,"__wrapped__");if(m||g){var y=m?e.value():e,v=g?t.value():t;return s||(s=new Sn),o(y,v,n,i,s)}}return!!b&&(s||(s=new Sn),function(e,t,n,i,o,s){var a=n&d,c=Po(e),u=c.length,f=Po(t).length;if(u!=f&&!a)return!1;for(var l=u;l--;){var h=c[l];if(!(a?h in t:ft.call(t,h)))return!1}var p=s.get(e);if(p&&s.get(t))return p==t;var b=!0;s.set(e,t),s.set(t,e);for(var m=a;++l<u;){h=c[l];var g=e[h],y=t[h];if(i)var v=a?i(y,g,h,t,e,s):i(g,y,h,e,t,s);if(!(v===r?g===y||o(g,y,n,i,s):v)){b=!1;break}m||(m="constructor"==h)}if(b&&!m){var _=e.constructor,$=t.constructor;_!=$&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof $&&$ instanceof $)&&(b=!1)}return s.delete(e),s.delete(t),b}(e,t,n,i,o,s))}(e,t,n,i,oi,o))}function si(e,t,n,i){var o=n.length,s=o,a=!i;if(null==e)return!s;for(e=tt(e);o--;){var c=n[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=n[o])[0],f=e[u],l=c[1];if(a&&c[2]){if(f===r&&!(u in e))return!1}else{var p=new Sn;if(i)var b=i(f,l,u,e,t,p);if(!(b===r?oi(l,f,d|h,i,p):b))return!1}}return!0}function ai(e){return!(!ka(e)||function(e){return!!dt&&dt in e}(e))&&(wa(e)?vt:Ke).test(ls(e))}function ci(e){return"function"==typeof e?e:null==e?Bc:"object"==typeof e?ga(e)?pi(e[0],e[1]):hi(e):Fc(e)}function ui(e){if(!Yo(e))return Kr(e);var t=[];for(var r in tt(e))ft.call(e,r)&&"constructor"!=r&&t.push(r);return t}function fi(e){if(!ka(e))return function(e){var t=[];if(null!=e)for(var r in tt(e))t.push(r);return t}(e);var t=Yo(e),r=[];for(var n in e)("constructor"!=n||!t&&ft.call(e,n))&&r.push(n);return r}function li(e,t){return e<t}function di(e,t){var r=-1,n=va(e)?Xe(e.length):[];return Fn(e,function(e,i,o){n[++r]=t(e,i,o)}),n}function hi(e){var t=Do(e);return 1==t.length&&t[0][2]?Qo(t[0][0],t[0][1]):function(r){return r===e||si(r,e,t)}}function pi(e,t){return Wo(e)&&Zo(t)?Qo(fs(e),t):function(n){var i=Qa(n,e);return i===r&&i===t?ec(n,e):oi(t,i,d|h)}}function bi(e,t,n,i,o){e!==t&&Vn(t,function(s,a){if(ka(s))o||(o=new Sn),function(e,t,n,i,o,s,a){var c=rs(e,n),u=rs(t,n),f=a.get(u);if(f)kn(e,n,f);else{var l=s?s(c,u,n+"",e,t,a):r,d=l===r;if(d){var h=ga(u),p=!h&&$a(u),b=!h&&!p&&La(u);l=u,h||p||b?ga(c)?l=c:_a(c)?l=ro(c):p?(d=!1,l=Xi(u,!0)):b?(d=!1,l=Zi(u,!0)):l=[]:Pa(u)||ma(u)?(l=c,ma(c)?l=Ga(c):ka(c)&&!wa(c)||(l=Go(u))):d=!1}d&&(a.set(u,l),o(l,u,i,s,a),a.delete(u)),kn(e,n,l)}}(e,t,a,n,bi,i,o);else{var c=i?i(rs(e,a),s,a+"",e,t,o):r;c===r&&(c=s),kn(e,a,c)}},oc)}function mi(e,t){var n=e.length;if(n)return zo(t+=t<0?n:0,n)?e[t]:r}function gi(e,t,r){var n=-1;return t=Xt(t.length?t:[Bc],hr(Lo())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(di(e,function(e,r,i){return{criteria:Xt(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;++n<s;){var c=Qi(i[n],o[n]);if(c){if(n>=a)return c;var u=r[n];return c*("desc"==u?-1:1)}}return e.index-t.index}(e,t,r)})}function yi(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=Xn(e,s);r(a,s)&&Ai(o,zi(s,e),a)}return o}function vi(e,t,r,n){var i=n?or:ir,o=-1,s=t.length,a=e;for(e===t&&(t=ro(t)),r&&(a=Xt(e,hr(r)));++o<s;)for(var c=0,u=t[o],f=r?r(u):u;(c=i(a,f,c,n))>-1;)a!==e&&tr.call(a,c,1),tr.call(e,c,1);return e}function _i(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;zo(i)?tr.call(e,i,1):Di(e,i)}}return e}function $i(e,t){return e+Dr(Wr()*(t-e+1))}function Si(e,t){var r="";if(!e||t<1||t>P)return r;do{t%2&&(r+=e),(t=Dr(t/2))&&(e+=e)}while(t);return r}function Ei(e,t){return os(es(e,t,Bc),e+"")}function wi(e){return wn(hc(e))}function Ci(e,t){var r=hc(e);return cs(r,Nn(t,0,r.length))}function Ai(e,t,n,i){if(!ka(e))return e;for(var o=-1,s=(t=zi(t,e)).length,a=s-1,c=e;null!=c&&++o<s;){var u=fs(t[o]),f=n;if(o!=a){var l=c[u];(f=i?i(l,u,c):r)===r&&(f=ka(l)?l:zo(t[o+1])?[]:{})}Tn(c,u,f),c=c[u]}return e}var ki=rn?function(e,t){return rn.set(e,t),e}:Bc,Ti=Or?function(e,t){return Or(e,"toString",{configurable:!0,enumerable:!1,value:kc(t),writable:!0})}:Bc;function Ii(e){return cs(hc(e))}function Bi(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Xe(i);++n<i;)o[n]=e[n+t];return o}function Pi(e,t){var r;return Fn(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}function Ri(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=L){for(;n<i;){var o=n+i>>>1,s=e[o];null!==s&&!xa(s)&&(r?s<=t:s<t)?n=o+1:i=o}return i}return Oi(e,t,Bc,r)}function Oi(e,t,n,i){t=n(t);for(var o=0,s=null==e?0:e.length,a=t!=t,c=null===t,u=xa(t),f=t===r;o<s;){var l=Dr((o+s)/2),d=n(e[l]),h=d!==r,p=null===d,b=d==d,m=xa(d);if(a)var g=i||b;else g=f?b&&(i||h):c?b&&h&&(i||!p):u?b&&h&&!p&&(i||!m):!p&&!m&&(i?d<=t:d<t);g?o=l+1:s=l}return Vr(s,x)}function Ni(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r],a=t?t(s):s;if(!r||!ha(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function xi(e){return"number"==typeof e?e:xa(e)?O:+e}function Li(e){if("string"==typeof e)return e;if(ga(e))return Xt(e,Li)+"";if(xa(e))return dn?dn.call(e):"";var t=e+"";return"0"==t&&1/e==-B?"-0":t}function Mi(e,t,r){var i=-1,o=Wt,s=e.length,a=!0,c=[],u=c;if(r)a=!1,o=Jt;else if(s>=n){var f=t?null:Eo(e);if(f)return Cr(f);a=!1,o=br,u=new $n}else u=t?[]:c;e:for(;++i<s;){var l=e[i],d=t?t(l):l;if(l=r||0!==l?l:0,a&&d==d){for(var h=u.length;h--;)if(u[h]===d)continue e;t&&u.push(d),c.push(l)}else o(u,d,r)||(u!==c&&u.push(d),c.push(l))}return c}function Di(e,t){return null==(e=ts(e,t=zi(t,e)))||delete e[fs(Es(t))]}function Fi(e,t,r,n){return Ai(e,t,r(Xn(e,t)),n)}function ji(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?Bi(e,n?0:o,n?o+1:i):Bi(e,n?o+1:0,n?i:o)}function Ui(e,t){var r=e;return r instanceof gn&&(r=r.value()),Zt(t,function(e,t){return t.func.apply(t.thisArg,Yt([e],t.args))},r)}function Hi(e,t,r){var n=e.length;if(n<2)return n?Mi(e[0]):[];for(var i=-1,o=Xe(n);++i<n;)for(var s=e[i],a=-1;++a<n;)a!=i&&(o[i]=Dn(o[i]||s,e[a],t,r));return Mi(Gn(o,1),t,r)}function Ki(e,t,n){for(var i=-1,o=e.length,s=t.length,a={};++i<o;){var c=i<s?t[i]:r;n(a,e[i],c)}return a}function Gi(e){return _a(e)?e:[]}function Vi(e){return"function"==typeof e?e:Bc}function zi(e,t){return ga(e)?e:Wo(e,t)?[e]:us(Va(e))}var qi=Ei;function Wi(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:Bi(e,t,n)}var Ji=Nr||function(e){return Bt.clearTimeout(e)};function Xi(e,t){if(t)return e.slice();var r=e.length,n=Pt?Pt(r):new e.constructor(r);return e.copy(n),n}function Yi(e){var t=new e.constructor(e.byteLength);return new It(t).set(new It(e)),t}function Zi(e,t){var r=t?Yi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Qi(e,t){if(e!==t){var n=e!==r,i=null===e,o=e==e,s=xa(e),a=t!==r,c=null===t,u=t==t,f=xa(t);if(!c&&!f&&!s&&e>t||s&&a&&u&&!c&&!f||i&&a&&u||!n&&u||!o)return 1;if(!i&&!s&&!f&&e<t||f&&n&&o&&!i&&!s||c&&n&&o||!a&&o||!u)return-1}return 0}function eo(e,t,r,n){for(var i=-1,o=e.length,s=r.length,a=-1,c=t.length,u=Gr(o-s,0),f=Xe(c+u),l=!n;++a<c;)f[a]=t[a];for(;++i<s;)(l||i<o)&&(f[r[i]]=e[i]);for(;u--;)f[a++]=e[i++];return f}function to(e,t,r,n){for(var i=-1,o=e.length,s=-1,a=r.length,c=-1,u=t.length,f=Gr(o-a,0),l=Xe(f+u),d=!n;++i<f;)l[i]=e[i];for(var h=i;++c<u;)l[h+c]=t[c];for(;++s<a;)(d||i<o)&&(l[h+r[s]]=e[i++]);return l}function ro(e,t){var r=-1,n=e.length;for(t||(t=Xe(n));++r<n;)t[r]=e[r];return t}function no(e,t,n,i){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var c=t[s],u=i?i(n[c],e[c],c,n,e):r;u===r&&(u=e[c]),o?Rn(n,c,u):Tn(n,c,u)}return n}function io(e,t){return function(r,n){var i=ga(r)?Kt:Bn,o=t?t():{};return i(r,e,Lo(n,2),o)}}function oo(e){return Ei(function(t,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,a=o>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(o--,s):r,a&&qo(n[0],n[1],a)&&(s=o<3?r:s,o=1),t=tt(t);++i<o;){var c=n[i];c&&e(t,c,i,s)}return t})}function so(e,t){return function(r,n){if(null==r)return r;if(!va(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=tt(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function ao(e){return function(t,r,n){for(var i=-1,o=tt(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}}function co(e){return function(t){var n=$r(t=Va(t))?Tr(t):r,i=n?n[0]:t.charAt(0),o=n?Wi(n,1).join(""):t.slice(1);return i[e]()+o}}function uo(e){return function(t){return Zt(wc(mc(t).replace(bt,"")),e,"")}}function fo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=pn(e.prototype),n=e.apply(r,t);return ka(n)?n:r}}function lo(e){return function(t,n,i){var o=tt(t);if(!va(t)){var s=Lo(n,3);t=ic(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,i);return a>-1?o[s?t[a]:a]:r}}function ho(e){return Bo(function(t){var n=t.length,i=n,s=mn.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new it(o);if(s&&!c&&"wrapper"==No(a))var c=new mn([],!0)}for(i=c?i:n;++i<n;){var u=No(a=t[i]),f="wrapper"==u?Oo(a):r;c=f&&Jo(f[0])&&f[1]==($|g|v|S)&&!f[4].length&&1==f[9]?c[No(f[0])].apply(c,f[3]):1==a.length&&Jo(a)?c[u]():c.thru(a)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&ga(r))return c.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function po(e,t,n,i,o,s,a,c,u,f){var l=t&$,d=t&p,h=t&b,m=t&(g|y),v=t&E,_=h?r:fo(e);return function p(){for(var b=arguments.length,g=Xe(b),y=b;y--;)g[y]=arguments[y];if(m)var $=xo(p),S=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(g,$);if(i&&(g=eo(g,i,o,m)),s&&(g=to(g,s,a,m)),b-=S,m&&b<f){var E=wr(g,$);return $o(e,t,po,p.placeholder,n,g,E,c,u,f-b)}var w=d?n:this,C=h?w[e]:e;return b=g.length,c?g=function(e,t){for(var n=e.length,i=Vr(t.length,n),o=ro(e);i--;){var s=t[i];e[i]=zo(s,n)?o[s]:r}return e}(g,c):v&&b>1&&g.reverse(),l&&u<b&&(g.length=u),this&&this!==Bt&&this instanceof p&&(C=_||fo(C)),C.apply(w,g)}}function bo(e,t){return function(r,n){return function(e,t,r,n){return qn(e,function(e,i,o){t(n,r(e),i,o)}),n}(r,e,t(n),{})}}function mo(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=Li(n),i=Li(i)):(n=xi(n),i=xi(i)),o=e(n,i)}return o}}function go(e){return Bo(function(t){return t=Xt(t,hr(Lo())),Ei(function(r){var n=this;return e(t,function(e){return Ht(e,n,r)})})})}function yo(e,t){var n=(t=t===r?" ":Li(t)).length;if(n<2)return n?Si(t,e):t;var i=Si(t,Mr(e/kr(t)));return $r(t)?Wi(Tr(i),0,e).join(""):i.slice(0,e)}function vo(e){return function(t,n,i){return i&&"number"!=typeof i&&qo(t,n,i)&&(n=i=r),t=ja(t),n===r?(n=t,t=0):n=ja(n),function(e,t,r,n){for(var i=-1,o=Gr(Mr((t-e)/(r||1)),0),s=Xe(o);o--;)s[n?o:++i]=e,e+=r;return s}(t,n,i=i===r?t<n?1:-1:ja(i),e)}}function _o(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Ka(t),r=Ka(r)),e(t,r)}}function $o(e,t,n,i,o,s,a,c,u,f){var l=t&g;t|=l?v:_,(t&=~(l?_:v))&m||(t&=~(p|b));var d=[e,t,o,l?s:r,l?a:r,l?r:s,l?r:a,c,u,f],h=n.apply(r,d);return Jo(e)&&ns(h,d),h.placeholder=i,ss(h,e,t)}function So(e){var t=et[e];return function(e,r){if(e=Ka(e),r=null==r?0:Vr(Ua(r),292)){var n=(Va(e)+"e").split("e");return+((n=(Va(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Eo=Qr&&1/Cr(new Qr([,-0]))[1]==B?function(e){return new Qr(e)}:xc;function wo(e){return function(t){var r=Ho(t);return r==q?Sr(t):r==Q?Ar(t):function(e,t){return Xt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Co(e,t,n,i,s,a,u,f){var l=t&b;if(!l&&"function"!=typeof e)throw new it(o);var d=i?i.length:0;if(d||(t&=~(v|_),i=s=r),u=u===r?u:Gr(Ua(u),0),f=f===r?f:Ua(f),d-=s?s.length:0,t&_){var h=i,E=s;i=s=r}var w=l?r:Oo(e),C=[e,t,n,i,s,h,E,a,u,f];if(w&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<(p|b|$),s=n==$&&r==g||n==$&&r==S&&e[7].length<=t[8]||n==($|S)&&t[7].length<=t[8]&&r==g;if(!o&&!s)return e;n&p&&(e[2]=t[2],i|=r&p?0:m);var a=t[3];if(a){var u=e[3];e[3]=u?eo(u,a,t[4]):a,e[4]=u?wr(e[3],c):t[4]}(a=t[5])&&(u=e[5],e[5]=u?to(u,a,t[6]):a,e[6]=u?wr(e[5],c):t[6]),(a=t[7])&&(e[7]=a),n&$&&(e[8]=null==e[8]?t[8]:Vr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(C,w),e=C[0],t=C[1],n=C[2],i=C[3],s=C[4],!(f=C[9]=C[9]===r?l?0:e.length:Gr(C[9]-d,0))&&t&(g|y)&&(t&=~(g|y)),t&&t!=p)A=t==g||t==y?function(e,t,n){var i=fo(e);return function o(){for(var s=arguments.length,a=Xe(s),c=s,u=xo(o);c--;)a[c]=arguments[c];var f=s<3&&a[0]!==u&&a[s-1]!==u?[]:wr(a,u);return(s-=f.length)<n?$o(e,t,po,o.placeholder,r,a,f,r,r,n-s):Ht(this&&this!==Bt&&this instanceof o?i:e,this,a)}}(e,t,f):t!=v&&t!=(p|v)||s.length?po.apply(r,C):function(e,t,r,n){var i=t&p,o=fo(e);return function t(){for(var s=-1,a=arguments.length,c=-1,u=n.length,f=Xe(u+a),l=this&&this!==Bt&&this instanceof t?o:e;++c<u;)f[c]=n[c];for(;a--;)f[c++]=arguments[++s];return Ht(l,i?r:this,f)}}(e,t,n,i);else var A=function(e,t,r){var n=t&p,i=fo(e);return function t(){return(this&&this!==Bt&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,n);return ss((w?ki:ns)(A,C),e,t)}function Ao(e,t,n,i){return e===r||ha(e,at[n])&&!ft.call(i,n)?t:e}function ko(e,t,n,i,o,s){return ka(e)&&ka(t)&&(s.set(t,e),bi(e,t,r,ko,s),s.delete(t)),e}function To(e){return Pa(e)?r:e}function Io(e,t,n,i,o,s){var a=n&d,c=e.length,u=t.length;if(c!=u&&!(a&&u>c))return!1;var f=s.get(e);if(f&&s.get(t))return f==t;var l=-1,p=!0,b=n&h?new $n:r;for(s.set(e,t),s.set(t,e);++l<c;){var m=e[l],g=t[l];if(i)var y=a?i(g,m,l,t,e,s):i(m,g,l,e,t,s);if(y!==r){if(y)continue;p=!1;break}if(b){if(!er(t,function(e,t){if(!br(b,t)&&(m===e||o(m,e,n,i,s)))return b.push(t)})){p=!1;break}}else if(m!==g&&!o(m,g,n,i,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function Bo(e){return os(es(e,r,ys),e+"")}function Po(e){return Yn(e,ic,jo)}function Ro(e){return Yn(e,oc,Uo)}var Oo=rn?function(e){return rn.get(e)}:xc;function No(e){for(var t=e.name+"",r=nn[t],n=ft.call(nn,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function xo(e){return(ft.call(hn,"placeholder")?hn:e).placeholder}function Lo(){var e=hn.iteratee||Pc;return e=e===Pc?ci:e,arguments.length?e(arguments[0],arguments[1]):e}function Mo(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Do(e){for(var t=ic(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Zo(i)]}return t}function Fo(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return ai(n)?n:r}var jo=Fr?function(e){return null==e?[]:(e=tt(e),qt(Fr(e),function(t){return xt.call(e,t)}))}:Hc,Uo=Fr?function(e){for(var t=[];e;)Yt(t,jo(e)),e=Rt(e);return t}:Hc,Ho=Zn;function Ko(e,t,r){for(var n=-1,i=(t=zi(t,e)).length,o=!1;++n<i;){var s=fs(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Aa(i)&&zo(s,i)&&(ga(e)||ma(e))}function Go(e){return"function"!=typeof e.constructor||Yo(e)?{}:pn(Rt(e))}function Vo(e){return ga(e)||ma(e)||!!(ur&&e&&e[ur])}function zo(e,t){var r=typeof e;return!!(t=null==t?P:t)&&("number"==r||"symbol"!=r&&Ve.test(e))&&e>-1&&e%1==0&&e<t}function qo(e,t,r){if(!ka(r))return!1;var n=typeof t;return!!("number"==n?va(r)&&zo(t,r.length):"string"==n&&t in r)&&ha(r[t],e)}function Wo(e,t){if(ga(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!xa(e))||ke.test(e)||!Ae.test(e)||null!=t&&e in tt(t)}function Jo(e){var t=No(e),r=hn[t];if("function"!=typeof r||!(t in gn.prototype))return!1;if(e===r)return!0;var n=Oo(r);return!!n&&e===n[0]}(Xr&&Ho(new Xr(new ArrayBuffer(1)))!=se||Yr&&Ho(new Yr)!=q||Zr&&"[object Promise]"!=Ho(Zr.resolve())||Qr&&Ho(new Qr)!=Q||en&&Ho(new en)!=ne)&&(Ho=function(e){var t=Zn(e),n=t==X?e.constructor:r,i=n?ls(n):"";if(i)switch(i){case on:return se;case sn:return q;case an:return"[object Promise]";case cn:return Q;case un:return ne}return t});var Xo=ct?wa:Kc;function Yo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||at)}function Zo(e){return e==e&&!ka(e)}function Qo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==r||e in tt(n))}}function es(e,t,n){return t=Gr(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Gr(r.length-t,0),s=Xe(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Xe(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),Ht(e,this,a)}}function ts(e,t){return t.length<2?e:Xn(e,Bi(t,0,-1))}function rs(e,t){if("__proto__"!=t)return e[t]}var ns=as(ki),is=Lr||function(e,t){return Bt.setTimeout(e,t)},os=as(Ti);function ss(e,t,r){var n=t+"";return os(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Ne,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Gt(M,function(r){var n="_."+r[0];t&r[1]&&!Wt(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(xe);return t?t[1].split(Le):[]}(n),r)))}function as(e){var t=0,n=0;return function(){var i=zr(),o=k-(i-n);if(n=i,o>0){if(++t>=A)return arguments[0]}else t=0;return e.apply(r,arguments)}}function cs(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var s=$i(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var us=function(e){var t=aa(e,function(e){return r.size===a&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Te,function(e,r,n,i){t.push(n?i.replace(De,"$1"):r||e)}),t});function fs(e){if("string"==typeof e||xa(e))return e;var t=e+"";return"0"==t&&1/e==-B?"-0":t}function ls(e){if(null!=e){try{return ut.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ds(e){if(e instanceof gn)return e.clone();var t=new mn(e.__wrapped__,e.__chain__);return t.__actions__=ro(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var hs=Ei(function(e,t){return _a(e)?Dn(e,Gn(t,1,_a,!0)):[]}),ps=Ei(function(e,t){var n=Es(t);return _a(n)&&(n=r),_a(e)?Dn(e,Gn(t,1,_a,!0),Lo(n,2)):[]}),bs=Ei(function(e,t){var n=Es(t);return _a(n)&&(n=r),_a(e)?Dn(e,Gn(t,1,_a,!0),r,n):[]});function ms(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:Ua(r);return i<0&&(i=Gr(n+i,0)),nr(e,Lo(t,3),i)}function gs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=Ua(n),o=n<0?Gr(i+o,0):Vr(o,i-1)),nr(e,Lo(t,3),o,!0)}function ys(e){return null!=e&&e.length?Gn(e,1):[]}function vs(e){return e&&e.length?e[0]:r}var _s=Ei(function(e){var t=Xt(e,Gi);return t.length&&t[0]===e[0]?ri(t):[]}),$s=Ei(function(e){var t=Es(e),n=Xt(e,Gi);return t===Es(n)?t=r:n.pop(),n.length&&n[0]===e[0]?ri(n,Lo(t,2)):[]}),Ss=Ei(function(e){var t=Es(e),n=Xt(e,Gi);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?ri(n,r,t):[]});function Es(e){var t=null==e?0:e.length;return t?e[t-1]:r}var ws=Ei(Cs);function Cs(e,t){return e&&e.length&&t&&t.length?vi(e,t):e}var As=Bo(function(e,t){var r=null==e?0:e.length,n=On(e,t);return _i(e,Xt(t,function(e){return zo(e,r)?+e:e}).sort(Qi)),n});function ks(e){return null==e?e:Jr.call(e)}var Ts=Ei(function(e){return Mi(Gn(e,1,_a,!0))}),Is=Ei(function(e){var t=Es(e);return _a(t)&&(t=r),Mi(Gn(e,1,_a,!0),Lo(t,2))}),Bs=Ei(function(e){var t=Es(e);return t="function"==typeof t?t:r,Mi(Gn(e,1,_a,!0),r,t)});function Ps(e){if(!e||!e.length)return[];var t=0;return e=qt(e,function(e){if(_a(e))return t=Gr(e.length,t),!0}),dr(t,function(t){return Xt(e,cr(t))})}function Rs(e,t){if(!e||!e.length)return[];var n=Ps(e);return null==t?n:Xt(n,function(e){return Ht(t,r,e)})}var Os=Ei(function(e,t){return _a(e)?Dn(e,t):[]}),Ns=Ei(function(e){return Hi(qt(e,_a))}),xs=Ei(function(e){var t=Es(e);return _a(t)&&(t=r),Hi(qt(e,_a),Lo(t,2))}),Ls=Ei(function(e){var t=Es(e);return t="function"==typeof t?t:r,Hi(qt(e,_a),r,t)}),Ms=Ei(Ps);var Ds=Ei(function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,Rs(e,n)});function Fs(e){var t=hn(e);return t.__chain__=!0,t}function js(e,t){return t(e)}var Us=Bo(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return On(t,e)};return!(t>1||this.__actions__.length)&&i instanceof gn&&zo(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:js,args:[o],thisArg:r}),new mn(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(r),e})):this.thru(o)});var Hs=io(function(e,t,r){ft.call(e,r)?++e[r]:Rn(e,r,1)});var Ks=lo(ms),Gs=lo(gs);function Vs(e,t){return(ga(e)?Gt:Fn)(e,Lo(t,3))}function zs(e,t){return(ga(e)?Vt:jn)(e,Lo(t,3))}var qs=io(function(e,t,r){ft.call(e,r)?e[r].push(t):Rn(e,r,[t])});var Ws=Ei(function(e,t,r){var n=-1,i="function"==typeof t,o=va(e)?Xe(e.length):[];return Fn(e,function(e){o[++n]=i?Ht(t,e,r):ni(e,t,r)}),o}),Js=io(function(e,t,r){Rn(e,r,t)});function Xs(e,t){return(ga(e)?Xt:di)(e,Lo(t,3))}var Ys=io(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var Zs=Ei(function(e,t){if(null==e)return[];var r=t.length;return r>1&&qo(e,t[0],t[1])?t=[]:r>2&&qo(t[0],t[1],t[2])&&(t=[t[0]]),gi(e,Gn(t,1),[])}),Qs=xr||function(){return Bt.Date.now()};function ea(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Co(e,$,r,r,r,r,t)}function ta(e,t){var n;if("function"!=typeof t)throw new it(o);return e=Ua(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var ra=Ei(function(e,t,r){var n=p;if(r.length){var i=wr(r,xo(ra));n|=v}return Co(e,n,t,r,i)}),na=Ei(function(e,t,r){var n=p|b;if(r.length){var i=wr(r,xo(na));n|=v}return Co(t,n,e,r,i)});function ia(e,t,n){var i,s,a,c,u,f,l=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new it(o);function b(t){var n=i,o=s;return i=s=r,l=t,c=e.apply(o,n)}function m(e){var n=e-f;return f===r||n>=t||n<0||h&&e-l>=a}function g(){var e=Qs();if(m(e))return y(e);u=is(g,function(e){var r=t-(e-f);return h?Vr(r,a-(e-l)):r}(e))}function y(e){return u=r,p&&i?b(e):(i=s=r,c)}function v(){var e=Qs(),n=m(e);if(i=arguments,s=this,f=e,n){if(u===r)return function(e){return l=e,u=is(g,t),d?b(e):c}(f);if(h)return u=is(g,t),b(f)}return u===r&&(u=is(g,t)),c}return t=Ka(t)||0,ka(n)&&(d=!!n.leading,a=(h="maxWait"in n)?Gr(Ka(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),v.cancel=function(){u!==r&&Ji(u),l=0,i=f=s=u=r},v.flush=function(){return u===r?c:y(Qs())},v}var oa=Ei(function(e,t){return Mn(e,1,t)}),sa=Ei(function(e,t,r){return Mn(e,Ka(t)||0,r)});function aa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(o);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(aa.Cache||_n),r}function ca(e){if("function"!=typeof e)throw new it(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}aa.Cache=_n;var ua=qi(function(e,t){var r=(t=1==t.length&&ga(t[0])?Xt(t[0],hr(Lo())):Xt(Gn(t,1),hr(Lo()))).length;return Ei(function(n){for(var i=-1,o=Vr(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return Ht(e,this,n)})}),fa=Ei(function(e,t){var n=wr(t,xo(fa));return Co(e,v,r,t,n)}),la=Ei(function(e,t){var n=wr(t,xo(la));return Co(e,_,r,t,n)}),da=Bo(function(e,t){return Co(e,S,r,r,r,t)});function ha(e,t){return e===t||e!=e&&t!=t}var pa=_o(Qn),ba=_o(function(e,t){return e>=t}),ma=ii(function(){return arguments}())?ii:function(e){return Ta(e)&&ft.call(e,"callee")&&!xt.call(e,"callee")},ga=Xe.isArray,ya=Lt?hr(Lt):function(e){return Ta(e)&&Zn(e)==oe};function va(e){return null!=e&&Aa(e.length)&&!wa(e)}function _a(e){return Ta(e)&&va(e)}var $a=jr||Kc,Sa=Mt?hr(Mt):function(e){return Ta(e)&&Zn(e)==H};function Ea(e){if(!Ta(e))return!1;var t=Zn(e);return t==G||t==K||"string"==typeof e.message&&"string"==typeof e.name&&!Pa(e)}function wa(e){if(!ka(e))return!1;var t=Zn(e);return t==V||t==z||t==j||t==Y}function Ca(e){return"number"==typeof e&&e==Ua(e)}function Aa(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=P}function ka(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ta(e){return null!=e&&"object"==typeof e}var Ia=Dt?hr(Dt):function(e){return Ta(e)&&Ho(e)==q};function Ba(e){return"number"==typeof e||Ta(e)&&Zn(e)==W}function Pa(e){if(!Ta(e)||Zn(e)!=X)return!1;var t=Rt(e);if(null===t)return!0;var r=ft.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&ut.call(r)==pt}var Ra=Ft?hr(Ft):function(e){return Ta(e)&&Zn(e)==Z};var Oa=jt?hr(jt):function(e){return Ta(e)&&Ho(e)==Q};function Na(e){return"string"==typeof e||!ga(e)&&Ta(e)&&Zn(e)==ee}function xa(e){return"symbol"==typeof e||Ta(e)&&Zn(e)==te}var La=Ut?hr(Ut):function(e){return Ta(e)&&Aa(e.length)&&!!Et[Zn(e)]};var Ma=_o(li),Da=_o(function(e,t){return e<=t});function Fa(e){if(!e)return[];if(va(e))return Na(e)?Tr(e):ro(e);if(Pr&&e[Pr])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Pr]());var t=Ho(e);return(t==q?Sr:t==Q?Cr:hc)(e)}function ja(e){return e?(e=Ka(e))===B||e===-B?(e<0?-1:1)*R:e==e?e:0:0===e?e:0}function Ua(e){var t=ja(e),r=t%1;return t==t?r?t-r:t:0}function Ha(e){return e?Nn(Ua(e),0,N):0}function Ka(e){if("number"==typeof e)return e;if(xa(e))return O;if(ka(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ka(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Pe,"");var r=He.test(e);return r||Ge.test(e)?kt(e.slice(2),r?2:8):Ue.test(e)?O:+e}function Ga(e){return no(e,oc(e))}function Va(e){return null==e?"":Li(e)}var za=oo(function(e,t){if(Yo(t)||va(t))no(t,ic(t),e);else for(var r in t)ft.call(t,r)&&Tn(e,r,t[r])}),qa=oo(function(e,t){no(t,oc(t),e)}),Wa=oo(function(e,t,r,n){no(t,oc(t),e,n)}),Ja=oo(function(e,t,r,n){no(t,ic(t),e,n)}),Xa=Bo(On);var Ya=Ei(function(e,t){e=tt(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&qo(t[0],t[1],o)&&(i=1);++n<i;)for(var s=t[n],a=oc(s),c=-1,u=a.length;++c<u;){var f=a[c],l=e[f];(l===r||ha(l,at[f])&&!ft.call(e,f))&&(e[f]=s[f])}return e}),Za=Ei(function(e){return e.push(r,ko),Ht(ac,r,e)});function Qa(e,t,n){var i=null==e?r:Xn(e,t);return i===r?n:i}function ec(e,t){return null!=e&&Ko(e,t,ti)}var tc=bo(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ht.call(t)),e[t]=r},kc(Bc)),rc=bo(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ht.call(t)),ft.call(e,t)?e[t].push(r):e[t]=[r]},Lo),nc=Ei(ni);function ic(e){return va(e)?En(e):ui(e)}function oc(e){return va(e)?En(e,!0):fi(e)}var sc=oo(function(e,t,r){bi(e,t,r)}),ac=oo(function(e,t,r,n){bi(e,t,r,n)}),cc=Bo(function(e,t){var r={};if(null==e)return r;var n=!1;t=Xt(t,function(t){return t=zi(t,e),n||(n=t.length>1),t}),no(e,Ro(e),r),n&&(r=xn(r,u|f|l,To));for(var i=t.length;i--;)Di(r,t[i]);return r});var uc=Bo(function(e,t){return null==e?{}:function(e,t){return yi(e,t,function(t,r){return ec(e,r)})}(e,t)});function fc(e,t){if(null==e)return{};var r=Xt(Ro(e),function(e){return[e]});return t=Lo(t),yi(e,r,function(e,r){return t(e,r[0])})}var lc=wo(ic),dc=wo(oc);function hc(e){return null==e?[]:pr(e,ic(e))}var pc=uo(function(e,t,r){return t=t.toLowerCase(),e+(r?bc(t):t)});function bc(e){return Ec(Va(e).toLowerCase())}function mc(e){return(e=Va(e))&&e.replace(ze,yr).replace(mt,"")}var gc=uo(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),yc=uo(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),vc=co("toLowerCase");var _c=uo(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});var $c=uo(function(e,t,r){return e+(r?" ":"")+Ec(t)});var Sc=uo(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Ec=co("toUpperCase");function wc(e,t,n){return e=Va(e),(t=n?r:t)===r?function(e){return _t.test(e)}(e)?function(e){return e.match(yt)||[]}(e):function(e){return e.match(Me)||[]}(e):e.match(t)||[]}var Cc=Ei(function(e,t){try{return Ht(e,r,t)}catch(e){return Ea(e)?e:new Ze(e)}}),Ac=Bo(function(e,t){return Gt(t,function(t){t=fs(t),Rn(e,t,ra(e[t],e))}),e});function kc(e){return function(){return e}}var Tc=ho(),Ic=ho(!0);function Bc(e){return e}function Pc(e){return ci("function"==typeof e?e:xn(e,u))}var Rc=Ei(function(e,t){return function(r){return ni(r,e,t)}}),Oc=Ei(function(e,t){return function(r){return ni(e,r,t)}});function Nc(e,t,r){var n=ic(t),i=Jn(t,n);null!=r||ka(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=Jn(t,ic(t)));var o=!(ka(r)&&"chain"in r&&!r.chain),s=wa(e);return Gt(i,function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=ro(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Yt([this.value()],arguments))})}),e}function xc(){}var Lc=go(Xt),Mc=go(zt),Dc=go(er);function Fc(e){return Wo(e)?cr(fs(e)):function(e){return function(t){return Xn(t,e)}}(e)}var jc=vo(),Uc=vo(!0);function Hc(){return[]}function Kc(){return!1}var Gc=mo(function(e,t){return e+t},0),Vc=So("ceil"),zc=mo(function(e,t){return e/t},1),qc=So("floor");var Wc=mo(function(e,t){return e*t},1),Jc=So("round"),Xc=mo(function(e,t){return e-t},0);return hn.after=function(e,t){if("function"!=typeof t)throw new it(o);return e=Ua(e),function(){if(--e<1)return t.apply(this,arguments)}},hn.ary=ea,hn.assign=za,hn.assignIn=qa,hn.assignInWith=Wa,hn.assignWith=Ja,hn.at=Xa,hn.before=ta,hn.bind=ra,hn.bindAll=Ac,hn.bindKey=na,hn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return ga(e)?e:[e]},hn.chain=Fs,hn.chunk=function(e,t,n){t=(n?qo(e,t,n):t===r)?1:Gr(Ua(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,a=Xe(Mr(i/t));o<i;)a[s++]=Bi(e,o,o+=t);return a},hn.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},hn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Xe(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Yt(ga(r)?ro(r):[r],Gn(t,1))},hn.cond=function(e){var t=null==e?0:e.length,r=Lo();return e=t?Xt(e,function(e){if("function"!=typeof e[1])throw new it(o);return[r(e[0]),e[1]]}):[],Ei(function(r){for(var n=-1;++n<t;){var i=e[n];if(Ht(i[0],this,r))return Ht(i[1],this,r)}})},hn.conforms=function(e){return function(e){var t=ic(e);return function(r){return Ln(r,e,t)}}(xn(e,u))},hn.constant=kc,hn.countBy=Hs,hn.create=function(e,t){var r=pn(e);return null==t?r:Pn(r,t)},hn.curry=function e(t,n,i){var o=Co(t,g,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},hn.curryRight=function e(t,n,i){var o=Co(t,y,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},hn.debounce=ia,hn.defaults=Ya,hn.defaultsDeep=Za,hn.defer=oa,hn.delay=sa,hn.difference=hs,hn.differenceBy=ps,hn.differenceWith=bs,hn.drop=function(e,t,n){var i=null==e?0:e.length;return i?Bi(e,(t=n||t===r?1:Ua(t))<0?0:t,i):[]},hn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Bi(e,0,(t=i-(t=n||t===r?1:Ua(t)))<0?0:t):[]},hn.dropRightWhile=function(e,t){return e&&e.length?ji(e,Lo(t,3),!0,!0):[]},hn.dropWhile=function(e,t){return e&&e.length?ji(e,Lo(t,3),!0):[]},hn.fill=function(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&qo(e,t,n)&&(n=0,i=o),function(e,t,n,i){var o=e.length;for((n=Ua(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:Ua(i))<0&&(i+=o),i=n>i?0:Ha(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},hn.filter=function(e,t){return(ga(e)?qt:Kn)(e,Lo(t,3))},hn.flatMap=function(e,t){return Gn(Xs(e,t),1)},hn.flatMapDeep=function(e,t){return Gn(Xs(e,t),B)},hn.flatMapDepth=function(e,t,n){return n=n===r?1:Ua(n),Gn(Xs(e,t),n)},hn.flatten=ys,hn.flattenDeep=function(e){return null!=e&&e.length?Gn(e,B):[]},hn.flattenDepth=function(e,t){return null!=e&&e.length?Gn(e,t=t===r?1:Ua(t)):[]},hn.flip=function(e){return Co(e,E)},hn.flow=Tc,hn.flowRight=Ic,hn.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},hn.functions=function(e){return null==e?[]:Jn(e,ic(e))},hn.functionsIn=function(e){return null==e?[]:Jn(e,oc(e))},hn.groupBy=qs,hn.initial=function(e){return null!=e&&e.length?Bi(e,0,-1):[]},hn.intersection=_s,hn.intersectionBy=$s,hn.intersectionWith=Ss,hn.invert=tc,hn.invertBy=rc,hn.invokeMap=Ws,hn.iteratee=Pc,hn.keyBy=Js,hn.keys=ic,hn.keysIn=oc,hn.map=Xs,hn.mapKeys=function(e,t){var r={};return t=Lo(t,3),qn(e,function(e,n,i){Rn(r,t(e,n,i),e)}),r},hn.mapValues=function(e,t){var r={};return t=Lo(t,3),qn(e,function(e,n,i){Rn(r,n,t(e,n,i))}),r},hn.matches=function(e){return hi(xn(e,u))},hn.matchesProperty=function(e,t){return pi(e,xn(t,u))},hn.memoize=aa,hn.merge=sc,hn.mergeWith=ac,hn.method=Rc,hn.methodOf=Oc,hn.mixin=Nc,hn.negate=ca,hn.nthArg=function(e){return e=Ua(e),Ei(function(t){return mi(t,e)})},hn.omit=cc,hn.omitBy=function(e,t){return fc(e,ca(Lo(t)))},hn.once=function(e){return ta(2,e)},hn.orderBy=function(e,t,n,i){return null==e?[]:(ga(t)||(t=null==t?[]:[t]),ga(n=i?r:n)||(n=null==n?[]:[n]),gi(e,t,n))},hn.over=Lc,hn.overArgs=ua,hn.overEvery=Mc,hn.overSome=Dc,hn.partial=fa,hn.partialRight=la,hn.partition=Ys,hn.pick=uc,hn.pickBy=fc,hn.property=Fc,hn.propertyOf=function(e){return function(t){return null==e?r:Xn(e,t)}},hn.pull=ws,hn.pullAll=Cs,hn.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?vi(e,t,Lo(r,2)):e},hn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?vi(e,t,r,n):e},hn.pullAt=As,hn.range=jc,hn.rangeRight=Uc,hn.rearg=da,hn.reject=function(e,t){return(ga(e)?qt:Kn)(e,ca(Lo(t,3)))},hn.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=Lo(t,3);++n<o;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return _i(e,i),r},hn.rest=function(e,t){if("function"!=typeof e)throw new it(o);return Ei(e,t=t===r?t:Ua(t))},hn.reverse=ks,hn.sampleSize=function(e,t,n){return t=(n?qo(e,t,n):t===r)?1:Ua(t),(ga(e)?Cn:Ci)(e,t)},hn.set=function(e,t,r){return null==e?e:Ai(e,t,r)},hn.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Ai(e,t,n,i)},hn.shuffle=function(e){return(ga(e)?An:Ii)(e)},hn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&qo(e,t,n)?(t=0,n=i):(t=null==t?0:Ua(t),n=n===r?i:Ua(n)),Bi(e,t,n)):[]},hn.sortBy=Zs,hn.sortedUniq=function(e){return e&&e.length?Ni(e):[]},hn.sortedUniqBy=function(e,t){return e&&e.length?Ni(e,Lo(t,2)):[]},hn.split=function(e,t,n){return n&&"number"!=typeof n&&qo(e,t,n)&&(t=n=r),(n=n===r?N:n>>>0)?(e=Va(e))&&("string"==typeof t||null!=t&&!Ra(t))&&!(t=Li(t))&&$r(e)?Wi(Tr(e),0,n):e.split(t,n):[]},hn.spread=function(e,t){if("function"!=typeof e)throw new it(o);return t=null==t?0:Gr(Ua(t),0),Ei(function(r){var n=r[t],i=Wi(r,0,t);return n&&Yt(i,n),Ht(e,this,i)})},hn.tail=function(e){var t=null==e?0:e.length;return t?Bi(e,1,t):[]},hn.take=function(e,t,n){return e&&e.length?Bi(e,0,(t=n||t===r?1:Ua(t))<0?0:t):[]},hn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Bi(e,(t=i-(t=n||t===r?1:Ua(t)))<0?0:t,i):[]},hn.takeRightWhile=function(e,t){return e&&e.length?ji(e,Lo(t,3),!1,!0):[]},hn.takeWhile=function(e,t){return e&&e.length?ji(e,Lo(t,3)):[]},hn.tap=function(e,t){return t(e),e},hn.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new it(o);return ka(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),ia(e,t,{leading:n,maxWait:t,trailing:i})},hn.thru=js,hn.toArray=Fa,hn.toPairs=lc,hn.toPairsIn=dc,hn.toPath=function(e){return ga(e)?Xt(e,fs):xa(e)?[e]:ro(us(Va(e)))},hn.toPlainObject=Ga,hn.transform=function(e,t,r){var n=ga(e),i=n||$a(e)||La(e);if(t=Lo(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:ka(e)&&wa(o)?pn(Rt(e)):{}}return(i?Gt:qn)(e,function(e,n,i){return t(r,e,n,i)}),r},hn.unary=function(e){return ea(e,1)},hn.union=Ts,hn.unionBy=Is,hn.unionWith=Bs,hn.uniq=function(e){return e&&e.length?Mi(e):[]},hn.uniqBy=function(e,t){return e&&e.length?Mi(e,Lo(t,2)):[]},hn.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?Mi(e,r,t):[]},hn.unset=function(e,t){return null==e||Di(e,t)},hn.unzip=Ps,hn.unzipWith=Rs,hn.update=function(e,t,r){return null==e?e:Fi(e,t,Vi(r))},hn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Fi(e,t,Vi(n),i)},hn.values=hc,hn.valuesIn=function(e){return null==e?[]:pr(e,oc(e))},hn.without=Os,hn.words=wc,hn.wrap=function(e,t){return fa(Vi(t),e)},hn.xor=Ns,hn.xorBy=xs,hn.xorWith=Ls,hn.zip=Ms,hn.zipObject=function(e,t){return Ki(e||[],t||[],Tn)},hn.zipObjectDeep=function(e,t){return Ki(e||[],t||[],Ai)},hn.zipWith=Ds,hn.entries=lc,hn.entriesIn=dc,hn.extend=qa,hn.extendWith=Wa,Nc(hn,hn),hn.add=Gc,hn.attempt=Cc,hn.camelCase=pc,hn.capitalize=bc,hn.ceil=Vc,hn.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=Ka(n))==n?n:0),t!==r&&(t=(t=Ka(t))==t?t:0),Nn(Ka(e),t,n)},hn.clone=function(e){return xn(e,l)},hn.cloneDeep=function(e){return xn(e,u|l)},hn.cloneDeepWith=function(e,t){return xn(e,u|l,t="function"==typeof t?t:r)},hn.cloneWith=function(e,t){return xn(e,l,t="function"==typeof t?t:r)},hn.conformsTo=function(e,t){return null==t||Ln(e,t,ic(t))},hn.deburr=mc,hn.defaultTo=function(e,t){return null==e||e!=e?t:e},hn.divide=zc,hn.endsWith=function(e,t,n){e=Va(e),t=Li(t);var i=e.length,o=n=n===r?i:Nn(Ua(n),0,i);return(n-=t.length)>=0&&e.slice(n,o)==t},hn.eq=ha,hn.escape=function(e){return(e=Va(e))&&Se.test(e)?e.replace(_e,vr):e},hn.escapeRegExp=function(e){return(e=Va(e))&&Be.test(e)?e.replace(Ie,"\\$&"):e},hn.every=function(e,t,n){var i=ga(e)?zt:Un;return n&&qo(e,t,n)&&(t=r),i(e,Lo(t,3))},hn.find=Ks,hn.findIndex=ms,hn.findKey=function(e,t){return rr(e,Lo(t,3),qn)},hn.findLast=Gs,hn.findLastIndex=gs,hn.findLastKey=function(e,t){return rr(e,Lo(t,3),Wn)},hn.floor=qc,hn.forEach=Vs,hn.forEachRight=zs,hn.forIn=function(e,t){return null==e?e:Vn(e,Lo(t,3),oc)},hn.forInRight=function(e,t){return null==e?e:zn(e,Lo(t,3),oc)},hn.forOwn=function(e,t){return e&&qn(e,Lo(t,3))},hn.forOwnRight=function(e,t){return e&&Wn(e,Lo(t,3))},hn.get=Qa,hn.gt=pa,hn.gte=ba,hn.has=function(e,t){return null!=e&&Ko(e,t,ei)},hn.hasIn=ec,hn.head=vs,hn.identity=Bc,hn.includes=function(e,t,r,n){e=va(e)?e:hc(e),r=r&&!n?Ua(r):0;var i=e.length;return r<0&&(r=Gr(i+r,0)),Na(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&ir(e,t,r)>-1},hn.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:Ua(r);return i<0&&(i=Gr(n+i,0)),ir(e,t,i)},hn.inRange=function(e,t,n){return t=ja(t),n===r?(n=t,t=0):n=ja(n),function(e,t,r){return e>=Vr(t,r)&&e<Gr(t,r)}(e=Ka(e),t,n)},hn.invoke=nc,hn.isArguments=ma,hn.isArray=ga,hn.isArrayBuffer=ya,hn.isArrayLike=va,hn.isArrayLikeObject=_a,hn.isBoolean=function(e){return!0===e||!1===e||Ta(e)&&Zn(e)==U},hn.isBuffer=$a,hn.isDate=Sa,hn.isElement=function(e){return Ta(e)&&1===e.nodeType&&!Pa(e)},hn.isEmpty=function(e){if(null==e)return!0;if(va(e)&&(ga(e)||"string"==typeof e||"function"==typeof e.splice||$a(e)||La(e)||ma(e)))return!e.length;var t=Ho(e);if(t==q||t==Q)return!e.size;if(Yo(e))return!ui(e).length;for(var r in e)if(ft.call(e,r))return!1;return!0},hn.isEqual=function(e,t){return oi(e,t)},hn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?oi(e,t,r,n):!!i},hn.isError=Ea,hn.isFinite=function(e){return"number"==typeof e&&Ur(e)},hn.isFunction=wa,hn.isInteger=Ca,hn.isLength=Aa,hn.isMap=Ia,hn.isMatch=function(e,t){return e===t||si(e,t,Do(t))},hn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,si(e,t,Do(t),n)},hn.isNaN=function(e){return Ba(e)&&e!=+e},hn.isNative=function(e){if(Xo(e))throw new Ze(i);return ai(e)},hn.isNil=function(e){return null==e},hn.isNull=function(e){return null===e},hn.isNumber=Ba,hn.isObject=ka,hn.isObjectLike=Ta,hn.isPlainObject=Pa,hn.isRegExp=Ra,hn.isSafeInteger=function(e){return Ca(e)&&e>=-P&&e<=P},hn.isSet=Oa,hn.isString=Na,hn.isSymbol=xa,hn.isTypedArray=La,hn.isUndefined=function(e){return e===r},hn.isWeakMap=function(e){return Ta(e)&&Ho(e)==ne},hn.isWeakSet=function(e){return Ta(e)&&Zn(e)==ie},hn.join=function(e,t){return null==e?"":Hr.call(e,t)},hn.kebabCase=gc,hn.last=Es,hn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=Ua(n))<0?Gr(i+o,0):Vr(o,i-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):nr(e,sr,o,!0)},hn.lowerCase=yc,hn.lowerFirst=vc,hn.lt=Ma,hn.lte=Da,hn.max=function(e){return e&&e.length?Hn(e,Bc,Qn):r},hn.maxBy=function(e,t){return e&&e.length?Hn(e,Lo(t,2),Qn):r},hn.mean=function(e){return ar(e,Bc)},hn.meanBy=function(e,t){return ar(e,Lo(t,2))},hn.min=function(e){return e&&e.length?Hn(e,Bc,li):r},hn.minBy=function(e,t){return e&&e.length?Hn(e,Lo(t,2),li):r},hn.stubArray=Hc,hn.stubFalse=Kc,hn.stubObject=function(){return{}},hn.stubString=function(){return""},hn.stubTrue=function(){return!0},hn.multiply=Wc,hn.nth=function(e,t){return e&&e.length?mi(e,Ua(t)):r},hn.noConflict=function(){return Bt._===this&&(Bt._=gt),this},hn.noop=xc,hn.now=Qs,hn.pad=function(e,t,r){e=Va(e);var n=(t=Ua(t))?kr(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return yo(Dr(i),r)+e+yo(Mr(i),r)},hn.padEnd=function(e,t,r){e=Va(e);var n=(t=Ua(t))?kr(e):0;return t&&n<t?e+yo(t-n,r):e},hn.padStart=function(e,t,r){e=Va(e);var n=(t=Ua(t))?kr(e):0;return t&&n<t?yo(t-n,r)+e:e},hn.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),qr(Va(e).replace(Re,""),t||0)},hn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&qo(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ja(e),t===r?(t=e,e=0):t=ja(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=Wr();return Vr(e+o*(t-e+At("1e-"+((o+"").length-1))),t)}return $i(e,t)},hn.reduce=function(e,t,r){var n=ga(e)?Zt:fr,i=arguments.length<3;return n(e,Lo(t,4),r,i,Fn)},hn.reduceRight=function(e,t,r){var n=ga(e)?Qt:fr,i=arguments.length<3;return n(e,Lo(t,4),r,i,jn)},hn.repeat=function(e,t,n){return t=(n?qo(e,t,n):t===r)?1:Ua(t),Si(Va(e),t)},hn.replace=function(){var e=arguments,t=Va(e[0]);return e.length<3?t:t.replace(e[1],e[2])},hn.result=function(e,t,n){var i=-1,o=(t=zi(t,e)).length;for(o||(o=1,e=r);++i<o;){var s=null==e?r:e[fs(t[i])];s===r&&(i=o,s=n),e=wa(s)?s.call(e):s}return e},hn.round=Jc,hn.runInContext=e,hn.sample=function(e){return(ga(e)?wn:wi)(e)},hn.size=function(e){if(null==e)return 0;if(va(e))return Na(e)?kr(e):e.length;var t=Ho(e);return t==q||t==Q?e.size:ui(e).length},hn.snakeCase=_c,hn.some=function(e,t,n){var i=ga(e)?er:Pi;return n&&qo(e,t,n)&&(t=r),i(e,Lo(t,3))},hn.sortedIndex=function(e,t){return Ri(e,t)},hn.sortedIndexBy=function(e,t,r){return Oi(e,t,Lo(r,2))},hn.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=Ri(e,t);if(n<r&&ha(e[n],t))return n}return-1},hn.sortedLastIndex=function(e,t){return Ri(e,t,!0)},hn.sortedLastIndexBy=function(e,t,r){return Oi(e,t,Lo(r,2),!0)},hn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=Ri(e,t,!0)-1;if(ha(e[r],t))return r}return-1},hn.startCase=$c,hn.startsWith=function(e,t,r){return e=Va(e),r=null==r?0:Nn(Ua(r),0,e.length),t=Li(t),e.slice(r,r+t.length)==t},hn.subtract=Xc,hn.sum=function(e){return e&&e.length?lr(e,Bc):0},hn.sumBy=function(e,t){return e&&e.length?lr(e,Lo(t,2)):0},hn.template=function(e,t,n){var i=hn.templateSettings;n&&qo(e,t,n)&&(t=r),e=Va(e),t=Wa({},t,i,Ao);var o,s,a=Wa({},t.imports,i.imports,Ao),c=ic(a),u=pr(a,c),f=0,l=t.interpolate||qe,d="__p += '",h=rt((t.escape||qe).source+"|"+l.source+"|"+(l===Ce?Fe:qe).source+"|"+(t.evaluate||qe).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++St+"]")+"\n";e.replace(h,function(t,r,n,i,a,c){return n||(n=i),d+=e.slice(f,c).replace(We,_r),r&&(o=!0,d+="' +\n__e("+r+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),f=c+t.length,t}),d+="';\n";var b=t.variable;b||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(me,""):d).replace(ge,"$1").replace(ye,"$1;"),d="function("+(b||"obj")+") {\n"+(b?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Cc(function(){return Qe(c,p+"return "+d).apply(r,u)});if(m.source=d,Ea(m))throw m;return m},hn.times=function(e,t){if((e=Ua(e))<1||e>P)return[];var r=N,n=Vr(e,N);t=Lo(t),e-=N;for(var i=dr(n,t);++r<e;)t(r);return i},hn.toFinite=ja,hn.toInteger=Ua,hn.toLength=Ha,hn.toLower=function(e){return Va(e).toLowerCase()},hn.toNumber=Ka,hn.toSafeInteger=function(e){return e?Nn(Ua(e),-P,P):0===e?e:0},hn.toString=Va,hn.toUpper=function(e){return Va(e).toUpperCase()},hn.trim=function(e,t,n){if((e=Va(e))&&(n||t===r))return e.replace(Pe,"");if(!e||!(t=Li(t)))return e;var i=Tr(e),o=Tr(t);return Wi(i,mr(i,o),gr(i,o)+1).join("")},hn.trimEnd=function(e,t,n){if((e=Va(e))&&(n||t===r))return e.replace(Oe,"");if(!e||!(t=Li(t)))return e;var i=Tr(e);return Wi(i,0,gr(i,Tr(t))+1).join("")},hn.trimStart=function(e,t,n){if((e=Va(e))&&(n||t===r))return e.replace(Re,"");if(!e||!(t=Li(t)))return e;var i=Tr(e);return Wi(i,mr(i,Tr(t))).join("")},hn.truncate=function(e,t){var n=w,i=C;if(ka(t)){var o="separator"in t?t.separator:o;n="length"in t?Ua(t.length):n,i="omission"in t?Li(t.omission):i}var s=(e=Va(e)).length;if($r(e)){var a=Tr(e);s=a.length}if(n>=s)return e;var c=n-kr(i);if(c<1)return i;var u=a?Wi(a,0,c).join(""):e.slice(0,c);if(o===r)return u+i;if(a&&(c+=u.length-c),Ra(o)){if(e.slice(c).search(o)){var f,l=u;for(o.global||(o=rt(o.source,Va(je.exec(o))+"g")),o.lastIndex=0;f=o.exec(l);)var d=f.index;u=u.slice(0,d===r?c:d)}}else if(e.indexOf(Li(o),c)!=c){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+i},hn.unescape=function(e){return(e=Va(e))&&$e.test(e)?e.replace(ve,Ir):e},hn.uniqueId=function(e){var t=++lt;return Va(e)+t},hn.upperCase=Sc,hn.upperFirst=Ec,hn.each=Vs,hn.eachRight=zs,hn.first=vs,Nc(hn,function(){var e={};return qn(hn,function(t,r){ft.call(hn.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),hn.VERSION="4.17.11",Gt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){hn[e].placeholder=hn}),Gt(["drop","take"],function(e,t){gn.prototype[e]=function(n){n=n===r?1:Gr(Ua(n),0);var i=this.__filtered__&&!t?new gn(this):this.clone();return i.__filtered__?i.__takeCount__=Vr(n,i.__takeCount__):i.__views__.push({size:Vr(n,N),type:e+(i.__dir__<0?"Right":"")}),i},gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Gt(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==T||3==r;gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Lo(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),Gt(["head","last"],function(e,t){var r="take"+(t?"Right":"");gn.prototype[e]=function(){return this[r](1).value()[0]}}),Gt(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");gn.prototype[e]=function(){return this.__filtered__?new gn(this):this[r](1)}}),gn.prototype.compact=function(){return this.filter(Bc)},gn.prototype.find=function(e){return this.filter(e).head()},gn.prototype.findLast=function(e){return this.reverse().find(e)},gn.prototype.invokeMap=Ei(function(e,t){return"function"==typeof e?new gn(this):this.map(function(r){return ni(r,e,t)})}),gn.prototype.reject=function(e){return this.filter(ca(Lo(e)))},gn.prototype.slice=function(e,t){e=Ua(e);var n=this;return n.__filtered__&&(e>0||t<0)?new gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=Ua(t))<0?n.dropRight(-t):n.take(t-e)),n)},gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},gn.prototype.toArray=function(){return this.take(N)},qn(gn.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=hn[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&(hn.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,c=t instanceof gn,u=a[0],f=c||ga(t),l=function(e){var t=o.apply(hn,Yt([e],a));return i&&d?t[0]:t};f&&n&&"function"==typeof u&&1!=u.length&&(c=f=!1);var d=this.__chain__,h=!!this.__actions__.length,p=s&&!d,b=c&&!h;if(!s&&f){t=b?t:new gn(this);var m=e.apply(t,a);return m.__actions__.push({func:js,args:[l],thisArg:r}),new mn(m,d)}return p&&b?e.apply(this,a):(m=this.thru(l),p?i?m.value()[0]:m.value():m)})}),Gt(["pop","push","shift","sort","splice","unshift"],function(e){var t=ot[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);hn.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(ga(i)?i:[],e)}return this[r](function(r){return t.apply(ga(r)?r:[],e)})}}),qn(gn.prototype,function(e,t){var r=hn[t];if(r){var n=r.name+"";(nn[n]||(nn[n]=[])).push({name:t,func:r})}}),nn[po(r,b).name]=[{name:"wrapper",func:r}],gn.prototype.clone=function(){var e=new gn(this.__wrapped__);return e.__actions__=ro(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ro(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ro(this.__views__),e},gn.prototype.reverse=function(){if(this.__filtered__){var e=new gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=ga(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Vr(t,e+s);break;case"takeRight":e=Gr(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=n?a:s-1,f=this.__iteratees__,l=f.length,d=0,h=Vr(c,this.__takeCount__);if(!r||!n&&i==c&&h==c)return Ui(e,this.__actions__);var p=[];e:for(;c--&&d<h;){for(var b=-1,m=e[u+=t];++b<l;){var g=f[b],y=g.iteratee,v=g.type,_=y(m);if(v==I)m=_;else if(!_){if(v==T)continue e;break e}}p[d++]=m}return p},hn.prototype.at=Us,hn.prototype.chain=function(){return Fs(this)},hn.prototype.commit=function(){return new mn(this.value(),this.__chain__)},hn.prototype.next=function(){this.__values__===r&&(this.__values__=Fa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},hn.prototype.plant=function(e){for(var t,n=this;n instanceof bn;){var i=ds(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},hn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof gn){var t=e;return this.__actions__.length&&(t=new gn(this)),(t=t.reverse()).__actions__.push({func:js,args:[ks],thisArg:r}),new mn(t,this.__chain__)}return this.thru(ks)},hn.prototype.toJSON=hn.prototype.valueOf=hn.prototype.value=function(){return Ui(this.__wrapped__,this.__actions__)},hn.prototype.first=hn.prototype.head,Pr&&(hn.prototype[Pr]=function(){return this}),hn}();Rt?((Rt.exports=Br)._=Br,Pt._=Br):Bt._=Br}).call(commonjsGlobal)}),BITS=32,GROUPS=4,RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,RE_SUBNET_STRING=/\/\d{1,2}$/,constants$9={BITS:BITS,GROUPS:GROUPS,RE_ADDRESS:RE_ADDRESS,RE_SUBNET_STRING:RE_SUBNET_STRING},BigInteger$4=jsbn$1.BigInteger,sprintf$1=sprintf.sprintf;function Address4(e){this.valid=!1,this.address=e,this.groups=constants$9.GROUPS,this.v4=!0,this.subnet="/32",this.subnetMask=32;var t=constants$9.RE_SUBNET_STRING.exec(e);if(t){if(this.parsedSubnet=t[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,this.subnetMask<0||this.subnetMask>constants$9.BITS)return this.valid=!1,void(this.error="Invalid subnet mask.");e=e.replace(constants$9.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}Address4.prototype.parse=function(e){var t=e.split(".");return e.match(constants$9.RE_ADDRESS)?this.valid=!0:this.error="Invalid IPv4 address.",t},Address4.prototype.isValid=function(){return this.valid},Address4.prototype.correctForm=function(){return this.parsedAddress.map(function(e){return parseInt(e,10)}).join(".")},Address4.prototype.isCorrect=common$c.isCorrect(constants$9.BITS),Address4.fromHex=function(e){var t,r=lodash.padStart(e.replace(/:/g,""),8,"0"),n=[];for(t=0;t<8;t+=2){var i=r.slice(t,t+2);n.push(parseInt(i,16))}return new Address4(n.join("."))},Address4.fromInteger=function(e){return Address4.fromHex(e.toString(16))},Address4.prototype.toHex=function(){return this.parsedAddress.map(function(e){return sprintf$1("%02x",parseInt(e,10))}).join(":")},Address4.prototype.toArray=function(){return this.parsedAddress.map(function(e){return parseInt(e,10)})},Address4.prototype.toGroup6=function(){var e,t=[];for(e=0;e<constants$9.GROUPS;e+=2){var r=sprintf$1("%02x%02x",parseInt(this.parsedAddress[e],10),parseInt(this.parsedAddress[e+1],10));t.push(sprintf$1("%x",parseInt(r,16)))}return t.join(":")},Address4.prototype.bigInteger=function(){return this.valid?new BigInteger$4(this.parsedAddress.map(function(e){return sprintf$1("%02x",parseInt(e,10))}).join(""),16):null},Address4.prototype._startAddress=function(){return new BigInteger$4(this.mask()+lodash.repeat("0",constants$9.BITS-this.subnetMask),2)},Address4.prototype.startAddress=function(){return Address4.fromBigInteger(this._startAddress())},Address4.prototype.startAddressExclusive=function(){var e=new BigInteger$4("1");return Address4.fromBigInteger(this._startAddress().add(e))},Address4.prototype._endAddress=function(){return new BigInteger$4(this.mask()+lodash.repeat("1",constants$9.BITS-this.subnetMask),2)},Address4.prototype.endAddress=function(){return Address4.fromBigInteger(this._endAddress())},Address4.prototype.endAddressExclusive=function(){var e=new BigInteger$4("1");return Address4.fromBigInteger(this._endAddress().subtract(e))},Address4.fromBigInteger=function(e){return Address4.fromInteger(parseInt(e.toString(),10))},Address4.prototype.mask=function(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)},Address4.prototype.getBitsBase2=function(e,t){return this.binaryZeroPad().slice(e,t)},Address4.prototype.isInSubnet=common$c.isInSubnet,Address4.prototype.binaryZeroPad=function(){return lodash.padStart(this.bigInteger().toString(2),constants$9.BITS,"0")};var ipv4=Address4,BITS$1=128,GROUPS$1=8,SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},TYPES$1={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},RE_BAD_CHARACTERS=/([^0-9a-f:\/%])/gi,RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,RE_SUBNET_STRING$1=/\/\d{1,3}(?=%|$)/,RE_ZONE_STRING=/%.*$/,RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/),constants$a={BITS:BITS$1,GROUPS:GROUPS$1,SCOPES:SCOPES,TYPES:TYPES$1,RE_BAD_CHARACTERS:RE_BAD_CHARACTERS,RE_BAD_ADDRESS:RE_BAD_ADDRESS,RE_SUBNET_STRING:RE_SUBNET_STRING$1,RE_ZONE_STRING:RE_ZONE_STRING,RE_URL:RE_URL,RE_URL_WITH_PORT:RE_URL_WITH_PORT},isValid=function(){return this.valid},isInSubnet=common$c.isInSubnet,isCorrect=common$c.isCorrect(constants$a.BITS),isCanonical=common$c.falseIfInvalid(function(){return this.addressMinusSuffix===this.canonicalForm()}),isLinkLocal=common$c.falseIfInvalid(function(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)}),isMulticast=common$c.falseIfInvalid(function(){return"Multicast"===this.getType()}),is4=common$c.falseIfInvalid(function(){return this.v4}),isTeredo=common$c.falseIfInvalid(function(){return this.isInSubnet(new this.constructor("2001::/32"))}),is6to4=common$c.falseIfInvalid(function(){return this.isInSubnet(new this.constructor("2002::/16"))}),isLoopback=common$c.falseIfInvalid(function(){return"Loopback"===this.getType()}),attributes={isValid:isValid,isInSubnet:isInSubnet,isCorrect:isCorrect,isCanonical:isCanonical,isLinkLocal:isLinkLocal,isMulticast:isMulticast,is4:is4,isTeredo:isTeredo,is6to4:is6to4,isLoopback:isLoopback},helpers$1=createCommonjsModule(function(e,t){var r=sprintf.sprintf,n=t.spanAllZeroes=function(e){return e.replace(/(0+)/g,'<span class="zero">$1</span>')};function i(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}t.spanAll=function(e,t){return void 0===t&&(t=0),e.split("").map(function(e,i){return r('<span class="digit value-%s position-%d">%s</span>',e,i+t,n(e))}).join("")},t.spanLeadingZeroes=function(e){return e.split(":").map(function(e){return i(e)}).join(":")},t.simpleGroup=function(e,t){var n=e.split(":");return t||(t=0),n.map(function(e,n){return/group-v4/.test(e)?e:r('<span class="hover-group group-%d">%s</span>',n+t,i(e))}).join(":")}}),helpers_1$1=helpers$1.spanAllZeroes,helpers_2$1=helpers$1.spanAll,helpers_3$1=helpers$1.spanLeadingZeroes,helpers_4$1=helpers$1.simpleGroup,sprintf$2=sprintf.sprintf,href=function(e){return e=void 0===e?"":sprintf$2(":%s",e),sprintf$2("http://[%s]%s/",this.correctForm(),e)},link=function(e){e||(e={}),void 0===e.className&&(e.className=""),void 0===e.prefix&&(e.prefix="/#address="),void 0===e.v4&&(e.v4=!1);var t=this.correctForm;return e.v4&&(t=this.to4in6),e.className?sprintf$2('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,t.call(this),e.className):sprintf$2('<a href="%1$s%2$s">%2$s</a>',e.prefix,t.call(this))},group=function(){var e,t=this.address.match(constants$9.RE_ADDRESS);if(t){var r=t[0].split(".");this.address=this.address.replace(constants$9.RE_ADDRESS,sprintf$2('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',r.slice(0,2).join("."),r.slice(2,4).join(".")))}if(0===this.elidedGroups)return helpers$1.simpleGroup(this.address);var n=[],i=this.address.split("::");i[0].length?n.push(helpers$1.simpleGroup(i[0])):n.push("");var o=["hover-group"];for(e=this.elisionBegin;e<this.elisionBegin+this.elidedGroups;e++)o.push(sprintf$2("group-%d",e));return n.push(sprintf$2('<span class="%s"></span>',o.join(" "))),i[1].length?n.push(helpers$1.simpleGroup(i[1],this.elisionEnd)):n.push(""),n.join(":")},html={href:href,link:link,group:group},sprintf$3=sprintf.sprintf;function groupPossibilities(e){return sprintf$3("(%s)",e.join("|"))}function padGroup(e){return e.length<4?sprintf$3("0{0,%d}%s",4-e.length,e):e}function simpleRegularExpression(e){var t=[];e.forEach(function(e,r){0===parseInt(e,16)&&t.push(r)});var r=t.map(function(t){return e.map(function(e,r){if(r===t){var n=0===r||r===constants$a.GROUPS-1?":":"";return groupPossibilities([padGroup(e),n])}return padGroup(e)}).join(":")});return r.push(e.map(padGroup).join(":")),groupPossibilities(r)}function possibleElisions(e,t,r){var n=t?"":":",i=r?"":":",o=[];t||r||o.push("::"),t&&r&&o.push(""),(r&&!t||!r&&t)&&o.push(":"),o.push(sprintf$3("%s(:0{1,4}){1,%d}",n,e-1)),o.push(sprintf$3("(0{1,4}:){1,%d}%s",e-1,i)),o.push(sprintf$3("(0{1,4}:){%d}0{1,4}",e-1));for(var s=1;s<e-1;s++)for(var a=1;a<e-s;a++)o.push(sprintf$3("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",a,e-a-s-1));return groupPossibilities(o)}var regularExpressionString=function(e){void 0===e&&(e=!1);var t=[],r=new this.constructor(this.correctForm());if(0===r.elidedGroups)t.push(simpleRegularExpression(r.parsedAddress));else if(r.elidedGroups===constants$a.GROUPS)t.push(possibleElisions(constants$a.GROUPS));else{var n=r.address.split("::");n[0].length&&t.push(simpleRegularExpression(n[0].split(":"))),t.push(possibleElisions(r.elidedGroups,0!==n[0].length,0!==n[1].length)),n[1].length&&t.push(simpleRegularExpression(n[1].split(":"))),t=[t.join(":")]}return e||(t=[].concat("(?=^|\\b|[^\\w\\:])(",t,")(?=[^\\w\\:]|\\b|$)")),t.join("")},regularExpression=function(e){return new RegExp(this.regularExpressionString(e),"i")},regularExpressions={regularExpressionString:regularExpressionString,regularExpression:regularExpression},BigInteger$5=jsbn$1.BigInteger,sprintf$4=sprintf.sprintf;function addCommas(e){for(var t=/(\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e}function spanLeadingZeroes4(e){return e=(e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function Address6(e,t){this.groups=void 0===t?constants$a.GROUPS:t,this.v4=!1,this.subnet="/128",this.subnetMask=128,this.zone="",this.address=e;var r=constants$a.RE_SUBNET_STRING.exec(e);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>constants$a.BITS)return this.valid=!1,void(this.error="Invalid subnet mask.");e=e.replace(constants$a.RE_SUBNET_STRING,"")}else if(/\//.test(e))return this.valid=!1,void(this.error="Invalid subnet mask.");var n=constants$a.RE_ZONE_STRING.exec(e);n&&(this.zone=n[0],e=e.replace(constants$a.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}function compact(e,t){var r,n=[],i=[];for(r=0;r<e.length;r++)r<t[0]?n.push(e[r]):r>t[1]&&i.push(e[r]);return n.concat(["compact"]).concat(i)}function paddedHex(e){return sprintf$4("%04x",parseInt(e,16))}function unsignByte(e){return 255&e}lodash.merge(Address6.prototype,attributes),lodash.merge(Address6.prototype,html),lodash.merge(Address6.prototype,regularExpressions),Address6.fromBigInteger=function(e){var t,r=lodash.padStart(e.toString(16),32,"0"),n=[];for(t=0;t<constants$a.GROUPS;t++)n.push(r.slice(4*t,4*(t+1)));return new Address6(n.join(":"))},Address6.fromURL=function(e){var t,r,n;if(-1!==e.indexOf("[")&&-1!==e.indexOf("]:")){if(null===(n=constants$a.RE_URL_WITH_PORT.exec(e)))return{error:"failed to parse address with port",address:null,port:null};t=n[1],r=n[2]}else if(-1!==e.indexOf("/")){if(e=e.replace(/^[a-z0-9]+:\/\//,""),null===(n=constants$a.RE_URL.exec(e)))return{error:"failed to parse address from URL",address:null,port:null};t=n[1]}else t=e;return r?((r=parseInt(r,10))<0||r>65536)&&(r=null):r=null,{address:new Address6(t),port:r}},Address6.fromAddress4=function(e){e=new ipv4(e);var t=constants$a.BITS-(constants$9.BITS-e.subnetMask);return new Address6("::ffff:"+e.correctForm()+"/"+t)},Address6.fromArpa=function(e){var t=e.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==t.length)return t={error:"Not Valid 'ip6.arpa' form",address:null};t=t.split(".").reverse();for(var r=7;r>0;r--){var n=4*r;t.splice(n,0,":")}return new Address6(t=t.join(""))},Address6.prototype.microsoftTranscription=function(){return sprintf$4("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))},Address6.prototype.mask=function(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)},Address6.prototype.possibleSubnets=function(e){void 0===e&&(e=128);var t=constants$a.BITS-this.subnetMask-Math.abs(e-constants$a.BITS);return t<0?"0":addCommas(new BigInteger$5("2",10).pow(t).toString(10))},Address6.prototype._startAddress=function(){return new BigInteger$5(this.mask()+lodash.repeat("0",constants$a.BITS-this.subnetMask),2)},Address6.prototype.startAddress=function(){return Address6.fromBigInteger(this._startAddress())},Address6.prototype.startAddressExclusive=function(){var e=new BigInteger$5("1");return Address6.fromBigInteger(this._startAddress().add(e))},Address6.prototype._endAddress=function(){return new BigInteger$5(this.mask()+lodash.repeat("1",constants$a.BITS-this.subnetMask),2)},Address6.prototype.endAddress=function(){return Address6.fromBigInteger(this._endAddress())},Address6.prototype.endAddressExclusive=function(){var e=new BigInteger$5("1");return Address6.fromBigInteger(this._endAddress().subtract(e))},Address6.prototype.getScope=function(){var e=constants$a.SCOPES[this.getBits(12,16)];return"Global unicast"===this.getType()&&"Link local"!==e&&(e="Global"),e},Address6.prototype.getType=function(){var e=this;return lodash.find(constants$a.TYPES,function(t,r){return e.isInSubnet(new Address6(r))})||"Global unicast"},Address6.prototype.getBits=function(e,t){return new BigInteger$5(this.getBitsBase2(e,t),2)},Address6.prototype.getBitsBase2=function(e,t){return this.binaryZeroPad().slice(e,t)},Address6.prototype.getBitsBase16=function(e,t){var r=t-e;return r%4!=0?null:lodash.padStart(this.getBits(e,t).toString(16),r/4,"0")},Address6.prototype.getBitsPastSubnet=function(){return this.getBitsBase2(this.subnetMask,constants$a.BITS)},Address6.prototype.reverseForm=function(e){e||(e={});var t=Math.floor(this.subnetMask/4),r=this.canonicalForm().replace(/:/g,"").split("").slice(0,t).reverse().join(".");return t>0?e.omitSuffix?r:sprintf$4("%s.ip6.arpa.",r):e.omitSuffix?"":"ip6.arpa."},Address6.prototype.correctForm=function(){if(!this.parsedAddress)return null;var e,t=[],r=0,n=[];for(e=0;e<this.parsedAddress.length;e++){var i=parseInt(this.parsedAddress[e],16);0===i&&r++,0!==i&&r>0&&(r>1&&n.push([e-r,e-1]),r=0)}r>1&&n.push([this.parsedAddress.length-r,this.parsedAddress.length-1]);var o=n.map(function(e){return e[1]-e[0]+1});if(n.length>0){var s=o.indexOf(lodash.max(o));t=compact(this.parsedAddress,n[s])}else t=this.parsedAddress;for(e=0;e<t.length;e++)"compact"!==t[e]&&(t[e]=parseInt(t[e],16).toString(16));var a=t.join(":");return a=(a=(a=a.replace(/^compact$/,"::")).replace(/^compact|compact$/,":")).replace(/compact/,"")},Address6.prototype.binaryZeroPad=function(){return lodash.padStart(this.bigInteger().toString(2),constants$a.BITS,"0")},Address6.prototype.parse4in6=function(e){var t=e.split(":"),r=t.slice(-1)[0].match(constants$9.RE_ADDRESS);if(r){for(var n=new ipv4(r[0]),i=0;i<n.groups;i++)if(/^0[0-9]+/.test(n.parsedAddress[i]))return this.valid=!1,this.error="IPv4 addresses can not have leading zeroes.",this.parseError=e.replace(constants$9.RE_ADDRESS,n.parsedAddress.map(spanLeadingZeroes4).join(".")),null;this.v4=!0,t[t.length-1]=n.toGroup6(),e=t.join(":")}return e},Address6.prototype.parse=function(e){if(e=this.parse4in6(e),this.error)return null;var t=e.match(constants$a.RE_BAD_CHARACTERS);if(t)return this.valid=!1,this.error=sprintf$4("Bad character%s detected in address: %s",t.length>1?"s":"",t.join("")),this.parseError=e.replace(constants$a.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'),null;var r=e.match(constants$a.RE_BAD_ADDRESS);if(r)return this.valid=!1,this.error=sprintf$4("Address failed regex: %s",r.join("")),this.parseError=e.replace(constants$a.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'),null;var n=[],i=e.split("::");if(2===i.length){var o=i[0].split(":"),s=i[1].split(":");1===o.length&&""===o[0]&&(o=[]),1===s.length&&""===s[0]&&(s=[]);var a=this.groups-(o.length+s.length);if(!a)return this.valid=!1,this.error="Error parsing groups",null;this.elidedGroups=a,this.elisionBegin=o.length,this.elisionEnd=o.length+this.elidedGroups,o.forEach(function(e){n.push(e)});for(var c=0;c<a;c++)n.push(0);s.forEach(function(e){n.push(e)})}else{if(1!==i.length)return this.valid=!1,this.error="Too many :: groups found",null;n=e.split(":"),this.elidedGroups=0}return(n=n.map(function(e){return sprintf$4("%x",parseInt(e,16))})).length!==this.groups?(this.valid=!1,this.error="Incorrect number of groups found",null):(this.valid=!0,n)},Address6.prototype.canonicalForm=function(){return this.valid?this.parsedAddress.map(paddedHex).join(":"):null},Address6.prototype.decimal=function(){return this.valid?this.parsedAddress.map(function(e){return sprintf$4("%05d",parseInt(e,16))}).join(":"):null},Address6.prototype.bigInteger=function(){return this.valid?new BigInteger$5(this.parsedAddress.map(paddedHex).join(""),16):null},Address6.prototype.to4=function(){var e=this.binaryZeroPad().split("");return ipv4.fromHex(new BigInteger$5(e.slice(96,128).join(""),2).toString(16))},Address6.prototype.to4in6=function(){var e=this.to4(),t=new Address6(this.parsedAddress.slice(0,6).join(":"),6),r=t.correctForm(),n="";return/:$/.test(r)||(n=":"),t.correctForm()+n+e.address},Address6.prototype.inspectTeredo=function(){var e=this.getBitsBase16(0,32),t=this.getBits(80,96).xor(new BigInteger$5("ffff",16)).toString(),r=ipv4.fromHex(this.getBitsBase16(32,64)),n=ipv4.fromHex(this.getBits(96,128).xor(new BigInteger$5("ffffffff",16)).toString(16)),i=this.getBits(64,80),o=this.getBitsBase2(64,80),s=i.testBit(15),a=i.testBit(14),c=i.testBit(8),u=i.testBit(9),f=new BigInteger$5(o.slice(2,6)+o.slice(8,16),2).toString(10);return{prefix:sprintf$4("%s:%s",e.slice(0,4),e.slice(4,8)),server4:r.address,client4:n.address,flags:o,coneNat:s,microsoft:{reserved:a,universalLocal:u,groupIndividual:c,nonce:f},udpPort:t}},Address6.prototype.inspect6to4=function(){var e=this.getBitsBase16(0,16),t=ipv4.fromHex(this.getBitsBase16(16,48));return{prefix:sprintf$4("%s",e.slice(0,4)),gateway:t.address}},Address6.prototype.to6to4=function(){return this.is4()?new Address6(["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":")):null},Address6.prototype.toByteArray=function(){var e=this.bigInteger().toByteArray();return 17===e.length&&0===e[0]?e.slice(1):e},Address6.prototype.toUnsignedByteArray=function(){return this.toByteArray().map(unsignByte)},Address6.fromByteArray=function(e){return this.fromUnsignedByteArray(e.map(unsignByte))},Address6.fromUnsignedByteArray=function(e){for(var t=new BigInteger$5("256",10),r=new BigInteger$5("0",10),n=new BigInteger$5("1",10),i=e.length-1;i>=0;i--)r=r.add(n.multiply(new BigInteger$5(e[i].toString(10),10))),n=n.multiply(t);return Address6.fromBigInteger(r)};var ipv6=Address6,Address4$1=ipv4,Address6$1=ipv6,v6={helpers:helpers$1},ipAddress={Address4:Address4$1,Address6:Address6$1,v6:v6};function Protocols$1(e){if("number"==typeof e){if(Protocols$1.codes[e])return Protocols$1.codes[e];throw new Error("no protocol with code: "+e)}if("string"==typeof e||e instanceof String){if(Protocols$1.names[e])return Protocols$1.names[e];throw new Error("no protocol with name: "+e)}throw new Error("invalid protocol id type: "+e)}const V$1=-1;function p$1(e,t,r,n){return{code:e,size:t,name:r,resolvable:Boolean(n)}}Protocols$1.lengthPrefixedVarSize=-1,Protocols$1.V=-1,Protocols$1.table=[[4,32,"ip4"],[6,16,"tcp"],[17,16,"udp"],[33,16,"dccp"],[41,128,"ip6"],[54,-1,"dns4","resolvable"],[55,-1,"dns6","resolvable"],[56,-1,"dnsaddr","resolvable"],[132,16,"sctp"],[302,0,"utp"],[421,Protocols$1.lengthPrefixedVarSize,"ipfs"],[480,0,"http"],[443,0,"https"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[290,0,"p2p-circuit"]],Protocols$1.names={},Protocols$1.codes={},lodash_map(Protocols$1.table,function(e){const t=p$1.apply(null,e);Protocols$1.codes[t.code]=t,Protocols$1.names[t.name]=t}),Protocols$1.object=p$1;var protocolsTable$1=Protocols$1,convert$1=Convert$1;function Convert$1(e,t){return t instanceof Buffer?Convert$1.toString(e,t):Convert$1.toBuffer(e,t)}function ip2buf$1(e){if(!e.isValid())throw new Error("invalid ip address");return ip_1.toBuffer(e.address)}function port2buf$1(e){const t=Buffer.alloc(2);return t.writeUInt16BE(e,0),t}function buf2port$1(e){return e.readUInt16BE(0)}function str2buf$1(e){const t=Buffer.from(e),r=Buffer.from(varint.encode(t.length));return Buffer.concat([r,t])}function buf2str$1(e){const t=varint.decode(e);if((e=e.slice(varint.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return e.toString()}function mh2buf$1(e){const t=Buffer.from(bs58.decode(e)),r=Buffer.from(varint.encode(t.length));return Buffer.concat([r,t])}function buf2mh$1(e){const t=varint.decode(e),r=e.slice(varint.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return bs58.encode(r)}Convert$1.toString=function(e,t){switch((e=protocolsTable$1(e)).code){case 4:case 41:return ip_1.toString(t);case 6:case 17:case 33:case 132:return buf2port$1(t);case 54:case 55:case 56:return buf2str$1(t);case 421:return buf2mh$1(t);default:return t.toString("hex")}},Convert$1.toBuffer=function(e,t){switch((e=protocolsTable$1(e)).code){case 4:return ip2buf$1(new ipAddress.Address4(t));case 41:return ip2buf$1(new ipAddress.Address6(t));case 6:case 17:case 33:case 132:return port2buf$1(parseInt(t,10));case 54:case 55:case 56:return str2buf$1(t);case 421:return mh2buf$1(t);default:return Buffer.from(t,"hex")}};var codec$1={stringToStringTuples:stringToStringTuples$1,stringTuplesToString:stringTuplesToString$1,tuplesToStringTuples:tuplesToStringTuples$1,stringTuplesToTuples:stringTuplesToTuples$1,bufferToTuples:bufferToTuples$1,tuplesToBuffer:tuplesToBuffer$1,bufferToString:bufferToString$1,stringToBuffer:stringToBuffer$1,fromString:fromString$9,fromBuffer:fromBuffer$1,validateBuffer:validateBuffer$1,isValidBuffer:isValidBuffer$1,cleanPath:cleanPath$1,ParseError:ParseError$1,protoFromTuple:protoFromTuple$1,sizeForAddr:sizeForAddr$1};function stringToStringTuples$1(e){const t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const i=r[n];if(0!==protocolsTable$1(i).size){if(++n>=r.length)throw ParseError$1("invalid address: "+e);t.push([i,r[n]])}else t.push([i])}return t}function stringTuplesToString$1(e){const t=[];return lodash_map(e,function(e){const r=protoFromTuple$1(e);t.push(r.name),e.length>1&&t.push(e[1])}),"/"+t.join("/")}function stringTuplesToTuples$1(e){return lodash_map(e,function(e){Array.isArray(e)||(e=[e]);const t=protoFromTuple$1(e);return e.length>1?[t.code,convert$1.toBuffer(t.code,e[1])]:[t.code]})}function tuplesToStringTuples$1(e){return lodash_map(e,function(e){const t=protoFromTuple$1(e);return e.length>1?[t.code,convert$1.toString(t.code,e[1])]:[t.code]})}function tuplesToBuffer$1(e){return fromBuffer$1(Buffer.concat(lodash_map(e,function(e){const t=protoFromTuple$1(e);let r=Buffer.from(varint.encode(t.code));return e.length>1&&(r=Buffer.concat([r,e[1]])),r})))}function sizeForAddr$1(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;return varint.decode(t)+varint.decode.bytes}function bufferToTuples$1(e){const t=[];let r=0;for(;r<e.length;){const n=varint.decode(e,r),i=varint.decode.bytes,o=sizeForAddr$1(protocolsTable$1(n),e.slice(r+i));if(0===o){t.push([n]),r+=i;continue}const s=e.slice(r+i,r+i+o);if((r+=o+i)>e.length)throw ParseError$1("Invalid address buffer: "+e.toString("hex"));t.push([n,s])}return t}function bufferToString$1(e){return stringTuplesToString$1(tuplesToStringTuples$1(bufferToTuples$1(e)))}function stringToBuffer$1(e){return tuplesToBuffer$1(stringTuplesToTuples$1(stringToStringTuples$1(e=cleanPath$1(e))))}function fromString$9(e){return stringToBuffer$1(e)}function fromBuffer$1(e){const t=validateBuffer$1(e);if(t)throw t;return Buffer.from(e)}function validateBuffer$1(e){try{bufferToTuples$1(e)}catch(e){return e}}function isValidBuffer$1(e){return void 0===validateBuffer$1(e)}function cleanPath$1(e){return"/"+lodash_filter(e.trim().split("/")).join("/")}function ParseError$1(e){return new Error("Error parsing address: "+e)}function protoFromTuple$1(e){return protocolsTable$1(e[0])}var src$V=createCommonjsModule(function(e,t){const r=new Error("Sorry, Not Implemented Yet."),n=classIs.proto(function(e){if(!(this instanceof n))return new n(e);if(null==e&&(e=""),e instanceof Buffer)this.buffer=codec$1.fromBuffer(e);else if("string"==typeof e||e instanceof String){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.buffer=codec$1.fromString(e)}else{if(!(e.buffer&&e.protos&&e.protoCodes))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.buffer=codec$1.fromBuffer(e.buffer)}},{className:"Multiaddr",symbolName:"@multiformats/js-multiaddr/multiaddr"});n.prototype.toString=function(){return codec$1.bufferToString(this.buffer)},n.prototype.toOptions=function(){const e={},t=this.toString().split("/");return e.family="ip4"===t[1]?"ipv4":"ipv6",e.host=t[2],e.transport=t[3],e.port=t[4],e},n.prototype.inspect=function(){return"<Multiaddr "+this.buffer.toString("hex")+" - "+codec$1.bufferToString(this.buffer)+">"},n.prototype.protos=function(){return lodash_map(this.protoCodes(),function(e){return immutable(protocolsTable$1(e))})},n.prototype.protoCodes=function(){const e=[],t=this.buffer;let r=0;for(;r<t.length;){const n=varint.decode(t,r),i=varint.decode.bytes,o=protocolsTable$1(n);r+=codec$1.sizeForAddr(o,t.slice(r+i))+i,e.push(n)}return e},n.prototype.protoNames=function(){return lodash_map(this.protos(),function(e){return e.name})},n.prototype.tuples=function(){return codec$1.bufferToTuples(this.buffer)},n.prototype.stringTuples=function(){const e=codec$1.bufferToTuples(this.buffer);return codec$1.tuplesToStringTuples(e)},n.prototype.encapsulate=function(e){return e=n(e),n(this.toString()+e.toString())},n.prototype.decapsulate=function(e){e=e.toString();const t=this.toString(),r=t.lastIndexOf(e);if(r<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return n(t.slice(0,r))},n.prototype.getPeerId=function(){let e=null;try{e=this.stringTuples().filter(e=>{if(e[0]===protocolsTable$1.names.ipfs.code)return!0})[0][1],bs58.decode(e)}catch(t){e=null}return e},n.prototype.equals=function(e){return this.buffer.equals(e.buffer)},n.prototype.nodeAddress=function(){const e=this.protoCodes(),t=this.protoNames(),r=this.toString().split("/").slice(1);if(r.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==e[0]&&41!==e[0]&&54!==e[0]&&55!==e[0])throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if("tcp"!==r[2]&&"udp"!==r[2])throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:41===e[0]||55===e[0]?6:4,address:r[1],port:r[3]}},n.fromNodeAddress=function(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");const r="IPv6"===e.family?"ip6":"ip4";return n("/"+[r,e.address,t,e.port].join("/"))},n.prototype.isThinWaistAddress=function(e){const t=(e||this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||17===t[1].code))},n.prototype.fromStupidString=function(e){throw r},n.protocols=protocolsTable$1,n.isName=function(e){return!!n.isMultiaddr(e)&&e.protos().some(e=>e.resolvable)},n.resolve=function(e,t){return n.isMultiaddr(e)&&n.isName(e)?t(new Error("not implemented yet")):t(new Error("not a valid name"))},e.exports=n});const Address6$2=ipAddress.Address6,log$7=src$U("libp2p:tcp:get-multiaddr");var getMultiaddr=e=>{let t;try{if("IPv6"===e.remoteFamily){const r=new Address6$2(e.remoteAddress);if(r.v4){const n=r.to4().correctForm();t=src$V("/ip4/"+n+"/tcp/"+e.remotePort)}else t=src$V("/ip6/"+e.remoteAddress+"/tcp/"+e.remotePort)}else t=src$V("/ip4/"+e.remoteAddress+"/tcp/"+e.remotePort)}catch(e){log$7(e)}return t};const Connection$1=src$T.Connection,EventEmitter$2=events$1.EventEmitter,log$8=src$U("libp2p:tcp:listen"),IPFS_CODE=421,CLOSE_TIMEOUT=2e3;function noop$5(){}var listener=e=>{const t=new EventEmitter$2,r=net.createServer(n=>{n.on("error",noop$5);const i=getMultiaddr(n);if(!i)return void(void 0===n.remoteAddress?log$8("connection closed before p2p connection made"):log$8("error interpreting incoming p2p connection"));log$8("new connection",i.toString());const o=streamToPullStream.duplex(n);o.getObservedAddrs=e=>{e(null,[i])},trackSocket(r,n);const s=new Connection$1(o);e(s),t.emit("connection",s)});let n,i;return r.on("listening",()=>t.emit("listening")),r.on("error",e=>t.emit("error",e)),r.on("close",()=>t.emit("close")),r.__connections={},t.close=(e,t)=>{"function"==typeof e&&(t=e,e={}),t=t||noop$5,e=e||{};const n=setTimeout(()=>{log$8("unable to close graciously, destroying conns"),Object.keys(r.__connections).forEach(e=>{log$8("destroying %s",e),r.__connections[e].destroy()})},e.timeout||2e3);r.close(t),r.once("close",()=>{clearTimeout(n)})},t.listen=(e,t)=>{i=e,lodash_includes(e.protoNames(),"ipfs")&&(n=getIpfsId(e),i=e.decapsulate("ipfs"));const o=i.toOptions();return log$8("Listening on %s %s",o.port,o.host),r.listen(o.port,o.host,t)},t.getAddrs=e=>{const t=[],o=r.address();if(!o)return e(new Error("Listener is not ready yet"));if(-1!==i.toString().indexOf("ip4")){let e=i.decapsulate("tcp");if(e=e.encapsulate("/tcp/"+o.port),n&&(e=e.encapsulate("/ipfs/"+n)),-1!==e.toString().indexOf("0.0.0.0")){const r=os.networkInterfaces();Object.keys(r).forEach(n=>{r[n].forEach(r=>{"IPv4"===r.family&&t.push(src$V(e.toString().replace("0.0.0.0",r.address)))})})}else t.push(e)}if("IPv6"===o.family){let e=src$V("/ip6/"+o.address+"/tcp/"+o.port);n&&(e=e.encapsulate("/ipfs/"+n)),t.push(e)}e(null,t)},t};function getIpfsId(e){return e.stringTuples().filter(e=>e[0]===IPFS_CODE)[0][1]}function trackSocket(e,t){const r=`${t.remoteAddress}:${t.remotePort}`;e.__connections[r]=t,t.on("close",()=>{delete e.__connections[r]})}const Connection$2=src$T.Connection,log$9=src$U("libp2p:tcp:dial");function noop$6(){}class TCP$1{dial(e,t,r){lodash_isfunction(t)&&(r=t,t={}),r=once_1$1(r||noop$6);const n=e.toOptions();log$9("Connecting to %s %s",n.port,n.host);const i=net.connect(n);i.once("timeout",()=>{log$9("timeout"),i.emit("error",new Error("Timeout"))}),i.once("error",r),i.once("connect",()=>{i.removeListener("error",r),r()});const o=streamToPullStream.duplex(i),s=new Connection$2(o);return s.getObservedAddrs=t=>t(null,[e]),s}createListener(e,t){return lodash_isfunction(e)&&(t=e,e={}),listener(t=t||noop$6)}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>!lodash_includes(e.protoNames(),"p2p-circuit")&&(lodash_includes(e.protoNames(),"ipfs")&&(e=e.decapsulate("ipfs")),src$3.TCP.matches(e)))}}var src$W=classIs(TCP$1,{className:"TCP",symbolName:"@libp2p/js-libp2p-tcp/tcp"}),toString_1=function(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e},toType$1=function(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":case"*":return 255}return 0},types$1={toString:toString_1,toType:toType$1},toString_1$1=function(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e},toRcode=function(e){switch(e.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0},rcodes={toString:toString_1$1,toRcode:toRcode},toString_1$2=function(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e},toOpcode=function(e){switch(e.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0},opcodes={toString:toString_1$2,toOpcode:toOpcode},toString_1$3=function(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e},toClass=function(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0},classes={toString:toString_1$3,toClass:toClass},dnsPacket=createCommonjsModule(function(e,t){const r=safeBuffer.Buffer,n=t.txt=t.name={};n.encode=function(e,t,i){t||(t=r.allocUnsafe(n.encodingLength(e))),i||(i=0);const o=i,s=e.replace(/^\.|\.$/gm,"");if(s.length){const e=s.split(".");for(let r=0;r<e.length;r++){const n=t.write(e[r],i+1);t[i]=n,i+=n+1}}return t[i++]=0,n.encode.bytes=i-o,t},n.encode.bytes=0,n.decode=function(e,t){t||(t=0);const r=[],i=t;let o=e[t++];if(0===o)return n.decode.bytes=1,".";if(o>=192){const r=n.decode(e,e.readUInt16BE(t-1)-49152);return n.decode.bytes=2,r}for(;o;){if(o>=192){r.push(n.decode(e,e.readUInt16BE(t-1)-49152)),t++;break}r.push(e.toString("utf-8",t,t+o)),t+=o,o=e[t++]}return n.decode.bytes=t-i,r.join(".")},n.decode.bytes=0,n.encodingLength=function(e){return"."===e?1:r.byteLength(e)+2};const i={encode:function(e,t,n){t||(t=r.allocUnsafe(i.encodingLength(e))),n||(n=0);const o=t.write(e,n+1);return t[n]=o,i.encode.bytes=o+1,t}};i.encode.bytes=0,i.decode=function(e,t){t||(t=0);const r=e[t],n=e.toString("utf-8",t+1,t+1+r);return i.decode.bytes=r+1,n},i.decode.bytes=0,i.encodingLength=function(e){return r.byteLength(e)+1};const o={encode:function(e,t,r){t||(t=o.encodingLength(e)),r||(r=0);const n=32767&(e.flags||0),i="response"===e.type?32768:0;return t.writeUInt16BE(e.id||0,r),t.writeUInt16BE(n|i,r+2),t.writeUInt16BE(e.questions.length,r+4),t.writeUInt16BE(e.answers.length,r+6),t.writeUInt16BE(e.authorities.length,r+8),t.writeUInt16BE(e.additionals.length,r+10),t}};o.encode.bytes=12,o.decode=function(e,t){if(t||(t=0),e.length<12)throw new Error("Header must be 12 bytes");const r=e.readUInt16BE(t+2);return{id:e.readUInt16BE(t),type:32768&r?"response":"query",flags:32767&r,flag_qr:1==(r>>15&1),opcode:opcodes.toString(r>>11&15),flag_aa:1==(r>>10&1),flag_tc:1==(r>>9&1),flag_rd:1==(r>>8&1),flag_ra:1==(r>>7&1),flag_z:1==(r>>6&1),flag_ad:1==(r>>5&1),flag_cd:1==(r>>4&1),rcode:rcodes.toString(15&r),questions:new Array(e.readUInt16BE(t+4)),answers:new Array(e.readUInt16BE(t+6)),authorities:new Array(e.readUInt16BE(t+8)),additionals:new Array(e.readUInt16BE(t+10))}},o.decode.bytes=12,o.encodingLength=function(){return 12};const s=t.unknown={};s.encode=function(e,t,n){return t||(t=r.allocUnsafe(s.encodingLength(e))),n||(n=0),t.writeUInt16BE(e.length,n),e.copy(t,n+2),s.encode.bytes=e.length+2,t},s.encode.bytes=0,s.decode=function(e,t){t||(t=0);const r=e.readUInt16BE(t),n=e.slice(t+2,t+2+r);return s.decode.bytes=r+2,n},s.decode.bytes=0,s.encodingLength=function(e){return e.length+2};const a=t.ns={};a.encode=function(e,t,i){return t||(t=r.allocUnsafe(a.encodingLength(e))),i||(i=0),n.encode(e,t,i+2),t.writeUInt16BE(n.encode.bytes,i),a.encode.bytes=n.encode.bytes+2,t},a.encode.bytes=0,a.decode=function(e,t){t||(t=0);const r=e.readUInt16BE(t),i=n.decode(e,t+2);return a.decode.bytes=r+2,i},a.decode.bytes=0,a.encodingLength=function(e){return n.encodingLength(e)+2};const c=t.soa={};c.encode=function(e,t,i){t||(t=r.allocUnsafe(c.encodingLength(e))),i||(i=0);const o=i;return i+=2,n.encode(e.mname,t,i),i+=n.encode.bytes,n.encode(e.rname,t,i),i+=n.encode.bytes,t.writeUInt32BE(e.serial||0,i),i+=4,t.writeUInt32BE(e.refresh||0,i),i+=4,t.writeUInt32BE(e.retry||0,i),i+=4,t.writeUInt32BE(e.expire||0,i),i+=4,t.writeUInt32BE(e.minimum||0,i),i+=4,t.writeUInt16BE(i-o-2,o),c.encode.bytes=i-o,t},c.encode.bytes=0,c.decode=function(e,t){t||(t=0);const r=t,i={};return t+=2,i.mname=n.decode(e,t),t+=n.decode.bytes,i.rname=n.decode(e,t),t+=n.decode.bytes,i.serial=e.readUInt32BE(t),t+=4,i.refresh=e.readUInt32BE(t),t+=4,i.retry=e.readUInt32BE(t),t+=4,i.expire=e.readUInt32BE(t),t+=4,i.minimum=e.readUInt32BE(t),t+=4,c.decode.bytes=t-r,i},c.decode.bytes=0,c.encodingLength=function(e){return 22+n.encodingLength(e.mname)+n.encodingLength(e.rname)};const u=t.txt={};u.encode=function(e,t,n){Array.isArray(e)||(e=[e]);for(let t=0;t<e.length;t++)if("string"==typeof e[t]&&(e[t]=r.from(e[t])),!r.isBuffer(e[t]))throw new Error("Must be a Buffer");t||(t=r.allocUnsafe(u.encodingLength(e))),n||(n=0);const i=n;return n+=2,e.forEach(function(e){t[n++]=e.length,e.copy(t,n,0,e.length),n+=e.length}),t.writeUInt16BE(n-i-2,i),u.encode.bytes=n-i,t},u.encode.bytes=0,u.decode=function(e,t){t||(t=0);const r=t;let n=e.readUInt16BE(t);t+=2;let i=[];for(;n>0;){const r=e[t++];if(--n<r)throw new Error("Buffer overflow");i.push(e.slice(t,t+r)),t+=r,n-=r}return u.decode.bytes=t-r,i},u.decode.bytes=0,u.encodingLength=function(e){Array.isArray(e)||(e=[e]);let t=2;return e.forEach(function(e){t+="string"==typeof e?r.byteLength(e)+1:e.length+1}),t};const f=t.null={};f.encode=function(e,t,n){t||(t=r.allocUnsafe(f.encodingLength(e))),n||(n=0),"string"==typeof e&&(e=r.from(e)),e||(e=r.allocUnsafe(0));const i=n;n+=2;const o=e.length;return e.copy(t,n,0,o),n+=o,t.writeUInt16BE(n-i-2,i),f.encode.bytes=n-i,t},f.encode.bytes=0,f.decode=function(e,t){t||(t=0);const r=t,n=e.readUInt16BE(t);t+=2;const i=e.slice(t,t+n);return t+=n,f.decode.bytes=t-r,i},f.decode.bytes=0,f.encodingLength=function(e){return e?(r.isBuffer(e)?e.length:r.byteLength(e))+2:2};const l=t.hinfo={};l.encode=function(e,t,n){t||(t=r.allocUnsafe(l.encodingLength(e))),n||(n=0);const o=n;return n+=2,i.encode(e.cpu,t,n),n+=i.encode.bytes,i.encode(e.os,t,n),n+=i.encode.bytes,t.writeUInt16BE(n-o-2,o),l.encode.bytes=n-o,t},l.encode.bytes=0,l.decode=function(e,t){t||(t=0);const r=t,n={};return t+=2,n.cpu=i.decode(e,t),t+=i.decode.bytes,n.os=i.decode(e,t),t+=i.decode.bytes,l.decode.bytes=t-r,n},l.decode.bytes=0,l.encodingLength=function(e){return i.encodingLength(e.cpu)+i.encodingLength(e.os)+2};const d=t.ptr={},h=t.cname=d,p=t.dname=d;d.encode=function(e,t,i){return t||(t=r.allocUnsafe(d.encodingLength(e))),i||(i=0),n.encode(e,t,i+2),t.writeUInt16BE(n.encode.bytes,i),d.encode.bytes=n.encode.bytes+2,t},d.encode.bytes=0,d.decode=function(e,t){t||(t=0);const r=n.decode(e,t+2);return d.decode.bytes=n.decode.bytes+2,r},d.decode.bytes=0,d.encodingLength=function(e){return n.encodingLength(e)+2};const b=t.srv={};b.encode=function(e,t,i){t||(t=r.allocUnsafe(b.encodingLength(e))),i||(i=0),t.writeUInt16BE(e.priority||0,i+2),t.writeUInt16BE(e.weight||0,i+4),t.writeUInt16BE(e.port||0,i+6),n.encode(e.target,t,i+8);const o=n.encode.bytes+6;return t.writeUInt16BE(o,i),b.encode.bytes=o+2,t},b.encode.bytes=0,b.decode=function(e,t){t||(t=0);const r=e.readUInt16BE(t),i={};return i.priority=e.readUInt16BE(t+2),i.weight=e.readUInt16BE(t+4),i.port=e.readUInt16BE(t+6),i.target=n.decode(e,t+8),b.decode.bytes=r+2,i},b.decode.bytes=0,b.encodingLength=function(e){return 8+n.encodingLength(e.target)};const m=t.caa={};m.ISSUER_CRITICAL=128,m.encode=function(e,t,n){const o=m.encodingLength(e);return t||(t=r.allocUnsafe(m.encodingLength(e))),n||(n=0),e.issuerCritical&&(e.flags=m.ISSUER_CRITICAL),t.writeUInt16BE(o-2,n),n+=2,t.writeUInt8(e.flags||0,n),n+=1,i.encode(e.tag,t,n),n+=i.encode.bytes,t.write(e.value,n),n+=r.byteLength(e.value),m.encode.bytes=o,t},m.encode.bytes=0,m.decode=function(e,t){t||(t=0);const r=e.readUInt16BE(t),n=t+=2,o={};return o.flags=e.readUInt8(t),t+=1,o.tag=i.decode(e,t),t+=i.decode.bytes,o.value=e.toString("utf-8",t,n+r),o.issuerCritical=!!(o.flags&m.ISSUER_CRITICAL),m.decode.bytes=r+2,o},m.decode.bytes=0,m.encodingLength=function(e){return i.encodingLength(e.tag)+i.encodingLength(e.value)+2};const g=t.mx={};g.encode=function(e,t,i){t||(t=r.allocUnsafe(g.encodingLength(e))),i||(i=0);const o=i;return i+=2,t.writeUInt16BE(e.preference||0,i),i+=2,n.encode(e.exchange,t,i),i+=n.encode.bytes,t.writeUInt16BE(i-o-2,o),g.encode.bytes=i-o,t},g.encode.bytes=0,g.decode=function(e,t){t||(t=0);const r=t,i={};return t+=2,i.preference=e.readUInt16BE(t),t+=2,i.exchange=n.decode(e,t),t+=n.decode.bytes,g.decode.bytes=t-r,i},g.encodingLength=function(e){return 4+n.encodingLength(e.exchange)};const y=t.a={};y.encode=function(e,t,n){return t||(t=r.allocUnsafe(y.encodingLength(e))),n||(n=0),t.writeUInt16BE(4,n),n+=2,ip_1.toBuffer(e,t,n),y.encode.bytes=6,t},y.encode.bytes=0,y.decode=function(e,t){t||(t=0),t+=2;const r=ip_1.toString(e,t,4);return y.decode.bytes=6,r},y.decode.bytes=0,y.encodingLength=function(){return 6};const v=t.aaaa={};v.encode=function(e,t,n){return t||(t=r.allocUnsafe(v.encodingLength(e))),n||(n=0),t.writeUInt16BE(16,n),n+=2,ip_1.toBuffer(e,t,n),v.encode.bytes=18,t},v.encode.bytes=0,v.decode=function(e,t){t||(t=0),t+=2;const r=ip_1.toString(e,t,16);return v.decode.bytes=18,r},v.decode.bytes=0,v.encodingLength=function(){return 18};const _=t.option={};_.encode=function(e,t,n){t||(t=r.allocUnsafe(_.encodingLength(e))),n||(n=0);const i=n;return t.writeUInt16BE(e.code,n),n+=2,t.writeUInt16BE(e.data.length,n),n+=2,e.data.copy(t,n),n+=e.data.length,_.encode.bytes=n-i,t},_.encode.bytes=0,_.decode=function(e,t){t||(t=0);const r={};r.code=e.readUInt16BE(t);const n=e.readUInt16BE(t+2);return r.data=e.slice(t+4,t+4+n),_.decode.bytes=n+4,r},_.decode.bytes=0,_.encodingLength=function(e){return e.data.length+4};const $=t.opt={};$.encode=function(e,t,n){t||(t=r.allocUnsafe($.encodingLength(e))),n||(n=0);const i=n,o=C(e,_);return t.writeUInt16BE(o,n),n=A(e,_,t,n+2),$.encode.bytes=n-i,t},$.encode.bytes=0,$.decode=function(e,t){t||(t=0);const r=t,n=[];let i=e.readUInt16BE(t);t+=2;let o=0;for(;i>0;)n[o++]=_.decode(e,t),t+=_.decode.bytes,i-=_.decode.bytes;return $.decode.bytes=t-r,n},$.decode.bytes=0,$.encodingLength=function(e){return 2+C(e||[],_)};const S=t.record=function(e){switch(e.toUpperCase()){case"A":return y;case"PTR":return d;case"CNAME":return h;case"DNAME":return p;case"TXT":return u;case"NULL":return f;case"AAAA":return v;case"SRV":return b;case"HINFO":return l;case"CAA":return m;case"NS":return a;case"SOA":return c;case"MX":return g;case"OPT":return $}return s},E=t.answer={};E.encode=function(e,t,i){t||(t=r.allocUnsafe(E.encodingLength(e))),i||(i=0);const o=i;if(n.encode(e.name,t,i),i+=n.encode.bytes,t.writeUInt16BE(types$1.toType(e.type),i),"OPT"===e.type.toUpperCase()){if("."!==e.name)throw new Error("OPT name must be root.");t.writeUInt16BE(e.updPayloadSize||4096,i+2),t.writeUInt8(e.extendedRcode||0,i+4),t.writeUInt8(e.ednsVersion||0,i+5),t.writeUInt16BE(e.flags||0,i+6),i+=8,$.encode(e.options||[],t,i),i+=$.encode.bytes}else{let r=classes.toClass(void 0===e.class?"IN":e.class);e.flush&&(r|=32768),t.writeUInt16BE(r,i+2),t.writeUInt32BE(e.ttl||0,i+4),i+=8;const n=S(e.type);n.encode(e.data,t,i),i+=n.encode.bytes}return E.encode.bytes=i-o,t},E.encode.bytes=0,E.decode=function(e,t){t||(t=0);const r={},i=t;if(r.name=n.decode(e,t),t+=n.decode.bytes,r.type=types$1.toString(e.readUInt16BE(t)),"OPT"===r.type)r.udpPayloadSize=e.readUInt16BE(t+2),r.extendedRcode=e.readUInt8(t+4),r.ednsVersion=e.readUInt8(t+5),r.flags=e.readUInt16BE(t+6),r.flag_do=1==(r.flags>>15&1),r.options=$.decode(e,t+8),t+=8+$.decode.bytes;else{const n=e.readUInt16BE(t+2);r.ttl=e.readUInt32BE(t+4),r.class=classes.toString(-32769&n),r.flush=!!(32768&n);const i=S(r.type);r.data=i.decode(e,t+8),t+=8+i.decode.bytes}return E.decode.bytes=t-i,r},E.decode.bytes=0,E.encodingLength=function(e){return n.encodingLength(e.name)+8+S(e.type).encodingLength(e.data||e.options)};const w=t.question={};function C(e,t){let r=0;for(let n=0;n<e.length;n++)r+=t.encodingLength(e[n]);return r}function A(e,t,r,n){for(let i=0;i<e.length;i++)t.encode(e[i],r,n),n+=t.encode.bytes;return n}function k(e,t,r,n){for(let i=0;i<e.length;i++)e[i]=t.decode(r,n),n+=t.decode.bytes;return n}w.encode=function(e,t,i){t||(t=r.allocUnsafe(w.encodingLength(e))),i||(i=0);const o=i;return n.encode(e.name,t,i),i+=n.encode.bytes,t.writeUInt16BE(types$1.toType(e.type),i),i+=2,t.writeUInt16BE(classes.toClass(void 0===e.class?"IN":e.class),i),i+=2,w.encode.bytes=i-o,e},w.encode.bytes=0,w.decode=function(e,t){t||(t=0);const r=t,i={};return i.name=n.decode(e,t),t+=n.decode.bytes,i.type=types$1.toString(e.readUInt16BE(t)),t+=2,i.class=classes.toString(e.readUInt16BE(t)),t+=2,!!(32768&i.class)&&(i.class&=-32769),w.decode.bytes=t-r,i},w.decode.bytes=0,w.encodingLength=function(e){return n.encodingLength(e.name)+4},t.AUTHORITATIVE_ANSWER=1024,t.TRUNCATED_RESPONSE=512,t.RECURSION_DESIRED=256,t.RECURSION_AVAILABLE=128,t.AUTHENTIC_DATA=32,t.CHECKING_DISABLED=16,t.DNSSEC_OK=32768,t.encode=function(e,n,i){n||(n=r.allocUnsafe(t.encodingLength(e))),i||(i=0);const s=i;return e.questions||(e.questions=[]),e.answers||(e.answers=[]),e.authorities||(e.authorities=[]),e.additionals||(e.additionals=[]),o.encode(e,n,i),i+=o.encode.bytes,i=A(e.questions,w,n,i),i=A(e.answers,E,n,i),i=A(e.authorities,E,n,i),i=A(e.additionals,E,n,i),t.encode.bytes=i-s,n},t.encode.bytes=0,t.decode=function(e,r){r||(r=0);const n=r,i=o.decode(e,r);return r+=o.decode.bytes,r=k(i.questions,w,e,r),r=k(i.answers,E,e,r),r=k(i.authorities,E,e,r),r=k(i.additionals,E,e,r),t.decode.bytes=r-n,i},t.decode.bytes=0,t.encodingLength=function(e){return o.encodingLength(e)+C(e.questions||[],w)+C(e.answers||[],E)+C(e.authorities||[],E)+C(e.additionals||[],E)},t.streamEncode=function(e){const n=t.encode(e),i=r.allocUnsafe(2);i.writeUInt16BE(n.byteLength);const o=r.concat([i,n]);return t.streamEncode.bytes=o.byteLength,o},t.streamEncode.bytes=0,t.streamDecode=function(e){const r=e.readUInt16BE(0);if(e.byteLength<r+2)return null;const n=t.decode(e.slice(2));return t.streamDecode.bytes=t.decode.bytes,n},t.streamDecode.bytes=0}),dnsPacket_1=dnsPacket.txt,dnsPacket_2=dnsPacket.name,dnsPacket_3=dnsPacket.unknown,dnsPacket_4=dnsPacket.ns,dnsPacket_5=dnsPacket.soa,dnsPacket_6=dnsPacket.hinfo,dnsPacket_7=dnsPacket.ptr,dnsPacket_8=dnsPacket.cname,dnsPacket_9=dnsPacket.dname,dnsPacket_10=dnsPacket.srv,dnsPacket_11=dnsPacket.caa,dnsPacket_12=dnsPacket.mx,dnsPacket_13=dnsPacket.a,dnsPacket_14=dnsPacket.aaaa,dnsPacket_15=dnsPacket.option,dnsPacket_16=dnsPacket.opt,dnsPacket_17=dnsPacket.record,dnsPacket_18=dnsPacket.answer,dnsPacket_19=dnsPacket.question,dnsPacket_20=dnsPacket.AUTHORITATIVE_ANSWER,dnsPacket_21=dnsPacket.TRUNCATED_RESPONSE,dnsPacket_22=dnsPacket.RECURSION_DESIRED,dnsPacket_23=dnsPacket.RECURSION_AVAILABLE,dnsPacket_24=dnsPacket.AUTHENTIC_DATA,dnsPacket_25=dnsPacket.CHECKING_DISABLED,dnsPacket_26=dnsPacket.DNSSEC_OK,dnsPacket_27=dnsPacket.encode,dnsPacket_28=dnsPacket.decode,dnsPacket_29=dnsPacket.encodingLength,dnsPacket_30=dnsPacket.streamEncode,dnsPacket_31=dnsPacket.streamDecode,nextTick$1=nextTickArgs;process.nextTick(upgrade,42);var thunky_1=thunky;function thunky(e){var t=function(n){var i=[n];t=function(e){i.push(e)};e(function(e){var n=arguments;t=isError$1(e)?r:o;for(;i.length;)o(i.shift());function o(e){nextTick$1(apply,e,n)}})};return function(e){t(e||noop$7)};function r(n){var i=[n];t=o;e(s);function o(e){i.push(e)}function s(e){var n=arguments;t=isError$1(e)?r:o;while(i.length)o(i.shift());function o(e){nextTick$1(apply,e,n)}}}}function isError$1(e){return"[object Error]"===Object.prototype.toString.call(e)}function noop$7(){}function apply(e,t){e.apply(null,t)}function upgrade(e){42===e&&(nextTick$1=process.nextTick)}function nextTickArgs(e,t,r){process.nextTick(function(){e(t,r)})}var noop$8=function(){},multicastDns=function(e){e||(e={});var t=new events$1.EventEmitter,r="number"==typeof e.port?e.port:5353,n=e.type||"udp4",i=e.ip||e.host||("udp4"===n?"224.0.0.251":null),o={address:i,port:r},s={},a=!1,c=null;if(!("udp6"!==n||i&&e.interface))throw new Error("For IPv6 multicast you must specify `ip` and `interface`");var u=e.socket||dgram.createSocket({type:n,reuseAddr:!1!==e.reuseAddr,toString:function(){return n}});u.on("error",function(e){"EACCES"===e.code||"EADDRINUSE"===e.code?t.emit("error",e):t.emit("warning",e)}),u.on("message",function(e,r){try{e=dnsPacket.decode(e)}catch(e){return void t.emit("warning",e)}t.emit("packet",e,r),"query"===e.type&&t.emit("query",e,r),"response"===e.type&&t.emit("response",e,r)}),u.on("listening",function(){r||(r=o.port=u.address().port),!1!==e.multicast&&(t.update(),c=setInterval(t.update,5e3),u.setMulticastTTL(e.ttl||255),u.setMulticastLoopback(!1!==e.loopback))});var f=thunky_1(function(t){if(!r||!1===e.bind)return t(null);u.once("error",t),u.bind(r,e.interface,function(){u.removeListener("error",t),t(null)})});return f(function(e){if(e)return t.emit("error",e);t.emit("ready")}),t.send=function(e,r,n){if("function"==typeof r)return t.send(e,null,r);n||(n=noop$8),r?r.host||r.address||(r.address=o.address):r=o,f(function(t){if(a)return n();if(t)return n(t);var i=dnsPacket.encode(e);u.send(i,0,i.length,r.port,r.address||r.host,n)})},t.response=t.respond=function(e,r,n){Array.isArray(e)&&(e={answers:e}),e.type="response",e.flags=(e.flags||0)|dnsPacket.AUTHORITATIVE_ANSWER,t.send(e,r,n)},t.query=function(e,r,n,i){return"function"==typeof r?t.query(e,null,null,r):"object"==typeof r&&r&&r.port?t.query(e,null,r,n):"function"==typeof n?t.query(e,r,null,n):(i||(i=noop$8),"string"==typeof e&&(e=[{name:e,type:r||"ANY"}]),Array.isArray(e)&&(e={type:"query",questions:e}),e.type="query",void t.send(e,n,i))},t.destroy=function(e){if(e||(e=noop$8),a)return process.nextTick(e);a=!0,clearInterval(c),u.once("close",e),u.close()},t.update=function(){for(var r=e.interface?[].concat(e.interface):allInterfaces(),n=!1,o=0;o<r.length;o++){var a=r[o];if(!s[a]){s[a]=!0,n=!0;try{u.addMembership(i,a)}catch(e){t.emit("warning",e)}}}n&&u.setMulticastInterface&&u.setMulticastInterface(e.interface||defaultInterface())},t};function defaultInterface(){for(var e=os.networkInterfaces(),t=Object.keys(e),r=0;r<t.length;r++)for(var n=e[t[r]],i=0;i<n.length;i++){var o=n[i];if("IPv4"===o.family&&!o.internal)return"0.0.0.0"}return"127.0.0.1"}function allInterfaces(){for(var e=os.networkInterfaces(),t=Object.keys(e),r=[],n=0;n<t.length;n++)for(var i=e[t[n]],o=0;o<i.length;o++){var s=i[o];if("IPv4"===s.family){r.push(s.address);break}}return r}var s$b=1e3,m$9=60*s$b,h$7=60*m$9,d$7=24*h$7,w$7=7*d$7,y$7=365.25*d$7,ms$7=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$b(e);if("number"===r&&isFinite(e))return t.long?fmtLong$7(e):fmtShort$7(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$b(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$7;case"weeks":case"week":case"w":return r*w$7;case"days":case"day":case"d":return r*d$7;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$7;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$9;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$b;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$7(e){var t=Math.abs(e);return t>=d$7?Math.round(e/d$7)+"d":t>=h$7?Math.round(e/h$7)+"h":t>=m$9?Math.round(e/m$9)+"m":t>=s$b?Math.round(e/s$b)+"s":e+"ms"}function fmtLong$7(e){var t=Math.abs(e);return t>=d$7?plural$7(e,t,d$7,"day"):t>=h$7?plural$7(e,t,h$7,"hour"):t>=m$9?plural$7(e,t,m$9,"minute"):t>=s$b?plural$7(e,t,s$b,"second"):e+" ms"}function plural$7(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$6(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$7,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$d=setup$6,browser$6=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$d(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$6=browser$6.log,browser_2$6=browser$6.formatArgs,browser_3$6=browser$6.save,browser_4$6=browser$6.load,browser_5$6=browser$6.useColors,browser_6$6=browser$6.storage,browser_7$6=browser$6.colors,node$9=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$d(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$6=node$9.init,node_2$6=node$9.log,node_3$6=node$9.formatArgs,node_4$6=node$9.save,node_5$6=node$9.load,node_6$6=node$9.useColors,node_7$6=node$9.colors,node_8$6=node$9.inspectOpts,src$X=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$6:e.exports=node$9});const log$a=src$X("libp2p:mdns"),tcp=new src$W;var query={queryLAN:function(e,t,r){const n=()=>{log$a("query",t),e.query({questions:[{name:t,type:"PTR"}]})};return n(),setInterval(n,r)},gotResponse:function(e,t,r,n){if(!e.answers)return;const i={ptr:{},srv:{},txt:{},a:[],aaaa:[]};if(e.answers.forEach(e=>{switch(e.type){case"PTR":i.ptr=e;break;case"SRV":i.srv=e;break;case"TXT":i.txt=e;break;case"A":i.a.push(e);break;case"AAAA":i.aaaa.push(e)}}),i.ptr.name!==r)return;const o=i.txt.data[0].toString(),s=i.srv.data.port,a=[];if(i.a.forEach(e=>{a.push(new src$2("/ip4/"+e.data+"/tcp/"+s))}),i.aaaa.forEach(e=>{a.push(new src$2("/ip6/"+e.data+"/tcp/"+s))}),t.id.toB58String()===o)return;log$a("peer found -",o);const c=src$s.createFromB58String(o);src$t.create(c,(e,t)=>{if(e)return log$a("Error creating PeerInfo from new found peer",e);a.forEach(e=>t.multiaddrs.add(e)),n(null,t)})},gotQuery:function(e,t,r,n,i){if(!i)return;const o=tcp.filter(r.multiaddrs.toArray());if(0!==o.length&&e.questions[0]&&e.questions[0].name===n){const e=[];e.push({name:n,type:"PTR",class:"IN",ttl:120,data:r.id.toB58String()+"."+n});const i=o[0].toString().split("/")[4];e.push({name:r.id.toB58String()+"."+n,type:"SRV",class:"IN",ttl:120,data:{priority:10,weight:1,port:i,target:os.hostname()}}),e.push({name:r.id.toB58String()+"."+n,type:"TXT",class:"IN",ttl:120,data:r.id.toB58String()}),o.forEach(t=>{"ip4"!==t.protoNames()[0]?"ip6"===t.protoNames()[0]&&e.push({name:os.hostname(),type:"AAAA",class:"IN",ttl:120,data:t.toString().split("/")[2]}):e.push({name:os.hostname(),type:"A",class:"IN",ttl:120,data:t.toString().split("/")[2]})}),log$a("responding to query"),t.respond(e)}}},constants$b=createCommonjsModule(function(e,t){t.SERVICE_TAG="_ipfs-discovery._udp",t.SERVICE_TAG_LOCAL=`${t.SERVICE_TAG}.local`,t.MULTICAST_IP="224.0.0.251",t.MULTICAST_PORT=5353}),constants_1$5=constants$b.SERVICE_TAG,constants_2$2=constants$b.SERVICE_TAG_LOCAL,constants_3$2=constants$b.MULTICAST_IP,constants_4$2=constants$b.MULTICAST_PORT;const log$b=src$X("libp2p:mdns:compat:responder"),{SERVICE_TAG_LOCAL:SERVICE_TAG_LOCAL}=constants$b,tcp$1=new src$W;class Responder{constructor(e){assert$t(e,"missing peerInfo parameter"),this._peerInfo=e,this._peerIdStr=e.id.toB58String(),this._onQuery=this._onQuery.bind(this)}start(e){this._mdns=multicastDns(),this._mdns.on("query",this._onQuery),nextTick(()=>e())}_onQuery(e,t){const r=tcp$1.filter(this._peerInfo.multiaddrs.toArray());if(!r.length)return;if(!(e.questions||[]).some(e=>e.name===SERVICE_TAG_LOCAL))return;log$b("got query",e,t);const n=[],i=`${this._peerIdStr}.${SERVICE_TAG_LOCAL}`;n.push({name:SERVICE_TAG_LOCAL,type:"PTR",class:"IN",ttl:120,data:i});const o=r[0].toString().split("/")[4];n.push({name:i,type:"SRV",class:"IN",ttl:120,data:{priority:10,weight:1,port:o,target:os.hostname()}}),n.push({name:i,type:"TXT",class:"IN",ttl:120,data:[Buffer.from(this._peerIdStr)]}),r.forEach(e=>{const t=e.protoNames()[0];"ip4"!==t&&"ip6"!==t||n.push({name:os.hostname(),type:"ip4"===t?"A":"AAAA",class:"IN",ttl:120,data:e.toString().split("/")[2]})}),log$b("responding to query",n),this._mdns.respond(n,t)}stop(e){this._mdns.removeListener("query",this._onQuery),this._mdns.destroy(e)}}var responder=Responder;const log$c=src$X("libp2p:mdns:compat:querier"),{SERVICE_TAG_LOCAL:SERVICE_TAG_LOCAL$1,MULTICAST_IP:MULTICAST_IP,MULTICAST_PORT:MULTICAST_PORT}=constants$b;class Querier extends events$1{constructor(e,t){super(),assert$t(e,"missing peerId parameter"),t=t||{},this._peerIdStr=e.toB58String(),t.queryInterval=t.queryInterval||6e4,t.queryPeriod=Math.min(t.queryInterval,null==t.queryPeriod?5e3:t.queryPeriod),this._options=t,this._onResponse=this._onResponse.bind(this)}start(e){this._handle=periodically(()=>{const e=multicastDns({multicast:!1,interface:"0.0.0.0",port:0});return e.on("response",this._onResponse),e.query({id:nextId(),questions:[{name:SERVICE_TAG_LOCAL$1,type:"PTR",class:"IN"}]},null,{address:MULTICAST_IP,port:MULTICAST_PORT}),{stop:t=>{e.removeListener("response",this._onResponse),e.destroy(t)}}},{period:this._options.queryPeriod,interval:this._options.queryInterval}),nextTick(()=>e())}_onResponse(e,t){const r=e.answers||[];if(!r.find(e=>"PTR"===e.type&&e.name===SERVICE_TAG_LOCAL$1))return;log$c("got response",e,t);const n=r.find(e=>"TXT"===e.type);if(!n)return log$c("missing TXT record in response");let i,o;try{i=n.data[0].toString()}catch(e){return log$c("failed to extract peer ID from TXT record data",n,e)}if(this._peerIdStr===i)return log$c("ignoring reply to myself");try{o=src$s.createFromB58String(i)}catch(e){return log$c("failed to create peer ID from TXT record data",i,e)}src$t.create(o,(e,t)=>{if(e)return log$c("failed to create peer info from peer ID",o,e);const n=r.find(e=>"SRV"===e.type);if(!n)return log$c("missing SRV record in response");log$c("peer found",i);const{port:s}=n.data||{},a={A:"ip4",AAAA:"ip6"};r.filter(e=>["A","AAAA"].includes(e.type)).reduce((e,t)=>{const r=`/${a[t.type]}/${t.data}/tcp/${s}`;try{e.push(new src$2(r)),log$c(r)}catch(e){log$c(`failed to create multiaddr from ${t.type} record data`,r,s,e)}return e},[]).forEach(e=>t.multiaddrs.add(e)),this.emit("peer",t)})}stop(e){this._handle.stop(e)}}var querier=Querier;function periodically(e,t){let r,n,i=!1;const o=()=>{r=e(),n=setTimeout(()=>{r.stop(e=>{e&&log$c(e),i||(n=setTimeout(o,t.interval))}),r=null},t.period)};return o(),{stop(e){i=!0,clearTimeout(n),r?r.stop(e):e()}}}const nextId=(()=>{let e=0;return()=>(++e===Number.MAX_SAFE_INTEGER&&(e=1),e)})();class GoMulticastDNS extends events$1{constructor(e){super(),this._started=!1,this._peerInfo=e,this._onPeer=this._onPeer.bind(this)}start(e){if(this._started)return e(new Error("MulticastDNS service is already started"));this._started=!0,this._responder=new responder(this._peerInfo),this._querier=new querier(this._peerInfo.id),this._querier.on("peer",this._onPeer),parallel$1([e=>this._responder.start(e),e=>this._querier.start(e)],e)}_onPeer(e){this.emit("peer",e)}stop(e){if(!this._started)return e(new Error("MulticastDNS service is not started"));const t=this._responder,r=this._querier;this._started=!1,this._responder=null,this._querier=null,r.removeListener("peer",this._onPeer),parallel$1([e=>t.stop(e),e=>r.stop(e)],e)}}var compat=GoMulticastDNS,src$Y=createCommonjsModule(function(e,t){const r=events$1.EventEmitter,n=src$X("libp2p:mdns");(e.exports=class extends r{constructor(e){super(),assert$t(e.peerInfo,"needs a PeerInfo to work"),this.broadcast=!1!==e.broadcast,this.interval=e.interval||1e4,this.serviceTag=e.serviceTag||"ipfs.local",this.port=e.port||5353,this.peerInfo=e.peerInfo,this._queryInterval=null,this._onPeer=this._onPeer.bind(this),!1!==e.compat&&(this._goMdns=new compat(e.peerInfo,{queryPeriod:e.compatQueryPeriod,queryInterval:e.compatQueryInterval}),this._goMdns.on("peer",this._onPeer))}start(e){const t=multicastDns({port:this.port});this.mdns=t,this._queryInterval=query.queryLAN(this.mdns,this.serviceTag,this.interval),t.on("response",e=>{query.gotResponse(e,this.peerInfo,this.serviceTag,(e,t)=>{if(e)return n("Error processing peer response",e);this._onPeer(t)})}),t.on("query",e=>{query.gotQuery(e,this.mdns,this.peerInfo,this.serviceTag,this.broadcast)}),this._goMdns?this._goMdns.start(e):nextTick(()=>e())}_onPeer(e){this.emit("peer",e)}stop(e){if(!this.mdns)return e(new Error("MulticastDNS service had not started yet"));clearInterval(this._queryInterval),this._queryInterval=null,this._goMdns?(this._goMdns.removeListener("peer",this._onPeer),parallel$1([e=>this._goMdns.stop(e),e=>this.mdns.destroy(e)],e)):(this.mdns.destroy(e),this.mdns=void 0)}}).tag="mdns"}),src_1$9=src$Y.tag,has=Object.prototype.hasOwnProperty,id$5=0;function Ultron(e){if(!(this instanceof Ultron))return new Ultron(e);this.id=id$5++,this.ee=e}Ultron.prototype.on=function(e,t,r){return t.__ultron=this.id,this.ee.on(e,t,r),this},Ultron.prototype.once=function(e,t,r){return t.__ultron=this.id,this.ee.once(e,t,r),this},Ultron.prototype.remove=function(){var e,t=arguments;if(1===t.length&&"string"==typeof t[0])t=t[0].split(/[, ]+/);else if(!t.length)for(e in t=[],this.ee._events)has.call(this.ee._events,e)&&t.push(e);for(var r=0;r<t.length;r++)for(var n=this.ee.listeners(t[r]),i=0;i<n.length;i++){if((e=n[i]).listener){if(e.listener.__ultron!==this.id)continue;delete e.listener.__ultron}else{if(e.__ultron!==this.id)continue;delete e.__ultron}this.ee.removeListener(t[r],e)}return this},Ultron.prototype.destroy=function(){return!!this.ee&&(this.remove(),this.ee=null,!0)};var ultron=Ultron;function Options(e){var t={},r=this.value={};Object.keys(e).forEach(function(n){t[n]=e[n],Object.defineProperty(r,n,{get:function(){return t[n]},configurable:!1,enumerable:!0})}),this.reset=function(){return Object.keys(e).forEach(function(r){t[r]=e[r]}),this},this.merge=function(e,r){if(e=e||{},"[object Array]"===Object.prototype.toString.call(r)){for(var n=[],i=0,o=r.length;i<o;++i){var s=r[i];s in e||n.push(s)}if(n.length>0)throw n.length>1?new Error("options "+n.slice(0,n.length-1).join(", ")+" and "+n[n.length-1]+" must be defined"):new Error("option "+n[0]+" must be defined")}return Object.keys(e).forEach(function(r){r in t&&(t[r]=e[r])}),this},this.copy=function(t){var n={};return Object.keys(e).forEach(function(e){-1!==t.indexOf(e)&&(n[e]=r[e])}),n},this.read=function(e,t){if("function"==typeof t){var r=this;fs.readFile(e,function(e,n){if(e)return t(e);var i=JSON.parse(n);r.merge(i),t()})}else{var n=JSON.parse(fs.readFileSync(e));this.merge(n)}return this},this.isDefined=function(e){return void 0!==r[e]},this.isDefinedAndNonNull=function(e){return null!=r[e]},Object.freeze(r),Object.freeze(this)}var bufferUtil,options=Options,ErrorCodes={isValidErrorCode:function(e){return e>=1e3&&e<=1011&&1004!=e&&1005!=e&&1006!=e||e>=3e3&&e<=4999},1000:"normal",1001:"going away",1002:"protocol error",1003:"unsupported data",1004:"reserved",1005:"reserved for extensions",1006:"reserved for extensions",1007:"inconsistent or invalid data",1008:"policy violation",1009:"message too big",1010:"extension handshake missing",1011:"an unexpected condition prevented the request from being fulfilled"},BufferUtil={merge:function(e,t){for(var r=0,n=0,i=t.length;n<i;++n){var o=t[n];o.copy(e,r),r+=o.length}},mask:function(e,t,r,n,i){for(var o=t.readUInt32LE(0,!0),s=0;s<i-3;s+=4){var a=o^e.readUInt32LE(s,!0);a<0&&(a=4294967296+a),r.writeUInt32LE(a,n+s,!0)}switch(i%4){case 3:r[n+s+2]=e[s+2]^t[2];case 2:r[n+s+1]=e[s+1]^t[1];case 1:r[n+s]=e[s]^t[0]}},unmask:function(e,t){for(var r=t.readUInt32LE(0,!0),n=e.length,i=0;i<n-3;i+=4){var o=r^e.readUInt32LE(i,!0);o<0&&(o=4294967296+o),e.writeUInt32LE(o,i,!0)}switch(n%4){case 3:e[i+2]=e[i+2]^t[2];case 2:e[i+1]=e[i+1]^t[1];case 1:e[i]=e[i]^t[0]}}},BufferUtil_fallback={BufferUtil:BufferUtil};try{bufferUtil=bufferutil}catch(e){bufferUtil=BufferUtil_fallback}var BufferUtil$1=bufferUtil.BufferUtil||bufferUtil,AVAILABLE_WINDOW_BITS=[8,9,10,11,12,13,14,15],DEFAULT_WINDOW_BITS=15,DEFAULT_MEM_LEVEL=8;function PerMessageDeflate(e,t,r){if(this instanceof PerMessageDeflate==!1)throw new TypeError("Classes can't be function-called");this._options=e||{},this._isServer=!!t,this._inflate=null,this._deflate=null,this.params=null,this._maxPayload=r||0}PerMessageDeflate.extensionName="permessage-deflate",PerMessageDeflate.prototype.offer=function(){var e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e},PerMessageDeflate.prototype.accept=function(e){var t;return e=this.normalizeParams(e),t=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params=t,t},PerMessageDeflate.prototype.cleanup=function(){this._inflate&&(this._inflate.writeInProgress?this._inflate.pendingClose=!0:(this._inflate.close&&this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate.writeInProgress?this._deflate.pendingClose=!0:(this._deflate.close&&this._deflate.close(),this._deflate=null))},PerMessageDeflate.prototype.acceptAsServer=function(e){var t={};if(!e.some(function(e){if(t={},(!1!==this._options.serverNoContextTakeover||!e.server_no_context_takeover)&&(!1!==this._options.serverMaxWindowBits||!e.server_max_window_bits)&&!("number"==typeof this._options.serverMaxWindowBits&&"number"==typeof e.server_max_window_bits&&this._options.serverMaxWindowBits>e.server_max_window_bits)&&("number"!=typeof this._options.clientMaxWindowBits||e.client_max_window_bits))return(this._options.serverNoContextTakeover||e.server_no_context_takeover)&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),!1!==this._options.clientNoContextTakeover&&e.client_no_context_takeover&&(t.client_no_context_takeover=!0),"number"==typeof this._options.serverMaxWindowBits?t.server_max_window_bits=this._options.serverMaxWindowBits:"number"==typeof e.server_max_window_bits&&(t.server_max_window_bits=e.server_max_window_bits),"number"==typeof this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:!1!==this._options.clientMaxWindowBits&&"number"==typeof e.client_max_window_bits&&(t.client_max_window_bits=e.client_max_window_bits),!0},this))throw new Error("Doesn't support the offered configuration");return t},PerMessageDeflate.prototype.acceptAsClient=function(e){var t=e[0];if(null!=this._options.clientNoContextTakeover&&!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Invalid value for "client_no_context_takeover"');if(null!=this._options.clientMaxWindowBits){if(!1===this._options.clientMaxWindowBits&&t.client_max_window_bits)throw new Error('Invalid value for "client_max_window_bits"');if("number"==typeof this._options.clientMaxWindowBits&&(!t.client_max_window_bits||t.client_max_window_bits>this._options.clientMaxWindowBits))throw new Error('Invalid value for "client_max_window_bits"')}return t},PerMessageDeflate.prototype.normalizeParams=function(e){return e.map(function(e){return Object.keys(e).forEach(function(t){var r=e[t];if(r.length>1)throw new Error("Multiple extension parameters for "+t);switch(r=r[0],t){case"server_no_context_takeover":case"client_no_context_takeover":if(!0!==r)throw new Error("invalid extension parameter value for "+t+" ("+r+")");e[t]=!0;break;case"server_max_window_bits":case"client_max_window_bits":if("string"==typeof r&&(r=parseInt(r,10),!~AVAILABLE_WINDOW_BITS.indexOf(r)))throw new Error("invalid extension parameter value for "+t+" ("+r+")");if(!this._isServer&&!0===r)throw new Error("Missing extension parameter value for "+t);e[t]=r;break;default:throw new Error("Not defined extension parameter ("+t+")")}},this),e},this)},PerMessageDeflate.prototype.decompress=function(e,t,r){var n=this._isServer?"client":"server";if(!this._inflate){var i=this.params[n+"_max_window_bits"];this._inflate=zlib.createInflateRaw({windowBits:"number"==typeof i?i:DEFAULT_WINDOW_BITS})}this._inflate.writeInProgress=!0;var o=this,s=[],a=0;function c(e){f(),r(e)}function u(e){if(void 0!==o._maxPayload&&null!==o._maxPayload&&o._maxPayload>0&&(a+=e.length)>o._maxPayload){s=[],f();r({type:1009})}else s.push(e)}function f(){o._inflate&&(o._inflate.removeListener("error",c),o._inflate.removeListener("data",u),o._inflate.writeInProgress=!1,(t&&o.params[n+"_no_context_takeover"]||o._inflate.pendingClose)&&(o._inflate.close&&o._inflate.close(),o._inflate=null))}this._inflate.on("error",c).on("data",u),this._inflate.write(e),t&&this._inflate.write(new Buffer([0,0,255,255])),this._inflate.flush(function(){f(),r(null,Buffer.concat(s))})},PerMessageDeflate.prototype.compress=function(e,t,r){var n=this._isServer?"server":"client";if(!this._deflate){var i=this.params[n+"_max_window_bits"];this._deflate=zlib.createDeflateRaw({flush:zlib.Z_SYNC_FLUSH,windowBits:"number"==typeof i?i:DEFAULT_WINDOW_BITS,memLevel:this._options.memLevel||DEFAULT_MEM_LEVEL})}this._deflate.writeInProgress=!0;var o=this,s=[];function a(e){u(),r(e)}function c(e){s.push(e)}function u(){o._deflate&&(o._deflate.removeListener("error",a),o._deflate.removeListener("data",c),o._deflate.writeInProgress=!1,(t&&o.params[n+"_no_context_takeover"]||o._deflate.pendingClose)&&(o._deflate.close&&o._deflate.close(),o._deflate=null))}this._deflate.on("error",a).on("data",c),this._deflate.write(e),this._deflate.flush(function(){u();var e=Buffer.concat(s);t&&(e=e.slice(0,e.length-4)),r(null,e)})};var PerMessageDeflate_1=PerMessageDeflate,EventEmitter$3=events$1.EventEmitter;function Sender(e,t){if(this instanceof Sender==!1)throw new TypeError("Classes can't be function-called");events$1.EventEmitter.call(this),this._socket=e,this.extensions=t||{},this.firstFragment=!0,this.compress=!1,this.messageHandlers=[],this.processing=!1}util$j.inherits(Sender,events$1.EventEmitter),Sender.prototype.close=function(e,t,r,n){if(void 0!==e&&("number"!=typeof e||!ErrorCodes.isValidErrorCode(e)))throw new Error("first argument must be a valid error code number");e=e||1e3;var i=new Buffer(2+(t?Buffer.byteLength(t):0));writeUInt16BE.call(i,e,0),i.length>2&&i.write(t,2);var o=this;this.messageHandlers.push(function(){o.frameAndSend(8,i,!0,r),"function"==typeof n&&n()}),this.flush()},Sender.prototype.ping=function(e,t){var r=t&&t.mask,n=this;this.messageHandlers.push(function(){n.frameAndSend(9,e||"",!0,r)}),this.flush()},Sender.prototype.pong=function(e,t){var r=t&&t.mask,n=this;this.messageHandlers.push(function(){n.frameAndSend(10,e||"",!0,r)}),this.flush()},Sender.prototype.send=function(e,t,r){var n=!t||!1!==t.fin,i=t&&t.mask,o=t&&t.compress,s=t&&t.binary?2:1;!1===this.firstFragment?(s=0,o=!1):(this.firstFragment=!1,this.compress=o),n&&(this.firstFragment=!0);var a=this.compress,c=this;this.messageHandlers.push(function(){e&&a?(c.processing=!0,c.applyExtensions(e,n,a,function(e,t){e?"function"==typeof r?r(e):c.emit("error",e):(c.frameAndSend(s,t,n,i,o,r),c.processing=!1,c.flush())})):c.frameAndSend(s,e,n,i,o,r)}),this.flush()},Sender.prototype.frameAndSend=function(e,t,r,n,i,o){var s=!1;if(t){Buffer.isBuffer(t)||(s=!0,!t||void 0===t.byteLength&&void 0===t.buffer?("number"==typeof t&&(t=t.toString()),t=new Buffer(t)):t=getArrayBuffer(t));var a=t.length,c=n?6:2,u=a;a>=65536?(c+=8,u=127):a>125&&(c+=2,u=126);var f=a<32768||n&&!s,l=new Buffer(f?a+c:c);switch(l[0]=r?128|e:e,i&&(l[0]|=64),u){case 126:writeUInt16BE.call(l,a,2);break;case 127:writeUInt32BE.call(l,0,2),writeUInt32BE.call(l,a,6)}if(n){l[1]=128|u;var d=getRandomMask();if(l[c-4]=d[0],l[c-3]=d[1],l[c-2]=d[2],l[c-1]=d[3],f){BufferUtil$1.mask(t,d,l,c,a);try{this._socket.write(l,"binary",o)}catch(e){"function"==typeof o?o(e):this.emit("error",e)}}else{BufferUtil$1.mask(t,d,t,0,a);try{this._socket.write(l,"binary"),this._socket.write(t,"binary",o)}catch(e){"function"==typeof o?o(e):this.emit("error",e)}}}else if(l[1]=u,f){t.copy(l,c);try{this._socket.write(l,"binary",o)}catch(e){"function"==typeof o?o(e):this.emit("error",e)}}else try{this._socket.write(l,"binary"),this._socket.write(t,"binary",o)}catch(e){"function"==typeof o?o(e):this.emit("error",e)}}else try{this._socket.write(new Buffer([e|(r?128:0),0|(n?128:0)].concat(n?[0,0,0,0]:[])),"binary",o)}catch(e){"function"==typeof o?o(e):this.emit("error",e)}},Sender.prototype.flush=function(){for(;!this.processing&&this.messageHandlers.length;)this.messageHandlers.shift()()},Sender.prototype.applyExtensions=function(e,t,r,n){(e.buffer||e)instanceof ArrayBuffer&&(e=getArrayBuffer(e)),this.extensions[PerMessageDeflate_1.extensionName].compress(e,t,n)};var Sender_1=Sender;function writeUInt16BE(e,t){this[t]=(65280&e)>>8,this[t+1]=255&e}function writeUInt32BE(e,t){this[t]=(4278190080&e)>>24,this[t+1]=(16711680&e)>>16,this[t+2]=(65280&e)>>8,this[t+3]=255&e}function getArrayBuffer(e){for(var t=new Uint8Array(e.buffer||e),r=e.byteLength||e.length,n=e.byteOffset||0,i=new Buffer(r),o=0;o<r;++o)i[o]=t[n+o];return i}function getRandomMask(){return crypto$l.randomBytes(4)}var isValidUTF8,Validation={isValidUTF8:function(e){return!0}},Validation_fallback={Validation:Validation};try{isValidUTF8=utf8Validate}catch(e){isValidUTF8=Validation_fallback}var Validation$1="object"==typeof isValidUTF8?isValidUTF8.Validation.isValidUTF8:isValidUTF8;function BufferPool(e,t,r){if(this instanceof BufferPool==!1)throw new TypeError("Classes can't be function-called");"function"==typeof e?(r=t,t=e,e=0):void 0===e&&(e=0),this._growStrategy=(t||function(e,t){return e.used+t}).bind(null,this),this._shrinkStrategy=(r||function(t){return e}).bind(null,this),this._buffer=e?new Buffer(e):null,this._offset=0,this._used=0,this._changeFactor=0,this.__defineGetter__("size",function(){return null==this._buffer?0:this._buffer.length}),this.__defineGetter__("used",function(){return this._used})}BufferPool.prototype.get=function(e){if(null==this._buffer||this._offset+e>this._buffer.length){var t=new Buffer(this._growStrategy(e));this._buffer=t,this._offset=0}this._used+=e;var r=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,r},BufferPool.prototype.reset=function(e){var t=this._shrinkStrategy();t<this.size&&(this._changeFactor-=1),(e||this._changeFactor<-2)&&(this._changeFactor=0,this._buffer=t?new Buffer(t):null),this._offset=0,this._used=0};var BufferPool_1=BufferPool;function Receiver(e,t){if(this instanceof Receiver==!1)throw new TypeError("Classes can't be function-called");"number"==typeof e&&(t=e,e={});var r=-1;this.fragmentedBufferPool=new BufferPool_1(1024,function(e,t){return e.used+t},function(e){return r=r>=0?Math.ceil((r+e.used)/2):e.used});var n=-1;this.unfragmentedBufferPool=new BufferPool_1(1024,function(e,t){return e.used+t},function(e){return n=n>=0?Math.ceil((n+e.used)/2):e.used}),this.extensions=e||{},this.maxPayload=t||0,this.currentPayloadLength=0,this.state={activeFragmentedOperation:null,lastFragment:!1,masked:!1,opcode:0,fragmentedOperation:!1},this.overflow=[],this.headerBuffer=new Buffer(10),this.expectOffset=0,this.expectBuffer=null,this.expectHandler=null,this.currentMessage=[],this.currentMessageLength=0,this.messageHandlers=[],this.expectHeader(2,this.processPacket),this.dead=!1,this.processing=!1,this.onerror=function(){},this.ontext=function(){},this.onbinary=function(){},this.onclose=function(){},this.onping=function(){},this.onpong=function(){}}var Receiver_1=Receiver;function readUInt16BE(e){return(this[e]<<8)+this[e+1]}function readUInt32BE(e){return(this[e]<<24)+(this[e+1]<<16)+(this[e+2]<<8)+this[e+3]}function fastCopy(e,t,r,n){switch(e){default:t.copy(r,n,0,e);break;case 16:r[n+15]=t[15];case 15:r[n+14]=t[14];case 14:r[n+13]=t[13];case 13:r[n+12]=t[12];case 12:r[n+11]=t[11];case 11:r[n+10]=t[10];case 10:r[n+9]=t[9];case 9:r[n+8]=t[8];case 8:r[n+7]=t[7];case 7:r[n+6]=t[6];case 6:r[n+5]=t[5];case 5:r[n+4]=t[4];case 4:r[n+3]=t[3];case 3:r[n+2]=t[2];case 2:r[n+1]=t[1];case 1:r[n]=t[0]}}function clone$6(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}Receiver.prototype.add=function(e){if(!this.dead){var t=e.length;if(0!=t)if(null!=this.expectBuffer){var r=Math.min(t,this.expectBuffer.length-this.expectOffset);for(fastCopy(r,e,this.expectBuffer,this.expectOffset),this.expectOffset+=r,r<t&&this.overflow.push(e.slice(r));this.expectBuffer&&this.expectOffset==this.expectBuffer.length;){var n=this.expectBuffer;this.expectBuffer=null,this.expectOffset=0,this.expectHandler.call(this,n)}}else this.overflow.push(e)}},Receiver.prototype.cleanup=function(){this.dead=!0,this.overflow=null,this.headerBuffer=null,this.expectBuffer=null,this.expectHandler=null,this.unfragmentedBufferPool=null,this.fragmentedBufferPool=null,this.state=null,this.currentMessage=null,this.onerror=null,this.ontext=null,this.onbinary=null,this.onclose=null,this.onping=null,this.onpong=null},Receiver.prototype.expectHeader=function(e,t){if(0!=e){this.expectBuffer=this.headerBuffer.slice(this.expectOffset,this.expectOffset+e),this.expectHandler=t;for(var r=e;r>0&&this.overflow.length>0;){var n=this.overflow.pop();r<n.length&&this.overflow.push(n.slice(r));var i=Math.min(n.length,r);fastCopy(i,n,this.expectBuffer,this.expectOffset),this.expectOffset+=i,r-=i}}else t(null)},Receiver.prototype.expectData=function(e,t){if(0!=e){this.expectBuffer=this.allocateFromPool(e,this.state.fragmentedOperation),this.expectHandler=t;for(var r=e;r>0&&this.overflow.length>0;){var n=this.overflow.pop();r<n.length&&this.overflow.push(n.slice(r));var i=Math.min(n.length,r);fastCopy(i,n,this.expectBuffer,this.expectOffset),this.expectOffset+=i,r-=i}}else t(null)},Receiver.prototype.allocateFromPool=function(e,t){return(t?this.fragmentedBufferPool:this.unfragmentedBufferPool).get(e)},Receiver.prototype.processPacket=function(e){if(this.extensions[PerMessageDeflate_1.extensionName]){if(0!=(48&e[0]))return void this.error("reserved fields (2, 3) must be empty",1002)}else if(0!=(112&e[0]))return void this.error("reserved fields must be empty",1002);this.state.lastFragment=128==(128&e[0]),this.state.masked=128==(128&e[1]);var t=64==(64&e[0]),r=15&e[0];if(0===r){if(t)return void this.error("continuation frame cannot have the Per-message Compressed bits",1002);if(this.state.fragmentedOperation=!0,this.state.opcode=this.state.activeFragmentedOperation,1!=this.state.opcode&&2!=this.state.opcode)return void this.error("continuation frame cannot follow current opcode",1002)}else{if(r<3&&null!=this.state.activeFragmentedOperation)return void this.error("data frames after the initial data frame must have opcode 0",1002);if(r>=8&&t)return void this.error("control frames cannot have the Per-message Compressed bits",1002);this.state.compressed=t,this.state.opcode=r,!1===this.state.lastFragment?(this.state.fragmentedOperation=!0,this.state.activeFragmentedOperation=r):this.state.fragmentedOperation=!1}var n=opcodes$1[this.state.opcode];void 0===n?this.error("no handler for opcode "+this.state.opcode,1002):n.start.call(this,e)},Receiver.prototype.endPacket=function(){this.dead||(this.state.fragmentedOperation?this.state.lastFragment&&this.fragmentedBufferPool.reset(!0):this.unfragmentedBufferPool.reset(!0),this.expectOffset=0,this.expectBuffer=null,this.expectHandler=null,this.state.lastFragment&&this.state.opcode===this.state.activeFragmentedOperation&&(this.state.activeFragmentedOperation=null),this.currentPayloadLength=0,this.state.lastFragment=!1,this.state.opcode=null!=this.state.activeFragmentedOperation?this.state.activeFragmentedOperation:0,this.state.masked=!1,this.expectHeader(2,this.processPacket))},Receiver.prototype.reset=function(){this.dead||(this.state={activeFragmentedOperation:null,lastFragment:!1,masked:!1,opcode:0,fragmentedOperation:!1},this.fragmentedBufferPool.reset(!0),this.unfragmentedBufferPool.reset(!0),this.expectOffset=0,this.expectBuffer=null,this.expectHandler=null,this.overflow=[],this.currentMessage=[],this.currentMessageLength=0,this.messageHandlers=[],this.currentPayloadLength=0)},Receiver.prototype.unmask=function(e,t,r){return null!=e&&null!=t&&BufferUtil$1.unmask(t,e),r?t:null!=t?t.toString("utf8"):""},Receiver.prototype.error=function(e,t){if(!this.dead)return this.reset(),"string"==typeof e?this.onerror(new Error(e),t):e.constructor==Error?this.onerror(e,t):this.onerror(new Error("An error occured"),t),this},Receiver.prototype.flush=function(){if(!this.processing&&!this.dead){var e=this.messageHandlers.shift();if(e){this.processing=!0;var t=this;e(function(){t.processing=!1,t.flush()})}}},Receiver.prototype.applyExtensions=function(e,t,r,n){var i=this;r?this.extensions[PerMessageDeflate_1.extensionName].decompress(e,t,function(e,t){i.dead||(e?n(new Error("invalid compressed data")):n(null,t))}):n(null,e)},Receiver.prototype.maxPayloadExceeded=function(e){if(void 0===this.maxPayload||null===this.maxPayload||this.maxPayload<1)return!1;var t=this.currentPayloadLength+e;return t<this.maxPayload?(this.currentPayloadLength=t,!1):(this.error("payload cannot exceed "+this.maxPayload+" bytes",1009),this.messageBuffer=[],this.cleanup(),!0)};var opcodes$1={1:{start:function(e){var t=this,r=127&e[1];if(r<126){if(t.maxPayloadExceeded(r))return void t.error("Maximumpayload exceeded in compressed text message. Aborting...",1009);opcodes$1[1].getData.call(t,r)}else 126==r?t.expectHeader(2,function(e){var r=readUInt16BE.call(e,0);t.maxPayloadExceeded(r)?t.error("Maximumpayload exceeded in compressed text message. Aborting...",1009):opcodes$1[1].getData.call(t,r)}):127==r&&t.expectHeader(8,function(e){if(0==readUInt32BE.call(e,0)){var r=readUInt32BE.call(e,4);t.maxPayloadExceeded(r)?t.error("Maximumpayload exceeded in compressed text message. Aborting...",1009):opcodes$1[1].getData.call(t,readUInt32BE.call(e,4))}else t.error("packets with length spanning more than 32 bit is currently not supported",1008)})},getData:function(e){var t=this;t.state.masked?t.expectHeader(4,function(r){var n=r;t.expectData(e,function(e){opcodes$1[1].finish.call(t,n,e)})}):t.expectData(e,function(e){opcodes$1[1].finish.call(t,null,e)})},finish:function(e,t){var r=this,n=this.unmask(e,t,!0)||new Buffer(0),i=clone$6(this.state);this.messageHandlers.push(function(e){r.applyExtensions(n,i.lastFragment,i.compressed,function(t,n){if(t)return 1009===t.type?r.error("Maximumpayload exceeded in compressed text message. Aborting...",1009):r.error(t.message,1007);if(null!=n){if(!(0==r.maxPayload||r.maxPayload>0&&r.currentMessageLength+n.length<r.maxPayload))return r.currentMessage=null,r.currentMessage=[],r.currentMessageLength=0,void r.error(new Error("Maximum payload exceeded. maxPayload: "+r.maxPayload),1009);r.currentMessage.push(n),r.currentMessageLength+=n.length}if(i.lastFragment){var o=Buffer.concat(r.currentMessage);if(r.currentMessage=[],r.currentMessageLength=0,!Validation$1(o))return void r.error("invalid utf8 sequence",1007);r.ontext(o.toString("utf8"),{masked:i.masked,buffer:o})}e()})}),this.flush(),this.endPacket()}},2:{start:function(e){var t=this,r=127&e[1];if(r<126){if(t.maxPayloadExceeded(r))return void t.error("Max payload exceeded in compressed text message. Aborting...",1009);opcodes$1[2].getData.call(t,r)}else 126==r?t.expectHeader(2,function(e){var r=readUInt16BE.call(e,0);t.maxPayloadExceeded(r)?t.error("Max payload exceeded in compressed text message. Aborting...",1009):opcodes$1[2].getData.call(t,r)}):127==r&&t.expectHeader(8,function(e){if(0==readUInt32BE.call(e,0)){var r=readUInt32BE.call(e,4,!0);t.maxPayloadExceeded(r)?t.error("Max payload exceeded in compressed text message. Aborting...",1009):opcodes$1[2].getData.call(t,r)}else t.error("packets with length spanning more than 32 bit is currently not supported",1008)})},getData:function(e){var t=this;t.state.masked?t.expectHeader(4,function(r){var n=r;t.expectData(e,function(e){opcodes$1[2].finish.call(t,n,e)})}):t.expectData(e,function(e){opcodes$1[2].finish.call(t,null,e)})},finish:function(e,t){var r=this,n=this.unmask(e,t,!0)||new Buffer(0),i=clone$6(this.state);this.messageHandlers.push(function(e){r.applyExtensions(n,i.lastFragment,i.compressed,function(t,n){if(t)return 1009===t.type?r.error("Max payload exceeded in compressed binary message. Aborting...",1009):r.error(t.message,1007);if(null!=n){if(!(0==r.maxPayload||r.maxPayload>0&&r.currentMessageLength+n.length<r.maxPayload))return r.currentMessage=null,r.currentMessage=[],r.currentMessageLength=0,void r.error(new Error("Maximum payload exceeded"),1009);r.currentMessage.push(n),r.currentMessageLength+=n.length}if(i.lastFragment){var o=Buffer.concat(r.currentMessage);r.currentMessage=[],r.currentMessageLength=0,r.onbinary(o,{masked:i.masked,buffer:o})}e()})}),this.flush(),this.endPacket()}},8:{start:function(e){if(0!=this.state.lastFragment){var t=127&e[1];t<126?opcodes$1[8].getData.call(this,t):this.error("control frames cannot have more than 125 bytes of data",1002)}else this.error("fragmented close is not supported",1002)},getData:function(e){var t=this;t.state.masked?t.expectHeader(4,function(r){var n=r;t.expectData(e,function(e){opcodes$1[8].finish.call(t,n,e)})}):t.expectData(e,function(e){opcodes$1[8].finish.call(t,null,e)})},finish:function(e,t){var r=this;t=r.unmask(e,t,!0);var n=clone$6(this.state);this.messageHandlers.push(function(){if(t&&1==t.length)r.error("close packets with data must be at least two bytes long",1002);else{var e=t&&t.length>1?readUInt16BE.call(t,0):1e3;if(ErrorCodes.isValidErrorCode(e)){var i="";if(t&&t.length>2){var o=t.slice(2);if(!Validation$1(o))return void r.error("invalid utf8 sequence",1007);i=o.toString("utf8")}r.onclose(e,i,{masked:n.masked}),r.reset()}else r.error("invalid error code",1002)}}),this.flush()}},9:{start:function(e){if(0!=this.state.lastFragment){var t=127&e[1];t<126?opcodes$1[9].getData.call(this,t):this.error("control frames cannot have more than 125 bytes of data",1002)}else this.error("fragmented ping is not supported",1002)},getData:function(e){var t=this;t.state.masked?t.expectHeader(4,function(r){var n=r;t.expectData(e,function(e){opcodes$1[9].finish.call(t,n,e)})}):t.expectData(e,function(e){opcodes$1[9].finish.call(t,null,e)})},finish:function(e,t){var r=this;t=this.unmask(e,t,!0);var n=clone$6(this.state);this.messageHandlers.push(function(e){r.onping(t,{masked:n.masked,binary:!0}),e()}),this.flush(),this.endPacket()}},10:{start:function(e){if(0!=this.state.lastFragment){var t=127&e[1];t<126?opcodes$1[10].getData.call(this,t):this.error("control frames cannot have more than 125 bytes of data",1002)}else this.error("fragmented pong is not supported",1002)},getData:function(e){var t=this;this.state.masked?this.expectHeader(4,function(r){var n=r;t.expectData(e,function(e){opcodes$1[10].finish.call(t,n,e)})}):this.expectData(e,function(e){opcodes$1[10].finish.call(t,null,e)})},finish:function(e,t){var r=this;t=r.unmask(e,t,!0);var n=clone$6(this.state);this.messageHandlers.push(function(e){r.onpong(t,{masked:n.masked,binary:!0}),e()}),this.flush(),this.endPacket()}}},EventEmitter$4=events$1.EventEmitter;function Sender$1(e){if(this instanceof Sender$1==!1)throw new TypeError("Classes can't be function-called");events$1.EventEmitter.call(this),this.socket=e,this.continuationFrame=!1,this.isClosed=!1}var Sender_hixie=Sender$1;util$j.inherits(Sender$1,events$1.EventEmitter),Sender$1.prototype.send=function(e,t,r){if(!this.isClosed){var n="string"==typeof e,i=n?Buffer.byteLength(e):e.length,o=i>127?2:1,s=0==this.continuationFrame,a=!t||!(void 0!==t.fin&&!t.fin),c=new Buffer((s?t&&t.binary?1+o:1:0)+i+(!a||t&&t.binary?0:1)),u=s?1:0;s&&(t&&t.binary?(c.write("","binary"),o>1&&c.write(String.fromCharCode(128+i/128),u++,"binary"),c.write(String.fromCharCode(127&i),u++,"binary")):c.write("\0","binary")),n?c.write(e,u,"utf8"):e.copy(c,u,0),a?(t&&t.binary||c.write("ÿ",u+i,"binary"),this.continuationFrame=!1):this.continuationFrame=!0;try{this.socket.write(c,"binary",r)}catch(e){this.error(e.toString())}}},Sender$1.prototype.close=function(e,t,r,n){if(!this.isClosed){this.isClosed=!0;try{this.continuationFrame&&this.socket.write(new Buffer([255],"binary")),this.socket.write(new Buffer([255,0]),"binary",n)}catch(e){this.error(e.toString())}}},Sender$1.prototype.ping=function(e,t){},Sender$1.prototype.pong=function(e,t){},Sender$1.prototype.error=function(e){return this.emit("error",e),this};var EMPTY$1=0,BODY=1,BINARYLENGTH=2,BINARYBODY=3;function Receiver$1(){if(this instanceof Receiver$1==!1)throw new TypeError("Classes can't be function-called");this.state=EMPTY$1,this.buffers=[],this.messageEnd=-1,this.spanLength=0,this.dead=!1,this.onerror=function(){},this.ontext=function(){},this.onbinary=function(){},this.onclose=function(){},this.onping=function(){},this.onpong=function(){}}var Receiver_hixie=Receiver$1;function bufferIndex(e,t){for(var r=0,n=e.length;r<n;++r)if(e[r]===t)return r;return-1}Receiver$1.prototype.add=function(e){if(!this.dead)for(var t=this;e;)e=r();function r(){if(t.state===EMPTY$1){if(2==e.length&&255==e[0]&&0==e[1])return t.reset(),void t.onclose();if(128===e[0])t.messageEnd=0,t.state=BINARYLENGTH,e=e.slice(1);else{if(0!==e[0])return void t.error("payload must start with 0x00 byte",!0);e=e.slice(1),t.state=BODY}}if(t.state===BINARYLENGTH){for(var r=0;r<e.length&&128&e[r];)t.messageEnd=128*t.messageEnd+(127&e[r]),++r;r<e.length&&(t.messageEnd=128*t.messageEnd+(127&e[r]),t.state=BINARYBODY,++r),r>0&&(e=e.slice(r))}if(t.state===BINARYBODY){var n=t.messageEnd-t.spanLength;return e.length>=n?(t.buffers.push(e),t.spanLength+=n,t.messageEnd=n,t.parse()):(t.buffers.push(e),void(t.spanLength+=e.length))}if(t.buffers.push(e),-1!=(t.messageEnd=bufferIndex(e,255)))return t.spanLength+=t.messageEnd,t.parse();t.spanLength+=e.length}},Receiver$1.prototype.cleanup=function(){this.dead=!0,this.state=EMPTY$1,this.buffers=[]},Receiver$1.prototype.parse=function(){for(var e=new Buffer(this.spanLength),t=0,r=0,n=this.buffers.length;r<n-1;++r){var i=this.buffers[r];i.copy(e,t),t+=i.length}var o=this.buffers[this.buffers.length-1];this.messageEnd>0&&o.copy(e,t,0,this.messageEnd),this.state!==BODY&&--this.messageEnd;var s=null;return this.messageEnd<o.length-1&&(s=o.slice(this.messageEnd+1)),this.reset(),this.ontext(e.toString("utf8")),s},Receiver$1.prototype.error=function(e,t){if(!this.dead)return this.reset(),"string"==typeof e?this.onerror(new Error(e),t):e.constructor==Error?this.onerror(e,t):this.onerror(new Error("An error occured"),t),this},Receiver$1.prototype.reset=function(e){this.dead||(this.state=EMPTY$1,this.buffers=[],this.messageEnd=-1,this.spanLength=0)};var parse_1$2=parse$c,format_1=format$3;function parse$c(e){var t={};return(e=e||"").split(",").forEach(function(e){var r=e.split(";"),n=r.shift().trim();if(void 0===t[n])t[n]=[];else if(!t.hasOwnProperty(n))return;var i={};r.forEach(function(e){var t=e.trim().split("="),r=t[0],n=t[1];void 0===n?n=!0:('"'===n[0]&&(n=n.slice(1)),'"'===n[n.length-1]&&(n=n.slice(0,n.length-1))),void 0===i[r]?i[r]=[n]:i.hasOwnProperty(r)&&i[r].push(n)}),t[n].push(i)}),t}function format$3(e){return Object.keys(e).map(function(t){var r=e[t];return util$j.isArray(r)||(r=[r]),r.map(function(e){return[t].concat(Object.keys(e).map(function(t){var r=e[t];return util$j.isArray(r)||(r=[r]),r.map(function(e){return!0===e?t:t+"="+e}).join("; ")})).join("; ")}).join(", ")}).join(", ")}var Extensions={parse:parse_1$2,format:format_1},EventEmitter$5=events$1.EventEmitter,protocolVersion=13,closeTimeout=3e4;function WebSocket$1(e,t,r){if(this instanceof WebSocket$1==!1)return new WebSocket$1(e,t,r);EventEmitter$5.call(this),t&&!Array.isArray(t)&&"object"==typeof t&&(r=t,t=null),"string"==typeof t&&(t=[t]),Array.isArray(t)||(t=[]),this._socket=null,this._ultron=null,this._closeReceived=!1,this.bytesReceived=0,this.readyState=null,this.supports={},this.extensions={},this._binaryType="nodebuffer",Array.isArray(e)?initAsServerClient.apply(this,e.concat(r)):initAsClient.apply(this,[e,t,r])}util$j.inherits(WebSocket$1,EventEmitter$5),["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e,t){WebSocket$1.prototype[e]=WebSocket$1[e]=t}),WebSocket$1.prototype.close=function(e,t){if(this.readyState!==WebSocket$1.CLOSED)if(this.readyState!==WebSocket$1.CONNECTING)if(this.readyState!==WebSocket$1.CLOSING){var r=this;try{this.readyState=WebSocket$1.CLOSING,this._closeCode=e,this._closeMessage=t;var n=!this._isServer;this._sender.close(e,t,n,function(e){e&&r.emit("error",e),r._closeReceived&&r._isServer?r.terminate():(clearTimeout(r._closeTimer),r._closeTimer=setTimeout(cleanupWebsocketResources.bind(r,!0),closeTimeout))})}catch(e){this.emit("error",e)}}else this._closeReceived&&this._isServer&&this.terminate();else this.readyState=WebSocket$1.CLOSED},WebSocket$1.prototype.pause=function(){if(this.readyState!==WebSocket$1.OPEN)throw new Error("not opened");return this._socket.pause()},WebSocket$1.prototype.ping=function(e,t,r){if(this.readyState!==WebSocket$1.OPEN){if(!0===r)return;throw new Error("not opened")}void 0===(t=t||{}).mask&&(t.mask=!this._isServer),this._sender.ping(e,t)},WebSocket$1.prototype.pong=function(e,t,r){if(this.readyState!==WebSocket$1.OPEN){if(!0===r)return;throw new Error("not opened")}void 0===(t=t||{}).mask&&(t.mask=!this._isServer),this._sender.pong(e,t)},WebSocket$1.prototype.resume=function(){if(this.readyState!==WebSocket$1.OPEN)throw new Error("not opened");return this._socket.resume()},WebSocket$1.prototype.send=function(e,t,r){if("function"==typeof t&&(r=t,t={}),this.readyState===WebSocket$1.OPEN)if(e||(e=""),this._queue){var n=this;this._queue.push(function(){n.send(e,t,r)})}else{(t=t||{}).fin=!0,void 0===t.binary&&(t.binary=e instanceof ArrayBuffer||e instanceof Buffer||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array),void 0===t.mask&&(t.mask=!this._isServer),void 0===t.compress&&(t.compress=!0),this.extensions[PerMessageDeflate_1.extensionName]||(t.compress=!1);var i="function"==typeof Stream$1.Readable?Stream$1.Readable:Stream$1.Stream;if(e instanceof i){startQueue(this);n=this;sendStream(this,e,t,function(e){process.nextTick(function(){executeQueueSends(n)}),"function"==typeof r&&r(e)})}else this._sender.send(e,t,r)}else{if("function"!=typeof r)throw new Error("not opened");r(new Error("not opened"))}},WebSocket$1.prototype.stream=function(e,t){"function"==typeof e&&(t=e,e={});var r=this;if("function"!=typeof t)throw new Error("callback must be provided");if(this.readyState===WebSocket$1.OPEN)this._queue?this._queue.push(function(){r.stream(e,t)}):(void 0===(e=e||{}).mask&&(e.mask=!this._isServer),void 0===e.compress&&(e.compress=!0),this.extensions[PerMessageDeflate_1.extensionName]||(e.compress=!1),startQueue(this),process.nextTick(t.bind(null,null,function n(i,o){try{if(r.readyState!==WebSocket$1.OPEN)throw new Error("not opened");e.fin=!0===o,r._sender.send(i,e),o?executeQueueSends(r):process.nextTick(t.bind(null,null,n))}catch(e){"function"==typeof t?t(e):(delete r._queue,r.emit("error",e))}})));else{if("function"!=typeof t)throw new Error("not opened");t(new Error("not opened"))}},WebSocket$1.prototype.terminate=function(){if(this.readyState!==WebSocket$1.CLOSED)if(this._socket){this.readyState=WebSocket$1.CLOSING;try{this._socket.end()}catch(e){return void cleanupWebsocketResources.call(this,!0)}this._closeTimer&&clearTimeout(this._closeTimer),this._closeTimer=setTimeout(cleanupWebsocketResources.bind(this,!0),closeTimeout)}else this.readyState===WebSocket$1.CONNECTING&&cleanupWebsocketResources.call(this,!0)},Object.defineProperty(WebSocket$1.prototype,"bufferedAmount",{get:function(){var e=0;return this._socket&&(e=this._socket.bufferSize||0),e}}),Object.defineProperty(WebSocket$1.prototype,"binaryType",{get:function(){return this._binaryType},set:function(e){if("arraybuffer"!==e&&"nodebuffer"!==e)throw new SyntaxError('unsupported binaryType: must be either "nodebuffer" or "arraybuffer"');this._binaryType=e}}),["open","error","close","message"].forEach(function(e){Object.defineProperty(WebSocket$1.prototype,"on"+e,{get:function(){var t=this.listeners(e)[0];return t?t._listener?t._listener:t:void 0},set:function(t){this.removeAllListeners(e),this.addEventListener(e,t)}})}),WebSocket$1.prototype.addEventListener=function(e,t){var r=this;function n(e,n){n.binary&&"arraybuffer"===this.binaryType&&(e=new Uint8Array(e).buffer),t.call(r,new MessageEvent(e,!!n.binary,r))}function i(e,n){t.call(r,new CloseEvent(e,n,r))}function o(e){e.type="error",e.target=r,t.call(r,e)}function s(){t.call(r,new OpenEvent(r))}"function"==typeof t&&("message"===e?(n._listener=t,this.on(e,n)):"close"===e?(i._listener=t,this.on(e,i)):"error"===e?(o._listener=t,this.on(e,o)):"open"===e?(s._listener=t,this.on(e,s)):this.on(e,t))};var WebSocket_1=WebSocket$1,buildHostHeader_1=buildHostHeader;function MessageEvent(e,t,r){this.type="message",this.data=e,this.target=r,this.binary=t}function CloseEvent(e,t,r){this.type="close",this.wasClean=void 0===e||1e3===e,this.code=e,this.reason=t,this.target=r}function OpenEvent(e){this.type="open",this.target=e}function buildHostHeader(e,t,r){var n=t;return t&&(e&&443!=r||!e&&80!=r)&&(n=n+":"+r),n}function initAsServerClient(e,t,r,n){n=new options({protocolVersion:protocolVersion,protocol:null,extensions:{},maxPayload:0}).merge(n),this.protocol=n.value.protocol,this.protocolVersion=n.value.protocolVersion,this.extensions=n.value.extensions,this.supports.binary="hixie-76"!==this.protocolVersion,this.upgradeReq=e,this.readyState=WebSocket$1.CONNECTING,this._isServer=!0,this.maxPayload=n.value.maxPayload,"hixie-76"===n.value.protocolVersion?establishConnection.call(this,Receiver_hixie,Sender_hixie,t,r):establishConnection.call(this,Receiver_1,Sender_1,t,r)}function initAsClient(e,t,r){if(8!==(r=new options({origin:null,protocolVersion:protocolVersion,host:null,headers:null,protocol:t.join(","),agent:null,pfx:null,key:null,passphrase:null,cert:null,ca:null,ciphers:null,rejectUnauthorized:null,perMessageDeflate:!0,localAddress:null}).merge(r)).value.protocolVersion&&13!==r.value.protocolVersion)throw new Error("unsupported protocol version");var n=Url.parse(e),i="ws+unix:"===n.protocol;if(!n.host&&!i)throw new Error("invalid url");var o,s="wss:"===n.protocol||"https:"===n.protocol,a=s?https:http,c=n.port||(s?443:80),u=n.auth,f={};r.value.perMessageDeflate&&(o=new PerMessageDeflate_1(!0!==typeof r.value.perMessageDeflate?r.value.perMessageDeflate:{},!1),f[PerMessageDeflate_1.extensionName]=o.offer()),this._isServer=!1,this.url=e,this.protocolVersion=r.value.protocolVersion,this.supports.binary="hixie-76"!==this.protocolVersion;var l=new Buffer(r.value.protocolVersion+"-"+Date.now()).toString("base64"),d=crypto$l.createHash("sha1");d.update(l+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var h=d.digest("base64"),p=r.value.agent,b=buildHostHeader(s,n.hostname,c),m={port:c,host:n.hostname,headers:{Connection:"Upgrade",Upgrade:"websocket",Host:b,"Sec-WebSocket-Version":r.value.protocolVersion,"Sec-WebSocket-Key":l}};if(u&&(m.headers.Authorization="Basic "+new Buffer(u).toString("base64")),r.value.protocol&&(m.headers["Sec-WebSocket-Protocol"]=r.value.protocol),r.value.host&&(m.headers.Host=r.value.host),r.value.headers)for(var g in r.value.headers)r.value.headers.hasOwnProperty(g)&&(m.headers[g]=r.value.headers[g]);Object.keys(f).length&&(m.headers["Sec-WebSocket-Extensions"]=Extensions.format(f)),(r.isDefinedAndNonNull("pfx")||r.isDefinedAndNonNull("key")||r.isDefinedAndNonNull("passphrase")||r.isDefinedAndNonNull("cert")||r.isDefinedAndNonNull("ca")||r.isDefinedAndNonNull("ciphers")||r.isDefinedAndNonNull("rejectUnauthorized"))&&(r.isDefinedAndNonNull("pfx")&&(m.pfx=r.value.pfx),r.isDefinedAndNonNull("key")&&(m.key=r.value.key),r.isDefinedAndNonNull("passphrase")&&(m.passphrase=r.value.passphrase),r.isDefinedAndNonNull("cert")&&(m.cert=r.value.cert),r.isDefinedAndNonNull("ca")&&(m.ca=r.value.ca),r.isDefinedAndNonNull("ciphers")&&(m.ciphers=r.value.ciphers),r.isDefinedAndNonNull("rejectUnauthorized")&&(m.rejectUnauthorized=r.value.rejectUnauthorized),p||(p=new a.Agent(m))),m.path=n.path||"/",p&&(m.agent=p),i&&(m.socketPath=n.pathname),r.value.localAddress&&(m.localAddress=r.value.localAddress),r.value.origin&&(r.value.protocolVersion<13?m.headers["Sec-WebSocket-Origin"]=r.value.origin:m.headers.Origin=r.value.origin);var y=this,v=a.request(m);v.on("error",function(e){y.emit("error",e),cleanupWebsocketResources.call(y,e)}),v.once("response",function(e){var t;y.emit("unexpected-response",v,e)||(t=new Error("unexpected server response ("+e.statusCode+")"),v.abort(),y.emit("error",t)),cleanupWebsocketResources.call(y,t)}),v.once("upgrade",function(e,t,n){if(y.readyState===WebSocket$1.CLOSED)return y.emit("close"),y.removeAllListeners(),void t.end();var i=e.headers["sec-websocket-accept"];if(void 0===i||i!==h)return y.emit("error","invalid server key"),y.removeAllListeners(),void t.end();var s=e.headers["sec-websocket-protocol"],a=(r.value.protocol||"").split(/, */),c=null;if(!r.value.protocol&&s?c="server sent a subprotocol even though none requested":r.value.protocol&&!s?c="server sent no subprotocol even though requested":s&&-1===a.indexOf(s)&&(c="server responded with an invalid protocol"),c)return y.emit("error",c),y.removeAllListeners(),void t.end();s&&(y.protocol=s);var u=Extensions.parse(e.headers["sec-websocket-extensions"]);if(o&&u[PerMessageDeflate_1.extensionName]){try{o.accept(u[PerMessageDeflate_1.extensionName])}catch(e){return y.emit("error","invalid extension parameter"),y.removeAllListeners(),void t.end()}y.extensions[PerMessageDeflate_1.extensionName]=o}establishConnection.call(y,Receiver_1,Sender_1,t,n),v.removeAllListeners(),v=null,p=null}),v.end(),this.readyState=WebSocket$1.CONNECTING}function establishConnection(e,t,r,n){var i=this._ultron=new ultron(r),o=!1,s=this;function a(e){o||s.readyState===WebSocket$1.CLOSED||(o=!0,r.removeListener("data",a),i.on("data",c),n&&n.length>0&&(c(n),n=null),e&&c(e))}function c(e){s.bytesReceived+=e.length,s._receiver.add(e)}r.setTimeout(0),r.setNoDelay(!0),this._receiver=new e(this.extensions,this.maxPayload),this._socket=r,i.on("end",cleanupWebsocketResources.bind(this)),i.on("close",cleanupWebsocketResources.bind(this)),i.on("error",cleanupWebsocketResources.bind(this)),i.on("data",a),process.nextTick(a),s._receiver.ontext=function(e,t){t=t||{},s.emit("message",e,t)},s._receiver.onbinary=function(e,t){(t=t||{}).binary=!0,s.emit("message",e,t)},s._receiver.onping=function(e,t){t=t||{},s.pong(e,{mask:!s._isServer,binary:!0===t.binary},!0),s.emit("ping",e,t)},s._receiver.onpong=function(e,t){s.emit("pong",e,t||{})},s._receiver.onclose=function(e,t,r){s._closeReceived=!0,s.close(e,t)},s._receiver.onerror=function(e,t){s.close(void 0!==t?t:1002,""),s.emit("error",e instanceof Error?e:new Error(e))},this._sender=new t(r,this.extensions),this._sender.on("error",function(e){s.close(1002,""),s.emit("error",e)}),this.readyState=WebSocket$1.OPEN,this.emit("open")}function startQueue(e){e._queue=e._queue||[]}function executeQueueSends(e){var t=e._queue;if(void 0!==t){delete e._queue;for(var r=0,n=t.length;r<n;++r)t[r]()}}function sendStream(e,t,r,n){t.on("data",function(t){e.readyState===WebSocket$1.OPEN?(r.fin=!1,e._sender.send(t,r)):"function"==typeof n?n(new Error("not opened")):(delete e._queue,e.emit("error",new Error("not opened")))}),t.on("end",function(){e.readyState===WebSocket$1.OPEN?(r.fin=!0,e._sender.send(null,r),"function"==typeof n&&n(null)):"function"==typeof n?n(new Error("not opened")):(delete e._queue,e.emit("error",new Error("not opened")))})}function cleanupWebsocketResources(e){if(this.readyState!==WebSocket$1.CLOSED){if(this.readyState=WebSocket$1.CLOSED,clearTimeout(this._closeTimer),this._closeTimer=null,!e&&this._closeReceived||(this._closeCode=1006),this.emit("close",this._closeCode||1e3,this._closeMessage||""),this._socket){this._ultron&&this._ultron.destroy(),this._socket.on("error",function(){try{this.destroy()}catch(e){}});try{e?this._socket.destroy():this._socket.end()}catch(e){}this._socket=null,this._ultron=null}this._sender&&(this._sender.removeAllListeners(),this._sender=null),this._receiver&&(this._receiver.cleanup(),this._receiver=null),this.extensions[PerMessageDeflate_1.extensionName]&&this.extensions[PerMessageDeflate_1.extensionName].cleanup(),this.extensions=null,this.removeAllListeners(),this.on("error",function(){}),delete this._queue}}function WebSocketServer(e,t){if(this instanceof WebSocketServer==!1)return new WebSocketServer(e,t);if(events$1.EventEmitter.call(this),!(e=new options({host:"0.0.0.0",port:null,server:null,verifyClient:null,handleProtocols:null,path:null,noServer:!1,disableHixie:!1,clientTracking:!0,perMessageDeflate:!0,maxPayload:104857600}).merge(e)).isDefinedAndNonNull("port")&&!e.isDefinedAndNonNull("server")&&!e.value.noServer)throw new TypeError("`port` or a `server` must be provided");var r=this;if(e.isDefinedAndNonNull("port"))this._server=http.createServer(function(e,t){var r=http.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.allowHalfOpen=!1,this._server.listen(e.value.port,e.value.host,t),this._closeServer=function(){r._server&&r._server.close()};else if(e.value.server&&(this._server=e.value.server,e.value.path)){if(this._server._webSocketPaths&&e.value.server._webSocketPaths[e.value.path])throw new Error("two instances of WebSocketServer cannot listen on the same http server path");"object"!=typeof this._server._webSocketPaths&&(this._server._webSocketPaths={}),this._server._webSocketPaths[e.value.path]=1}this._server&&(this._onceServerListening=function(){r.emit("listening")},this._server.once("listening",this._onceServerListening)),void 0!==this._server&&(this._onServerError=function(e){r.emit("error",e)},this._server.on("error",this._onServerError),this._onServerUpgrade=function(e,t,n){var i=new Buffer(n.length);n.copy(i),r.handleUpgrade(e,t,i,function(t){r.emit("connection"+e.url,t),r.emit("connection",t)})},this._server.on("upgrade",this._onServerUpgrade)),this.options=e.value,this.path=e.value.path,this.clients=[]}WebSocket_1.buildHostHeader=buildHostHeader_1,util$j.inherits(WebSocketServer,events$1.EventEmitter),WebSocketServer.prototype.close=function(e){var t=null;try{for(var r=0,n=this.clients.length;r<n;++r)this.clients[r].terminate()}catch(e){t=e}this.path&&this._server._webSocketPaths&&(delete this._server._webSocketPaths[this.path],0==Object.keys(this._server._webSocketPaths).length&&delete this._server._webSocketPaths);try{void 0!==this._closeServer&&this._closeServer()}finally{this._server&&(this._server.removeListener("listening",this._onceServerListening),this._server.removeListener("error",this._onServerError),this._server.removeListener("upgrade",this._onServerUpgrade)),delete this._server}if(e)e(t);else if(t)throw t},WebSocketServer.prototype.handleUpgrade=function(e,t,r,n){if(this.options.path){var i=Url.parse(e.url);if(i&&i.pathname!==this.options.path)return}void 0!==e.headers.upgrade&&"websocket"===e.headers.upgrade.toLowerCase()?e.headers["sec-websocket-key1"]?handleHixieUpgrade.apply(this,arguments):handleHybiUpgrade.apply(this,arguments):abortConnection(t,400,"Bad Request")};var WebSocketServer_1=WebSocketServer;function handleHybiUpgrade(e,t,r,n){var i=function(){try{t.destroy()}catch(e){}};if(t.on("error",i),e.headers["sec-websocket-key"]){var o=parseInt(e.headers["sec-websocket-version"]);if(-1!==[8,13].indexOf(o)){var s=e.headers["sec-websocket-protocol"],a=o<13?e.headers["sec-websocket-origin"]:e.headers.origin,c=Extensions.parse(e.headers["sec-websocket-extensions"]),u=this,f=function(s){var a=e.headers["sec-websocket-key"],f=crypto$l.createHash("sha1");f.update(a+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+(a=f.digest("base64"))];void 0!==s&&l.push("Sec-WebSocket-Protocol: "+s);var d={};try{d=acceptExtensions.call(u,c)}catch(e){return void abortConnection(t,400,"Bad Request")}if(Object.keys(d).length){var h={};Object.keys(d).forEach(function(e){h[e]=[d[e].params]}),l.push("Sec-WebSocket-Extensions: "+Extensions.format(h))}u.emit("headers",l),t.setTimeout(0),t.setNoDelay(!0);try{t.write(l.concat("","").join("\r\n"))}catch(e){try{t.destroy()}catch(e){}return}var p=new WebSocket_1([e,t,r],{protocolVersion:o,protocol:s,extensions:d,maxPayload:u.options.maxPayload});u.options.clientTracking&&(u.clients.push(p),p.on("close",function(){var e=u.clients.indexOf(p);-1!=e&&u.clients.splice(e,1)})),t.removeListener("error",i),n(p)},l=function(){if("function"!=typeof u.options.handleProtocols)void 0!==s?f(s.split(/, */)[0]):f();else{var e=(s||"").split(/, */),r=!1;u.options.handleProtocols(e,function(e,n){r=!0,e?f(n):abortConnection(t,401,"Unauthorized")});r||abortConnection(t,501,"Could not process protocols")}};if("function"==typeof this.options.verifyClient){var d={origin:a,secure:void 0!==e.connection.authorized||void 0!==e.connection.encrypted,req:e};if(2==this.options.verifyClient.length)return void this.options.verifyClient(d,function(e,r,n){void 0===r&&(r=401),void 0===n&&(n=http.STATUS_CODES[r]),e?l():abortConnection(t,r,n)});if(!this.options.verifyClient(d))return void abortConnection(t,401,"Unauthorized")}l()}else abortConnection(t,400,"Bad Request")}else abortConnection(t,400,"Bad Request")}function handleHixieUpgrade(e,t,r,n){var i=function(){try{t.destroy()}catch(e){}};if(t.on("error",i),this.options.disableHixie)abortConnection(t,401,"Hixie support disabled");else if(e.headers["sec-websocket-key2"]){var o=e.headers.origin,s=this,a=function(){var a;a=e.headers["x-forwarded-host"]?e.headers["x-forwarded-host"]:e.headers.host;var c=("https"===e.headers["x-forwarded-proto"]||t.encrypted?"wss":"ws")+"://"+a+e.url,u=e.headers["sec-websocket-protocol"],f=function(){var e=["HTTP/1.1 101 Switching Protocols","Upgrade: WebSocket","Connection: Upgrade","Sec-WebSocket-Location: "+c];return void 0!==u&&e.push("Sec-WebSocket-Protocol: "+u),void 0!==o&&e.push("Sec-WebSocket-Origin: "+o),new Buffer(e.concat("","").join("\r\n"))},l=function(r,o,a){var c=e.headers["sec-websocket-key1"],f=e.headers["sec-websocket-key2"],l=crypto$l.createHash("md5");[c,f].forEach(function(e){var r=parseInt(e.replace(/[^\d]/g,"")),n=e.replace(/[^ ]/g,"").length;0!==n&&r%n==0?(r/=n,l.update(String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,255&r))):abortConnection(t,400,"Bad Request")}),l.update(r.toString("binary")),t.setTimeout(0),t.setNoDelay(!0);try{var d=new Buffer(l.digest("binary"),"binary"),h=new Buffer(a.length+d.length);a.copy(h,0),d.copy(h,a.length),t.write(h,"binary",function(r){if(!r){var a=new WebSocket_1([e,t,o],{protocolVersion:"hixie-76",protocol:u});s.options.clientTracking&&(s.clients.push(a),a.on("close",function(){var e=s.clients.indexOf(a);-1!=e&&s.clients.splice(e,1)})),t.removeListener("error",i),n(a)}})}catch(e){try{t.destroy()}catch(e){}return}};if(r&&r.length>=8){var d=r.slice(0,8),h=r.length>8?r.slice(8):null;l.call(s,d,h,f())}else{d=new Buffer(8);r.copy(d,0);var p=r.length,b=(h=null,function(e){var r=Math.min(e.length,8-p);0!==r&&(e.copy(d,p,0,r),8==(p+=r)&&(t.removeListener("data",b),r<e.length&&(h=e.slice(r)),l.call(s,d,h,new Buffer(0))))});t.on("data",b),function(){t.setTimeout(0),t.setNoDelay(!0);var e=f();try{t.write(e,"binary",function(e){e&&t.removeListener("data",b)})}catch(e){try{t.destroy()}catch(e){}return}}()}};if("function"==typeof this.options.verifyClient){var c={origin:o,secure:void 0!==e.connection.authorized||void 0!==e.connection.encrypted,req:e};if(2==this.options.verifyClient.length){s=this;return void this.options.verifyClient(c,function(e,r,n){void 0===r&&(r=401),void 0===n&&(n=http.STATUS_CODES[r]),e?a.apply(s):abortConnection(t,r,n)})}if(!this.options.verifyClient(c))return void abortConnection(t,401,"Unauthorized")}a()}else abortConnection(t,400,"Bad Request")}function acceptExtensions(e){var t={},r=this.options.perMessageDeflate,n=this.options.maxPayload;if(r&&e[PerMessageDeflate_1.extensionName]){var i=new PerMessageDeflate_1(!0!==r?r:{},!0,n);i.accept(e[PerMessageDeflate_1.extensionName]),t[PerMessageDeflate_1.extensionName]=i}return t}function abortConnection(e,t,r){try{var n=["HTTP/1.1 "+t+" "+r,"Content-type: text/html"];e.write(n.concat("","").join("\r\n"))}catch(e){}finally{try{e.destroy()}catch(e){}}}var ws=createCommonjsModule(function(e){var t=e.exports=WebSocket_1;t.Server=WebSocketServer_1,t.Sender=Sender_1,t.Receiver=Receiver_1,t.createServer=function(e,r){var n=new t.Server(e);return"function"==typeof r&&n.on("connection",r),n},t.connect=t.createConnection=function(e,r){var n=new t(e);return"function"==typeof r&&n.on("open",r),n}}),webSocket="undefined"==typeof WebSocket?ws:WebSocket,Buffer$u=safeBuffer.Buffer;function isArrayBuffer(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}var source$1=function(e,t){var r,n,i=[],o=!1;return e.addEventListener("message",function(e){var t=e.data;if(isArrayBuffer(t)&&(t=Buffer$u.from(t)),r)return r(null,t);i.push(t)}),e.addEventListener("close",function(e){n||r&&r(n=!0)}),e.addEventListener("error",function(e){n||(n=e,o||(o=!0,t&&t(e)),r&&r(n))}),e.addEventListener("open",function(e){o||n||(o=!0)}),function(t,o){if(r=null,n)return o(n);t?(r=o,e.close()):i.length>0?o(null,i.shift()):r=o}},ready=function(e,t){var r=e&&(e.removeEventListener||e.removeListener);function n(){"function"==typeof r&&(r.call(e,"open",i),r.call(e,"error",o))}function i(e){n(),t()}function o(e){n(),t(e)}return e.readyState>=2?t(!0):1===e.readyState?t():(e.addEventListener("open",i),void e.addEventListener("error",o))},nextTick$2="undefined"!=typeof setImmediate?setImmediate:process.nextTick,sink$1=function(e,t){return function(r){var n=!1!==(t=t||{}).closeOnEnd,i="function"==typeof t?t:t.onClose;r(null,function t(o,s){o?n&&e.readyState<=1&&(i&&e.addEventListener("close",function(e){if(e.wasClean||1006===e.code)i();else{var t=new Error("ws error");t.event=e,i(t)}}),e.close()):ready(e,function(n){if(n)return r(n,function(){});e.send(s),nextTick$2(function(){r(null,t)})})})}},duplex_1=duplex$1;function duplex$1(e,t){var r=e.upgradeReq||{};return t&&t.binaryType?e.binaryType=t.binaryType:t&&t.binary&&(e.binaryType="arraybuffer"),{source:source$1(e,t&&t.onConnect),sink:sink$1(e,t),headers:r.headers,url:r.url,upgrade:r.upgrade,method:r.method}}var{relative:relative$1}=isoUrl,map$4={http:"ws",https:"wss"},def="ws",wsUrl=function(e,t){return relative$1(e,t,map$4,def)},client=createCommonjsModule(function(e){function t(e){return"function"==typeof e}e.exports=function(e,r){t(r)&&(r={onConnect:r});var n="undefined"==typeof window?{}:window.location,i=wsUrl(e,n),o=new webSocket(i),s=duplex_1(o,r);return s.remoteAddress=i,s.close=function(e){t(e)&&o.addEventListener("close",e),o.close()},o.addEventListener("open",function(e){r&&t(r.onConnect)&&r.onConnect(null,s)}),s},e.exports.connect=e.exports}),client_1=client.connect;const reduceValue=(e,t)=>t,Reducers={ip4:reduceValue,ip6:(e,t,r,n)=>1===n.length&&"ip6"===n[0].protocol?t:`[${t}]`,tcp:(e,t,r,n)=>n.some(e=>["http","https","ws","wss"].includes(e.protocol))?`${e}:${t}`:`tcp://${e}:${t}`,udp:(e,t)=>`udp://${e}:${t}`,dnsaddr:reduceValue,dns4:reduceValue,dns6:reduceValue,ipfs:(e,t)=>`${e}/ipfs/${t}`,p2p:(e,t)=>`${e}/p2p/${t}`,http:e=>`http://${e}`,https:e=>`https://${e}`,ws:e=>`ws://${e}`,wss:e=>`wss://${e}`,"p2p-websocket-star":e=>`${e}/p2p-websocket-star`,"p2p-webrtc-star":e=>`${e}/p2p-webrtc-star`,"p2p-webrtc-direct":e=>`${e}/p2p-webrtc-direct`};var multiaddrToUri=e=>src$2(e).stringTuples().map(e=>({protocol:src$2.protocols.codes[e[0]].name,content:e[1]})).reduce((e,t,r,n)=>{const i=Reducers[t.protocol];if(!i)throw new Error(`Unsupported protocol ${t.protocol}`);return i(e,t.content,r,n)},""),s$c=1e3,m$a=60*s$c,h$8=60*m$a,d$8=24*h$8,w$8=7*d$8,y$8=365.25*d$8,ms$8=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$d(e);if("number"===r&&isFinite(e))return t.long?fmtLong$8(e):fmtShort$8(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$d(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$8;case"weeks":case"week":case"w":return r*w$8;case"days":case"day":case"d":return r*d$8;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$8;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$8(e){var t=Math.abs(e);return t>=d$8?Math.round(e/d$8)+"d":t>=h$8?Math.round(e/h$8)+"h":t>=m$a?Math.round(e/m$a)+"m":t>=s$c?Math.round(e/s$c)+"s":e+"ms"}function fmtLong$8(e){var t=Math.abs(e);return t>=d$8?plural$8(e,t,d$8,"day"):t>=h$8?plural$8(e,t,h$8,"hour"):t>=m$a?plural$8(e,t,m$a,"minute"):t>=s$c?plural$8(e,t,s$c,"second"):e+" ms"}function plural$8(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$7(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$8,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$e=setup$7,browser$7=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$e(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$7=browser$7.log,browser_2$7=browser$7.formatArgs,browser_3$7=browser$7.save,browser_4$7=browser$7.load,browser_5$7=browser$7.useColors,browser_6$7=browser$7.storage,browser_7$7=browser$7.colors,node$a=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$e(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$7=node$a.init,node_2$7=node$a.log,node_3$7=node$a.formatArgs,node_4$7=node$a.save,node_5$7=node$a.load,node_6$7=node$a.useColors,node_7$7=node$a.colors,node_8$7=node$a.inspectOpts,src$Z=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$7:e.exports=node$a}),pullWs=createCommonjsModule(function(e){var t=e.exports=duplex_1;t.source=source$1,t.sink=sink$1,t.createServer=server,t.connect=client}),EventEmitter$6=events$1.EventEmitter,server=ws.Server?function(e,t){var r=new EventEmitter$6;function n(e,t){return e.on(t,function(){var e=[].slice.call(arguments);e.unshift(t),r.emit.apply(r,e)})}"function"==typeof e&&(t=e,e=null),e=e||{},t&&r.on("connection",t);var i=e.server||(e.key&&e.cert?https.createServer(e):http.createServer()),o=new ws.Server({server:i,perMessageDeflate:!1,verifyClient:e.verifyClient});return n(i,"listening"),n(i,"request"),n(i,"close"),o.on("connection",function(e){var t=pullWs(e);t.remoteAddress=e.upgradeReq.socket.remoteAddress,r.emit("connection",t)}),r.listen=function(e,t){return t&&r.once("listening",t),i.listen(e.port||e),r},r.close=function(e){return i.close(e),o.close(),r},r.address=i.address.bind(i),r}:null;const Connection$3=src$T.Connection;function noop$9(){}const createServer=server||noop$9;var listener$1=(e,t)=>{const r=createServer(e,e=>{e.getObservedAddrs=e=>e(null,[]),t(new Connection$3(e))});let n;return r._listen=r.listen,r.listen=(e,t)=>{t=t||noop$9,n=e,e.protoNames().includes("ipfs")&&(e=e.decapsulate("ipfs")),r._listen(e.toOptions(),t)},r.getAddrs=e=>{const t=[],i=r.address();if(!i)return e(new Error("Listener is not ready yet"));let o=n.getPeerId();if(-1!==n.toString().indexOf("ip4")){let e=n.decapsulate("tcp");if(e=e.encapsulate("/tcp/"+i.port+"/ws"),n.getPeerId()&&(e=e.encapsulate("/ipfs/"+o)),-1!==e.toString().indexOf("0.0.0.0")){const r=os.networkInterfaces();Object.keys(r).forEach(n=>{r[n].forEach(r=>{"IPv4"===r.family&&t.push(src$2(e.toString().replace("0.0.0.0",r.address)))})})}else t.push(e)}e(null,t)},r};const Connection$4=src$T.Connection,log$d=src$Z("libp2p:websockets:dialer");class WebSockets$1{dial(e,t,r){"function"==typeof t&&(r=t,t={}),r=r||function(){};const n=multiaddrToUri(e);log$d("dialing %s",n);const i=client(n,{binary:!0,onConnect:e=>{r(e)}}),o=new Connection$4(i);return o.getObservedAddrs=t=>t(null,[e]),o.close=e=>i.close(e),o}createListener(e,t){return"function"==typeof e&&(t=e,e={}),listener$1(e,t)}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>!e.protoNames().includes("p2p-circuit")&&(e.protoNames().includes("ipfs")&&(e=e.decapsulate("ipfs")),src$3.WebSockets.matches(e)||src$3.WebSocketsSecure.matches(e)))}}var src$_=classIs(WebSockets$1,{className:"WebSockets",symbolName:"@libp2p/js-libp2p-websockets/websockets"}),s$d=1e3,m$b=60*s$d,h$9=60*m$b,d$9=24*h$9,w$9=7*d$9,y$9=365.25*d$9,ms$9=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$e(e);if("number"===r&&isFinite(e))return t.long?fmtLong$9(e):fmtShort$9(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$e(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$9;case"weeks":case"week":case"w":return r*w$9;case"days":case"day":case"d":return r*d$9;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$9;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$b;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$9(e){var t=Math.abs(e);return t>=d$9?Math.round(e/d$9)+"d":t>=h$9?Math.round(e/h$9)+"h":t>=m$b?Math.round(e/m$b)+"m":t>=s$d?Math.round(e/s$d)+"s":e+"ms"}function fmtLong$9(e){var t=Math.abs(e);return t>=d$9?plural$9(e,t,d$9,"day"):t>=h$9?plural$9(e,t,h$9,"hour"):t>=m$b?plural$9(e,t,m$b,"minute"):t>=s$d?plural$9(e,t,s$d,"second"):e+" ms"}function plural$9(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$8(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$9,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$f=setup$8,browser$8=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$f(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$8=browser$8.log,browser_2$8=browser$8.formatArgs,browser_3$8=browser$8.save,browser_4$8=browser$8.load,browser_5$8=browser$8.useColors,browser_6$8=browser$8.storage,browser_7$8=browser$8.colors,node$b=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$f(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$8=node$b.init,node_2$8=node$b.log,node_3$8=node$b.formatArgs,node_4$8=node$b.save,node_5$8=node$b.load,node_6$8=node$b.useColors,node_7$8=node$b.colors,node_8$8=node$b.inspectOpts,src$$=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$8:e.exports=node$b}),s$e=1e3,m$c=60*s$e,h$a=60*m$c,d$a=24*h$a,w$a=7*d$a,y$a=365.25*d$a,ms$a=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$f(e);if("number"===r&&isFinite(e))return t.long?fmtLong$a(e):fmtShort$a(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$f(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$a;case"weeks":case"week":case"w":return r*w$a;case"days":case"day":case"d":return r*d$a;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$a;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$c;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$a(e){var t=Math.abs(e);return t>=d$a?Math.round(e/d$a)+"d":t>=h$a?Math.round(e/h$a)+"h":t>=m$c?Math.round(e/m$c)+"m":t>=s$e?Math.round(e/s$e)+"s":e+"ms"}function fmtLong$a(e){var t=Math.abs(e);return t>=d$a?plural$a(e,t,d$a,"day"):t>=h$a?plural$a(e,t,h$a,"hour"):t>=m$c?plural$a(e,t,m$c,"minute"):t>=s$e?plural$a(e,t,s$e,"second"):e+" ms"}function plural$a(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$9(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$a,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$g=setup$9,browser$9=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$g(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$9=browser$9.log,browser_2$9=browser$9.formatArgs,browser_3$9=browser$9.save,browser_4$9=browser$9.load,browser_5$9=browser$9.useColors,browser_6$9=browser$9.storage,browser_7$9=browser$9.colors,node$c=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$g(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$9=node$c.init,node_2$9=node$c.log,node_3$9=node$c.formatArgs,node_4$9=node$c.save,node_5$9=node$c.load,node_6$9=node$c.useColors,node_7$9=node$c.colors,node_8$9=node$c.inspectOpts,src$10=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$9:e.exports=node$c}),utils$C=createCommonjsModule(function(e,t){const r={string:e=>"string"==typeof e,object:e=>"object"==typeof e,multiaddr:e=>{if(r.string(e))try{return src$2(e),!0}catch(e){return!1}},function:e=>"function"==typeof e};function n(e,t){if(!Array.isArray(t))throw new Error("Data is not an array");e.forEach((e,n)=>{if(!r[e])throw console.error("Type %s does not exist",e),new Error("Type "+e+" does not exist");if(!r[e](t[n]))throw new Error("Data at index "+n+" is invalid for type "+e)})}(t=e.exports).cleanUrlSIO=function(e){const t=e.protos(),r=t[0].name,n=t[1].name,i=t[2].name,o=e.stringTuples(),s=o[1][1];if("tcp"!==n||"ws"!==i&&"wss"!==i)throw new Error("invalid multiaddr: "+e.toString());let a=o[0][1];"ip6"===r&&(a="["+a+"]");let c="ws"===i&&80===s||"wss"===i&&443===s?"":s;return("wss"===i?"https":"http")+"://"+a+(c?":"+c:"")},t.validate=n,t.Protocol=function(e){e||(e=()=>{});const t=this;t.requests={},t.addRequest=(e,r,n)=>{t.requests[e]={def:r,handle:n}},t.handleSocket=r=>{r.r={},Object.keys(t.requests).forEach(i=>{const o=t.requests[i];r.on(i,function(){const t=[...arguments];try{n(o.def,t),t.unshift(r),o.handle.apply(null,t)}catch(n){e(n),e("peer %s has sent invalid data for request %s",r.id||"<server>",i,t)}})})}},t.getIdAndValidate=function(e,t,r){src$s.createFromPubKey(Buffer.from(e,"hex"),(n,i)=>n?r(new Error("Crypto error")):i.toB58String()!==t?r(new Error("Id is not matching")):r(null,src$u.keys.unmarshalPublicKey(Buffer.from(e,"hex"))))},t.validateMa=e=>src$3.WebSocketStar.matches(src$2(e))}),utils_1$6=utils$C.cleanUrlSIO,utils_2$2=utils$C.validate,utils_3$2=utils$C.Protocol,utils_4$2=utils$C.getIdAndValidate,utils_5$2=utils$C.validateMa,re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parseuri=function(e){var t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));for(var i=re.exec(e||""),o={},s=14;s--;)o[parts[s]]=i[s]||"";return-1!=r&&-1!=n&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o},s$f=1e3,m$d=60*s$f,h$b=60*m$d,d$b=24*h$b,y$b=365.25*d$b,ms$b=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$g(e);if("number"===r&&!1===isNaN(e))return t.long?fmtLong$b(e):fmtShort$b(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$g(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$b;case"days":case"day":case"d":return r*d$b;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$b;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$d;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$b(e){return e>=d$b?Math.round(e/d$b)+"d":e>=h$b?Math.round(e/h$b)+"h":e>=m$d?Math.round(e/m$d)+"m":e>=s$f?Math.round(e/s$f)+"s":e+"ms"}function fmtLong$b(e){return plural$b(e,d$b,"day")||plural$b(e,h$b,"hour")||plural$b(e,m$d,"minute")||plural$b(e,s$f,"second")||e+" ms"}function plural$b(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var debug$1=createCommonjsModule(function(e,t){function r(e){var r;function i(){if(i.enabled){var e=i,n=+new Date,o=n-(r||n);e.diff=o,e.prev=r,e.curr=n,r=n;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;c++;var i=t.formatters[n];if("function"==typeof i){var o=s[c];r=i.call(e,o),s.splice(c,1),c--}return r}),t.formatArgs.call(e,s),(i.log||t.log||console.log.bind(console)).apply(e,s)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),i.destroy=n,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function n(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var o=t.instances[r];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=ms$b,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),debug_1=debug$1.coerce,debug_2=debug$1.disable,debug_3=debug$1.enable,debug_4=debug$1.enabled,debug_5=debug$1.humanize,debug_6=debug$1.instances,debug_7=debug$1.names,debug_8=debug$1.skips,debug_9=debug$1.formatters,browser$a=createCommonjsModule(function(e,t){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=debug$1).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}),browser_1$a=browser$a.log,browser_2$a=browser$a.formatArgs,browser_3$a=browser$a.save,browser_4$a=browser$a.load,browser_5$a=browser$a.useColors,browser_6$a=browser$a.storage,browser_7$a=browser$a.colors,node$d=createCommonjsModule(function(e,t){(t=e.exports=debug$1).init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return process.stderr.write(util$j.format.apply(util$j,arguments)+"\n")},t.formatArgs=function(e){var r=this.namespace;if(this.useColors){var n=this.color,i="[3"+(n<8?n:"8;5;"+n),o="  "+i+";1m"+r+" [0m";e[0]=o+e[0].split("\n").join("\n"+o),e.push(i+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=r,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{supportsColor_1&&supportsColor_1.level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}function r(){return process.env.DEBUG}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).split("\n").map(function(e){return e.trim()}).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)},t.enable(r())}),node_1$a=node$d.init,node_2$a=node$d.log,node_3$a=node$d.formatArgs,node_4$a=node$d.save,node_5$a=node$d.load,node_6$a=node$d.useColors,node_7$a=node$d.colors,node_8$a=node$d.inspectOpts,src$11=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type?e.exports=browser$a:e.exports=node$d}),debug$2=src$11("socket.io-client:url"),url_1=url$1;function url$1(e,t){var r=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(debug$2("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),debug$2("parse %s",e),r=parseuri(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var n=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+n+":"+r.port,r.href=r.protocol+"://"+n+(t&&t.port===r.port?"":":"+r.port),r}var debug$3=createCommonjsModule(function(e,t){function r(e){var r;function i(){if(i.enabled){var e=i,n=+new Date,o=n-(r||n);e.diff=o,e.prev=r,e.curr=n,r=n;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;c++;var i=t.formatters[n];if("function"==typeof i){var o=s[c];r=i.call(e,o),s.splice(c,1),c--}return r}),t.formatArgs.call(e,s),(i.log||t.log||console.log.bind(console)).apply(e,s)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),i.destroy=n,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function n(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var o=t.instances[r];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=ms$b,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),debug_1$1=debug$3.coerce,debug_2$1=debug$3.disable,debug_3$1=debug$3.enable,debug_4$1=debug$3.enabled,debug_5$1=debug$3.humanize,debug_6$1=debug$3.instances,debug_7$1=debug$3.names,debug_8$1=debug$3.skips,debug_9$1=debug$3.formatters,browser$b=createCommonjsModule(function(e,t){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=debug$3).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}),browser_1$b=browser$b.log,browser_2$b=browser$b.formatArgs,browser_3$b=browser$b.save,browser_4$b=browser$b.load,browser_5$b=browser$b.useColors,browser_6$b=browser$b.storage,browser_7$b=browser$b.colors,node$e=createCommonjsModule(function(e,t){(t=e.exports=debug$3).init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return process.stderr.write(util$j.format.apply(util$j,arguments)+"\n")},t.formatArgs=function(e){var r=this.namespace;if(this.useColors){var n=this.color,i="[3"+(n<8?n:"8;5;"+n),o="  "+i+";1m"+r+" [0m";e[0]=o+e[0].split("\n").join("\n"+o),e.push(i+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=r,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{supportsColor_1&&supportsColor_1.level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}function r(){return process.env.DEBUG}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).split("\n").map(function(e){return e.trim()}).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)},t.enable(r())}),node_1$b=node$e.init,node_2$b=node$e.log,node_3$b=node$e.formatArgs,node_4$b=node$e.save,node_5$b=node$e.load,node_6$b=node$e.useColors,node_7$b=node$e.colors,node_8$b=node$e.inspectOpts,src$12=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type?e.exports=browser$b:e.exports=node$e}),componentEmitter=createCommonjsModule(function(e){function t(e){if(e)return function(e){for(var r in t.prototype)e[r]=t.prototype[r];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),toString$3={}.toString,isarray=Array.isArray||function(e){return"[object Array]"==toString$3.call(e)},isBuffer$2=isBuf,withNativeBuffer="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,withNativeArrayBuffer="function"==typeof ArrayBuffer,isView=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function isBuf(e){return withNativeBuffer&&Buffer.isBuffer(e)||withNativeArrayBuffer&&(e instanceof ArrayBuffer||isView(e))}var toString$4=Object.prototype.toString,withNativeBlob="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===toString$4.call(Blob),withNativeFile="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===toString$4.call(File),deconstructPacket=function(e){var t=[],r=e.data,n=e;return n.data=_deconstructPacket(r,t),n.attachments=t.length,{packet:n,buffers:t}};function _deconstructPacket(e,t){if(!e)return e;if(isBuffer$2(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}if(isarray(e)){for(var n=new Array(e.length),i=0;i<e.length;i++)n[i]=_deconstructPacket(e[i],t);return n}if("object"==typeof e&&!(e instanceof Date)){n={};for(var o in e)n[o]=_deconstructPacket(e[o],t);return n}return e}var reconstructPacket=function(e,t){return e.data=_reconstructPacket(e.data,t),e.attachments=void 0,e};function _reconstructPacket(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(isarray(e))for(var r=0;r<e.length;r++)e[r]=_reconstructPacket(e[r],t);else if("object"==typeof e)for(var n in e)e[n]=_reconstructPacket(e[n],t);return e}var removeBlobs=function(e,t){var r=0,n=e;!function e(i,o,s){if(!i)return i;if(withNativeBlob&&i instanceof Blob||withNativeFile&&i instanceof File){r++;var a=new FileReader;a.onload=function(){s?s[o]=this.result:n=this.result,--r||t(n)},a.readAsArrayBuffer(i)}else if(isarray(i))for(var c=0;c<i.length;c++)e(i[c],c,i);else if("object"==typeof i&&!isBuffer$2(i))for(var u in i)e(i[u],u,i)}(n),r||t(n)},binary={deconstructPacket:deconstructPacket,reconstructPacket:reconstructPacket,removeBlobs:removeBlobs},socket_ioParser=createCommonjsModule(function(e,t){var r=src$12("socket.io-parser");function n(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=s;var i=t.ERROR+'"encode error"';function o(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===o)return i;n+=o}return r("encoded %j as %s",e,n),n}function s(){this.reconstructor=null}function a(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:t.ERROR,data:"parser error: "+e}}n.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){binary.removeBlobs(e,function(e){var r=binary.deconstructPacket(e),n=o(r.packet),i=r.buffers;i.unshift(n),t(i)})}(e,n):n([o(e)])},componentEmitter(s.prototype),s.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return c("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var o="";"-"!==e.charAt(++n)&&(o+=e.charAt(n),n!=e.length););if(o!=Number(o)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===e.charAt(n+1))for(i.nsp="";++n;){var s=e.charAt(n);if(","===s)break;if(i.nsp+=s,n===e.length)break}else i.nsp="/";var a=e.charAt(n+1);if(""!==a&&Number(a)==a){for(i.id="";++n;){var s=e.charAt(n);if(null==s||Number(s)!=s){--n;break}if(i.id+=e.charAt(n),n===e.length)break}i.id=Number(i.id)}if(e.charAt(++n)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n)),f=!1!==u&&(i.type===t.ERROR||isarray(u));if(!f)return c("invalid payload");i.data=u}return r("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new a(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!isBuffer$2(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},a.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},a.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}),socket_ioParser_1=socket_ioParser.protocol,socket_ioParser_2=socket_ioParser.types,socket_ioParser_3=socket_ioParser.CONNECT,socket_ioParser_4=socket_ioParser.DISCONNECT,socket_ioParser_5=socket_ioParser.EVENT,socket_ioParser_6=socket_ioParser.ACK,socket_ioParser_7=socket_ioParser.ERROR,socket_ioParser_8=socket_ioParser.BINARY_EVENT,socket_ioParser_9=socket_ioParser.BINARY_ACK,socket_ioParser_10=socket_ioParser.Encoder,socket_ioParser_11=socket_ioParser.Decoder,spawn$1=child_process.spawn,XMLHttpRequest_1$1=XMLHttpRequest$1;function XMLHttpRequest$1(e){e=e||{};var t,r,n=this,i=http,o=https,s={},a=!1,c={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},u=Object.assign({},c),f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],l=["TRACE","TRACK","CONNECT"],d=!1,h=!1,p={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null;this.open=function(e,t,r,n,i){if(this.abort(),h=!1,!function(e){return e&&-1===l.indexOf(e)}(e))throw"SecurityError: Request method not allowed";s={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:n||null,password:i||null},b(this.OPENED)},this.setDisableHeaderCheck=function(e){a=e},this.setRequestHeader=function(e,t){if(this.readyState!=this.OPENED)throw"INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN";if(!function(e){return a||e&&-1===f.indexOf(e.toLowerCase())}(e))return console.warn('Refused to set unsafe header "'+e+'"'),!1;if(d)throw"INVALID_STATE_ERR: send flag is true";return u[e]=t,!0},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&r.headers[e.toLowerCase()]&&!h?r.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||h)return"";var e="";for(var t in r.headers)"set-cookie"!==t&&"set-cookie2"!==t&&(e+=t+": "+r.headers[t]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&u[e]?u[e]:""},this.send=function(a){if(this.readyState!=this.OPENED)throw"INVALID_STATE_ERR: connection must be opened before send() is called";if(d)throw"INVALID_STATE_ERR: send has already been called";var c,f=!1,l=!1,p=Url.parse(s.url);switch(p.protocol){case"https:":f=!0;case"http:":c=p.hostname;break;case"file:":l=!0;break;case void 0:case"":c="localhost";break;default:throw"Protocol not supported."}if(l){if("GET"!==s.method)throw"XMLHttpRequest: Only GET method is supported";if(s.async)fs.readFile(p.pathname,"utf8",function(e,t){e?n.handleError(e):(n.status=200,n.responseText=t,b(n.DONE))});else try{this.responseText=fs.readFileSync(p.pathname,"utf8"),this.status=200,b(n.DONE)}catch(e){this.handleError(e)}}else{var m=p.port||(f?443:80),g=p.pathname+(p.search?p.search:"");if(u.Host=c,f&&443===m||80===m||(u.Host+=":"+p.port),s.user){void 0===s.password&&(s.password="");var y=new Buffer(s.user+":"+s.password);u.Authorization="Basic "+y.toString("base64")}"GET"===s.method||"HEAD"===s.method?a=null:a?(u["Content-Length"]=Buffer.isBuffer(a)?a.length:Buffer.byteLength(a),u["Content-Type"]||(u["Content-Type"]="text/plain;charset=UTF-8")):"POST"===s.method&&(u["Content-Length"]=0);var v=e.agent||!1,_={host:c,port:m,path:g,method:s.method,headers:u,agent:v};if(f&&(_.pfx=e.pfx,_.key=e.key,_.passphrase=e.passphrase,_.cert=e.cert,_.ca=e.ca,_.ciphers=e.ciphers,_.rejectUnauthorized=e.rejectUnauthorized),h=!1,s.async){var $=f?o.request:i.request;d=!0,n.dispatchEvent("readystatechange");var S=function(i){if(302===(r=i).statusCode||303===r.statusCode||307===r.statusCode){s.url=r.headers.location;var o=Url.parse(s.url);c=o.hostname;var a={hostname:o.hostname,port:o.port,path:o.path,method:303===r.statusCode?"GET":s.method,headers:u};return f&&(a.pfx=e.pfx,a.key=e.key,a.passphrase=e.passphrase,a.cert=e.cert,a.ca=e.ca,a.ciphers=e.ciphers,a.rejectUnauthorized=e.rejectUnauthorized),void(t=$(a,S).on("error",E)).end()}r&&r.setEncoding&&r.setEncoding("utf8"),b(n.HEADERS_RECEIVED),n.status=r.statusCode,r.on("data",function(e){e&&(n.responseText+=e),d&&b(n.LOADING)}),r.on("end",function(){d&&(d=!1,b(n.DONE))}),r.on("error",function(e){n.handleError(e)})},E=function(e){n.handleError(e)};t=$(_,S).on("error",E),a&&t.write(a),t.end(),n.dispatchEvent("loadstart")}else{var w=".node-xmlhttprequest-content-"+process.pid,C=".node-xmlhttprequest-sync-"+process.pid;fs.writeFileSync(C,"","utf8");for(var A="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(f?"s":"")+".request;var options = "+JSON.stringify(_)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+w+"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');fs.unlinkSync('"+C+"');});response.on('error', function(error) {fs.writeFileSync('"+w+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+C+"');});}).on('error', function(error) {fs.writeFileSync('"+w+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+C+"');});"+(a?"req.write('"+a.replace(/'/g,"\\'")+"');":"")+"req.end();",k=spawn$1(process.argv[0],["-e",A]);fs.existsSync(C););if(n.responseText=fs.readFileSync(w,"utf8"),k.stdin.end(),fs.unlinkSync(w),n.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var T=n.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,"");n.handleError(T)}else n.status=n.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1"),n.responseText=n.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"),b(n.DONE)}}},this.handleError=function(e){this.status=503,this.statusText=e,this.responseText=e.stack,h=!0,b(this.DONE)},this.abort=function(){t&&(t.abort(),t=null),u=Object.assign({},c),this.responseText="",this.responseXML="",h=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!d||this.readyState===this.DONE||(d=!1,b(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(e,t){e in p||(p[e]=[]),p[e].push(t)},this.removeEventListener=function(e,t){e in p&&(p[e]=p[e].filter(function(e){return e!==t}))},this.dispatchEvent=function(e){if("function"==typeof n["on"+e]&&n["on"+e](),e in p)for(var t=0,r=p[e].length;t<r;t++)p[e][t].call(n)};var b=function(e){n.readyState!==e&&(n.readyState=e,(s.async||n.readyState<n.OPENED||n.readyState===n.DONE)&&n.dispatchEvent("readystatechange"),n.readyState!==n.DONE||h||(n.dispatchEvent("load"),n.dispatchEvent("loadend")))}}XMLHttpRequest$1.XMLHttpRequest=XMLHttpRequest$1;var byteArray,byteCount,byteIndex,stringFromCharCode=String.fromCharCode;function ucs2decode(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function ucs2encode(e){for(var t,r=e.length,n=-1,i="";++n<r;)(t=e[n])>65535&&(i+=stringFromCharCode((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=stringFromCharCode(t);return i}function checkScalarValue(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function createByte(e,t){return stringFromCharCode(e>>t&63|128)}function encodeCodePoint(e,t){if(0==(4294967168&e))return stringFromCharCode(e);var r="";return 0==(4294965248&e)?r=stringFromCharCode(e>>6&31|192):0==(4294901760&e)?(checkScalarValue(e,t)||(e=65533),r=stringFromCharCode(e>>12&15|224),r+=createByte(e,6)):0==(4292870144&e)&&(r=stringFromCharCode(e>>18&7|240),r+=createByte(e,12),r+=createByte(e,6)),r+=stringFromCharCode(63&e|128)}function utf8encode(e,t){for(var r=!1!==(t=t||{}).strict,n=ucs2decode(e),i=n.length,o=-1,s="";++o<i;)s+=encodeCodePoint(n[o],r);return s}function readContinuationByte(){if(byteIndex>=byteCount)throw Error("Invalid byte index");var e=255&byteArray[byteIndex];if(byteIndex++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function decodeSymbol(e){var t,r;if(byteIndex>byteCount)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(t=255&byteArray[byteIndex],byteIndex++,0==(128&t))return t;if(192==(224&t)){if((r=(31&t)<<6|readContinuationByte())>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&t)){if((r=(15&t)<<12|readContinuationByte()<<6|readContinuationByte())>=2048)return checkScalarValue(r,e)?r:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(r=(7&t)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}function utf8decode(e,t){var r=!1!==(t=t||{}).strict;byteArray=ucs2decode(e),byteCount=byteArray.length,byteIndex=0;for(var n,i=[];!1!==(n=decodeSymbol(r));)i.push(n);return ucs2encode(i)}var utf8$1={version:"2.1.2",encode:utf8encode,decode:utf8decode},toString$5={}.toString,isarray$1=Array.isArray||function(e){return"[object Array]"==toString$5.call(e)},toString$6=Object.prototype.toString,withNativeBlob$1="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===toString$6.call(Blob),withNativeFile$1="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===toString$6.call(File),hasBinary2=hasBinary;function hasBinary(e){if(!e||"object"!=typeof e)return!1;if(isarray$1(e)){for(var t=0,r=e.length;t<r;t++)if(hasBinary(e[t]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||withNativeBlob$1&&e instanceof Blob||withNativeFile$1&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return hasBinary(e.toJSON(),!0);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&hasBinary(e[n]))return!0;return!1}var after_1=after;function after(e,t,r){var n=!1;return r=r||noop$a,i.count=e,0===e?t():i;function i(e,o){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(n=!0,t(e),t=r):0!==i.count||n||t(null,o)}}function noop$a(){}var keys$5=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t},lib$5=createCommonjsModule(function(e,t){t.protocol=3;var r=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},n=keys$5(r),i={type:"error",data:"parser error"};function o(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var o=e.data,s=new Buffer(1);return s[0]=r[e.type],i(Buffer.concat([s,o]))}function s(e,t,r){for(var n=new Array(e.length),i=after_1(e.length,r),o=0;o<e.length;o++)t(e[o],function(e,t){n[o]=t,i(e,n)})}function a(e){for(var t="",r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);return t}function c(e){for(var t=new Buffer(e.length),r=0,n=e.length;r<n;r++)t.writeUInt8(e.charCodeAt(r),r);return t}function u(e){for(var t=new Uint8Array(e.buffer||e),r=e.byteLength||e.length,n=e.byteOffset||0,i=new Buffer(r),o=0;o<r;o++)i[o]=t[n+o];return i}function f(e,r){t.encodePacket(e,!0,!0,function(e){var t,n=""+e.length;if("string"==typeof e){(t=new Buffer(n.length+2))[0]=0;for(var i=0;i<n.length;i++)t[i+1]=parseInt(n[i],10);return t[t.length-1]=255,r(null,Buffer.concat([t,c(e)]))}for((t=new Buffer(n.length+2))[0]=1,i=0;i<n.length;i++)t[i+1]=parseInt(n[i],10);t[t.length-1]=255,r(null,Buffer.concat([t,e]))})}t.encodePacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=null),"function"==typeof n&&(i=n,n=null),Buffer.isBuffer(e.data))return o(e,t,i);if(e.data&&(e.data.buffer||e.data)instanceof ArrayBuffer)return o({type:e.type,data:u(e.data)},t,i);var s=r[e.type];return void 0!==e.data&&(s+=n?utf8$1.encode(String(e.data),{strict:!1}):String(e.data)),i(""+s)},t.encodeBase64Packet=function(e,t){var n=Buffer.isBuffer(e.data)?e.data:u(e.data),i="b"+r[e.type];return t(i+=n.toString("base64"))},t.decodePacket=function(e,r,o){if(void 0===e)return i;var s;if("string"==typeof e)return"b"===(s=e.charAt(0))?t.decodeBase64Packet(e.substr(1),r):o&&!1===(e=function(e){try{e=utf8$1.decode(e,{strict:!1})}catch(e){return!1}return e}(e))?i:Number(s)==s&&n[s]?e.length>1?{type:n[s],data:e.substring(1)}:{type:n[s]}:i;if("arraybuffer"===r){var a=new Uint8Array(e);return s=a[0],{type:n[s],data:a.buffer.slice(1)}}return e instanceof ArrayBuffer&&(e=u(e)),s=e[0],{type:n[s],data:e.slice(1)}},t.decodeBase64Packet=function(e,t){var r=n[e.charAt(0)],i=new Buffer(e.substr(1),"base64");if("arraybuffer"===t){for(var o=new Uint8Array(i.length),s=0;s<o.length;s++)o[s]=i[s];i=o.buffer}return{type:r,data:i}},t.encodePayload=function(e,r,n){if("function"==typeof r&&(n=r,r=null),r&&hasBinary2(e))return t.encodePayloadAsBinary(e,n);if(!e.length)return n("0:");s(e,function(e,n){t.encodePacket(e,r,!1,function(e){n(null,function(e){return e.length+":"+e}(e))})},function(e,t){return n(t.join(""))})},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);if("function"==typeof r&&(n=r,r=null),""===e)return n(i,0,1);for(var o,s,a,c="",u=0,f=e.length;u<f;u++){var l=e.charAt(u);if(":"===l){if(""===c||c!=(o=Number(c)))return n(i,0,1);if(c!=(s=e.substr(u+1,o)).length)return n(i,0,1);if(s.length){if(a=t.decodePacket(s,r,!1),i.type===a.type&&i.data===a.data)return n(i,0,1);if(!1===n(a,u+o,f))return}u+=o,c=""}else c+=l}return""!==c?n(i,0,1):void 0},t.encodePayloadAsBinary=function(e,t){if(!e.length)return t(new Buffer(0));s(e,f,function(e,r){return t(Buffer.concat(r))})},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var o,s=e,c=[];s.length>0;){var u="",f=0===s[0];for(o=1;255!==s[o];o++){if(u.length>310)return n(i,0,1);u+=""+s[o]}s=s.slice(u.length+1);var l=parseInt(u,10),d=s.slice(1,l+1);f&&(d=a(d)),c.push(d),s=s.slice(l+1)}var h=c.length;for(o=0;o<h;o++){var p=c[o];n(t.decodePacket(p,r,!0),o,h)}}}),lib_1$1=lib$5.protocol,lib_2$1=lib$5.packets,lib_3$1=lib$5.encodePacket,lib_4$1=lib$5.encodeBase64Packet,lib_5$1=lib$5.decodePacket,lib_6$1=lib$5.decodeBase64Packet,lib_7$1=lib$5.encodePayload,lib_8=lib$5.decodePayload,lib_9=lib$5.encodePayloadAsBinary,lib_10=lib$5.decodePayloadAsBinary,componentEmitter$1=createCommonjsModule(function(e){function t(e){if(e)return function(e){for(var r in t.prototype)e[r]=t.prototype[r];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),transport=Transport;function Transport(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}componentEmitter$1(Transport.prototype),Transport.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},Transport.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(e){var t=lib$5.decodePacket(e,this.socket.binaryType);this.onPacket(t)},Transport.prototype.onPacket=function(e){this.emit("packet",e)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var prev,encode$6=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},decode$7=function(e){for(var t={},r=e.split("&"),n=0,i=r.length;n<i;n++){var o=r[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t},parseqs={encode:encode$6,decode:decode$7},componentInherit=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length$1=64,map$5={},seed=0,i$2=0;function encode$7(e){var t="";do{t=alphabet[e%length$1]+t,e=Math.floor(e/length$1)}while(e>0);return t}function decode$8(e){var t=0;for(i$2=0;i$2<e.length;i$2++)t=t*length$1+map$5[e.charAt(i$2)];return t}function yeast(){var e=encode$7(+new Date);return e!==prev?(seed=0,prev=e):e+"."+encode$7(seed++)}for(;i$2<length$1;i$2++)map$5[alphabet[i$2]]=i$2;yeast.encode=encode$7,yeast.decode=decode$8;var yeast_1=yeast,debug$4=createCommonjsModule(function(e,t){function r(e){var r;function i(){if(i.enabled){var e=i,n=+new Date,o=n-(r||n);e.diff=o,e.prev=r,e.curr=n,r=n;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;c++;var i=t.formatters[n];if("function"==typeof i){var o=s[c];r=i.call(e,o),s.splice(c,1),c--}return r}),t.formatArgs.call(e,s),(i.log||t.log||console.log.bind(console)).apply(e,s)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),i.destroy=n,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function n(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var o=t.instances[r];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=ms$b,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),debug_1$2=debug$4.coerce,debug_2$2=debug$4.disable,debug_3$2=debug$4.enable,debug_4$2=debug$4.enabled,debug_5$2=debug$4.humanize,debug_6$2=debug$4.instances,debug_7$2=debug$4.names,debug_8$2=debug$4.skips,debug_9$2=debug$4.formatters,browser$c=createCommonjsModule(function(e,t){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=debug$4).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}),browser_1$c=browser$c.log,browser_2$c=browser$c.formatArgs,browser_3$c=browser$c.save,browser_4$c=browser$c.load,browser_5$c=browser$c.useColors,browser_6$c=browser$c.storage,browser_7$c=browser$c.colors,node$f=createCommonjsModule(function(e,t){(t=e.exports=debug$4).init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return process.stderr.write(util$j.format.apply(util$j,arguments)+"\n")},t.formatArgs=function(e){var r=this.namespace;if(this.useColors){var n=this.color,i="[3"+(n<8?n:"8;5;"+n),o="  "+i+";1m"+r+" [0m";e[0]=o+e[0].split("\n").join("\n"+o),e.push(i+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=r,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{supportsColor_1&&supportsColor_1.level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}function r(){return process.env.DEBUG}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).split("\n").map(function(e){return e.trim()}).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)},t.enable(r())}),node_1$c=node$f.init,node_2$c=node$f.log,node_3$c=node$f.formatArgs,node_4$c=node$f.save,node_5$c=node$f.load,node_6$c=node$f.useColors,node_7$c=node$f.colors,node_8$c=node$f.inspectOpts,src$13=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type?e.exports=browser$c:e.exports=node$f}),debug$5=src$13("engine.io-client:polling"),polling=Polling,hasXHR2=null!=new XMLHttpRequest_1$1({xdomain:!1}).responseType;function Polling(e){var t=e&&e.forceBase64;hasXHR2&&!t||(this.supportsBinary=!1),transport.call(this,e)}componentInherit(Polling,transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(e){var t=this;function r(){debug$5("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(debug$5("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){debug$5("pre-pause polling complete"),--n||r()})),this.writable||(debug$5("we are currently writing - waiting to pause"),n++,this.once("drain",function(){debug$5("pre-pause writing complete"),--n||r()}))}else r()},Polling.prototype.poll=function(){debug$5("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(e){var t=this;debug$5("polling got data %s",e);lib$5.decodePayload(e,this.socket.binaryType,function(e,r,n){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():debug$5('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){var e=this;function t(){debug$5("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(debug$5("transport open - closing"),t()):(debug$5("transport not open - deferring close"),this.once("open",t))},Polling.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};lib$5.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,r)})},Polling.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=yeast_1()),this.supportsBinary||e.sid||(e.b64=1),e=parseqs.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e};var debug$6=src$13("engine.io-client:polling-xhr"),pollingXhr=XHR,Request_1=Request;function empty$3(){}function XHR(e){if(polling.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,r=location.port;r||(r=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}}function Request(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(componentInherit(XHR,polling),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new Request(e)},XHR.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),i=this;n.on("success",t),n.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=n},XHR.prototype.doPoll=function(){debug$6("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},componentEmitter$1(Request.prototype),Request.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new XMLHttpRequest_1$1(e),r=this;try{debug$6("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var n in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.extraHeaders[n])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");r.supportsBinary&&"application/octet-stream"===e&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout(function(){r.onError(t.status)},0))},debug$6("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){r.onError(e)},0)}"undefined"!=typeof document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},Request.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},Request.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty$3:this.xhr.onreadystatechange=empty$3,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},Request.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},Request.requestsCount=0,Request.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",unloadHandler);else if("function"==typeof addEventListener){var terminationEvent="onpagehide"in self?"pagehide":"unload";addEventListener(terminationEvent,unloadHandler,!1)}function unloadHandler(){for(var e in Request.requests)Request.requests.hasOwnProperty(e)&&Request.requests[e].abort()}pollingXhr.Request=Request_1;var callbacks,pollingJsonp=JSONPPolling,rNewline=/\n/g,rEscapedNewline=/\\n/g;function empty$4(){}function glob$1(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:{}}function JSONPPolling(e){if(polling.call(this,e),this.query=this.query||{},!callbacks){var t=glob$1();callbacks=t.___eio=t.___eio||[]}this.index=callbacks.length;var r=this;callbacks.push(function(e){r.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){r.script&&(r.script.onerror=empty$4)},!1)}function Queue(e){if(!(this instanceof Queue))return new Queue(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=done$1.bind(this)}componentInherit(JSONPPolling,polling),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),polling.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},JSONPPolling.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n,i=document.createElement("form"),o=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=s,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function a(){c(),t()}function c(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),c(),e=e.replace(rEscapedNewline,"\\\n"),this.area.value=e.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&a()}:this.iframe.onload=a};var arrayAddMethods=["push","unshift","splice"];function done$1(){this.pending--,this._run()}arrayAddMethods.forEach(function(e){Queue.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}}),Object.defineProperty(Queue.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),Queue.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},Queue.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())};var asyncLimiter=Queue,bufferUtil$1=createCommonjsModule(function(e){function t(e,t){const r=Buffer.allocUnsafe(t);for(var n=0,i=0;i<e.length;i++){const t=e[i];t.copy(r,n),n+=t.length}return r}function r(e,t,r,n,i){for(var o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function n(e,t){const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}try{const i=bufferutil,o=i.BufferUtil||i;e.exports={mask(e,t,n,i,s){s<48?r(e,t,n,i,s):o.mask(e,t,n,i,s)},unmask(e,t){e.length<32?n(e,t):o.unmask(e,t)},concat:t}}catch(i){e.exports={concat:t,mask:r,unmask:n}}}),bufferUtil_1=bufferUtil$1.mask,bufferUtil_2=bufferUtil$1.unmask,bufferUtil_3=bufferUtil$1.concat,constants$c={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}};const{kStatusCode:kStatusCode,NOOP:NOOP}=constants$c,TRAILER=Buffer.from([0,0,255,255]),EMPTY_BLOCK=Buffer.from([0]),kPerMessageDeflate=Symbol("permessage-deflate"),kTotalLength=Symbol("total-length"),kCallback=Symbol("callback"),kBuffers=Symbol("buffers"),kError$1=Symbol("error");let zlibLimiter;class PerMessageDeflate$1{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!zlibLimiter){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;zlibLimiter=new asyncLimiter({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate&&(this._deflate.close(),this._deflate=null)}acceptAsServer(e){const t=this._options,r=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{var r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r})}),e}decompress(e,t,r){zlibLimiter.push(n=>{this._decompress(e,t,(e,t)=>{n(),r(e,t)})})}compress(e,t,r){zlibLimiter.push(n=>{this._compress(e,t,(e,t)=>{n(),r(e,t)})})}_decompress(e,t,r){const n=this._isServer?"client":"server";if(!this._inflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?zlib.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=zlib.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:t})),this._inflate[kPerMessageDeflate]=this,this._inflate[kTotalLength]=0,this._inflate[kBuffers]=[],this._inflate.on("error",inflateOnError),this._inflate.on("data",inflateOnData)}this._inflate[kCallback]=r,this._inflate.write(e),t&&this._inflate.write(TRAILER),this._inflate.flush(()=>{const e=this._inflate[kError$1];if(e)return this._inflate.close(),this._inflate=null,void r(e);const i=bufferUtil$1.concat(this._inflate[kBuffers],this._inflate[kTotalLength]);t&&this.params[`${n}_no_context_takeover`]?(this._inflate.close(),this._inflate=null):(this._inflate[kTotalLength]=0,this._inflate[kBuffers]=[]),r(null,i)})}_compress(e,t,r){if(!e||0===e.length)return void process.nextTick(r,null,EMPTY_BLOCK);const n=this._isServer?"server":"client";if(!this._deflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?zlib.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=zlib.createDeflateRaw(Object.assign({},this._options.zlibDeflateOptions,{windowBits:t})),this._deflate[kTotalLength]=0,this._deflate[kBuffers]=[],this._deflate.on("error",NOOP),this._deflate.on("data",deflateOnData)}this._deflate.write(e),this._deflate.flush(zlib.Z_SYNC_FLUSH,()=>{if(this._deflate){var e=bufferUtil$1.concat(this._deflate[kBuffers],this._deflate[kTotalLength]);t&&(e=e.slice(0,e.length-4)),t&&this.params[`${n}_no_context_takeover`]?(this._deflate.close(),this._deflate=null):(this._deflate[kTotalLength]=0,this._deflate[kBuffers]=[]),r(null,e)}})}}var permessageDeflate=PerMessageDeflate$1;function deflateOnData(e){this[kBuffers].push(e),this[kTotalLength]+=e.length}function inflateOnData(e){this[kTotalLength]+=e.length,this[kPerMessageDeflate]._maxPayload<1||this[kTotalLength]<=this[kPerMessageDeflate]._maxPayload?this[kBuffers].push(e):(this[kError$1]=new RangeError("Max payload size exceeded"),this[kError$1][kStatusCode]=1009,this.removeListener("data",inflateOnData),this.reset())}function inflateOnError(e){this[kPerMessageDeflate]._inflate=null,e[kStatusCode]=1007,this[kCallback](e)}class Event{constructor(e,t){this.target=t,this.type=e}}class MessageEvent$1 extends Event{constructor(e,t){super("message",t),this.data=e}}class CloseEvent$1 extends Event{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class OpenEvent$1 extends Event{constructor(e){super("open",e)}}class ErrorEvent extends Event{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const EventTarget={addEventListener(e,t){function r(e){t.call(this,new MessageEvent$1(e,this))}function n(e,r){t.call(this,new CloseEvent$1(e,r,this))}function i(e){t.call(this,new ErrorEvent(e,this))}function o(){t.call(this,new OpenEvent$1(this))}"function"==typeof t&&("message"===e?(r._listener=t,this.on(e,r)):"close"===e?(n._listener=t,this.on(e,n)):"error"===e?(i._listener=t,this.on(e,i)):"open"===e?(o._listener=t,this.on(e,o)):this.on(e,t))},removeEventListener(e,t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};var eventTarget=EventTarget;const tokenChars=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function push$1(e,t,r){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(r):e[t]=[r]}function parse$h(e){const t={};if(void 0===e||""===e)return t;for(var r,n,i={},o=!1,s=!1,a=!1,c=-1,u=-1,f=0;f<e.length;f++){const d=e.charCodeAt(f);if(void 0===r)if(-1===u&&1===tokenChars[d])-1===c&&(c=f);else if(32===d||9===d)-1===u&&-1!==c&&(u=f);else{if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${f}`);-1===u&&(u=f);const n=e.slice(c,u);44===d?(push$1(t,n,i),i={}):r=n,c=u=-1}}else if(void 0===n)if(-1===u&&1===tokenChars[d])-1===c&&(c=f);else if(32===d||9===d)-1===u&&-1!==c&&(u=f);else if(59===d||44===d){if(-1===c)throw new SyntaxError(`Unexpected character at index ${f}`);-1===u&&(u=f),push$1(i,e.slice(c,u),!0),44===d&&(push$1(t,r,i),i={},r=void 0),c=u=-1}else{if(61!==d||-1===c||-1!==u)throw new SyntaxError(`Unexpected character at index ${f}`);n=e.slice(c,f),c=u=-1}else if(s){if(1!==tokenChars[d])throw new SyntaxError(`Unexpected character at index ${f}`);-1===c?c=f:o||(o=!0),s=!1}else if(a)if(1===tokenChars[d])-1===c&&(c=f);else if(34===d&&-1!==c)a=!1,u=f;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${f}`);s=!0}else if(34===d&&61===e.charCodeAt(f-1))a=!0;else if(-1===u&&1===tokenChars[d])-1===c&&(c=f);else if(-1===c||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${f}`);if(-1===c)throw new SyntaxError(`Unexpected character at index ${f}`);-1===u&&(u=f);var l=e.slice(c,u);o&&(l=l.replace(/\\/g,""),o=!1),push$1(i,n,l),44===d&&(push$1(t,r,i),i={},r=void 0),n=void 0,c=u=-1}else-1===u&&(u=f)}if(-1===c||a)throw new SyntaxError("Unexpected end of input");-1===u&&(u=f);const d=e.slice(c,u);return void 0===r?push$1(t,d,{}):(void 0===n?push$1(i,d,!0):push$1(i,n,o?d.replace(/\\/g,""):d),push$1(t,r,i)),t}function format$4(e){return Object.keys(e).map(t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")}var extension={format:format$4,parse:parse$h},validation=createCommonjsModule(function(e,t){try{const e=utf8Validate;t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=()=>!0}t.isValidStatusCode=e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}),validation_1=validation.isValidUTF8,validation_2=validation.isValidStatusCode;const GET_INFO=0,GET_PAYLOAD_LENGTH_16=1,GET_PAYLOAD_LENGTH_64=2,GET_MASK=3,GET_DATA=4,INFLATING=5;class Receiver$2 extends Stream$1.Writable{constructor(e,t,r){super(),this._binaryType=e||constants$c.BINARY_TYPES[0],this[constants$c.kWebSocket]=void 0,this._extensions=t||{},this._maxPayload=0|r,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=GET_INFO,this._loop=!1}_write(e,t,r){if(8===this._opcode&&this._state==GET_INFO)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0];e>=r.length?this._buffers.shift().copy(t,t.length-e):(r.copy(t,t.length-e,0,e),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){var t;this._loop=!0;do{switch(this._state){case GET_INFO:t=this.getInfo();break;case GET_PAYLOAD_LENGTH_16:t=this.getPayloadLength16();break;case GET_PAYLOAD_LENGTH_64:t=this.getPayloadLength64();break;case GET_MASK:this.getMask();break;case GET_DATA:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,error$1(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[permessageDeflate.extensionName])return this._loop=!1,error$1(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,error$1(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,error$1(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,error$1(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,error$1(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,error$1(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,error$1(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,error$1(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength)this._state=GET_PAYLOAD_LENGTH_16;else{if(127!==this._payloadLength)return this.haveLength();this._state=GET_PAYLOAD_LENGTH_64}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,error$1(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,error$1(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=GET_MASK:this._state=GET_DATA}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=GET_DATA)}getData(e){var t=constants$c.EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&bufferUtil$1.unmask(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=INFLATING,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[permessageDeflate.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(error$1(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)})}dataMessage(){if(this._fin){const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?toBuffer(r,t):"arraybuffer"===this._binaryType?toArrayBuffer(toBuffer(r,t)):r,this.emit("message",e)}else{const e=toBuffer(r,t);if(!validation.isValidUTF8(e))return this._loop=!1,error$1(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",e.toString())}}this._state=GET_INFO}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return error$1(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!validation.isValidStatusCode(t))return error$1(RangeError,`invalid status code ${t}`,!0,1002);const r=e.slice(2);if(!validation.isValidUTF8(r))return error$1(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,r.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=GET_INFO}}var receiver=Receiver$2;function error$1(e,t,r,n){const i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,error$1),i[constants$c.kStatusCode]=n,i}function toBuffer(e,t){return 1===e.length?e[0]:e.length>1?bufferUtil$1.concat(e,t):constants$c.EMPTY_BUFFER}function toArrayBuffer(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}class Sender$2{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=e.length<1024||t.mask&&t.readOnly;var n=t.mask?6:2,i=e.length;e.length>=65536?(n+=8,i=127):e.length>125&&(n+=2,i=126);const o=Buffer.allocUnsafe(r?e.length+n:n);if(o[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(o[0]|=64),126===i?o.writeUInt16BE(e.length,2):127===i&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),!t.mask)return o[1]=i,r?(e.copy(o,n),[o]):[o,e];const s=crypto$l.randomBytes(4);return o[1]=128|i,o[n-4]=s[0],o[n-3]=s[1],o[n-2]=s[2],o[n-1]=s[3],r?(bufferUtil$1.mask(e,s,o,n,e.length),[o]):(bufferUtil$1.mask(e,s,e,0,e.length),[o,e])}close(e,t,r,n){var i;if(void 0===e)i=constants$c.EMPTY_BUFFER;else{if("number"!=typeof e||!validation.isValidStatusCode(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(i=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((i=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),i.write(t,2))}this._deflating?this.enqueue([this.doClose,i,r,n]):this.doClose(i,r,n)}doClose(e,t,r){this.sendFrame(Sender$2.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){var n=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=viewToBuffer(e):(e=Buffer.from(e),n=!1)),this._deflating?this.enqueue([this.doPing,e,t,n,r]):this.doPing(e,t,n,r)}doPing(e,t,r,n){this.sendFrame(Sender$2.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),n)}pong(e,t,r){var n=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=viewToBuffer(e):(e=Buffer.from(e),n=!1)),this._deflating?this.enqueue([this.doPong,e,t,n,r]):this.doPong(e,t,n,r)}doPong(e,t,r,n){this.sendFrame(Sender$2.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),n)}send(e,t,r){var n=t.binary?2:1,i=t.compress,o=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=viewToBuffer(e):(e=Buffer.from(e),o=!1));const s=this._extensions[permessageDeflate.extensionName];if(this._firstFragment?(this._firstFragment=!1,i&&s&&(i=e.length>=s._threshold),this._compress=i):(i=!1,n=0),t.fin&&(this._firstFragment=!0),s){const s={fin:t.fin,rsv1:i,opcode:n,mask:t.mask,readOnly:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,s,r]):this.dispatch(e,this._compress,s,r)}else this.sendFrame(Sender$2.frame(e,{fin:t.fin,rsv1:!1,opcode:n,mask:t.mask,readOnly:o}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(Sender$2.frame(e,r),n);const i=this._extensions[permessageDeflate.extensionName];this._deflating=!0,i.compress(e,r.fin,(e,t)=>{this._deflating=!1,r.readOnly=!1,this.sendFrame(Sender$2.frame(t,r),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.write(e[0]),this._socket.write(e[1],t)):this._socket.write(e[0],t)}}var sender=Sender$2;function viewToBuffer(e){const t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}const readyStates=["CONNECTING","OPEN","CLOSING","CLOSED"],kWebSocket=constants$c.kWebSocket,protocolVersions=[8,13],closeTimeout$1=3e4;class WebSocket$2 extends events$1{constructor(e,t,r){super(),this.readyState=WebSocket$2.CONNECTING,this.protocol="",this._binaryType=constants$c.BINARY_TYPES[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._isServer=!0,this._receiver=null,this._sender=null,this._socket=null,null!==e&&(Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),initAsClient$1.call(this,e,t,r))}get CONNECTING(){return WebSocket$2.CONNECTING}get CLOSING(){return WebSocket$2.CLOSING}get CLOSED(){return WebSocket$2.CLOSED}get OPEN(){return WebSocket$2.OPEN}get binaryType(){return this._binaryType}set binaryType(e){constants$c.BINARY_TYPES.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,r){const n=new receiver(this._binaryType,this._extensions,r);this._sender=new sender(e,this._extensions),this._receiver=n,this._socket=e,n[kWebSocket]=this,e[kWebSocket]=this,n.on("conclude",receiverOnConclude),n.on("drain",receiverOnDrain),n.on("error",receiverOnError),n.on("message",receiverOnMessage),n.on("ping",receiverOnPing),n.on("pong",receiverOnPong),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",socketOnClose),e.on("data",socketOnData),e.on("end",socketOnEnd),e.on("error",socketOnError),this.readyState=WebSocket$2.OPEN,this.emit("open")}emitClose(){this.readyState=WebSocket$2.CLOSED,this._socket?(this._extensions[permessageDeflate.extensionName]&&this._extensions[permessageDeflate.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==WebSocket$2.CLOSED){if(this.readyState===WebSocket$2.CONNECTING){const e="WebSocket was closed before the connection was established";return abortHandshake(this,this._req,e)}this.readyState!==WebSocket$2.CLOSING?(this.readyState=WebSocket$2.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._socket.writable&&(this._closeFrameReceived&&this._socket.end(),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),closeTimeout$1)))})):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,r){if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),this.readyState!==WebSocket$2.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${readyStates[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||constants$c.EMPTY_BUFFER,t,r)}pong(e,t,r){if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),this.readyState!==WebSocket$2.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${readyStates[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||constants$c.EMPTY_BUFFER,t,r)}send(e,t,r){if("function"==typeof t&&(r=t,t={}),this.readyState!==WebSocket$2.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${readyStates[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString());const n=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[permessageDeflate.extensionName]||(n.compress=!1),this._sender.send(e||constants$c.EMPTY_BUFFER,n,r)}terminate(){if(this.readyState!==WebSocket$2.CLOSED){if(this.readyState===WebSocket$2.CONNECTING){const e="WebSocket was closed before the connection was established";return abortHandshake(this,this._req,e)}this._socket&&(this.readyState=WebSocket$2.CLOSING,this._socket.destroy())}}}readyStates.forEach((e,t)=>{WebSocket$2[e]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(WebSocket$2.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var r=0;r<t.length;r++)if(t[r]._listener)return t[r]._listener},set(t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]._listener&&this.removeListener(e,r[n]);this.addEventListener(e,t)}})}),WebSocket$2.prototype.addEventListener=eventTarget.addEventListener,WebSocket$2.prototype.removeEventListener=eventTarget.removeEventListener;var websocket=WebSocket$2;function initAsClient$1(e,t,r){if(r=Object.assign({protocolVersion:protocolVersions[1],perMessageDeflate:!0,maxPayload:104857600},r,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0}),!protocolVersions.includes(r.protocolVersion))throw new RangeError(`Unsupported protocol version: ${r.protocolVersion} `+`(supported versions: ${protocolVersions.join(", ")})`);var n;this._isServer=!1,"object"==typeof e&&void 0!==e.href?(n=e,this.url=e.href):(n=Url.URL?new Url.URL(e):Url.parse(e),this.url=e);const i="ws+unix:"===n.protocol;if(!(n.host||i&&n.pathname))throw new Error(`Invalid URL: ${this.url}`);const o="wss:"===n.protocol||"https:"===n.protocol,s=o?443:80,a=crypto$l.randomBytes(16).toString("base64"),c=o?https:http,u=n.search?`${n.pathname||"/"}${n.search}`:n.pathname||"/";var f;if(r.createConnection=o?tlsConnect:netConnect,r.defaultPort=r.defaultPort||s,r.port=n.port||s,r.host=n.hostname.startsWith("[")?n.hostname.slice(1,-1):n.hostname,r.headers=Object.assign({"Sec-WebSocket-Version":r.protocolVersion,"Sec-WebSocket-Key":a,Connection:"Upgrade",Upgrade:"websocket"},r.headers),r.path=u,r.timeout=r.handshakeTimeout,r.perMessageDeflate&&(f=new permessageDeflate(!0!==r.perMessageDeflate?r.perMessageDeflate:{},!1,r.maxPayload),r.headers["Sec-WebSocket-Extensions"]=extension.format({[permessageDeflate.extensionName]:f.offer()})),t&&(r.headers["Sec-WebSocket-Protocol"]=t),r.origin&&(r.protocolVersion<13?r.headers["Sec-WebSocket-Origin"]=r.origin:r.headers.Origin=r.origin),n.auth?r.auth=n.auth:(n.username||n.password)&&(r.auth=`${n.username}:${n.password}`),i){const e=u.split(":");r.socketPath=e[0],r.path=e[1]}var l=this._req=c.get(r);r.handshakeTimeout&&l.on("timeout",()=>{abortHandshake(this,l,"Opening handshake has timed out")}),l.on("error",e=>{this._req.aborted||(l=this._req=null,this.readyState=WebSocket$2.CLOSING,this.emit("error",e),this.emitClose())}),l.on("response",e=>{this.emit("unexpected-response",l,e)||abortHandshake(this,l,`Unexpected server response: ${e.statusCode}`)}),l.on("upgrade",(e,n,i)=>{if(this.emit("upgrade",e),this.readyState!==WebSocket$2.CONNECTING)return;l=this._req=null;const o=crypto$l.createHash("sha1").update(a+constants$c.GUID,"binary").digest("base64");if(e.headers["sec-websocket-accept"]!==o)return void abortHandshake(this,n,"Invalid Sec-WebSocket-Accept header");const s=e.headers["sec-websocket-protocol"],c=(t||"").split(/, */);var u;if(!t&&s?u="Server sent a subprotocol but none was requested":t&&!s?u="Server sent no subprotocol":s&&!c.includes(s)&&(u="Server sent an invalid subprotocol"),u)abortHandshake(this,n,u);else{if(s&&(this.protocol=s),f)try{const t=extension.parse(e.headers["sec-websocket-extensions"]);t[permessageDeflate.extensionName]&&(f.accept(t[permessageDeflate.extensionName]),this._extensions[permessageDeflate.extensionName]=f)}catch(e){return void abortHandshake(this,n,"Invalid Sec-WebSocket-Extensions header")}this.setSocket(n,i,r.maxPayload)}})}function netConnect(e){return e.protocolVersion&&(e.path=e.socketPath),net.connect(e)}function tlsConnect(e){return e.path=void 0,e.servername=e.servername||e.host,tls.connect(e)}function abortHandshake(e,t,r){e.readyState=WebSocket$2.CLOSING;const n=new Error(r);Error.captureStackTrace(n,abortHandshake),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function receiverOnConclude(e,t){const r=this[kWebSocket];r._socket.removeListener("data",socketOnData),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function receiverOnDrain(){this[kWebSocket]._socket.resume()}function receiverOnError(e){const t=this[kWebSocket];t._socket.removeListener("data",socketOnData),t.readyState=WebSocket$2.CLOSING,t._closeCode=e[constants$c.kStatusCode],t.emit("error",e),t._socket.destroy()}function receiverOnFinish(){this[kWebSocket].emitClose()}function receiverOnMessage(e){this[kWebSocket].emit("message",e)}function receiverOnPing(e){const t=this[kWebSocket];t.pong(e,!t._isServer,constants$c.NOOP),t.emit("ping",e)}function receiverOnPong(e){this[kWebSocket].emit("pong",e)}function socketOnClose(){const e=this[kWebSocket];this.removeListener("close",socketOnClose),this.removeListener("end",socketOnEnd),e.readyState=WebSocket$2.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",socketOnData),this[kWebSocket]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",receiverOnFinish),e._receiver.on("finish",receiverOnFinish))}function socketOnData(e){this[kWebSocket]._receiver.write(e)||this.pause()}function socketOnEnd(){const e=this[kWebSocket];e.readyState=WebSocket$2.CLOSING,e._receiver.end(),this.end()}function socketOnError(){const e=this[kWebSocket];this.removeListener("error",socketOnError),this.on("error",constants$c.NOOP),e&&(e.readyState=WebSocket$2.CLOSING,this.destroy())}class WebSocketServer$1 extends events$1{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=http.createServer((e,t)=>{const r=http.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=addListeners(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,r)=>{this.handleUpgrade(e,t,r,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close(()=>this.emit("close")):process.nextTick(emitClose,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",socketOnError$1);const i=+e.headers["sec-websocket-version"],o={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!e.headers["sec-websocket-key"]||8!==i&&13!==i||!this.shouldHandle(e))return abortHandshake$1(t,400);if(this.options.perMessageDeflate){const r=new permessageDeflate(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const n=extension.parse(e.headers["sec-websocket-extensions"]);n[permessageDeflate.extensionName]&&(r.accept(n[permessageDeflate.extensionName]),o[permessageDeflate.extensionName]=r)}catch(e){return abortHandshake$1(t,400)}}if(this.options.verifyClient){const s={origin:e.headers[`${8===i?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,(i,s,a,c)=>{if(!i)return abortHandshake$1(t,s||401,a,c);this.completeUpgrade(o,e,t,r,n)});if(!this.options.verifyClient(s))return abortHandshake$1(t,401)}this.completeUpgrade(o,e,t,r,n)}completeUpgrade(e,t,r,n,i){if(!r.readable||!r.writable)return r.destroy();const o=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${crypto$l.createHash("sha1").update(t.headers["sec-websocket-key"]+constants$c.GUID,"binary").digest("base64")}`],s=new websocket(null);var a=t.headers["sec-websocket-protocol"];if(a&&(a=a.trim().split(/ *, */),(a=this.options.handleProtocols?this.options.handleProtocols(a,t):a[0])&&(o.push(`Sec-WebSocket-Protocol: ${a}`),s.protocol=a)),e[permessageDeflate.extensionName]){const t=e[permessageDeflate.extensionName].params,r=extension.format({[permessageDeflate.extensionName]:[t]});o.push(`Sec-WebSocket-Extensions: ${r}`),s._extensions=e}this.emit("headers",o,t),r.write(o.concat("\r\n").join("\r\n")),r.removeListener("error",socketOnError$1),s.setSocket(r,n,this.options.maxPayload),this.clients&&(this.clients.add(s),s.on("close",()=>this.clients.delete(s))),i(s)}}var websocketServer=WebSocketServer$1;function addListeners(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}function emitClose(e){e.emit("close")}function socketOnError$1(){this.destroy()}function abortHandshake$1(e,t,r,n){e.writable&&(r=r||http.STATUS_CODES[t],n=Object.assign({Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(r)},n),e.write(`HTTP/1.1 ${t} ${http.STATUS_CODES[t]}\r\n`+Object.keys(n).map(e=>`${e}: ${n[e]}`).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",socketOnError$1),e.destroy()}websocket.Server=websocketServer,websocket.Receiver=receiver,websocket.Sender=sender;var BrowserWebSocket,NodeWebSocket,ws$1=websocket,debug$7=src$13("engine.io-client:websocket");if("undefined"!=typeof WebSocket)BrowserWebSocket=WebSocket;else if("undefined"!=typeof self)BrowserWebSocket=self.WebSocket||self.MozWebSocket;else try{NodeWebSocket=ws$1}catch(e){}var WebSocketImpl=BrowserWebSocket||NodeWebSocket,websocket$1=WS;function WS(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=BrowserWebSocket&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(WebSocketImpl=NodeWebSocket),transport.call(this,e)}componentInherit(WS,transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new WebSocketImpl(e,t):new WebSocketImpl(e):new WebSocketImpl(e,t,r)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},WS.prototype.write=function(e){var t=this;this.writable=!1;for(var r=e.length,n=0,i=r;n<i;n++)!function(e){lib$5.encodePacket(e,t.supportsBinary,function(n){if(!t.usingBrowserWebSocket){var i={};if(e.options&&(i.compress=e.options.compress),t.perMessageDeflate)("string"==typeof n?Buffer.byteLength(n):n.length)<t.perMessageDeflate.threshold&&(i.compress=!1)}try{t.usingBrowserWebSocket?t.ws.send(n):t.ws.send(n,i)}catch(e){debug$7("websocket closed before onclose event")}--r||o()})}(e[n]);function o(){t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0)}},WS.prototype.onClose=function(){transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},WS.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=yeast_1()),this.supportsBinary||(e.b64=1),(e=parseqs.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e},WS.prototype.check=function(){return!(!WebSocketImpl||"__initialize"in WebSocketImpl&&this.name===WS.prototype.name)};var polling_1=polling$1,websocket_1=websocket$1;function polling$1(e){var t=!1,r=!1,n=!1!==e.jsonp;if("undefined"!=typeof location){var i="https:"===location.protocol,o=location.port;o||(o=i?443:80),t=e.hostname!==location.hostname||o!==e.port,r=e.secure!==i}if(e.xdomain=t,e.xscheme=r,"open"in new XMLHttpRequest_1$1(e)&&!e.forceJSONP)return new pollingXhr(e);if(!n)throw new Error("JSONP disabled");return new pollingJsonp(e)}var transports={polling:polling_1,websocket:websocket_1},indexOf$1=[].indexOf,indexof=function(e,t){if(indexOf$1)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1},debug$8=src$13("engine.io-client:socket"),socket=Socket;function Socket(e,t){if(!(this instanceof Socket))return new Socket(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=parseuri(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=parseuri(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=parseqs.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function clone$7(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}Socket.priorWebsocketSuccess=!1,componentEmitter$1(Socket.prototype),Socket.protocol=lib$5.protocol,Socket.Socket=Socket,Socket.Transport=transport,Socket.transports=transports,Socket.parser=lib$5,Socket.prototype.createTransport=function(e){debug$8('creating transport "%s"',e);var t=clone$7(this.query);t.EIO=lib$5.protocol,t.transport=e;var r=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new transports[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative})},Socket.prototype.open=function(){var e;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},Socket.prototype.setTransport=function(e){debug$8("setting transport %s",e.name);var t=this;this.transport&&(debug$8("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},Socket.prototype.probe=function(e){debug$8('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;function i(){if(n.onlyBinaryUpgrades){var i=!this.supportsBinary&&n.transport.supportsBinary;r=r||i}r||(debug$8('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(i){if(!r)if("pong"===i.type&&"probe"===i.data){if(debug$8('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;Socket.priorWebsocketSuccess="websocket"===t.name,debug$8('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){r||"closed"!==n.readyState&&(debug$8("changing transport and sending upgrade packet"),f(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())})}else{debug$8('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,n.emit("upgradeError",o)}}))}function o(){r||(r=!0,f(),t.close(),t=null)}function s(r){var i=new Error("probe error: "+r);i.transport=t.name,o(),debug$8('probe transport "%s" failed because of error: %s',e,r),n.emit("upgradeError",i)}function a(){s("transport closed")}function c(){s("socket closed")}function u(e){t&&e.name!==t.name&&(debug$8('"%s" works - aborting "%s"',e.name,t.name),o())}function f(){t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",a),n.removeListener("close",c),n.removeListener("upgrading",u)}Socket.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",s),t.once("close",a),this.once("close",c),this.once("upgrading",u),t.open()},Socket.prototype.onOpen=function(){if(debug$8("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){debug$8("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},Socket.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(debug$8('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else debug$8('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},Socket.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){debug$8("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},Socket.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug$8("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},Socket.prototype.sendPacket=function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var i={type:e,data:t,options:r};this.emit("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}},Socket.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}function t(){e.onClose("forced close"),debug$8("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return this},Socket.prototype.onError=function(e){debug$8("socket error %j",e),Socket.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},Socket.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){debug$8('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},Socket.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~indexof(this.transports,e[r])&&t.push(e[r]);return t};var lib$6=socket,parser=lib$5;lib$6.parser=parser;var componentEmitter$2=createCommonjsModule(function(e){function t(e){if(e)return function(e){for(var r in t.prototype)e[r]=t.prototype[r];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),toArray_1$2=toArray$2;function toArray$2(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}var on_1=on;function on(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}var slice$1=[].slice,componentBind=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=slice$1.call(arguments,2);return function(){return t.apply(e,r.concat(slice$1.call(arguments)))}},socket$1=createCommonjsModule(function(e,t){var r=src$11("socket.io-client:socket");e.exports=o;var n={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},i=componentEmitter$2.prototype.emit;function o(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}componentEmitter$2(o.prototype),o.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[on_1(e,"open",componentBind(this,"onopen")),on_1(e,"packet",componentBind(this,"onpacket")),on_1(e,"close",componentBind(this,"onclose"))]}},o.prototype.open=o.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},o.prototype.send=function(){var e=toArray_1$2(arguments);return e.unshift("message"),this.emit.apply(this,e),this},o.prototype.emit=function(e){if(n.hasOwnProperty(e))return i.apply(this,arguments),this;var t=toArray_1$2(arguments),o={type:(void 0!==this.flags.binary?this.flags.binary:hasBinary2(t))?socket_ioParser.BINARY_EVENT:socket_ioParser.EVENT,data:t,options:{}};return o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(r("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),this.flags={},this},o.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},o.prototype.onopen=function(){if(r("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?parseqs.encode(this.query):this.query;r("sending connect packet with query %s",e),this.packet({type:socket_ioParser.CONNECT,query:e})}else this.packet({type:socket_ioParser.CONNECT})},o.prototype.onclose=function(e){r("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},o.prototype.onpacket=function(e){var t=e.nsp===this.nsp,r=e.type===socket_ioParser.ERROR&&"/"===e.nsp;if(t||r)switch(e.type){case socket_ioParser.CONNECT:this.onconnect();break;case socket_ioParser.EVENT:case socket_ioParser.BINARY_EVENT:this.onevent(e);break;case socket_ioParser.ACK:case socket_ioParser.BINARY_ACK:this.onack(e);break;case socket_ioParser.DISCONNECT:this.ondisconnect();break;case socket_ioParser.ERROR:this.emit("error",e.data)}},o.prototype.onevent=function(e){var t=e.data||[];r("emitting event %j",t),null!=e.id&&(r("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?i.apply(this,t):this.receiveBuffer.push(t)},o.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=toArray_1$2(arguments);r("sending ack %j",i),t.packet({type:hasBinary2(i)?socket_ioParser.BINARY_ACK:socket_ioParser.ACK,id:e,data:i})}}},o.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(r("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):r("bad ack %s",e.id)},o.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},o.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)i.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},o.prototype.ondisconnect=function(){r("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},o.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},o.prototype.close=o.prototype.disconnect=function(){return this.connected&&(r("performing disconnect (%s)",this.nsp),this.packet({type:socket_ioParser.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},o.prototype.compress=function(e){return this.flags.compress=e,this},o.prototype.binary=function(e){return this.flags.binary=e,this}}),backo2=Backoff;function Backoff(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(e){this.ms=e},Backoff.prototype.setMax=function(e){this.max=e},Backoff.prototype.setJitter=function(e){this.jitter=e};var debug$9=src$11("socket.io-client:manager"),has$1=Object.prototype.hasOwnProperty,manager=Manager;function Manager(e,t){if(!(this instanceof Manager))return new Manager(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new backo2({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||socket_ioParser;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}Manager.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)has$1.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},Manager.prototype.updateSocketIds=function(){for(var e in this.nsps)has$1.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},Manager.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},componentEmitter$2(Manager.prototype),Manager.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(e,t){if(debug$9("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;debug$9("opening %s",this.uri),this.engine=lib$6(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=on_1(r,"open",function(){n.onopen(),e&&e()}),o=on_1(r,"error",function(t){if(debug$9("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;debug$9("connect attempt will timeout after %d",s);var a=setTimeout(function(){debug$9("connect attempt timed out after %d",s),i.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(i),this.subs.push(o),this},Manager.prototype.onopen=function(){debug$9("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(on_1(e,"data",componentBind(this,"ondata"))),this.subs.push(on_1(e,"ping",componentBind(this,"onping"))),this.subs.push(on_1(e,"pong",componentBind(this,"onpong"))),this.subs.push(on_1(e,"error",componentBind(this,"onerror"))),this.subs.push(on_1(e,"close",componentBind(this,"onclose"))),this.subs.push(on_1(this.decoder,"decoded",componentBind(this,"ondecoded")))},Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Manager.prototype.ondata=function(e){this.decoder.add(e)},Manager.prototype.ondecoded=function(e){this.emit("packet",e)},Manager.prototype.onerror=function(e){debug$9("error",e),this.emitAll("error",e)},Manager.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new socket$1(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",i),r.on("connect",function(){r.id=n.generateId(e)}),this.autoConnect&&i()}function i(){~indexof(n.connecting,r)||n.connecting.push(r)}return r},Manager.prototype.destroy=function(e){var t=indexof(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},Manager.prototype.packet=function(e){debug$9("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},Manager.prototype.cleanup=function(){debug$9("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){debug$9("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(e){debug$9("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)debug$9("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();debug$9("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){e.skipReconnect||(debug$9("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(debug$9("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(debug$9("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(r)}})}},Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};var lib$7=createCommonjsModule(function(e,t){var r=src$11("socket.io-client");e.exports=t=i;var n=t.managers={};function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o=url_1(e),s=o.source,a=o.id,c=o.path,u=n[a]&&c in n[a].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?(r("ignoring socket cache for %s",s),i=manager(s,t)):(n[a]||(r("new io instance for %s",s),n[a]=manager(s,t)),i=n[a]),o.query&&!t.query&&(t.query=o.query),i.socket(o.path,t)}t.protocol=socket_ioParser.protocol,t.connect=i,t.Manager=manager,t.Socket=socket$1}),lib_1$2=lib$7.managers,lib_2$2=lib$7.protocol,lib_3$2=lib$7.connect,lib_4$2=lib$7.Manager,lib_5$2=lib$7.Socket;const EE$3=events$1.EventEmitter;function DataQueue(){const e=new EE$3;let t,r=[];function n(){e.removeAllListeners("err"),e.removeAllListeners("data")}return{append:n=>{if(t)return t;r.push(n),e.emit("data")},prepend:e=>{if(t)return t;r.unshift(e)},error:r=>{t=r,e.emit("err",r)},get:i=>(n(),t?i(t):r.length?i(null,r.shift()):(e.once("err",e=>{n(),i(e)}),void e.once("data",()=>(n(),i(null,r.shift()))))),height:()=>r.length}}var _nodeId$1,_clockseq$1,dataQueue=DataQueue,_lastMSecs$1=0,_lastNSecs$1=0;function v1$1(e,t,r){var n=t&&r||0,i=t||[],o=(e=e||{}).node||_nodeId$1,s=void 0!==e.clockseq?e.clockseq:_clockseq$1;if(null==o||null==s){var a=rng$1();null==o&&(o=_nodeId$1=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=_clockseq$1=16383&(a[6]<<8|a[7]))}var c=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:_lastNSecs$1+1,f=c-_lastMSecs$1+(u-_lastNSecs$1)/1e4;if(f<0&&void 0===e.clockseq&&(s=s+1&16383),(f<0||c>_lastMSecs$1)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs$1=c,_lastNSecs$1=u,_clockseq$1=s;var l=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=255&l;var d=c/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var h=0;h<6;++h)i[n+h]=o[h];return t||bytesToUuid_1(i)}var v1_1=v1$1,uuid$1=v4_1;uuid$1.v1=v1_1,uuid$1.v4=v4_1;var uuid_1$1=uuid$1,s$g=1e3,m$e=60*s$g,h$c=60*m$e,d$c=24*h$c,w$b=7*d$c,y$c=365.25*d$c,ms$c=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$i(e);if("number"===r&&isFinite(e))return t.long?fmtLong$c(e):fmtShort$c(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$i(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$c;case"weeks":case"week":case"w":return r*w$b;case"days":case"day":case"d":return r*d$c;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$c;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$e;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$c(e){var t=Math.abs(e);return t>=d$c?Math.round(e/d$c)+"d":t>=h$c?Math.round(e/h$c)+"h":t>=m$e?Math.round(e/m$e)+"m":t>=s$g?Math.round(e/s$g)+"s":e+"ms"}function fmtLong$c(e){var t=Math.abs(e);return t>=d$c?plural$c(e,t,d$c,"day"):t>=h$c?plural$c(e,t,h$c,"hour"):t>=m$e?plural$c(e,t,m$e,"minute"):t>=s$g?plural$c(e,t,s$g,"second"):e+" ms"}function plural$c(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$a(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var o;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=s,a=Number(new Date),c=a-(o||a);i.diff=c,i.prev=o,i.curr=a,o=a,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;u++;var o=r.formatters[n];if("function"==typeof o){var s=t[u];e=o.call(i,s),t.splice(u,1),u--}return e}),r.formatArgs.call(i,t),(i.log||r.log).apply(i,t)}}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$c,Object.keys(e).forEach(function(t){r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$h=setup$a,browser$d=createCommonjsModule(function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$h(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$d=browser$d.log,browser_2$d=browser$d.formatArgs,browser_3$d=browser$d.save,browser_4$d=browser$d.load,browser_5$d=browser$d.useColors,browser_6$d=browser$d.storage,browser_7$d=browser$d.colors,node$g=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return process.stderr.write(util$j.format.apply(util$j,arguments)+"\n")},t.formatArgs=function(r){var n=this.namespace;if(this.useColors){var i=this.color,o="[3"+(i<8?i:"8;5;"+i),s="  ".concat(o,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var r=supportsColor_1;r&&(r.stderr||r).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$h(t);var n=e.exports.formatters;n.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$d=node$g.init,node_2$d=node$g.log,node_3$d=node$g.formatArgs,node_4$d=node$g.save,node_5$d=node$g.load,node_6$d=node$g.useColors,node_7$d=node$g.colors,node_8$d=node$g.inspectOpts,src$14=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$d:e.exports=node$g});const sioname=(e,t)=>"socket.io-pull-stream."+e+(t?"."+t:""),_log=src$14("socket.io-pull-stream");function doCodec(e,t){if(null==t)return t;try{return e(t)}catch(e){return console.error("Codec Error"),console.error(e),!1}}const codecs={hex:{encode:e=>e.toString("hex"),decode:e=>Buffer.from(e,"hex")},plain:{encode:e=>e,decode:e=>e},buffer:{encode:e=>Buffer.from(e),decode:e=>Buffer.from(e)}};function getCodec(e){if(e||(e="plain"),"object"==typeof e)return e;const t=codecs[e];if(!t)throw new Error("Invalid codec "+e);return t}function SIOSource(e,t,r){const n=dataQueue(),i=e.sioplog.bind(e.sioplog,"source("+t+")"),o=getCodec(r.codec).decode;function s(){e.removeAllListeners(sioname("error",t)),e.removeAllListeners(sioname("queue",t))}return i("create source"),e.emit(sioname("accept",t)),e.on(sioname("error",t),e=>{i(!0===e?"finish":"error"),s(),n.append({end:e})}),e.on(sioname("queue",t),e=>{i("queue data"),n.append({data:doCodec(o,e)})}),e.once("disconnect",()=>{s(),n.append({end:!0})}),function(e,t){if(i("reading"),e)return t(e);n.get((e,r)=>e?t(e):r.end?(n.error(r.end),t(r.end)):t(null,r.data))}}function SIOSink(e,t,r){const n=dataQueue(),i=e.sioplog.bind(e.sioplog,"  sink("+t+")"),o=getCodec(r.codec).encode;let s;function a(e){n.append({err:e}),s=e}return i("create sink"),e.once(sioname("accept",t),()=>{i("start transmission"),function r(){n.get((s,a)=>{let{data:c,err:u}=a||{};if(s&&(u=s),i("send",u&&!0===u?"finish":u?"error":c?"data":"<invalid>"),u&&!s&&n.error(u),u)return e.emit(sioname("error",t),u);c&&e.emit(sioname("queue",t),doCodec(o,c)),r()})}()}),e.once("disconnect",()=>a(!0)),function(e){e(null,function t(r,i){return r?a(r):s?e(s,t):(n.append({data:i}),void e(null,t))})}}var src$15=function(e,t){e.createSink||(e.sioplog=e.id?_log.bind(_log,"["+e.id+"]"):_log,e.createSink=(r,n)=>{r||(r=uuid_1$1());const i=SIOSink(e,r,t||n);return i.id=r,i},e.createSource=(r,n)=>{const i=SIOSource(e,r,t||n);return i.id=r,i},e.createProxy=(t,r,n)=>{pullStream(e.createSource(t,n),r.createSink(t,n))})},ERR_WS_STAR_WEBSOCKET_CONNECTION="ERR_WS_STAR_WEBSOCKET_CONNECTION",errors$7={ERR_WS_STAR_WEBSOCKET_CONNECTION:ERR_WS_STAR_WEBSOCKET_CONNECTION};const log$e=src$10("libp2p:websocket-star:listener"),EE$4=events$1.EventEmitter,Connection$5=src$T.Connection,cleanUrlSIO=utils$C.cleanUrlSIO,noop$b=once_1$1(()=>{}),sioOptions={transports:["websocket"],"force new connection":!0};class Listener extends EE$4{constructor(e){super(),this.id=e.id,this.log=log$e.bind(log$e,"listener#offline"),this.canCrypto=Boolean(e.id),this._handler=e.handler||noop$b,this.listeners_list=e.listeners||{},this.flag=e.flag,this.conns=[],this.connected=!1}_up(e){if(e=e?once_1$1(e):noop$b,this.io)return e();this.log=log$e.bind(log$e,"listener#"+this.server),this.log("dialing to signalling server");const t=this.io=lib$7.connect(this.server,sioOptions);src$15(t,{codec:"buffer"}),t.once("error",e),t.once("connect_error",e),t.once("connect",e);const r=new utils$C.Protocol(this.log);r.addRequest("ws-peer",["multiaddr"],(e,t)=>this.emit("peer",t)),r.addRequest("ss-incomming",["string","multiaddr","function"],this._incommingDial.bind(this)),r.handleSocket(t)}_down(){this.io&&(this.io.disconnect(),this.emit("close"),delete this.io)}_cryptoChallenge(e){if(!this.io)return e(new Error("Not connected"));const t=this.canCrypto?src$u.keys.marshalPublicKey(this.id.pubKey).toString("hex"):"",r=this.ma.toString();this.io.emit("ss-join",r,t,(t,r,n)=>{if(t)return e(t);if(r){if(!this.canCrypto)return this._down(),e(new Error("Can't sign cryptoChallenge: No id provided"));this.log("performing cryptoChallenge"),this.id.privKey.sign(Buffer.from(r),(t,r)=>{if(t)return e(t);this.signature=r.toString("hex"),this._join(e)})}else{if(!this.flag)return this._down(),e(new Error('Tried to listen on a server with crypto challenge disabled!\n    This is prohibited by default and can lead to security issues!\n    Please set "allowJoinWithDisabledChallenge" to true in the constructor options (but only if you know what you are doing)!'));this.signature="_",e(null,null,n)}})}_crypto(e){if(e=e?once_1$1(e):noop$b,this.log("joining"),!this.io)return e(new Error("Not connected"));this.signature?this._join(e):this._cryptoChallenge(e)}_join(e){this.io.emit("ss-join",this.ma.toString(),this.signature,e)}_incommingDial(e,t,r,n){this.log("dial#"+t+" incomming from",r);const i=src$2(r),o=this.io.createSource(t+".dialer"),s=this.io.createSink(t+".listener");n();const a=new Connection$5({sink:s,source:o},{getObservedAddrs:e=>e(null,[i])});this.emit("connection",a),this._handler(a)}listen(e,t){if(this.ma=e,this.server=cleanUrlSIO(e),this.listeners_list[this.server]=this,t=t?once_1$1(t):noop$b,this.connected)return this.closing=!1,setImmediate$1(()=>t());series_1([e=>this._up(e),e=>this._crypto((t,r,n)=>e(t,n))],(e,[r,n])=>{if(e){if(e.description&&"ENOTFOUND"===e.description.code){const t=e.description.hostname;e=Object.assign(new Error(`WebSocket connection failed on ${t}`),{code:errors$7.ERR_WS_STAR_WEBSOCKET_CONNECTION})}return this.log("error",e),e instanceof Error||(e=new Error(e)),this._down(),this.emit("error",e),this.emit("close"),t(e)}this.log("success"),this.connected=!0,this.io.on("reconnect",()=>{this.signature=null,this._crypto((e,t,r)=>{if(e)this.log("reconnect error",e),this.emit("error",e);else{this.log("reconnected");for(const e of r||[])this.emit("peer",e)}})}),this.emit("listening");for(const e of n||[])this.emit("peer",e);t()})}getAddrs(e){setImmediate$1(()=>e(null,this.ma?[this.ma]:[]))}get activeConnections(){return this.conns=this.conns.filter(e=>e.sink||e.source),Boolean(this.conns.length)}maybeClose(){!this.activeConnections&&this.closing&&(this.connected=!1,this.closing=!1,this.log("no more connections and listener is offline - closing"),this._down())}close(e){e=e?once_1$1(e):noop$b,this.closing=!0,this.maybeClose(),e()}stateWatch(e,t){let r={sink:!0,source:!0};const n=e=>through(e=>e,t=>{r[e]=!1,r.sink||r.source||this.maybeClose()});return this.conns.push(r),{sink:pull(n("sink"),e),source:pull(t,n("source"))}}dial(e,t,r){"function"==typeof t&&(r=t,t={});const n=src$2(e),i=new Connection$5(null),o=uuid_1$1(),s=this.log.bind(log$e,"dial#"+o);r=r?once_1$1(r):noop$b;let a=this.io;if(!a)return r(new Error("Not listening"));const c=a.createSink(o+".dialer");return s("dialing",e.toString()),a.emit("ss-dial",this.ma.toString(),e.toString(),o,e=>{if(e)return r(e instanceof Error?e:new Error(e));s(e?"error: "+e.toString():"success");const t=a.createSource(o+".listener");i.setInnerConn(this.stateWatch(c,t),{getObservedAddrs:e=>e(null,[n])}),r(null,i)}),i}}var listener$2=Listener;const log$f=src$10("libp2p:websocket-star"),EE$5=events$1.EventEmitter,Connection$6=src$T.Connection,cleanUrlSIO$1=utils$C.cleanUrlSIO;class WebsocketStar{constructor(e){e=e||{},this.id=e.id,this.flag=e.allowJoinWithDisabledChallenge,this.discovery=new EE$5,this.discovery.tag="websocketStar",this.discovery.start=e=>{setImmediate$1(e)},this.discovery.stop=e=>{setImmediate$1(e)},this.listeners_list={},this._peerDiscovered=this._peerDiscovered.bind(this)}lazySetId(e){e&&(this.id=e,this.canCrypto=!0)}dial(e,t,r){let n;"function"==typeof t&&(r=t,t={});try{n=cleanUrlSIO$1(e)}catch(e){return r(e)}const i=this.listeners_list[n];return i?i.dial(e,t,r):(r(new Error("No listener for this server")),new Connection$6)}createListener(e,t){"function"==typeof e&&(t=e,e={});const r=new listener$2({id:this.id,handler:t,listeners:this.listeners_list,flag:this.flag});return r.on("peer",this._peerDiscovered),r}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>src$3.WebSocketStar.matches(e))}_peerDiscovered(e){log$f("Peer Discovered:",e);const t=e.split("/ipfs/").pop(),r=src$s.createFromB58String(t),n=new src$t(r);n.multiaddrs.add(src$2(e)),this.discovery.emit("peer",n)}}var src$16=classIs(WebsocketStar,{className:"WebsocketStar",symbolName:"@libp2p/js-libp2p-websocket-star/websocketstar"});const log$g=src$$("libp2p:websocket-star:multi"),EE$6=events$1.EventEmitter;class WebsocketStarMulti{constructor(e){this.opt=e||{},this.servers=e.servers||[],this.ws=new src$16(this.opt),this.discovery=this.ws.discovery}dial(e,t,r){return log$g("dial",e),this.ws.dial(e,t,r)}createListener(e,t){"function"==typeof e&&(t=e,e={});const r=new EE$6;return r.servers={},r.online=[],this.servers.forEach(n=>{const i=this.ws.createListener(e,t);i.once("error",()=>{}),i.url=n,r.servers[n]=i}),r.listen=(e,t)=>{const n=e.toString().split("ipfs/").pop();log$g("listen on %s server(s) with id %s",this.servers.length,n),parallel$1(this.servers.map(e=>r.servers[e]).map(e=>t=>{log$g("listen %s",e.url);const i=once_1$1(n=>(log$g("listen %s ok %s",e.url,!n),n?t(log$g(n)):(r.online.push(e),t())));setTimeout(i,this.opt.timeout||5e3,new Error("Timeout")),e.listen(src$2(e.url).encapsulate("/ipfs/"+n),i)}),()=>{if(r.online.length||this.opt.ignore_no_online)r.emit("listening"),t();else{const e=new Error("Couldn't listen on any of the servers");r.emit("error",e),t(e)}})},r.close=e=>parallel$1(r.online.map(e=>t=>e.close(t)),t=>e(t,r.online=[])),r.getAddrs=e=>map$2(r.online,(e,t)=>e.getAddrs(t),(t,r)=>t?e(t):e(null,r.reduce((e,t)=>e.concat(t),[]))),r}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>e.toString().startsWith("/p2p-websocket-star")||src$3.WebSocketStar.matches(e))}}var src$17=WebsocketStarMulti,s$h=1e3,m$f=60*s$h,h$d=60*m$f,d$d=24*h$d,w$c=7*d$d,y$d=365.25*d$d,ms$d=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$j(e);if("number"===r&&isFinite(e))return t.long?fmtLong$d(e):fmtShort$d(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$j(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$d;case"weeks":case"week":case"w":return r*w$c;case"days":case"day":case"d":return r*d$d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$d;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$f;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$d(e){var t=Math.abs(e);return t>=d$d?Math.round(e/d$d)+"d":t>=h$d?Math.round(e/h$d)+"h":t>=m$f?Math.round(e/m$f)+"m":t>=s$h?Math.round(e/s$h)+"s":e+"ms"}function fmtLong$d(e){var t=Math.abs(e);return t>=d$d?plural$d(e,t,d$d,"day"):t>=h$d?plural$d(e,t,h$d,"hour"):t>=m$f?plural$d(e,t,m$f,"minute"):t>=s$h?plural$d(e,t,s$h,"second"):e+" ms"}function plural$d(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$b(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$d,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$i=setup$b,browser$e=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$i(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$e=browser$e.log,browser_2$e=browser$e.formatArgs,browser_3$e=browser$e.save,browser_4$e=browser$e.load,browser_5$e=browser$e.useColors,browser_6$e=browser$e.storage,browser_7$e=browser$e.colors,node$h=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$i(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$e=node$h.init,node_2$e=node$h.log,node_3$e=node$h.formatArgs,node_4$e=node$h.save,node_5$e=node$h.load,node_6$e=node$h.useColors,node_7$e=node$h.colors,node_8$e=node$h.inspectOpts,src$18=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$e:e.exports=node$h}),src$19=createCommonjsModule(function(e,t){const r=events$1.EventEmitter,n=src$18("libp2p:bootstrap");n.error=src$18("libp2p:bootstrap:error");(e.exports=class extends r{constructor(e){super(),this._list=e.list,this._interval=e.interval||1e4,this._timer=null}start(e){if(this._timer)return nextTick(()=>e());this._timer=setInterval(()=>this._discoverBootstrapPeers(),this._interval),nextTick(()=>{e(),this._discoverBootstrapPeers()})}_discoverBootstrapPeers(){this._list.forEach(e=>{if(!function(e){try{return src$3.IPFS.matches(e)}catch(e){return!1}}(e))return n.error("Invalid multiaddr");const t=src$2(e),r=src$s.createFromB58String(t.getPeerId());src$t.create(r,(e,r)=>{if(e)return n.error("Invalid bootstrap peer id",e);r.multiaddrs.add(t),this.emit("peer",r)})})}stop(e){nextTick(e),this._timer&&(clearInterval(this._timer),this._timer=null)}}).tag="bootstrap"}),src_1$a=src$19.tag,filter$4=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(filter$2),n=i(doParallel_1);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(r.default),e.exports=t.default});unwrapExports(filter$4);var timeout_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var o=(0,n.default)(e);return(0,r.default)(function(r,n){var s,a=!1;r.push(function(){a||(n.apply(null,arguments),clearTimeout(s))}),s=setTimeout(function(){var t=e.name||"anonymous",r=new Error('Callback function "'+t+'" timed out.');r.code="ETIMEDOUT",i&&(r.info=i);a=!0,n(r)},t),o.apply(null,r)})};var r=i(initialParams),n=i(wrapAsync_1);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(timeout_1);var toString$7=Object.prototype.toString,isFn=function(e){return"[object Function]"===toString$7.call(e)},setImmediateShim="function"==typeof setImmediate?setImmediate:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)},promiseToCallback=function(e){if(!isFn(e.then))throw new TypeError("Expected a promise");return function(t){e.then(function(e){setImmediateShim(t,null,e)},function(e){setImmediateShim(t,e)})}},randombytes=crypto$l.randomBytes;const{EventEmitter:EventEmitter$7}=events$1;function arrayEquals(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;++r)if(e[r]!==t[r])return!1;return!0}function createNode(){return{contacts:[],dontSplit:!1,left:null,right:null}}function ensureInt8(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}class KBucket extends EventEmitter$7{constructor(e={}){super(),this.localNodeId=e.localNodeId||randombytes(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||KBucket.distance,this.arbiter=e.arbiter||KBucket.arbiter,this.metadata=Object.assign({},e.metadata),ensureInt8("option.localNodeId as parameter 1",this.localNodeId),this.root=createNode()}static arbiter(e,t){return e.vectorClock>t.vectorClock?e:t}static distance(e,t){let r=0,n=0;const i=Math.min(e.length,t.length),o=Math.max(e.length,t.length);for(;n<i;++n)r=256*r+(e[n]^t[n]);for(;n<o;++n)r=256*r+255;return r}add(e){ensureInt8("contact.id",(e||{}).id);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e.id,t++);const n=this._indexOf(r,e.id);return n>=0?(this._update(r,n,e),this):r.contacts.length<this.numberOfNodesPerKBucket?(r.contacts.push(e),this.emit("added",e),this):r.dontSplit?(this.emit("ping",r.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(r,t),this.add(e))}closest(e,t=1/0){if(ensureInt8("id",e),!Number.isInteger(t)&&t!==1/0||t<=0)throw new TypeError("n is not positive number");let r=[];for(let n=[this.root],i=0;n.length>0&&r.length<t;){const t=n.pop();if(null===t.contacts){const r=this._determineNode(t,e,i++);n.push(t.left===r?t.right:t.left),n.push(r)}else r=r.concat(t.contacts)}return r.map(t=>[this.distance(t.id,e),t]).sort((e,t)=>e[0]-t[0]).slice(0,t).map(e=>e[1])}count(){let e=0;for(const t=[this.root];t.length>0;){const r=t.pop();null===r.contacts?t.push(r.right,r.left):e+=r.contacts.length}return e}_determineNode(e,t,r){const n=r>>3,i=r%8;return t.length<=n&&0!==i?e.left:t[n]&1<<7-i?e.right:e.left}get(e){ensureInt8("id",e);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e,t++);const n=this._indexOf(r,e);return n>=0?r.contacts[n]:null}_indexOf(e,t){for(let r=0;r<e.contacts.length;++r)if(arrayEquals(e.contacts[r].id,t))return r;return-1}remove(e){ensureInt8("the id as parameter 1",e);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e,t++);const n=this._indexOf(r,e);if(n>=0){const e=r.contacts.splice(n,1)[0];this.emit("removed",e)}return this}_split(e,t){e.left=createNode(),e.right=createNode();for(const r of e.contacts)this._determineNode(e,r.id,t).contacts.push(r);e.contacts=null;const r=this._determineNode(e,this.localNodeId,t);(e.left===r?e.right:e.left).dontSplit=!0}toArray(){let e=[];for(const t=[this.root];t.length>0;){const r=t.pop();null===r.contacts?t.push(r.right,r.left):e=e.concat(r.contacts)}return e}_update(e,t,r){if(!arrayEquals(e.contacts[t].id,r.id))throw new Error("wrong index for _update");const n=e.contacts[t],i=this.arbiter(n,r);i===n&&n!==r||(e.contacts.splice(t,1),e.contacts.push(i),this.emit("updated",n,i))}}var kBucket=KBucket,s$i=1e3,m$g=60*s$i,h$e=60*m$g,d$e=24*h$e,w$d=7*d$e,y$e=365.25*d$e,ms$e=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$k(e);if("number"===r&&isFinite(e))return t.long?fmtLong$e(e):fmtShort$e(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$k(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$e;case"weeks":case"week":case"w":return r*w$d;case"days":case"day":case"d":return r*d$e;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$e;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$g;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$e(e){var t=Math.abs(e);return t>=d$e?Math.round(e/d$e)+"d":t>=h$e?Math.round(e/h$e)+"h":t>=m$g?Math.round(e/m$g)+"m":t>=s$i?Math.round(e/s$i)+"s":e+"ms"}function fmtLong$e(e){var t=Math.abs(e);return t>=d$e?plural$e(e,t,d$e,"day"):t>=h$e?plural$e(e,t,h$e,"hour"):t>=m$g?plural$e(e,t,m$g,"minute"):t>=s$i?plural$e(e,t,s$i,"second"):e+" ms"}function plural$e(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$c(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$e,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$j=setup$c,browser$f=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$j(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$f=browser$f.log,browser_2$f=browser$f.formatArgs,browser_3$f=browser$f.save,browser_4$f=browser$f.load,browser_5$f=browser$f.useColors,browser_6$f=browser$f.storage,browser_7$f=browser$f.colors,node$i=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$j(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$f=node$i.init,node_2$f=node$i.log,node_3$f=node$i.formatArgs,node_4$f=node$i.save,node_5$f=node$i.load,node_6$f=node$i.useColors,node_7$f=node$i.colors,node_8$f=node$i.inspectOpts,src$1a=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$f:e.exports=node$i}),sha3$8=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),toCallback$g=e=>(function(t,r){let n;try{n=e(t)}catch(e){return void process.nextTick(r,e)}process.nextTick(r,null,n)}),toBuf$8=(e,t)=>r=>{let n=e(r,t);return Buffer.from(n,"hex")},fromString$a=(e,t)=>r=>{const n=Buffer.isBuffer(r)?r.toString():r;return e(n,t)},fromNumberTo32BitBuf$e=(e,t)=>r=>{let n=e(r,t);const i=new Array(4);for(let e=0;e<4;e++)i[e]=255&n,n>>=8;return Buffer.from(i)},utils$D={toCallback:toCallback$g,toBuf:toBuf$8,fromString:fromString$a,fromNumberTo32BitBuf:fromNumberTo32BitBuf$e};const toCallback$h=utils$D.toCallback,sha1$7=toCallback$h(e=>crypto$l.createHash("sha1").update(e).digest()),sha2256$4=toCallback$h(e=>crypto$l.createHash("sha256").update(e).digest()),sha2512$4=toCallback$h(e=>crypto$l.createHash("sha512").update(e).digest());var cryptoSha12$4={sha1:sha1$7,sha2256:sha2256$4,sha2512:sha2512$4};const toCallback$i=utils$D.toCallback,minB$7=45569,minS$7=45633,blake2b$8={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$8={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$7=(e,t)=>toCallback$i(r=>{const n=t.init(e,null);return t.update(n,r),Buffer.from(t.digest(n))});var blake_1$7=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$7(t+1,blake2b$8);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$7(t+1,blake2s$8)};const toCallback$j=utils$D.toCallback,toBuf$9=utils$D.toBuf,fromString$b=utils$D.fromString,fromNumberTo32BitBuf$f=utils$D.fromNumberTo32BitBuf,dblSha2256$4=(e,t)=>{cryptoSha12$4.sha2256(e,(e,r)=>{e&&t(e),cryptoSha12$4.sha2256(Buffer.from(r),t)})};var crypto$b={sha1:cryptoSha12$4.sha1,sha2256:cryptoSha12$4.sha2256,sha2512:cryptoSha12$4.sha2512,sha3512:toCallback$j(toBuf$9(sha3$8.sha3_512)),sha3384:toCallback$j(toBuf$9(sha3$8.sha3_384)),sha3256:toCallback$j(toBuf$9(sha3$8.sha3_256)),sha3224:toCallback$j(toBuf$9(sha3$8.sha3_224)),shake128:toCallback$j(toBuf$9(sha3$8.shake_128,128)),shake256:toCallback$j(toBuf$9(sha3$8.shake_256,256)),keccak224:toCallback$j(toBuf$9(sha3$8.keccak_224)),keccak256:toCallback$j(toBuf$9(sha3$8.keccak_256)),keccak384:toCallback$j(toBuf$9(sha3$8.keccak_384)),keccak512:toCallback$j(toBuf$9(sha3$8.keccak_512)),murmur3128:toCallback$j(toBuf$9(fromString$b(murmurhash3js.x64.hash128))),murmur332:toCallback$j(fromNumberTo32BitBuf$f(fromString$b(murmurhash3js.x86.hash32))),addBlake:blake_1$7,dblSha2256:dblSha2256$4},src$1b=Multihashing$7;function Multihashing$7(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");Multihashing$7.digest(e,t,r,(e,i)=>{if(e)return n(e);n(null,src.encode(i,t,r))})}Multihashing$7.Buffer=Buffer,Multihashing$7.multihash=src,Multihashing$7.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=Multihashing$7.createHash(t)}catch(e){return o(e)}i(e,o)},Multihashing$7.createHash=function(e){if(e=src.coerceCode(e),!Multihashing$7.functions[e])throw new Error("multihash function "+e+" not yet supported");return Multihashing$7.functions[e]},Multihashing$7.functions={17:crypto$b.sha1,18:crypto$b.sha2256,19:crypto$b.sha2512,20:crypto$b.sha3512,21:crypto$b.sha3384,22:crypto$b.sha3256,23:crypto$b.sha3224,24:crypto$b.shake128,25:crypto$b.shake256,26:crypto$b.keccak224,27:crypto$b.keccak256,28:crypto$b.keccak384,29:crypto$b.keccak512,34:crypto$b.murmur3128,35:crypto$b.murmur332,86:crypto$b.dblSha2256},crypto$b.addBlake(Multihashing$7.functions);var xorDistance=dist$3;function dist$3(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");for(var r=Buffer.allocUnsafe(e.length),n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}dist$3.compare=function(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");for(var r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0},dist$3.gt=function(e,t){return 1===dist$3.compare(e,t)},dist$3.lt=function(e,t){return-1===dist$3.compare(e,t)},dist$3.eq=function(e,t){return 0===dist$3.compare(e,t)};var utils$E=createCommonjsModule(function(e,t){const r=src$B.Key,n=src$S.Record;t.convertBuffer=(e,t)=>{src$1b.digest(e,"sha2-256",t)},t.convertPeerId=(e,t)=>{src$1b.digest(e.id,"sha2-256",t)},t.bufferToKey=e=>new r("/"+t.encodeBase32(e),!1),t.keyForPublicKey=e=>Buffer.concat([Buffer.from("/pk/"),e.id]),t.isPublicKeyKey=e=>"/pk/"===e.slice(0,4).toString(),t.fromPublicKeyKey=e=>new src$s(e.slice(4)),t.now=()=>Date.now(),t.encodeBase32=e=>{return(new base32_js.Encoder).write(e).finalize()},t.decodeBase32=e=>{const t=new base32_js.Decoder;return Buffer.from(t.write(e).finalize())},t.sortClosestPeers=(e,r,n)=>{map$2(e,(e,n)=>{t.convertPeerId(e,(t,i)=>{if(t)return n(t);n(null,{peer:e,distance:xorDistance(i,r)})})},(e,r)=>{if(e)return n(e);n(null,r.sort(t.xorCompare).map(e=>e.peer))})},t.xorCompare=(e,t)=>xorDistance.compare(e.distance,t.distance),t.pathSize=(e,t)=>Math.ceil(e/t),t.createPutRecord=(e,t,r)=>{const i=new Date,o=new n(e,t,i);setImmediate$1(()=>{r(null,o.serialize())})},t.logger=(e,t)=>{const r=["libp2p","dht"];t&&r.push(t),e&&r.push(`${e.toB58String().slice(0,8)}`),src$1a.formatters.b=e=>src.toB58String(e);const n=src$1a(r.join(":"));return n.error=src$1a(r.concat(["error"]).join(":")),n}}),utils_1$7=utils$E.convertBuffer,utils_2$3=utils$E.convertPeerId,utils_3$3=utils$E.bufferToKey,utils_4$3=utils$E.keyForPublicKey,utils_5$3=utils$E.isPublicKeyKey,utils_6$2=utils$E.fromPublicKeyKey,utils_7$2=utils$E.now,utils_8$2=utils$E.encodeBase32,utils_9$2=utils$E.decodeBase32,utils_10$1=utils$E.sortClosestPeers,utils_11$1=utils$E.xorCompare,utils_12$1=utils$E.pathSize,utils_13$1=utils$E.createPutRecord,utils_14$1=utils$E.logger;class RoutingTable{constructor(e,t){this.self=e,this._onPing=this._onPing.bind(this),utils$E.convertPeerId(e,(e,r)=>{if(e)throw e;this.kb=new kBucket({localNodeId:r,numberOfNodesPerKBucket:t,numberOfNodesToPing:1}),this.kb.on("ping",this._onPing)})}_onPing(e,t){const r=e[0];this.kb.remove(r.id),this.kb.add(t)}get size(){return this.kb.count()}find(e,t){utils$E.convertPeerId(e,(r,n)=>{if(r)return t(r);const i=this.closestPeer(n);if(i&&i.isEqual(e))return t(null,i);t()})}closestPeer(e,t){const r=this.closestPeers(e,1);if(r.length>0)return r[0]}closestPeers(e,t){return this.kb.closest(e,t).map(e=>e.peer)}add(e,t){utils$E.convertPeerId(e,(r,n)=>{if(r)return t(r);this.kb.add({id:n,peer:e}),t()})}remove(e,t){utils$E.convertPeerId(e,(e,r)=>{if(e)return t(e);this.kb.remove(r),t()})}}var routing=RoutingTable,constants$d=createCommonjsModule(function(e,t){const r=t.second=1e3,n=t.minute=60*r,i=t.hour=60*n;t.MAX_RECORD_AGE=36*i,t.PROTOCOL_DHT="/ipfs/kad/1.0.0",t.PROVIDERS_KEY_PREFIX="/providers/",t.PROVIDERS_LRU_CACHE_SIZE=256,t.PROVIDERS_VALIDITY=24*i,t.PROVIDERS_CLEANUP_INTERVAL=i,t.READ_MESSAGE_TIMEOUT=10*r,t.GET_MANY_RECORD_COUNT=16,t.K=20,t.ALPHA=3,t.maxMessageSize=2<<22,t.defaultRandomWalk={enabled:!0,queriesPerPeriod:1,interval:5*n,timeout:10*r,delay:10*r}}),constants_1$6=constants$d.second,constants_2$3=constants$d.minute,constants_3$3=constants$d.hour,constants_4$3=constants$d.MAX_RECORD_AGE,constants_5$2=constants$d.PROTOCOL_DHT,constants_6$1=constants$d.PROVIDERS_KEY_PREFIX,constants_7$1=constants$d.PROVIDERS_LRU_CACHE_SIZE,constants_8$1=constants$d.PROVIDERS_VALIDITY,constants_9$1=constants$d.PROVIDERS_CLEANUP_INTERVAL,constants_10=constants$d.READ_MESSAGE_TIMEOUT,constants_11=constants$d.GET_MANY_RECORD_COUNT,constants_12=constants$d.K,constants_13=constants$d.ALPHA,constants_14=constants$d.maxMessageSize,constants_15=constants$d.defaultRandomWalk;class PeerDistanceList{constructor(e,t){this.originDhtKey=e,this.capacity=t,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(e=>e.peerId)}add(e,t){if(this.peerDistances.find(t=>t.peerId.id.equals(e.id)))return t();utils$E.convertPeerId(e,(r,n)=>{if(r)return t(r);const i={peerId:e,distance:xorDistance(this.originDhtKey,n)};this.peerDistances.push(i),this.peerDistances.sort((e,t)=>xorDistance.compare(e.distance,t.distance)),this.peerDistances=this.peerDistances.slice(0,this.capacity),t()})}anyCloser(e,t){return e.length?this.length?void map$2(e,(e,t)=>utils$E.convertPeerId(e,t),(e,r)=>{if(e)return t(e);const n=this.peerDistances[this.peerDistances.length-1].distance;for(const e of r){const r=xorDistance(this.originDhtKey,e);if(xorDistance.compare(r,n)<0)return t(null,!0)}return t(null,!1)}):t(null,!0):t(null,!1)}}var peerDistanceList=PeerDistanceList,heap=createCommonjsModule(function(e,t){(function(){var t,r,n,i,o,s,a,c,u,f,l,d,h,p,b;n=Math.floor,f=Math.min,r=function(e,t){return e<t?-1:e>t?1:0},u=function(e,t,i,o,s){var a;if(null==i&&(i=0),null==s&&(s=r),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);i<o;)s(t,e[a=n((i+o)/2)])<0?o=a:i=a+1;return[].splice.apply(e,[i,i-i].concat(t)),t},s=function(e,t,n){return null==n&&(n=r),e.push(t),p(e,0,e.length-1,n)},o=function(e,t){var n,i;return null==t&&(t=r),n=e.pop(),e.length?(i=e[0],e[0]=n,b(e,0,t)):i=n,i},c=function(e,t,n){var i;return null==n&&(n=r),i=e[0],e[0]=t,b(e,0,n),i},a=function(e,t,n){var i;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(t=(i=[e[0],t])[0],e[0]=i[1],b(e,0,n)),t},i=function(e,t){var i,o,s,a,c,u;for(null==t&&(t=r),c=[],o=0,s=(a=function(){u=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)u.push(t);return u}.apply(this).reverse()).length;o<s;o++)i=a[o],c.push(b(e,i,t));return c},h=function(e,t,n){var i;if(null==n&&(n=r),-1!==(i=e.indexOf(t)))return p(e,0,i,n),b(e,i,n)},l=function(e,t,n){var o,s,c,u,f;if(null==n&&(n=r),!(s=e.slice(0,t)).length)return s;for(i(s,n),c=0,u=(f=e.slice(t)).length;c<u;c++)o=f[c],a(s,o,n);return s.sort(n).reverse()},d=function(e,t,n){var s,a,c,l,d,h,p,b,m;if(null==n&&(n=r),10*t<=e.length){if(!(c=e.slice(0,t).sort(n)).length)return c;for(a=c[c.length-1],l=0,h=(p=e.slice(t)).length;l<h;l++)n(s=p[l],a)<0&&(u(c,s,0,null,n),c.pop(),a=c[c.length-1]);return c}for(i(e,n),m=[],d=0,b=f(t,e.length);0<=b?d<b:d>b;0<=b?++d:--d)m.push(o(e,n));return m},p=function(e,t,n,i){var o,s,a;for(null==i&&(i=r),o=e[n];n>t&&i(o,s=e[a=n-1>>1])<0;)e[n]=s,n=a;return e[n]=o},b=function(e,t,n){var i,o,s,a,c;for(null==n&&(n=r),o=e.length,c=t,s=e[t],i=2*t+1;i<o;)(a=i+1)<o&&!(n(e[i],e[a])<0)&&(i=a),e[t]=e[i],i=2*(t=i)+1;return e[t]=s,p(e,c,t,n)},t=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=s,e.pop=o,e.replace=c,e.pushpop=a,e.heapify=i,e.updateItem=h,e.nlargest=l,e.nsmallest=d,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return c(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return a(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return h(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),e.exports=t}).call(commonjsGlobal)}),heap$1=heap;const log$h=src$1a("libp2p:dht:peer-queue");class PeerQueue{static async fromPeerId(e){const t=await promisifyEs6(t=>utils$E.convertPeerId(e,t))();return new PeerQueue(t)}static async fromKey(e){const t=await promisifyEs6(t=>utils$E.convertBuffer(e,t))();return new PeerQueue(t)}constructor(e){log$h("create: %b",e),this.from=e,this.heap=new heap$1(utils$E.xorCompare)}async enqueue(e){log$h("enqueue %s",e.toB58String());const t=await promisifyEs6(t=>utils$E.convertPeerId(e,t))(),r={id:e,distance:xorDistance(this.from,t)};this.heap.push(r)}dequeue(){const e=this.heap.pop();return log$h("dequeue %s",e.id.toB58String()),e.id}get length(){return this.heap.size()}}var peerQueue=PeerQueue;const QUERY_FUNC_TIMEOUT=3e4;class Path{constructor(e,t){this.run=e,this.queryFunc=timeout_1(t,QUERY_FUNC_TIMEOUT),this.queryFuncAsync=promisifyEs6(this.queryFunc),this.initialPeers=[],this.peersToQuery=null}addInitialPeer(e){this.initialPeers.push(e)}async execute(){const e=await peerQueue.fromKey(this.run.query.key);this.peersToQuery=e,await Promise.all(this.initialPeers.map(e=>this.addPeerToQuery(e))),await this.run.workerQueue(this)}async addPeerToQuery(e){this.run.query.dht._isSelf(e)||this.run.peersSeen.has(e)||await this.peersToQuery.enqueue(e)}}var path$2=Path;class WorkerQueue{constructor(e,t,r,n){this.dht=e,this.run=t,this.path=r,this.log=n,this.concurrency=this.dht.concurrency,this.queue=this.setupQueue(),this.execution=null}setupQueue(){const e=queue$1((e,t)=>{promiseToCallback(this.processNext(e))(t)},this.concurrency);return e.error=e=>{this.log.error("queue",e),this.stop(e)},e.drain=()=>{this.log("queue:drain"),this.stop()},e.unsaturated=()=>{this.running&&this.fill()},e.buffer=0,e}stop(e){this.running&&(this.running=!1,this.queue.kill(),this.log("worker:stop, %d workers still running",this.run.workers.filter(e=>e.running).length),e?this.execution.reject(e):this.execution.resolve())}async execute(){this.running=!0,this.execution={};const e=new Promise((e,t)=>Object.assign(this.execution,{resolve:e,reject:t}));this.fill(),await e}fill(){for(;this.queue.running()+this.queue.length()<this.concurrency&&this.path.peersToQuery.length>0;)this.queue.push(this.path.peersToQuery.dequeue())}async processNext(e){if(!this.running)return;if(this.run.peersSeen.has(e))return;let t,r,n,i;try{t=await this.run.continueQuerying(this)}catch(e){r=e}if(this.running){if(r)throw r;if(t){if(!this.run.peersSeen.has(e)){this.run.peersSeen.add(e),this.log("queue:work");try{n=await this.execQuery(e)}catch(e){i=e}if(this.running){if(this.log("queue:work:done",i,n),i)throw i;if(n&&n.queryComplete)return this.log("query:complete"),void this.run.stop();n&&n.pathComplete&&this.stop()}}}else this.stop()}}async execQuery(e){let t,r;try{t=await this.path.queryFuncAsync(e)}catch(e){r=e}if(this.running)if(r)this.run.errors.push(r);else{if(await promisifyEs6(t=>this.run.peersQueried.add(e,t))(),t.pathComplete||t.queryComplete)return this.path.res=t,{pathComplete:t.pathComplete,queryComplete:t.queryComplete};t.closerPeers&&t.closerPeers.length>0&&await Promise.all(t.closerPeers.map(async e=>{this.dht._isSelf(e.id)||(e=this.dht.peerBook.put(e),this.dht._peerDiscovered(e),await this.path.addPeerToQuery(e.id))}))}}}var workerQueue=WorkerQueue;class Run extends events$1{constructor(e){super(),this.query=e,this.running=!1,this.workers=[],this.peersSeen=new Set,this.errors=[],this.peersQueried=null}stop(){if(this.running){this.running=!1;for(const e of this.workers)e.stop()}}async execute(e){const t=[],r=Math.min(this.query.dht.disjointPaths,e.length);for(let e=0;e<r;e++)t.push(new path$2(this,this.query.makePath(e,r)));e.forEach((e,n)=>{t[n%r].addInitialPeer(e)}),await this.executePaths(t);const n={finalSet:new Set(this.peersQueried.peers),paths:[]};for(const e of t)e.res&&(e.res.pathComplete||e.res.queryComplete)&&(e.res.success=!0,n.paths.push(e.res));return n}async executePaths(e){this.running=!0,this.emit("start");try{await Promise.all(e.map(e=>e.execute()))}finally{this.stop(),this.emit("complete")}if(this.errors.length===this.peersSeen.size)throw this.errors[0]}async workerQueue(e){await this.init(),await this.startWorker(e)}async startWorker(e){const t=new workerQueue(this.query.dht,this,e,this.query._log);this.workers.push(t),await t.execute()}async init(){this.peersQueried||(this.peersQueriedPromise?await this.peersQueriedPromise:(this.peersQueriedPromise=(async()=>{const e=await promisifyEs6(e=>utils$E.convertBuffer(this.query.key,e))();this.peersQueried=new peerDistanceList(e,this.query.dht.kBucketSize)})(),await this.peersQueriedPromise,delete this.peersQueriedPromise))}async continueQuerying(e){if(this.peersQueried.length<this.peersQueried.capacity)return!0;const t=e.queue.workersList().map(e=>e.data);return!!await promisifyEs6(e=>this.peersQueried.anyCloser(t,e))()}}var run=Run;class Query{constructor(e,t,r){this.dht=e,this.key=t,this.makePath=r,this._log=utils$E.logger(this.dht.peerInfo.id,"query:"+src.toB58String(t)),this.running=!1,this._onStart=this._onStart.bind(this),this._onComplete=this._onComplete.bind(this)}async run(e){return this.dht._queryManager.running?0===e.length?(this._log.error("Running query with no peers"),{finalSet:new Set,paths:[]}):(this._run=new run(this),this._log(`query running with K=${this.dht.kBucketSize}, A=${this.dht.concurrency}, D=${Math.min(this.dht.disjointPaths,e.length)}`),this._run.once("start",this._onStart),this._run.once("complete",this._onComplete),this._run.execute(e)):(this._log.error("Attempt to run query after shutdown"),{finalSet:new Set,paths:[]})}_onStart(){this.running=!0,this._startTime=Date.now(),this._log("query:start"),this.dht._queryManager.queryStarted(this)}_onComplete(){this.stop()}stop(){this._log(`query:done in ${Date.now()-this._startTime}ms`),this._run&&this._log(`${this._run.errors.length} of ${this._run.peersSeen.size} peers errored (${this._run.errors.length/this._run.peersSeen.size*100}% fail rate)`),this.running&&(this._run.removeListener("start",this._onStart),this._run.removeListener("complete",this._onComplete),this.running=!1,this._run&&this._run.stop(),this.dht._queryManager.queryCompleted(this))}}var query$1=Query,dht_proto='// can\'t use, because protocol-buffers doesn\'t support imports\n// so we have to duplicate for now :(\n// import "record.proto";\n\nmessage Record {\n  // adjusted for javascript\n  optional bytes key = 1;\n  optional bytes value = 2;\n  optional bytes author = 3;\n  optional bytes signature = 4;\n  optional string timeReceived = 5;\n}\n\nmessage Message {\n  enum MessageType {\n    PUT_VALUE = 0;\n    GET_VALUE = 1;\n    ADD_PROVIDER = 2;\n    GET_PROVIDERS = 3;\n    FIND_NODE = 4;\n    PING = 5;\n  }\n\n  enum ConnectionType {\n    // sender does not have a connection to peer, and no extra information (default)\n    NOT_CONNECTED = 0;\n\n    // sender has a live connection to peer\n    CONNECTED = 1;\n\n    // sender recently connected to peer\n    CAN_CONNECT = 2;\n\n    // sender recently tried to connect to peer repeatedly but failed to connect\n    // ("try" here is loose, but this should signal "made strong effort, failed")\n    CANNOT_CONNECT = 3;\n  }\n\n  message Peer {\n    // ID of a given peer.\n    optional bytes id = 1;\n\n    // multiaddrs for a given peer\n    repeated bytes addrs = 2;\n\n    // used to signal the sender\'s connection capabilities to the peer\n    optional ConnectionType connection = 3;\n  }\n\n  // defines what type of message it is.\n  optional MessageType type = 1;\n\n  // defines what coral cluster level this query/response belongs to.\n  // in case we want to implement coral\'s cluster rings in the future.\n  optional int32 clusterLevelRaw = 10;\n\n  // Used to specify the key associated with this message.\n  // PUT_VALUE, GET_VALUE, ADD_PROVIDER, GET_PROVIDERS\n  // adjusted for javascript\n  optional bytes key = 2;\n\n  // Used to return a value\n  // PUT_VALUE, GET_VALUE\n  // adjusted Record to bytes for js\n  optional bytes record = 3;\n\n  // Used to return peers closer to a key in a query\n  // GET_VALUE, GET_PROVIDERS, FIND_NODE\n  repeated Peer closerPeers = 8;\n\n  // Used to return Providers\n  // GET_VALUE, ADD_PROVIDER, GET_PROVIDERS\n  repeated Peer providerPeers = 9;\n}';const Record$1=src$S.Record,pbm$3=src$i(dht_proto),MESSAGE_TYPE=pbm$3.Message.MessageType,CONNECTION_TYPE=pbm$3.Message.ConnectionType;class Message{constructor(e,t,r){t&&assert$t(Buffer.isBuffer(t)),this.type=e,this.key=t,this._clusterLevelRaw=r,this.closerPeers=[],this.providerPeers=[],this.record=null}get clusterLevel(){const e=this._clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this._clusterLevelRaw=e}serialize(){const e={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(toPbPeer),providerPeers:this.providerPeers.map(toPbPeer)};return this.record&&(Buffer.isBuffer(this.record)?e.record=this.record:e.record=this.record.serialize()),pbm$3.Message.encode(e)}static deserialize(e){const t=pbm$3.Message.decode(e),r=new Message(t.type,t.key,t.clusterLevelRaw);return r.closerPeers=t.closerPeers.map(fromPbPeer),r.providerPeers=t.providerPeers.map(fromPbPeer),t.record&&(r.record=Record$1.deserialize(t.record)),r}}function toPbPeer(e){const t={id:e.id.id,addrs:e.multiaddrs.toArray().map(e=>e.buffer)};return e.isConnected()?t.connection=CONNECTION_TYPE.CONNECTED:t.connection=CONNECTION_TYPE.NOT_CONNECTED,t}function fromPbPeer(e){const t=new src$t(new src$s(e.id));return e.addrs.forEach(e=>t.multiaddrs.add(e)),t}Message.TYPES=MESSAGE_TYPE,Message.CONNECTION_TYPES=CONNECTION_TYPE;var message$2=Message;const Record$2=src$S.Record;var getValue=e=>{const t=utils$E.logger(e.peerInfo.id,"rpc:get-value");return function(r,n,i){const o=n.key;if(t("key: %b",o),!o||0===o.length)return i(errCode(new Error("Invalid key"),"ERR_INVALID_KEY"));const s=new message$2(message$2.TYPES.GET_VALUE,o,n.clusterLevel);if(utils$E.isPublicKeyKey(o)){t("is public key");const r=utils$E.fromPublicKeyKey(o);let n;if(e._isSelf(r)?n=e.peerInfo:e.peerBook.has(r)&&(n=e.peerBook.get(r)),n&&n.id.pubKey)return t("returning found public key"),s.record=new Record$2(o,n.id.pubKey.bytes),i(null,s)}parallel$1([t=>e._checkLocalDatastore(o,t),t=>e._betterPeersToQuery(n,r,t)],(e,r)=>{if(e)return i(e);const n=r[0],o=r[1];n&&(t("got record"),s.record=n),o.length>0&&(t("got closer %s",o.length),s.closerPeers=o),i(null,s)})}},putValue=e=>{const t=utils$E.logger(e.peerInfo.id,"rpc:put-value");return function(r,n,i){const o=n.key;t("key: %b",o);const s=n.record;if(!s){const e=`Empty record from: ${r.id.toB58String()}`;return t.error(e),i(errCode(new Error(e),"ERR_EMPTY_RECORD"))}e._verifyRecordLocally(s,r=>{if(r)return t.error(r.message),i(r);s.timeReceived=new Date;const o=utils$E.bufferToKey(s.key);e.datastore.put(o,s.serialize(),e=>{if(e)return i(e);i(null,n)})})}},findNode=e=>{const t=utils$E.logger(e.peerInfo.id,"rpc:find-node");return function(r,n,i){t("start"),waterfall([t=>{if(n.key.equals(e.peerInfo.id.id))return t(null,[e.peerInfo]);e._betterPeersToQuery(n,r,t)},(e,i)=>{const o=new message$2(n.type,Buffer.alloc(0),n.clusterLevel);e.length>0?o.closerPeers=e:t("handle FindNode %s: could not find anything",r.id.toB58String()),i(null,o)}],i)}},CIDUtil$9={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$9=CIDUtil$9;class CID$8{constructor(e,t,r,n){if(_CID$8.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$8.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$8.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$8.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$8(0,this.codec,this.multihash)}toV1(){return new _CID$8(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$9.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$8=classIs(CID$8,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$8.codecs=baseTable;var src$1c=_CID$8,addProvider=e=>{const t=utils$E.logger(e.peerInfo.id,"rpc:add-provider");return function(r,n,i){if(t("start"),!n.key||0===n.key.length)return i(errCode(new Error("Missing key"),"ERR_MISSING_KEY"));let o;try{o=new src$1c(n.key)}catch(e){const t=`Invalid CID: ${e.message}`;return i(errCode(new Error(t),"ERR_INVALID_CID"))}let s=!1;n.providerPeers.forEach(n=>{n.id.isEqual(r.id)?n.multiaddrs.size<1?t("no valid addresses for provider %s. Ignore",r.id.toB58String()):(t("received provider %s for %s (addrs %s)",r.id.toB58String(),o.toBaseEncodedString(),n.multiaddrs.toArray().map(e=>e.toString())),e._isSelf(n.id)||(s=!0,e.peerBook.put(n),e.providers.addProvider(o,n.id,i))):t("invalid provider peer %s from %s",n.id.toB58String(),r.id.toB58String())}),s||e.providers.addProvider(o,r.id,i)}},getProviders=e=>{const t=utils$E.logger(e.peerInfo.id,"rpc:get-providers");return function(r,n,i){let o;try{o=new src$1c(n.key)}catch(e){return i(errCode(new Error(`Invalid CID: ${e.message}`),"ERR_INVALID_CID"))}t("%s",o.toBaseEncodedString());const s=utils$E.bufferToKey(o.buffer);parallel$1([r=>e.datastore.has(s,(e,n)=>{if(e)return t.error("Failed to check datastore existence",e),r(null,!1);r(null,n)}),t=>e.providers.getProviders(o,t),t=>e._betterPeersToQuery(n,r,t)],(r,o)=>{if(r)return i(r);const s=o[0],a=o[2],c=o[1].map(t=>e.peerBook.has(t)?e.peerBook.get(t):e.peerBook.put(new src$t(t)));s&&c.push(e.peerInfo);const u=new message$2(n.type,n.key,n.clusterLevel);c.length>0&&(u.providerPeers=c),a.length>0&&(u.closerPeers=a),t("got %s providers %s closerPeers",c.length,a.length),i(null,u)})}},ping=e=>{const t=utils$E.logger(e.peerInfo.id,"rpc:ping");return function(e,r,n){t("from %s",e.id.toB58String()),n(null,r)}};const T=message$2.TYPES;var handlers=e=>{const t={[T.GET_VALUE]:getValue(e),[T.PUT_VALUE]:putValue(e),[T.FIND_NODE]:findNode(e),[T.ADD_PROVIDER]:addProvider(e),[T.GET_PROVIDERS]:getProviders(e),[T.PING]:ping(e)};return function(e){return t[e]}},rpc=e=>{const t=utils$E.logger(e.peerInfo.id,"rpc"),r=handlers(e);return function(n,i){i.getPeerInfo((n,o)=>{if(n)return t.error("Failed to get peer info"),void t.error(n);t("from: %s",o.id.toB58String()),pullStream(i,src$M.decode(),pullStream.filter(e=>e.length<constants$d.maxMessageSize),pullStream.map(e=>{let r;try{r=message$2.deserialize(e)}catch(e){return void t.error("failed to read incoming message",e)}return r}),pullStream.filter(Boolean),pullStream.asyncMap((n,i)=>(function(n,i,o){e._add(n,e=>{e&&(t.error("Failed to update the kbucket store"),t.error(e));const s=r(i.type);if(!s)return t.error(`no handler found for message type: ${i.type}`),o();s(n,i,o)})})(o,n,i)),pullStream.filter(Boolean),pullStream.map(e=>{let r;try{r=e.serialize()}catch(e){return void t.error("failed to send message",e)}return r}),pullStream.filter(Boolean),src$M.encode(),i)})}};class Network$1{constructor(e){this.dht=e,this.readMessageTimeout=constants$d.READ_MESSAGE_TIMEOUT,this._log=utils$E.logger(this.dht.peerInfo.id,"net"),this._rpc=rpc(this.dht),this._onPeerConnected=this._onPeerConnected.bind(this),this._running=!1}start(e){const t=t=>setImmediate$1(()=>e(t));return this._running?t(errCode(new Error("Network is already running"),"ERR_NETWORK_ALREADY_RUNNING")):this.dht.isStarted?(this._running=!0,this.dht.switch.handle(constants$d.PROTOCOL_DHT,this._rpc),this.dht.switch.on("peer-mux-established",this._onPeerConnected),void t()):t(errCode(new Error("Can not start network"),"ERR_CANNOT_START_NETWORK"))}stop(e){const t=t=>setImmediate$1(()=>e(t));if(!this.dht.isStarted&&!this.isStarted)return t(errCode(new Error("Network is already stopped"),"ERR_NETWORK_ALREADY_STOPPED"));this._running=!1,this.dht.switch.removeListener("peer-mux-established",this._onPeerConnected),this.dht.switch.unhandle(constants$d.PROTOCOL_DHT),t()}get isStarted(){return this._running}get isConnected(){return this.dht.isStarted&&this.isStarted}_onPeerConnected(e){if(!this.isConnected)return this._log.error("Network is offline");this.dht.switch.dial(e,constants$d.PROTOCOL_DHT,(t,r)=>{if(t)return this._log("%s does not support protocol: %s",e.id.toB58String(),constants$d.PROTOCOL_DHT);pullStream(pullStream.empty(),r),this.dht._add(e,t=>{if(t)return this._log.error("Failed to add to the routing table",t);this._log("added to the routing table: %s",e.id.toB58String())})})}sendRequest(e,t,r){if(!this.isConnected)return r(errCode(new Error("Network is offline"),"ERR_NETWORK_OFFLINE"));this._log("sending to: %s",e.toB58String()),this.dht.switch.dial(e,constants$d.PROTOCOL_DHT,(e,n)=>{if(e)return r(e);this._writeReadMessage(n,t.serialize(),r)})}sendMessage(e,t,r){if(!this.isConnected)return setImmediate$1(()=>r(errCode(new Error("Network is offline"),"ERR_NETWORK_OFFLINE")));this._log("sending to: %s",e.toB58String()),this.dht.switch.dial(e,constants$d.PROTOCOL_DHT,(e,n)=>{if(e)return r(e);this._writeMessage(n,t.serialize(),r)})}_writeReadMessage(e,t,r){timeout_1(writeReadMessage,this.readMessageTimeout)(e,t,r)}_writeMessage(e,t,r){pullStream(pullStream.values([t]),src$M.encode(),e,pullStream.onEnd(r))}}function writeReadMessage(e,t,r){pullStream(pullStream.values([t]),src$M.encode(),e,pullStream.filter(e=>e.length<constants$d.maxMessageSize),src$M.decode(),pullStream.collect((e,t)=>{if(e)return r(e);if(0===t.length)return r(errCode(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED"));let n;try{n=message$2.deserialize(t[0])}catch(e){return r(errCode(e,"ERR_FAILED_DESERIALIZE_RESPONSE"))}r(null,n)}))}var network$1=Network$1;function callbackify(e){var t=e.length;return function(){var r=[].slice.call(arguments),n=this;if(r.length!==t+1||"function"!=typeof r[t])return e.apply(n,arguments);var i=r.pop();e.apply(this,r).then(function(e){i.call(n,null,e)},function(e){i.call(n,e)})}}function callbackifyVariadic(e){return function(){var t=[].slice.call(arguments),r=this;if(!(t.length>=1&&"function"==typeof t[t.length-1]))return e.apply(r,arguments);var n=t.pop();e.apply(this,t).then(function(e){n.call(r,null,e)},function(e){n.call(r,e)})}}var callbackify_1=callbackify,variadic=callbackifyVariadic;callbackify_1.variadic=variadic;class PeerList{constructor(){this.list=[]}push(e){return!this.has(e)&&(this.list.push(e),!0)}has(e){const t=this.list.find(t=>t.id.isEqual(e.id));return Boolean(t)}toArray(){return this.list.slice()}pop(){return this.list.pop()}get length(){return this.list.length}}var peerList=PeerList;class LimitedPeerList extends peerList{constructor(e){super(),this.limit=e}push(e){return this.length<this.limit&&super.push(e)}}var limitedPeerList=LimitedPeerList;const Record$3=src$S.Record;var _private=e=>({_nearestPeersToQuery(e,t){promiseToCallback(this._nearestPeersToQueryAsync(e))(t)},async _nearestPeersToQueryAsync(t){const r=await promisifyEs6(utils$E.convertBuffer)(t.key);return e.routingTable.closestPeers(r,e.kBucketSize).map(t=>e.peerBook.has(t)?e.peerBook.get(t):e.peerBook.put(new src$t(t)))},_betterPeersToQuery(e,t,r){promiseToCallback(this._betterPeersToQueryAsync(e,t))(r)},_betterPeersToQueryAsync:async(t,r)=>(e._log("betterPeersToQuery"),(await e._nearestPeersToQueryAsync(t)).filter(t=>e._isSelf(t.id)?(e._log.error("trying to return self as closer"),!1):!t.id.isEqual(r.id))),_checkLocalDatastore(e,t){promiseToCallback(this._checkLocalDatastoreAsync(e))(t)},async _checkLocalDatastoreAsync(t){e._log("checkLocalDatastore: %b",t);const r=utils$E.bufferToKey(t);let n;try{n=await promisifyEs6(t=>e.datastore.get(r,t))()}catch(e){if("ERR_NOT_FOUND"===e.code)return;throw e}const i=Record$3.deserialize(n);if(!i)throw errCode("Invalid record","ERR_INVALID_RECORD");if(!(null==i.timeReceived||utils$E.now()-i.timeReceived>constants$d.MAX_RECORD_AGE))return i;await promisifyEs6(t=>e.datastore.delete(r,t))()},_add(e,t){promiseToCallback(this._addAsync(e))(e=>t(e))},async _addAsync(t){t=e.peerBook.put(t),await promisifyEs6(r=>e.routingTable.add(t.id,r))()},_verifyRecordLocally(e,t){promiseToCallback(this._verifyRecordLocallyAsync(e))(e=>t(e))},async _verifyRecordLocallyAsync(t){e._log("verifyRecordLocally"),await promisifyEs6(r=>src$S.validator.verifyRecord(e.validators,t,r))()},_closerPeersSingle(e,t,r){promiseToCallback(this._closerPeersSingleAsync(e,t))(r)},_closerPeersSingleAsync:async(t,r)=>(e._log("_closerPeersSingle %b from %s",t,r.toB58String()),(await e._findPeerSingleAsync(r,new src$s(t))).closerPeers.filter(t=>!e._isSelf(t.id)).map(t=>e.peerBook.put(t))),_isSelf:t=>t&&e.peerInfo.id.id.equals(t.id),_findPeerSingle(e,t,r){promiseToCallback(this._findPeerSingleAsync(e,t))(r)},async _findPeerSingleAsync(t,r){e._log("_findPeerSingle %s",t.toB58String());const n=new message$2(message$2.TYPES.FIND_NODE,r.id,0);return promisifyEs6(r=>e.network.sendRequest(t,n,r))()},_putValueToPeer(e,t,r,n){promiseToCallback(this._putValueToPeerAsync(e,t,r))(n)},async _putValueToPeerAsync(t,r,n){const i=new message$2(message$2.TYPES.PUT_VALUE,t,0);if(i.record=r,!(await promisifyEs6(t=>e.network.sendRequest(n,i,t))()).record.value.equals(Record$3.deserialize(r).value))throw errCode(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")},_putLocal(e,t,r){promiseToCallback(this._putLocalAsync(e,t))(e=>r(e))},async _putLocalAsync(t,r){await promisifyEs6(n=>e.datastore.put(utils$E.bufferToKey(t),r,n))()},_get(e,t,r){promiseToCallback(this._getAsync(e,t))(r)},async _getAsync(t,r){e._log("_get %b",t);const n=await promisifyEs6(n=>e.getMany(t,constants$d.GET_MANY_RECORD_COUNT,r,n))(),i=n.map(e=>e.val);let o=0;try{o=src$S.selection.bestRecord(e.selectors,t,i)}catch(e){if("ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"!==e.code)throw e}const s=i[o];if(e._log("GetValue %b %s",t,s),!s)throw errCode(new Error("best value was not found"),"ERR_NOT_FOUND");return await this._sendCorrectionRecord(t,n,s),s},async _sendCorrectionRecord(t,r,n){const i=await promisifyEs6(e=>utils$E.createPutRecord(t,n,e))();return Promise.all(r.map(async r=>{if(!r.val.equals(n))if(e._isSelf(r.from))try{await promisifyEs6(r=>e._putLocal(t,i,r))()}catch(t){e._log.error("Failed error correcting self",t)}else try{await promisifyEs6(n=>e._putValueToPeer(t,i,r.from,n))()}catch(t){e._log.error("Failed error correcting entry",t)}}))},_getLocal(e,t){promiseToCallback(this._getLocalAsync(e))(t)},async _getLocalAsync(t){e._log("getLocal %b",t);const r=await promisifyEs6(r=>e.datastore.get(utils$E.bufferToKey(t),r))();e._log("found %b in local datastore",t);const n=Record$3.deserialize(r);return await e._verifyRecordLocallyAsync(n),n},_getValueOrPeers(e,t,r){promiseToCallback(this._getValueOrPeersAsync(e,t))((e,t)=>{if(e)return r(e);r(null,t.record,t.peers)})},async _getValueOrPeersAsync(t,r){const n=await promisifyEs6(n=>e._getValueSingle(t,r,n))(),i=n.closerPeers,o=n.record;if(o){try{await promisifyEs6(t=>e._verifyRecordOnline(o,t))()}catch(t){const r="invalid record received, discarded";throw e._log(r),errCode(new Error(r),"ERR_INVALID_RECORD")}return{record:o,peers:i}}if(i.length>0)return{peers:i};throw errCode(new Error("Not found"),"ERR_NOT_FOUND")},_getValueSingle(e,t,r){promiseToCallback(this._getValueSingleAsync(e,t))(r)},async _getValueSingleAsync(t,r){const n=new message$2(message$2.TYPES.GET_VALUE,r,0);return promisifyEs6(r=>e.network.sendRequest(t,n,r))()},_verifyRecordOnline(e,t){promiseToCallback(this._verifyRecordOnlineAsync(e))(e=>t(e))},_verifyRecordOnlineAsync:async t=>promisifyEs6(r=>src$S.validator.verifyRecord(e.validators,t,r))(),_getPublicKeyFromNode(e,t){promiseToCallback(this._getPublicKeyFromNodeAsync(e))(t)},async _getPublicKeyFromNodeAsync(t){const r=utils$E.keyForPublicKey(t),n=await promisifyEs6(n=>e._getValueSingle(t,r,n))();if(!n.record||!n.record.value)throw errCode(`Node not responding with its public key: ${t.toB58String()}`,"ERR_INVALID_RECORD");const i=await promisifyEs6(e=>src$s.createFromPubKey(n.record.value,e))();if(!i.isEqual(t))throw errCode("public key does not match id","ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");return i.pubKey},_findNProviders(e,t,r,n){promiseToCallback(this._findNProvidersAsync(e,t,r))(n)},async _findNProvidersAsync(t,r,n){const i=new limitedPeerList(n);if((await promisifyEs6(r=>e.providers.getProviders(t,r))()).forEach(t=>{let r;r=e.peerBook.has(t)?e.peerBook.get(t):e.peerBook.put(new src$t(t)),i.push(r)}),i.length>=n)return i.toArray();const o=[],s=new query$1(e,t.buffer,(r,s)=>{const a=utils$E.pathSize(n-i.length,s),c=new limitedPeerList(a);return o.push(c),callbackify_1(async r=>{const n=await e._findProvidersSingleAsync(r,t),i=n.providerPeers;return e._log("(%s) found %s provider entries",e.peerInfo.id.toB58String(),i.length),i.forEach(t=>{c.push(e.peerBook.put(t))}),c.length>=a?{pathComplete:!0}:{closerPeers:n.closerPeers}})}),a=e.routingTable.closestPeers(t.buffer,e.kBucketSize);try{await promisifyEs6(e=>timeout_1(e=>{promiseToCallback(s.run(a))(e)},r)(e))()}catch(e){if("ETIMEDOUT"!==e.code||0===i.length)throw e}finally{s.stop()}return o.forEach(e=>{e.toArray().forEach(e=>{i.push(e)})}),i.toArray()},_findProvidersSingle(e,t,r){promiseToCallback(this._findProvidersSingleAsync(e,t))(r)},async _findProvidersSingleAsync(t,r){const n=new message$2(message$2.TYPES.GET_PROVIDERS,r.buffer,0);return promisifyEs6(r=>e.network.sendRequest(t,n,r))()}}),hashlru=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function i(i,o){r[i]=o,++t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return void 0!==r[e]||void 0!==n[e]},remove:function(e){void 0!==r[e]&&(r[e]=void 0),void 0!==n[e]&&(n[e]=void 0)},get:function(e){var t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(i(e,t),t):void 0},set:function(e,t){void 0!==r[e]?r[e]=t:i(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}};const Key$c=src$B.Key;class Providers{constructor(e,t,r){this.datastore=e,this._log=utils$E.logger(t,"providers"),this.cleanupInterval=constants$d.PROVIDERS_CLEANUP_INTERVAL,this.provideValidity=constants$d.PROVIDERS_VALIDITY,this.lruCacheSize=r||constants$d.PROVIDERS_LRU_CACHE_SIZE,this.providers=hashlru(this.lruCacheSize)}stop(){this._cleaner&&(clearInterval(this._cleaner),this._cleaner=null)}_cleanup(){this._getProviderCids((e,t)=>{if(e)return this._log.error("Failed to get cids",e);each(t,(e,t)=>{this._getProvidersMap(e,(r,n)=>r?t(r):(n.forEach((e,t)=>{this._log("comparing: %s - %s > %s",Date.now(),e,this.provideValidity),Date.now()-e>this.provideValidity&&n.delete(t)}),0===n.size?this._deleteProvidersMap(e,t):void t()))},e=>{if(e)return this._log.error("Failed to cleanup",e);this._log("Cleanup successfull")})})}_getProviderCids(e){pullStream(this.datastore.query({prefix:constants$d.PROVIDERS_KEY_PREFIX}),pullStream.map(e=>{const t=e.key.toString().split("/");if(4!==t.length)return void this._log.error("incorrectly formatted provider entry in datastore: %s",e.key);let r,n;try{r=utils$E.decodeBase32(t[2])}catch(e){return void this._log.error("error decoding base32 provider key: %s",t[2])}try{n=new src$1c(r)}catch(e){this._log.error("error converting key to cid from datastore: %s",e.message)}return n}),pullStream.filter(Boolean),pullStream.collect(e))}_getProvidersMap(e,t){const r=this.providers.get(makeProviderKey(e));if(!r)return loadProviders(this.datastore,e,t);t(null,r)}_deleteProvidersMap(e,t){const r=makeProviderKey(e);this.providers.set(r,null);const n=this.datastore.batch();pullStream(this.datastore.query({keysOnly:!0,prefix:r}),pullStream.through(e=>n.delete(e.key)),pullStream.onEnd(e=>{if(e)return t(e);n.commit(t)}))}get cleanupInterval(){return this._cleanupInterval}set cleanupInterval(e){this._cleanupInterval=e,this._cleaner&&clearInterval(this._cleaner),this._cleaner=setInterval(()=>this._cleanup(),this.cleanupInterval)}addProvider(e,t,r){this._log("addProvider %s",e.toBaseEncodedString());const n=makeProviderKey(e),i=this.providers.get(n),o=(i,o)=>{if(i)return r(i);this._log("loaded %s provs",o.size);const s=Date.now();o.set(t,s),this.providers.set(n,o),writeProviderEntry(this.datastore,e,t,s,r)};i?o(null,i):loadProviders(this.datastore,e,o)}getProviders(e,t){this._log("getProviders %s",e.toBaseEncodedString()),this._getProvidersMap(e,(e,r)=>{if(e)return t(e);t(null,Array.from(r.keys()))})}}function makeProviderKey(e){return constants$d.PROVIDERS_KEY_PREFIX+utils$E.encodeBase32(e.buffer)}function writeProviderEntry(e,t,r,n,i){const o=[makeProviderKey(t),"/",utils$E.encodeBase32(r.id)].join("");e.put(new Key$c(o),Buffer.from(varint.encode(n)),i)}function loadProviders(e,t,r){pullStream(e.query({prefix:makeProviderKey(t)}),pullStream.map(e=>{const t=e.key.toString().split("/"),r=t[t.length-1],n=utils$E.decodeBase32(r);return[new src$s(n),readTime(e.value)]}),pullStream.collect((e,t)=>e?r(e):r(null,new Map(t))))}function readTime(e){return varint.decode(e)}var providers$1=Providers,doParallelLimit_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,i,o,s){return e((0,r.default)(i),t,(0,n.default)(o),s)}};var r=i(eachOfLimit),n=i(wrapAsync_1);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(doParallelLimit_1);var mapLimit=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(doParallelLimit_1),n=i(map$1);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)(n.default),e.exports=t.default});unwrapExports(mapLimit);var nativeCeil=Math.ceil,nativeMax$1=Math.max;function baseRange(e,t,r,n){for(var i=-1,o=nativeMax$1(nativeCeil((t-e)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=e,e+=r;return s}var _baseRange=baseRange,timesLimit=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o,s){var a=(0,i.default)(o);(0,r.default)((0,n.default)(0,e,1),t,a,s)};var r=o(mapLimit),n=o(_baseRange),i=o(wrapAsync_1);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(timesLimit);var times=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(timesLimit),n=i(doLimit_1);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(r.default,1/0),e.exports=t.default});unwrapExports(times);const privateData=new WeakMap,wrappers=new WeakMap;function pd(e){const t=privateData.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function setCancelFlag(e){null==e.passiveListener?e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault()):"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener)}function Event$1(e,t){privateData.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const r=Object.keys(t);for(let e=0;e<r.length;++e){const t=r[e];t in this||Object.defineProperty(this,t,defineRedirectDescriptor(t))}}function defineRedirectDescriptor(e){return{get(){return pd(this).event[e]},set(t){pd(this).event[e]=t},configurable:!0,enumerable:!0}}function defineCallDescriptor(e){return{value(){const t=pd(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function defineWrapper(e,t){const r=Object.keys(t);if(0===r.length)return e;function n(t,r){e.call(this,t,r)}n.prototype=Object.create(e.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){const o=r[i];if(!(o in e.prototype)){const e="function"==typeof Object.getOwnPropertyDescriptor(t,o).value;Object.defineProperty(n.prototype,o,e?defineCallDescriptor(o):defineRedirectDescriptor(o))}}return n}function getWrapper(e){if(null==e||e===Object.prototype)return Event$1;let t=wrappers.get(e);return null==t&&(t=defineWrapper(getWrapper(Object.getPrototypeOf(e)),e),wrappers.set(e,t)),t}function wrapEvent(e,t){return new(getWrapper(Object.getPrototypeOf(t)))(e,t)}function isStopped(e){return pd(e).immediateStopped}function setEventPhase(e,t){pd(e).eventPhase=t}function setCurrentTarget(e,t){pd(e).currentTarget=t}function setPassiveListener(e,t){pd(e).passiveListener=t}Event$1.prototype={get type(){return pd(this).event.type},get target(){return pd(this).eventTarget},get currentTarget(){return pd(this).currentTarget},composedPath(){const e=pd(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return pd(this).eventPhase},stopPropagation(){const e=pd(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){const e=pd(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(pd(this).event.bubbles)},get cancelable(){return Boolean(pd(this).event.cancelable)},preventDefault(){setCancelFlag(pd(this))},get defaultPrevented(){return pd(this).canceled},get composed(){return Boolean(pd(this).event.composed)},get timeStamp(){return pd(this).timeStamp},get srcElement(){return pd(this).eventTarget},get cancelBubble(){return pd(this).stopped},set cancelBubble(e){if(!e)return;const t=pd(this);t.stopped=!0,"boolean"==typeof t.event.cancelBubble&&(t.event.cancelBubble=!0)},get returnValue(){return!pd(this).canceled},set returnValue(e){e||setCancelFlag(pd(this))},initEvent(){}},Object.defineProperty(Event$1.prototype,"constructor",{value:Event$1,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(Event$1.prototype,window.Event.prototype),wrappers.set(window.Event.prototype,Event$1));const listenersMap=new WeakMap,CAPTURE=1,BUBBLE=2,ATTRIBUTE=3;function isObject$5(e){return null!==e&&"object"==typeof e}function getListeners(e){const t=listenersMap.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function defineEventAttributeDescriptor(e){return{get(){let t=getListeners(this).get(e);for(;null!=t;){if(t.listenerType===ATTRIBUTE)return t.listener;t=t.next}return null},set(t){"function"==typeof t||isObject$5(t)||(t=null);const r=getListeners(this);let n=null,i=r.get(e);for(;null!=i;)i.listenerType===ATTRIBUTE?null!==n?n.next=i.next:null!==i.next?r.set(e,i.next):r.delete(e):n=i,i=i.next;if(null!==t){const i={listener:t,listenerType:ATTRIBUTE,passive:!1,once:!1,next:null};null===n?r.set(e,i):n.next=i}},configurable:!0,enumerable:!0}}function defineEventAttribute(e,t){Object.defineProperty(e,`on${t}`,defineEventAttributeDescriptor(t))}function defineCustomEventTarget(e){function t(){EventTarget$1.call(this)}t.prototype=Object.create(EventTarget$1.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let r=0;r<e.length;++r)defineEventAttribute(t.prototype,e[r]);return t}function EventTarget$1(){if(!(this instanceof EventTarget$1)){if(1===arguments.length&&Array.isArray(arguments[0]))return defineCustomEventTarget(arguments[0]);if(arguments.length>0){const e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return defineCustomEventTarget(e)}throw new TypeError("Cannot call a class as a function")}listenersMap.set(this,new Map)}EventTarget$1.prototype={addEventListener(e,t,r){if(null==t)return;if("function"!=typeof t&&!isObject$5(t))throw new TypeError("'listener' should be a function or an object.");const n=getListeners(this),i=isObject$5(r),o=(i?Boolean(r.capture):Boolean(r))?1:2,s={listener:t,listenerType:o,passive:i&&Boolean(r.passive),once:i&&Boolean(r.once),next:null};let a=n.get(e);if(void 0===a)return void n.set(e,s);let c=null;for(;null!=a;){if(a.listener===t&&a.listenerType===o)return;c=a,a=a.next}c.next=s},removeEventListener(e,t,r){if(null==t)return;const n=getListeners(this),i=(isObject$5(r)?Boolean(r.capture):Boolean(r))?1:2;let o=null,s=n.get(e);for(;null!=s;){if(s.listener===t&&s.listenerType===i)return void(null!==o?o.next=s.next:null!==s.next?n.set(e,s.next):n.delete(e));o=s,s=s.next}},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw new TypeError('"event.type" should be a string.');const t=getListeners(this),r=e.type;let n=t.get(r);if(null==n)return!0;const i=wrapEvent(this,e);let o=null;for(;null!=n;){if(n.once?null!==o?o.next=n.next:null!==n.next?t.set(r,n.next):t.delete(r):o=n,setPassiveListener(i,n.passive?n.listener:null),"function"==typeof n.listener)try{n.listener.call(this,i)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else n.listenerType!==ATTRIBUTE&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(i);if(isStopped(i))break;n=n.next}return setPassiveListener(i,null),setEventPhase(i,0),setCurrentTarget(i,null),!i.defaultPrevented}},Object.defineProperty(EventTarget$1.prototype,"constructor",{value:EventTarget$1,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(EventTarget$1.prototype,window.EventTarget.prototype);class AbortSignal extends EventTarget$1{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){const e=abortedFlags.get(this);if("boolean"!=typeof e)throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${null===this?"null":typeof this}`);return e}}function createAbortSignal(){const e=Object.create(AbortSignal.prototype);return EventTarget$1.call(e),abortedFlags.set(e,!1),e}function abortSignal(e){!1===abortedFlags.get(e)&&(abortedFlags.set(e,!0),e.dispatchEvent({type:"abort"}))}defineEventAttribute(AbortSignal.prototype,"abort");const abortedFlags=new WeakMap;Object.defineProperties(AbortSignal.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortSignal.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class AbortController{constructor(){signals$2.set(this,createAbortSignal())}get signal(){return getSignal(this)}abort(){abortSignal(getSignal(this))}}const signals$2=new WeakMap;function getSignal(e){const t=signals$2.get(e);if(null==t)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===e?"null":typeof e}`);return t}Object.defineProperties(AbortController.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortController.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});var abortController=Object.freeze({default:AbortController,AbortController:AbortController,AbortSignal:AbortSignal}),AbortController$1=getCjsExportFromNamespace(abortController);const{logger:logger$7}=utils$E;class RandomWalk{constructor(e,t){assert$t(e,"Random Walk needs an instance of the Kademlia DHT"),this._options={...constants$d.defaultRandomWalk,...t},this._kadDHT=e,this.log=logger$7(e.peerInfo.id,"random-walk")}start(){!this._timeoutId&&this._options.enabled&&(this._timeoutId=setTimeout(()=>{this._runPeriodically(e=>{this._walk(this._options.queriesPerPeriod,this._options.timeout,()=>e(this._options.interval))},0)},this._options.delay))}stop(){clearTimeout(this._timeoutId),this._timeoutId=null,this._controller&&this._controller.abort()}_runPeriodically(e,t){this._timeoutId=setTimeout(()=>{e(t=>{this._runPeriodically(e,t)})},t)}_walk(e,t,r){this.log("start"),this._controller=new AbortController$1,times(e,(e,r)=>{this.log("running query %d",e),waterfall([e=>this._randomPeerId(e),(e,r)=>{if(!this._controller)return r();this._query(e,{timeout:t,signal:this._controller.signal},r)}],t=>{if(t&&"ETIMEDOUT"!==t.code)return this.log.error("query %d finished with error",e,t),r(t);this.log("finished query %d",e),r(null)})},e=>{this._controller=null,this.log("finished queries"),r(e)})}_query(e,t,r){this.log("query:%s",e.toB58String()),this._kadDHT.findPeer(e,t,(t,n)=>t&&"ERR_NOT_FOUND"===t.code?r():t?r(t):(this.log("query:found",n),void r(errCode(new Error(`random-walk: ACTUALLY FOUND PEER: ${n}, ${e.toB58String()}`),"ERR_FOUND_RANDOM_PEER"))))}_randomPeerId(e){src$1b(src$u.randomBytes(16),"sha2-256",(t,r)=>{if(t)return e(t);e(null,new src$s(r))})}}var randomWalk=RandomWalk;class QueryManager{constructor(){this.queries=new Set,this.running=!1}queryStarted(e){this.queries.add(e)}queryCompleted(e){this.queries.delete(e)}start(){this.running=!0}stop(){this.running=!1;for(const e of this.queries)e.stop();this.queries.clear()}}var queryManager=QueryManager;const{EventEmitter:EventEmitter$8}=events$1,MemoryStore=src$B.MemoryDatastore;class KadDHT extends EventEmitter$8{constructor(e,t){super(),assert$t(e,"libp2p-kad-dht requires a instance of Switch"),(t=t||{}).validators=t.validators||{},t.selectors=t.selectors||{},this.switch=e,this.kBucketSize=t.kBucketSize||constants$d.K,this.concurrency=t.concurrency||constants$d.ALPHA,this.disjointPaths=Math.ceil(this.kBucketSize/2),this.routingTable=new routing(this.peerInfo.id,this.kBucketSize),this.datastore=t.datastore||new MemoryStore,this.providers=new providers$1(this.datastore,this.peerInfo.id),this.validators={pk:src$S.validator.validators.pk,...t.validators},this.selectors={pk:src$S.selection.selectors.pk,...t.selectors},this.network=new network$1(this),this._log=utils$E.logger(this.peerInfo.id);const r=_private(this);Object.keys(r).forEach(e=>{this[e]=r[e]}),this.randomWalk=new randomWalk(this,t.randomWalk),this._queryManager=new queryManager}get isStarted(){return this._running}start(e){this._running=!0,this._queryManager.start(),this.network.start(t=>{if(t)return e(t);this.randomWalk.start(),e()})}stop(e){this._running=!1,this.randomWalk.stop(),this.providers.stop(),this._queryManager.stop(),this.network.stop(e)}get peerInfo(){return this.switch._peerInfo}get peerBook(){return this.switch._peerBook}put(e,t,r,n){"function"==typeof r?(n=r,r={}):r=r||{},this._log("PutValue %b",e),waterfall([r=>utils$E.createPutRecord(e,t,r),(t,n)=>waterfall([r=>this._putLocal(e,t,r),t=>this.getClosestPeers(e,{shallow:!0},t),(n,i)=>{r.minPeers=r.minPeers||n.length,filter$4(n,(r,n)=>{this._putValueToPeer(e,t,r,e=>{if(e)return this._log.error("Failed to put to peer (%b): %s",r.id,e),n(null,!1);n(null,!0)})},(e,t)=>{if(e)return i(e);if(r.minPeers>t.length){const e=errCode(new Error("Failed to put value to enough peers"),"ERR_NOT_ENOUGH_PUT_PEERS");return this._log.error(e),i(e)}i()})}],n)],n)}get(e,t,r){"function"==typeof t?(r=t,t={}):t=t||{},t.maxTimeout||t.timeout?t.maxTimeout&&!t.timeout&&(t.timeout=t.maxTimeout):t.timeout=constants$d.minute,this._get(e,t,r)}getMany(e,t,r,n){"function"==typeof r?(n=r,r={}):r=r||{},r.maxTimeout||r.timeout?r.maxTimeout&&!r.timeout&&(r.timeout=r.maxTimeout):r.timeout=constants$d.minute,this._log("getMany %b (%s)",e,t);let i=[];this._getLocal(e,(o,s)=>{if(o&&0===t)return n(o);if(null==o&&i.push({val:s.value,from:this.peerInfo.id}),i.length>=t)return n(null,i);const a=[];waterfall([t=>utils$E.convertBuffer(e,t),(n,o)=>{const s=this.routingTable.closestPeers(n,this.kBucketSize);if(this._log("peers in rt: %d",s.length),0===s.length){const e="Failed to lookup key! No peers from routing table!";return this._log.error(e),o(errCode(new Error(e),"ERR_NO_PEERS_IN_ROUTING_TABLE"))}const c=new query$1(this,e,(r,n)=>{const o=utils$E.pathSize(t-i.length,n),s=[];return a.push(s),(t,r)=>{this._getValueOrPeers(t,e,(e,n,i)=>{if(e&&"ERR_INVALID_RECORD"!==e.code)return r(e);const a={closerPeers:i};(n&&n.value||e&&"ERR_INVALID_RECORD"===e.code)&&s.push({val:n&&n.value,from:t}),s.length>=o&&(a.pathComplete=!0),r(null,a)})}});timeout_1(e=>{promiseToCallback(c.run(s))(e)},r.timeout)((e,t)=>{c.stop(),o(e,t)})}],e=>{if(i=[].concat.apply(i,a).slice(0,t),e&&0===i.length)return n(e);n(null,i)})})}getClosestPeers(e,t,r){this._log("getClosestPeers to %b",e),"function"==typeof t&&(r=t,t={shallow:!1}),utils$E.convertBuffer(e,(n,i)=>{if(n)return r(n);const o=this.routingTable.closestPeers(i,this.kBucketSize),s=new query$1(this,e,()=>(r,n)=>{waterfall([t=>this._closerPeersSingle(e,r,t),(e,r)=>{r(null,{closerPeers:e,pathComplete:!!t.shallow||void 0})}],n)});promiseToCallback(s.run(o))((e,t)=>e?r(e):t&&t.finalSet?void waterfall([e=>utils$E.sortClosestPeers(Array.from(t.finalSet),i,e),(e,t)=>t(null,e.slice(0,this.kBucketSize))],r):r(null,[]))})}getPublicKey(e,t){let r;if(this._log("getPublicKey %s",e.toB58String()),this.peerBook.has(e)){if((r=this.peerBook.get(e))&&r.id.pubKey)return this._log("getPublicKey: found local copy"),t(null,r.id.pubKey)}else r=this.peerBook.put(new src$t(e));this._getPublicKeyFromNode(e,(n,i)=>{if(!n)return r.id=new src$s(e.id,null,i),this.peerBook.put(r),t(null,i);const o=utils$E.keyForPublicKey(e);this.get(o,(n,i)=>{if(n)return t(n);const o=src$u.unmarshalPublicKey(i);r.id=new src$s(e,null,o),this.peerBook.put(r),t(null,o)})})}findPeerLocal(e,t){this._log("findPeerLocal %s",e.toB58String()),this.routingTable.find(e,(e,r)=>e?t(e):r&&this.peerBook.has(r)?void t(null,this.peerBook.get(r)):t())}provide(e,t){this._log("provide: %s",e.toBaseEncodedString());const r=[];waterfall([t=>this.providers.addProvider(e,this.peerInfo.id,t),t=>this.getClosestPeers(e.buffer,t),(t,n)=>{const i=new message$2(message$2.TYPES.ADD_PROVIDER,e.buffer,0);i.providerPeers=[this.peerInfo],each(t,(t,n)=>{this._log("putProvider %s to %s",e.toBaseEncodedString(),t.toB58String()),this.network.sendMessage(t,i,e=>{e&&r.push(e),n()})},n)}],e=>{r.length&&(e=errCode(`Failed to provide to ${r.length} of ${this.kBucketSize} peers`,"ERR_SOME_PROVIDES_FAILED",{errors:r})),t(e)})}findProviders(e,t,r){"function"==typeof t?(r=t,t={}):t=t||{},t.maxTimeout||t.timeout?t.maxTimeout&&!t.timeout&&(t.timeout=t.maxTimeout):t.timeout=constants$d.minute,t.maxNumProviders=t.maxNumProviders||constants$d.K,this._log("findProviders %s",e.toBaseEncodedString()),this._findNProviders(e,t.timeout,t.maxNumProviders,r)}findPeer(e,t,r){"function"==typeof t?(r=t,t={}):t=t||{},t.maxTimeout||t.timeout?t.maxTimeout&&!t.timeout&&(t.timeout=t.maxTimeout):t.timeout=constants$d.minute,this._log("findPeer %s",e.toB58String()),this.findPeerLocal(e,(n,i)=>n?r(n):null!=i?(this._log("found local"),r(null,i)):void waterfall([t=>utils$E.convertPeerId(e,t),(r,n)=>{const i=this.routingTable.closestPeers(r,this.kBucketSize);if(0===i.length)return n(errCode(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED"));if(i.find(t=>t.isEqual(e))&&this.peerBook.has(e))return this._log("found in peerbook"),n(null,this.peerBook.get(e));const o=new query$1(this,e.id,()=>(t,r)=>{waterfall([r=>this._findPeerSingle(t,e,r),(t,r)=>{const n=t.closerPeers.find(t=>t.id.isEqual(e));if(n)return r(null,{peer:n,queryComplete:!0});r(null,{closerPeers:t.closerPeers})}],r)});timeout_1(e=>{promiseToCallback(o.run(i))(e)},t.timeout)((e,t)=>{o.stop(),n(e,t)})},(t,r)=>{let n=!1;if(t.paths.forEach(e=>{e.success&&(n=!0,this.peerBook.put(e.peer))}),this._log("findPeer %s: %s",e.toB58String(),n),!n)return r(errCode(new Error("No peer found"),"ERR_NOT_FOUND"));r(null,this.peerBook.get(e))}],r))}_peerDiscovered(e){this.emit("peer",e)}}var src$1d=KadDHT;function abortable(e){var t,r,n=!1,i=!1;function o(){if(e)return e(n&&!0!==n?n:i&&!0!==i?i:null)}function s(){i=i||!0,function(e){o();var r=t;t=null,r&&r(n||i)}(),r&&r(n,function(e){t&&t(e||n)})}function a(e){return r=e,function(r,s){if(t=s,r&&(n=r),i)return s(i);n||e(r,function(s,a){if(n)return!r&&e(n,function(){});if(t){var c=t;t=null,s?(i=n||s,o(),c(n||s)):c(n||s,a)}})}}return a.abort=function(e){i||(n=e||!0,s())},a}var pullAbortable=abortable,s$j=1e3,m$h=60*s$j,h$f=60*m$h,d$f=24*h$f,w$e=7*d$f,y$f=365.25*d$f,ms$f=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$l(e);if("number"===r&&isFinite(e))return t.long?fmtLong$f(e):fmtShort$f(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$l(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$f;case"weeks":case"week":case"w":return r*w$e;case"days":case"day":case"d":return r*d$f;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$f;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$h;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$j;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$f(e){var t=Math.abs(e);return t>=d$f?Math.round(e/d$f)+"d":t>=h$f?Math.round(e/h$f)+"h":t>=m$h?Math.round(e/m$h)+"m":t>=s$j?Math.round(e/s$j)+"s":e+"ms"}function fmtLong$f(e){var t=Math.abs(e);return t>=d$f?plural$f(e,t,d$f,"day"):t>=h$f?plural$f(e,t,h$f,"hour"):t>=m$h?plural$f(e,t,m$h,"minute"):t>=s$j?plural$f(e,t,s$j,"second"):e+" ms"}function plural$f(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$d(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$f,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$k=setup$d,browser$g=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$k(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$g=browser$g.log,browser_2$g=browser$g.formatArgs,browser_3$g=browser$g.save,browser_4$g=browser$g.load,browser_5$g=browser$g.useColors,browser_6$g=browser$g.storage,browser_7$g=browser$g.colors,node$j=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$k(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$g=node$j.init,node_2$g=node$j.log,node_3$g=node$j.formatArgs,node_4$g=node$j.save,node_5$g=node$j.load,node_6$g=node$j.useColors,node_7$g=node$j.colors,node_8$g=node$j.inspectOpts,src$1e=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$g:e.exports=node$j}),codec$2="/mplex/6.7.0",pullThrough=function(e,t){return function(r){var n,i,o=[];function s(e){o.push(e)}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var a,c={emit:function(e,t){"data"==e&&s(t),"end"==e&&(n=!0,s(null)),"error"==e&&(i=t)},queue:s};return function(s,u){if(n=n||s,s)return r(s,function(){if(a){var e=a;a=null,e(s)}u(s)});a=u,looper_1(function s(f){if(a)if(u=a,i)a=null,u(i);else if(o.length){var l=o.shift();a=null,u(null===l,l)}else r(n,function(o,l){if(o&&!0!==o)return i=o,f();if(n=n||o)t.call(c);else if(null!==l&&(e.call(c,l),i||n))return r(i||n,function(){a=null,u(i||n)});f(s)})})}}},looper=function(e){var t=!1,r=0;return function(){if(r=!0,!t){for(t=!0;r;)r=!1,e();t=!1}}};function emitStream(e,t,r){e.emit("stream",t,r)}function emitError(e,t){e.emit("error",t)}var emitError_1=emitError,emitStream_1=emitStream,util$a={emitError:emitError_1,emitStream:emitStream_1},Types$1={NEW:0,IN_MESSAGE:1,OUT_MESSAGE:2,IN_CLOSE:3,OUT_CLOSE:4,IN_RESET:5,OUT_RESET:6},MAX_MSG_SIZE=1<<20,consts={Types:Types$1,MAX_MSG_SIZE:MAX_MSG_SIZE};const{Types:Types$2}=consts,{emitError:emitError$1}=util$a,log$i=src$1e("pull-plex:chan");function channelSink(e){return function(t){const r=looper(function(){t(null,function(t,n){if(!e._endedLocal){if(e._endedLocal=t||!1,!0===t)return e.endChan();if(t||e._destroy)return e.destroyChan(),e.emit("error",t||e._destroy),void e.destroy();e.sendMsg(n),r()}})});r()}}log$i.err=src$1e("pull-plex:chan:err");class Channel extends events$1{constructor(e){super(),e={initiator:!1,...e},this._id=e.id,this._name=e.name,this._plex=e.plex,this._open=e.open,this._initiator=e.initiator,this._endedRemote=!1,this._endedLocal=!1,this._destroy=!1,this.MSG=this._initiator?Types$2.OUT_MESSAGE:Types$2.IN_MESSAGE,this.END=this._initiator?Types$2.OUT_CLOSE:Types$2.IN_CLOSE,this.RESET=this._initiator?Types$2.OUT_RESET:Types$2.IN_RESET,this._log("new channel",this._name),this._msgs=pullPushable_1(e=>{this._log("source closed",e),e&&"boolean"!=typeof e&&nextTick(emitError$1,this,e)}),this._source=this._msgs,this.sink=channelSink(this)}get source(){return this._source}get id(){return this._id}get open(){return this._open}set open(e){this._open=e}get name(){return this._name}get destroyed(){return this._endedRemote&&this._endedLocal}_log(e,t){log$i.enabled&&log$i({op:e,name:this._name,id:this._id,endedLocal:this._endedLocal,endedRemote:this._endedRemote,initiator:this._initiator,data:t&&t.toString()||""})}push(e){this._log("push"),this._msgs.push(e)}close(e){this._log("close",e),this._endedRemote||(this._endedRemote=e||!0,this._msgs.end(this._endedRemote),this.emit("close",e),this.plex=null)}destroy(e){this._log("destroy",e),this._destroy=e||"channel destroyed!",this.close(this._destroy)}openChan(e){this.open||(this.open=!0,this._plex.push([this._id,Types$2.NEW,e!==this._id.toString()?e:this._id.toString()]))}sendMsg(e){this._log("sendMsg",e),this.open||this.openChan(this.name),this._plex.push([this._id,this.MSG,e])}endChan(){this._log("endChan"),this.open&&this._plex.push([this._id,this.END])}destroyChan(){this._log("destroyChan"),this.open&&this._plex.push([this._id,this.RESET])}}var channel=Channel;const log$j=src$1e("pull-plex:coder");log$j.err=src$1e("pull-plex:coder:err");const PULL_LENGTH=10240,empty$5=Buffer.alloc(0);var encode$8=()=>{let e=Buffer.allocUnsafe(10240),t=0;return pullThrough(function(r){const n=t;varint.encode(r[0]<<3|r[1],e,t),t+=varint.encode.bytes,varint.encode(r[2]?r[2].length:0,e,t),t+=varint.encode.bytes,this.queue(e.slice(n,t)),10240-t<100&&(e=Buffer.allocUnsafe(10240),t=0),this.queue(r[2]?r[2]:empty$5)})};const States={PARSING:0,READING:1};var decode$9=()=>{let e=States.PARSING;const t=t=>{const[r,n,i]=(e=>{let t=0,r=0;try{let n=varint.decode(e);return t+=varint.decode.bytes,r=varint.decode(e,t),[n,t+=varint.decode.bytes,r]}catch(e){log$j.err(e)}return[]})(t);if(void 0!==r){const o={id:r>>3,type:7&r,data:[]};return e=States.READING,[t.slice(n),o,i]}return[t]},r=(t,r,n)=>{if(n<=0)return e=States.PARSING,[0,t,r];let i=n-t.length;i<0&&(i=0);const o=n-i;if(t.length>0){const e=Buffer.isBuffer(t)?t:Buffer.from(t);r.push(e.slice(0,o))}return i<=0&&(e=States.PARSING),[i,t.slice(o),r]};let n=0,i=null,o=!1,s=[];return pullThrough(function(a){var c=this;!function u(){if(a&&a.length){if(States.PARSING===e){if(o&&(s.push(a),a=Buffer.concat(s)),[a,i,n]=t(a),!i)return o||s.push(a),void(o=!0);s=[],o=!1}States.READING===e&&([n,a,i.data]=r(a,i.data,n),n<=0&&States.PARSING===e&&(i.data=Buffer.concat(i.data),c.queue(i),i=null,n=0)),u()}}()})},coder={encode:encode$8,decode:decode$9};const{emitError:emitError$2,emitStream:emitStream$1}=util$a,{Types:Types$3,MAX_MSG_SIZE:MAX_MSG_SIZE$1}=consts,log$k=src$1e("pull-plex");log$k.err=src$1e("pull-plex:err");class Mplex extends events$1{constructor(e){super(),"boolean"==typeof e&&(e={initiator:e}),e={initiator:!0,onChan:null,maxChannels:1e4,maxMsgSize:MAX_MSG_SIZE$1,lazy:!1,...e},this._maxChannels=e.maxChannels,this._maxMsgSize=e.maxMsgSize,this._lazy=e.lazy,this._initiator=Boolean(e.initiator),this._chanId=0,this._inChannels=new Array(this._maxChannels/2),this._outChannels=new Array(this._maxChannels/2),this._endedRemote=!1,this._endedLocal=!1,this._chandata=pullPushable_1(e=>{this._log("mplex ended"),this._endedRemote=!0,this.close(e)}),e.onChan&&this.on("stream",t=>e.onChan(t,t.id)),this.source=pullStream(this._chandata,coder.encode());const t=this;this.sink=pullStream(pullThrough(function(e){if(e&&e.length>=t._maxMsgSize)return nextTick(emitError$2,t,new Error("message too large!")),this.queue(null);this.queue(e)}),coder.decode(),e=>{const r=looper(()=>{e(null,(e,n)=>{if(!t._endedLocal){if(!0===e)return t.close();if(e)return t.destroy(e);t._handle(n),r()}})});r()})}_log(e,t){log$k({op:e,initiator:this._initiator,endedLocal:this._endedLocal,endedRemote:this._endedRemote,data:t&&t.toString()||""})}get initiator(){return this._initiator}close(e){if(this._log("close",e),this.destroyed)return;e&&nextTick(emitError$2,this,e),e=e||"Underlying stream has been closed",this._endedLocal=!0;const t=Array.prototype.concat(this._outChannels,this._inChannels);for(let r of t)r&&r.close(e);this.emit("close")}get destroyed(){return this._endedRemote&&this._endedLocal}destroy(e){e=e||new Error("Underlying stream has been closed"),this._chandata.end(e),this.close(e)}push(e){e.data&&Buffer.byteLength(e.data)>this._maxMsgSize&&this._chandata.end(new Error("message too large!")),this._chandata.push(e)}createStream(e){"number"==typeof e&&(e=e.toString());const t=this._newStream(null,!0,!1,e,this._outChannels);return this._lazy||t.openChan(e),t}_newStream(e,t,r,n,i){if(this.chanSize>=this._maxChannels)return void this.emit("error",new Error("max channels exceeded"));if("string"==typeof t&&(n=t,t=!1,r=!1),"string"==typeof r&&(n=r,r=!1),i[e="number"==typeof e?e:this._chanId++])return void this.emit("error",new Error(`channel with id ${e} already exist!`));const o=new channel({id:e,name:n,plex:this,initiator:t,open:r||!1});return this._addChan(e,o,i)}_addChan(e,t,r){return t.once("close",()=>{r[e]=null}),t.once("error",e=>{log$k.err("channel error",e)}),r[e]=t,t}get chanSize(){return this._inChannels.size+this._outChannels.size}_handle(e){this._log("_handle",e);const{id:t,type:r,data:n}=e;switch(r){case Types$3.NEW:{const e=this._newStream(t,!1,!0,n.toString(),this._inChannels);nextTick(emitStream$1,this,e,t);break}case Types$3.OUT_MESSAGE:case Types$3.IN_MESSAGE:{const e=(1&r?this._outChannels:this._inChannels)[t];e&&e.push(n);break}case Types$3.OUT_CLOSE:case Types$3.IN_CLOSE:{const e=(1&r?this._outChannels:this._inChannels)[t];e&&e.close();break}case Types$3.OUT_RESET:case Types$3.IN_RESET:{const e=(1&r?this._outChannels:this._inChannels)[t];e&&e.destroy();break}default:nextTick(emitError$2,this,new Error("Invalid message type"))}}}var mplex=Mplex;const EventEmitter$9=events$1.EventEmitter,Connection$7=src$T.Connection,log$l=src$1e("libp2p-mplex:muxer");function noop$c(){}log$l.err=src$1e("libp2p-mplex:muxer:error");class MultiplexMuxer extends EventEmitter$9{constructor(e,t){super(),this.conn=e,this.multiplex=t,this.multicodec=codec$2,t.on("close",()=>this.emit("close")),t.on("error",e=>this.emit("error",e)),t.on("stream",e=>{e.on("error",e=>{log$l.err("receiver stream errored",e)}),this.emit("stream",new Connection$7(e,this.conn))})}newStream(e){e=e||noop$c;let t=this.multiplex.createStream();t.on("error",e=>{log$l.err("initiator stream errored",e)});const r=new Connection$7(t,this.conn);return nextTick(e,null,r),r}end(e){if(e=e||noop$c,this.multiplex.destroyed)return nextTick(e);this.multiplex.once("close",e),this.multiplex.close()}}var muxer=MultiplexMuxer,src$1f=createCommonjsModule(function(e,t){const r=src$1e("pull-plex");function n(e,t){const n=new mplex(!t),i=pullAbortable();pullStream(e,n,i,e);const o=new muxer(e,n);return o.once("error",e=>{r.err("got error",e),i.abort(e)}),o.on("close",()=>{r("closing muxer"),i.abort()}),o}r.err=src$1e("pull-plex:err"),(t=e.exports=n).pullMplex=mplex,t.multicodec=codec$2,t.dialer=e=>n(e,!1),t.listener=e=>n(e,!0)}),src_1$b=src$1f.pullMplex,src_2$9=src$1f.multicodec,src_3$9=src$1f.dialer,src_4$9=src$1f.listener,s$k=1e3,m$i=60*s$k,h$g=60*m$i,d$g=24*h$g,w$f=7*d$g,y$g=365.25*d$g,ms$g=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$m(e);if("number"===r&&isFinite(e))return t.long?fmtLong$g(e):fmtShort$g(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$m(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$g;case"weeks":case"week":case"w":return r*w$f;case"days":case"day":case"d":return r*d$g;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$g;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$i;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$k;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$g(e){var t=Math.abs(e);return t>=d$g?Math.round(e/d$g)+"d":t>=h$g?Math.round(e/h$g)+"h":t>=m$i?Math.round(e/m$i)+"m":t>=s$k?Math.round(e/s$k)+"s":e+"ms"}function fmtLong$g(e){var t=Math.abs(e);return t>=d$g?plural$g(e,t,d$g,"day"):t>=h$g?plural$g(e,t,h$g,"hour"):t>=m$i?plural$g(e,t,m$i,"minute"):t>=s$k?plural$g(e,t,s$k,"second"):e+" ms"}function plural$g(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$e(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$g,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$l=setup$e,browser$h=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$l(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$h=browser$h.log,browser_2$h=browser$h.formatArgs,browser_3$h=browser$h.save,browser_4$h=browser$h.load,browser_5$h=browser$h.useColors,browser_6$h=browser$h.storage,browser_7$h=browser$h.colors,node$k=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$l(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$h=node$k.init,node_2$h=node$k.log,node_3$h=node$k.formatArgs,node_4$h=node$k.save,node_5$h=node$k.load,node_6$h=node$k.useColors,node_7$h=node$k.colors,node_8$h=node$k.inspectOpts,src$1g=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$h:e.exports=node$k}),sha3$9=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),toCallback$k=e=>(function(t,r){let n;try{n=e(t)}catch(e){return void process.nextTick(r,e)}process.nextTick(r,null,n)}),toBuf$a=(e,t)=>r=>{let n=e(r,t);return Buffer.from(n,"hex")},fromString$c=(e,t)=>r=>{const n=Buffer.isBuffer(r)?r.toString():r;return e(n,t)},fromNumberTo32BitBuf$g=(e,t)=>r=>{let n=e(r,t);const i=new Array(4);for(let e=0;e<4;e++)i[e]=255&n,n>>=8;return Buffer.from(i)},utils$F={toCallback:toCallback$k,toBuf:toBuf$a,fromString:fromString$c,fromNumberTo32BitBuf:fromNumberTo32BitBuf$g};const toCallback$l=utils$F.toCallback,sha1$8=toCallback$l(e=>crypto$l.createHash("sha1").update(e).digest()),sha2256$5=toCallback$l(e=>crypto$l.createHash("sha256").update(e).digest()),sha2512$5=toCallback$l(e=>crypto$l.createHash("sha512").update(e).digest());var cryptoSha12$5={sha1:sha1$8,sha2256:sha2256$5,sha2512:sha2512$5};const toCallback$m=utils$F.toCallback,minB$8=45569,minS$8=45633,blake2b$9={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$9={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$8=(e,t)=>toCallback$m(r=>{const n=t.init(e,null);return t.update(n,r),Buffer.from(t.digest(n))});var blake_1$8=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$8(t+1,blake2b$9);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$8(t+1,blake2s$9)};const toCallback$n=utils$F.toCallback,toBuf$b=utils$F.toBuf,fromString$d=utils$F.fromString,fromNumberTo32BitBuf$h=utils$F.fromNumberTo32BitBuf,dblSha2256$5=(e,t)=>{cryptoSha12$5.sha2256(e,(e,r)=>{e&&t(e),cryptoSha12$5.sha2256(Buffer.from(r),t)})};var crypto$c={sha1:cryptoSha12$5.sha1,sha2256:cryptoSha12$5.sha2256,sha2512:cryptoSha12$5.sha2512,sha3512:toCallback$n(toBuf$b(sha3$9.sha3_512)),sha3384:toCallback$n(toBuf$b(sha3$9.sha3_384)),sha3256:toCallback$n(toBuf$b(sha3$9.sha3_256)),sha3224:toCallback$n(toBuf$b(sha3$9.sha3_224)),shake128:toCallback$n(toBuf$b(sha3$9.shake_128,128)),shake256:toCallback$n(toBuf$b(sha3$9.shake_256,256)),keccak224:toCallback$n(toBuf$b(sha3$9.keccak_224)),keccak256:toCallback$n(toBuf$b(sha3$9.keccak_256)),keccak384:toCallback$n(toBuf$b(sha3$9.keccak_384)),keccak512:toCallback$n(toBuf$b(sha3$9.keccak_512)),murmur3128:toCallback$n(toBuf$b(fromString$d(murmurhash3js.x64.hash128))),murmur332:toCallback$n(fromNumberTo32BitBuf$h(fromString$d(murmurhash3js.x86.hash32))),addBlake:blake_1$8,dblSha2256:dblSha2256$5},src$1h=Multihashing$8;function Multihashing$8(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");Multihashing$8.digest(e,t,r,(e,i)=>{if(e)return n(e);n(null,src.encode(i,t,r))})}Multihashing$8.Buffer=Buffer,Multihashing$8.multihash=src,Multihashing$8.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=Multihashing$8.createHash(t)}catch(e){return o(e)}i(e,o)},Multihashing$8.createHash=function(e){if(e=src.coerceCode(e),!Multihashing$8.functions[e])throw new Error("multihash function "+e+" not yet supported");return Multihashing$8.functions[e]},Multihashing$8.functions={17:crypto$c.sha1,18:crypto$c.sha2256,19:crypto$c.sha2512,20:crypto$c.sha3512,21:crypto$c.sha3384,22:crypto$c.sha3256,23:crypto$c.sha3224,24:crypto$c.shake128,25:crypto$c.shake256,26:crypto$c.keccak224,27:crypto$c.keccak256,28:crypto$c.keccak384,29:crypto$c.keccak512,34:crypto$c.murmur3128,35:crypto$c.murmur332,86:crypto$c.dblSha2256},crypto$c.addBlake(Multihashing$8.functions);var support=createCommonjsModule(function(e,t){t.exchanges=["P-256","P-384","P-521"],t.ciphers=["AES-256","AES-128"],t.hashes=["SHA256","SHA512"],t.theBest=(e,t,r)=>{let n,i;if(e<0)n=r,i=t;else{if(!(e>0))return t[0];n=t,i=r}for(let e of n)for(let t of i)if(e===t)return e;throw new Error("No algorithms in common!")},t.makeMacAndCipher=(e,t)=>{parallel$1([t=>(function(e,t,r){src$u.hmac.create(e,t,r)})(e.hashT,e.keys.macKey,t),t=>(function(e,t,r,n){if("AES-128"===e||"AES-256"===e)return src$u.aes.create(r,t,n);n(new Error(`unrecognized cipher type: ${e}`))})(e.cipherT,e.keys.iv,e.keys.cipherKey,t)],(r,n)=>{if(r)return t(r);e.mac=n[0],e.cipher=n[1],t()})},t.selectBest=(e,r,n)=>{t.digest(Buffer.concat([r.pubKeyBytes,e.nonce]),(i,o)=>{if(i)return n(i);t.digest(Buffer.concat([e.pubKeyBytes,r.nonce]),(i,s)=>{if(i)return n(i);const a=Buffer.compare(o,s);if(0===a)return n(new Error("you are trying to talk to yourself"));n(null,{curveT:t.theBest(a,e.exchanges,r.exchanges),cipherT:t.theBest(a,e.ciphers,r.ciphers),hashT:t.theBest(a,e.hashes,r.hashes),order:a})})})},t.digest=(e,t)=>{src$1h.digest(e,"sha2-256",e.length,t)},t.write=function(e,t,r){r=r||(()=>{}),pull(values([t]),src$M.encode({fixed:!0,bytes:4}),collect((t,n)=>{if(t)return r(t);e.shake.write(n[0]),r()}))},t.read=function(e,t){src$M.decodeFromReader(e,{fixed:!0,bytes:4},t)}}),support_1=support.exchanges,support_2=support.ciphers,support_3=support.hashes,support_4=support.theBest,support_5=support.makeMacAndCipher,support_6=support.selectBest,support_7=support.digest,support_8=support.write,support_9=support.read,secio_proto="message Propose {\n  optional bytes rand = 1;\n  optional bytes pubkey = 2;\n  optional string exchanges = 3;\n  optional string ciphers = 4;\n  optional string hashes = 5;\n}\n\nmessage Exchange {\n  optional bytes epubkey = 1;\n  optional bytes signature = 2;\n}";const log$m=src$1g("libp2p:secio");log$m.error=src$1g("libp2p:secio:error");const pbm$4=src$i(secio_proto),nonceSize=16;var createProposal=e=>(e.proposal.out={rand:src$u.randomBytes(16),pubkey:e.key.local.public.bytes,exchanges:support.exchanges.join(","),ciphers:support.ciphers.join(","),hashes:support.hashes.join(",")},e.proposalEncoded.out=pbm$4.Propose.encode(e.proposal.out),e.proposalEncoded.out),createExchange=(e,t)=>{src$u.keys.generateEphemeralKeyPair(e.protocols.local.curveT,(r,n)=>{if(r)return t(r);e.ephemeralKey.local=n.key,e.shared.generate=n.genSharedKey;const i=Buffer.concat([e.proposalEncoded.out,e.proposalEncoded.in,e.ephemeralKey.local]);e.key.local.sign(i,(r,n)=>{if(r)return t(r);e.exchange.out={epubkey:e.ephemeralKey.local,signature:n},t(null,pbm$4.Exchange.encode(e.exchange.out))})})},identify=(e,t,r)=>{log$m("1.1 identify"),e.proposalEncoded.in=t,e.proposal.in=pbm$4.Propose.decode(t);const n=e.proposal.in.pubkey;e.key.remote=src$u.keys.unmarshalPublicKey(n),src$s.createFromPubKey(n.toString("base64"),(t,n)=>{if(t)return r(t);if(e.id.remote){if(e.id.remote.toB58String()!==n.toB58String())return r(new Error("dialed to the wrong peer, Ids do not match"))}else e.id.remote=n;log$m("1.1 identify - %s - identified remote peer as %s",e.id.local.toB58String(),e.id.remote.toB58String()),r()})},selectProtocols=(e,t)=>{log$m("1.2 selection");const r={pubKeyBytes:e.key.local.public.bytes,exchanges:support.exchanges,hashes:support.hashes,ciphers:support.ciphers,nonce:e.proposal.out.rand},n={pubKeyBytes:e.proposal.in.pubkey,exchanges:e.proposal.in.exchanges.split(","),hashes:e.proposal.in.hashes.split(","),ciphers:e.proposal.in.ciphers.split(","),nonce:e.proposal.in.rand};support.selectBest(r,n,(r,n)=>{if(r)return t(r);e.protocols.remote={order:n.order,curveT:n.curveT,cipherT:n.cipherT,hashT:n.hashT},e.protocols.local={order:n.order,curveT:n.curveT,cipherT:n.cipherT,hashT:n.hashT},t()})},verify=(e,t,r)=>{log$m("2.1. verify"),e.exchange.in=pbm$4.Exchange.decode(t),e.ephemeralKey.remote=e.exchange.in.epubkey;const n=Buffer.concat([e.proposalEncoded.in,e.proposalEncoded.out,e.ephemeralKey.remote]);e.key.remote.verify(n,e.exchange.in.signature,(e,t)=>e?r(e):t?(log$m("2.1. verify - signature verified"),void r()):r(new Error("Bad signature")))},generateKeys=(e,t)=>{log$m("2.2. keys"),waterfall([t=>e.shared.generate(e.exchange.in.epubkey,t),(t,r)=>{e.shared.secret=t,src$u.keys.keyStretcher(e.protocols.local.cipherT,e.protocols.local.hashT,e.shared.secret,r)},(t,r)=>{if(e.protocols.local.order>0)e.protocols.local.keys=t.k1,e.protocols.remote.keys=t.k2;else{if(!(e.protocols.local.order<0))return r(new Error("you are trying to talk to yourself"));e.protocols.local.keys=t.k2,e.protocols.remote.keys=t.k1}log$m("2.3. mac + cipher"),parallel$1([t=>support.makeMacAndCipher(e.protocols.local,t),t=>support.makeMacAndCipher(e.protocols.remote,t)],r)}],t)},verifyNonce=(e,t)=>{const r=e.proposal.out.rand;if(!r.equals(t))throw new Error(`Failed to read our encrypted nonce: ${r.toString("hex")} != ${t.toString("hex")}`)},crypto_1={createProposal:createProposal,createExchange:createExchange,identify:identify,selectProtocols:selectProtocols,verify:verify,generateKeys:generateKeys,verifyNonce:verifyNonce};const log$n=src$1g("libp2p:secio");log$n.error=src$1g("libp2p:secio:error");var propose=function(e,t){log$n("1. propose - start"),log$n("1. propose - writing proposal"),support.write(e,crypto_1.createProposal(e)),waterfall([t=>support.read(e.shake,t),(t,r)=>{log$n("1. propose - reading proposal",t),crypto_1.identify(e,t,r)},t=>crypto_1.selectProtocols(e,t)],e=>{if(e)return t(e);log$n("1. propose - finish"),t()})};const log$o=src$1g("libp2p:secio");log$o.error=src$1g("libp2p:secio:error");var exchange=function(e,t){log$o("2. exchange - start"),log$o("2. exchange - writing exchange"),waterfall([t=>crypto_1.createExchange(e,t),(t,r)=>{support.write(e,t),support.read(e.shake,r)},(t,r)=>{log$o("2. exchange - reading exchange"),crypto_1.verify(e,t,r)},t=>crypto_1.generateKeys(e,t)],e=>{if(e)return t(e);log$o("2. exchange - finish"),t()})};function abortAll(e,t,r){var n=e.length;if(!n)return r(t);function i(){--n||r(t)}e.forEach(function(e){e?e(t,i):i()}),n||i()}var pullCat=function(e){return function(t,r){!function n(){t?abortAll(e,t,r):e.length?e[0]?e[0](null,function(t,i){t?(e.shift(),!0===t?n():abortAll(e,t,r)):r(null,i)}):(e.shift(),n()):r(!0)}()}},pullPair=function(){var e,t;return{source:function(r,n){e?e(r,n):t=[r,n]},sink:function(r){if("function"!=typeof r)throw new Error("read must be function");if(e)throw new Error("already piped");if(e=r,t){var n=t;t=null,e.apply(null,n)}}}};function once$4(e){var t=0;return function(r,n,i){t++||e(r,n,i)}}function isFunction$6(e){return"function"==typeof e}var pullHandshake=function(e,t){isFunction$6(e)&&(t=e,e={}),t=once$4(t||function(){});var r=pullReader(e&&e.timeout||5e3),n=pullPushable_1(function(e){e&&t(e)}),i=pullPair();return{handshake:{read:r.read,abort:function(e){n.end(e),r.abort(e,function(e){}),t(e)},write:n.push,rest:function(){return n.end(),{source:r.read(),sink:i.sink}}},sink:r,source:pullCat([n,i.source])}};const lpOpts={fixed:!0,bytes:4};var createBoxStream=(e,t)=>pull(ensureBuffer(),asyncMap((r,n)=>{e.encrypt(r,(e,r)=>{if(e)return n(e);t.digest(r,(e,t)=>{if(e)return n(e);n(null,Buffer.concat([r,t]))})})}),src$M.encode(lpOpts)),createUnboxStream=(e,t)=>pull(ensureBuffer(),src$M.decode(lpOpts),asyncMap((r,n)=>{const i=r.length,o=t.length;if(i<o)return n(new Error(`buffer (${i}) shorter than MAC size (${o})`));const s=i-o,a=r.slice(0,s),c=r.slice(s);t.digest(a,(t,r)=>t?n(t):c.equals(r)?void e.decrypt(a,(e,t)=>{if(e)return n(e);n(null,t)}):n(new Error(`MAC Invalid: ${c.toString("hex")} != ${r.toString("hex")}`)))}));function ensureBuffer(){return map$3(e=>"string"==typeof e?Buffer.from(e,"utf-8"):e)}var etm={createBoxStream:createBoxStream,createUnboxStream:createUnboxStream};const log$p=src$1g("libp2p:secio");log$p.error=src$1g("libp2p:secio:error");var finish$1=function(e,t){log$p("3. finish - start");const r=e.protocols,n=e.shake.rest(),i=pullHandshake({timeout:e.timeout},e=>{if(e)throw e});pull(n,etm.createUnboxStream(r.remote.cipher,r.remote.mac),i,etm.createBoxStream(r.local.cipher,r.local.mac),n),i.handshake.write(e.proposal.in.rand),i.handshake.read(e.proposal.in.rand.length,(r,n)=>{const o=r=>{log$p.error(r),e.secure.resolve({source:error(r),sink(e){}}),t(r)};if(r)return o(r);try{crypto_1.verifyNonce(e,n)}catch(r){return o(r)}log$p("3. finish - finish"),e.secure.resolve(i.handshake.rest()),t()})},handshake=function(e,t){return series_1([t=>propose(e,t),t=>exchange(e,t),t=>finish$1(e,t)],r=>{e.cleanSecrets(),r&&(!0===r&&(r=new Error("Stream ended prematurely")),e.shake.abort(r)),t(r)}),e.stream},through$1=function(){var e,t,r,n,i;function o(o){return i?i(o):(e=o,function(e,i){t?t(e,i):(n=e,r=i)})}return o.resolve=function(o){if(i)throw new Error("already resolved");if(!(i=o))throw new Error("resolve *must* be passed a transform stream");e&&(t=i(e),r&&t(n,r))},o},source$2=source,through$2=through$1,sink$2=sink,duplex$2=duplex,pullDefer={source:source$2,through:through$2,sink:sink$2,duplex:duplex$2};class State{constructor(e,t,r,n){"function"==typeof r&&(n=r,r=void 0),this.setup(),this.id.local=e,this.id.remote=t,this.key.local=e.privKey,this.timeout=r||6e4,n=n||(()=>{}),this.secure=pullDefer.duplex(),this.stream=pullHandshake({timeout:this.timeout},n),this.shake=this.stream.handshake,delete this.stream.handshake}setup(){this.id={local:null,remote:null},this.key={local:null,remote:null},this.shake=null,this.cleanSecrets()}cleanSecrets(){this.shared={},this.ephemeralKey={local:null,remote:null},this.proposal={in:null,out:null},this.proposalEncoded={in:null,out:null},this.protocols={local:null,remote:null},this.exchange={in:null,out:null}}}var state$2=State;const Connection$8=src$T.Connection,log$q=src$1g("libp2p:secio");log$q.error=src$1g("libp2p:secio:error");var src$1i={tag:"/secio/1.0.0",encrypt(e,t,r,n){assert$t(e,"no local private key provided"),assert$t(t,"no connection for the handshake  provided"),"function"==typeof r&&(n=r,r=void 0),n=once_1$1(n||function(e){e&&log$q.error(e)});const i=new state$2(e,r,3e5,n);const o=new Connection$8(void 0,t);return pull(t,handshake(i,function(e){if(e)return n(e);t.getPeerInfo((e,r)=>{o.setInnerConn(new Connection$8(i.secure,t)),e&&o.setPeerInfo(new src$t(i.id.remote)),n()})}),t),o}},fsm=createCommonjsModule(function(e,t){function r(e,t){for(var r in e){t(e[r],r,e)}}function n(e){return Object.keys(e).sort()}function i(e,t){return~e.indexOf(t)}function o(e,t){return e.filter(function(e){return i(t,e)})}t.validate=function(e){return r(e,function(t,n){r(t,function(t,r){if(!e[t])throw new Error("invalid transition from state:"+n+" to state:"+t+" on event:"+r)})}),!0};var s=t.reachable=function(e){var t={},n=!1;do{n=!1,r(e,function(e,i){var o=t[i]=t[i]||{};r(e,function(e,t){o[e]||(o[e]=[t],n=!0)}),r(e,function(e,i){r(t[e],function(e,t){o[t]||(o[t]=[i].concat(e),n=!0)})})})}while(n);return t};t.terminal=t.deadlock=function(e){var t=[];return r(e,function(e,r){(function(e){for(var t in e)return!1;return!0})(e)&&t.push(r)}),t};t.livelock=function(e,t){var n=s(e),o=[];return r(n,function(e,n){i(t,n)||r(t,function(t){e[t]||i(o,n)||o.push(n)})}),o.sort()};function a(e){var t=[];return r(e,function(e,n){r(e,function(e,r){i(t,r)||t.push(r)})}),t.sort()}t.combine=function(e,t,r,s){var c,u,f={},l=a(e),d=a(t),h=(u=d,(c=l).filter(function(e){return!i(u,e)}).concat(u.filter(function(e){return!i(c,e)})).sort());return function r(i,s){var a,c=i+"-"+s;f[c]||(f[c]={}),a=f[c];var u=n(e[i]),l=n(t[s]);return o(u,l).forEach(function(n){a[n]=e[i][n]+"-"+t[s][n],f[a[n]]||r(e[i][n],t[s][n])}),o(h,u).forEach(function(t){a[t]=e[i][t]+"-"+s,f[a[t]]||r(e[i][t],s)}),o(h,l).forEach(function(e){a[e]=i+"-"+t[s][e],f[a[e]]||r(i,t[s][e])}),f[c]}(r,s),f}}),fsm_1=fsm.validate,fsm_2=fsm.reachable,fsm_3=fsm.terminal,fsm_4=fsm.deadlock,fsm_5=fsm.livelock,fsm_6=fsm.combine;const EventEmitter$a=events$1.EventEmitter;var fsmEvent_1=fsmEvent;function fsmEvent(e,t){"object"==typeof e&&(t=e,e="START"),assert$t.equal(typeof e,"string"),assert$t.equal(typeof t,"object"),assert$t.ok(t[e],"invalid starting state "+e),assert$t.ok(fsm.validate(t));const r=new EventEmitter$a;return n._graph=fsm.reachable(t),n._emitter=r,n._events=t,n._state=e,n.emit=n,n.on=function(e,t){r.on(e,t)},n;function n(e){const t=n._events[n._state][e];if(!reach(n._state,t,n._graph)){const t="invalid transition: "+n._state+" -> "+e;return r.emit("error",t)}const i=n._state+":leave",o=t+":enter";return n._state?void(r._events[i]?r.emit(i,s):s()):s();function s(){r._events[o]?r.emit(o,a):a()}function a(){n._state=t,r.emit(t),r.emit("done")}}}function reach(e,t,r){if(!t)return!1;if(!e)return!0;const n=r[e];return!(!n||!n[t])&&1===n[t].length}var s$l=1e3,m$j=60*s$l,h$h=60*m$j,d$h=24*h$h,w$g=7*d$h,y$h=365.25*d$h,ms$h=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$n(e);if("number"===r&&isFinite(e))return t.long?fmtLong$h(e):fmtShort$h(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$n(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$h;case"weeks":case"week":case"w":return r*w$g;case"days":case"day":case"d":return r*d$h;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$j;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$h(e){var t=Math.abs(e);return t>=d$h?Math.round(e/d$h)+"d":t>=h$h?Math.round(e/h$h)+"h":t>=m$j?Math.round(e/m$j)+"m":t>=s$l?Math.round(e/s$l)+"s":e+"ms"}function fmtLong$h(e){var t=Math.abs(e);return t>=d$h?plural$h(e,t,d$h,"day"):t>=h$h?plural$h(e,t,h$h,"hour"):t>=m$j?plural$h(e,t,m$j,"minute"):t>=s$l?plural$h(e,t,s$l,"second"):e+" ms"}function plural$h(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$f(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$h,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$m=setup$f,browser$i=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$m(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$i=browser$i.log,browser_2$i=browser$i.formatArgs,browser_3$i=browser$i.save,browser_4$i=browser$i.load,browser_5$i=browser$i.useColors,browser_6$i=browser$i.storage,browser_7$i=browser$i.colors,node$l=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$m(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$i=node$l.init,node_2$i=node$l.log,node_3$i=node$l.formatArgs,node_4$i=node$l.save,node_5$i=node$l.load,node_6$i=node$l.useColors,node_7$i=node$l.colors,node_8$i=node$l.inspectOpts,src$1j=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$i:e.exports=node$l}),protocol=src$i("\nmessage CircuitRelay {\n\n  enum Status {\n    SUCCESS                    = 100;\n    HOP_SRC_ADDR_TOO_LONG      = 220;\n    HOP_DST_ADDR_TOO_LONG      = 221;\n    HOP_SRC_MULTIADDR_INVALID  = 250;\n    HOP_DST_MULTIADDR_INVALID  = 251;\n    HOP_NO_CONN_TO_DST         = 260;\n    HOP_CANT_DIAL_DST          = 261;\n    HOP_CANT_OPEN_DST_STREAM   = 262;\n    HOP_CANT_SPEAK_RELAY       = 270;\n    HOP_CANT_RELAY_TO_SELF     = 280;\n    STOP_SRC_ADDR_TOO_LONG     = 320;\n    STOP_DST_ADDR_TOO_LONG     = 321;\n    STOP_SRC_MULTIADDR_INVALID = 350;\n    STOP_DST_MULTIADDR_INVALID = 351;\n    STOP_RELAY_REFUSED         = 390;\n    MALFORMED_MESSAGE          = 400;\n  }\n\n  enum Type { // RPC identifier, either HOP, STOP or STATUS\n    HOP = 1;\n    STOP = 2;\n    STATUS = 3;\n    CAN_HOP = 4;\n  }\n\n  message Peer {\n    required bytes id = 1;    // peer id\n    repeated bytes addrs = 2; // peer's known addresses\n  }\n\n  optional Type type = 1;     // Type of the message\n\n  optional Peer srcPeer = 2;  // srcPeer and dstPeer are used when Type is HOP or STATUS\n  optional Peer dstPeer = 3;\n\n  optional Status code = 4;   // Status code, used when Type is STATUS\n}\n"),utils$G=function(e){function t(e,t,r){return r=r||(()=>{}),e.write(protocol.CircuitRelay.encode({type:protocol.CircuitRelay.Type.STATUS,code:t})),r()}return{getB58String:function(e){let t=null;src$2.isMultiaddr(e)?t=src$2(e).getPeerId():src$t.isPeerInfo(e)&&(t=e.id.toB58String());return t},peerInfoFromMa:function(t){let r;if(src$t.isPeerInfo(t))r=t;else if(src$2.isMultiaddr(t)){const n=t.getPeerId();try{r=e._peerBook.get(n)}catch(e){r=new src$t(src$s.createFromB58String(n))}r.multiaddrs.add(t)}else if(src$s.isPeerId(t)){const n=t.toB58String();r=e._peerBook.has(n)?e._peerBook.get(n):t}return r},isPeerConnected:function(t){return e.muxedConns[t]||e.conns[t]},validateAddrs:function(e,r,n,i){try{e.dstPeer.addrs.forEach(e=>src$2(e))}catch(e){return t(r,n===protocol.CircuitRelay.Type.HOP?protocol.CircuitRelay.Status.HOP_DST_MULTIADDR_INVALID:protocol.CircuitRelay.Status.STOP_DST_MULTIADDR_INVALID),i(e)}try{e.srcPeer.addrs.forEach(e=>src$2(e))}catch(e){return t(r,n===protocol.CircuitRelay.Type.HOP?protocol.CircuitRelay.Status.HOP_SRC_MULTIADDR_INVALID:protocol.CircuitRelay.Status.STOP_SRC_MULTIADDR_INVALID),i(e)}return i(null)},writeResponse:t,peerIdFromId:function(e){return"string"==typeof e?src$s.createFromB58String(e):src$s.createFromBytes(e)}}},s$m=1e3,m$k=60*s$m,h$i=60*m$k,d$i=24*h$i,w$h=7*d$i,y$i=365.25*d$i,ms$i=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$o(e);if("number"===r&&isFinite(e))return t.long?fmtLong$i(e):fmtShort$i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$o(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$i;case"weeks":case"week":case"w":return r*w$h;case"days":case"day":case"d":return r*d$i;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$i;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$k;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$m;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$i(e){var t=Math.abs(e);return t>=d$i?Math.round(e/d$i)+"d":t>=h$i?Math.round(e/h$i)+"h":t>=m$k?Math.round(e/m$k)+"m":t>=s$m?Math.round(e/s$m)+"s":e+"ms"}function fmtLong$i(e){var t=Math.abs(e);return t>=d$i?plural$i(e,t,d$i,"day"):t>=h$i?plural$i(e,t,h$i,"hour"):t>=m$k?plural$i(e,t,m$k,"minute"):t>=s$m?plural$i(e,t,s$m,"second"):e+" ms"}function plural$i(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$g(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$i,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$n=setup$g,browser$j=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$n(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$j=browser$j.log,browser_2$j=browser$j.formatArgs,browser_3$j=browser$j.save,browser_4$j=browser$j.load,browser_5$j=browser$j.useColors,browser_6$j=browser$j.storage,browser_7$j=browser$j.colors,node$m=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$n(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$j=node$m.init,node_2$j=node$m.log,node_3$j=node$m.formatArgs,node_4$j=node$m.save,node_5$j=node$m.load,node_6$j=node$m.useColors,node_7$j=node$m.colors,node_8$j=node$m.inspectOpts,src$1k=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$j:e.exports=node$m});const log$r=src$1k("libp2p:circuit:stream-handler");log$r.err=src$1k("libp2p:circuit:error:stream-handler");class StreamHandler{constructor(e,t,r,n){this.conn=e,this.stream=null,this.shake=null,this.timeout=t||6e4,this.maxLength=n||4096,"function"==typeof t&&(this.timeout=r||6e4),this.stream=pullHandshake({timeout:this.timeout},t),this.shake=this.stream.handshake,pull(this.stream,e,this.stream)}isValid(){return this.conn&&this.shake&&this.stream}read(e){if(!this.isValid())return e(new Error("handler is not in a valid state"));src$M.decodeFromReader(this.shake,{maxLength:this.maxLength},(t,r)=>t?(log$r.err(t),e(t)):e(null,r))}write(e,t){if(t=t||(()=>{}),!this.isValid())return t(new Error("handler is not in a valid state"));pull(values([e]),src$M.encode(),collect((e,r)=>{if(e)return log$r.err(e),this.shake.abort(e),t(e);r.forEach(e=>this.shake.write(e)),t()}))}getRawConn(){return this.conn}rest(){const e=this.shake.rest();return this.conn=null,this.stream=null,this.shake=null,e}close(){this.isValid()&&pull(empty$2(),this.rest())}}var streamHandler=StreamHandler,multicodec={relay:"/libp2p/circuit/relay/0.1.0"};const Connection$9=src$T.Connection,log$s=src$1k("libp2p:circuit:dialer");log$s.err=src$1k("libp2p:circuit:error:dialer");class Dialer{constructor(e,t){this.swarm=e,this.relayPeers=new Map,this.relayConns=new Map,this.options=t,this.utils=utils$G(e)}_dialRelayHelper(e,t){return this.relayConns.has(e.id.toB58String())?t(null,this.relayConns.get(e.id.toB58String())):this._dialRelay(e,t)}dial(e,t){t=t||(()=>{});const r=e.toString();if(!r.includes("/p2p-circuit"))return log$s.err("invalid circuit address"),t(new Error("invalid circuit address"));const n=r.split("p2p-circuit"),i="/"===n[0]?null:src$2(n[0]),o=src$2(n[1]||n[0]),s=new Connection$9;return setImmediate$1(this._dialPeer.bind(this),o,i,(e,r)=>{if(e)return log$s.err(e),t(e);s.setInnerConn(r),t(null,s)}),s}canHop(e,t){t=once_1$1(t||(()=>{})),this._dialRelayHelper(e,(r,n)=>{if(r)return t(r);const i=new streamHandler(n);waterfall([e=>i.write(protocol.CircuitRelay.encode({type:protocol.CircuitRelay.Type.CAN_HOP}),e),e=>i.read(e)],(r,n)=>{if(r)return t(r);if(protocol.CircuitRelay.decode(n).code!==protocol.CircuitRelay.Status.SUCCESS){const r=new Error(`HOP not supported, skipping - ${this.utils.getB58String(e)}`);return log$s(r),t(r)}log$s("HOP supported adding as relay - %s",this.utils.getB58String(e)),this.relayPeers.set(this.utils.getB58String(e),e),i.close(),t()})})}_dialPeer(e,t,r){if("function"==typeof t&&(r=t,t=null),r||(r=()=>{}),e=src$2(e),t)return this._negotiateRelay(t,e,(e,t)=>e?(log$s.err("An error has occurred negotiating the relay connection",e),r(e)):r(null,t));{const t=Array.from(this.relayPeers.values());let n=i=>{if(!i){let e="no relay peers were found or all relays failed to dial";return log$s.err(e),r(e)}return this._negotiateRelay(i,e,(e,i)=>{if(e)return log$s.err(e),n(t.shift());r(null,i)})};n(t.shift())}}_negotiateRelay(e,t,r){t=src$2(t),e=this.utils.peerInfoFromMa(e);const n=this.swarm._peerInfo.multiaddrs.toArray();this._dialRelayHelper(e,(e,i)=>{if(e)return log$s.err(e),r(e);let o=new streamHandler(i);waterfall([e=>{let r;log$s("negotiating relay for peer %s",t.getPeerId());try{r=src$s.createFromB58String(t.getPeerId()).id}catch(t){return e(t)}o.write(protocol.CircuitRelay.encode({type:protocol.CircuitRelay.Type.HOP,srcPeer:{id:this.swarm._peerInfo.id.id,addrs:n.map(e=>e.buffer)},dstPeer:{id:r,addrs:[t.buffer]}}),e)},e=>o.read(e)],(e,t)=>{if(e)return r(e);const n=protocol.CircuitRelay.decode(t);return n.type!==protocol.CircuitRelay.Type.STATUS?r(new Error("Got invalid message type - "+`expected ${protocol.CircuitRelay.Type.STATUS} got ${n.type}`)):n.code!==protocol.CircuitRelay.Status.SUCCESS?r(new Error(`Got ${n.code} error code trying to dial over relay`)):void r(null,new Connection$9(o.rest()))})})}_dialRelay(e,t){t=once_1$1(t||(()=>{})),this.swarm.dial(e,multicodec.relay,once_1$1((e,r)=>{if(e)return log$s.err(e),t(e);t(null,r)}))}}var dialer=Dialer;const EE$7=events$1.EventEmitter,Connection$a=src$T.Connection,proto$1=protocol.CircuitRelay,log$t=src$1k("libp2p:circuit:stop");log$t.err=src$1k("libp2p:circuit:error:stop");class Stop extends EE$7{constructor(e){super(),this.swarm=e,this.utils=utils$G(e)}handle(e,t,r){r=r||(()=>{}),series_1([r=>this.utils.validateAddrs(e,t,proto$1.Type.STOP,r),e=>this.utils.writeResponse(t,proto$1.Status.Success,e)],n=>{if(n)return r(),log$t(n);const i=new src$t(this.utils.peerIdFromId(e.srcPeer.id));e.srcPeer.addrs.forEach(e=>i.multiaddrs.add(e));const o=new Connection$a(t.rest());o.setPeerInfo(i),setImmediate$1(()=>this.emit("connection",o)),r(o)})}}var stop=Stop;const EE$8=events$1.EventEmitter,proto$2=protocol.CircuitRelay,log$u=src$1k("libp2p:circuit:relay");log$u.err=src$1k("libp2p:circuit:error:relay");class Hop extends EE$8{constructor(e,t){super(),this.swarm=e,this.peerInfo=this.swarm._peerInfo,this.utils=utils$G(e),this.config=t||{active:!1,enabled:!1},this.active=this.config.active}handle(e,t){if(!this.config.enabled)return this.utils.writeResponse(t,proto$2.Status.HOP_CANT_SPEAK_RELAY),t.close();if(e.type===proto$2.Type.CAN_HOP)return this.utils.writeResponse(t,proto$2.Status.SUCCESS),t.close();let r=null,n=null;try{r=src$s.createFromBytes(e.srcPeer.id).toB58String(),n=src$s.createFromBytes(e.dstPeer.id).toB58String()}catch(e){if(log$u.err(e),!r)return this.utils.writeResponse(t,proto$2.Status.HOP_SRC_MULTIADDR_INVALID),t.close();if(!n)return this.utils.writeResponse(t,proto$2.Status.HOP_DST_MULTIADDR_INVALID),t.close()}if(r===n)return this.utils.writeResponse(t,proto$2.Status.HOP_CANT_RELAY_TO_SELF),t.close();if(!e.dstPeer.addrs.length){const t=src$2(`/p2p-circuit/ipfs/${n}`).buffer;e.dstPeer.addrs.push(t)}log$u("trying to establish a circuit: %s <-> %s",r,n);const i=()=>(this.utils.writeResponse(t,proto$2.Status.HOP_NO_CONN_TO_DST),t.close()),o=e=>{let t;try{if(!(t=this.swarm._peerBook.get(n)).isConnected()&&!this.active){const t=new Error(`No Connection to peer ${n}`);return i(),e(t)}}catch(t){if(!this.active)return i(),e(t)}e()};series_1([r=>this.utils.validateAddrs(e,t,proto$2.Type.HOP,r),e=>o(e),r=>this._circuit(t,e,r)],e=>{if(e)return log$u.err(e),t.close(),setImmediate$1(()=>this.emit("circuit:error",e));setImmediate$1(()=>this.emit("circuit:success"))})}_connectToStop(e,t,r){this._dialPeer(e,(e,n)=>e?(this.utils.writeResponse(t,proto$2.Status.HOP_CANT_DIAL_DST),log$u.err(e),r(e)):this.utils.writeResponse(t,proto$2.Status.SUCCESS,e=>e?(log$u.err(e),r(e)):r(null,n)))}_negotiateStop(e,t,r,n){const i=Object.assign({},r,{type:proto$2.Type.STOP});e.write(proto$2.encode(i),r=>{if(r)return this.utils.writeResponse(t,proto$2.Status.HOP_CANT_OPEN_DST_STREAM),log$u.err(r),n(r);e.read((e,t)=>{if(e)return log$u.err(e),n(e);return proto$2.decode(t).code!==proto$2.Status.SUCCESS?n(new Error("Unable to create circuit!")):n(null,t)})})}_circuit(e,t,r){let n=null;waterfall([r=>this._connectToStop(t.dstPeer,e,r),(r,i)=>{n=new streamHandler(r),this._negotiateStop(n,e,t,i)}],i=>{if(i)return e&&e.close(),n&&n.close(),r(i);const o=e.rest(),s=n.rest(),a=src$s.createFromBytes(t.srcPeer.id).toB58String(),c=src$s.createFromBytes(t.dstPeer.id).toB58String();pull(o,s,o),log$u("circuit %s <-> %s established",a,c),r()})}_dialPeer(e,t){const r=new src$t(src$s.createFromBytes(e.id));e.addrs.forEach(e=>r.multiaddrs.add(e)),this.swarm.dial(r,multicodec.relay,once_1$1((e,r)=>{if(e)return log$u.err(e),t(e);t(null,r)}))}}var hop=Hop;const EE$9=events$1.EventEmitter,log$v=src$1k("libp2p:circuit:listener");log$v.err=src$1k("libp2p:circuit:error:listener");var listener$3=(e,t,r)=>{const n=new EE$9,i=utils$G(e);return n.stopHandler=new stop(e),n.stopHandler.on("connection",e=>n.emit("connection",e)),n.hopHandler=new hop(e,t.hop),n.listen=(t,o)=>{o=o||(()=>{}),e.handle(multicodec.relay,(e,t)=>{const o=new streamHandler(t);o.read((e,t)=>{if(e)return void log$v.err(e);let s=null;try{s=protocol.CircuitRelay.decode(t)}catch(e){return i.writeResponse(o,protocol.CircuitRelay.Status.MALFORMED_MESSAGE)}switch(s.type){case protocol.CircuitRelay.Type.CAN_HOP:case protocol.CircuitRelay.Type.HOP:return n.hopHandler.handle(s,o);case protocol.CircuitRelay.Type.STOP:return n.stopHandler.handle(s,o,r);default:return i.writeResponse(o,protocol.CircuitRelay.Status.INVALID_MSG_TYPE),o.close()}})}),setImmediate$1(()=>n.emit("listen")),o()},n.close=t=>{e.unhandle(multicodec.relay),setImmediate$1(()=>n.emit("close")),t()},n.getAddrs=t=>{let r=e._peerInfo.multiaddrs.toArray(),n=r.filter(t=>src$3.Circuit.matches(t)&&!t.toString().includes(e._peerInfo.id.toB58String()));n.length&&(r=n);let i=[];r.forEach(t=>{const r=`/p2p-circuit/ipfs/${e._peerInfo.id.toB58String()}`;if(t.toString()!==r)if(src$3.Circuit.matches(t))i.push(t.encapsulate(`/ipfs/${e._peerInfo.id.toB58String()}`));else if(t.getPeerId())i.push(src$2("/p2p-circuit").encapsulate(t));else{const r=`${t}/ipfs/${e._peerInfo.id.toB58String()}`;i.push(src$2("/p2p-circuit").encapsulate(r))}else i.push(src$2(r))}),t(null,i)},n};const log$w=src$1k("libp2p:circuit:transportdialer");log$w.err=src$1k("libp2p:circuit:error:transportdialer");class Circuit$1{static get tag(){return"Circuit"}constructor(e,t){this.options=t||{},this.swarm=e,this.dialer=null,this.utils=utils$G(e),this.peerInfo=this.swarm._peerInfo,this.relays=this.filter(this.peerInfo.multiaddrs.toArray()),0===this.relays.length&&this.peerInfo.multiaddrs.add(`/p2p-circuit/ipfs/${this.peerInfo.id.toB58String()}`),this.dialer=new dialer(e,t),this.swarm.on("peer-mux-established",e=>{this.dialer.canHop(e)}),this.swarm.on("peer-mux-closed",e=>{this.dialer.relayPeers.delete(e.id.toB58String())})}_dialSwarmRelays(){this.relays.forEach(e=>{e.toString().split("/p2p-circuit").filter(e=>e.length).forEach(e=>{const t=this.utils.peerInfoFromMa(src$2(e));this.dialer._dialRelay(t)})})}dial(e,t,r){return this.dialer.dial(e,t,r)}createListener(e,t){"function"==typeof e&&(t=e,e=this.options||{});const r=listener$3(this.swarm,e,t);return r.on("listen",this._dialSwarmRelays.bind(this)),r}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>src$3.Circuit.matches(e))}}var circuit=Circuit$1,src$1l=circuit,s$n=1e3,m$l=60*s$n,h$j=60*m$l,d$j=24*h$j,w$i=7*d$j,y$j=365.25*d$j,ms$j=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$p(e);if("number"===r&&isFinite(e))return t.long?fmtLong$j(e):fmtShort$j(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$p(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$j;case"weeks":case"week":case"w":return r*w$i;case"days":case"day":case"d":return r*d$j;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$j;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$l;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$j(e){var t=Math.abs(e);return t>=d$j?Math.round(e/d$j)+"d":t>=h$j?Math.round(e/h$j)+"h":t>=m$l?Math.round(e/m$l)+"m":t>=s$n?Math.round(e/s$n)+"s":e+"ms"}function fmtLong$j(e){var t=Math.abs(e);return t>=d$j?plural$j(e,t,d$j,"day"):t>=h$j?plural$j(e,t,h$j,"hour"):t>=m$l?plural$j(e,t,m$l,"minute"):t>=s$n?plural$j(e,t,s$n,"second"):e+" ms"}function plural$j(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$h(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$j,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$o=setup$h,browser$k=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$o(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$k=browser$k.log,browser_2$k=browser$k.formatArgs,browser_3$k=browser$k.save,browser_4$k=browser$k.load,browser_5$k=browser$k.useColors,browser_6$k=browser$k.storage,browser_7$k=browser$k.colors,node$n=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$o(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$k=node$n.init,node_2$k=node$n.log,node_3$k=node$n.formatArgs,node_4$k=node$n.save,node_5$k=node$n.load,node_6$k=node$n.useColors,node_7$k=node$n.colors,node_8$k=node$n.inspectOpts,src$1m=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$k:e.exports=node$n}),tryEach_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var s,a=null;t=t||r.default,(0,n.default)(e,function(e,t){(0,i.default)(e)(function(e,r){s=arguments.length>2?(0,o.default)(arguments,1):r,a=e,t(!e)})},function(){t(a,s)})};var r=s(noop_1),n=s(eachSeries),i=s(wrapAsync_1),o=s(slice_1);function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(tryEach_1);const Connection$b=src$T.Connection,log$x=src$1m("libp2p:switch:dialer:queue");log$x.error=src$1m("libp2p:switch:dialer:queue:error");class DialQueue{constructor(e,t){this.dialTimeout=t,this.queue=queue$1((e,t)=>{this._doWork(e.transport,e.addr,e.token,t)},e)}_doWork(e,t,r,n){n=once_1$1(n),log$x("work:start"),this._dialWithTimeout(e,t,(i,o)=>{if(i)return log$x.error(`${e.constructor.name}:work`,i),n(i);if(r.cancel)return log$x("work:cancel"),pull(empty$2(),o),"function"==typeof o.close?o.close(e=>n(null)):n(null);r.cancel=!0,log$x("work:success"),(new Connection$b).setInnerConn(o),n(null,{multiaddr:t,conn:o})})}_dialWithTimeout(e,t,r){timeout_1(r=>{const n=e.dial(t,e=>{if(e)return r(e);r(null,n)})},this.dialTimeout)(r)}push(e,t,r,n){this.queue.push({transport:e,addr:t,token:r},n)}}var queue_1$1=DialQueue;const log$y=src$1m("libp2p:switch:dialer");class LimitDialer{constructor(e,t){log$y("create: %s peer limit, %s dial timeout",e,t),this.perPeerLimit=e,this.dialTimeout=t,this.queues=new Map}dialMany(e,t,r,n){log$y("dialMany:start");const i={cancel:!1};let o=[];const s=r.map(r=>n=>this.dialSingle(e,t,r,i,(e,t)=>e?(o.push(e),n(e)):n(null,t)));tryEach_1(s,(e,t)=>{if(t&&t.conn)return log$y("dialMany:success"),n(null,t);log$y("dialMany:error"),n(o)})}dialSingle(e,t,r,n,i){const o=e.toB58String();let s;log$y("dialSingle: %s:%s",o,r.toString()),this.queues.has(o)?s=this.queues.get(o):(s=new queue_1$1(this.perPeerLimit,this.dialTimeout),this.queues.set(o,s)),s.push(t,r,n,i)}}var limitDialer=LimitDialer,constants$e={BLACK_LIST_TTL:3e5,BLACK_LIST_ATTEMPTS:5,DIAL_TIMEOUT:3e4,MAX_COLD_CALLS:50,MAX_PARALLEL_DIALS:100,QUARTER_HOUR:9e5,PRIORITY_HIGH:10,PRIORITY_LOW:20};const schema="\nmessage Identify {\n  // protocolVersion determines compatibility between peers\n  optional string protocolVersion = 5; // e.g. ipfs/1.0.0\n\n  // agentVersion is like a UserAgent string in browsers, or client version in bittorrent\n  // includes the client name and client.\n  optional string agentVersion = 6; // e.g. go-ipfs/0.1.0\n\n  // publicKey is this node's public key (which also gives its node.ID)\n  // - may not need to be sent, as secure channel implies it has been sent.\n  // - then again, if we change / disable secure channel, may still want it.\n  optional bytes publicKey = 1;\n\n  // listenAddrs are the multiaddrs the sender node listens for open connections on\n  repeated bytes listenAddrs = 2;\n\n  // oservedAddr is the multiaddr of the remote endpoint that the sender node perceives\n  // this is useful information to convey to the other side, as it helps the remote endpoint\n  // determine whether its connection to the local peer goes through NAT.\n  optional bytes observedAddr = 4;\n\n  repeated string protocols = 3;\n}\n";var message$3=src$i(schema).Identify,listener$4=(e,t)=>{e.getObservedAddrs((r,n)=>{if(r)return;n=n[0];let i=Buffer.alloc(0);t.id.pubKey&&(i=t.id.pubKey.bytes);const o=message$3.encode({protocolVersion:"ipfs/0.1.0",agentVersion:"na",publicKey:i,listenAddrs:t.multiaddrs.toArray().map(e=>e.buffer),observedAddr:n?n.buffer:Buffer.from(""),protocols:Array.from(t.protocols)});pull(values([o]),src$M.encode(),e)})},dialer$1=(e,t,r)=>{"function"==typeof t&&(r=t,t=null,console.warn("WARNING: no expected peer info was given, identify will not be able to verify peer integrity")),pull(e,src$M.decode(),take(1),collect((e,n)=>{if(e)return r(e);if(0===n.length)return r(new Error("conn was closed, did not receive data"));const i=message$3.decode(n[0]);src$s.createFromPubKey(i.publicKey,(e,n)=>{if(e)return r(e);const o=new src$t(n);if(t&&t.id.toB58String()!==n.toB58String())return r(new Error("invalid peer"));try{i.listenAddrs.map(src$2).forEach(e=>o.multiaddrs.add(e))}catch(e){return r(e)}let s;try{s=getObservedAddrs(i)}catch(e){return r(e)}o.protocols=new Set(i.protocols),r(null,o,s)})}))};function getObservedAddrs(e){if(!hasObservedAddr(e))return[];let t=e.observedAddr;return Array.isArray(t)||(t=[t]),t.map(e=>src$2(e))}function hasObservedAddr(e){return e.observedAddr&&e.observedAddr.length>0}var src$1n=createCommonjsModule(function(e,t){(t=e.exports).multicodec="/ipfs/id/1.0.0",t.listener=listener$4,t.dialer=dialer$1,t.message=message$3}),src_1$c=src$1n.multicodec,src_2$a=src$1n.listener,src_3$a=src$1n.dialer,src_4$a=src$1n.message,msHandle=(e,t)=>new Promise((r,n)=>{e.handle(t,e=>{if(e)return n(e);r()})}),msSelect=(e,t)=>new Promise((r,n)=>{e.select(t,(e,t)=>{if(e)return n(e);r(t)})}),identifyDialer=(e,t)=>new Promise((r,n)=>{src$1n.dialer(e,t,(e,t,i)=>{if(e)return n(e);r({peerInfo:t,observedAddrs:i})})}),uniqueBy$1=(e,t)=>[...new Map(e.map(e=>[t(e),e])).values()],utils$H={msHandle:msHandle,msSelect:msSelect,identifyDialer:identifyDialer,uniqueBy:uniqueBy$1};const log$z=src$1m("libp2p:switch:transport"),{DIAL_TIMEOUT:DIAL_TIMEOUT}=constants$e,{uniqueBy:uniqueBy$2}=utils$H,defaultPerPeerRateLimit=8;class TransportManager{constructor(e){this.switch=e,this.dialer=new limitDialer(defaultPerPeerRateLimit,this.switch._options.dialTimeout||DIAL_TIMEOUT)}add(e,t){if(log$z("adding %s",e),this.switch.transports[e])throw new Error("There is already a transport with this key");this.switch.transports[e]=t,this.switch.transports[e].listeners||(this.switch.transports[e].listeners=[])}remove(e,t){if(t=t||function(){},!this.switch.transports[e])return t();this.close(e,r=>{delete this.switch.transports[e],t(r)})}removeAll(e){const t=Object.keys(this.switch.transports).map(e=>t=>{this.remove(e,t)});parallel$1(t,e)}dial(e,t,r){const n=this.switch.transports[e];let i=t.multiaddrs.toArray();Array.isArray(i)||(i=[i]),i=TransportManager.dialables(n,i,this.switch._peerInfo),log$z("dialing %s",e,i.map(e=>e.toString())),this.dialer.dialMany(t.id,n,i,(e,n)=>{if(e)return r(e);t.connect(n.multiaddr),r(null,n.conn)})}listen(e,t,r,n){r=this.switch._connectionHandler(e,r);const i=this.switch.transports[e];let o=this.switch._peerInfo.multiaddrs.toArray();o=uniqueBy$2(o,e=>{const t=Number(e.toOptions().port);return isNaN(t)||0===t?e.toString():t});const s=TransportManager.dialables(i,o);i.listeners||(i.listeners=[]);let a=[];const c=s.map(e=>t=>{const n=once_1$1(t),o=i.createListener(r);o.once("error",n),o.listen(e,e=>{if(e)return n(e);o.removeListener("error",n),o.getAddrs((e,t)=>{if(e)return n(e);a=a.concat(t),i.listeners.push(o),n()})})});parallel$1(c,e=>{if(e)return n(e);this.switch._peerInfo.multiaddrs.replace(s,a),n()})}close(e,t){const r=this.switch.transports[e];if(!r)return t(new Error(`Trying to close non existing transport: ${e}`));parallel$1(r.listeners.map(e=>t=>{e.close(t)}),t)}static dialables(e,t,r){if(!e||!e.filter)return[];const n=e.filter(t);if(!r||!n.length)return n;const i=ourAddresses(r);return n.filter(e=>!i.some(t=>getDestination(e).startsWith(t)))}}function ourAddresses(e){const t=e.id.toB58String();return e.multiaddrs.toArray().reduce((e,r)=>{const n=r.getPeerId();r=r.toString();const i=n?r.slice(0,r.lastIndexOf(`/ipfs/${n}`)):`${r}/ipfs/${t}`;return e.concat([r,i])},[]).filter(e=>Boolean(e)).concat(`/ipfs/${t}`)}const RelayProtos=["p2p-circuit","p2p-websocket-star","p2p-webrtc-star","p2p-stardust"];function getDestination(e){const t=e.protoNames().reverse().find(e=>RelayProtos.includes(e));return e=e.toString(),t?e.slice(e.lastIndexOf(t)+t.length):e}var transport$1=TransportManager,s$o=1e3,m$m=60*s$o,h$k=60*m$m,d$k=24*h$k,w$j=7*d$k,y$k=365.25*d$k,ms$k=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$q(e);if("number"===r&&isFinite(e))return t.long?fmtLong$k(e):fmtShort$k(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$q(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$k;case"weeks":case"week":case"w":return r*w$j;case"days":case"day":case"d":return r*d$k;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$k;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$m;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$k(e){var t=Math.abs(e);return t>=d$k?Math.round(e/d$k)+"d":t>=h$k?Math.round(e/h$k)+"h":t>=m$m?Math.round(e/m$m)+"m":t>=s$o?Math.round(e/s$o)+"s":e+"ms"}function fmtLong$k(e){var t=Math.abs(e);return t>=d$k?plural$k(e,t,d$k,"day"):t>=h$k?plural$k(e,t,h$k,"hour"):t>=m$m?plural$k(e,t,m$m,"minute"):t>=s$o?plural$k(e,t,s$o,"second"):e+" ms"}function plural$k(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$i(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$k,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$p=setup$i,browser$l=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$p(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$l=browser$l.log,browser_2$l=browser$l.formatArgs,browser_3$l=browser$l.save,browser_4$l=browser$l.load,browser_5$l=browser$l.useColors,browser_6$l=browser$l.storage,browser_7$l=browser$l.colors,node$o=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$p(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$l=node$o.init,node_2$l=node$o.log,node_3$l=node$o.formatArgs,node_4$l=node$o.save,node_5$l=node$o.load,node_6$l=node$o.useColors,node_7$l=node$o.colors,node_8$l=node$o.inspectOpts,src$1o=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$l:e.exports=node$o}),util$b=createCommonjsModule(function(e,t){function r(e){const t=(~~(1e9*Math.random())).toString(36);function r(e){return r=>{Array.isArray(r)&&(r=r.join(" ")),e("(%s) %s",t,r)}}const n=r(src$1o("mss:"+e));return n.error=r(src$1o("mss:"+e+":error")),n}(t=e.exports).writeEncoded=(e,t,r)=>{!function(e,t){pull(values(Buffer.isBuffer(e)?[e]:[Buffer.from(e)]),src$M.encode(),collect((e,r)=>{if(e)return t(e);t(null,r[0])}))}(t,(t,n)=>{if(t)return r(t);e.write(n)})},t.log={},t.log.dialer=()=>r("dialer\t"),t.log.listener=()=>r("listener\t")}),util_1$7=util$b.writeEncoded,util_2$4=util$b.log;const writeEncoded=util$b.writeEncoded;function select(e,t,r){const n=pullHandshake({timeout:6e4},t),i=n.handshake;return r("writing multicodec: "+e),writeEncoded(i,Buffer.from(e+"\n"),t),src$M.decodeFromReader(i,(n,o)=>{if(n)return t(n);const s=o.toString().slice(0,-1);if(s!==e)return t(new Error(`"${e}" not supported`),i.rest());r("received ack: "+s),t(null,i.rest())}),n}var select_1=select,some=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(createTester),n=o(doParallel_1),i=o(identity_1);function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)((0,r.default)(Boolean,i.default)),e.exports=t.default});unwrapExports(some);const Connection$c=src$T.Connection,writeEncoded$1=util$b.writeEncoded;function selectHandler(e,t,r){const n=e=>{r.error(e)},i=pullHandshake({timeout:6e4},n),o=i.handshake;return function i(){src$M.decodeFromReader(o,(s,a)=>{if(s)return n(s);r("received:",a.toString());const c=a.toString().slice(0,-1);matcher(c,t,(s,u)=>{if(s)return n(s);const f=u;if(f){r("send ack back of: "+c),writeEncoded$1(o,a,n);const i=new Connection$c(o.rest(),e);t[f].handlerFunc(c,i)}else r("not supported protocol: "+c),writeEncoded$1(o,Buffer.from("na\n")),i()})})}(),i}function matcher(e,t,r){const n=Object.keys(t);let i=!1;some(n,(r,n)=>{t[r].matchFunc(r,e,(e,t)=>{if(e)return n(e);t&&(i=r),n()})},e=>{if(e)return r(e);r(null,i)})}var selectHandler_1=selectHandler;function lsHandler(e,t){const r=Object.keys(e.handlers).filter(e=>"ls"!==e),n=r.length,i=r.reduce((e,t)=>{const r=Buffer.from(t+"\n");return e+varint.encodingLength(r.length)},0),o=Buffer.concat([Buffer.from(varint.encode(n)),Buffer.from(varint.encode(i)),Buffer.from("\n")]),s=r.map(e=>Buffer.from(e+"\n"));pull(values([o].concat(s)),src$M.encode(),t)}var lsHandler_1=lsHandler;function matchExact(e,t,r){r(null,e===t)}var matchExact_1=matchExact,constants$f=createCommonjsModule(function(e,t){e.exports.PROTOCOL_ID="/multistream/1.0.0"}),constants_1$7=constants$f.PROTOCOL_ID;const Connection$d=src$T.Connection,PROTOCOL_ID=constants$f.PROTOCOL_ID;class Listener$1{constructor(){this.handlers={ls:{handlerFunc:(e,t)=>lsHandler_1(this,t),matchFunc:matchExact_1}},this.log=util$b.log.listener()}handle(e,t){this.log("listener handle conn");const r=select_1(PROTOCOL_ID,(r,n)=>{if(r)return t(r);const i=new Connection$d(n,e),o=selectHandler_1(i,this.handlers,this.log);pull(i,o,i),t()},this.log);pull(e,r,e)}addHandler(e,t,r){this.log("adding handler: "+e),assert$t("function"==typeof t,"handler must be a function"),this.handlers[e]&&this.log("overwriting handler for "+e),r||(r=matchExact_1),this.handlers[e]={handlerFunc:t,matchFunc:r}}}var listener$5=Listener$1;const Connection$e=src$T.Connection,PROTOCOL_ID$1=constants$f.PROTOCOL_ID;class Dialer$1{constructor(){this.conn=null,this.log=util$b.log.dialer()}handle(e,t){this.log("dialer handle conn"),t=once_1$1(t);const r=select_1(PROTOCOL_ID$1,(r,n)=>{if(r)return t(r);this.log("handshake success"),this.conn=new Connection$e(n,e),t()},this.log);try{pull(e,r,e)}catch(e){this.log.error(e),t(e)}}select(e,t){if(this.log("dialer select "+e),t=once_1$1(t),!this.conn)return t(new Error("multistream handshake has not finalized yet"));const r=select_1(e,(e,r)=>{if(e)return this.conn=new Connection$e(r,this.conn),t(e);t(null,new Connection$e(r,this.conn))},this.log);pull(this.conn,r,this.conn)}ls(e){e=once_1$1(e);const t=select_1("ls",(t,r)=>{if(t)return e(t);pull(r,src$M.decode(),collectLs(),map$3(stringify$1),collect((t,r)=>{if(t)return e(t);e(null,r.slice(1))}))},this.log);pull(this.conn,t,this.conn)}}function stringify$1(e){return e.toString().slice(0,-1)}function collectLs(e){let t=0;return take(e=>(varint.decode(e),t=varint.decode(e,varint.decode.bytes),!0))}var dialer$2=Dialer$1,semver=createCommonjsModule(function(e,t){var r;t=e.exports=q,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var f=a++;s[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var l=a++;s[l]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var d=a++;s[d]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var h=a++;s[h]="(?:"+s[c]+"|"+s[f]+")";var p=a++;s[p]="(?:"+s[u]+"|"+s[f]+")";var b=a++;s[b]="(?:-("+s[h]+"(?:\\."+s[h]+")*))";var m=a++;s[m]="(?:-?("+s[p]+"(?:\\."+s[p]+")*))";var g=a++;s[g]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[g]+"(?:\\."+s[g]+")*))";var v=a++,_="v?"+s[l]+s[b]+"?"+s[y]+"?";s[v]="^"+_+"$";var $="[v=\\s]*"+s[d]+s[m]+"?"+s[y]+"?",S=a++;s[S]="^"+$+"$";var E=a++;s[E]="((?:<|>)?=?)";var w=a++;s[w]=s[u]+"|x|X|\\*";var C=a++;s[C]=s[c]+"|x|X|\\*";var A=a++;s[A]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[b]+")?"+s[y]+"?)?)?";var k=a++;s[k]="[v=\\s]*("+s[w]+")(?:\\.("+s[w]+")(?:\\.("+s[w]+")(?:"+s[m]+")?"+s[y]+"?)?)?";var T=a++;s[T]="^"+s[E]+"\\s*"+s[A]+"$";var I=a++;s[I]="^"+s[E]+"\\s*"+s[k]+"$";var B=a++;s[B]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var P=a++;s[P]="(?:~>?)";var R=a++;s[R]="(\\s*)"+s[P]+"\\s+",o[R]=new RegExp(s[R],"g");var O=a++;s[O]="^"+s[P]+s[A]+"$";var N=a++;s[N]="^"+s[P]+s[k]+"$";var x=a++;s[x]="(?:\\^)";var L=a++;s[L]="(\\s*)"+s[x]+"\\s+",o[L]=new RegExp(s[L],"g");var M=a++;s[M]="^"+s[x]+s[A]+"$";var D=a++;s[D]="^"+s[x]+s[k]+"$";var F=a++;s[F]="^"+s[E]+"\\s*("+$+")$|^$";var j=a++;s[j]="^"+s[E]+"\\s*("+_+")$|^$";var U=a++;s[U]="(\\s*)"+s[E]+"\\s*("+$+"|"+s[A]+")",o[U]=new RegExp(s[U],"g");var H=a++;s[H]="^\\s*("+s[A]+")\\s+-\\s+("+s[A]+")\\s*$";var K=a++;s[K]="^\\s*("+s[k]+")\\s+-\\s+("+s[k]+")\\s*$";var G=a++;s[G]="(<|>)?=?\\s*\\*";for(var V=0;V<35;V++)r(V,s[V]),o[V]||(o[V]=new RegExp(s[V]));function z(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof q)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?o[S]:o[v]).test(e))return null;try{return new q(e,t)}catch(e){return null}}function q(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof q){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof q))return new q(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[S]:o[v]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=z,t.valid=function(e,t){var r=z(e,t);return r?r.version:null},t.clean=function(e,t){var r=z(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=q,q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},q.prototype.toString=function(){return this.version},q.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof q||(e=new q(e,this.options)),this.compareMain(e)||this.comparePre(e)},q.prototype.compareMain=function(e){return e instanceof q||(e=new q(e,this.options)),J(this.major,e.major)||J(this.minor,e.minor)||J(this.patch,e.patch)},q.prototype.comparePre=function(e){if(e instanceof q||(e=new q(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return J(n,i)}while(++t)},q.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new q(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(Q(e,t))return null;var r=z(e),n=z(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},t.compareIdentifiers=J;var W=/^[0-9]+$/;function J(e,t){var r=W.test(e),n=W.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function X(e,t,r){return new q(e,r).compare(new q(t,r))}function Y(e,t,r){return X(e,t,r)>0}function Z(e,t,r){return X(e,t,r)<0}function Q(e,t,r){return 0===X(e,t,r)}function ee(e,t,r){return 0!==X(e,t,r)}function te(e,t,r){return X(e,t,r)>=0}function re(e,t,r){return X(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Q(e,r,n);case"!=":return ee(e,r,n);case">":return Y(e,r,n);case">=":return te(e,r,n);case"<":return Z(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return J(t,e)},t.major=function(e,t){return new q(e,t).major},t.minor=function(e,t){return new q(e,t).minor},t.patch=function(e,t){return new q(e,t).patch},t.compare=X,t.compareLoose=function(e,t){return X(e,t,!0)},t.rcompare=function(e,t,r){return X(t,e,r)},t.sort=function(e,r){return e.sort(function(e,n){return t.compare(e,n,r)})},t.rsort=function(e,r){return e.sort(function(e,n){return t.rcompare(e,n,r)})},t.gt=Y,t.lt=Z,t.eq=Q,t.neq=ee,t.gte=te,t.lte=re,t.cmp=ne,t.Comparator=ie;var oe={};function se(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,i,o,s,a,c,u,f,l,d){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(i)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(f)?"<"+c+"."+(+u+1)+".0":l?"<="+c+"."+u+"."+f+"-"+l:"<="+a)).trim()}function ue(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function fe(e,t,r){try{t=new se(t,r)}catch(e){return!1}return t.test(e)}function le(e,t,r,n){var i,o,s,a,c;switch(e=new q(e,n),t=new se(t,n),r){case">":i=Y,o=re,s=Z,a=">",c=">=";break;case"<":i=Z,o=te,s=Y,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(fe(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var f=t.set[u],l=null,d=null;if(f.forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),l=l||e,d=d||e,i(e.semver,l.semver,n)?l=e:s(e.semver,d.semver,n)&&(d=e)}),l.operator===a||l.operator===c)return!1;if((!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[F]:o[j],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new q(r[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new q(e,this.options)),ne(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),fe(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),fe(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||c},t.Range=se,se.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[K]:o[H];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(o[U],"$1$2$3"),r("comparator trim",e,o[U]),e=(e=(e=e.replace(o[R],"$1~")).replace(o[L],"$1^")).split(/\s+/).join(" ");var i=t?o[F]:o[j],s=e.split(" ").map(function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[D]:o[M];return e.replace(n,function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a})}(e,t)}).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var n=t.loose?o[N]:o[O];return e.replace(n,function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a})}(e,t)}).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var n=t.loose?o[I]:o[T];return e.replace(n,function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var c=ae(i),u=c||ae(o),f=u||ae(s),l=f;return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(o=0),s=0,">"===n?(n=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",u?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":f&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t})}(e,t)}).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[G],"")}(e,t),r("stars",e),e}(e,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new ie(e,this.options)},this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(r){return e.set.some(function(e){return e.every(function(e){return r.intersects(e,t)})})})})},t.toComparators=function(e,t){return new se(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new q(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=fe,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new q(n=e,r)))}),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new q(n=e,r)))}),n},t.minVersion=function(e,t){e=new se(e,t);var r=new q("0.0.0");if(e.test(r))return r;if(r=new q("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(e){var t=new q(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!Y(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return le(e,t,"<",r)},t.gtr=function(e,t,r){return le(e,t,">",r)},t.outside=le,t.prerelease=function(e,t){var r=z(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof q)return e;if("string"!=typeof e)return null;var t=e.match(o[B]);if(null==t)return null;return z(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}}),semver_1=semver.SEMVER_SPEC_VERSION,semver_2=semver.re,semver_3=semver.src,semver_4=semver.parse,semver_5=semver.valid,semver_6=semver.clean,semver_7=semver.SemVer,semver_8=semver.inc,semver_9=semver.diff,semver_10=semver.compareIdentifiers,semver_11=semver.rcompareIdentifiers,semver_12=semver.major,semver_13=semver.minor,semver_14=semver.patch,semver_15=semver.compare,semver_16=semver.compareLoose,semver_17=semver.rcompare,semver_18=semver.sort,semver_19=semver.rsort,semver_20=semver.gt,semver_21=semver.lt,semver_22=semver.eq,semver_23=semver.neq,semver_24=semver.gte,semver_25=semver.lte,semver_26=semver.cmp,semver_27=semver.Comparator,semver_28=semver.Range,semver_29=semver.toComparators,semver_30=semver.satisfies,semver_31=semver.maxSatisfying,semver_32=semver.minSatisfying,semver_33=semver.minVersion,semver_34=semver.validRange,semver_35=semver.ltr,semver_36=semver.gtr,semver_37=semver.outside,semver_38=semver.prerelease,semver_39=semver.intersects,semver_40=semver.coerce;function matchSemver(e,t,r){const n=e.split("/"),i=t.split("/"),o=n[1],s=n[2],a=i[1],c=i[2];if(o!==a)return r(null,!1);r(null,semver.satisfies(s,"~"+c))}var matchSemver_1=matchSemver,src$1p=createCommonjsModule(function(e,t){t.Listener=t.listener=listener$5,t.Dialer=t.dialer=dialer$2,t.matchSemver=matchSemver_1,t.matchExact=matchExact_1}),src_1$d=src$1p.Listener,src_2$b=src$1p.listener,src_3$b=src$1p.Dialer,src_4$b=src$1p.dialer,src_5$7=src$1p.matchSemver,src_6$5=src$1p.matchExact;const EventEmitter$b=events$1.EventEmitter;class BaseConnection extends EventEmitter$b{constructor({_switch:e,name:t}){super(),this.switch=e,this.ourPeerInfo=this.switch._peerInfo,this.log=src$1m(`libp2p:conn:${t}`),this.log.error=src$1m(`libp2p:conn:${t}:error`)}close(e){"DISCONNECTING"!==this._state._state&&(this.log("closing connection to %s",this.theirB58Id),e&&this._events.error&&this.emit("error",e),this._state("disconnect"))}emit(e,...t){"error"!==e||this._events.error?super.emit(e,...t):this.log.error(...t)}getState(){return this._state._state}encrypt(){this._state("encrypt")}protect(){this._state("privatize")}upgrade(){this._state("upgrade")}_onDisconnected(){this.switch.connection.remove(this),this.log("disconnected from %s",this.theirB58Id),this.emit("close"),this.removeAllListeners()}_onPrivatized(){this.emit("private",this.conn)}_onPrivatizing(){if(!this.switch.protector)return this._state("done");this.conn=this.switch.protector.protect(this.conn,e=>{if(e)return this.close(e);this.log("successfully privatized conn to %s",this.theirB58Id),this.conn.setPeerInfo(this.theirPeerInfo),this._state("done")})}}var base$6=classIs(BaseConnection,{className:"BaseConnection",symbolName:"libp2p-switch/BaseConnection"});const Connection$f=src$T.Connection;var observeConnection=(e,t,r,n)=>{const i=new Promise((e,t)=>{r.getPeerInfo((t,n)=>{if(!t&&n)return void e(n);const i=r.setPeerInfo;r.setPeerInfo=t=>{i.call(r,t),e(t)}})}),o={source:pull(r,n.incoming(e,t,i)),sink:pull(n.outgoing(e,t,i),r)};return new Connection$f(o,r)},errors$8=createCommonjsModule(function(e){e.exports={CONNECTION_FAILED:e=>errCode(e,"CONNECTION_FAILED"),DIAL_ABORTED:()=>errCode("Dial was aborted","DIAL_ABORTED"),ERR_BLACKLISTED:()=>errCode("Dial is currently blacklisted for this peer","ERR_BLACKLISTED"),DIAL_SELF:()=>errCode("A node cannot dial itself","DIAL_SELF"),INVALID_STATE_TRANSITION:e=>errCode(e,"INVALID_STATE_TRANSITION"),NO_TRANSPORTS_REGISTERED:()=>errCode("No transports registered, dial not possible","NO_TRANSPORTS_REGISTERED"),PROTECTOR_REQUIRED:()=>errCode("No protector provided with private network enforced","PROTECTOR_REQUIRED"),UNEXPECTED_END:()=>errCode("Unexpected end of input from reader.","UNEXPECTED_END"),maybeUnexpectedEnd:t=>!0===t?e.exports.UNEXPECTED_END():t}}),errors_1$1=errors$8.CONNECTION_FAILED,errors_2$1=errors$8.DIAL_ABORTED,errors_3$1=errors$8.ERR_BLACKLISTED,errors_4$1=errors$8.DIAL_SELF,errors_5$1=errors$8.INVALID_STATE_TRANSITION,errors_6$1=errors$8.NO_TRANSPORTS_REGISTERED,errors_7$1=errors$8.PROTECTOR_REQUIRED,errors_8$1=errors$8.UNEXPECTED_END,errors_9$1=errors$8.maybeUnexpectedEnd;const{msHandle:msHandle$1,msSelect:msSelect$1,identifyDialer:identifyDialer$1}=utils$H,{CONNECTION_FAILED:CONNECTION_FAILED,DIAL_SELF:DIAL_SELF,INVALID_STATE_TRANSITION:INVALID_STATE_TRANSITION,NO_TRANSPORTS_REGISTERED:NO_TRANSPORTS_REGISTERED,maybeUnexpectedEnd:maybeUnexpectedEnd}=errors$8;class ConnectionFSM extends base$6{constructor({_switch:e,peerInfo:t,muxer:r,conn:n,type:i="out"}){super({_switch:e,name:`${i}:${e._peerInfo.id.toB58String().slice(0,8)}`}),this.theirPeerInfo=t,this.theirB58Id=this.theirPeerInfo.id.toB58String(),this.conn=n,this.muxer=r;let o="DISCONNECTED";this.muxer&&(o="MUXED"),this._state=fsmEvent_1(o,{DISCONNECTED:{dial:"DIALING",disconnect:"DISCONNECTED",done:"DISCONNECTED"},DIALING:{abort:"ABORTED",done:"DIALED",error:"ERRORED",disconnect:"DISCONNECTING"},DIALED:{encrypt:"ENCRYPTING",privatize:"PRIVATIZING"},PRIVATIZING:{done:"PRIVATIZED",abort:"ABORTED",disconnect:"DISCONNECTING"},PRIVATIZED:{encrypt:"ENCRYPTING"},ENCRYPTING:{done:"ENCRYPTED",error:"ERRORED",disconnect:"DISCONNECTING"},ENCRYPTED:{upgrade:"UPGRADING",disconnect:"DISCONNECTING"},UPGRADING:{stop:"CONNECTED",done:"MUXED",error:"ERRORED",disconnect:"DISCONNECTING"},MUXED:{disconnect:"DISCONNECTING"},CONNECTED:{disconnect:"DISCONNECTING"},DISCONNECTING:{done:"DISCONNECTED",disconnect:"DISCONNECTING"},ABORTED:{},ERRORED:{disconnect:"DISCONNECTING"}}),this._state.on("DISCONNECTED",()=>this._onDisconnected()),this._state.on("DIALING",()=>this._onDialing()),this._state.on("DIALED",()=>this._onDialed()),this._state.on("PRIVATIZING",()=>this._onPrivatizing()),this._state.on("PRIVATIZED",()=>this._onPrivatized()),this._state.on("ENCRYPTING",()=>this._onEncrypting()),this._state.on("ENCRYPTED",()=>{this.log("successfully encrypted connection to %s",this.theirB58Id),this.emit("encrypted",this.conn)}),this._state.on("UPGRADING",()=>this._onUpgrading()),this._state.on("MUXED",()=>{this.log("successfully muxed connection to %s",this.theirB58Id),delete this.switch.conns[this.theirB58Id],this.emit("muxed",this.muxer)}),this._state.on("CONNECTED",()=>{this.log("unmuxed connection opened to %s",this.theirB58Id),this.emit("unmuxed",this.conn)}),this._state.on("DISCONNECTING",()=>this._onDisconnecting()),this._state.on("ABORTED",()=>this._onAborted()),this._state.on("ERRORED",()=>this._onErrored()),this._state.on("error",e=>this._onStateError(e))}dial(){return this.theirB58Id===this.ourPeerInfo.id.toB58String()?this.emit("error",DIAL_SELF()):"DIALING"===this.getState()?this.log("attempted to dial while already dialing, ignoring"):void this._state("dial")}shake(e,t){return e?this.muxer&&this.muxer.newStream?this.muxer.newStream((r,n)=>{if(r)return t(r,null);this.log("created new stream to %s",this.theirB58Id),this._protocolHandshake(e,n,t)}):void this._protocolHandshake(e,this.conn,t):t(null,null)}upgrade(){this._state("upgrade")}_onDialing(){if(this.log("dialing %s",this.theirB58Id),!this.switch.hasTransports())return this.close(NO_TRANSPORTS_REGISTERED());const e=this.switch.availableTransports(this.theirPeerInfo),t=Boolean(this.switch.transports[src$1l.tag]);t&&!e.includes(src$1l.tag)&&e.push(src$1l.tag);const r=n=>{let i=n;if(!i)return t?this.close(CONNECTION_FAILED(`No available transports to dial peer ${this.theirB58Id}!`)):this.close(CONNECTION_FAILED(`Circuit not enabled and all transports failed to dial peer ${this.theirB58Id}!`));i===src$1l.tag&&this.theirPeerInfo.multiaddrs.add(`/p2p-circuit/p2p/${this.theirB58Id}`),this.log("dialing transport %s",i),this.switch.transport.dial(i,this.theirPeerInfo,(t,n)=>{if(t)return this.emit("error:connection_attempt_failed",t),this.log(t),r(e.shift());this.conn=observeConnection(i,null,n,this.switch.observer),this._state("done")})};r(e.shift())}_onDialed(){this.log("successfully dialed %s",this.theirB58Id),this.emit("connected",this.conn)}_onDisconnecting(){this.log("disconnecting from %s",this.theirB58Id,Boolean(this.muxer)),delete this.switch.conns[this.theirB58Id];let e=[];if(this.muxer&&e.push(e=>{this.muxer.end(()=>{delete this.muxer,e()})}),this.conn){try{this.conn.source.abort()}catch(e){}delete this.conn}parallel$1(e,()=>{this._state("done")})}_onEncrypting(){const e=new src$1p.Dialer;e.handle(this.conn,t=>{if(t)return this.close(maybeUnexpectedEnd(t));this.log("selecting crypto %s to %s",this.switch.crypto.tag,this.theirB58Id),e.select(this.switch.crypto.tag,(e,t)=>{if(e)return this.close(maybeUnexpectedEnd(e));const r=observeConnection(null,this.switch.crypto.tag,t,this.switch.observer),n=this.switch.crypto.encrypt(this.ourPeerInfo.id,r,this.theirPeerInfo.id,e=>{if(e)return this.close(e);this.conn=n,this.conn.setPeerInfo(this.theirPeerInfo),this._state("done")})})})}_onUpgrading(){const e=Object.keys(this.switch.muxers);if(this.log("upgrading connection to %s",this.theirB58Id),0===e.length)return this._state("stop");const t=new src$1p.Dialer;t.handle(this.conn,r=>{if(r)return this._didUpgrade(r);const n=r=>{this.log("selecting %s",r),t.select(r,(t,i)=>{if(t)return 0===e.length?this._didUpgrade(t):n(e.shift());const o=observeConnection(null,r,i,this.switch.observer);this.muxer=this.switch.muxers[r].dialer(o),this.muxer.once("close",()=>{this.close()}),this.muxer.on("stream",e=>{this.log("new stream created via muxer to %s",this.theirB58Id),e.setPeerInfo(this.theirPeerInfo),this.switch.protocolMuxer(null)(e)}),this._didUpgrade(null),this.switch.identify&&this._identify((e,t)=>{if(e)return this.close(e);this.theirPeerInfo=this.switch._peerBook.put(t.peerInfo)})})};n(e.shift())})}_identify(e){if(!this.muxer)return nextTick(e,errCode("The connection was already closed","ERR_CONNECTION_CLOSED"));this.muxer.newStream(async(t,r)=>{if(t)return e(t);const n=new src$1p.Dialer;let i;try{await msHandle$1(n,r);const o=await msSelect$1(n,src$1n.multicodec);i=await identifyDialer$1(o,this.theirPeerInfo)}catch(t){return e(t)}e(null,i)})}_didUpgrade(e){if(e)return this.log("Error upgrading connection:",e),this.switch.conns[this.theirB58Id]=this,this.emit("error:upgrade_failed",e),this._state("stop");this._state("done")}_protocolHandshake(e,t,r){const n=new src$1p.Dialer;n.handle(t,t=>{if(t)return r(t,null);n.select(e,(t,n)=>{if(t)return this.log("could not perform protocol handshake:",t),r(t,null);const i=observeConnection(null,e,n,this.switch.observer);this.log("successfully performed handshake of %s to %s",e,this.theirB58Id),this.emit("connection",i),r(null,i)})})}_onStateError(e){this.emit("error",INVALID_STATE_TRANSITION(e)),this.log(e)}}var connection$1=classIs(ConnectionFSM,{className:"ConnectionFSM",symbolName:"libp2p-switch/ConnectionFSM"}),plaintext={tag:"/plaintext/1.0.0",encrypt:(e,t,r,n)=>("function"==typeof r&&(n=r,r=void 0),setImmediate$1(()=>n()),t)};const log$A=src$1m("libp2p:switch:conn-manager"),{msHandle:msHandle$2,msSelect:msSelect$2,identifyDialer:identifyDialer$2}=utils$H;class ConnectionManager{constructor(e){this.switch=e,this.connections={}}add(e){this.connections[e.theirB58Id]=this.connections[e.theirB58Id]||[],this.get(e)||(this.connections[e.theirB58Id].push(e),this.switch.emit("connection:start",e.theirPeerInfo),"MUXED"===e.getState()?(this.switch.emit("peer-mux-established",e.theirPeerInfo),this.switch.dialer.clearBlacklist(e.theirPeerInfo)):e.once("muxed",()=>{this.switch.emit("peer-mux-established",e.theirPeerInfo),this.switch.dialer.clearBlacklist(e.theirPeerInfo)}))}get(e){if(!this.connections[e.theirB58Id])return null;for(let t=0;t<this.connections[e.theirB58Id].length;t++)if(this.connections[e.theirB58Id][t]===e)return this.connections[e.theirB58Id][t];return null}getOne(e){if(this.connections[e])for(var t=0;t<this.connections[e].length;t++)if("MUXED"===this.connections[e][t].getState())return this.connections[e][t];return null}remove(e){if(this.connections[e.theirB58Id]){for(let t=0;t<this.connections[e.theirB58Id].length;t++)if(this.connections[e.theirB58Id][t]===e){this.connections[e.theirB58Id].splice(t,1);break}0===this.connections[e.theirB58Id].length&&(delete this.connections[e.theirB58Id],e.theirPeerInfo.disconnect(),this.switch.emit("peer-mux-closed",e.theirPeerInfo)),this.switch.emit("connection:end",e.theirPeerInfo)}else e.theirPeerInfo&&(e.theirPeerInfo.disconnect(),this.switch.emit("peer-mux-closed",e.theirPeerInfo))}getAll(){let e=[];for(const t of Object.values(this.connections))e=[...e,...t];return e}getAllById(e){return this.connections[e]||[]}addStreamMuxer(e){this.switch.muxers[e.multicodec]=e,this.switch.handle(e.multicodec,(t,r)=>{const n=e.listener(r);return n.on("stream",this.switch.protocolMuxer(null)),this.switch.identify&&r.getPeerInfo((e,t)=>{!e&&t||log$A("crypto peerInfo wasnt found"),r.getPeerInfo=async e=>{const r=n.newStream(),i=new src$1p.Dialer;let o;e=once_1$1(e);try{await msHandle$2(i,r);const s=await msSelect$2(i,src$1n.multicodec);o=await identifyDialer$2(s,t)}catch(t){return n.end(()=>{e(t,null)})}const{peerInfo:s}=o;s&&r.setPeerInfo(s),e(null,s)},r.getPeerInfo((e,t)=>{if(e)return log$A("identify not successful");const i=t.id.toB58String();t=this.switch._peerBook.put(t);const o=new connection$1({_switch:this.switch,peerInfo:t,muxer:n,conn:r,type:"inc"});this.switch.connection.add(o),t.isConnected()||(t.multiaddrs.size>0?t.connect(t.multiaddrs.toArray()[0]):t.connect(`/ipfs/${i}`)),n.once("close",()=>{o.close()})})}),r})}crypto(e,t){e||t||(e=plaintext.tag,t=plaintext.encrypt),this.switch.crypto={tag:e,encrypt:t}}enableCircuitRelay(e){(e=e||{}).enabled&&(e.hop||Object.assign(e,{hop:{enabled:!1,active:!1}}),this.switch.transport.add(src$1l.tag,new src$1l(this.switch,e)))}reuse(){this.switch.identify=!0,this.switch.handle(src$1n.multicodec,(e,t)=>{src$1n.listener(t,this.switch._peerInfo)})}}var manager$1=ConnectionManager;function getPeerInfo(e,t){let r;if(src$t.isPeerInfo(e))return t.put(e);if(src$2.isMultiaddr(e)){const n=e.getPeerId();try{r=t.get(n)}catch(e){r=new src$t(src$s.createFromB58String(n))}return r.multiaddrs.add(e),r}if(src$s.isPeerId(e)){const r=e.toB58String();try{return t.get(r)}catch(e){throw new Error(`Couldnt get PeerInfo for ${r}`)}}throw new Error("peer type not recognized")}var getPeerInfo_1=getPeerInfo;const{DIAL_ABORTED:DIAL_ABORTED,ERR_BLACKLISTED:ERR_BLACKLISTED}=errors$8,log$B=src$1m("libp2p:switch:dial");function createConnectionWithProtocol({protocol:e,connection:t,callback:r}){if(!e)return r();t.shake(e,(e,n)=>{if(!n)return r(e);n.setPeerInfo(t.theirPeerInfo),r(null,n)})}log$B.error=src$1m("libp2p:switch:dial:error");class Queue$1{constructor(e,t,r){this.id=e,this.switch=t,this._queue=[],this.blackListed=null,this.blackListCount=0,this.isRunning=!1,this.onStopped=r}get length(){return this._queue.length}add(e,t,r){if(!this.isDialAllowed())return nextTick(r,ERR_BLACKLISTED());this._queue.push({protocol:e,useFSM:t,callback:r})}isDialAllowed(){return!this.blackListed||Date.now()>this.blackListed&&(this.blackListed=null,!0)}start(){return!this.isRunning&&(log$B("starting dial queue to %s",this.id),this.isRunning=!0,this._run(),!0)}stop(){this.isRunning&&(log$B("stopping dial queue to %s",this.id),this.isRunning=!1,this.onStopped(this.id))}abort(){for(;this.length>0;){this._queue.shift().callback(DIAL_ABORTED())}this.stop()}blacklist(){if(this.blackListCount++,this.blackListCount>=this.switch.dialer.BLACK_LIST_ATTEMPTS)return void(this.blackListed=1/0);let e=this.switch.dialer.BLACK_LIST_TTL*Math.pow(this.blackListCount,3);const t=.9*e,r=1.1*e;e=Math.floor(Math.random()*(r-t)+t),this.blackListed=Date.now()+e,this.abort()}_getOrCreateConnection(e){let t=this.switch.connection.getOne(this.id),r=!1;return t||(t=new connection$1({_switch:this.switch,peerInfo:e,muxer:null,conn:null}),this.switch.connection.add(t),t.once("connected",()=>t.protect()),t.once("private",()=>t.encrypt()),t.once("encrypted",()=>t.upgrade()),r=!0),{connectionFSM:t,didCreate:r}}_run(){if(this.length<1||!this.isRunning)return log$B("stopping the queue for %s",this.id),this.stop();const e=once_1$1(()=>{log$B("starting next dial to %s",this.id),this._run()}),t=this.switch._peerBook.get(this.id);let r=this._queue.shift(),{connectionFSM:n,didCreate:i}=this._getOrCreateConnection(t);if(r.useFSM&&nextTick(r.callback,null,n),["MUXED","CONNECTED"].includes(n.getState()))return r.connection=n,createConnectionWithProtocol(r),void e();n.once("error",e=>{r.callback(e),t.protocols.size>0&&t.isConnected()||this.blacklist()}),n.once("close",()=>{e()}),n.once("muxed",()=>{this.blackListCount=0,r.connection=n,createConnectionWithProtocol(r),e()}),n.once("unmuxed",()=>{this.blackListCount=0,r.connection=n,createConnectionWithProtocol(r),e()}),i&&n.dial()}}var queue$2=Queue$1,time=function(){var e=process.hrtime();return Math.floor(1e3*e[0]+e[1]/1e6)};function Retimer(e,t,r){var n=this;this._started=time(),this._rescheduled=0,this._scheduled=t,this._args=r,this._timer=setTimeout(function t(){n._rescheduled>0?(n._scheduled=n._rescheduled-(time()-n._started),n._timer=setTimeout(t,n._scheduled),n._rescheduled=0):e.apply(null,n._args)},t)}function retimer(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("timeout needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new Retimer(arguments[0],arguments[1],e)}Retimer.prototype.reschedule=function(e){var t=time();return!(t+e-(this._started+this._scheduled)<0)&&(this._started=t,this._rescheduled=e,!0)},Retimer.prototype.clear=function(){clearTimeout(this._timer)};var retimer_1=retimer;const{DIAL_ABORTED:DIAL_ABORTED$1}=errors$8,{QUARTER_HOUR:QUARTER_HOUR,PRIORITY_HIGH:PRIORITY_HIGH}=constants$e,log$C=src$1m("libp2p:switch:dial:manager"),noop$d=()=>{};class DialQueueManager{constructor(e){this._queue=new Set,this._coldCallQueue=new Set,this._dialingQueues=new Set,this._queues={},this.switch=e,this._cleanInterval=retimer_1(this._clean.bind(this),QUARTER_HOUR),this.start()}_clean(){Object.values(this._queues).forEach(e=>{if(e.blackListed===1/0)return e.abort(),void delete this._queues[e.id];if(!e.blackListed&&!e.isRunning&&e.length<1){let t=!1;try{const r=this.switch._peerBook.get(e.id);t=Boolean(r.isConnected())}catch(e){}t||(e.abort(),delete this._queues[e.id])}}),this._cleanInterval.reschedule(QUARTER_HOUR)}start(){this.isRunning=!0}stop(){this.isRunning=!1,this._queue.clear(),this._coldCallQueue.clear(),this._cleanInterval.clear(),Object.values(this._queues).forEach(e=>{e.abort(),delete this._queues[e.id]})}add({peerInfo:e,protocol:t,options:r,callback:n}){n=n?once_1$1(n):noop$d;const i=this.getQueue(e);if(r.priority>PRIORITY_HIGH){if(this._coldCallQueue.size>=this.switch.dialer.MAX_COLD_CALLS)return nextTick(n,DIAL_ABORTED$1());if(this._queue.has(i.id))return nextTick(n,DIAL_ABORTED$1())}i.add(t,r.useFSM,n),e.isConnected()?i.start():i.isDialAllowed()&&(i.isRunning||(r.priority<=PRIORITY_HIGH?(this._queue.add(i.id),this._coldCallQueue.delete(i.id)):this._coldCallQueue.add(i.id)),this.run())}run(){if(this.isRunning&&this._dialingQueues.size<this.switch.dialer.MAX_PARALLEL_DIALS){let e={done:!0};if(this._queue.size>0?(e=this._queue.values().next(),this._queue.delete(e.value)):this._coldCallQueue.size>0&&(e=this._coldCallQueue.values().next(),this._coldCallQueue.delete(e.value)),e.done)return;let t=this._queues[e.value];if(!t)return void log$C("missing queue %s, maybe it was aborted?",e.value);this._dialingQueues.add(t.id),t.start()}}clearBlacklist(e){const t=this.getQueue(e);t.blackListed=null,t.blackListCount=0}_onQueueStopped(e){this._dialingQueues.delete(e),this.run()}getQueue(e){const t=e.id.toB58String();return this._queues[t]=this._queues[t]||new queue$2(t,this.switch,this._onQueueStopped.bind(this)),this._queues[t]}}var queueManager=DialQueueManager;const{BLACK_LIST_ATTEMPTS:BLACK_LIST_ATTEMPTS,BLACK_LIST_TTL:BLACK_LIST_TTL,MAX_COLD_CALLS:MAX_COLD_CALLS,MAX_PARALLEL_DIALS:MAX_PARALLEL_DIALS,PRIORITY_HIGH:PRIORITY_HIGH$1,PRIORITY_LOW:PRIORITY_LOW}=constants$e;var dialer$3=function(e){const t=new queueManager(e);function r({peerInfo:r,protocol:n,options:i,callback:o}){"function"==typeof n&&(o=n,n=null);try{r=getPeerInfo_1(r,e._peerBook)}catch(e){return o(e)}t.add({peerInfo:r,protocol:n,options:i,callback:o})}return e.state.on("STARTED:enter",function(e){t.start(),e()}),e.state.on("STOPPING:enter",function(e){t.stop(),e()}),{connect:function(e,t,n){"function"==typeof t&&(n=t,t=null),r({peerInfo:e,protocol:null,options:t={useFSM:!1,priority:PRIORITY_LOW,...t},callback:n})},dial:function(e,t,n){r({peerInfo:e,protocol:t,options:{useFSM:!1,priority:PRIORITY_HIGH$1},callback:n})},dialFSM:function(e,t,n){r({peerInfo:e,protocol:t,options:{useFSM:!0,priority:PRIORITY_HIGH$1},callback:n})},clearBlacklist:function(e){t.clearBlacklist(e)},BLACK_LIST_ATTEMPTS:isNaN(e._options.blackListAttempts)?BLACK_LIST_ATTEMPTS:e._options.blackListAttempts,BLACK_LIST_TTL:isNaN(e._options.blacklistTTL)?BLACK_LIST_TTL:e._options.blacklistTTL,MAX_COLD_CALLS:isNaN(e._options.maxColdCalls)?MAX_COLD_CALLS:e._options.maxColdCalls,MAX_PARALLEL_DIALS:isNaN(e._options.maxParallelDials)?MAX_PARALLEL_DIALS:e._options.maxParallelDials}};class IncomingConnectionFSM extends base$6{constructor({connection:e,_switch:t,transportKey:r,peerInfo:n}){super({_switch:t,name:`inc:${t._peerInfo.id.toB58String().slice(0,8)}`}),this.conn=e,this.theirPeerInfo=n||null,this.theirB58Id=this.theirPeerInfo?this.theirPeerInfo.id.toB58String():null,this.ourPeerInfo=this.switch._peerInfo,this.transportKey=r,this.protocolMuxer=this.switch.protocolMuxer(this.transportKey),this.msListener=new src$1p.Listener,this._state=fsmEvent_1("DIALED",{DISCONNECTED:{disconnect:"DISCONNECTED"},DIALED:{privatize:"PRIVATIZING",encrypt:"ENCRYPTING"},PRIVATIZING:{done:"PRIVATIZED",disconnect:"DISCONNECTING"},PRIVATIZED:{encrypt:"ENCRYPTING"},ENCRYPTING:{done:"ENCRYPTED",disconnect:"DISCONNECTING"},ENCRYPTED:{upgrade:"UPGRADING",disconnect:"DISCONNECTING"},UPGRADING:{done:"MUXED"},MUXED:{disconnect:"DISCONNECTING"},DISCONNECTING:{done:"DISCONNECTED"}}),this._state.on("DISCONNECTED",()=>this._onDisconnected()),this._state.on("PRIVATIZING",()=>this._onPrivatizing()),this._state.on("PRIVATIZED",()=>this._onPrivatized()),this._state.on("ENCRYPTING",()=>this._onEncrypting()),this._state.on("ENCRYPTED",()=>{this.log("successfully encrypted connection to %s",this.theirB58Id||"unknown peer"),this.emit("encrypted",this.conn)}),this._state.on("UPGRADING",()=>this._onUpgrading()),this._state.on("MUXED",()=>{this.log("successfully muxed connection to %s",this.theirB58Id||"unknown peer"),this.emit("muxed",this.conn)}),this._state.on("DISCONNECTING",()=>{this._state("done")})}_onEncrypting(){this.log("encrypting connection via %s",this.switch.crypto.tag),this.msListener.addHandler(this.switch.crypto.tag,(e,t)=>{this.conn=this.switch.crypto.encrypt(this.ourPeerInfo.id,t,void 0,e=>{if(e)return this.close(e);this.conn.getPeerInfo((e,t)=>{this.theirPeerInfo=t,this._state("done")})})},null),this.msListener.handle(this.conn,e=>{e&&this.emit("crypto handshaking failed",e)})}_onUpgrading(){this.log("adding the protocol muxer to the connection"),this.protocolMuxer(this.conn,this.msListener),this._state("done")}}var incoming=classIs(IncomingConnectionFSM,{className:"IncomingConnectionFSM",symbolName:"libp2p-switch/IncomingConnectionFSM"});function listener$6(e){const t=src$1m("libp2p:switch:listener");return function(r,n){return function(i){t("received incoming connection for transport %s",r),i.getPeerInfo((o,s)=>{const a=r?observeConnection(r,null,i,e.observer):i,c=new incoming({connection:a,_switch:e,transportKey:r,peerInfo:s});c.once("error",e=>t(e)),c.once("private",e=>{if(n)return n(e);c.encrypt()}),c.once("encrypted",()=>c.upgrade()),c.protect()})}}}var handler=listener$6;const log$D=src$1m("libp2p:switch:protocol-muxer");log$D.error=src$1m("libp2p:switch:protocol-muxer:error");var protocolMuxer=function(e,t){return r=>(n,i)=>{const o=i||new src$1p.Listener;let s;s=r&&!i?observeConnection(r,null,n,t):n,Object.keys(e).forEach(r=>{if(!r)return;o.addHandler(r,(r,n)=>{log$D("registering handler with protocol %s",r);const i=e[r];if(i){const e=i&&i.handlerFunc;e&&e(i,observeConnection(null,r,n,t))}},e[r].matchFunc)}),o.handle(s,e=>{e&&log$D.error("multistream handshake failed",e)})}},observer=e=>{const t=Object.assign(new events$1,{incoming:r("in"),outgoing:r("out")});return e.on("peer-mux-established",e=>{t.emit("peer:connected",e.id.toB58String())}),e.on("peer-mux-closed",e=>{t.emit("peer:closed",e.id.toB58String())}),t;function r(e){return(r,n,i)=>map$3(o=>(function(e,r,n,i,o){e.then(e=>{if(e){const s=e.id.toB58String();t.emit("message",s,r,n,i,o)}})}(i,r,n,e,o.length),o))}},isNumeric$4=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil$3=Math.ceil,mathfloor$3=Math.floor,bignumberError$3="[BigNumber Error] ",tooManyDigits$3=bignumberError$3+"Number primitive has more than 15 significant digits: ",BASE$3=1e14,LOG_BASE$3=14,MAX_SAFE_INTEGER$6=9007199254740991,POWS_TEN$3=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE$3=1e7,MAX$4=1e9;function clone$8(e){var t,r,n,i,o,s,a,c,u,f=E.prototype={constructor:E,toString:null,valueOf:null},l=new E(1),d=20,h=4,p=-7,b=21,m=-1e7,g=1e7,y=!1,v=1,_=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},S="0123456789abcdefghijklmnopqrstuvwxyz";function E(e,t){var i,o,s,a,c,u,f,l,p=this;if(!(p instanceof E))return new E(e,t);if(null==t){if(e&&!0===e._isBigNumber)return p.s=e.s,void(!e.c||e.e>g?p.c=p.e=null:e.e<m?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,c=e;c>=10;c/=10,a++);return void(a>g?p.c=p.e=null:(p.e=a,p.c=[e]))}l=String(e)}else{if(!isNumeric$4.test(l=String(e)))return n(p,l,u);p.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}(a=l.indexOf("."))>-1&&(l=l.replace(".","")),(c=l.search(/e/i))>0?(a<0&&(a=c),a+=+l.slice(c+1),l=l.substring(0,c)):a<0&&(a=l.length)}else{if(intCheck$3(t,2,S.length,"Base"),10==t)return k(p=new E(e),d+p.e+1,h);if(l=String(e),u="number"==typeof e){if(0*e!=0)return n(p,l,u,t);if(p.s=1/e<0?(l=l.slice(1),-1):1,E.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits$3+e)}else p.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(i=S.slice(0,t),a=c=0,f=l.length;c<f;c++)if(i.indexOf(o=l.charAt(c))<0){if("."==o){if(c>a){a=f;continue}}else if(!s&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){s=!0,c=-1,a=0;continue}return n(p,String(e),u,t)}u=!1,(a=(l=r(l,t,10,p.s)).indexOf("."))>-1?l=l.replace(".",""):a=l.length}for(c=0;48===l.charCodeAt(c);c++);for(f=l.length;48===l.charCodeAt(--f););if(l=l.slice(c,++f)){if(f-=c,u&&E.DEBUG&&f>15&&(e>MAX_SAFE_INTEGER$6||e!==mathfloor$3(e)))throw Error(tooManyDigits$3+p.s*e);if((a=a-c-1)>g)p.c=p.e=null;else if(a<m)p.c=[p.e=0];else{if(p.e=a,p.c=[],c=(a+1)%LOG_BASE$3,a<0&&(c+=LOG_BASE$3),c<f){for(c&&p.c.push(+l.slice(0,c)),f-=LOG_BASE$3;c<f;)p.c.push(+l.slice(c,c+=LOG_BASE$3));c=LOG_BASE$3-(l=l.slice(c)).length}else c-=f;for(;c--;l+="0");p.c.push(+l)}}else p.c=[p.e=0]}function w(e,t,r,n){var i,o,s,a,c;if(null==r?r=h:intCheck$3(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)c=coeffToString$3(e.c),c=1==n||2==n&&(s<=p||s>=b)?toExponential$3(c,s):toFixedPoint$3(c,s,"0");else if(o=(e=k(new E(e),t,r)).e,a=(c=coeffToString$3(e.c)).length,1==n||2==n&&(t<=o||o<=p)){for(;a<t;c+="0",a++);c=toExponential$3(c,o)}else if(t-=s,c=toFixedPoint$3(c,o,"0"),o+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=o-a)>0)for(o+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function C(e,t){for(var r,n=1,i=new E(e[0]);n<e.length;n++){if(!(r=new E(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function A(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*LOG_BASE$3-1)>g?e.c=e.e=null:r<m?e.c=[e.e=0]:(e.e=r,e.c=t),e}function k(e,t,r,n){var i,o,s,a,c,u,f,l=e.c,d=POWS_TEN$3;if(l){e:{for(i=1,a=l[0];a>=10;a/=10,i++);if((o=t-i)<0)o+=LOG_BASE$3,s=t,f=(c=l[u=0])/d[i-s-1]%10|0;else if((u=mathceil$3((o+1)/LOG_BASE$3))>=l.length){if(!n)break e;for(;l.length<=u;l.push(0));c=f=0,i=1,s=(o%=LOG_BASE$3)-LOG_BASE$3+1}else{for(c=a=l[u],i=1;a>=10;a/=10,i++);f=(s=(o%=LOG_BASE$3)-LOG_BASE$3+i)<0?0:c/d[i-s-1]%10|0}if(n=n||t<0||null!=l[u+1]||(s<0?c:c%d[i-s-1]),n=r<4?(f||n)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||n||6==r&&(o>0?s>0?c/d[i-s]:0:l[u-1])%10&1||r==(e.s<0?8:7)),t<1||!l[0])return l.length=0,n?(t-=e.e+1,l[0]=d[(LOG_BASE$3-t%LOG_BASE$3)%LOG_BASE$3],e.e=-t||0):l[0]=e.e=0,e;if(0==o?(l.length=u,a=1,u--):(l.length=u+1,a=d[LOG_BASE$3-o],l[u]=s>0?mathfloor$3(c/d[i-s]%d[s])*a:0),n)for(;;){if(0==u){for(o=1,s=l[0];s>=10;s/=10,o++);for(s=l[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(e.e++,l[0]==BASE$3&&(l[0]=1));break}if(l[u]+=a,l[u]!=BASE$3)break;l[u--]=0,a=1}for(o=l.length;0===l[--o];l.pop());}e.e>g?e.c=e.e=null:e.e<m&&(e.c=[e.e=0])}return e}function T(e){var t,r=e.e;return null===r?e.toString():(t=coeffToString$3(e.c),t=r<=p||r>=b?toExponential$3(t,r):toFixedPoint$3(t,r,"0"),e.s<0?"-"+t:t)}return E.clone=clone$8,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(bignumberError$3+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(intCheck$3(r=e[t],0,MAX$4,t),d=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(intCheck$3(r=e[t],0,8,t),h=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(intCheck$3(r[0],-MAX$4,0,t),intCheck$3(r[1],0,MAX$4,t),p=r[0],b=r[1]):(intCheck$3(r,-MAX$4,MAX$4,t),p=-(b=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)intCheck$3(r[0],-MAX$4,-1,t),intCheck$3(r[1],1,MAX$4,t),m=r[0],g=r[1];else{if(intCheck$3(r,-MAX$4,MAX$4,t),!r)throw Error(bignumberError$3+t+" cannot be zero: "+r);m=-(g=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(bignumberError$3+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw y=!r,Error(bignumberError$3+"crypto unavailable");y=r}else y=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(intCheck$3(r=e[t],0,9,t),v=r),e.hasOwnProperty(t="POW_PRECISION")&&(intCheck$3(r=e[t],0,MAX$4,t),_=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(bignumberError$3+t+" not an object: "+r);$=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(bignumberError$3+t+" invalid: "+r);S=r}}return{DECIMAL_PLACES:d,ROUNDING_MODE:h,EXPONENTIAL_AT:[p,b],RANGE:[m,g],CRYPTO:y,MODULO_MODE:v,POW_PRECISION:_,FORMAT:$,ALPHABET:S}},E.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!E.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-MAX$4&&i<=MAX$4&&i===mathfloor$3(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%LOG_BASE$3)<1&&(t+=LOG_BASE$3),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=BASE$3||r!==mathfloor$3(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(bignumberError$3+"Invalid BigNumber: "+e)},E.maximum=E.max=function(){return C(arguments,f.lt)},E.minimum=E.min=function(){return C(arguments,f.gt)},E.random=(i=9007199254740992*Math.random()&2097151?function(){return mathfloor$3(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,s,a=0,c=[],u=new E(l);if(null==e?e=d:intCheck$3(e,0,MAX$4),o=mathceil$3(e/LOG_BASE$3),y)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(s=131072*t[a]+(t[a+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[a]=r[0],t[a+1]=r[1]):(c.push(s%1e14),a+=2);a=o/2}else{if(!crypto.randomBytes)throw y=!1,Error(bignumberError$3+"crypto unavailable");for(t=crypto.randomBytes(o*=7);a<o;)(s=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(c.push(s%1e14),a+=7);a=o/7}if(!y)for(;a<o;)(s=i())<9e15&&(c[a++]=s%1e14);for(o=c[--a],e%=LOG_BASE$3,o&&e&&(s=POWS_TEN$3[LOG_BASE$3-e],c[a]=mathfloor$3(o/s)*s);0===c[a];c.pop(),a--);if(a<0)c=[n=0];else{for(n=-1;0===c[0];c.splice(0,1),n-=LOG_BASE$3);for(a=1,s=c[0];s>=10;s/=10,a++);a<LOG_BASE$3&&(n-=LOG_BASE$3-a)}return u.e=n,u.c=c,u}),E.sum=function(){for(var e=1,t=arguments,r=new E(t[0]);e<t.length;)r=r.plus(t[e++]);return r},r=function(){function e(e,t,r,n){for(var i,o,s=[0],a=0,c=e.length;a<c;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(r,n,i,o,s){var a,c,u,f,l,p,b,m,g=r.indexOf("."),y=d,v=h;for(g>=0&&(f=_,_=0,r=r.replace(".",""),p=(m=new E(n)).pow(r.length-g),_=f,m.c=e(toFixedPoint$3(coeffToString$3(p.c),p.e,"0"),10,i,"0123456789"),m.e=m.c.length),u=f=(b=e(r,n,i,s?(a=S,"0123456789"):(a="0123456789",S))).length;0==b[--f];b.pop());if(!b[0])return a.charAt(0);if(g<0?--u:(p.c=b,p.e=u,p.s=o,b=(p=t(p,m,y,v,i)).c,l=p.r,u=p.e),g=b[c=u+y+1],f=i/2,l=l||c<0||null!=b[c+1],l=v<4?(null!=g||l)&&(0==v||v==(p.s<0?3:2)):g>f||g==f&&(4==v||l||6==v&&1&b[c-1]||v==(p.s<0?8:7)),c<1||!b[0])r=l?toFixedPoint$3(a.charAt(1),-y,a.charAt(0)):a.charAt(0);else{if(b.length=c,l)for(--i;++b[--c]>i;)b[c]=0,c||(++u,b=[1].concat(b));for(f=b.length;!b[--f];);for(g=0,r="";g<=f;r+=a.charAt(b[g++]));r=toFixedPoint$3(r,u,a.charAt(0))}return r}}(),t=function(){function e(e,t,r){var n,i,o,s,a=0,c=e.length,u=t%SQRT_BASE$3,f=t/SQRT_BASE$3|0;for(e=e.slice();c--;)a=((i=u*(o=e[c]%SQRT_BASE$3)+(n=f*o+(s=e[c]/SQRT_BASE$3|0)*u)%SQRT_BASE$3*SQRT_BASE$3+a)/r|0)+(n/SQRT_BASE$3|0)+f*s,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,s,a){var c,u,f,l,d,h,p,b,m,g,y,v,_,$,S,w,C,A=n.s==i.s?1:-1,T=n.c,I=i.c;if(!(T&&T[0]&&I&&I[0]))return new E(n.s&&i.s&&(T?!I||T[0]!=I[0]:I)?T&&0==T[0]||!I?0*A:A/0:NaN);for(m=(b=new E(A)).c=[],A=o+(u=n.e-i.e)+1,a||(a=BASE$3,u=bitFloor$3(n.e/LOG_BASE$3)-bitFloor$3(i.e/LOG_BASE$3),A=A/LOG_BASE$3|0),f=0;I[f]==(T[f]||0);f++);if(I[f]>(T[f]||0)&&u--,A<0)m.push(1),l=!0;else{for($=T.length,w=I.length,f=0,A+=2,(d=mathfloor$3(a/(I[0]+1)))>1&&(I=e(I,d,a),T=e(T,d,a),w=I.length,$=T.length),_=w,y=(g=T.slice(0,w)).length;y<w;g[y++]=0);C=I.slice(),C=[0].concat(C),S=I[0],I[1]>=a/2&&S++;do{if(d=0,(c=t(I,g,w,y))<0){if(v=g[0],w!=y&&(v=v*a+(g[1]||0)),(d=mathfloor$3(v/S))>1)for(d>=a&&(d=a-1),p=(h=e(I,d,a)).length,y=g.length;1==t(h,g,p,y);)d--,r(h,w<p?C:I,p,a),p=h.length,c=1;else 0==d&&(c=d=1),p=(h=I.slice()).length;if(p<y&&(h=[0].concat(h)),r(g,h,y,a),y=g.length,-1==c)for(;t(I,g,w,y)<1;)d++,r(g,w<y?C:I,y,a),y=g.length}else 0===c&&(d++,g=[0]);m[f++]=d,g[0]?g[y++]=T[_]||0:(g=[T[_]],y=1)}while((_++<$||null!=g[0])&&A--);l=null!=g[0],m[0]||m.splice(0,1)}if(a==BASE$3){for(f=1,A=m[0];A>=10;A/=10,f++);k(b,o+(b.e=f+u*LOG_BASE$3-1)+1,s,l)}else b.e=u,b.r=+l;return b}}(),o=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,a=/^\.([^.]+)$/,c=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(e,t,r,n){var i,f=r?t:t.replace(u,"");if(c.test(f))e.s=isNaN(f)?null:f<0?-1:1;else{if(!r&&(f=f.replace(o,function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t}),n&&(i=n,f=f.replace(s,"$1").replace(a,"0.$1")),t!=f))return new E(f,i);if(E.DEBUG)throw Error(bignumberError$3+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},f.absoluteValue=f.abs=function(){var e=new E(this);return e.s<0&&(e.s=1),e},f.comparedTo=function(e,t){return compare$3(this,new E(e,t))},f.decimalPlaces=f.dp=function(e,t){var r,n,i,o=this;if(null!=e)return intCheck$3(e,0,MAX$4),null==t?t=h:intCheck$3(t,0,8),k(new E(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-bitFloor$3(this.e/LOG_BASE$3))*LOG_BASE$3,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},f.dividedBy=f.div=function(e,r){return t(this,new E(e,r),d,h)},f.dividedToIntegerBy=f.idiv=function(e,r){return t(this,new E(e,r),0,1)},f.exponentiatedBy=f.pow=function(e,t){var r,n,i,o,s,a,c,u,f=this;if((e=new E(e)).c&&!e.isInteger())throw Error(bignumberError$3+"Exponent not an integer: "+T(e));if(null!=t&&(t=new E(t)),s=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return u=new E(Math.pow(+T(f),s?2-isOdd$3(e):+T(e))),t?u.mod(t):u;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new E(NaN);(n=!a&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||s&&f.c[1]>=24e7:f.c[0]<8e13||s&&f.c[0]<=9999975e7)))return o=f.s<0&&isOdd$3(e)?-0:0,f.e>-1&&(o=1/o),new E(a?1/o:o);_&&(o=mathceil$3(_/LOG_BASE$3+2))}for(s?(r=new E(.5),a&&(e.s=1),c=isOdd$3(e)):c=(i=Math.abs(+T(e)))%2,u=new E(l);;){if(c){if(!(u=u.times(f)).c)break;o?u.c.length>o&&(u.c.length=o):n&&(u=u.mod(t))}if(i){if(0===(i=mathfloor$3(i/2)))break;c=i%2}else if(k(e=e.times(r),e.e+1,1),e.e>14)c=isOdd$3(e);else{if(0===(i=+T(e)))break;c=i%2}f=f.times(f),o?f.c&&f.c.length>o&&(f.c.length=o):n&&(f=f.mod(t))}return n?u:(a&&(u=l.div(u)),t?u.mod(t):o?k(u,_,h,void 0):u)},f.integerValue=function(e){var t=new E(this);return null==e?e=h:intCheck$3(e,0,8),k(t,t.e+1,e)},f.isEqualTo=f.eq=function(e,t){return 0===compare$3(this,new E(e,t))},f.isFinite=function(){return!!this.c},f.isGreaterThan=f.gt=function(e,t){return compare$3(this,new E(e,t))>0},f.isGreaterThanOrEqualTo=f.gte=function(e,t){return 1===(t=compare$3(this,new E(e,t)))||0===t},f.isInteger=function(){return!!this.c&&bitFloor$3(this.e/LOG_BASE$3)>this.c.length-2},f.isLessThan=f.lt=function(e,t){return compare$3(this,new E(e,t))<0},f.isLessThanOrEqualTo=f.lte=function(e,t){return-1===(t=compare$3(this,new E(e,t)))||0===t},f.isNaN=function(){return!this.s},f.isNegative=function(){return this.s<0},f.isPositive=function(){return this.s>0},f.isZero=function(){return!!this.c&&0==this.c[0]},f.minus=function(e,t){var r,n,i,o,s=this,a=s.s;if(t=(e=new E(e,t)).s,!a||!t)return new E(NaN);if(a!=t)return e.s=-t,s.plus(e);var c=s.e/LOG_BASE$3,u=e.e/LOG_BASE$3,f=s.c,l=e.c;if(!c||!u){if(!f||!l)return f?(e.s=-t,e):new E(l?s:NaN);if(!f[0]||!l[0])return l[0]?(e.s=-t,e):new E(f[0]?s:3==h?-0:0)}if(c=bitFloor$3(c),u=bitFloor$3(u),f=f.slice(),a=c-u){for((o=a<0)?(a=-a,i=f):(u=c,i=l),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(o=(a=f.length)<(t=l.length))?a:t,a=t=0;t<n;t++)if(f[t]!=l[t]){o=f[t]<l[t];break}if(o&&(i=f,f=l,l=i,e.s=-e.s),(t=(n=l.length)-(r=f.length))>0)for(;t--;f[r++]=0);for(t=BASE$3-1;n>a;){if(f[--n]<l[n]){for(r=n;r&&!f[--r];f[r]=t);--f[r],f[n]+=BASE$3}f[n]-=l[n]}for(;0==f[0];f.splice(0,1),--u);return f[0]?A(e,f,u):(e.s=3==h?-1:1,e.c=[e.e=0],e)},f.modulo=f.mod=function(e,r){var n,i,o=this;return e=new E(e,r),!o.c||!e.s||e.c&&!e.c[0]?new E(NaN):!e.c||o.c&&!o.c[0]?new E(o):(9==v?(i=e.s,e.s=1,n=t(o,e,0,3),e.s=i,n.s*=i):n=t(o,e,0,v),(e=o.minus(n.times(e))).c[0]||1!=v||(e.s=o.s),e)},f.multipliedBy=f.times=function(e,t){var r,n,i,o,s,a,c,u,f,l,d,h,p,b,m,g=this,y=g.c,v=(e=new E(e,t)).c;if(!(y&&v&&y[0]&&v[0]))return!g.s||!e.s||y&&!y[0]&&!v||v&&!v[0]&&!y?e.c=e.e=e.s=null:(e.s*=g.s,y&&v?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=bitFloor$3(g.e/LOG_BASE$3)+bitFloor$3(e.e/LOG_BASE$3),e.s*=g.s,(c=y.length)<(l=v.length)&&(p=y,y=v,v=p,i=c,c=l,l=i),i=c+l,p=[];i--;p.push(0));for(b=BASE$3,m=SQRT_BASE$3,i=l;--i>=0;){for(r=0,d=v[i]%m,h=v[i]/m|0,o=i+(s=c);o>i;)r=((u=d*(u=y[--s]%m)+(a=h*u+(f=y[s]/m|0)*d)%m*m+p[o]+r)/b|0)+(a/m|0)+h*f,p[o--]=u%b;p[o]=r}return r?++n:p.splice(0,1),A(e,p,n)},f.negated=function(){var e=new E(this);return e.s=-e.s||null,e},f.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new E(e,t)).s,!i||!t)return new E(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/LOG_BASE$3,s=e.e/LOG_BASE$3,a=n.c,c=e.c;if(!o||!s){if(!a||!c)return new E(i/0);if(!a[0]||!c[0])return c[0]?e:new E(a[0]?n:0*i)}if(o=bitFloor$3(o),s=bitFloor$3(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/BASE$3|0,a[t]=BASE$3===a[t]?0:a[t]%BASE$3;return i&&(a=[i].concat(a),++s),A(e,a,s)},f.precision=f.sd=function(e,t){var r,n,i,o=this;if(null!=e&&e!==!!e)return intCheck$3(e,1,MAX$4),null==t?t=h:intCheck$3(t,0,8),k(new E(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*LOG_BASE$3+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},f.shiftedBy=function(e){return intCheck$3(e,-MAX_SAFE_INTEGER$6,MAX_SAFE_INTEGER$6),this.times("1e"+e)},f.squareRoot=f.sqrt=function(){var e,r,n,i,o,s=this,a=s.c,c=s.s,u=s.e,f=d+4,l=new E("0.5");if(1!==c||!a||!a[0])return new E(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+T(s)))||c==1/0?(((r=coeffToString$3(a)).length+u)%2==0&&(r+="0"),c=Math.sqrt(+r),u=bitFloor$3((u+1)/2)-(u<0||u%2),n=new E(r=c==1/0?"1e"+u:(r=c.toExponential()).slice(0,r.indexOf("e")+1)+u)):n=new E(c+""),n.c[0])for((c=(u=n.e)+f)<3&&(c=0);;)if(o=n,n=l.times(o.plus(t(s,o,f,1))),coeffToString$3(o.c).slice(0,c)===(r=coeffToString$3(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(r=r.slice(c-3,c+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(k(n,n.e+d+2,1),e=!n.times(n).eq(s));break}if(!i&&(k(o,o.e+d+2,0),o.times(o).eq(s))){n=o;break}f+=4,c+=4,i=1}return k(n,n.e+d+1,h,e)},f.toExponential=function(e,t){return null!=e&&(intCheck$3(e,0,MAX$4),e++),w(this,e,t,1)},f.toFixed=function(e,t){return null!=e&&(intCheck$3(e,0,MAX$4),e=e+this.e+1),w(this,e,t)},f.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=$;else if("object"!=typeof r)throw Error(bignumberError$3+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,s=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",f=s[0],l=s[1],d=i.s<0,h=d?f.slice(1):f,p=h.length;if(c&&(o=a,a=c,c=o,p-=o),a>0&&p>0){for(o=p%a||a,f=h.substr(0,o);o<p;o+=a)f+=u+h.substr(o,a);c>0&&(f+=u+h.slice(o)),d&&(f="-"+f)}n=l?f+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):f}return(r.prefix||"")+n+(r.suffix||"")},f.toFraction=function(e){var r,n,i,o,s,a,c,u,f,d,p,b,m=this,y=m.c;if(null!=e&&(!(c=new E(e)).isInteger()&&(c.c||1!==c.s)||c.lt(l)))throw Error(bignumberError$3+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+T(c));if(!y)return new E(m);for(r=new E(l),f=n=new E(l),i=u=new E(l),b=coeffToString$3(y),s=r.e=b.length-m.e-1,r.c[0]=POWS_TEN$3[(a=s%LOG_BASE$3)<0?LOG_BASE$3+a:a],e=!e||c.comparedTo(r)>0?s>0?r:f:c,a=g,g=1/0,c=new E(b),u.c[0]=0;d=t(c,r,0,1),1!=(o=n.plus(d.times(i))).comparedTo(e);)n=i,i=o,f=u.plus(d.times(o=f)),u=o,r=c.minus(d.times(o=r)),c=o;return o=t(e.minus(n),i,0,1),u=u.plus(o.times(f)),n=n.plus(o.times(i)),u.s=f.s=m.s,p=t(f,i,s*=2,h).minus(m).abs().comparedTo(t(u,n,s,h).minus(m).abs())<1?[f,i]:[u,n],g=a,p},f.toNumber=function(){return+T(this)},f.toPrecision=function(e,t){return null!=e&&intCheck$3(e,1,MAX$4),w(this,e,t,2)},f.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=p||o>=b?toExponential$3(coeffToString$3(n.c),o):toFixedPoint$3(coeffToString$3(n.c),o,"0"):10===e?t=toFixedPoint$3(coeffToString$3((n=k(new E(n),d+o+1,h)).c),n.e,"0"):(intCheck$3(e,2,S.length,"Base"),t=r(toFixedPoint$3(coeffToString$3(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},f.valueOf=f.toJSON=function(){return T(this)},f._isBigNumber=!0,f[Symbol.toStringTag]="BigNumber",f[Symbol.for("nodejs.util.inspect.custom")]=f.valueOf,null!=e&&E.set(e),E}function bitFloor$3(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString$3(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=LOG_BASE$3-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function compare$3(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,c=e.e,u=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=c==u,!i||!o)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=o.length)?c:u,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return c==u?0:c>u^r?1:-1}function intCheck$3(e,t,r,n){if(e<t||e>r||e!==mathfloor$3(e))throw Error(bignumberError$3+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function isOdd$3(e){var t=e.c.length-1;return bitFloor$3(e.e/LOG_BASE$3)==t&&e.c[t]%2!=0}function toExponential$3(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint$3(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var BigNumber$3=clone$8(),bignumber$4=Object.freeze({BigNumber:BigNumber$3,default:BigNumber$3}),Big$2=getCjsExportFromNamespace(bignumber$4);class Stats$2 extends events$1{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);const r=this._options.movingAverageIntervals;for(var n=0;n<e.length;n++){var i=e[n];this._stats[i]=Big$2(0),this._movingAverages[i]={};for(var o=0;o<r.length;o++){var s=r[o];(this._movingAverages[i][s]=movingAverage(s)).push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._queue.push([e,t,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout?this._timeout.reschedule(this._nextTimeout()):this._timeout=retimer_1(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const t=e=this._queue.shift();this._applyOp(t)}this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;Object.keys(this._stats).forEach(r=>{this._updateFrequencyFor(r,t,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,t,r){const n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const i=n/(t||1)*1e3;let o=this._movingAverages[e];o||(o=this._movingAverages[e]={});const s=this._options.movingAverageIntervals;for(var a=0;a<s.length;a++){var c=s[a],u=o[c];u||(u=o[c]=movingAverage(c)),u.push(r,i)}}_applyOp(e){const t=e[0],r=e[1];if("number"!=typeof r)throw new Error("invalid increment number:",r);let n;n=this._stats.hasOwnProperty(t)?this._stats[t]:this._stats[t]=Big$2(0),this._stats[t]=n.plus(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}var stat$1=Stats$2,oldPeers=e=>{const t=hashlru(e);return t.delete=t.remove,t};const defaultOptions$4={computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50},initialCounters=["dataReceived","dataSent"],directionToEvent={in:"dataReceived",out:"dataSent"};var stats$1=(e,t)=>{const r=Object.assign({},defaultOptions$4,t),n=new stat$1(initialCounters,r),i=Object.assign(new events$1,{start:function(){e.on("message",u),n.start();for(let e of s.values())e.start();for(let e of a.values())e.start()},stop:function(){e.removeListener("message",u),n.stop();for(let e of s.values())e.stop();for(let e of a.values())e.stop()},global:n,peers:()=>Array.from(s.keys()),forPeer:e=>s.get(e)||o.get(e),transports:()=>Array.from(a.keys()),forTransport:e=>a.get(e),protocols:()=>Array.from(c.keys()),forProtocol:e=>c.get(e)});n.on("update",f);const o=oldPeers(r.maxOldPeersRetention),s=new Map,a=new Map,c=new Map;return e.on("peer:closed",e=>{const t=s.get(e);t&&(t.removeListener("update",f),t.stop(),s.delete(e),o.set(e,t))}),i;function u(e,t,i,u,l){const d=directionToEvent[u];if(t){n.push(d,l);let t=s.get(e);t||((t=o.get(e))?o.delete(e):t=new stat$1(initialCounters,r),t.on("update",f),t.start(),s.set(e,t)),t.push(d,l)}if(t){let e=a.get(t);e||((e=new stat$1(initialCounters,r)).on("update",f),a.set(t,e)),e.push(d,l)}if(i){let e=c.get(i);e||((e=new stat$1(initialCounters,r)).on("update",f),c.set(i,e)),e.push(d,l)}}function f(){i.emit("update")}};const EventEmitter$c=events$1.EventEmitter,log$E=src$1m("libp2p:switch");log$E.error=src$1m("libp2p:switch:error");class Switch extends EventEmitter$c{constructor(e,t,r){super(),assert$t(e,"You must provide a `peerInfo`"),assert$t(t,"You must provide a `peerBook`"),this._peerInfo=e,this._peerBook=t,this._options=r||{},this.setMaxListeners(1/0),this.transports={},this.conns={},this.protocols={},this.muxers={},this.identify=!1,this.crypto=plaintext,this.protector=this._options.protector||null,this.transport=new transport$1(this),this.connection=new manager$1(this),this.observer=observer(this),this.stats=stats$1(this.observer,this._options.stats),this.protocolMuxer=protocolMuxer(this.protocols,this.observer),this._connectionHandler=handler(this),this.state=new fsmEvent_1("STOPPED",{STOPPED:{start:"STARTING",stop:"STOPPING"},STARTING:{done:"STARTED",stop:"STOPPING"},STARTED:{stop:"STOPPING",start:"STARTED"},STOPPING:{stop:"STOPPING",done:"STOPPED"}}),this.state.on("STARTING",()=>{log$E("The switch is starting"),this._onStarting()}),this.state.on("STOPPING",()=>{log$E("The switch is stopping"),this._onStopping()}),this.state.on("STARTED",()=>{log$E("The switch has started"),this.emit("start")}),this.state.on("STOPPED",()=>{log$E("The switch has stopped"),this.emit("stop")}),this.state.on("error",e=>{log$E.error(e),this.emit("error",e)}),this.dialer=dialer$3(this),this.dial=this.dialer.dial,this.dialFSM=this.dialer.dialFSM}availableTransports(e){const t=e.multiaddrs.toArray();return Object.keys(this.transports).filter(e=>this.transports[e].filter(t).length>0).sort((e,t)=>e===src$1l.tag?1:t===src$1l.tag?-1:e<t?-1:1)}handle(e,t,r){this.protocols[e]={handlerFunc:t,matchFunc:r},this._peerInfo.protocols.add(e)}unhandle(e){this.protocols[e]&&delete this.protocols[e],this._peerInfo.protocols.delete(e)}hangUp(e,t){const r=getPeerInfo_1(e,this._peerBook).id.toB58String(),n=[...this.connection.getAllById(r)];each(n,(e,t)=>{e.once("close",t),e.close()},t)}hasTransports(){const e=Object.keys(this.transports).filter(e=>e!==src$1l.tag);return e&&e.length>0}start(e=(()=>{})){this.once("start",e),this.state("start")}stop(e=(()=>{})){this.once("stop",e),this.state("stop")}_onStarting(){this.stats.start(),eachSeries(this.availableTransports(this._peerInfo),(e,t)=>{this.transport.listen(e,{},null,t)},e=>{if(e)return log$E.error(e),this.emit("error",e),this.state("stop");this.state("done")})}_onStopping(){this.stats.stop(),series_1([e=>{each(this.transports,(e,t)=>{each(e.listeners,(e,t)=>{e.close(e=>{e&&log$E.error(e),t()})},t)},e)},e=>each(this.connection.getAll(),(e,t)=>{e.once("close",t),e.close()},e)],e=>{this.state("done")})}}var src$1q=Switch,errors$9=errors$8;src$1q.errors=errors$9;var constants$g={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32},debug$a=createCommonjsModule(function(e,t){var r;function n(e){function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;c++;var i=t.formatters[n];if("function"==typeof i){var o=s[c];r=i.call(e,o),s.splice(c,1),c--}return r}),t.formatArgs.call(e,s),(n.log||t.log||console.log.bind(console)).apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,i=0;i<n;i++)r[i]&&("-"===(e=r[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=ms$b,t.names=[],t.skips=[],t.formatters={}}),debug_1$3=debug$a.coerce,debug_2$3=debug$a.disable,debug_3$3=debug$a.enable,debug_4$3=debug$a.enabled,debug_5$3=debug$a.humanize,debug_6$3=debug$a.names,debug_7$3=debug$a.skips,debug_8$3=debug$a.formatters,browser$m=createCommonjsModule(function(e,t){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=debug$a).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}),browser_1$m=browser$m.log,browser_2$m=browser$m.formatArgs,browser_3$m=browser$m.save,browser_4$m=browser$m.load,browser_5$m=browser$m.useColors,browser_6$m=browser$m.storage,browser_7$m=browser$m.colors,node$p=createCommonjsModule(function(e,t){(t=e.exports=debug$a).init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return n.write(util$j.format.apply(util$j,arguments)+"\n")},t.formatArgs=function(e){var r=this.namespace;if(this.useColors){var n=this.color,i="  [3"+n+";1m"+r+" [0m";e[0]=i+e[0].split("\n").join("\n"+i),e.push("[3"+n+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+r+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=i,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(r)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{});var r=parseInt(process.env.DEBUG_FD,10)||2;1!==r&&2!==r&&util$j.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var n=1===r?process.stdout:2===r?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new tty.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var r=fs;(t=new r.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var n=net;(t=new n.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(r);function i(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).split("\n").map(function(e){return e.trim()}).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)},t.enable(i())}),node_1$m=node$p.init,node_2$m=node$p.log,node_3$m=node$p.formatArgs,node_4$m=node$p.save,node_5$m=node$p.load,node_6$m=node$p.useColors,node_7$m=node$p.colors,node_8$m=node$p.inspectOpts,src$1r=createCommonjsModule(function(e){"undefined"!=typeof process&&"renderer"===process.type?e.exports=browser$m:e.exports=node$p}),handler$1=createCommonjsModule(function(e,t){const r=constants$g.PROTOCOL,n=constants$g.PING_LENGTH,i=src$1r("libp2p-ping");i.error=src$1r("libp2p-ping:error"),(t=e.exports).mount=function(e){e.handle(r,(e,t)=>{const r=pullHandshake({timeout:0}),o=r.handshake;pull(t,r,t),function e(){o.read(n,(t,r)=>{if(!0!==t)return t?i.error(t):(o.write(r),e())})}()})},t.unmount=function(e){e.unhandle(r)}}),handler_1=handler$1.mount,handler_2=handler$1.unmount,util$c=createCommonjsModule(function(e,t){e.exports.rnd=e=>(e||(e=constants$g.PING_LENGTH),src$u.randomBytes(e))}),util_1$8=util$c.rnd;const EventEmitter$d=events$1.EventEmitter,rnd=util$c.rnd,log$F=src$1r("libp2p-ping");log$F.error=src$1r("libp2p-ping:error");const PROTOCOL=constants$g.PROTOCOL,PING_LENGTH=constants$g.PING_LENGTH;class Ping extends EventEmitter$d{constructor(e,t){super(),this._stopped=!1,this.peer=t,this.swarm=e}start(){log$F("dialing %s to %s",PROTOCOL,this.peer.id.toB58String()),this.swarm.dial(this.peer,PROTOCOL,(e,t)=>{if(e)return this.emit("error",e);const r=pullHandshake({timeout:0});this.shake=r.handshake,pull(r,t,r);const n=this;!function e(){let t=new Date,r=rnd(PING_LENGTH);n.shake.write(r),n.shake.read(PING_LENGTH,(i,o)=>{let s=new Date;if(i||!r.equals(o)){const e=new Error("Received wrong ping ack");return n.emit("error",e)}n.emit("ping",s-t),n._stopped||e()})}()})}stop(){!this._stopped&&this.shake&&(this._stopped=!0,pull(empty$2(),this.shake.rest()))}}var ping$1=Ping,src$1s=createCommonjsModule(function(e,t){(t=e.exports=ping$1).mount=handler$1.mount,t.unmount=handler$1.unmount}),src_1$e=src$1s.mount,src_2$c=src$1s.unmount,symbolTag$1="[object Symbol]";function isSymbol$1(e){return"symbol"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag$1}var isSymbol_1=isSymbol$1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$1(e,t){if(isArray_1(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol_1(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var _isKey=isKey$1,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=function(){var e=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$8=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$9=objectProto$8.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue$1(e,t){return null==e?void 0:e[t]}var _getValue=getValue$1;function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:void 0}var _getNative=getNative,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$a=objectProto$9.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$a.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto$a=Object.prototype,hasOwnProperty$b=objectProto$a.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$b.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq;function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq_1(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return _assocIndexOf(this.__data__,e)>-1}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var r=this.__data__,n=_assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache,Map$1=_getNative(_root,"Map"),_Map=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var r=_getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(memoize.Cache||_MapCache),r}memoize.Cache=_MapCache;var memoize_1=memoize,MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}var _memoizeCapped=memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,function(e,r,n,i){t.push(n?i.replace(reEscapeChar,"$1"):r||e)}),t}),_stringToPath=stringToPath,INFINITY$1=1/0,symbolProto=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString;function toString$8(e){return null==e?"":_baseToString(e)}var toString_1$4=toString$8;function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1$4(e))}var _castPath=castPath,INFINITY$2=1/0;function toKey(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$2?"-0":t}var _toKey=toKey;function baseGet(e,t){for(var r=0,n=(t=_castPath(t,e)).length;null!=e&&r<n;)e=e[_toKey(t[r++])];return r&&r==n?e:void 0}var _baseGet=baseGet;function get$2(e,t,r){var n=null==e?void 0:_baseGet(e,t);return void 0===n?r:n}var get_1=get$2,VisibilityChangeEmitter_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(r=events$1)&&r.__esModule?r:{default:r};function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=src$1r("latency-monitor:VisibilityChangeEmitter"),a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"undefined"==typeof document?(s('This is not a browser, no "document" found. Stopping.'),o(e)):(e._initializeVisibilityVarNames(),e._addVisibilityChangeListener(),e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),n(t,[{key:"_initializeVisibilityVarNames",value:function(){var e=void 0,t=void 0;void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),this._hidden=e,this._visibilityChange=t}},{key:"_addVisibilityChangeListener",value:function(){void 0===document.addEventListener||void 0===document[this._hidden]?s("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}},{key:"isVisible",value:function(){if(void 0!==this._hidden&&void 0!==document[this._hidden])return!document[this._hidden]}},{key:"_handleVisibilityChange",value:function(){var e=!document[this._hidden];s(e?"Page Visible":"Page Hidden"),this.emit("visibilityChange",e)}}]),t}();t.default=a});unwrapExports(VisibilityChangeEmitter_1);var LatencyMonitor_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=a(events$1),i=a(get_1),o=a(isFunction_1),s=a(VisibilityChangeEmitter_1);function a(e){return e&&e.__esModule?e:{default:e}}var c=src$1r("latency-monitor:LatencyMonitor"),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.latencyCheckIntervalMs,n=e.dataEmitIntervalMs,o=e.asyncTestFn,a=e.latencyRandomPercentage;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),f=u;return f.latencyCheckIntervalMs=r||500,f.latencyRandomPercentage=a||10,f._latecyCheckMultiply=f.latencyRandomPercentage/100*2*f.latencyCheckIntervalMs,f._latecyCheckSubtract=f._latecyCheckMultiply/2,f.dataEmitIntervalMs=null===n||0===n?void 0:n||5e3,c("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",f.latencyCheckIntervalMs,f.dataEmitIntervalMs),f.dataEmitIntervalMs?c("Expecting ~%s events per summary",f.latencyCheckIntervalMs/f.dataEmitIntervalMs):c("Not emitting summaries"),f.asyncTestFn=o,process&&process.hrtime?(c("Using process.hrtime for timing"),f.now=process.hrtime,f.getDeltaMS=function(e){var t=f.now(e);return 1e3*t[0]+t[1]/1e6}):"undefined"!=typeof window&&(0,i.default)(window,"performance.now")?(c("Using performance.now for timing"),f.now=window.performance.now.bind(window.performance),f.getDeltaMS=function(e){return Math.round(f.now()-e)}):(c("Using Date.now for timing"),f.now=Date.now,f.getDeltaMS=function(e){return f.now()-e}),f._latencyData=f._initLatencyData(),"undefined"!=typeof window&&(f._visibilityChangeEmitter=new s.default,f._visibilityChangeEmitter.on("visibilityChange",function(e){e?f._startTimers():(f._emitSummary(),f._stopTimers())})),f._visibilityChangeEmitter&&!f._visibilityChangeEmitter.isVisible()||f._startTimers(),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default),r(t,[{key:"_startTimers",value:function(){var e=this;this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval(function(){return e._emitSummary()},this.dataEmitIntervalMs),(0,o.default)(this._emitIntervalID.unref)&&this._emitIntervalID.unref()))}},{key:"_stopTimers",value:function(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=void 0),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=void 0)}},{key:"_emitSummary",value:function(){var e=this.getSummary();e.events>0&&this.emit("data",e)}},{key:"getSummary",value:function(){var e={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),c("Summary: %O",e),e}},{key:"_checkLatency",value:function(){var e=this,t=this,r=Math.random()*t._latecyCheckMultiply-t._latecyCheckSubtract,n={deltaOffset:Math.ceil(t.latencyCheckIntervalMs+r),startTime:t.now()},i=function(){if(e._checkLatencyID){var r=t.getDeltaMS(n.startTime)-n.deltaOffset;t._checkLatency(),t._latencyData.events++,t._latencyData.minMs=Math.min(t._latencyData.minMs,r),t._latencyData.maxMs=Math.max(t._latencyData.maxMs,r),t._latencyData.totalMs+=r,c("MS: %s Data: %O",r,t._latencyData)}};c("localData: %O",n),this._checkLatencyID=setTimeout(function(){t.asyncTestFn?(n.deltaOffset=0,n.startTime=t.now(),t.asyncTestFn(i)):(n.deltaOffset-=1,i())},n.deltaOffset),(0,o.default)(this._checkLatencyID.unref)&&this._checkLatencyID.unref()}},{key:"_initLatencyData",value:function(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}]),t}();t.default=u});unwrapExports(LatencyMonitor_1);var latencyMonitor=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=LatencyMonitor_1.default});unwrapExports(latencyMonitor);var s$p=1e3,m$n=60*s$p,h$l=60*m$n,d$l=24*h$l,w$k=7*d$l,y$l=365.25*d$l,ms$l=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$r(e);if("number"===r&&isFinite(e))return t.long?fmtLong$l(e):fmtShort$l(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$r(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$l;case"weeks":case"week":case"w":return r*w$k;case"days":case"day":case"d":return r*d$l;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$l;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$n;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$l(e){var t=Math.abs(e);return t>=d$l?Math.round(e/d$l)+"d":t>=h$l?Math.round(e/h$l)+"h":t>=m$n?Math.round(e/m$n)+"m":t>=s$p?Math.round(e/s$p)+"s":e+"ms"}function fmtLong$l(e){var t=Math.abs(e);return t>=d$l?plural$l(e,t,d$l,"day"):t>=h$l?plural$l(e,t,h$l,"hour"):t>=m$n?plural$l(e,t,m$n,"minute"):t>=s$p?plural$l(e,t,s$p,"second"):e+" ms"}function plural$l(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$j(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$l,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$q=setup$j,browser$n=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$q(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$n=browser$n.log,browser_2$n=browser$n.formatArgs,browser_3$n=browser$n.save,browser_4$n=browser$n.load,browser_5$n=browser$n.useColors,browser_6$n=browser$n.storage,browser_7$n=browser$n.colors,node$q=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$q(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$n=node$q.init,node_2$n=node$q.log,node_3$n=node$q.formatArgs,node_4$n=node$q.save,node_5$n=node$q.load,node_6$n=node$q.useColors,node_7$n=node$q.colors,node_8$n=node$q.inspectOpts,src$1t=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$n:e.exports=node$q});const LatencyMonitor=latencyMonitor.default,debug$b=src$1t("libp2p:connection-manager"),defaultOptions$5={maxPeers:1/0,minPeers:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,movingAverageInterval:6e4,defaultPeerValue:1};class ConnectionManager$1 extends events$1{constructor(e,t){if(super(),this._libp2p=e,this._options=Object.assign({},defaultOptions$5,t),this._options.maxPeersPerProtocol=fixMaxPeersPerProtocol(this._options.maxPeersPerProtocol),debug$b("options: %j",this._options),this._stats=e.stats,t&&!this._stats)throw new Error("No libp2p.stats");this._peerValues=new Map,this._peers=new Map,this._peerProtocols=new Map,this._peerCountPerProtocol=new Map,this._onStatsUpdate=this._onStatsUpdate.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._libp2p.isStarted()?this._onceStarted():this._libp2p.once("start",this._onceStarted.bind(this))}start(){this._stats.on("update",this._onStatsUpdate),this._libp2p.on("connection:start",this._onPeerConnect),this._libp2p.on("connection:end",this._onPeerDisconnect),this._latencyMonitor=new LatencyMonitor({dataEmitIntervalMs:this._options.pollInterval}),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure)}stop(){this._stats.removeListener("update",this._onStatsUpdate),this._libp2p.removeListener("connection:start",this._onPeerConnect),this._libp2p.removeListener("connection:end",this._onPeerDisconnect),this._latencyMonitor.removeListener("data",this._onLatencyMeasure)}setPeerValue(e,t){if(t<0||t>1)throw new Error("value should be a number between 0 and 1");e.toB58String&&(e=e.toB58String()),this._peerValues.set(e,t)}_onceStarted(){this._peerId=this._libp2p.peerInfo.id.toB58String()}_onStatsUpdate(){const e=this._stats.global.movingAverages,t=e.dataReceived[this._options.movingAverageInterval].movingAverage();this._checkLimit("maxReceivedData",t);const r=e.dataSent[this._options.movingAverageInterval].movingAverage();this._checkLimit("maxSentData",r);const n=t+r;this._checkLimit("maxData",n),debug$b("stats update",n)}_onPeerConnect(e){const t=e.id.toB58String();debug$b("%s: connected to %s",this._peerId,t),this._peerValues.set(t,this._options.defaultPeerValue),this._peers.set(t,e),this.emit("connected",t),this._checkLimit("maxPeers",this._peers.size),protocolsFromPeerInfo(e).forEach(e=>{this._peerCountPerProtocol[e]||(this._peerCountPerProtocol[e]=0),this._peerCountPerProtocol[e]++;let r=this._peerProtocols[t];r||(r=this._peerProtocols[t]=new Set),r.add(e),this._checkProtocolMaxPeersLimit(e,this._peerCountPerProtocol[e])})}_onPeerDisconnect(e){const t=e.id.toB58String();debug$b("%s: disconnected from %s",this._peerId,t),this._peerValues.delete(t),this._peers.delete(t);const r=this._peerProtocols[t];r&&Array.from(r).forEach(e=>{this._peerCountPerProtocol[e]&&this._peerCountPerProtocol[e]--}),this.emit("disconnected",t)}_onLatencyMeasure(e){this._checkLimit("maxEventLoopDelay",e.avgMs)}_checkLimit(e,t){const r=this._options[e];debug$b("checking limit of %s. current value: %d of %d",e,t,r),t>r&&(debug$b("%s: limit exceeded: %s, %d",this._peerId,e,t),this.emit("limit:exceeded",e,t),this._maybeDisconnectOne())}_checkProtocolMaxPeersLimit(e,t){debug$b("checking protocol limit. current value of %s is %d",e,t),t>this._options.maxPeersPerProtocol[e]&&(debug$b("%s: protocol max peers limit exceeded: %s, %d",this._peerId,e,t),this.emit("limit:exceeded",e,t),this._maybeDisconnectOne())}_maybeDisconnectOne(){if(this._options.minPeers<this._peerValues.size){const e=Array.from(this._peerValues).sort(byPeerValue);debug$b("%s: sorted peer values: %j",this._peerId,e);const t=e[0];if(t){const e=t[0];debug$b("%s: lowest value peer is %s",this._peerId,e),debug$b("%s: forcing disconnection from %j",this._peerId,e),this._disconnectPeer(e)}}}_disconnectPeer(e){debug$b("preemptively disconnecting peer",e),this.emit("%s: disconnect:preemptive",this._peerId,e);const t=this._peers.get(e);this._libp2p.hangUp(t,e=>{e&&this.emit("error",e)})}}var src$1u=ConnectionManager$1;function byPeerValue(e,t){return e[1]-t[1]}function fixMaxPeersPerProtocol(e){return e||(e={}),Object.keys(e).forEach(t=>{const r=e[t];delete e[t],e[t.toLowerCase()]=r}),e}function protocolsFromPeerInfo(e){const t=new Set;return e.multiaddrs.forEach(e=>{e.protos().map(protocolToProtocolTag).forEach(e=>{t.add(e)})}),Array.from(t)}function protocolToProtocolTag(e){return e.name.toLowerCase()}function emitFirst(e,t,r){r=once_1$1(r),t.forEach(n=>{e.once(n,(...n)=>{t.forEach(t=>{e.removeListener(t,r)}),r.apply(e,n)})})}var emitFirst_1=emitFirst,util$d={emitFirst:emitFirst_1},peerRouting=e=>{const t=e._modules.peerRouting||[];return e._dht&&t.unshift(e._dht),{findPeer:(e,r,n)=>{"function"==typeof r&&(n=r,r={}),t.length||n(errCode(new Error("No peer routers available"),"NO_ROUTERS_AVAILABLE"));const i=t.map(t=>n=>t.findPeer(e,r,(e,t)=>e?n(e):t&&0!==Object.keys(t).length?void n(null,t):n(errCode(new Error("not found"),"NOT_FOUND"),null)));tryEach_1(i,(e,t)=>{if(e&&"NOT_FOUND"!==e.code)return n(e);n(null,t=t||[])})}}},contentRouting=e=>{const t=e._modules.contentRouting||[];return e._dht&&t.unshift(e._dht),{findProviders:(e,r,n)=>{if("function"==typeof r?(n=r,r={}):"number"==typeof r&&(r={maxTimeout:r}),!t.length)return n(errCode(new Error("No content routers available"),"NO_ROUTERS_AVAILABLE"));const i=t.map(t=>n=>t.findProviders(e,r,(e,t)=>e?n(e):t&&0!==Object.keys(t).length?void n(null,t):n(errCode(new Error("not found"),"NOT_FOUND"),null)));tryEach_1(i,(e,t)=>{if(e&&"NOT_FOUND"!==e.code)return n(e);n(null,t=t||[])})},provide:(e,r)=>{if(!t.length)return r(errCode(new Error("No content routers available"),"NO_ROUTERS_AVAILABLE"));parallel$1(t.map(t=>r=>t.provide(e,r)),r)}}},messages$3={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available"},codes$3={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF"},errors$a={messages:messages$3,codes:codes$3};const{messages:messages$4,codes:codes$4}=errors$a;var dht=e=>({put:(t,r,n)=>{if(!e._dht)return nextTick(n,errCode(new Error(messages$4.DHT_DISABLED),codes$4.DHT_DISABLED));e._dht.put(t,r,n)},get:(t,r,n)=>{if("function"==typeof r&&(n=r,r={}),!e._dht)return nextTick(n,errCode(new Error(messages$4.DHT_DISABLED),codes$4.DHT_DISABLED));e._dht.get(t,r,n)},getMany:(t,r,n,i)=>{if("function"==typeof n&&(i=n,n={}),!e._dht)return nextTick(i,errCode(new Error(messages$4.DHT_DISABLED),codes$4.DHT_DISABLED));e._dht.getMany(t,r,n,i)}}),FUNC_ERROR_TEXT$1="Expected a function",NAN$1=NaN,symbolTag$2="[object Symbol]",reTrim$1=/^\s+|\s+$/g,reIsBadHex$1=/^[-+]0x[0-9a-f]+$/i,reIsBinary$1=/^0b[01]+$/i,reIsOctal$1=/^0o[0-7]+$/i,freeParseInt$1=parseInt,freeGlobal$2="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf$2="object"==typeof self&&self&&self.Object===Object&&self,root$2=freeGlobal$2||freeSelf$2||Function("return this")(),objectProto$b=Object.prototype,objectToString$3=objectProto$b.toString,nativeMax$2=Math.max,nativeMin=Math.min,now=function(){return root$2.Date.now()};function debounce$1(e,t,r){var n,i,o,s,a,c,u=0,f=!1,l=!1,d=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);function h(t){var r=n,o=i;return n=i=void 0,u=t,s=e.apply(o,r)}function p(e){var r=e-c;return void 0===c||r>=t||r<0||l&&e-u>=o}function b(){var e=now();if(p(e))return m(e);a=setTimeout(b,function(e){var r=t-(e-c);return l?nativeMin(r,o-(e-u)):r}(e))}function m(e){return a=void 0,d&&n?h(e):(n=i=void 0,s)}function g(){var e=now(),r=p(e);if(n=arguments,i=this,c=e,r){if(void 0===a)return function(e){return u=e,a=setTimeout(b,t),f?h(e):s}(c);if(l)return a=setTimeout(b,t),h(c)}return void 0===a&&(a=setTimeout(b,t)),s}return t=toNumber$1(t)||0,isObject$6(r)&&(f=!!r.leading,o=(l="maxWait"in r)?nativeMax$2(toNumber$1(r.maxWait)||0,t):o,d="trailing"in r?!!r.trailing:d),g.cancel=function(){void 0!==a&&clearTimeout(a),u=0,n=c=i=a=void 0},g.flush=function(){return void 0===a?s:m(now())},g}function throttle(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);return isObject$6(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),debounce$1(e,t,{leading:n,maxWait:t,trailing:i})}function isObject$6(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike$2(e){return!!e&&"object"==typeof e}function isSymbol$2(e){return"symbol"==typeof e||isObjectLike$2(e)&&objectToString$3.call(e)==symbolTag$2}function toNumber$1(e){if("number"==typeof e)return e;if(isSymbol$2(e))return NAN$1;if(isObject$6(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$6(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim$1,"");var r=reIsBinary$1.test(e);return r||reIsOctal$1.test(e)?freeParseInt$1(e.slice(2),r?2:8):reIsBadHex$1.test(e)?NAN$1:+e}var lodash_throttle=throttle,src$1v=createCommonjsModule(function(e,t){e.exports=function e(t){if(!(this instanceof e))return new e(t);t=t||{};const r=t.validity||30;const n=new Map;const i=lodash_throttle(()=>{n.forEach((e,t)=>{const i=e.validity||r,o=function(e){const t=(new Date).getTime()-e.getTime();return Math.floor(t/1e3)}(e.timestamp);o>i&&n.delete(t)})},200);this.put=(e,t,r)=>{this.has(e)||n.set(e,{value:t,timestamp:new Date,validity:r}),i()};this.get=e=>{if(n.has(e))return n.get(e).value;throw new Error("key does not exist")};this.has=e=>n.has(e)}}),s$q=1e3,m$o=60*s$q,h$m=60*m$o,d$m=24*h$m,w$l=7*d$m,y$m=365.25*d$m,ms$m=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$s(e);if("number"===r&&isFinite(e))return t.long?fmtLong$m(e):fmtShort$m(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$s(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$m;case"weeks":case"week":case"w":return r*w$l;case"days":case"day":case"d":return r*d$m;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$m;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$o;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$q;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$m(e){var t=Math.abs(e);return t>=d$m?Math.round(e/d$m)+"d":t>=h$m?Math.round(e/h$m)+"h":t>=m$o?Math.round(e/m$o)+"m":t>=s$q?Math.round(e/s$q)+"s":e+"ms"}function fmtLong$m(e){var t=Math.abs(e);return t>=d$m?plural$m(e,t,d$m,"day"):t>=h$m?plural$m(e,t,h$m,"hour"):t>=m$o?plural$m(e,t,m$o,"minute"):t>=s$q?plural$m(e,t,s$q,"second"):e+" ms"}function plural$m(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$k(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$m,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$r=setup$k,browser$o=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$r(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$o=browser$o.log,browser_2$o=browser$o.formatArgs,browser_3$o=browser$o.save,browser_4$o=browser$o.load,browser_5$o=browser$o.useColors,browser_6$o=browser$o.storage,browser_7$o=browser$o.colors,node$r=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$r(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$o=node$r.init,node_2$o=node$r.log,node_3$o=node$r.formatArgs,node_4$o=node$r.save,node_5$o=node$r.load,node_6$o=node$r.useColors,node_7$o=node$r.colors,node_8$o=node$r.inspectOpts,src$1w=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$o:e.exports=node$r}),rpc_proto="\nmessage RPC {\n  repeated SubOpts subscriptions = 1;\n  repeated Message msgs = 2;\n\n  message SubOpts {\n    optional bool subscribe = 1; // subscribe or unsubcribe\n    optional string topicID = 2;\n  }\n\n  message Message {\n    optional bytes from = 1;\n    optional bytes data = 2;\n    optional bytes seqno = 3;\n    repeated string topicIDs = 4;\n    optional bytes signature = 5;\n    optional bytes key = 6;\n  }\n}",topicDescriptor_proto="\n// topicCID = cid(merkledag_protobuf(topicDescriptor)); (not the topic.name)\nmessage TopicDescriptor {\n  optional string name = 1;\n  optional AuthOpts auth = 2;\n  optional EncOpts enc = 2;\n\n  message AuthOpts {\n    optional AuthMode mode = 1;\n    repeated bytes keys = 2; // root keys to trust\n\n    enum AuthMode {\n      NONE = 0; // no authentication, anyone can publish\n      KEY = 1; // only messages signed by keys in the topic descriptor are accepted\n      WOT = 2; // web of trust, certificates can allow publisher set to grow\n    }\n  }\n\n  message EncOpts {\n    optional EncMode mode = 1;\n    repeated bytes keyHashes = 2; // the hashes of the shared keys used (salted)\n\n    enum EncMode {\n      NONE = 0; // no encryption, anyone can read\n      SHAREDKEY = 1; // messages are encrypted with shared key\n      WOT = 2; // web of trust, certificates can allow publisher set to grow\n    }\n  }\n}",message$4=createCommonjsModule(function(e,t){const r=src$i(rpc_proto),n=r.RPC,i=src$i(topicDescriptor_proto);(t=e.exports).rpc=r,t.td=i,t.RPC=n,t.Message=n.Message,t.SubOpts=n.SubOpts}),message_1=message$4.rpc,message_2=message$4.td,message_3=message$4.RPC,message_4=message$4.Message,message_5=message$4.SubOpts;const{RPC:RPC}=message$4;class Peer extends events$1{constructor(e){super(),this.info=e,this.conn=null,this.topics=new Set,this.stream=null,this._references=0}get isConnected(){return Boolean(this.conn)}get isWritable(){return Boolean(this.stream)}write(e){if(!this.isWritable){const e=this.info.id.toB58String();throw new Error("No writable connection to "+e)}this.stream.push(e)}attachConnection(e){this.conn=e,this.stream=new pullPushable_1,pullStream(this.stream,src$M.encode(),e,pullStream.onEnd(()=>{this.conn=null,this.stream=null,this.emit("close")})),this.emit("connection")}_sendRawSubscriptions(e,t){if(0===e.size)return;const r=[];e.forEach(e=>{r.push({subscribe:t,topicID:e})}),this.write(RPC.encode({subscriptions:r}))}sendSubscriptions(e){this._sendRawSubscriptions(e,!0)}sendUnsubscriptions(e){this._sendRawSubscriptions(e,!1)}sendMessages(e){this.write(RPC.encode({msgs:e}))}updateSubscriptions(e){e.forEach(e=>{e.subscribe?this.topics.add(e.topicID):this.topics.delete(e.topicID)})}close(e){this._references=1,this.stream&&this.stream.end(),setImmediate$1(()=>{this.conn=null,this.stream=null,this.emit("close"),e()})}}var peer=Peer;const{Message:Message$1}=message$4,SignPrefix=Buffer.from("libp2p-pubsub:");var SignPrefix_1=SignPrefix,signMessage=function(e,t,r){const n=Buffer.concat([SignPrefix,Message$1.encode(t)]);e.privKey.sign(n,(n,i)=>{if(n)return r(n);r(null,{...t,signature:i,key:e.pubKey.bytes})})},sign$1={SignPrefix:SignPrefix_1,signMessage:signMessage},utils$I=createCommonjsModule(function(e,t){(t=e.exports).randomSeqno=()=>src$u.randomBytes(20),t.msgId=(e,t)=>e+t.toString("hex"),t.anyMatch=(e,t)=>{let r;r=Array.isArray(t)?e=>t.indexOf(e)>-1:e=>t.has(e);for(let t of e)if(r(t))return!0;return!1},t.ensureArray=e=>Array.isArray(e)?e:[e],t.normalizeInRpcMessages=e=>e?e.map(e=>{const t=Object.assign({},e);return Buffer.isBuffer(e.from)&&(t.from=bs58.encode(e.from)),t}):e,t.normalizeOutRpcMessage=e=>{const t=Object.assign({},e);return("string"==typeof e.from||e.from instanceof String)&&(t.from=bs58.decode(e.from)),t},t.normalizeOutRpcMessages=e=>e?e.map(t.normalizeOutRpcMessage):e}),utils_1$8=utils$I.randomSeqno,utils_2$4=utils$I.msgId,utils_3$4=utils$I.anyMatch,utils_4$4=utils$I.ensureArray,utils_5$4=utils$I.normalizeInRpcMessages,utils_6$3=utils$I.normalizeOutRpcMessage,utils_7$3=utils$I.normalizeOutRpcMessages;const{signMessage:signMessage$1}=sign$1;class PubsubBaseProtocol extends events$1{constructor(e,t,r,n){super(),n={signMessages:!0,...n},this.log=src$1w(e),this.log.err=src$1w(`${e}:error`),this.multicodec=t,this.libp2p=r,this.started=!1,n.signMessages&&(this.peerId=this.libp2p.peerInfo.id),this.topics=new Map,this.seenCache=new src$1v,this.peers=new Map,this._dials=new Set,this._onConnection=this._onConnection.bind(this),this._dialPeer=this._dialPeer.bind(this)}_addPeer(e){const t=e.info.id.toB58String();let r=this.peers.get(t);return r||(this.log("new peer",t),this.peers.set(t,e),r=e,e.once("close",()=>this._removePeer(e))),++r._references,r}_removePeer(e){const t=e.info.id.toB58String();return this.log("remove",t,e._references),0==--e._references&&(this.log("delete peer",t),this.peers.delete(t)),e}_dialPeer(e,t){t=t||function(){};const r=e.id.toB58String(),n=this.peers.get(r);return n&&n.isConnected?nextTick(()=>t()):this._dials.has(r)?(this.log("already dialing %s, ignoring dial attempt",r),nextTick(()=>t())):(this._dials.add(r),this.log("dialing %s",r),void this.libp2p.dialProtocol(e,this.multicodec,(n,i)=>{this.log("dial to %s complete",r);const o=!this._dials.has(r);return this._dials.delete(r),n?(this.log.err(n),t()):o?(this.log("pubsub was stopped, not processing dial to %s",r),t()):void this._onDial(e,i,t)}))}_onDial(e,t,r){const n=e.id.toB58String();this.log("connected",n),this._addPeer(new peer(e)).attachConnection(t),nextTick(()=>r())}_onConnection(e,t){t.getPeerInfo((e,r)=>{if(e)return this.log.err("Failed to identify incomming conn",e),pull(empty$2(),t);const n=r.id.toB58String(),i=this._addPeer(new peer(r));this._processConnection(n,t,i)})}_processConnection(e,t,r){throw errCode("_processConnection must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}_onConnectionEnd(e,t,r){r&&"socket hang up"!==r.message&&this.log.err(r),this.log("connection ended",e,r?r.message:""),this._removePeer(t)}_buildMessage(e,t){const r=utils$I.normalizeOutRpcMessage(e);this.peerId?signMessage$1(this.peerId,r,t):nextTick(t,null,r)}publish(e,t,r){throw errCode("publish must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}subscribe(e){throw errCode("subscribe must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}unsubscribe(e){throw errCode("unsubscribe must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}start(e){if(this.started)return nextTick(()=>e(new Error("already started")));this.log("starting"),this.libp2p.handle(this.multicodec,this._onConnection),this.libp2p.on("peer:connect",this._dialPeer);const t=Object.values(this.libp2p.peerBook.getAll());each(t,(e,t)=>this._dialPeer(e,t),t=>{nextTick(()=>{this.log("started"),this.started=!0,e(t)})})}stop(e){if(!this.started)return nextTick(()=>e(new Error("not started yet")));this.libp2p.unhandle(this.multicodec),this.libp2p.removeListener("peer:connect",this._dialPeer),this._dials=new Set,this.log("stopping"),each(this.peers.values(),(e,t)=>e.close(t),t=>{if(t)return e(t);this.log("stopped"),this.peers=new Map,this.started=!1,e()})}}var src$1x=PubsubBaseProtocol,message_1$1=message$4,utils_1$9=utils$I;src$1x.message=message_1$1,src$1x.utils=utils_1$9;var s$r=1e3,m$p=60*s$r,h$n=60*m$p,d$n=24*h$n,w$m=7*d$n,y$n=365.25*d$n,ms$n=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$t(e);if("number"===r&&isFinite(e))return t.long?fmtLong$n(e):fmtShort$n(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$t(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$n;case"weeks":case"week":case"w":return r*w$m;case"days":case"day":case"d":return r*d$n;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$n;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$p;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$n(e){var t=Math.abs(e);return t>=d$n?Math.round(e/d$n)+"d":t>=h$n?Math.round(e/h$n)+"h":t>=m$p?Math.round(e/m$p)+"m":t>=s$r?Math.round(e/s$r)+"s":e+"ms"}function fmtLong$n(e){var t=Math.abs(e);return t>=d$n?plural$n(e,t,d$n,"day"):t>=h$n?plural$n(e,t,h$n,"hour"):t>=m$p?plural$n(e,t,m$p,"minute"):t>=s$r?plural$n(e,t,s$r,"second"):e+" ms"}function plural$n(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$l(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$n,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$s=setup$l,browser$p=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$s(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$p=browser$p.log,browser_2$p=browser$p.formatArgs,browser_3$p=browser$p.save,browser_4$p=browser$p.load,browser_5$p=browser$p.useColors,browser_6$p=browser$p.storage,browser_7$p=browser$p.colors,node$s=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$s(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$p=node$s.init,node_2$p=node$s.log,node_3$p=node$s.formatArgs,node_4$p=node$s.save,node_5$p=node$s.load,node_6$p=node$s.useColors,node_7$p=node$s.colors,node_8$p=node$s.inspectOpts,src$1y=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$p:e.exports=node$s});const log$G=src$1y("libp2p:floodsub");log$G.err=src$1y("libp2p:floodsub:error");var config$4={log:log$G,multicodec:"/floodsub/1.0.0"};const{message:message$5,utils:utils$J}=src$1x,multicodec$1=config$4.multicodec,ensureArray=utils$J.ensureArray,noop$e=()=>{};class FloodSub extends src$1x{constructor(e){super("libp2p:floodsub",multicodec$1,e),this.subscriptions=new Set}_onDial(e,t,r){super._onDial(e,t,t=>{if(t)return r(t);const n=e.id.toB58String(),i=this.peers.get(n);i&&i.isWritable&&i.sendSubscriptions(this.subscriptions),setImmediate$1(()=>r())})}_processConnection(e,t,r){pullStream(t,src$M.decode(),pullStream.map(e=>message$5.rpc.RPC.decode(e)),pullStream.drain(t=>this._onRpc(e,t),t=>this._onConnectionEnd(e,r,t)))}_onRpc(e,t){if(!t)return;this.log("rpc from",e);const r=t.subscriptions,n=t.msgs;if(n&&n.length&&this._processRpcMessages(utils$J.normalizeInRpcMessages(t.msgs)),r&&r.length){const t=this.peers.get(e);t&&(t.updateSubscriptions(r),this.emit("floodsub:subscription-change",t.info,t.topics,r))}}_processRpcMessages(e){e.forEach(e=>{const t=utils$J.msgId(e.from,e.seqno);this.seenCache.has(t)||(this.seenCache.put(t),this._emitMessages(e.topicIDs,[e]),this._forwardMessages(e.topicIDs,[e]))})}_emitMessages(e,t){e.forEach(e=>{this.subscriptions.has(e)&&t.forEach(t=>{this.emit(e,t)})})}_forwardMessages(e,t){this.peers.forEach(r=>{r.isWritable&&utils$J.anyMatch(r.topics,e)&&(r.sendMessages(utils$J.normalizeOutRpcMessages(t)),this.log("publish msgs on topics",e,r.info.id.toB58String()))})}stop(e){super.stop(t=>{if(t)return e(t);this.subscriptions=new Set,e()})}publish(e,t,r){assert$t(this.started,"FloodSub is not started"),r=r||noop$e,this.log("publish",e,t),e=ensureArray(e),t=ensureArray(t);const n=this.libp2p.peerInfo.id.toB58String();map$2(t,(t,r)=>{const i=utils$J.randomSeqno();this.seenCache.put(utils$J.msgId(n,i));const o={from:n,data:t,seqno:i,topicIDs:e};this._emitMessages(e,[o]),this._buildMessage(o,r)},(t,n)=>{if(t)return r(t);this._forwardMessages(e,n),r(null)})}subscribe(e){assert$t(this.started,"FloodSub is not started"),(e=ensureArray(e)).forEach(e=>this.subscriptions.add(e)),this.peers.forEach(t=>(function t(r){if(r&&r.isWritable)return r.sendSubscriptions(e);const n=()=>{r.removeListener("connection",n),t(r)};r.on("connection",n);r.once("close",()=>r.removeListener("connection",n))})(t))}unsubscribe(e){this.started&&((e=ensureArray(e)).forEach(e=>this.subscriptions.delete(e)),this.peers.forEach(t=>(function t(r){r&&r.isWritable?r.sendUnsubscriptions(e):setImmediate$1(t.bind(r))})(t)))}}var src$1z=FloodSub;const{messages:messages$5,codes:codes$5}=errors$a;var pubsub=e=>{const t=new src$1z(e);return e._floodSub=t,{subscribe:(r,n,i,o)=>{if("function"==typeof n&&(o=i,i=n,n={}),!e.isStarted()&&!t.started)return nextTick(o,errCode(new Error(messages$5.NOT_STARTED_YET),codes$5.PUBSUB_NOT_STARTED));!function(e){0===t.listenerCount(r)&&t.subscribe(r),t.on(r,i),nextTick(e)}(o)},unsubscribe:(r,n,i)=>{if(!e.isStarted()&&!t.started)return nextTick(i,errCode(new Error(messages$5.NOT_STARTED_YET),codes$5.PUBSUB_NOT_STARTED));n||i?t.removeListener(r,n):t.removeAllListeners(r),0===t.listenerCount(r)&&t.unsubscribe(r),"function"==typeof i&&nextTick(()=>i())},publish:(r,n,i)=>e.isStarted()||t.started?Buffer.isBuffer(n)?void t.publish(r,n,i):nextTick(i,errCode(new Error("data must be a Buffer"),"ERR_DATA_IS_NOT_A_BUFFER")):nextTick(i,errCode(new Error(messages$5.NOT_STARTED_YET),codes$5.PUBSUB_NOT_STARTED)),ls:r=>{if(!e.isStarted()&&!t.started)return nextTick(r,errCode(new Error(messages$5.NOT_STARTED_YET),codes$5.PUBSUB_NOT_STARTED));const n=Array.from(t.subscriptions);nextTick(()=>r(null,n))},peers:(r,n)=>{if(!e.isStarted()&&!t.started)return nextTick(n,errCode(new Error(messages$5.NOT_STARTED_YET),codes$5.PUBSUB_NOT_STARTED));"function"==typeof r&&(n=r,r=null);const i=Array.from(t.peers.values()).filter(e=>!r||e.topics.has(r)).map(e=>e.info.id.toB58String());nextTick(()=>n(null,i))},setMaxListeners:e=>t.setMaxListeners(e)}},getPeerInfo$1=e=>(function(t,r){let n;if(src$t.isPeerInfo(t))n=t;else if(src$2.isMultiaddr(t)||"string"==typeof t){if("string"==typeof t)try{t=src$2(t)}catch(e){return r(errCode(e,"ERR_INVALID_MULTIADDR"))}const i=t.getPeerId();if(!i)return r(errCode(new Error("peer multiaddr instance or string must include peerId"),"ERR_INVALID_MULTIADDR"));try{n=e.peerBook.get(i)}catch(e){n=new src$t(src$s.createFromB58String(i))}n.multiaddrs.add(t)}else{if(!src$s.isPeerId(t))return r(errCode(new Error(`${n} is not a valid peer type`),"ERR_INVALID_PEER_TYPE"));{const i=t.toB58String();try{n=e.peerBook.get(i)}catch(n){return e.peerRouting.findPeer(t,r)}}}r(null,n)});const{struct:struct$2,superstruct:superstruct$2}=index_es,{optional:optional$2,list:list$1}=struct$2,s$s=superstruct$2(),transport$2=s$s.union([s$s.interface({createListener:"function",dial:"function"}),"function"]),modulesSchema=s$s({connEncryption:optional$2(list$1([s$s("object|function")])),connProtector:s$s.union(["undefined",s$s.interface({protect:"function"})]),contentRouting:optional$2(list$1(["object"])),dht:optional$2(s$s("null|function|object")),peerDiscovery:optional$2(list$1([s$s("object|function")])),peerRouting:optional$2(list$1(["object"])),streamMuxer:optional$2(list$1([s$s("object|function")])),transport:s$s.intersection([[transport$2],s$s.interface({length:e=>e>0||"ERROR_EMPTY"})])}),configSchema$1=s$s({peerDiscovery:s$s("object",{autoDial:!0}),relay:s$s({enabled:"boolean",hop:optional$2(s$s({enabled:"boolean",active:"boolean"},{enabled:!1,active:!1}))},{enabled:!0}),dht:s$s("object?",{enabled:!1,kBucketSize:20,randomWalk:{enabled:!1,queriesPerPeriod:1,interval:3e5,timeout:1e4}}),EXPERIMENTAL:s$s({pubsub:"boolean"},{pubsub:!1})},{}),optionsSchema=s$s({switch:"object?",connectionManager:s$s("object",{minPeers:25}),datastore:"object?",peerInfo:"object",peerBook:"object?",modules:modulesSchema,config:configSchema$1});var validate$2=e=>{const[t,r]=optionsSchema.validate(e);if(t)throw new Error(`${t.message}${t.reason?" - "+t.reason:""}`);return r.config.dht.enabled&&s$s("function|object")(r.modules.dht),void 0===r.config.peerDiscovery.autoDial&&(r.config.peerDiscovery.autoDial=!0),r},config$5={validate:validate$2};const EventEmitter$e=events$1.EventEmitter,log$H=src$1j("libp2p");log$H.error=src$1j("libp2p:error");const{emitFirst:emitFirst$1}=util$d,validateConfig=config$5.validate,{codes:codes$6}=errors$a,notStarted=(e,t)=>errCode(new Error(`libp2p cannot ${e} when not started; state is ${t}`),codes$6.ERR_NODE_NOT_STARTED);class Node$3 extends EventEmitter$e{constructor(e){if(super(),this._options=validateConfig(e),this.datastore=this._options.datastore,this.peerInfo=this._options.peerInfo,this.peerBook=this._options.peerBook||new src$x,this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=[],this._switch=new src$1q(this.peerInfo,this.peerBook,this._options.switch),this._switch.on("error",(...e)=>this.emit("error",...e)),this.stats=this._switch.stats,this.connectionManager=new src$1u(this,this._options.connectionManager),this._modules.streamMuxer){this._modules.streamMuxer.forEach(e=>this._switch.connection.addStreamMuxer(e)),this._switch.connection.reuse(),this._switch.connection.enableCircuitRelay(this._config.relay),this._switch.on("peer-mux-established",e=>{this.emit("peer:connect",e)}),this._switch.on("peer-mux-closed",e=>{this.emit("peer:disconnect",e)})}if(this._switch.on("connection:start",e=>{this.emit("connection:start",e)}),this._switch.on("connection:end",e=>{this.emit("connection:end",e)}),this._modules.connEncryption){this._modules.connEncryption.forEach(e=>{this._switch.connection.crypto(e.tag,e.encrypt)})}if(this._modules.connProtector)this._switch.protector=this._modules.connProtector;else if(process.env.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._config.dht.enabled){const e=this._modules.dht;this._dht=new e(this._switch,{datastore:this.datastore,...this._config.dht})}this._config.EXPERIMENTAL.pubsub&&(this.pubsub=pubsub(this)),this.peerRouting=peerRouting(this),this.contentRouting=contentRouting(this),this.dht=dht(this),this._getPeerInfo=getPeerInfo$1(this),src$1s.mount(this._switch),this.state=new fsmEvent_1("STOPPED",{STOPPED:{start:"STARTING",stop:"STOPPED"},STARTING:{done:"STARTED",abort:"STOPPED",stop:"STOPPING"},STARTED:{stop:"STOPPING",start:"STARTED"},STOPPING:{stop:"STOPPING",done:"STOPPED"}}),this.state.on("STARTING",()=>{log$H("libp2p is starting"),this._onStarting()}),this.state.on("STOPPING",()=>{log$H("libp2p is stopping"),this._onStopping()}),this.state.on("STARTED",()=>{log$H("libp2p has started"),this.emit("start")}),this.state.on("STOPPED",()=>{log$H("libp2p has stopped"),this.emit("stop")}),this.state.on("error",e=>{log$H.error(e),this.emit("error",e)}),this.state.on("STARTED",()=>{this.peerBook.getAllArray().forEach(e=>{this.emit("peer:discovery",e),this._maybeConnect(e)})}),this._peerDiscovered=this._peerDiscovered.bind(this)}emit(e,...t){"error"!==e||this._events.error?super.emit(e,...t):log$H.error(...t)}start(e=(()=>{})){emitFirst$1(this,["error","start"],e),this.state("start")}stop(e=(()=>{})){emitFirst$1(this,["error","stop"],e),this.state("stop")}isStarted(){return!!this.state&&"STARTED"===this.state._state}dial(e,t){this.dialProtocol(e,null,t)}dialProtocol(e,t,r){if(!this.isStarted())return r(notStarted("dial",this.state._state));"function"==typeof t&&(r=t,t=void 0),this._getPeerInfo(e,(e,n)=>{if(e)return r(e);this._switch.dial(n,t,r)})}dialFSM(e,t,r){if(!this.isStarted())return r(notStarted("dial",this.state._state));"function"==typeof t&&(r=t,t=void 0),this._getPeerInfo(e,(e,n)=>{if(e)return r(e);this._switch.dialFSM(n,t,r)})}hangUp(e,t){this._getPeerInfo(e,(e,r)=>{if(e)return t(e);this._switch.hangUp(r,t)})}ping(e,t){if(!this.isStarted())return t(notStarted("ping",this.state._state));this._getPeerInfo(e,(e,r)=>{if(e)return t(e);t(null,new src$1s(this._switch,r))})}handle(e,t,r){this._switch.handle(e,t,r)}unhandle(e){this._switch.unhandle(e)}_onStarting(){if(!this._modules.transport)return this.emit("error",new Error("no transports were present")),this.state("abort");let e;const t=[],r=[];this.peerInfo.multiaddrs.toArray().forEach(e=>{e.getPeerId()||(t.push(e),r.push(e.encapsulate("/p2p/"+this.peerInfo.id.toB58String())))}),this.peerInfo.multiaddrs.replace(t,r);const n=this.peerInfo.multiaddrs.toArray();this._modules.transport.forEach(t=>{let r;(r="function"==typeof t?new t:t).filter(n).length>0?this._switch.transport.add(r.tag||r[Symbol.toStringTag],r):src$_.isWebSockets(r)&&(e=r),this._transport.push(r)}),series_1([e=>{this.connectionManager.start(),this._switch.start(e)},t=>{e&&this._switch.transport.add(e.tag||e.constructor.name,e),this.peerInfo.multiaddrs.toArray().forEach(e=>{e.toString().match(/\/p2p-circuit($|\/)/)||this._transport.find(t=>t.filter(e).length>0)||this.peerInfo.multiaddrs.delete(e)}),t()},e=>{this._dht?this._dht.start(()=>{this._dht.on("peer",this._peerDiscovered),e()}):e()},e=>{if(this._floodSub)return this._floodSub.start(e);e()},e=>{this._modules.peerDiscovery?this._setupPeerDiscovery(e):e()}],e=>{if(e)return log$H.error(e),this.emit("error",e),this.state("stop");this.state("done")})}_onStopping(){series_1([e=>{parallel$1(this._discovery.map(e=>(e.removeListener("peer",this._peerDiscovered),t=>e.stop(e=>{log$H.error("an error occurred stopping the discovery service",e),t()}))),e)},e=>{if(this._floodSub)return this._floodSub.stop(e);e()},e=>{if(this._dht)return this._dht.removeListener("peer",this._peerDiscovered),this._dht.stop(e);e()},e=>{this.connectionManager.stop(),this._switch.stop(e)},e=>{this._switch.transport.removeAll(()=>e())}],e=>{e&&(log$H.error(e),this.emit("error",e)),this.state("done")})}_peerDiscovered(e){e.id.toB58String()!==this.peerInfo.id.toB58String()?(e=this.peerBook.put(e),this.isStarted()&&(this.emit("peer:discovery",e),this._maybeConnect(e))):log$H.error(new Error(codes$6.ERR_DISCOVERED_SELF))}_maybeConnect(e){if(!0===this._config.peerDiscovery.autoDial&&!e.isConnected()){(this._options.connectionManager.minPeers||0)>Object.keys(this._switch.connection.connections).length&&(log$H("connecting to discovered peer"),this._switch.dialer.connect(e,e=>{e&&log$H.error("could not connect to discovered peer",e)}))}}_setupPeerDiscovery(e){for(const e of this._modules.peerDiscovery){let t={enabled:!0};if(e.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[e.tag]&&(t={...t,...this._config.peerDiscovery[e.tag]}),t.enabled){let r;(r="function"==typeof e?new e(Object.assign({},t,{peerInfo:this.peerInfo})):e).on("peer",this._peerDiscovered),this._discovery.push(r)}}each(this._discovery,(e,t)=>{e.start(t)},e)}}var src$1A=Node$3;class Node$4 extends src$1A{constructor(e){const t=e.peerInfo.multiaddrs.toArray().map(String).filter(e=>e.includes("p2p-websocket-star"));e.peerInfo.multiaddrs.replace(t.map(src$2),"/p2p-websocket-star");const r=new src$17({servers:t,id:e.peerInfo.id,ignore_no_online:!t.length||e.wsStarIgnoreErrors}),n={switch:{blacklistTTL:12e4,blackListAttempts:5,maxParallelDials:150,maxColdCalls:50,dialTimeout:1e4},modules:{transport:[src$W,src$_,r],streamMuxer:[src$1f],connEncryption:[src$1i],peerDiscovery:[src$Y,src$19,r.discovery],dht:src$1d},config:{peerDiscovery:{autoDial:!0,mdns:{enabled:!0},bootstrap:{enabled:!0},websocketStar:{enabled:!0}},dht:{kBucketSize:20,enabled:!1,randomWalk:{enabled:!1}},EXPERIMENTAL:{pubsub:!1}}};super(mergeOptions(n,e))}}var libp2pNodejs=Node$4,libp2p=function(e,t){const r=e._options||{};t=t||{};const n="function"==typeof r.libp2p?r.libp2p:defaultBundle,{datastore:i}=e._repo,o=e._peerInfo,s=e._peerInfoBook,a=n({options:r,config:t,datastore:i,peerInfo:o,peerBook:s});return a.on("stop",()=>{o.multiaddrs.clear()}),a.on("start",()=>{o.multiaddrs.forEach(t=>{e._print("Swarm listening on",t.toString())})}),a.on("peer:connect",e=>s.put(e)),a};function defaultBundle({datastore:e,peerInfo:t,peerBook:r,options:n,config:i}){const o={datastore:e,peerInfo:t,peerBook:r,config:{peerDiscovery:{mdns:{enabled:get$1(n,"config.Discovery.MDNS.Enabled",get$1(i,"Discovery.MDNS.Enabled",!0))},webRTCStar:{enabled:get$1(n,"config.Discovery.webRTCStar.Enabled",get$1(i,"Discovery.webRTCStar.Enabled",!0))},bootstrap:{list:get$1(n,"config.Bootstrap",get$1(i,"Bootstrap",[]))}},relay:{enabled:get$1(n,"relay.enabled",get$1(i,"relay.enabled",!0)),hop:{enabled:get$1(n,"relay.hop.enabled",get$1(i,"relay.hop.enabled",!1)),active:get$1(n,"relay.hop.active",get$1(i,"relay.hop.active",!1))}},dht:{kBucketSize:get$1(n,"dht.kBucketSize",20),enabled:!1,randomWalk:{enabled:!1},validators:{ipns:utils$B.validator},selectors:{ipns:utils$B.selector}},EXPERIMENTAL:{pubsub:get$1(n,"EXPERIMENTAL.pubsub",!1)}},connectionManager:get$1(n,"connectionManager",{maxPeers:get$1(i,"Swarm.ConnMgr.HighWater"),minPeers:get$1(i,"Swarm.ConnMgr.LowWater")})},s=mergeOptions(o,get$1(n,"libp2p",{}));return new libp2pNodejs(s)}var start=e=>promisifyEs6(t=>{const r=r=>{if(r)return setImmediate$1(()=>e.emit("error",r)),t(r);e.state.started(),setImmediate$1(()=>e.emit("start")),t()};if("stopped"!==e.state.state())return r(new Error(`Not able to start from state: ${e.state.state()}`));e.log("starting"),e.state.start(),series_1([t=>{e._repo.closed?e._repo.open(t):t()},t=>{e._repo.config.get((r,n)=>{if(r)return t(r);const i=libp2p(e,n);i.start(r=>{if(r)return t(r);e.libp2p=i,t()})})},t=>{const r=config$3(e);e._ipns=new ipns(r,e._repo.datastore,e._peerInfo,e._keychain,e._options),e._bitswap=new src$N(e.libp2p,e._repo.blocks,{statsEnabled:!0}),e._bitswap.start(),e._blockService.setExchange(e._bitswap),e._preload.start(),e._ipns.republisher.start(),e._mfsPreload.start(t)}],r)}),stop$1=e=>promisifyEs6(t=>(t=t||function(){},e.log("stop"),"stopped"===e.state.state()?t(new Error("Already stopped")):"running"!==e.state.state()?t(new Error("Not able to stop from state: "+e.state.state())):(e.state.stop(),e._blockService.unsetExchange(),e._bitswap.stop(),e._preload.stop(),void parallel$1([t=>e._ipns.republisher.stop(t),t=>e._mfsPreload.stop(t),t=>{const r=e.libp2p;e.libp2p=null,r.stop(t)}],r=>{e._repo.close(n=>{if(r||n)return e.emit("error",r||n),t(r||n);e.state.stopped(),e.emit("stop"),t()})})))),isOnline=function(e){return()=>Boolean(e._bitswap&&e.libp2p&&e.libp2p.isStarted())},_from$2="ipfs@^0.36.3",_id$2="ipfs@0.36.3",_inBundle$2=!1,_integrity$2="sha512-/KQPTM4Oh72o7coI68qIfe1VBPy/LDfPMLUGV6CDOGN1U0ZQJWbKnPUYgYjwx61RNt4Ku3tH1kaiTLCwokYtMg==",_location$2="/ipfs",_phantomChildren$2={"ansi-styles":"3.2.1",bs58:"4.0.1","class-is":"1.1.0",decamelize:"1.2.0","emoji-regex":"7.0.3",inherits:"2.0.3",mafmt:"6.0.7",multiaddr:"6.1.0",multibase:"0.6.0",multicodec:"0.5.3",multihashes:"0.4.14","os-locale":"3.1.0","path-exists":"3.0.0","require-directory":"2.1.1","set-blocking":"2.0.0",string_decoder:"1.1.1","util-deprecate":"1.0.2","which-module":"2.0.0",y18n:"4.0.0"},_requested$2={type:"range",registry:!0,raw:"ipfs@^0.36.3",name:"ipfs",escapedName:"ipfs",rawSpec:"^0.36.3",saveSpec:null,fetchSpec:"^0.36.3"},_requiredBy$2=["/"],_resolved$2="https://registry.npmjs.org/ipfs/-/ipfs-0.36.3.tgz",_shasum$2="feab3b26d5c1c6aa07600626484ccee1b04d699b",_spec$2="ipfs@^0.36.3",_where$2="/Users/mariusdarila/go/src/akasha-sdk-js",bin={jsipfs:"src/cli/bin.js"},browser$q={"./src/core/components/init-assets.js":!1,"./src/core/runtime/add-from-fs-nodejs.js":"./src/core/runtime/add-from-fs-browser.js","./src/core/runtime/config-nodejs.js":"./src/core/runtime/config-browser.js","./src/core/runtime/dns-nodejs.js":"./src/core/runtime/dns-browser.js","./src/core/runtime/fetch-nodejs.js":"./src/core/runtime/fetch-browser.js","./src/core/runtime/libp2p-nodejs.js":"./src/core/runtime/libp2p-browser.js","./src/core/runtime/preload-nodejs.js":"./src/core/runtime/preload-browser.js","./src/core/runtime/repo-nodejs.js":"./src/core/runtime/repo-browser.js","./src/core/runtime/ipld-nodejs.js":"./src/core/runtime/ipld-browser.js","./test/utils/create-repo-nodejs.js":"./test/utils/create-repo-browser.js",stream:"readable-stream"},bugs$2={url:"https://github.com/ipfs/js-ipfs/issues"},bundleDependencies$2=!1,contributors=[{name:"0xflotus",email:"0xflotus@gmail.com"},{name:"A_A",email:"21040751+Otto-AA@users.noreply.github.com"},{name:"Alan Shaw",email:"alan.shaw@protocol.ai"},{name:"Alan Shaw",email:"alan@tableflip.io"},{name:"Alex North",email:"alex@alexnorth.me"},{name:"Alex Potsides",email:"alex@achingbrain.net"},{name:"Andrew Nesbitt",email:"andrewnez@gmail.com"},{name:"Andrew de Andrade",email:"andrew@deandrade.com.br"},{name:"André Cruz",email:"andremiguelcruz@msn.com"},{name:"Arkadiy Kukarkin",email:"parkan@users.noreply.github.com"},{name:"Arpit Agarwal",email:"93arpit@gmail.com"},{name:"Arpit Agarwal",email:"atvanguard@users.noreply.github.com"},{name:"Bernard Mordan",email:"bernard@tableflip.io"},{name:"Brian Vander Schaaf",email:"bvs330@gmail.com"},{name:"Bruno Zell",email:"bruno.zzell@gmail.com"},{name:"CHEVALAY JOSSELIN",email:"josselin54.chevalay@gmail.com"},{name:"Caio Gondim",email:"me@caiogondim.com"},{name:"Chance Hudson",email:"jchancehud@gmail.com"},{name:"Chirag Shinde",email:"chirag-shinde@users.noreply.github.com"},{name:"Christian Couder",email:"chriscool@tuxfamily.org"},{name:"Dafeng",email:"dfguo.joe@gmail.com"},{name:"Dan Ordille",email:"dordille@gmail.com"},{name:"Daniel J. O'Quinn",email:"danieljoquinn@gmail.com"},{name:"Daniela Borges Matos de Carvalho",email:"alunassertiva@gmail.com"},{name:"David Dias",email:"daviddias.p@gmail.com"},{name:"David Gilbertson",email:"gilbertson.david@gmail.com"},{name:"David da Silva",email:"dasilvacontin@gmail.com"},{name:"Diogo Silva",email:"fsdiogo@gmail.com"},{name:"Dmitriy Ryajov",email:"dryajov@gmail.com"},{name:"Dzmitry Das",email:"dbachko@gmail.com"},{name:"Enrico Marino",email:"enrico.marino@email.com"},{name:"Faheel Ahmad",email:"faheel@live.in"},{name:"Felix Yan",email:"felixonmars@archlinux.org"},{name:"Francisco Baio Dias",email:"xicombd@gmail.com"},{name:"Francisco Baio Dias",email:"francisco@typeform.com"},{name:"Friedel Ziegelmayer",email:"dignifiedquire@gmail.com"},{name:"Gar",email:"gar+gh@danger.computer"},{name:"Georgios Rassias",email:"georassias@gmail.com"},{name:"Gorka Ludlow",email:"gorka@aquigorka.com"},{name:"Grant Herman",email:"grantlouisherman041@gmail.com"},{name:"Greenkeeper",email:"support@greenkeeper.io"},{name:"Haad",email:"haadcode@users.noreply.github.com"},{name:"Haoliang Yu",email:"haoliangyu@users.noreply.github.com"},{name:"Harsh Vakharia",email:"harshjv@users.noreply.github.com"},{name:"Henrique Dias",email:"hacdias@gmail.com"},{name:"Henry Rodrick",email:"moshisushi@gmail.com"},{name:"Heo Sangmin",email:"heo@mapiacompany.com"},{name:"Hugo Dias",email:"hugomrdias@gmail.com"},{name:"Hugo Dias",email:"mail@hugodias.me"},{name:"Irakli Gozalishvili",email:"contact@gozala.io"},{name:"Jacob Heun",email:"jacobheun@gmail.com"},{name:"Jacob Heun",email:"jake@andyet.net"},{name:"Jade Meskill",email:"jade.meskill@gmail.com"},{name:"Johannes Wikner",email:"johannes.wikner@gmail.com"},{name:"Jon Schlinkert",email:"dev@sellside.com"},{name:"Jonathan",email:"jkrone@vt.edu"},{name:"Jonybang",email:"Jonybange@gmail.com"},{name:"João Antunes",email:"j.goncalo.antunes@gmail.com"},{name:"João Santos",email:"joaosantos15@users.noreply.github.com"},{name:"Kevin Wang",email:"kevin@fossa.io"},{name:"Lars Gierth",email:"larsg@systemli.org"},{name:"Lukas Drgon",email:"lukas.drgon@gmail.com"},{name:"Maciej Krüger",email:"mkg20001@gmail.com"},{name:"Marcin Rataj",email:"lidel@lidel.org"},{name:"Marius Darila",email:"marius.darila@gmail.com"},{name:"Mat Kelly",email:"machawk1@gmail.com"},{name:"Michelle Lee",email:"michelle@protocol.ai"},{name:"Mikeal Rogers",email:"mikeal.rogers@gmail.com"},{name:"Mithgol",email:"getgit@mithgol.ru"},{name:"Molly",email:"momack2@users.noreply.github.com"},{name:"Mounish Sai",email:"pvsmounish@gmail.com"},{name:"My9Bot",email:"34904312+My9Bot@users.noreply.github.com"},{name:"Nitin Patel",email:"31539366+niinpatel@users.noreply.github.com"},{name:"Nuno Nogueira",email:"nunofmn@gmail.com"},{name:"Oli Evans",email:"oli@tableflip.io"},{name:"Oskar Nyberg",email:"oskar@oskarnyberg.com"},{name:"Pascal Precht",email:"pascal.precht@googlemail.com"},{name:"Pau Ramon Revilla",email:"masylum@gmail.com"},{name:"Paulo Rodrigues",email:"me@paulogr.com"},{name:"Pedro Teixeira",email:"i@pgte.me"},{name:"Portia Burton",email:"plburton@gmail.com"},{name:"Raoul Millais",email:"raoul@raoulmillais.com"},{name:"RasmusErik Voel Jensen",email:"github@solsort.com"},{name:"Richard Littauer",email:"richard.littauer@gmail.com"},{name:"Richard Schneider",email:"makaretu@gmail.com"},{name:"Rob Brackett",email:"rob@robbrackett.com"},{name:"Rod Keys",email:"rod@zokos.com"},{name:"Sangwon Hong",email:"qpakzk@gmail.com"},{name:"Sid Harder",email:"sideharder@gmail.com"},{name:"SidHarder",email:"softwarenavigator@gmail.com"},{name:"Stephen Whitmore",email:"stephen.whitmore@gmail.com"},{name:"Stephen Whitmore",email:"noffle@users.noreply.github.com"},{name:"Steven Allen",email:"steven@stebalien.com"},{name:"Terence Pae",email:"terencepae@gmail.com"},{name:"Uroš Jurglič",email:"jurglic@gmail.com"},{name:"Vasco Santos",email:"vasco.santos@moxy.studio"},{name:"Vasco Santos",email:"vasco.santos@ua.pt"},{name:"Volker Mische",email:"volker.mische@gmail.com"},{name:"Xiao Liang",email:"yxliang01@users.noreply.github.com"},{name:"Yahya",email:"ya7yaz@gmail.com"},{name:"Yole",email:"yole@ultiledger.io"},{name:"bitspill",email:"bitspill+github@bitspill.net"},{name:"datafatmunger",email:"jbg@peerparty.org"},{name:"dirkmc",email:"dirkmdev@gmail.com"},{name:"dirkmc",email:"dirk@mccormick.cx"},{name:"greenkeeper[bot]",email:"greenkeeper[bot]@users.noreply.github.com"},{name:"haad",email:"haad@headbanggames.com"},{name:"jbenet",email:"juan@benet.ai"},{name:"jonahweissman",email:"19804455+jonahweissman@users.noreply.github.com"},{name:"kevingzhang",email:"kevin.zhang.canada@gmail.com"},{name:"kumavis",email:"kumavis@users.noreply.github.com"},{name:"nginnever",email:"ginneversource@gmail.com"},{name:"npmcdn-to-unpkg-bot",email:"npmcdn-to-unpkg-bot@users.noreply.github.com"},{name:"robbsolter",email:"35879806+robbsolter@users.noreply.github.com"},{name:"seungwon-kang",email:"ksw3894@gmail.com"},{name:"tcme",email:"hi@this-connect.me"},{name:"victorbjelkholm",email:"victorbjelkholm@gmail.com"},{name:"Łukasz Magiera",email:"magik6k@users.noreply.github.com"},{name:"Максим Ильин",email:"negamaxi@gmail.com"}],dependencies$2={"@hapi/ammo":"^3.1.0","@hapi/hapi":"^18.3.1","@hapi/joi":"^15.0.1",async:"^2.6.1","async-iterator-all":"0.0.2","async-iterator-to-pull-stream":"^1.1.0","async-iterator-to-stream":"^1.1.0","base32.js":"~0.1.0","bignumber.js":"^9.0.0","binary-querystring":"~0.1.2",bl:"^3.0.0",boom:"^7.2.0",bs58:"^4.0.1","buffer-peek-stream":"^1.0.1",byteman:"^1.3.5",callbackify:"^1.1.0","cid-tool":"~0.3.0",cids:"~0.7.1","class-is":"^1.1.0","datastore-core":"~0.6.0","datastore-pubsub":"~0.1.1",debug:"^4.1.0",dlv:"^1.1.3","err-code":"^1.1.2","file-type":"^11.1.0",fnv1a:"^1.0.1","fsm-event":"^2.1.0","get-folder-size":"^2.0.0",glob:"^7.1.3","hapi-pino":"^6.0.0","human-to-milliseconds":"^1.0.0","interface-datastore":"~0.6.0","ipfs-bitswap":"~0.24.1","ipfs-block":"~0.8.1","ipfs-block-service":"~0.15.1","ipfs-http-client":"^32.0.0","ipfs-http-response":"~0.3.0","ipfs-mfs":"~0.11.4","ipfs-multipart":"~0.1.0","ipfs-repo":"~0.26.6","ipfs-unixfs":"~0.1.16","ipfs-unixfs-exporter":"~0.37.6","ipfs-unixfs-importer":"~0.39.9","ipfs-utils":"~0.0.3",ipld:"~0.24.1","ipld-bitcoin":"~0.3.0","ipld-dag-cbor":"~0.15.0","ipld-dag-pb":"~0.17.4","ipld-ethereum":"^4.0.0","ipld-git":"~0.5.0","ipld-raw":"^4.0.0","ipld-zcash":"~0.3.0",ipns:"~0.5.2","is-ipfs":"~0.6.1","is-pull-stream":"~0.0.0","is-stream":"^2.0.0","iso-url":"~0.4.6","just-flatten-it":"^2.1.0","just-safe-set":"^2.1.0","kind-of":"^6.0.2",libp2p:"~0.25.3","libp2p-bootstrap":"~0.9.3","libp2p-crypto":"~0.16.0","libp2p-kad-dht":"~0.15.1","libp2p-keychain":"~0.4.1","libp2p-mdns":"~0.12.0","libp2p-record":"~0.6.3","libp2p-secio":"~0.11.0","libp2p-tcp":"~0.13.0","libp2p-webrtc-star":"~0.16.0","libp2p-websocket-star-multi":"~0.4.3","libp2p-websockets":"~0.12.2",lodash:"^4.17.11",mafmt:"^6.0.2","merge-options":"^1.0.1","mime-types":"^2.1.21",mkdirp:"~0.5.1",multiaddr:"^6.0.5","multiaddr-to-uri":"^4.0.1",multibase:"~0.6.0",multicodec:"~0.5.1",multihashes:"~0.4.14","multihashing-async":"~0.6.0","node-fetch":"^2.3.0","peer-book":"~0.9.0","peer-id":"~0.12.0","peer-info":"~0.15.0",progress:"^2.0.1","prom-client":"^11.1.3","prometheus-gc-stats":"~0.6.0","promisify-es6":"^1.0.3",protons:"^1.0.1","pull-abortable":"^4.1.1","pull-cat":"^1.1.11","pull-defer":"~0.2.3","pull-file":"^1.1.0","pull-mplex":"~0.1.1","pull-ndjson":"~0.1.1","pull-pushable":"^2.2.0","pull-sort":"^1.0.1","pull-stream":"^3.6.9","pull-stream-to-async-iterator":"^1.0.1","pull-stream-to-stream":"^1.3.4","pull-traverse":"^1.0.3","readable-stream":"^3.1.1",receptacle:"^1.3.2",semver:"^6.1.1","stream-to-pull-stream":"^1.7.3",superstruct:"~0.6.0","tar-stream":"^2.0.0",temp:"~0.9.0","update-notifier":"^3.0.0","uri-to-multiaddr":"^3.0.1",varint:"^5.0.0",yargs:"^13.2.4","yargs-promise":"^1.1.0"},deprecated$2=!1,description$2="JavaScript implementation of the IPFS specification",devDependencies$2={aegir:"^18.1.0",base64url:"^3.0.1",chai:"^4.2.0",delay:"^4.1.0","detect-node":"^2.0.4","dir-compare":"^1.4.0","dirty-chai":"^2.0.1",execa:"^1.0.0","form-data":"^2.3.3",hat:"0.0.3","interface-ipfs-core":"~0.104.0","ipfsd-ctl":"~0.42.0","libp2p-websocket-star":"~0.10.2",ncp:"^2.0.0",qs:"^6.5.2",rimraf:"^2.6.2",sinon:"^7.3.1","stream-to-promise":"^2.2.0"},engines={node:">=10.0.0",npm:">=6.0.0"},homepage$2="https://github.com/ipfs/js-ipfs#readme",keywords$2=["IPFS"],leadMaintainer="Alan Shaw <alan@tableflip.io>",license$2="MIT",main$2="src/core/index.js",name$3="ipfs",optionalDependencies={"prom-client":"^11.1.3","prometheus-gc-stats":"~0.6.0"},repository$2={type:"git",url:"git+https://github.com/ipfs/js-ipfs.git"},scripts$2={benchmark:'echo "Error: no benchmarks yet" && exit 1',"benchmark:browser":'echo "Error: no benchmarks yet" && exit 1',"benchmark:node":'echo "Error: no benchmarks yet" && exit 1',"benchmark:node:core":'echo "Error: no benchmarks yet" && exit 1',"benchmark:node:http":'echo "Error: no benchmarks yet" && exit 1',build:"aegir build",lint:"aegir lint",release:"aegir release -t node -t browser","release-major":"aegir release --type major -t node -t browser","release-minor":"aegir release --type minor -t node -t browser",test:"aegir test -t node -t browser -t webworker --no-cors --timeout=10000","test:bootstrapers":"IPFS_TEST=bootstrapers aegir test -t browser -f test/bootstrapers.js --timeout=10000","test:browser":"aegir test -t browser --no-cors --timeout=10000","test:node":"aegir test -t node --timeout=10000","test:node:cli":"aegir test -t node -f test/cli/index.js --timeout=10000","test:node:core":"aegir test -t node -f test/core/**/*.js --timeout=10000","test:node:gateway":"aegir test -t node -f test/gateway/index.js --timeout=10000","test:node:http":"aegir test -t node -f test/http-api/index.js --timeout=10000","test:node:interface":"aegir test -t node -f test/core/interface.spec.js --timeout=10000","test:webworker":"aegir test -t webworker --no-cors --timeout=10000"},version$4="0.36.3",_package$4={_from:_from$2,_id:_id$2,_inBundle:_inBundle$2,_integrity:_integrity$2,_location:_location$2,_phantomChildren:_phantomChildren$2,_requested:_requested$2,_requiredBy:_requiredBy$2,_resolved:_resolved$2,_shasum:_shasum$2,_spec:_spec$2,_where:_where$2,bin:bin,browser:browser$q,"browser-all-ipld-formats":{"./src/core/runtime/ipld-browser.js":"./src/core/runtime/ipld-browser-all.js"},bugs:bugs$2,bundleDependencies:bundleDependencies$2,contributors:contributors,dependencies:dependencies$2,deprecated:deprecated$2,description:description$2,devDependencies:devDependencies$2,engines:engines,homepage:homepage$2,keywords:keywords$2,leadMaintainer:leadMaintainer,license:license$2,main:main$2,name:name$3,optionalDependencies:optionalDependencies,repository:repository$2,scripts:scripts$2,version:version$4},_package$5=Object.freeze({_from:_from$2,_id:_id$2,_inBundle:_inBundle$2,_integrity:_integrity$2,_location:_location$2,_phantomChildren:_phantomChildren$2,_requested:_requested$2,_requiredBy:_requiredBy$2,_resolved:_resolved$2,_shasum:_shasum$2,_spec:_spec$2,_where:_where$2,bin:bin,browser:browser$q,bugs:bugs$2,bundleDependencies:bundleDependencies$2,contributors:contributors,dependencies:dependencies$2,deprecated:deprecated$2,description:description$2,devDependencies:devDependencies$2,engines:engines,homepage:homepage$2,keywords:keywords$2,leadMaintainer:leadMaintainer,license:license$2,main:main$2,name:name$3,optionalDependencies:optionalDependencies,repository:repository$2,scripts:scripts$2,version:version$4,default:_package$4}),require$$0$2=getCjsExportFromNamespace(_package$5),version$5=function(e){return promisifyEs6((t,r)=>{"function"==typeof t&&(r=t,t={}),e.repo.version((e,t)=>{if(e)return r(e);r(null,{version:require$$0$2.version,repo:t,commit:""})})})};const pkgversion=require$$0$2.version;var id$6=function(e){return promisifyEs6((t,r)=>{"function"==typeof t&&(r=t,t={}),setImmediate$1(()=>r(null,{id:e._peerInfo.id.toB58String(),publicKey:e._peerInfo.id.pubKey.bytes.toString("base64"),addresses:e._peerInfo.multiaddrs.toArray().map(e=>e.toString()).filter(e=>e.indexOf("ipfs")>=0).sort(),agentVersion:`js-ipfs/${pkgversion}`,protocolVersion:"9000"}))})};const repoVersion$1=src$G.repoVersion;var repo=function(e){return{init:(e,t,r)=>{},version:promisifyEs6(t=>{e._repo._isInitialized(r=>{if(r){return[/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some(e=>e.test(r.message))?t(null,repoVersion$1):t(r)}e._repo.version.get(t)})}),gc:promisifyEs6((e,t)=>{"function"==typeof e&&(t=e,e={}),t(new Error("Not implemented"))}),stat:promisifyEs6((t,r)=>{"function"==typeof t&&(r=t,t={}),e._repo.stat(t,(e,t)=>{if(e)return r(e);r(null,{numObjects:t.numObjects,repoSize:t.repoSize,repoPath:t.repoPath,version:t.version.toString(),storageMax:t.storageMax})})}),path:()=>e._repo.path}},configNodejs=()=>({Addresses:{Swarm:["/ip4/0.0.0.0/tcp/4002","/ip4/127.0.0.1/tcp/4003/ws"],API:"/ip4/127.0.0.1/tcp/5002",Gateway:"/ip4/127.0.0.1/tcp/9090"},Discovery:{MDNS:{Enabled:!0,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/ip4/104.236.176.52/tcp/4001/ipfs/QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z","/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ","/ip4/104.236.179.241/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM","/ip4/162.243.248.213/tcp/4001/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm","/ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu","/ip4/104.236.76.40/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64","/ip4/178.62.158.247/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd","/ip4/178.62.61.185/tcp/4001/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3","/ip4/104.236.151.122/tcp/4001/ipfs/QmSoLju6m7xTh3DuokvT3886QRYqxAzb1kShaanJgW36yx","/ip6/2604:a880:1:20::1f9:9001/tcp/4001/ipfs/QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z","/ip6/2604:a880:1:20::203:d001/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM","/ip6/2604:a880:0:1010::23:d001/tcp/4001/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm","/ip6/2400:6180:0:d0::151:6001/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu","/ip6/2604:a880:800:10::4a:5001/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64","/ip6/2a03:b0c0:0:1010::23:1001/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd","/ip6/2a03:b0c0:1:d0::e7:1/tcp/4001/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3","/ip6/2604:a880:1:20::1d9:6001/tcp/4001/ipfs/QmSoLju6m7xTh3DuokvT3886QRYqxAzb1kShaanJgW36yx","/dns4/node0.preload.ipfs.io/tcp/443/wss/ipfs/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/ipfs/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6"],Swarm:{ConnMgr:{LowWater:200,HighWater:500}}}),unixfs_proto="message Data {\n  enum DataType {\n    Raw = 0;\n    Directory = 1;\n    File = 2;\n    Metadata = 3;\n    Symlink = 4;\n    HAMTShard = 5;\n  }\n\n  required DataType Type = 1;\n  optional bytes Data = 2;\n  optional uint64 filesize = 3;\n  repeated uint64 blocksizes = 4;\n\n  optional uint64 hashType = 5;\n  optional uint64 fanout = 6;\n}\n\nmessage Metadata {\n  optional string MimeType = 1;\n}",src$1B=createCommonjsModule(function(e,t){const r=src$i(unixfs_proto).Data,n=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],i=["directory","hamt-sharded-directory"];function o(e,t){if(!(this instanceof o))return new o(e,t);if(-1===n.indexOf(e))throw new Error("Type: "+e+" is not valid");this.type=e,this.data=t,this.blockSizes=[],this.addBlockSize=e=>{this.blockSizes.push(e)},this.removeBlockSize=e=>{this.blockSizes.splice(e,1)},this.fileSize=()=>{if(i.indexOf(this.type)>=0)return;let e=0;return this.blockSizes.forEach(t=>{e+=t}),t&&(e+=t.length),e},this.marshal=()=>{let e;switch(this.type){case"raw":e=r.DataType.Raw;break;case"directory":e=r.DataType.Directory;break;case"file":e=r.DataType.File;break;case"metadata":e=r.DataType.Metadata;break;case"symlink":e=r.DataType.Symlink;break;case"hamt-sharded-directory":e=r.DataType.HAMTShard;break;default:throw new Error(`Unkown type: "${this.type}"`)}let t=this.fileSize(),n=this.data;this.data&&this.data.length||(n=void 0);let i=this.blockSizes;return this.blockSizes&&this.blockSizes.length||(i=void 0),r.encode({Type:e,Data:n,filesize:t,blocksizes:i,hashType:this.hashType,fanout:this.fanout})}}o.unmarshal=e=>{const t=r.decode(e);t.Data||(t.Data=void 0);const i=new o(n[t.Type],t.Data);return i.blockSizes=t.blocksizes,i},e.exports=o}),Decode=string_decoder$1.StringDecoder,pullUtf8Decoder=function(e){var t,r=new Decode(e);return function(e){return function(n,i){if(t)return i(t);e(n,function(e,n){t=e,!0===e?(n=r.end())?i(null,n):i(!0):e&&!0!==e?i(e):i(null,r.write(n))})}}},pullFile=function(e,t){var r,n,i,o,s,a,c=t&&t.mode||438,u=t&&(t.bufferSize||t.buffer&&t.buffer.length)||65536,f=t&&t.start||0,l=t&&t.end||Number.MAX_SAFE_INTEGER,d=t&&t.fd,h=t&&t.buffer||new Buffer(u),p=t&&!!t.live;p&&(a=fs.watch(e,{persistent:!1!==t.persistent},function(e){if(o&&"change"===e){var t=o;o=null,n=!1,m(t)}}));var b=t&&t.flags||"r";function m(e){if(n)p?o=e:g(e);else{var a=Math.min(l-f,u);i=!0,fs.read(d,h,0,a,f,function(t,a,c){return i=!1,f+=a,n&&!p?(g(s),e(n)):r?e(t||r):t?e(t):void(a===c.length?e(null,c):0===a&&p?(o=e,n=!0):(n=!0,e(null,c.slice(0,a))))}),h=t&&t.buffer||new Buffer(Math.min(l-f,u))}}function g(e){if(!e)throw new Error("close must have cb");return a&&a.close(),t&&!1===t.autoClose?e(!0):i?(s=e,n=!0):d?void fs.close(d,function(t){d=null,e(t||!0)}):e(!0)}function y(t,a){t?(r=t,p=!1,o&&o(t||!0),g(a)):r?a(r):d?m(a):function(t){i=!0,fs.open(e,b,c,function(e,r){return d=r,i=!1,n?(g(s),t(n)):e?t(e):m(t)})}(a)}return t&&t.encoding?pullUtf8Decoder(t.encoding)(y):y},initAssets=function(e,t,r){const n=path$4.join(__dirname,"../../init-files/init-docs"),i=n.lastIndexOf(path$4.sep);pullStream(pullStream.values([n]),pullStream.asyncMap((e,t)=>glob_1(path$4.join(e,"/**/*"),{nodir:!0},t)),pullStream.flatten(),pullStream.map(e=>{return{path:e.substring(i+1),content:pullFile(e)}}),e.addPullStream(),pullStream.through(e=>{if("init-docs"===e.path){const r=new src$v(e.hash);t("to get started, enter:\n"),t(`\tjsipfs cat /ipfs/${r.toBaseEncodedString()}/readme\n`)}}),pullStream.collect(e=>{if(e)return r(e);r(null,!0)}))};const{DAGNode:DAGNode}=src$k;var init$3=function(e){return promisifyEs6((t,r)=>{"function"==typeof t&&(r=t,t={});const n=(t,n)=>{if(t)return e.emit("error",t),r(t);e.preStart(t=>{if(t)return e.emit("error",t),r(t);e.state.initialized(),e.emit("init"),r(null,n)})};if("uninitialized"!==e.state.state())return n(new Error("Not able to init from state: "+e.state.state()));if(e.state.init(),e.log("init"),t.repo)return e._repo=t.repo,n(null,!0);t.emptyRepo=t.emptyRepo||!1,t.bits=Number(t.bits)||2048,t.log=t.log||function(){};const i=mergeOptions(configNodejs(),e._options.config);let o;waterfall([t=>e._repo.exists(t),(r,n)=>{if(e.log("repo exists?",r),!0===r)return n(new Error("repo already exists"));t.privateKey?(e.log("using user-supplied private-key"),"object"==typeof t.privateKey?n(null,t.privateKey):src$s.createFromPrivKey(Buffer.from(t.privateKey,"base64"),n)):(t.log(`generating ${t.bits}-bit RSA keypair...`,!1),e.log("generating peer id: %s bits",t.bits),src$s.create({bits:t.bits},n))},(r,n)=>{e.log("identity generated"),i.Identity={PeerID:r.toB58String(),PrivKey:r.privKey.bytes.toString("base64")},o=r.privKey,t.pass&&(i.Keychain=src$H.generateOptions()),t.log("done"),t.log("peer identity: "+i.Identity.PeerID),e._repo.init(i,n)},(t,r)=>e._repo.open(r),r=>{if(e.log("repo opened"),t.pass){e.log("creating keychain");const n=Object.assign({passPhrase:t.pass},i.Keychain);e._keychain=new src$H(e._repo.keys,n),e._keychain.importPeer("self",{privKey:o},r)}else r(null,!0)},(t,r)=>{const n=new offlineDatastore(e._repo);e._ipns=new ipns(n,e._repo.datastore,e._peerInfo,e._keychain,e._options),r(null,!0)},(r,n)=>{if(t.emptyRepo)return n(null,!0);const i=[t=>{waterfall([e=>{try{e(null,DAGNode.create(new src$1B("directory").marshal()))}catch(t){e(t)}},(t,r)=>e.dag.put(t,{version:0,format:src$4.DAG_PB,hashAlg:src$4.SHA2_256}).then(e=>r(null,e),e=>r(e)),(t,r)=>e._ipns.initializeKeyspace(o,t.toBaseEncodedString(),r)],t)}];"function"==typeof initAssets&&i.push(r=>initAssets(e,t.log,r)),e.log("adding assets"),parallel$1(i,e=>{e?n(e):n(null,!0)})}],n)})};const isMultiaddr$2=src$3.IPFS.matches;function isValidMultiaddr(e){try{return isMultiaddr$2(e)}catch(e){return!1}}function invalidMultiaddrError(e){return new Error(`${e} is not a valid Multiaddr`)}var bootstrap=function(e){return{list:promisifyEs6(t=>{e._repo.config.get((e,r)=>{if(e)return t(e);t(null,{Peers:r.Bootstrap})})}),add:promisifyEs6((t,r,n)=>{if("function"==typeof r&&(n=r,r={default:!1}),t&&!isValidMultiaddr(t))return setImmediate(()=>n(invalidMultiaddrError(t)));e._repo.config.get((i,o)=>{if(i)return n(i);r.default?o.Bootstrap=configNodejs().Bootstrap:t&&-1===o.Bootstrap.indexOf(t)&&o.Bootstrap.push(t),e._repo.config.set(o,e=>{if(e)return n(e);n(null,{Peers:r.default?configNodejs().Bootstrap:[t]})})})}),rm:promisifyEs6((t,r,n)=>{if("function"==typeof r&&(n=r,r={all:!1}),t&&!isValidMultiaddr(t))return setImmediate(()=>n(invalidMultiaddrError(t)));e._repo.config.get((i,o)=>{if(i)return n(i);r.all?o.Bootstrap=[]:o.Bootstrap=o.Bootstrap.filter(e=>e!==t),e._repo.config.set(o,e=>{if(e)return n(e);const i=[];!r.all&&t&&i.push(t),n(null,{Peers:i})})})})}},config$6=function(e){return{get:promisifyEs6((t,r)=>("function"==typeof t&&(r=t,t=void 0),e._repo.config.get(t,r))),set:promisifyEs6((t,r,n)=>{e._repo.config.set(t,r,n)}),replace:promisifyEs6((t,r)=>{e._repo.config.set(t,r)})}},block=function(e){return{get:promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{};try{t=cleanCid(t)}catch(e){return setImmediate$1(()=>n(errCode(e,"ERR_INVALID_CID")))}!1!==r.preload&&e._preload(t),e._blockService.get(t,n)}),put:promisifyEs6((t,r,n)=>{if(n=n||function(){},"function"==typeof r&&(n=r,r={}),r=r||{},Array.isArray(t))return n(new Error("Array is not supported"));waterfall([e=>{if(src$b.isBlock(t))return e(null,t);if(r.cid&&src$v.isCID(r.cid))return e(null,new src$b(t,r.cid));const n=r.mhtype||"sha2-256",i=r.format||"dag-pb";let o;o=null==r.version?"sha2-256"===n&&"dag-pb"===i?0:1:r.version,src$y(t,n,(r,n)=>{if(r)return e(r);let s;try{s=new src$v(o,i,n)}catch(r){return e(r)}e(null,new src$b(t,s))})},(t,n)=>e._blockService.put(t,i=>{if(i)return n(i);!1!==r.preload&&e._preload(t.cid),n(null,t)})],n)}),rm:promisifyEs6((t,r)=>{try{t=cleanCid(t)}catch(e){return setImmediate$1(()=>r(errCode(e,"ERR_INVALID_CID")))}e._blockService.delete(t,r)}),stat:promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{};try{t=cleanCid(t)}catch(e){return setImmediate$1(()=>n(errCode(e,"ERR_INVALID_CID")))}!1!==r.preload&&e._preload(t),e._blockService.get(t,(e,r)=>{if(e)return n(e);n(null,{key:t.toString(),size:r.data.length})})})}};function cleanCid(e){return src$v.isCID(e)?e:new src$v(e)}const DAGNode$1=src$k.DAGNode,DAGLink=src$k.DAGLink,mh=src;function normalizeMultihash(e,t){if("string"==typeof e)return"base58"!==t&&t?Buffer.from(e,t):e;if(Buffer.isBuffer(e))return e;if(src$v.isCID(e))return e.buffer;throw new Error("unsupported multihash")}function parseBuffer(e,t,r){switch(t){case"json":return parseJSONBuffer(e,r);case"protobuf":return parseProtoBuffer(e,r);default:r(new Error(`unkown encoding: ${t}`))}}function parseJSONBuffer(e,t){let r,n;try{const i=JSON.parse(e.toString());n=(i.Links||[]).map(e=>new DAGLink(e.Name||e.name,e.Size||e.size,mh.fromB58String(e.Hash||e.hash||e.multihash))),r=Buffer.from(i.Data)}catch(e){return t(new Error("failed to parse JSON: "+e))}try{t(null,DAGNode$1.create(r,n))}catch(e){t(e)}}function parseProtoBuffer(e,t){let r;try{r=src$k.util.deserialize(e)}catch(e){return t(e)}t(null,r)}function findLinks(e,t=[]){for(let r in e){const n=e[r];if("/"===r&&1===Object.keys(e).length)try{t.push(new DAGLink("",0,new src$v(n)));continue}catch(e){}src$v.isCID(n)?t.push(new DAGLink("",0,n)):(Array.isArray(n)&&findLinks(n,t),"object"!=typeof n||n instanceof String||findLinks(n,t))}return t}var object$1=function(e){function t(t){return(r,n,i)=>{"function"==typeof n&&(i=n,n={}),n=n||{},waterfall([t=>{e.object.get(r,n,t)},(r,i)=>{t(r,(t,r)=>{if(t)return i(t);e._ipld.put(r,src$4.DAG_PB,{cidVersion:0,hashAlg:src$4.SHA2_256}).then(t=>{!1!==n.preload&&e._preload(t),i(null,t)},e=>i(e))})}],i)}}return{new:promisifyEs6((t,r,n)=>{let i,o;if("function"==typeof t&&(n=t,t=void 0,r={}),"function"==typeof r&&(n=r,r={}),r=r||{},t){if("unixfs-dir"!==t)return setImmediate$1(()=>n(new Error("unknown template")));i=new src$1B("directory").marshal()}else i=Buffer.alloc(0);try{o=DAGNode$1.create(i)}catch(e){return n(e)}e._ipld.put(o,src$4.DAG_PB,{cidVersion:0,hashAlg:src$4.SHA2_256}).then(t=>{!1!==r.preload&&e._preload(t),n(null,t)},e=>n(e))}),put:promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={});const i=(r=r||{}).enc;let o;if(Buffer.isBuffer(t))if(i)parseBuffer(t,i,(e,t)=>{if(e)return n(e);o=t,s()});else{try{o=DAGNode$1.create(t)}catch(e){return n(e)}s()}else if(DAGNode$1.isDAGNode(t))o=t,s();else{if("object"!=typeof t)return n(new Error("obj not recognized"));try{o=DAGNode$1.create(t.Data,t.Links)}catch(e){return n(e)}s()}function s(){e._ipld.put(o,src$4.DAG_PB,{cidVersion:0,hashAlg:src$4.SHA2_256}).then(t=>{!1!==r.preload&&e._preload(t),n(null,t)},e=>n(e))}}),get:promisifyEs6((t,r,n)=>{let i,o;"function"==typeof r&&(n=r,r={}),r=r||{};try{i=normalizeMultihash(t,r.enc)}catch(e){return setImmediate$1(()=>n(errCode(e,"ERR_INVALID_MULTIHASH")))}try{o=new src$v(i)}catch(e){return setImmediate$1(()=>n(errCode(e,"ERR_INVALID_CID")))}1===r.cidVersion&&(o=o.toV1()),!1!==r.preload&&e._preload(o),e._ipld.get(o).then(e=>n(null,e),e=>n(e))}),data:promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={}),e.object.get(t,r,(e,t)=>{if(e)return n(e);n(null,t.Data)})}),links:promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={});const i=new src$v(t);e.dag.get(i,r,(e,t)=>{if(e)return n(e);if("raw"===i.codec)return n(null,[]);if("dag-pb"===i.codec)return n(null,t.value.Links);if("dag-cbor"===i.codec){const e=findLinks(t);return n(null,e)}n(new Error(`Cannot resolve links from codec ${i.codec}`))})}),stat:promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{},waterfall([n=>e.object.get(t,r,n),(e,t)=>{t(null,{node:e,serialized:src$k.util.serialize(e)})},({node:e,serialized:t},r)=>{parallel$1({serialized:e=>e(null,t),cid:e=>src$k.util.cid(t,{cidVersion:0}).then(t=>e(null,t),e),node:t=>t(null,e)},r)}],(e,t)=>{if(e)return n(e);const r=t.serialized.length,i=t.node.Links.reduce((e,t)=>e+t.Tsize,0);n(null,{Hash:t.cid.toBaseEncodedString(),NumLinks:t.node.Links.length,BlockSize:r,LinksSize:r-t.node.Data.length,DataSize:t.node.Data.length,CumulativeSize:r+i})})}),patch:promisifyEs6({addLink(e,r,n,i){t((e,t)=>{DAGNode$1.addLink(e,r).then(e=>{t(null,e)},t)})(e,n,i)},rmLink(e,r,n,i){t((e,t)=>{r=r.Name||r.name;try{e=DAGNode$1.rmLink(e,r)}catch(e){return t(e)}t(null,e)})(e,n,i)},appendData(e,r,n,i){t((e,t)=>{const n=Buffer.concat([e.Data,r]);try{e=DAGNode$1.create(n,e.Links)}catch(e){return t(e)}t(null,e)})(e,n,i)},setData(e,r,n,i){t((e,t)=>{try{e=DAGNode$1.create(r,e.Links)}catch(e){return t(e)}t(null,e)})(e,n,i)}})}},getIterator$1=function(e){if(e){if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"==typeof e.next)return e}throw new Error("argument is not an iterator or iterable")},pullStreamToAsyncIterator=e=>(async function*(){let t;for(pullStream(e,e=>{t=()=>new Promise((t,r)=>{e(null,(e,n)=>!0===e?t({end:e}):e?r(e):void t({data:n}))})});;){const{end:e,data:r}=await t();if(e)break;yield r}})();function toPull(e){return e=getIterator$1(e),async(t,r)=>{if(t){if(e.return)try{await e.return()}catch(e){return r(e)}return r(t)}let n;try{n=await e.next()}catch(e){return r(e)}if(n.done)return r(!0);r(null,n.value)}}toPull.source=toPull,toPull.transform=toPull.through=e=>t=>toPull(e(pullStreamToAsyncIterator(t))),toPull.duplex=e=>({sink:toPull.sink(e.sink),source:toPull(e.source)}),toPull.sink=e=>t=>{e({[Symbol.asyncIterator](){return this},next:()=>new Promise((e,r)=>{t(null,(t,n)=>!0===t?e({done:!0,value:n}):t?r(t):void e({done:!1,value:n}))}),return:()=>new Promise((e,r)=>{t(!0,(t,n)=>{if(t&&!0!==t)return r(t);e({done:!0,value:n})})}),throw:e=>new Promise((r,n)=>{t(e,(e,t)=>{if(e&&!0!==e)return n(e);r({done:!0,value:t})})})})};var asyncIteratorToPullStream=toPull,justFlattenIt=flatten$3;function flatten$3(e){if(!Array.isArray(e))throw new Error("expected an array");for(var t=[],r=e.length,n=0;n<r;n++){var i=e[n];Array.isArray(i)?t.push.apply(t,flatten$3(i)):t.push(i)}return t}var dag=function(e){return{put:promisifyEs6((t,r,n)=>{if("function"==typeof r&&(n=r,r={}),(r=r||{}).cid&&(r.format||r.hashAlg))return n(new Error("Can't put dag node. Please provide either `cid` OR `format` and `hashAlg` options."));if(r.format&&!r.hashAlg||!r.format&&r.hashAlg)return n(new Error("Can't put dag node. Please provide `format` AND `hashAlg` options."));const i={format:src$4.DAG_CBOR,hashAlg:src$4.SHA2_256};if(r.format&&"string"==typeof r.format){const e=r.format.toUpperCase().replace(/-/g,"_");r.format=src$4[e]}if(r.hashAlg&&"string"==typeof r.hashAlg){const e=r.hashAlg.toUpperCase().replace(/-/g,"_");r.hashAlg=src$4[e]}void 0===(r=r.cid?r:Object.assign({},i,r)).version&&(r.format===src$4.DAG_PB&&r.hashAlg===src$4.SHA2_256?r.version=0:r.version=1),e._ipld.put(t,r.format,{hashAlg:r.hashAlg,cidVersion:r.version}).then(t=>(!1!==r.preload&&e._preload(t),n(null,t)),e=>n(e))}),get:promisifyEs6((t,r,n,i)=>{if("function"==typeof r&&(i=r,r=void 0),"function"==typeof n&&(i=n,"string"!=typeof r?(n=r,r=void 0):n={}),n=n||{},"string"==typeof t){const e=t.split("/");try{t=new src$v(e[0])}catch(e){return setImmediate$1(()=>i(errCode(e,"ERR_INVALID_CID")))}e.shift(),r=e.length>0?e.join("/"):"/"}else if(Buffer.isBuffer(t))try{t=new src$v(t)}catch(e){return setImmediate$1(()=>i(errCode(e,"ERR_INVALID_CID")))}if(!1!==n.preload&&e._preload(t),void 0===r||"/"===r)e._ipld.get(t).then(e=>{i(null,{value:e,remainderPath:""})},e=>i(e));else{const o=e._ipld.resolve(t,r);(n.localResolve?o.first():o.last()).then(e=>i(null,e),e=>i(e))}}),tree:promisifyEs6((t,r,n,i)=>{if("object"==typeof r&&(i=n,n=r,r=void 0),"function"==typeof r&&(i=r,r=void 0),"function"==typeof n&&(i=n,n={}),n=n||{},"string"==typeof t){const e=t.split("/");try{t=new src$v(e[0])}catch(e){return setImmediate$1(()=>i(errCode(e,"ERR_INVALID_CID")))}e.shift(),r=e.length>0?e.join("/"):void 0}!1!==n.preload&&e._preload(t),pullStream(asyncIteratorToPullStream(e._ipld.tree(t,r,n)),pullStream.collect(i))}),_getRecursive:promisifyEs6((t,r,n)=>{let i;"function"==typeof r&&(n=r,r={}),r=r||{};try{i=new src$v(t)}catch(e){return setImmediate$1(()=>n(errCode(e,"ERR_INVALID_CID")))}e.dag.get(i,"",r,(t,i)=>{if(t)return n(t);map$2(i.value.Links,(t,n)=>{e.dag._getRecursive(t.Hash,r,n)},(e,t)=>{if(e)return n(e);n(null,justFlattenIt([i.value,t]))})})})}},utils$K=createCommonjsModule(function(e,t){t.OFFLINE_ERROR="This command must be run in online mode. Try running 'ipfs daemon' first.";const r=promisifyEs6(function(e,r,n){Array.isArray(r)||(r=[r]),map$2(r,(r,n)=>{if("string"!=typeof r){let e;try{e=new src$v(r)}catch(e){return n(e)}return n(null,e.buffer)}let i;try{i=t.parseIpfsPath(r)}catch(e){return n(e)}const o=new src$v(i.hash),s=i.links;if(!s.length)return n(null,o.buffer);e.get(o,function t(r,i,o,s){if(o)return n(o);if(!i.length)return n(null,r.buffer);const a=i[0];const c=s.Links.find(e=>e.Name===a);if(!c)return n(new Error(`no link named "${a}" under ${r}`));e.get(c.Hash,t.bind(null,c.Hash,i.slice(1)))}.bind(null,o,s))},n)});t.normalizePath=e=>{if(src$w.cid(e))return`/ipfs/${e}`;if(src$w.path(e))return e;throw Object.assign(new Error(`invalid ${e} path`),{code:"ERR_BAD_PATH"})},t.parseIpfsPath=function(e){const t=new Error("invalid ipfs ref path"),r=(e=e.replace(/^\/ipfs\//,"")).match(/([^\/]+(?:\/[^\/]+)*)\/?$/);if(!r)throw t;const[n,...i]=r[1].split("/");if(src$w.cid(n))return{hash:n,links:i};throw t},t.resolvePath=r}),utils_1$a=utils$K.OFFLINE_ERROR,utils_2$5=utils$K.normalizePath,utils_3$5=utils$K.parseIpfsPath,utils_4$5=utils$K.resolvePath;const OFFLINE_ERROR=utils$K.OFFLINE_ERROR;var swarm=function(e){return{peers:promisifyEs6((t,r)=>{if("function"==typeof t&&(r=t,t={}),t=t||{},!e.isOnline())return r(new Error(OFFLINE_ERROR));const n=t.v||t.verbose,i=[];Object.values(e._peerInfoBook.getAll()).forEach(e=>{const t=e.isConnected();if(!t)return;const r={addr:t,peer:e.id};n&&(r.latency="unknown"),i.push(r)}),r(null,i)}),addrs:promisifyEs6(t=>{if(!e.isOnline())return t(new Error(OFFLINE_ERROR));t(null,Object.values(e._peerInfoBook.getAll()))}),localAddrs:promisifyEs6(t=>{if(!e.isOnline())return t(new Error(OFFLINE_ERROR));t(null,e.libp2p.peerInfo.multiaddrs.toArray())}),connect:promisifyEs6((t,r)=>{if(!e.isOnline())return r(new Error(OFFLINE_ERROR));e.libp2p.dial(t,r)}),disconnect:promisifyEs6((t,r)=>{if(!e.isOnline())return r(new Error(OFFLINE_ERROR));e.libp2p.hangUp(t,r)}),filters:promisifyEs6(e=>e(new Error("Not implemented")))}},ping$2=function(e){return promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={}),pull(e.pingPullStream(t,r),pull.collect(n))})};const OFFLINE_ERROR$1=utils$K.OFFLINE_ERROR,log$I=src$z("ipfs:pingPullStream");log$I.error=src$z("ipfs:pingPullStream:error");var pingPullStream=function(e){return(t,r)=>{if(!e.isOnline())return pullStream.error(new Error(OFFLINE_ERROR$1));r=Object.assign({count:10},r);const n=pullPushable_1();return getPeer(e.libp2p,n,t,(t,i)=>{if(t)return log$I.error(t),void n.end(t);runPing(e.libp2p,n,r.count,i,e=>{e&&(log$I.error(e),n.push(getPacket({success:!1,text:e.toString()})),n.end())})}),n}};function getPacket(e){return Object.assign({success:!0,time:0,text:""},e)}function getPeer(e,t,r,n){let i,o;try{i=src$s.createFromB58String(r)}catch(e){return n(e)}try{o=e.peerBook.get(i)}catch(o){return log$I("Peer not found in peer book, trying peer routing"),t.push(getPacket({text:`Looking up peer ${r}`})),e.peerRouting.findPeer(i,n)}n(null,o)}function runPing(e,t,r,n,i){e.ping(n,(e,o)=>{if(e)return i(e);let s=0,a=0;t.push(getPacket({text:`PING ${n.id.toB58String()}`})),o.on("ping",e=>{if(t.push(getPacket({time:e})),a+=e,++s>=r){const e=a/r;o.stop(),t.push(getPacket({text:`Average latency: ${e}ms`})),t.end()}}),o.on("error",e=>{log$I.error(e),o.stop(),i(e)}),o.start()})}var pullStreamToStream=duplex$3,source$3=function(e){return duplex$3(null,e)},sink$3=function(e){return duplex$3(e,null)},next="undefined"==typeof setImmediate?process.nextTick:setImmediate;function duplex$3(e,t){e&&"object"==typeof e&&(t=e.source,e=e.sink);var r,n,i,o=[],s=[],a=new Stream$1;a.writable=a.readable=!0,a.write=function(e){return o.length?o.shift()(null,e):s.push(e),o.length||(n=!0),!!o.length},a.end=function(){t?s.length?d():t(r=!0,o.length?o.shift():function(){}):o.length&&o.shift()(!0)},a.source=function(e,t){s.length?(t(null,s.shift()),s.length||a.emit("drain")):((r=r||e)?t(r):o.push(t),n&&(n=!1,a.emit("drain")))},e&&(i=e(a.source)),i&&!t&&(t=i);var c=[],u=!1,f=!1;if(a.sink=function(e){t=e,next(d)},t){a.sink(t);var l=a.pipe.bind(a);a.pipe=function(e,t){var r=l(e,t);return a.paused&&a.resume(),r}}function d(){if(t&&!f){for(;c.length&&!a.paused;)a.emit("data",c.shift());if(!a.paused){if(u)return a.emit("end");f=!0,t(null,function e(n,i){f=!1,a.paused?!0===n?u=n:n?a.emit("error",n):c.push(i):n&&!0!==(r=n)?a.emit("error",n):(r=r||n)?a.emit("end"):(a.emit("data",i),f=!0,t(null,e))})}}}return a.pause=function(){return a.paused=!0,a},a.resume=function(){return a.paused=!1,d(),a},a.destroy=function(){!r&&t&&t(r=!0,function(){}),r=!0,o.length&&o.shift()(!0),a.emit("close")},a}pullStreamToStream.source=source$3,pullStreamToStream.sink=sink$3;var pingReadableStream=function(e){return(t,r)=>pullStreamToStream.source(e.pingPullStream(t,r))},mapSeries=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(mapLimit),n=i(doLimit_1);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(r.default,1),e.exports=t.default});unwrapExports(mapSeries);var detectLimit=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(identity_1),n=s(createTester),i=s(doParallelLimit_1),o=s(findGetResult);function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)((0,n.default)(r.default,o.default)),e.exports=t.default});function hash$5(e){for(var t=hash$5.BASE,r=0,n=e.length;r<n;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}unwrapExports(detectLimit),hash$5.BASE=2166136261;var fnv1a=hash$5,someLimit=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(createTester),n=o(doParallelLimit_1),i=o(identity_1);function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)((0,r.default)(Boolean,i.default)),e.exports=t.default});unwrapExports(someLimit);var someSeries=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(someLimit),n=i(doLimit_1);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(r.default,1),e.exports=t.default});unwrapExports(someSeries);var pin_proto='\n  syntax = "proto2";\n\n  package ipfs.pin;\n\n  option go_package = "pb";\n\n  message Set {\n    optional uint32 version = 1;\n    optional uint32 fanout = 2;\n    optional fixed32 seed = 3;\n  }\n',pinSet=createCommonjsModule(function(e,t){const{DAGNode:r,DAGLink:n}=src$k,i=src.fromB58String("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),o=256,s=8192,a=src$i(pin_proto);function c(e){return new src$v(e).toBaseEncodedString()}e.exports=function(e){const t={hasDescendant:(t,r,n)=>{const i={};return(src$v.isCID(r)||Buffer.isBuffer(r))&&(r=c(r)),function t(n,o){someSeries(n.Links,(n,o)=>{const s=n.Hash,a=c(s);return a===r?o(null,!0):a in i?o(null,!1):(i[a]=!0,void e.get(s,"",{preload:!1},(e,r)=>{if(e)return o(e);t(r.value,o)}))},o)}(t,n)},storeSet:(r,n)=>{const i=r.map(e=>(("string"==typeof e||Buffer.isBuffer(e))&&(e=new src$v(e)),{key:e,data:null}));t.storeItems(i,(t,r)=>{if(t)return n(t);e.put(r,{version:0,format:src$4.DAG_PB,hashAlg:src$4.SHA2_256,preload:!1},(e,t)=>{if(e)return n(e,t);n(null,{node:r,cid:t})})})},storeItems:(t,u)=>{return function t(u,f,l){const d=a.Set.encode({version:1,fanout:o,seed:f});const h=Buffer.concat([Buffer.from(varint.encode(d.length)),d]);const p=[];for(let e=0;e<o;e++)p.push(new n("",1,i));if(u.length<=s){const e=u.map(e=>({link:new n("",1,e.key),data:e.data||Buffer.alloc(0)})).sort((e,t)=>Buffer.compare(e.link.Hash.buffer,t.link.Hash.buffer)),t=p.concat(e.map(e=>e.link)),i=Buffer.concat([h].concat(e.map(e=>e.data)));let o;try{o=r.create(i,t)}catch(e){return l(e)}return l(null,o)}{const i=u.reduce((e,t)=>{const r=function(e,t){const r=Buffer.alloc(4);r.writeUInt32LE(e,0);const n=Buffer.concat([r,Buffer.from(c(t))]);return fnv1a(n.toString("binary"))}(f,t.key)%o;return e[r]=r in e?e[r].concat([t]):[t],e},{});eachOfSeries(i,(r,i,o)=>{t(r,f+1,(t,r)=>(function(t,r,i,o){if(t)return o(t);const s={version:0,format:src$4.DAG_PB,hashAlg:src$4.SHA2_256,preload:!1};e.put(r,s,(e,t)=>{if(e)return o(e);p[i]=new n("",r.size,t),o(null)})})(t,r,i,o))},e=>{if(e)return l(e);let t;try{t=r.create(h,p)}catch(e){return l(e)}return l(null,t)})}}(t,0,u)},loadSet:(r,n,i)=>{const o=r.Links.find(e=>e.Name===n);if(!o)return i(new Error("No link found with name "+n));e.get(o.Hash,"",{preload:!1},(e,r)=>{if(e)return i(e);const n=[];t.walkItems(r.value,e=>n.push(e.Hash.buffer),e=>e?i(e):i(null,n))})},walkItems:(r,n,o)=>{let s;try{s=function(e){const t=e.Data,r=varint.decode(t),n=varint.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>t.length)throw new Error("Impossibly large set header length");const i=t.slice(n,r+n),o=a.Set.decode(i);if(1!==o.version)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:t.slice(r+n)}}(r)}catch(e){return o(e)}eachOfSeries(r.Links,(r,o,a)=>{if(o<s.header.fanout){const o=r.Hash.buffer;if(!i.equals(o))return e.get(o,"",{preload:!1},(e,r)=>{if(e)return a(e);t.walkItems(r.value,n,a)})}else n(r,o,s.data);a(null)},o)}};return t}});const{DAGNode:DAGNode$2,DAGLink:DAGLink$1,util:util$e}=src$k,{Key:Key$d}=src$B,{resolvePath:resolvePath$1}=utils$K,concurrencyLimit=300,pinDataStoreKey=new Key$d("/local/pins");function toB58String(e){return new src$v(e).toBaseEncodedString()}function invalidPinTypeErr(e){return errCode(new Error(`Invalid type '${e}', must be one of {direct, indirect, recursive, all}`),"ERR_INVALID_PIN_TYPE")}var pin=e=>{const t=e._repo,r=e.dag,n=pinSet(r),i={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};let o=new Set,s=new Set;const a=()=>Array.from(o).map(e=>new src$v(e).buffer),c=()=>Array.from(s).map(e=>new src$v(e).buffer);function u(o){let s,u,f;series_1([e=>waterfall([e=>n.storeSet(a(),e),({node:e,cid:t},r)=>{try{r(null,new DAGLink$1(i.direct,e.size,t))}catch(e){r(e)}},(e,t)=>{s=e,t(null)}],e),e=>waterfall([e=>n.storeSet(c(),e),({node:e,cid:t},r)=>{try{r(null,new DAGLink$1(i.recursive,e.size,t))}catch(e){r(e)}},(e,t)=>{u=e,t(null)}],e),e=>{let t;try{t=DAGNode$2.create(Buffer.alloc(0))}catch(t){return e(t)}r.put(t,{version:0,format:src$4.DAG_PB,hashAlg:src$4.SHA2_256,preload:!1},e)},e=>{let t;try{t=DAGNode$2.create(Buffer.alloc(0),[s,u])}catch(t){return e(t)}f=t,r.put(f,{version:0,format:src$4.DAG_PB,hashAlg:src$4.SHA2_256,preload:!1},(t,r)=>{t||(f.multihash=r.buffer),e(t)})},e=>t.closed?t.open(e):e(null,null),e=>t.datastore.put(pinDataStoreKey,f.multihash,e)],(t,r)=>t?o(t):(e.log(`Flushed pins with root: ${f}`),o(null,f)))}const f={add:promisifyEs6((t,n,i)=>{"function"==typeof n&&(i=n,n={});const a=null==(n=n||{}).recursive||n.recursive;resolvePath$1(e.object,t,(e,t)=>{if(e)return i(e);map$2(t,(e,t)=>{const i=toB58String(e);if(a){if(s.has(i))return t(null,i);r._getRecursive(i,{preload:n.preload},e=>e?t(e):t(null,i))}else{if(s.has(i))return t(new Error(`${i} already pinned recursively`));if(o.has(i))return t(null,i);r.get(new src$v(e),{preload:n.preload},e=>e?t(e):t(null,i))}},(e,t)=>{if(e)return i(e);const r=a?s:o;t.forEach(e=>r.add(e)),u((e,r)=>{if(e)return i(e);i(null,t.map(e=>({hash:e})))})})})}),rm:promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r);const a=null==(r=r||{}).recursive||r.recursive;if(r.cidBase&&!src$1.names.includes(r.cidBase))return setImmediate$1(()=>{n(errCode(new Error("invalid multibase"),"ERR_INVALID_MULTIBASE"))});resolvePath$1(e.object,t,(t,r)=>{if(t)return n(t);map$2(r,(e,t)=>{f._isPinnedWithType(e,i.all,(r,n)=>{if(r)return t(r);const{pinned:o,reason:s}=n,c=toB58String(e);if(!o)return t(new Error(`${c} is not pinned`));switch(s){case i.recursive:return a?t(null,c):t(new Error(`${c} is pinned recursively`));case i.direct:return t(null,c);default:return t(new Error(`${c} is pinned indirectly under ${s}`))}})},(t,r)=>{if(t)return n(t);r.forEach(e=>{a&&s.has(e)?s.delete(e):o.delete(e)}),u((t,i)=>{if(t)return n(t);e.log(`Removed pins: ${r}`),n(null,r.map(e=>({hash:e})))})})})}),ls:promisifyEs6((t,n,a)=>{let u=i.all;if("function"==typeof t&&(a=t,n={},t=null),"function"==typeof n&&(a=n),t&&t.type&&(n=t,t=null),(n=n||{}).type){if("string"!=typeof n.type)return setImmediate$1(()=>a(invalidPinTypeErr(n.type)));u=n.type.toLowerCase()}if(!Object.keys(i).includes(u))return setImmediate$1(()=>a(invalidPinTypeErr(u)));if(t)waterfall([r=>resolvePath$1(e.object,t,r),(e,t)=>mapSeries(e,(e,t)=>f._isPinnedWithType(e,i.all,t),t),(e,t)=>{if(!(e=e.filter(e=>e.pinned).map(({key:e,reason:t})=>{switch(t){case i.direct:case i.recursive:return{hash:e,type:t};default:return{hash:e,type:`${i.indirect} through ${t}`}}})).length)return t(new Error("Path is not pinned"));t(null,e)}],a);else{let e=[];u!==i.direct&&u!==i.all||(e=e.concat(Array.from(o).map(e=>({type:i.direct,hash:e})))),u!==i.recursive&&u!==i.all||(e=e.concat(Array.from(s).map(e=>({type:i.recursive,hash:e})))),u===i.indirect||u===i.all?function(e){const t=new Set;eachLimit_1(c(),concurrencyLimit,(e,n)=>{r._getRecursive(e,(e,r)=>{if(e)return n(e);map$2(r,(e,t)=>util$e.cid(util$e.serialize(e),{cidVersion:0}).then(e=>t(null,e),t),(e,r)=>{if(e)return n(e);r.map(e=>e.toString()).filter(e=>!s.has(e)).forEach(e=>t.add(e)),n()})})},r=>{if(r)return e(r);e(null,Array.from(t))})}((t,r)=>t?a(t):(e=e.filter(({hash:e})=>!r.includes(e)||r.includes(e)&&!o.has(e)).concat(r.map(e=>({type:i.indirect,hash:e}))),a(null,e))):a(null,e)}}),_isPinnedWithType:promisifyEs6((e,t,a)=>{const u=toB58String(e),{recursive:f,direct:l,all:d}=i;return t!==f&&t!==d||!s.has(u)?t===f?a(null,{key:u,pinned:!1}):t!==l&&t!==d||!o.has(u)?t===l?a(null,{key:u,pinned:!1}):void detectLimit(c().map(e=>new src$v(e)),concurrencyLimit,(e,t)=>{waterfall([t=>r.get(e,"",{preload:!1},t),(e,t)=>t(null,e.value),(e,t)=>n.hasDescendant(e,u,t)],t)},(e,t)=>a(e,{key:u,pinned:Boolean(t),reason:t})):a(null,{key:u,pinned:!0,reason:l}):a(null,{key:u,pinned:!0,reason:f})}),_load:promisifyEs6(a=>{waterfall([e=>t.closed?t.datastore.open(e):e(null,null),(e,r)=>t.datastore.has(pinDataStoreKey,r),(e,t)=>e?t():t(new Error("No pins to load")),e=>t.datastore.get(pinDataStoreKey,e),(e,t)=>{r.get(new src$v(e),"",{preload:!1},t)}],(t,r)=>{if(t)return"No pins to load"===t.message?(e.log("No pins to load"),a()):a(t);parallel$1([e=>n.loadSet(r.value,i.recursive,e),e=>n.loadSet(r.value,i.direct,e)],(t,r)=>{if(t)return a(t);const[n,i]=r;return o=new Set(i.map(toB58String)),s=new Set(n.map(toB58String)),e.log("Loaded pins from the datastore"),a(null)})})})};return f},pullSort=function(e){var t=source(),r=collect(function(r,n){if(r)return t.resolve(error(r));t.resolve(values(n.sort(e)))});return function(e){return r(e),t}};function isFunction$7(e){return"function"==typeof e}function isDuplex(e){return"object"==typeof e&&isSource(e.source)&&isSink(e.sink)}function isSource(e){return isFunction$7(e)&&2===e.length}function isSink(e){return isFunction$7(e)&&1===e.length}var isDuplex_1=isDuplex,isSource_1=isSource,isSink_1=isSink,isPullStream={isDuplex:isDuplex_1,isSource:isSource_1,isSink:isSink_1},toString$9=Object.prototype.toString,kindOf$1=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;if("boolean"===t)return"boolean";if("string"===t)return"string";if("number"===t)return"number";if("symbol"===t)return"symbol";if("function"===t)return isGeneratorFn$1(e)?"generatorfunction":"function";if(isArray$6(e))return"array";if(isBuffer$3(e))return"buffer";if(isArguments$3(e))return"arguments";if(isDate$1(e))return"date";if(isError$2(e))return"error";if(isRegexp$1(e))return"regexp";switch(ctorName$1(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(isGeneratorObj$1(e))return"generator";switch(t=toString$9.call(e)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")};function ctorName$1(e){return e.constructor?e.constructor.name:null}function isArray$6(e){return Array.isArray?Array.isArray(e):e instanceof Array}function isError$2(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}function isDate$1(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}function isRegexp$1(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}function isGeneratorFn$1(e,t){return"GeneratorFunction"===ctorName$1(e)}function isGeneratorObj$1(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}function isArguments$3(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}function isBuffer$3(e){return!(!e.constructor||"function"!=typeof e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isStream=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;isStream.writable=e=>isStream(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,isStream.readable=e=>isStream(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,isStream.duplex=e=>isStream.writable(e)&&isStream.readable(e),isStream.transform=e=>isStream.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState;var isStream_1=isStream,isBuffer$4=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)};const{isSource:isSource$1}=isPullStream,validateAddInput=e=>{const t=e=>isBuffer$4(e)||isStream_1.readable(e)||isSource$1(e)||"file"===kindOf$1(e),r=e=>t(e)||(e=>"object"==typeof e&&(e.content?t(e.content):Boolean(e.path)&&"string"==typeof e.path))(e);if(r(e)||Array.isArray(e)&&e.every(r))return!0;throw new Error(`Input not supported. Expected Buffer|ReadableStream|PullStream|File|Array<Object> got ${kindOf$1(e)}. Check the documentation for more info https://github.com/ipfs/interface-js-ipfs-core/blob/master/SPEC/FILES.md#add`)};var addInputValidation=validateAddInput;const isSource$2=isPullStream.isSource;var add=function(e){const t=promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{};try{addInputValidation(t)}catch(e){return n(e)}pullStream(pullStream.values([t]),e.addPullStream(r),pullSort((e,t)=>e.path<t.path?1:e.path>t.path?-1:0),pullStream.collect(n))});return function(){const e=Array.from(arguments);return 1===e.length&&isSource$2(e[0])&&e.push({}),t.apply(null,e)}},globSource=(...e)=>{const t="string"==typeof e[e.length-1]?{}:e.pop(),r=e,n=pullDefer.source(),i={recursive:t.recursive,glob:{dot:Boolean(t.hidden),ignore:Array.isArray(t.ignore)?t.ignore:[],follow:null==t.followSymlinks||t.followSymlinks}};return map$2(r,pathAndType,(e,t)=>{if(e)return n.abort(e);try{const r=t.map(e=>toGlobSource(e,i));n.resolve(pullCat(r))}catch(e){n.abort(e)}}),pullStream(n,pullStream.map(({path:e,contentPath:t})=>({path:e,content:fs.createReadStream(t)})))};function toGlobSource({path:e,type:t},r){r=r||{};const n=path$4.basename(e);if("file"===t)return pullStream.values([{path:n,contentPath:e}]);if("dir"===t&&!r.recursive)throw errCode(new Error(`'${e}' is a directory and recursive option not set`),"ERR_DIR_NON_RECURSIVE",{path:e});const i=Object.assign({},r.glob,{cwd:e,nodir:!0,realpath:!1,absolute:!1}),o=pullPushable_1();return glob_1("**/*",i).on("match",e=>o.push(e)).on("end",()=>o.end()).on("abort",()=>o.end()).on("error",e=>o.end(e)),pullStream(o,pullStream.map(t=>({path:`${n}/${toPosix(t)}`,contentPath:path$4.join(e,t)})))}function pathAndType(e,t){fs.stat(e,(r,n)=>{if(r)return t(r);t(null,{path:e,type:n.isDirectory()?"dir":"file"})})}const toPosix=e=>e.replace(/\\/g,"/");var addFromFsNodejs=e=>promisifyEs6((...t)=>{const r=t.pop(),n="string"==typeof t[t.length-1]?{}:t.pop();pullStream(globSource(...t,n),e.addPullStream(n),pullStream.collect(r))}),addFromFs=e=>addFromFsNodejs(e),addFromStream=e=>add(e);const Readable$2=Stream$1.Readable,BUFFER=Symbol("buffer"),TYPE=Symbol("type");class Blob$1{constructor(){this[TYPE]="";const e=arguments[0],t=arguments[1],r=[];let n=0;if(e){const t=e,i=Number(t.length);for(let e=0;e<i;e++){const i=t[e];let o;n+=(o=i instanceof Buffer?i:ArrayBuffer.isView(i)?Buffer.from(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?Buffer.from(i):i instanceof Blob$1?i[BUFFER]:Buffer.from("string"==typeof i?i:String(i))).length,r.push(o)}}this[BUFFER]=Buffer.concat(r);let i=t&&void 0!==t.type&&String(t.type).toLowerCase();i&&!/[^\u0020-\u007E]/.test(i)&&(this[TYPE]=i)}get size(){return this[BUFFER].length}get type(){return this[TYPE]}text(){return Promise.resolve(this[BUFFER].toString())}arrayBuffer(){const e=this[BUFFER],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new Readable$2;return e._read=function(){},e.push(this[BUFFER]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let n,i;n=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),i=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const o=Math.max(i-n,0),s=this[BUFFER].slice(n,n+o),a=new Blob$1([],{type:arguments[2]});return a[BUFFER]=s,a}}function FetchError(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let convert$2;Object.defineProperties(Blob$1.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(Blob$1.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),FetchError.prototype=Object.create(Error.prototype),FetchError.prototype.constructor=FetchError,FetchError.prototype.name="FetchError";try{convert$2=require("encoding").convert}catch(e){}const INTERNALS=Symbol("Body internals"),PassThrough$1=Stream$1.PassThrough;function Body(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size;let i=void 0===n?0:n;var o=r.timeout;let s=void 0===o?0:o;null==e?e=null:isURLSearchParams(e)?e=Buffer.from(e.toString()):isBlob(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Stream$1||(e=Buffer.from(String(e)))),this[INTERNALS]={body:e,disturbed:!1,error:null},this.size=i,this.timeout=s,e instanceof Stream$1&&e.on("error",function(e){const r="AbortError"===e.name?e:new FetchError(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[INTERNALS].error=r})}function consumeBody(){var e=this;if(this[INTERNALS].disturbed)return Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[INTERNALS].disturbed=!0,this[INTERNALS].error)return Body.Promise.reject(this[INTERNALS].error);let t=this.body;if(null===t)return Body.Promise.resolve(Buffer.alloc(0));if(isBlob(t)&&(t=t.stream()),Buffer.isBuffer(t))return Body.Promise.resolve(t);if(!(t instanceof Stream$1))return Body.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new Body.Promise(function(o,s){let a;e.timeout&&(a=setTimeout(function(){i=!0,s(new FetchError(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))},e.timeout)),t.on("error",function(t){"AbortError"===t.name?(i=!0,s(t)):s(new FetchError(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))}),t.on("data",function(t){if(!i&&null!==t){if(e.size&&n+t.length>e.size)return i=!0,void s(new FetchError(`content size at ${e.url} over limit: ${e.size}`,"max-size"));n+=t.length,r.push(t)}}),t.on("end",function(){if(!i){clearTimeout(a);try{o(Buffer.concat(r,n))}catch(t){s(new FetchError(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}})})}function convertBody(e,t){if("function"!=typeof convert$2)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let n,i,o="utf-8";return r&&(n=/charset=([^;]*)/i.exec(r)),i=e.slice(0,1024).toString(),!n&&i&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(i)),!n&&i&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i))&&(n=/charset=(.*)/i.exec(n.pop())),!n&&i&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i)),n&&("gb2312"!==(o=n.pop())&&"gbk"!==o||(o="gb18030")),convert$2(e,"UTF-8",o).toString()}function isURLSearchParams(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function isBlob(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function clone$9(e){let t,r,n=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof Stream$1&&"function"!=typeof n.getBoundary&&(t=new PassThrough$1,r=new PassThrough$1,n.pipe(t),n.pipe(r),e[INTERNALS].body=t,n=r),n}function extractContentType(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":isURLSearchParams(e)?"application/x-www-form-urlencoded;charset=UTF-8":isBlob(e)?e.type||null:Buffer.isBuffer(e)?null:"[object ArrayBuffer]"===Object.prototype.toString.call(e)?null:ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof Stream$1?null:"text/plain;charset=UTF-8"}function getTotalBytes(e){const t=e.body;return null===t?0:isBlob(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}function writeToStream(e,t){const r=t.body;null===r?e.end():isBlob(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}Body.prototype={get body(){return this[INTERNALS].body},get bodyUsed(){return this[INTERNALS].disturbed},arrayBuffer(){return consumeBody.call(this).then(function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)})},blob(){let e=this.headers&&this.headers.get("content-type")||"";return consumeBody.call(this).then(function(t){return Object.assign(new Blob$1([],{type:e.toLowerCase()}),{[BUFFER]:t})})},json(){var e=this;return consumeBody.call(this).then(function(t){try{return JSON.parse(t.toString())}catch(t){return Body.Promise.reject(new FetchError(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}})},text(){return consumeBody.call(this).then(function(e){return e.toString()})},buffer(){return consumeBody.call(this)},textConverted(){var e=this;return consumeBody.call(this).then(function(t){return convertBody(t,e.headers)})}},Object.defineProperties(Body.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),Body.mixIn=function(e){for(const t of Object.getOwnPropertyNames(Body.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(Body.prototype,t);Object.defineProperty(e,t,r)}},Body.Promise=global.Promise;const invalidTokenRegex=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,invalidHeaderCharRegex=/[^\t\x20-\x7e\x80-\xff]/;function validateName(e){if(e=`${e}`,invalidTokenRegex.test(e)||""===e)throw new TypeError(`${e} is not a legal HTTP header name`)}function validateValue(e){if(e=`${e}`,invalidHeaderCharRegex.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function find$1(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const MAP=Symbol("map");class Headers{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[MAP]=Object.create(null),e instanceof Headers){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){validateName(e=`${e}`);const t=find$1(this[MAP],e);return void 0===t?null:this[MAP][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=getHeaders(this),n=0;for(;n<r.length;){var i=r[n];const o=i[0],s=i[1];e.call(t,s,o,this),r=getHeaders(this),n++}}set(e,t){t=`${t}`,validateName(e=`${e}`),validateValue(t);const r=find$1(this[MAP],e);this[MAP][void 0!==r?r:e]=[t]}append(e,t){t=`${t}`,validateName(e=`${e}`),validateValue(t);const r=find$1(this[MAP],e);void 0!==r?this[MAP][r].push(t):this[MAP][e]=[t]}has(e){return validateName(e=`${e}`),void 0!==find$1(this[MAP],e)}delete(e){validateName(e=`${e}`);const t=find$1(this[MAP],e);void 0!==t&&delete this[MAP][t]}raw(){return this[MAP]}keys(){return createHeadersIterator(this,"key")}values(){return createHeadersIterator(this,"value")}[Symbol.iterator](){return createHeadersIterator(this,"key+value")}}function getHeaders(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(e[MAP]).sort().map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[MAP][t].join(", ")}:function(t){return[t.toLowerCase(),e[MAP][t].join(", ")]})}Headers.prototype.entries=Headers.prototype[Symbol.iterator],Object.defineProperty(Headers.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Headers.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const INTERNAL=Symbol("internal");function createHeadersIterator(e,t){const r=Object.create(HeadersIteratorPrototype);return r[INTERNAL]={target:e,kind:t,index:0},r}const HeadersIteratorPrototype=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==HeadersIteratorPrototype)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[INTERNAL];const t=e.target,r=e.kind,n=e.index,i=getHeaders(t,r);return n>=i.length?{value:void 0,done:!0}:(this[INTERNAL].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function exportNodeCompatibleHeaders(e){const t=Object.assign({__proto__:null},e[MAP]),r=find$1(e[MAP],"Host");return void 0!==r&&(t[r]=t[r][0]),t}function createHeadersLenient(e){const t=new Headers;for(const r of Object.keys(e))if(!invalidTokenRegex.test(r))if(Array.isArray(e[r]))for(const n of e[r])invalidHeaderCharRegex.test(n)||(void 0===t[MAP][r]?t[MAP][r]=[n]:t[MAP][r].push(n));else invalidHeaderCharRegex.test(e[r])||(t[MAP][r]=[e[r]]);return t}Object.defineProperty(HeadersIteratorPrototype,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const INTERNALS$1=Symbol("Response internals"),STATUS_CODES=http.STATUS_CODES;class Response{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Body.call(this,e,t);const r=t.status||200,n=new Headers(t.headers);if(null!=e&&!n.has("Content-Type")){const t=extractContentType(e);t&&n.append("Content-Type",t)}this[INTERNALS$1]={url:t.url,status:r,statusText:t.statusText||STATUS_CODES[r],headers:n,counter:t.counter}}get url(){return this[INTERNALS$1].url||""}get status(){return this[INTERNALS$1].status}get ok(){return this[INTERNALS$1].status>=200&&this[INTERNALS$1].status<300}get redirected(){return this[INTERNALS$1].counter>0}get statusText(){return this[INTERNALS$1].statusText}get headers(){return this[INTERNALS$1].headers}clone(){return new Response(clone$9(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}Body.mixIn(Response.prototype),Object.defineProperties(Response.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Response.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const INTERNALS$2=Symbol("Request internals"),parse_url=Url.parse,format_url=Url.format,streamDestructionSupported="destroy"in Stream$1.Readable.prototype;function isRequest$2(e){return"object"==typeof e&&"object"==typeof e[INTERNALS$2]}function isAbortSignal(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}class Request$1{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};isRequest$2(e)?t=parse_url(e.url):(t=e&&e.href?parse_url(e.href):parse_url(`${e}`),e={});let n=r.method||e.method||"GET";if(n=n.toUpperCase(),(null!=r.body||isRequest$2(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");let i=null!=r.body?r.body:isRequest$2(e)&&null!==e.body?clone$9(e):null;Body.call(this,i,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const o=new Headers(r.headers||e.headers||{});if(null!=i&&!o.has("Content-Type")){const e=extractContentType(i);e&&o.append("Content-Type",e)}let s=isRequest$2(e)?e.signal:null;if("signal"in r&&(s=r.signal),null!=s&&!isAbortSignal(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[INTERNALS$2]={method:n,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:t,signal:s},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[INTERNALS$2].method}get url(){return format_url(this[INTERNALS$2].parsedURL)}get headers(){return this[INTERNALS$2].headers}get redirect(){return this[INTERNALS$2].redirect}get signal(){return this[INTERNALS$2].signal}clone(){return new Request$1(this)}}function getNodeRequestOptions(e){const t=e[INTERNALS$2].parsedURL,r=new Headers(e[INTERNALS$2].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof Stream$1.Readable&&!streamDestructionSupported)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(n="0"),null!=e.body){const t=getTotalBytes(e);"number"==typeof t&&(n=String(t))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=e.agent;return"function"==typeof i&&(i=i(t)),r.has("Connection")||i||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:exportNodeCompatibleHeaders(r),agent:i})}function AbortError(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}Body.mixIn(Request$1.prototype),Object.defineProperty(Request$1.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Request$1.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),AbortError.prototype=Object.create(Error.prototype),AbortError.prototype.constructor=AbortError,AbortError.prototype.name="AbortError";const PassThrough$1$1=Stream$1.PassThrough,resolve_url=Url.resolve;function fetch(e,t){if(!fetch.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return Body.Promise=fetch.Promise,new fetch.Promise(function(r,n){const i=new Request$1(e,t),o=getNodeRequestOptions(i),s=("https:"===o.protocol?https:http).request,a=i.signal;let c=null;const u=function(){let e=new AbortError("The user aborted a request.");n(e),i.body&&i.body instanceof Stream$1.Readable&&i.body.destroy(e),c&&c.body&&c.body.emit("error",e)};if(a&&a.aborted)return void u();const f=function(){u(),h()},l=s(o);let d;function h(){l.abort(),a&&a.removeEventListener("abort",f),clearTimeout(d)}a&&a.addEventListener("abort",f),i.timeout&&l.once("socket",function(e){d=setTimeout(function(){n(new FetchError(`network timeout at: ${i.url}`,"request-timeout")),h()},i.timeout)}),l.on("error",function(e){n(new FetchError(`request to ${i.url} failed, reason: ${e.message}`,"system",e)),h()}),l.on("response",function(e){clearTimeout(d);const t=createHeadersLenient(e.headers);if(fetch.isRedirect(e.statusCode)){const o=t.get("Location"),s=null===o?null:resolve_url(i.url,o);switch(i.redirect){case"error":return n(new FetchError(`redirect mode is set to error: ${i.url}`,"no-redirect")),void h();case"manual":if(null!==s)try{t.set("Location",s)}catch(e){n(e)}break;case"follow":if(null===s)break;if(i.counter>=i.follow)return n(new FetchError(`maximum redirect reached at: ${i.url}`,"max-redirect")),void h();const o={headers:new Headers(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout};return 303!==e.statusCode&&i.body&&null===getTotalBytes(i)?(n(new FetchError("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void h()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==i.method)||(o.method="GET",o.body=void 0,o.headers.delete("content-length")),r(fetch(new Request$1(s,o))),void h())}}e.once("end",function(){a&&a.removeEventListener("abort",f)});let o=e.pipe(new PassThrough$1$1);const s={url:i.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:i.size,timeout:i.timeout,counter:i.counter},u=t.get("Content-Encoding");if(!i.compress||"HEAD"===i.method||null===u||204===e.statusCode||304===e.statusCode)return c=new Response(o,s),void r(c);const l={flush:zlib.Z_SYNC_FLUSH,finishFlush:zlib.Z_SYNC_FLUSH};if("gzip"==u||"x-gzip"==u)return o=o.pipe(zlib.createGunzip(l)),c=new Response(o,s),void r(c);if("deflate"!=u&&"x-deflate"!=u){if("br"==u&&"function"==typeof zlib.createBrotliDecompress)return o=o.pipe(zlib.createBrotliDecompress()),c=new Response(o,s),void r(c);c=new Response(o,s),r(c)}else{e.pipe(new PassThrough$1$1).once("data",function(e){o=8==(15&e[0])?o.pipe(zlib.createInflate()):o.pipe(zlib.createInflateRaw()),c=new Response(o,s),r(c)})}}),writeToStream(l,i)})}fetch.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},fetch.Promise=global.Promise;var lib$8=Object.freeze({default:fetch,Headers:Headers,Request:Request$1,Response:Response,FetchError:FetchError}),require$$0$3=getCjsExportFromNamespace(lib$8),fetchNodejs=require$$0$3;const{URL:URL$4}=isoUrl;var addFromUrl=e=>async(t,r,n)=>{let i;"function"==typeof r&&(n=r,r={});try{const o=new URL$4(t),s=await fetchNodejs(t);if(!s.ok)throw new Error("unexpected status code: "+s.status);const a=Buffer.from(await s.arrayBuffer()),c=decodeURIComponent(o.pathname.split("/").pop());i=await e.add({content:a,path:c},r)}catch(e){if(n)return n(e);throw e}return n&&n(null,i),i};const persist=(e,t,r)=>{!r.codec&&e.length&&(r.cidVersion=1,r.codec="raw"),isNaN(r.hashAlg)&&(r.hashAlg=src.names[r.hashAlg]),r.hashAlg!==src.names["sha2-256"]&&(r.cidVersion=1),r.format&&(r.codec=r.format);const n=src$4[r.codec.toUpperCase().replace(/-/g,"_")];return t.put(e,n,r)};var persist_1=persist;const{DAGNode:DAGNode$3}=src$k,dirBuilder=async(e,t,r)=>{const n=new src$1B("directory"),i=DAGNode$3.create(n.marshal(),[]);return{cid:await persist_1(i,t,r),path:e.path,unixfs:n,node:i}};var dir=dirBuilder;const toArray$3=async e=>{const t=[];for await(const r of e)t.push(r);return t};var asyncIteratorAll=toArray$3;async function*batch$1(e,t){let r=[];for await(const n of e)for(r=r.concat(n);r.length>=t;)yield r.slice(0,t),r=r.slice(t);for(;r.length;)yield r.slice(0,t),r=r.slice(t)}var asyncIteratorBatch=batch$1,flat=async function*(e,t){const r=[];for await(const n of asyncIteratorBatch(e,1/0))r.push(await t(n));yield r[0]};async function*balanced$1(e,t,r){yield await reduceToParents(e,t,r)}async function reduceToParents(e,t,r){const n=[];for await(const i of asyncIteratorBatch(e,r.maxChildrenPerNode))n.push(await t(i));return n.length>1?reduceToParents(n,t,r):n[0]}var balanced_1=balanced$1,trickle=function*(e,t,r){yield trickleStream(e,t,r)};async function trickleStream(e,t,r){let n,i=0,o=1,s=n=new Root(r.layerRepeat);for await(const a of asyncIteratorBatch(e,r.maxChildrenPerNode))s.isFull()&&(s!==n&&n.addChild(await s.reduce(t)),i&&i%r.layerRepeat==0&&o++,s=new SubTree(o,r.layerRepeat,i),i++),s.append(a);return s&&s!==n&&n.addChild(await s.reduce(t)),n.reduce(t)}class SubTree{constructor(e,t,r){this.maxDepth=e,this.layerRepeat=t,this.currentDepth=1,this.iteration=r,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const e=this._findParent(this.node,this.currentDepth);return!e||(this._addNextNodeToParent(e),!1)}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let r=[];return e.children.length&&(r=await Promise.all(e.children.filter(e=>e.data).map(e=>this._reduce(e,t)))),t(e.data.concat(r))}_findParent(e,t){const r=e.parent;if(r&&0!==r.depth)return r.children.length!==r.maxChildren&&r.maxChildren?r:this._findParent(r,t)}}class Root extends SubTree{constructor(e){super(0,e),this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e(this.root.data.concat(this.root.children))}}const{DAGNode:DAGNode$4,DAGLink:DAGLink$2}=src$k,dagBuilders={flat:flat,balanced:balanced_1,trickle:trickle};async function*buildFile(e,t,r){let n,i=-1;for await(const o of e){let e,s;i++,r.progress(o.length);let a={...r};r.rawLeaves?(e=o,a.codec="raw",a.cidVersion=1):(s=new src$1B(r.leafType,o),e=DAGNode$4.create(s.marshal(),[]));const c={cid:await persist_1(e,t,a),unixfs:s,node:e};0!==i?(1===i&&(yield n,n=null),yield c):n=c}n&&(n.single=!0,yield n)}const reduce$1=(e,t,r)=>(async function(n){if(1===n.length&&n[0].single&&r.reduceSingleLeafToSelf){const t=n[0];return{cid:t.cid,path:e.path,name:(e.path||"").split("/").pop(),unixfs:t.unixfs,node:t.node}}const i=new src$1B("file"),o=n.filter(e=>!("raw"!==e.cid.codec||!e.node.length)||(!(e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs.data.length))).map(e=>"raw"===e.cid.codec?(i.addBlockSize(e.node.length),new DAGLink$2(e.name,e.node.length,e.cid)):(e.unixfs.data?i.addBlockSize(e.unixfs.data.length):i.addBlockSize(e.unixfs.fileSize()),new DAGLink$2(e.name,e.node.size,e.cid))),s=DAGNode$4.create(i.marshal(),o);return{cid:await persist_1(s,t,r),path:e.path,unixfs:i,node:s,size:s.size}}),fileBuilder=async(e,t,r,n)=>{const i=dagBuilders[n.strategy];if(!i)throw errCode(new Error(`Unknown importer build strategy name: ${n.strategy}`),"ERR_BAD_STRATEGY");const o=await asyncIteratorAll(i(buildFile(t,r,n),reduce$1(e,r,n),n.builderOptions));if(o.length>1)throw errCode(new Error("expected a maximum of 1 roots and got "+o.length),"ETOOMANYROOTS");return o[0]};var file=fileBuilder,stream$1=Stream$1;function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty$2(e,t,r[t])})}return e}function _defineProperty$2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Buffer$v=buffer$1.Buffer,inspect$1=util$j.inspect,custom$2=inspect$1&&inspect$1.custom||"inspect";function copyBuffer$1(e,t,r){Buffer$v.prototype.copy.call(e,t,r)}var buffer_list$1=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},t.concat=function(e){if(0===this.length)return Buffer$v.alloc(0);for(var t=Buffer$v.allocUnsafe(e>>>0),r=this.head,n=0;r;)copyBuffer$1(r.data,t,n),n+=r.data.length,r=r.next;return t},t.consume=function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n},t._getBuffer=function(e){var t=Buffer$v.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t},t[custom$2]=function(e,t){return inspect$1(this,_objectSpread$1({},t,{depth:0,customInspect:!1}))},e}();function destroy$1(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||process.nextTick(emitErrorNT$1,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(process.nextTick(emitErrorAndCloseNT$1,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t?(process.nextTick(emitCloseNT$1,r),t(e)):process.nextTick(emitCloseNT$1,r)}),this)}function emitErrorAndCloseNT$1(e,t){emitErrorNT$1(e,t),emitCloseNT$1(e)}function emitCloseNT$1(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function undestroy$1(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT$1(e,t){e.emit("error",t)}var destroy_1$1={destroy:destroy$1,undestroy:undestroy$1};const codes$7={};function createErrorType$1(e,t,r){r||(r=Error);class n extends r{constructor(e,r,n){super(function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(e,r,n))}}n.prototype.name=r.name,n.prototype.code=e,codes$7[e]=n}function oneOf$1(e,t){if(Array.isArray(e)){const r=e.length;return e=e.map(e=>String(e)),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}function startsWith$1(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function endsWith$1(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function includes$2(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}createErrorType$1("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),createErrorType$1("ERR_INVALID_ARG_TYPE",function(e,t,r){let n,i;if("string"==typeof t&&startsWith$1(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",endsWith$1(e," argument"))i=`The ${e} ${n} ${oneOf$1(t,"type")}`;else{i=`The "${e}" ${includes$2(e,".")?"property":"argument"} ${n} ${oneOf$1(t,"type")}`}return i+=`. Received type ${typeof r}`},TypeError),createErrorType$1("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType$1("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),createErrorType$1("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType$1("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),createErrorType$1("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType$1("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType$1("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType$1("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType$1("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),createErrorType$1("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");var codes_1$1=codes$7,errors$b={codes:codes_1$1},ERR_INVALID_OPT_VALUE$1=errors$b.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom$1(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function getHighWaterMark$3(e,t,r,n){var i=highWaterMarkFrom$1(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new ERR_INVALID_OPT_VALUE$1(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}var state$3={getHighWaterMark:getHighWaterMark$3},experimentalWarnings$1=new Set;function emitExperimentalWarning$2(e){if(!experimentalWarnings$1.has(e)){var t=e+" is an experimental feature. This feature could change at any time";experimentalWarnings$1.add(e),process.emitWarning(t,"ExperimentalWarning")}}function noop$f(){}var Duplex$3,emitExperimentalWarning_1$1=process.emitWarning?emitExperimentalWarning$2:noop$f,experimentalWarning$1={emitExperimentalWarning:emitExperimentalWarning_1$1},_stream_writable$1=Writable$1;function CorkedRequest$1(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish$1(t,e)}}Writable$1.WritableState=WritableState$1;var internalUtil$1={deprecate:node$4},Buffer$w=buffer$1.Buffer,OurUint8Array$2=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer$2(e){return Buffer$w.from(e)}function _isUint8Array$2(e){return Buffer$w.isBuffer(e)||e instanceof OurUint8Array$2}var realHasInstance$1,getHighWaterMark$4=state$3.getHighWaterMark,_require$codes$4=errors$b.codes,ERR_INVALID_ARG_TYPE$2=_require$codes$4.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED$3=_require$codes$4.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$2=_require$codes$4.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE$1=_require$codes$4.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED$2=_require$codes$4.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES$1=_require$codes$4.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END$1=_require$codes$4.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING$1=_require$codes$4.ERR_UNKNOWN_ENCODING;function nop$1(){}function WritableState$1(e,t,r){Duplex$3=Duplex$3||_stream_duplex$1,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$3),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=getHighWaterMark$4(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite$1(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest$1(this)}function Writable$1(e){var t=this instanceof(Duplex$3=Duplex$3||_stream_duplex$1);if(!t&&!realHasInstance$1.call(Writable$1,this))return new Writable$1(e);this._writableState=new WritableState$1(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),stream$1.call(this)}function writeAfterEnd$1(e,t){var r=new ERR_STREAM_WRITE_AFTER_END$1;e.emit("error",r),process.nextTick(t,r)}function validChunk$1(e,t,r,n){var i;return null===r?i=new ERR_STREAM_NULL_VALUES$1:"string"==typeof r||t.objectMode||(i=new ERR_INVALID_ARG_TYPE$2("chunk",["string","Buffer"],r)),!i||(e.emit("error",i),process.nextTick(n,i),!1)}function decodeChunk$1(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer$w.from(t,r)),t}function writeOrBuffer$1(e,t,r,n,i,o){if(!r){var s=decodeChunk$1(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite$1(e,t,!1,a,n,i,o);return c}function doWrite$1(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new ERR_STREAM_DESTROYED$2("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function onwriteError$1(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(finishMaybe$1,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),finishMaybe$1(e,t))}function onwriteStateUpdate$1(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite$1(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new ERR_MULTIPLE_CALLBACK$2;if(onwriteStateUpdate$1(r),t)onwriteError$1(e,r,n,t,i);else{var o=needFinish$1(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer$1(e,r),n?process.nextTick(afterWrite$1,e,r,o,i):afterWrite$1(e,r,o,i)}}function afterWrite$1(e,t,r,n){r||onwriteDrain$1(e,t),t.pendingcb--,n(),finishMaybe$1(e,t)}function onwriteDrain$1(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer$1(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,doWrite$1(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest$1(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,f=r.callback;if(doWrite$1(e,t,!1,t.objectMode?1:c.length,c,u,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish$1(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal$1(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),finishMaybe$1(e,t)})}function prefinish$2(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(callFinal$1,e,t)))}function finishMaybe$1(e,t){var r=needFinish$1(t);return r&&(prefinish$2(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function endWritable$1(e,t,r){t.ending=!0,finishMaybe$1(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish$1(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}inherits(Writable$1,stream$1),WritableState$1.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState$1.prototype,"buffer",{get:internalUtil$1.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance$1=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable$1,Symbol.hasInstance,{value:function(e){return!!realHasInstance$1.call(this,e)||this===Writable$1&&(e&&e._writableState instanceof WritableState$1)}})):realHasInstance$1=function(e){return e instanceof this},Writable$1.prototype.pipe=function(){this.emit("error",new ERR_STREAM_CANNOT_PIPE$1)},Writable$1.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&_isUint8Array$2(e);return o&&!Buffer$w.isBuffer(e)&&(e=_uint8ArrayToBuffer$2(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=nop$1),n.ending?writeAfterEnd$1(this,r):(o||validChunk$1(this,n,e,r))&&(n.pendingcb++,i=writeOrBuffer$1(this,n,o,e,t,r)),i},Writable$1.prototype.cork=function(){this._writableState.corked++},Writable$1.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||clearBuffer$1(this,e))},Writable$1.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING$1(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable$1.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable$1.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable$1.prototype._write=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED$3("_write()"))},Writable$1.prototype._writev=null,Writable$1.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||endWritable$1(this,n,r),this},Object.defineProperty(Writable$1.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable$1.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable$1.prototype.destroy=destroy_1$1.destroy,Writable$1.prototype._undestroy=destroy_1$1.undestroy,Writable$1.prototype._destroy=function(e,t){t(e)};var objectKeys$1=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},_stream_duplex$1=Duplex$4;inherits(Duplex$4,_stream_readable$1);for(var keys$6=objectKeys$1(_stream_writable$1.prototype),v$3=0;v$3<keys$6.length;v$3++){var method$1=keys$6[v$3];Duplex$4.prototype[method$1]||(Duplex$4.prototype[method$1]=_stream_writable$1.prototype[method$1])}function Duplex$4(e){if(!(this instanceof Duplex$4))return new Duplex$4(e);_stream_readable$1.call(this,e),_stream_writable$1.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend$1)))}function onend$1(){this._writableState.ended||process.nextTick(onEndNT$1,this)}function onEndNT$1(e){e.end()}Object.defineProperty(Duplex$4.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex$4.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex$4.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex$4.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var ERR_STREAM_PREMATURE_CLOSE$1=errors$b.codes.ERR_STREAM_PREMATURE_CLOSE;function once$5(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function noop$g(){}function isRequest$3(e){return e.setHeader&&"function"==typeof e.abort}function eos$2(e,t,r){if("function"==typeof t)return eos$2(e,null,t);t||(t={}),r=once$5(r||noop$g);var n=t.readable||!1!==t.readable&&e.readable,i=t.writable||!1!==t.writable&&e.writable,o=function(){e.writable||a()},s=e._writableState&&e._writableState.finished,a=function(){i=!1,s=!0,n||r.call(e)},c=e._readableState&&e._readableState.endEmitted,u=function(){n=!1,c=!0,i||r.call(e)},f=function(t){r.call(e,t)},l=function(){var t;return n&&!c?(e._readableState&&e._readableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE$1),r.call(e,t)):i&&!s?(e._writableState&&e._writableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE$1),r.call(e,t)):void 0},d=function(){e.req.on("finish",a)};return isRequest$3(e)?(e.on("complete",a),e.on("abort",l),e.req?d():e.on("request",d)):i&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",a),!1!==t.error&&e.on("error",f),e.on("close",l),function(){e.removeListener("complete",a),e.removeListener("abort",l),e.removeListener("request",d),e.req&&e.req.removeListener("finish",a),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",a),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",l)}}var _Object$setPrototypeO$1,endOfStream$1=eos$2;function _defineProperty$3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kLastResolve$1=Symbol("lastResolve"),kLastReject$1=Symbol("lastReject"),kError$2=Symbol("error"),kEnded$1=Symbol("ended"),kLastPromise$1=Symbol("lastPromise"),kHandlePromise$1=Symbol("handlePromise"),kStream$1=Symbol("stream");function createIterResult$1(e,t){return{value:e,done:t}}function readAndResolve$1(e){var t=e[kLastResolve$1];if(null!==t){var r=e[kStream$1].read();null!==r&&(e[kLastPromise$1]=null,e[kLastResolve$1]=null,e[kLastReject$1]=null,t(createIterResult$1(r,!1)))}}function onReadable$1(e){process.nextTick(readAndResolve$1,e)}function wrapForNext$1(e,t){return function(r,n){e.then(function(){t[kEnded$1]?r(createIterResult$1(void 0,!0)):t[kHandlePromise$1](r,n)},n)}}var Duplex$5,AsyncIteratorPrototype$1=Object.getPrototypeOf(function(){}),ReadableStreamAsyncIteratorPrototype$1=Object.setPrototypeOf((_defineProperty$3(_Object$setPrototypeO$1={get stream(){return this[kStream$1]},next:function(){var e=this,t=this[kError$2];if(null!==t)return Promise.reject(t);if(this[kEnded$1])return Promise.resolve(createIterResult$1(void 0,!0));if(this[kStream$1].destroyed)return new Promise(function(t,r){process.nextTick(function(){e[kError$2]?r(e[kError$2]):t(createIterResult$1(void 0,!0))})});var r,n=this[kLastPromise$1];if(n)r=new Promise(wrapForNext$1(n,this));else{var i=this[kStream$1].read();if(null!==i)return Promise.resolve(createIterResult$1(i,!1));r=new Promise(this[kHandlePromise$1])}return this[kLastPromise$1]=r,r}},Symbol.asyncIterator,function(){return this}),_defineProperty$3(_Object$setPrototypeO$1,"return",function(){var e=this;return new Promise(function(t,r){e[kStream$1].destroy(null,function(e){e?r(e):t(createIterResult$1(void 0,!0))})})}),_Object$setPrototypeO$1),AsyncIteratorPrototype$1),createReadableStreamAsyncIterator$2=function(e){var t,r=Object.create(ReadableStreamAsyncIteratorPrototype$1,(_defineProperty$3(t={},kStream$1,{value:e,writable:!0}),_defineProperty$3(t,kLastResolve$1,{value:null,writable:!0}),_defineProperty$3(t,kLastReject$1,{value:null,writable:!0}),_defineProperty$3(t,kError$2,{value:null,writable:!0}),_defineProperty$3(t,kEnded$1,{value:e._readableState.endEmitted,writable:!0}),_defineProperty$3(t,kHandlePromise$1,{value:function(e,t){var n=r[kStream$1].read();n?(r[kLastPromise$1]=null,r[kLastResolve$1]=null,r[kLastReject$1]=null,e(createIterResult$1(n,!1))):(r[kLastResolve$1]=e,r[kLastReject$1]=t)},writable:!0}),t));return r[kLastPromise$1]=null,endOfStream$1(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[kLastReject$1];return null!==t&&(r[kLastPromise$1]=null,r[kLastResolve$1]=null,r[kLastReject$1]=null,t(e)),void(r[kError$2]=e)}var n=r[kLastResolve$1];null!==n&&(r[kLastPromise$1]=null,r[kLastResolve$1]=null,r[kLastReject$1]=null,n(createIterResult$1(void 0,!0))),r[kEnded$1]=!0}),e.on("readable",onReadable$1.bind(null,r)),r},async_iterator$1=createReadableStreamAsyncIterator$2,_stream_readable$1=Readable$3;Readable$3.ReadableState=ReadableState$1;var debug$c,EE$a=events$1.EventEmitter,EElistenerCount$1=function(e,t){return e.listeners(t).length},Buffer$x=buffer$1.Buffer,OurUint8Array$3=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer$3(e){return Buffer$x.from(e)}function _isUint8Array$3(e){return Buffer$x.isBuffer(e)||e instanceof OurUint8Array$3}debug$c=util$j&&util$j.debuglog?util$j.debuglog("stream"):function(){};var StringDecoder$2,createReadableStreamAsyncIterator$3,getHighWaterMark$5=state$3.getHighWaterMark,_require$codes$5=errors$b.codes,ERR_INVALID_ARG_TYPE$3=_require$codes$5.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF$1=_require$codes$5.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED$4=_require$codes$5.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT$1=_require$codes$5.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,emitExperimentalWarning$3=experimentalWarning$1.emitExperimentalWarning;inherits(Readable$3,stream$1);var kProxyEvents$1=["error","close","destroy","pause","resume"];function prependListener$1(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState$1(e,t,r){Duplex$5=Duplex$5||_stream_duplex$1,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$5),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=getHighWaterMark$5(this,e,"readableHighWaterMark",r),this.buffer=new buffer_list$1,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder$2||(StringDecoder$2=string_decoder.StringDecoder),this.decoder=new StringDecoder$2(e.encoding),this.encoding=e.encoding)}function Readable$3(e){if(Duplex$5=Duplex$5||_stream_duplex$1,!(this instanceof Readable$3))return new Readable$3(e);var t=this instanceof Duplex$5;this._readableState=new ReadableState$1(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),stream$1.call(this)}function readableAddChunk$1(e,t,r,n,i){debug$c("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,onEofChunk$1(e,s);else if(i||(o=chunkInvalid$1(s,t)),o)e.emit("error",o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===Buffer$x.prototype||(t=_uint8ArrayToBuffer$3(t)),n)s.endEmitted?e.emit("error",new ERR_STREAM_UNSHIFT_AFTER_END_EVENT$1):addChunk$1(e,s,t,!0);else if(s.ended)e.emit("error",new ERR_STREAM_PUSH_AFTER_EOF$1);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?addChunk$1(e,s,t,!1):maybeReadMore$1(e,s)):addChunk$1(e,s,t,!1)}else n||(s.reading=!1,maybeReadMore$1(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function addChunk$1(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable$1(e)),maybeReadMore$1(e,t)}function chunkInvalid$1(e,t){var r;return _isUint8Array$3(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new ERR_INVALID_ARG_TYPE$3("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(Readable$3.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable$3.prototype.destroy=destroy_1$1.destroy,Readable$3.prototype._undestroy=destroy_1$1.undestroy,Readable$3.prototype._destroy=function(e,t){t(e)},Readable$3.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Buffer$x.from(e,t),t=""),r=!0),readableAddChunk$1(this,e,t,!1,r)},Readable$3.prototype.unshift=function(e){return readableAddChunk$1(this,e,null,!0,!1)},Readable$3.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable$3.prototype.setEncoding=function(e){return StringDecoder$2||(StringDecoder$2=string_decoder.StringDecoder),this._readableState.decoder=new StringDecoder$2(e),this._readableState.encoding=this._readableState.decoder.encoding,this};var MAX_HWM$1=8388608;function computeNewHighWaterMark$1(e){return e>=MAX_HWM$1?e=MAX_HWM$1:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead$1(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark$1(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk$1(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?emitReadable$1(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,emitReadable_$1(e)))}}function emitReadable$1(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug$c("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(emitReadable_$1,e))}function emitReadable_$1(e){var t=e._readableState;debug$c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,flow$1(e)}function maybeReadMore$1(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(maybeReadMore_$1,e,t))}function maybeReadMore_$1(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(debug$c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function pipeOnDrain$1(e){return function(){var t=e._readableState;debug$c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount$1(e,"data")&&(t.flowing=!0,flow$1(e))}}function updateReadableListening$1(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function nReadingNextTick$1(e){debug$c("readable nexttick read 0"),e.read(0)}function resume$1(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(resume_$1,e,t))}function resume_$1(e,t){debug$c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),flow$1(e),t.flowing&&!t.reading&&e.read(0)}function flow$1(e){var t=e._readableState;for(debug$c("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList$1(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function endReadable$1(e){var t=e._readableState;debug$c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(endReadableNT$1,t,e))}function endReadableNT$1(e,t){debug$c("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf$2(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Readable$3.prototype.read=function(e){debug$c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return debug$c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable$1(this):emitReadable$1(this),null;if(0===(e=howMuchToRead$1(e,t))&&t.ended)return 0===t.length&&endReadable$1(this),null;var n,i=t.needReadable;return debug$c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&debug$c("length less than watermark",i=!0),t.ended||t.reading?debug$c("reading or ended",i=!1):i&&(debug$c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead$1(r,t))),null===(n=e>0?fromList$1(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable$1(this)),null!==n&&this.emit("data",n),n},Readable$3.prototype._read=function(e){this.emit("error",new ERR_METHOD_NOT_IMPLEMENTED$4("_read()"))},Readable$3.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,debug$c("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?s:h;function o(t,i){debug$c("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,debug$c("cleanup"),e.removeListener("close",l),e.removeListener("finish",d),e.removeListener("drain",a),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",h),r.removeListener("data",u),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||a())}function s(){debug$c("onend"),e.end()}n.endEmitted?process.nextTick(i):r.once("end",i),e.on("unpipe",o);var a=pipeOnDrain$1(r);e.on("drain",a);var c=!1;function u(t){debug$c("ondata");var i=e.write(t);debug$c("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf$2(n.pipes,e))&&!c&&(debug$c("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(t){debug$c("onerror",t),h(),e.removeListener("error",f),0===EElistenerCount$1(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",d),h()}function d(){debug$c("onfinish"),e.removeListener("close",l),h()}function h(){debug$c("unpipe"),r.unpipe(e)}return r.on("data",u),prependListener$1(e,"error",f),e.once("close",l),e.once("finish",d),e.emit("pipe",r),n.flowing||(debug$c("pipe resume"),r.resume()),e},Readable$3.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=indexOf$2(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Readable$3.prototype.on=function(e,t){var r=stream$1.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,debug$c("on readable",n.length,n.reading),n.length?emitReadable$1(this):n.reading||process.nextTick(nReadingNextTick$1,this))),r},Readable$3.prototype.addListener=Readable$3.prototype.on,Readable$3.prototype.removeListener=function(e,t){var r=stream$1.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(updateReadableListening$1,this),r},Readable$3.prototype.removeAllListeners=function(e){var t=stream$1.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(updateReadableListening$1,this),t},Readable$3.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug$c("resume"),e.flowing=!e.readableListening,resume$1(this,e)),e.paused=!1,this},Readable$3.prototype.pause=function(){return debug$c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug$c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable$3.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(debug$c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(debug$c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<kProxyEvents$1.length;o++)e.on(kProxyEvents$1[o],this.emit.bind(this,kProxyEvents$1[o]));return this._read=function(t){debug$c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(Readable$3.prototype[Symbol.asyncIterator]=function(){return emitExperimentalWarning$3("Readable[Symbol.asyncIterator]"),void 0===createReadableStreamAsyncIterator$3&&(createReadableStreamAsyncIterator$3=async_iterator$1),createReadableStreamAsyncIterator$3(this)}),Object.defineProperty(Readable$3.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable$3.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable$3.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),Readable$3._fromList=fromList$1,Object.defineProperty(Readable$3.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});var _stream_transform$1=Transform$3,_require$codes$6=errors$b.codes,ERR_METHOD_NOT_IMPLEMENTED$5=_require$codes$6.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$3=_require$codes$6.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING$1=_require$codes$6.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0$1=_require$codes$6.ERR_TRANSFORM_WITH_LENGTH_0;function afterTransform$1(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new ERR_MULTIPLE_CALLBACK$3);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform$3(e){if(!(this instanceof Transform$3))return new Transform$3(e);_stream_duplex$1.call(this,e),this._transformState={afterTransform:afterTransform$1.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish$3)}function prefinish$3(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?done$2(this,null,null):this._flush(function(t,r){done$2(e,t,r)})}function done$2(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0$1;if(e._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING$1;return e.push(null)}inherits(Transform$3,_stream_duplex$1),Transform$3.prototype.push=function(e,t){return this._transformState.needTransform=!1,_stream_duplex$1.prototype.push.call(this,e,t)},Transform$3.prototype._transform=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED$5("_transform()"))},Transform$3.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform$3.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},Transform$3.prototype._destroy=function(e,t){_stream_duplex$1.prototype._destroy.call(this,e,function(e){t(e)})};var eos$3,_stream_passthrough$1=PassThrough$2;function PassThrough$2(e){if(!(this instanceof PassThrough$2))return new PassThrough$2(e);_stream_transform$1.call(this,e)}function once$6(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}inherits(PassThrough$2,_stream_transform$1),PassThrough$2.prototype._transform=function(e,t,r){r(null,e)};var _require$codes$7=errors$b.codes,ERR_MISSING_ARGS$1=_require$codes$7.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED$3=_require$codes$7.ERR_STREAM_DESTROYED;function noop$h(e){if(e)throw e}function isRequest$4(e){return e.setHeader&&"function"==typeof e.abort}function destroyer$1(e,t,r,n){n=once$6(n);var i=!1;e.on("close",function(){i=!0}),void 0===eos$3&&(eos$3=endOfStream$1),eos$3(e,{readable:t,writable:r},function(e){if(e)return n(e);i=!0,n()});var o=!1;return function(t){if(!i&&!o)return o=!0,isRequest$4(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new ERR_STREAM_DESTROYED$3("pipe"))}}function call$1(e){e()}function pipe$2(e,t){return e.pipe(t)}function popCallback$1(e){return e.length?"function"!=typeof e[e.length-1]?noop$h:e.pop():noop$h}function pipeline$1(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=popCallback$1(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new ERR_MISSING_ARGS$1("streams");var o=t.map(function(e,r){var s=r<t.length-1;return destroyer$1(e,s,r>0,function(e){n||(n=e),e&&o.forEach(call$1),s||(o.forEach(call$1),i(n))})});return t.reduce(pipe$2)}var pipeline_1$1=pipeline$1,readable$1=createCommonjsModule(function(e,t){"disable"===process.env.READABLE_STREAM&&Stream$1?(e.exports=Stream$1.Readable,Object.assign(e.exports,Stream$1),e.exports.Stream=Stream$1):((t=e.exports=_stream_readable$1).Stream=Stream$1||t,t.Readable=t,t.Writable=_stream_writable$1,t.Duplex=_stream_duplex$1,t.Transform=_stream_transform$1,t.PassThrough=_stream_passthrough$1,t.finished=endOfStream$1,t.pipeline=pipeline_1$1)}),readable_1$1=readable$1.Stream,readable_2$1=readable$1.Readable,readable_3$1=readable$1.Writable,readable_4$1=readable$1.Duplex,readable_5$1=readable$1.Transform,readable_6$1=readable$1.PassThrough,readable_7$1=readable$1.finished,readable_8$1=readable$1.pipeline,DuplexStream=readable$1.Duplex;function BufferList(e){if(!(this instanceof BufferList))return new BufferList(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)})}else this.append(e);DuplexStream.call(this)}util$j.inherits(BufferList,DuplexStream),BufferList.prototype._offset=function(e){var t,r=0,n=0;if(0===e)return[0,0];for(;n<this._bufs.length;n++){if(e<(t=r+this._bufs[n].length)||n==this._bufs.length-1)return[n,e-r];r=t}},BufferList.prototype._reverseOffset=function(e){for(var t=e[0],r=e[1],n=0;n<t;n++)r+=this._bufs[n].length;return r},BufferList.prototype.append=function(e){var t=0;if(Buffer.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof BufferList)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(Buffer.from(e)));return this},BufferList.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},BufferList.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},BufferList.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},BufferList.prototype.end=function(e){DuplexStream.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},BufferList.prototype.get=function(e){if(!(e>this.length||e<0)){var t=this._offset(e);return this._bufs[t[0]][t[1]]}},BufferList.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},BufferList.prototype.copy=function(e,t,r,n){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof n||n>this.length)&&(n=this.length),r>=this.length)return e||Buffer.alloc(0);if(n<=0)return e||Buffer.alloc(0);var i,o,s=!!e,a=this._offset(r),c=n-r,u=c,f=s&&t||0,l=a[1];if(0===r&&n==this.length){if(!s)return 1===this._bufs.length?this._bufs[0]:Buffer.concat(this._bufs,this.length);for(o=0;o<this._bufs.length;o++)this._bufs[o].copy(e,f),f+=this._bufs[o].length;return e}if(u<=this._bufs[a[0]].length-l)return s?this._bufs[a[0]].copy(e,t,l,l+u):this._bufs[a[0]].slice(l,l+u);for(s||(e=Buffer.allocUnsafe(c)),o=a[0];o<this._bufs.length;o++){if(!(u>(i=this._bufs[o].length-l))){this._bufs[o].copy(e,f,l,l+u);break}this._bufs[o].copy(e,f,l),f+=i,u-=i,l&&(l=0)}return e},BufferList.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return new BufferList;var r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0==n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!=r[1]&&(i[0]=i[0].slice(r[1])),new BufferList(i)},BufferList.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},BufferList.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},BufferList.prototype.duplicate=function(){for(var e=0,t=new BufferList;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},BufferList.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},BufferList.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"==typeof t&&(r=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=Buffer.from([e]):"string"==typeof e?e=Buffer.from(e,r):e instanceof BufferList?e=e.slice():Buffer.isBuffer(e)||(e=Buffer.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;for(var n=this._offset(t),i=n[0],o=n[1];i<this._bufs.length;i++){for(var s=this._bufs[i];o<s.length;){if(s.length-o>=e.length){var a=s.indexOf(e,o);if(-1!==a)return this._reverseOffset([i,a]);o=s.length-e.length+1}else{var c=this._reverseOffset([i,o]);if(this._match(c,e))return c;o++}}o=0}return-1},BufferList.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(var r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var t in e)!function(t){BufferList.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(r){return this.slice(r,r+e[t])[t](0)}}(t)}();var bl=BufferList,fixedSize=async function*(e,t){let r=new bl,n=0,i=!1;const o=t.maxChunkSize;for await(const t of e)for(r.append(t),n+=t.length;n>=o;)if(yield r.slice(0,o),i=!0,o===r.length)r=new bl,n=0;else{const e=new bl;e.append(r.shallowSlice(o)),r=e,n-=o}i&&!n||(yield r.slice(0,n))};class Rabin{constructor(e=12,t=8192,r=32768,n=64,i){this.bits=e,this.min=t,this.max=r,this.asModule=i,this.rabin=new i.Rabin(e,t,r,n)}fingerprint(e){const t=new Int32Array(Math.ceil(e.length/this.min)),r=this.asModule.newArray(t),n=this.asModule.newArray(e);this.rabin.fingerprint(n,r);const i=this.asModule.getArray(Int32Array,r);this.asModule.freeArray(r),this.asModule.freeArray(n);const o=[];for(let e=0;e<i.length&&0!==i[e];e++)o[e]=i[e];return o}}var rabin=Rabin;const ID_OFFSET=-8,SIZE_OFFSET=-4,ARRAYBUFFER_ID=0,STRING_ID=1,ARRAYBUFFERVIEW=1,ARRAY=2,VAL_ALIGN=32,VAL_SIGNED=1024,VAL_FLOAT=2048,VAL_MANAGED=8192,ARRAYBUFFERVIEW_BUFFER_OFFSET=0,ARRAYBUFFERVIEW_DATASTART_OFFSET=4,ARRAYBUFFERVIEW_DATALENGTH_OFFSET=8,ARRAYBUFFERVIEW_SIZE=12,ARRAY_LENGTH_OFFSET=12,ARRAY_SIZE=16,BIGINT="undefined"!=typeof BigUint64Array,THIS=Symbol(),CHUNKSIZE=1024;function getStringImpl(e,t,r){var n=e[r+SIZE_OFFSET>>>2]>>>1,i=r>>>1;if(n<=CHUNKSIZE)return String.fromCharCode.apply(String,t.subarray(i,i+n));const o=[];do{const e=t[i+CHUNKSIZE-1],r=e>=55296&&e<56320?CHUNKSIZE-1:CHUNKSIZE;o.push(String.fromCharCode.apply(String,t.subarray(i,i+=r))),n-=r}while(n>CHUNKSIZE);return o.join("")+String.fromCharCode.apply(String,t.subarray(i,i+n))}function preInstantiate(e){const t={};function r(e,t){if(!e)return"<yet unknown>";const r=e.buffer;return getStringImpl(new Uint32Array(r),new Uint16Array(r),t)}const n=e.env=e.env||{};return n.abort=n.abort||function(e,i,o,s){const a=t.memory||n.memory;throw Error("abort: "+r(a,e)+" at "+r(a,i)+":"+o+":"+s)},n.trace=n.trace||function(e,i){const o=t.memory||n.memory;console.log("trace: "+r(o,e)+(i?" ":"")+Array.prototype.slice.call(arguments,2,2+i).join(", "))},e.Math=e.Math||Math,e.Date=e.Date||Date,t}function postInstantiate(e,t){const r=t.exports,n=r.memory,i=r.table,o=r.__alloc,s=r.__retain,a=r.__rtti_base||-1;var c,u,f,l,d,h,p,b,m,g,y;function v(){c!==n.buffer&&(c=n.buffer,u=new Int8Array(c),f=new Uint8Array(c),l=new Int16Array(c),d=new Uint16Array(c),h=new Int32Array(c),p=new Uint32Array(c),BIGINT&&(g=new BigInt64Array(c),y=new BigUint64Array(c)),b=new Float32Array(c),m=new Float64Array(c))}function _(e){if((e>>>=0)>=p[a>>>2])throw Error("invalid id: "+e);return p[(a+4>>>2)+2*e]}function $(e){if((e>>>=0)>=p[a>>>2])throw Error("invalid id: "+e);return p[(a+4>>>2)+2*e+1]}function S(e,t){return 31-Math.clz32(t/e&31)}function E(e,t,r){if(r)switch(e){case 2:return b;case 3:return m}else switch(e){case 0:return t?u:f;case 1:return t?l:d;case 2:return t?h:p;case 3:return t?g:y}throw Error("unsupported align: "+e)}function w(e){v();const t=p[e+ID_OFFSET>>>2],r=_(t);if(!(r&ARRAYBUFFERVIEW))throw Error("not an array: "+t);const n=S(VAL_ALIGN,r);var i=p[e+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];const o=r&ARRAY?p[e+ARRAY_LENGTH_OFFSET>>>2]:p[i+SIZE_OFFSET>>>2]>>>n;return E(n,r&VAL_SIGNED,r&VAL_FLOAT).slice(i>>>=n,i+o)}return v(),e.__allocString=function(e){const t=e.length,r=o(t<<1,STRING_ID);v();for(let n=0,i=r>>>1;n<t;++n)d[i+n]=e.charCodeAt(n);return r},e.__getString=function(e){if(v(),p[e+ID_OFFSET>>>2]!==STRING_ID)throw Error("not a string: "+e);return getStringImpl(p,d,e)},e.__allocArray=function(e,t){const r=_(e);if(!(r&(ARRAYBUFFERVIEW|ARRAY)))throw Error("not an array: "+e+" @ "+r);const n=S(VAL_ALIGN,r),i=t.length,a=o(i<<n,ARRAYBUFFER_ID),c=o(r&ARRAY?ARRAY_SIZE:ARRAYBUFFERVIEW_SIZE,e);v(),p[c+ARRAYBUFFERVIEW_BUFFER_OFFSET>>>2]=s(a),p[c+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2]=a,p[c+ARRAYBUFFERVIEW_DATALENGTH_OFFSET>>>2]=i<<n,r&ARRAY&&(p[c+ARRAY_LENGTH_OFFSET>>>2]=i);const u=E(n,r&VAL_SIGNED,r&VAL_FLOAT);for(let e=0;e<i;++e)u[(a>>n)+e]=t[e];if(r&VAL_MANAGED)for(let e=0;e<i;++e)s(t[e]);return c},e.__getArrayView=w,e.__getArray=function(e){return Array.from(w(e))},e.__instanceof=function(e,t){var r=p[e+ID_OFFSET>>>2];if(r<=p[a>>>2])do{if(r==t)return!0}while(r=$(r));return!1},e.memory=e.memory||n,e.table=e.table||i,demangle(r,Object.defineProperties(e,{I8:{get:function(){return v(),u}},U8:{get:function(){return v(),f}},I16:{get:function(){return v(),l}},U16:{get:function(){return v(),d}},I32:{get:function(){return v(),h}},U32:{get:function(){return v(),p}},I64:{get:function(){return v(),g}},U64:{get:function(){return v(),y}},F32:{get:function(){return v(),b}},F64:{get:function(){return v(),m}}}))}function wrapFunction(e,t){var r=(...r)=>(t(r.length),e(...r));return r.original=e,r}function instantiate(e,t){return postInstantiate(preInstantiate(t||(t={})),new WebAssembly.Instance(e,t))}var instantiate_1=instantiate;function instantiateBuffer(e,t){return instantiate(new WebAssembly.Module(e),t)}var instantiateBuffer_1=instantiateBuffer;async function instantiateStreaming(e,t){return postInstantiate(preInstantiate(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance)}var instantiateStreaming_1=instantiateStreaming;function demangle(e,t){var r=t?Object.create(t):{},n=e.__setargc||function(){};function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}for(let t in e){if(!i(e,t))continue;let o=e[t],s=t.split("."),a=r;for(;s.length>1;){let e=s.shift();i(a,e)||(a[e]={}),a=a[e]}let c=s[0],u=c.indexOf("#");if(u>=0){let r=c.substring(0,u),s=a[r];if(void 0===s||!s.prototype){let e=function(...t){return e.wrap(e.prototype.constructor(0,...t))};e.prototype={valueOf:function(){return this[THIS]}},e.wrap=function(t){return Object.create(e.prototype,{[THIS]:{value:t,writable:!1}})},s&&Object.getOwnPropertyNames(s).forEach(t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))),a[r]=e}if(c=c.substring(u+1),a=a[r].prototype,/^(get|set):/.test(c)){if(!i(a,c=c.substring(4))){let r=e[t.replace("set:","get:")],n=e[t.replace("get:","set:")];Object.defineProperty(a,c,{get:function(){return r(this[THIS])},set:function(e){n(this[THIS],e)},enumerable:!0})}}else"constructor"===c?a[c]=wrapFunction(o,n):Object.defineProperty(a,c,{value:function(...e){return n(e.length),o(this[THIS],...e)}})}else/^(get|set):/.test(c)?i(a,c=c.substring(4))||Object.defineProperty(a,c,{get:e[t.replace("set:","get:")],set:e[t.replace("get:","set:")],enumerable:!0}):a[c]="function"==typeof o?wrapFunction(o,n):o}return r}var demangle_1=demangle,loader={instantiate:instantiate_1,instantiateBuffer:instantiateBuffer_1,instantiateStreaming:instantiateStreaming_1,demangle:demangle_1};const{instantiateBuffer:instantiateBuffer$1}=loader;async function loadWebAssembly(e={}){return loadWebAssembly.supported?instantiateBuffer$1(fs.readFileSync(__dirname+"/../dist/rabin.wasm"),e):null}loadWebAssembly.supported="undefined"!=typeof WebAssembly;var rabinWasm_node=loadWebAssembly;const create$5=async(e,t,r,n)=>(compiled=await rabinWasm_node(),new rabin(e,t,r,n,compiled));var src$1C={Rabin:rabin,create:create$5};const{create:create$6}=src$1C;var rabin$1=async function*(e,t){const r=jsRabin();let n,i,o;if(t.minChunkSize&&t.maxChunkSize&&t.avgChunkSize)o=t.avgChunkSize,n=t.minChunkSize,i=t.maxChunkSize;else{if(!t.avgChunkSize)throw errCode(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");n=(o=t.avgChunkSize)/3,i=o+o/2}if(n<16)throw errCode(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");i<n&&(i=n),o<n&&(o=n);const s=Math.floor(Math.log2(o));for await(const o of r(e,{min:n,max:i,bits:s,window:t.window,polynomial:t.polynomial}))yield o};const jsRabin=()=>(async function*(e,t){const r=await create$6(t.bits,t.min,t.max,t.window),n=new bl;let i=[];for await(const t of e){n.append(t),i.push(t);const e=r.fingerprint(Buffer.concat(i));i=[];for(let t=0;t<e.length;t++){var o=e[t],s=n.slice(0,o);n.consume(o),yield s}}n.length&&(yield n.slice(0))}),chunkers={fixed:fixedSize,rabin:rabin$1};var chunker=(e,t,r)=>{const n=chunkers[e];if(!n)throw errCode(new Error(`Unknkown chunker named ${e}`),"ERR_UNKNOWN_CHUNKER");return n(t,r)};async function*validateChunks(e){for await(const t of e){if(void 0===t.length)throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT");"string"==typeof t||t instanceof String?yield Buffer.from(t,"utf8"):Array.isArray(t)?yield Buffer.from(t):yield t}}var validateChunks_1=validateChunks;async function*dagBuilder(e,t,r){for await(const n of e)if(n.path&&("./"===n.path.substring(0,2)&&(r.wrapWithDirectory=!0),n.path=n.path.split("/").filter(e=>e&&"."!==e).join("/")),n.content){let e=n.content;(e[Symbol.asyncIterator]||e[Symbol.iterator])&&void 0===e.length||(e={[Symbol.iterator]:function*(){yield n.content}});const i=chunker(r.chunker,validateChunks_1(e),r.chunkerOptions);yield file(n,i,t,r)}else yield dir(n,t,r)}var dagBuilder_1=dagBuilder,dir$1=class{constructor(e,t){this.options=t||{},Object.assign(this,e)}};const{DAGLink:DAGLink$3,DAGNode:DAGNode$5}=src$k;class DirFlat extends dir$1{constructor(e,t){super(e,t),this._children={}}put(e,t){this.cid=void 0,this.size=void 0,this._children[e]=t}get(e){return this._children[e]}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const r=e[t];yield{key:r,child:this._children[r]}}}async*flush(e,t){const r=Object.keys(this._children),n=[];for(let e=0;e<r.length;e++){let i=this._children[r[e]];if("function"==typeof i.flush)for await(const e of i.flush(i.path,t))i=e,yield i;n.push(new DAGLink$3(r[e],i.node.length||i.node.size,i.cid))}const i=new src$1B("directory");let o=DAGNode$5.create(i.marshal(),n);const s=await persist_1(o,t,this.options);this.cid=s,this.size=o.size,yield{cid:s,unixfs:i,path:e,node:o}}}var dirFlat=DirFlat,sha3$a=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),sha$5=e=>async t=>{switch(e){case"sha1":return crypto$l.createHash("sha1").update(t).digest();case"sha2-256":return crypto$l.createHash("sha256").update(t).digest();case"sha2-512":return crypto$l.createHash("sha512").update(t).digest();case"dbl-sha2-256":{const e=crypto$l.createHash("sha256").update(t).digest();return crypto$l.createHash("sha256").update(e).digest()}default:throw new Error(`${e} is not a supported algorithm`)}};const{Buffer:Buffer$y}=buffer$1,fromNumberTo32BitBuf$i=e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return Buffer$y.from(t)};var utils$L={fromNumberTo32BitBuf:fromNumberTo32BitBuf$i};const{Buffer:Buffer$z}=buffer$1,minB$9=45569,minS$9=45633,blake2b$a={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$a={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$9=(e,t)=>async r=>{const n=t.init(e,null);return t.update(n,r),Buffer$z.from(t.digest(n))};var blake_1$9=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$9(t+1,blake2b$a);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$9(t+1,blake2s$a)};const{Buffer:Buffer$A}=buffer$1,{fromNumberTo32BitBuf:fromNumberTo32BitBuf$j}=utils$L,hash$6=e=>async t=>{switch(e){case"sha3-224":return Buffer$A.from(sha3$a.sha3_224.arrayBuffer(t));case"sha3-256":return Buffer$A.from(sha3$a.sha3_256.arrayBuffer(t));case"sha3-384":return Buffer$A.from(sha3$a.sha3_384.arrayBuffer(t));case"sha3-512":return Buffer$A.from(sha3$a.sha3_512.arrayBuffer(t));case"shake-128":return Buffer$A.from(sha3$a.shake128.create(128).update(t).arrayBuffer());case"shake-256":return Buffer$A.from(sha3$a.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return Buffer$A.from(sha3$a.keccak224.arrayBuffer(t));case"keccak-256":return Buffer$A.from(sha3$a.keccak256.arrayBuffer(t));case"keccak-384":return Buffer$A.from(sha3$a.keccak384.arrayBuffer(t));case"keccak-512":return Buffer$A.from(sha3$a.keccak512.arrayBuffer(t));case"murmur3-128":return Buffer$A.from(murmurhash3jsRevisited.x64.hash128(t),"hex");case"murmur3-32":return fromNumberTo32BitBuf$j(murmurhash3jsRevisited.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};var crypto$d={sha1:sha$5("sha1"),sha2256:sha$5("sha2-256"),sha2512:sha$5("sha2-512"),dblSha2256:sha$5("dbl-sha2-256"),sha3224:hash$6("sha3-224"),sha3256:hash$6("sha3-256"),sha3384:hash$6("sha3-384"),sha3512:hash$6("sha3-512"),shake128:hash$6("shake-128"),shake256:hash$6("shake-256"),keccak224:hash$6("keccak-224"),keccak256:hash$6("keccak-256"),keccak384:hash$6("keccak-384"),keccak512:hash$6("keccak-512"),murmur3128:hash$6("murmur3-128"),murmur332:hash$6("murmur3-32"),addBlake:blake_1$9};const{Buffer:Buffer$B}=buffer$1;async function Multihashing$9(e,t,r){const n=await Multihashing$9.digest(e,t,r);return src.encode(n,t,r)}Multihashing$9.Buffer=Buffer$B,Multihashing$9.multihash=src,Multihashing$9.digest=async(e,t,r)=>{const n=Multihashing$9.createHash(t),i=await n(e);return r?i.slice(0,r):i},Multihashing$9.createHash=function(e){if(!e)throw errCode("hash algorithm must be specified","ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=src.coerceCode(e),!Multihashing$9.functions[e])throw errCode(`multihash function '${e}' not yet supported`,"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing$9.functions[e]},Multihashing$9.functions={17:crypto$d.sha1,18:crypto$d.sha2256,19:crypto$d.sha2512,20:crypto$d.sha3512,21:crypto$d.sha3384,22:crypto$d.sha3256,23:crypto$d.sha3224,24:crypto$d.shake128,25:crypto$d.shake256,26:crypto$d.keccak224,27:crypto$d.keccak256,28:crypto$d.keccak384,29:crypto$d.keccak512,34:crypto$d.murmur3128,35:crypto$d.murmur332,86:crypto$d.dblSha2256},crypto$d.addBlake(Multihashing$9.functions),Multihashing$9.validate=async(e,t)=>{const r=await Multihashing$9(e,src.decode(t).name);return 0===Buffer$B.compare(t,r)};var src$1D=Multihashing$9;const BITS_PER_BYTE=7;var sparseArray=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let r=this._internalPositionFor(e,!1);if(void 0===t)-1!==r&&(this._unsetInternalPos(r),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let n=!1;-1===r?(r=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(r,e,t,n),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);if(-1!==t)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,r=new Array(this.length);for(;t<this.length;)r[t]=e(this.get(t),t,this),t++;return r}reduce(e,t){let r=0,n=t;for(;r<this.length;){n=e(n,this.get(r),r),r++}return n}find(e){let t,r,n=0;for(;n<this.length&&!t;)t=e(r=this.get(n)),n++;return t?r:void 0}_internalPositionFor(e,t){const r=this._bytePosFor(e,t);if(r>=this._bitArrays.length)return-1;const n=this._bitArrays[r],i=e-7*r;return(n&1<<i)>0?this._bitArrays.slice(0,r).reduce(popCountReduce,0)+popCount(n&~(4294967295<<i+1))-1:-1}_bytePosFor(e,t){const r=Math.floor(e/7),n=r+1;for(;!t&&this._bitArrays.length<n;)this._bitArrays.push(0);return r}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}_setInternalPos(e,t,r,n){const i=this._data,o=[t,r];if(n)this._sortData(),i[e]=o;else{if(i.length)if(i[i.length-1][0]>=t)i.push(o);else if(i[0][0]<=t)i.unshift(o);else{const e=Math.round(i.length/2);this._data=i.slice(0,e).concat(o).concat(i.slice(e))}else this._data.push(o);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(sortInternal),this._changedData=!1}bitField(){const e=[];let t,r=8,n=0,i=0;const o=this._bitArrays.slice();for(;o.length||n;){0===n&&(t=o.shift(),n=7);const s=Math.min(n,r);i|=(t&~(255<<s))<<8-r,t>>>=s,n-=s,(r-=s)&&(n||o.length)||(e.push(i),i=0,r=8)}for(var s=e.length-1;s>0;s--){if(0!==e[s])break;e.pop()}return e}compactArray(){return this._sortData(),this._data.map(valueOnly)}};function popCountReduce(e,t){return e+popCount(t)}function popCount(e){let t=e;return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24}function sortInternal(e,t){return e[0]-t[0]}function valueOnly(e){return e[1]}const START_MASKS=[255,254,252,248,240,224,192,128],STOP_MASKS=[1,3,7,15,31,63,127,255];var consumableBuffer=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(e){let t=e,r=0;for(;t&&this._haveBits();){const e=this._value[this._currentBytePos],n=this._currentBitPos+1,i=Math.min(n,t);r=(r<<i)+byteBitsToInt(e,n-i,i),t-=i,this._currentBitPos-=i,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return r}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function byteBitsToInt(e,t,r){return(e&maskFor(t,r))>>>t}function maskFor(e,t){return START_MASKS[e]&STOP_MASKS[Math.min(t+e-1,7)]}var consumableHash=function(e){return function(t){return t instanceof InfiniteHash?t:new InfiniteHash(t,e)}};class InfiniteHash{constructor(e,t){if("string"!=typeof e&&!Buffer.isBuffer(e))throw new Error("can only hash strings or buffers");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let r=0;for(;t>0;){const e=this._buffers[this._currentBufferIndex],n=Math.min(e.availableBits(),t);r=(r<<n)+e.take(n),t-=n,this._availableBits-=n,0===e.availableBits()&&this._currentBufferIndex++}return r}untake(e){let t=e;for(;t>0;){const e=this._buffers[this._currentBufferIndex],r=Math.min(e.totalBits()-e.availableBits(),t);e.untake(r),t-=r,this._availableBits+=r,this._currentBufferIndex>0&&e.totalBits()===e.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth?this._value+this._depth:this._value,t=await this._hashFn(e),r=new consumableBuffer(t);this._buffers.push(r),this._availableBits+=r.availableBits()}}const defaultOptions$6={bits:8};class Bucket{constructor(e,t,r){if(this._options=Object.assign({},defaultOptions$6,e),this._popCount=0,this._parent=t,this._posAtParent=r,!this._options.hashFn)throw new Error("please define an options.hashFn");this._options.hash||(this._options.hash=consumableHash(this._options.hashFn)),this._children=new sparseArray}static isBucket(e){return e instanceof Bucket}async put(e,t){const r=await this._findNewBucketAndPos(e);await r.bucket._putAt(r,e,t)}async get(e){const t=await this._findChild(e);if(t)return t.value}async del(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);r&&r.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce((e,t)=>t instanceof Bucket?e+t.leafCount():e+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)if(t instanceof Bucket)for(const e of t.eachLeafSeries())yield e;else yield t}serialize(e,t){return t(this._children.reduce((r,n,i)=>(n&&(n instanceof Bucket?r.push(n.serialize(e,t)):r.push(e(n,i))),r),[]))}async asyncTransform(e,t){return asyncTransformBucket(this,e,t)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);if(r&&r.key===e)return r}async _findPlace(e){const t=this._options.hash(e),r=await t.take(this._options.bits),n=this._children.get(r);return n instanceof Bucket?n._findPlace(t):{bucket:this,pos:r,hash:t}}async _findNewBucketAndPos(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);if(r&&r.key!==e){const e=new Bucket(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const n=await e._findPlace(r.hash);return n.bucket._putAt(n,r.key,r.value),e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)||this._popCount++,this._children.set(e,t)}_delAt(e){this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(1===this._popCount){const e=this._children.find(exists);if(!(e instanceof Bucket)){const t=e.hash;t.untake(this._options.bits);const r={pos:this._posAtParent,hash:t};this._parent._putAt(r,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function exists(e){return Boolean(e)}function mapNode(e,t){return e.key}function reduceNodes(e){return e}async function asyncTransformBucket(e,t,r){const n=[];for(const i of e._children.compactArray()){if(i instanceof Bucket)await asyncTransformBucket(i,t,r);else{const r=await t(i);n.push({bitField:e._children.bitField(),children:r})}return r(n)}}var bucket=Bucket,src$1E=function(e){return new bucket(e)},isBucket=bucket.isBucket;src$1E.isBucket=isBucket;var deepExtend_1=createCommonjsModule(function(e){function t(e){return e instanceof Buffer||e instanceof Date||e instanceof RegExp}function r(e){if(e instanceof Buffer){var t=Buffer.alloc?Buffer.alloc(e.length):new Buffer(e.length);return e.copy(t),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);throw new Error("Unexpected situation")}function n(e,t){return"__proto__"===t?void 0:e[t]}var i=e.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var e,o,s=arguments[0];return Array.prototype.slice.call(arguments,1).forEach(function(a){"object"!=typeof a||null===a||Array.isArray(a)||Object.keys(a).forEach(function(c){return o=n(s,c),(e=n(a,c))===s?void 0:"object"!=typeof e||null===e?void(s[c]=e):Array.isArray(e)?void(s[c]=function e(n){var o=[];return n.forEach(function(n,s){"object"==typeof n&&null!==n?Array.isArray(n)?o[s]=e(n):t(n)?o[s]=r(n):o[s]=i({},n):o[s]=n}),o}(e)):t(e)?void(s[c]=r(e)):"object"!=typeof o||null===o||Array.isArray(o)?void(s[c]=i({},e)):void(s[c]=i(o,e))})}),s}});const{DAGLink:DAGLink$4,DAGNode:DAGNode$6}=src$k,hashFn=async function(e){const t=(await src$1D(Buffer.from(e,"utf8"),"murmur3-128")).slice(2,10),r=t.length,n=Buffer.alloc(r);for(let e=0;e<r;e++)n[r-e-1]=t[e];return n};hashFn.code=34;const defaultOptions$7={hashFn:hashFn};class DirSharded extends dir$1{constructor(e,t){super(e,t=deepExtend_1({},defaultOptions$7,t)),this._bucket=src$1E(t)}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e,t){for await(const r of flush(e,this._bucket,t,this.options))yield r}}var dirSharded=DirSharded,hashFn_1=hashFn;async function*flush(e,t,r,n){const i=t._children,o=[];for(let e=0;e<i.length;e++){const t=i.get(e);if(!t)continue;const s=e.toString(16).toUpperCase().padStart(2,"0");if(src$1E.isBucket(t)){let e;for await(const i of await flush("",t,r,n))e=i;o.push(await new DAGLink$4(s,e.node.size,e.cid))}else if("function"==typeof t.value.flush){const e=t.value;let n;for await(const t of e.flush(e.path,r))n=t,yield n;const i=s+t.key;o.push(new DAGLink$4(i,n.node.size,n.cid))}else{const e=t.value;if(!e.node){if(!e.cid)continue;e.node=await r.get(e.cid)}const n=s+t.key,i=e.node.length||e.node.size||e.node.Size;o.push(await new DAGLink$4(n,i,e.cid))}}const s=Buffer.from(i.bitField().reverse()),a=new src$1B("hamt-sharded-directory",s);a.fanout=t.tableSize(),a.hashType=n.hashFn.code;const c=DAGNode$6.create(a.marshal(),o),u=await persist_1(c,r,n);yield{cid:u,node:c,unixfs:a,path:e}}dirSharded.hashFn=hashFn_1;var flatToShard=async function e(t,r,n,i){let o=r;r.flat&&r.directChildrenCount()>=n&&(o=await convertToShard(r,i));const s=o.parent;return s&&(o!==r&&(t&&(t.parent=o),await s.put(o.parentKey,o)),s)?e(o,s,n,i):o};async function convertToShard(e,t){const r=new dirSharded({root:e.root,dir:!0,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:!1},t);for await(const{key:t,child:n}of e.eachChildSeries())await r.put(t,n);return r}const toPathComponents=(e="")=>(e.trim().match(/([^\\^\/]|\\\/)+/g)||[]).filter(Boolean);var toPathComponents_1=toPathComponents;const first=async e=>{for await(const t of e)return t};var asyncIteratorFirst=first;async function addToTree(e,t,r){const n=toPathComponents_1(e.path||""),i=n.length-1;let o=t,s="";for(let a=0;a<n.length;a++){const c=n[a];s+=`${s?"/":""}${c}`;const u=a===i;if(o.dirty=!0,o.cid=null,o.size=null,u)await o.put(c,e),t=await flatToShard(null,o,r.shardSplitThreshold,r);else{let e=await o.get(c);e&&e instanceof dir$1||(e=new dirFlat({dir:!0,parent:o,parentKey:c,path:s,dirty:!0,flat:!0},r)),await o.put(c,e),o=e}}return t}async function*treeBuilder(e,t,r){let n=new dirFlat({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r);for await(const t of e)n=await addToTree(t,n,r),yield t;if(n){if(!r.wrapWithDirectory){if(n.childCount()>1)throw errCode(new Error("detected more than one root"),"ERR_MORE_THAN_ONE_ROOT");const e=await asyncIteratorFirst(n.eachChildSeries());if(!e)return;n=e.child}if(!n.dir)return;for await(const e of n.flush(n.path,t))yield e}}var treeBuilder_1=treeBuilder;const{superstruct:superstruct$3}=index_es,struct$3=superstruct$3({types:{codec:e=>["dag-pb","dag-cbor","raw"].includes(e),hashAlg:e=>Object.keys(src.names).includes(e),leafType:e=>["file","raw"].includes(e)}}),ChunkerOptions=struct$3({minChunkSize:"number?",maxChunkSize:"number?",avgChunkSize:"number?",window:"number?",polynomial:"number?"},{maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804}),BuilderOptions=struct$3({maxChildrenPerNode:"number?",layerRepeat:"number?"},{maxChildrenPerNode:174,layerRepeat:4}),Options$1=struct$3({chunker:struct$3.enum(["fixed","rabin"]),rawLeaves:"boolean?",hashOnly:"boolean?",strategy:struct$3.enum(["balanced","flat","trickle"]),reduceSingleLeafToSelf:"boolean?",codec:"codec?",format:"codec?",hashAlg:"hashAlg?",leafType:"leafType?",cidVersion:"number?",progress:"function?",wrapWithDirectory:"boolean?",shardSplitThreshold:"number?",onlyHash:"boolean?",chunkerOptions:ChunkerOptions,builderOptions:BuilderOptions,wrap:"boolean?",pin:"boolean?",recursive:"boolean?",ignore:"array?",hidden:"boolean?",preload:"boolean?"},{chunker:"fixed",strategy:"balanced",rawLeaves:!1,reduceSingleLeafToSelf:!0,codec:"dag-pb",hashAlg:"sha2-256",leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3});var src$1F=async function*(e,t,r={}){const n=Options$1(r);r.cidVersion>0&&void 0===r.rawLeaves&&(n.rawLeaves=!0),void 0!==r.hashAlg&&void 0===r.rawLeaves&&(n.rawLeaves=!0),"trickle"===r.strategy&&(n.leafType="raw",n.reduceSingleLeafToSelf=!1),r.format&&(r.codec=r.format);for await(const r of treeBuilder_1(dagBuilder_1(e,t,n),t,n))yield{cid:r.cid,path:r.path,unixfs:r.unixfs,size:r.size}};const isStream$1=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;isStream$1.writable=e=>isStream$1(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,isStream$1.readable=e=>isStream$1(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,isStream$1.duplex=e=>isStream$1.writable(e)&&isStream$1.readable(e),isStream$1.transform=e=>isStream$1.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState;var isStream_1$1=isStream$1,cidToString=(e,t)=>{if((t=t||{}).upgrade=!1!==t.upgrade,src$v.isCID(e)||(e=new src$v(e)),0===e.version&&t.base&&"base58btc"!==t.base){if(!t.upgrade)return e.toString();e=e.toV1()}return e.toBaseEncodedString(t.base)},cid={cidToString:cidToString};const{Buffer:Buffer$C}=buffer$1,{cidToString:cidToString$1}=cid,normalizePath=e=>Buffer$C.isBuffer(e)?new src$v(e).toString():src$v.isCID(e)?e.toString():(0===e.indexOf("/ipfs/")&&(e=e.substring("/ipfs/".length)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e),parseChunkerString=e=>{if(e){if(e.startsWith("size-")){const t=e.split("-")[1],r=parseInt(t);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",chunkerOptions:{maxChunkSize:r}}}if(e.startsWith("rabin"))return{chunker:"rabin",chunkerOptions:parseRabinString(e)};throw new Error(`Unrecognized chunker option: ${e}`)}return{chunker:"fixed"}},parseRabinString=e=>{const t={},r=e.split("-");switch(r.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=parseChunkSize(r[1],"avg");break;case 4:t.minChunkSize=parseChunkSize(r[1],"min"),t.avgChunkSize=parseChunkSize(r[2],"avg"),t.maxChunkSize=parseChunkSize(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},parseChunkSize=(e,t)=>{let r=parseInt(e);if(isNaN(r))throw new Error(`Chunker parameter ${t} must be an integer`);return r},mapFile=(e={})=>t=>{let r=0,n="dir";t.unixfs&&"file"===t.unixfs.type&&(r=t.unixfs.fileSize(),n="file");const i={hash:cidToString$1(t.cid,{base:e.cidBase}),path:t.path,name:t.name,depth:t.path.split("/").length,size:r,type:n};return e.includeContent&&t.unixfs&&"file"===t.unixfs.type&&(i.content=asyncIteratorToPullStream.source(t.content())),i};var utils$M={normalizePath:normalizePath,parseChunkSize:parseChunkSize,parseRabinString:parseRabinString,parseChunkerString:parseChunkerString,mapFile:mapFile},stream$2=Stream$1;function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty$4(e,t,r[t])})}return e}function _defineProperty$4(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Buffer$D=buffer$1.Buffer,inspect$2=util$j.inspect,custom$3=inspect$2&&inspect$2.custom||"inspect";function copyBuffer$2(e,t,r){Buffer$D.prototype.copy.call(e,t,r)}var buffer_list$2=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},t.concat=function(e){if(0===this.length)return Buffer$D.alloc(0);for(var t=Buffer$D.allocUnsafe(e>>>0),r=this.head,n=0;r;)copyBuffer$2(r.data,t,n),n+=r.data.length,r=r.next;return t},t.consume=function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n},t._getBuffer=function(e){var t=Buffer$D.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t},t[custom$3]=function(e,t){return inspect$2(this,_objectSpread$2({},t,{depth:0,customInspect:!1}))},e}();function destroy$2(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||process.nextTick(emitErrorNT$2,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(process.nextTick(emitErrorAndCloseNT$2,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t?(process.nextTick(emitCloseNT$2,r),t(e)):process.nextTick(emitCloseNT$2,r)}),this)}function emitErrorAndCloseNT$2(e,t){emitErrorNT$2(e,t),emitCloseNT$2(e)}function emitCloseNT$2(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function undestroy$2(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT$2(e,t){e.emit("error",t)}var destroy_1$2={destroy:destroy$2,undestroy:undestroy$2};const codes$8={};function createErrorType$2(e,t,r){r||(r=Error);class n extends r{constructor(e,r,n){super(function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(e,r,n))}}n.prototype.name=r.name,n.prototype.code=e,codes$8[e]=n}function oneOf$2(e,t){if(Array.isArray(e)){const r=e.length;return e=e.map(e=>String(e)),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}function startsWith$2(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function endsWith$2(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function includes$3(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}createErrorType$2("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),createErrorType$2("ERR_INVALID_ARG_TYPE",function(e,t,r){let n,i;if("string"==typeof t&&startsWith$2(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",endsWith$2(e," argument"))i=`The ${e} ${n} ${oneOf$2(t,"type")}`;else{i=`The "${e}" ${includes$3(e,".")?"property":"argument"} ${n} ${oneOf$2(t,"type")}`}return i+=`. Received type ${typeof r}`},TypeError),createErrorType$2("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType$2("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),createErrorType$2("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType$2("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),createErrorType$2("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType$2("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType$2("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType$2("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType$2("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),createErrorType$2("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");var codes_1$2=codes$8,errors$c={codes:codes_1$2},ERR_INVALID_OPT_VALUE$2=errors$c.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom$2(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function getHighWaterMark$6(e,t,r,n){var i=highWaterMarkFrom$2(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new ERR_INVALID_OPT_VALUE$2(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}var state$4={getHighWaterMark:getHighWaterMark$6},experimentalWarnings$2=new Set;function emitExperimentalWarning$4(e){if(!experimentalWarnings$2.has(e)){var t=e+" is an experimental feature. This feature could change at any time";experimentalWarnings$2.add(e),process.emitWarning(t,"ExperimentalWarning")}}function noop$i(){}var Duplex$6,emitExperimentalWarning_1$2=process.emitWarning?emitExperimentalWarning$4:noop$i,experimentalWarning$2={emitExperimentalWarning:emitExperimentalWarning_1$2},_stream_writable$2=Writable$2;function CorkedRequest$2(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish$2(t,e)}}Writable$2.WritableState=WritableState$2;var internalUtil$2={deprecate:node$4},Buffer$E=buffer$1.Buffer,OurUint8Array$4=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer$4(e){return Buffer$E.from(e)}function _isUint8Array$4(e){return Buffer$E.isBuffer(e)||e instanceof OurUint8Array$4}var realHasInstance$2,getHighWaterMark$7=state$4.getHighWaterMark,_require$codes$8=errors$c.codes,ERR_INVALID_ARG_TYPE$4=_require$codes$8.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED$6=_require$codes$8.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$4=_require$codes$8.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE$2=_require$codes$8.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED$4=_require$codes$8.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES$2=_require$codes$8.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END$2=_require$codes$8.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING$2=_require$codes$8.ERR_UNKNOWN_ENCODING;function nop$2(){}function WritableState$2(e,t,r){Duplex$6=Duplex$6||_stream_duplex$2,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$6),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=getHighWaterMark$7(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite$2(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest$2(this)}function Writable$2(e){var t=this instanceof(Duplex$6=Duplex$6||_stream_duplex$2);if(!t&&!realHasInstance$2.call(Writable$2,this))return new Writable$2(e);this._writableState=new WritableState$2(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),stream$2.call(this)}function writeAfterEnd$2(e,t){var r=new ERR_STREAM_WRITE_AFTER_END$2;e.emit("error",r),process.nextTick(t,r)}function validChunk$2(e,t,r,n){var i;return null===r?i=new ERR_STREAM_NULL_VALUES$2:"string"==typeof r||t.objectMode||(i=new ERR_INVALID_ARG_TYPE$4("chunk",["string","Buffer"],r)),!i||(e.emit("error",i),process.nextTick(n,i),!1)}function decodeChunk$2(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer$E.from(t,r)),t}function writeOrBuffer$2(e,t,r,n,i,o){if(!r){var s=decodeChunk$2(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite$2(e,t,!1,a,n,i,o);return c}function doWrite$2(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new ERR_STREAM_DESTROYED$4("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function onwriteError$2(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(finishMaybe$2,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),finishMaybe$2(e,t))}function onwriteStateUpdate$2(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite$2(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new ERR_MULTIPLE_CALLBACK$4;if(onwriteStateUpdate$2(r),t)onwriteError$2(e,r,n,t,i);else{var o=needFinish$2(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer$2(e,r),n?process.nextTick(afterWrite$2,e,r,o,i):afterWrite$2(e,r,o,i)}}function afterWrite$2(e,t,r,n){r||onwriteDrain$2(e,t),t.pendingcb--,n(),finishMaybe$2(e,t)}function onwriteDrain$2(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer$2(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,doWrite$2(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest$2(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,f=r.callback;if(doWrite$2(e,t,!1,t.objectMode?1:c.length,c,u,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish$2(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal$2(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),finishMaybe$2(e,t)})}function prefinish$4(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(callFinal$2,e,t)))}function finishMaybe$2(e,t){var r=needFinish$2(t);return r&&(prefinish$4(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function endWritable$2(e,t,r){t.ending=!0,finishMaybe$2(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish$2(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}inherits(Writable$2,stream$2),WritableState$2.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState$2.prototype,"buffer",{get:internalUtil$2.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance$2=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable$2,Symbol.hasInstance,{value:function(e){return!!realHasInstance$2.call(this,e)||this===Writable$2&&(e&&e._writableState instanceof WritableState$2)}})):realHasInstance$2=function(e){return e instanceof this},Writable$2.prototype.pipe=function(){this.emit("error",new ERR_STREAM_CANNOT_PIPE$2)},Writable$2.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&_isUint8Array$4(e);return o&&!Buffer$E.isBuffer(e)&&(e=_uint8ArrayToBuffer$4(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=nop$2),n.ending?writeAfterEnd$2(this,r):(o||validChunk$2(this,n,e,r))&&(n.pendingcb++,i=writeOrBuffer$2(this,n,o,e,t,r)),i},Writable$2.prototype.cork=function(){this._writableState.corked++},Writable$2.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||clearBuffer$2(this,e))},Writable$2.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING$2(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable$2.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable$2.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable$2.prototype._write=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED$6("_write()"))},Writable$2.prototype._writev=null,Writable$2.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||endWritable$2(this,n,r),this},Object.defineProperty(Writable$2.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable$2.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable$2.prototype.destroy=destroy_1$2.destroy,Writable$2.prototype._undestroy=destroy_1$2.undestroy,Writable$2.prototype._destroy=function(e,t){t(e)};var objectKeys$2=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},_stream_duplex$2=Duplex$7;inherits(Duplex$7,_stream_readable$2);for(var keys$7=objectKeys$2(_stream_writable$2.prototype),v$4=0;v$4<keys$7.length;v$4++){var method$2=keys$7[v$4];Duplex$7.prototype[method$2]||(Duplex$7.prototype[method$2]=_stream_writable$2.prototype[method$2])}function Duplex$7(e){if(!(this instanceof Duplex$7))return new Duplex$7(e);_stream_readable$2.call(this,e),_stream_writable$2.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend$2)))}function onend$2(){this._writableState.ended||process.nextTick(onEndNT$2,this)}function onEndNT$2(e){e.end()}Object.defineProperty(Duplex$7.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex$7.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex$7.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex$7.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var ERR_STREAM_PREMATURE_CLOSE$2=errors$c.codes.ERR_STREAM_PREMATURE_CLOSE;function once$7(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function noop$j(){}function isRequest$5(e){return e.setHeader&&"function"==typeof e.abort}function eos$4(e,t,r){if("function"==typeof t)return eos$4(e,null,t);t||(t={}),r=once$7(r||noop$j);var n=t.readable||!1!==t.readable&&e.readable,i=t.writable||!1!==t.writable&&e.writable,o=function(){e.writable||a()},s=e._writableState&&e._writableState.finished,a=function(){i=!1,s=!0,n||r.call(e)},c=e._readableState&&e._readableState.endEmitted,u=function(){n=!1,c=!0,i||r.call(e)},f=function(t){r.call(e,t)},l=function(){var t;return n&&!c?(e._readableState&&e._readableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE$2),r.call(e,t)):i&&!s?(e._writableState&&e._writableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE$2),r.call(e,t)):void 0},d=function(){e.req.on("finish",a)};return isRequest$5(e)?(e.on("complete",a),e.on("abort",l),e.req?d():e.on("request",d)):i&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",a),!1!==t.error&&e.on("error",f),e.on("close",l),function(){e.removeListener("complete",a),e.removeListener("abort",l),e.removeListener("request",d),e.req&&e.req.removeListener("finish",a),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",a),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",l)}}var _Object$setPrototypeO$2,endOfStream$2=eos$4;function _defineProperty$5(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kLastResolve$2=Symbol("lastResolve"),kLastReject$2=Symbol("lastReject"),kError$3=Symbol("error"),kEnded$2=Symbol("ended"),kLastPromise$2=Symbol("lastPromise"),kHandlePromise$2=Symbol("handlePromise"),kStream$2=Symbol("stream");function createIterResult$2(e,t){return{value:e,done:t}}function readAndResolve$2(e){var t=e[kLastResolve$2];if(null!==t){var r=e[kStream$2].read();null!==r&&(e[kLastPromise$2]=null,e[kLastResolve$2]=null,e[kLastReject$2]=null,t(createIterResult$2(r,!1)))}}function onReadable$2(e){process.nextTick(readAndResolve$2,e)}function wrapForNext$2(e,t){return function(r,n){e.then(function(){t[kEnded$2]?r(createIterResult$2(void 0,!0)):t[kHandlePromise$2](r,n)},n)}}var Duplex$8,AsyncIteratorPrototype$2=Object.getPrototypeOf(function(){}),ReadableStreamAsyncIteratorPrototype$2=Object.setPrototypeOf((_defineProperty$5(_Object$setPrototypeO$2={get stream(){return this[kStream$2]},next:function(){var e=this,t=this[kError$3];if(null!==t)return Promise.reject(t);if(this[kEnded$2])return Promise.resolve(createIterResult$2(void 0,!0));if(this[kStream$2].destroyed)return new Promise(function(t,r){process.nextTick(function(){e[kError$3]?r(e[kError$3]):t(createIterResult$2(void 0,!0))})});var r,n=this[kLastPromise$2];if(n)r=new Promise(wrapForNext$2(n,this));else{var i=this[kStream$2].read();if(null!==i)return Promise.resolve(createIterResult$2(i,!1));r=new Promise(this[kHandlePromise$2])}return this[kLastPromise$2]=r,r}},Symbol.asyncIterator,function(){return this}),_defineProperty$5(_Object$setPrototypeO$2,"return",function(){var e=this;return new Promise(function(t,r){e[kStream$2].destroy(null,function(e){e?r(e):t(createIterResult$2(void 0,!0))})})}),_Object$setPrototypeO$2),AsyncIteratorPrototype$2),createReadableStreamAsyncIterator$4=function(e){var t,r=Object.create(ReadableStreamAsyncIteratorPrototype$2,(_defineProperty$5(t={},kStream$2,{value:e,writable:!0}),_defineProperty$5(t,kLastResolve$2,{value:null,writable:!0}),_defineProperty$5(t,kLastReject$2,{value:null,writable:!0}),_defineProperty$5(t,kError$3,{value:null,writable:!0}),_defineProperty$5(t,kEnded$2,{value:e._readableState.endEmitted,writable:!0}),_defineProperty$5(t,kHandlePromise$2,{value:function(e,t){var n=r[kStream$2].read();n?(r[kLastPromise$2]=null,r[kLastResolve$2]=null,r[kLastReject$2]=null,e(createIterResult$2(n,!1))):(r[kLastResolve$2]=e,r[kLastReject$2]=t)},writable:!0}),t));return r[kLastPromise$2]=null,endOfStream$2(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[kLastReject$2];return null!==t&&(r[kLastPromise$2]=null,r[kLastResolve$2]=null,r[kLastReject$2]=null,t(e)),void(r[kError$3]=e)}var n=r[kLastResolve$2];null!==n&&(r[kLastPromise$2]=null,r[kLastResolve$2]=null,r[kLastReject$2]=null,n(createIterResult$2(void 0,!0))),r[kEnded$2]=!0}),e.on("readable",onReadable$2.bind(null,r)),r},async_iterator$2=createReadableStreamAsyncIterator$4,_stream_readable$2=Readable$4;Readable$4.ReadableState=ReadableState$2;var debug$d,EE$b=events$1.EventEmitter,EElistenerCount$2=function(e,t){return e.listeners(t).length},Buffer$F=buffer$1.Buffer,OurUint8Array$5=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer$5(e){return Buffer$F.from(e)}function _isUint8Array$5(e){return Buffer$F.isBuffer(e)||e instanceof OurUint8Array$5}debug$d=util$j&&util$j.debuglog?util$j.debuglog("stream"):function(){};var StringDecoder$3,createReadableStreamAsyncIterator$5,getHighWaterMark$8=state$4.getHighWaterMark,_require$codes$9=errors$c.codes,ERR_INVALID_ARG_TYPE$5=_require$codes$9.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF$2=_require$codes$9.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED$7=_require$codes$9.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT$2=_require$codes$9.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,emitExperimentalWarning$5=experimentalWarning$2.emitExperimentalWarning;inherits(Readable$4,stream$2);var kProxyEvents$2=["error","close","destroy","pause","resume"];function prependListener$2(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState$2(e,t,r){Duplex$8=Duplex$8||_stream_duplex$2,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$8),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=getHighWaterMark$8(this,e,"readableHighWaterMark",r),this.buffer=new buffer_list$2,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder$3||(StringDecoder$3=string_decoder.StringDecoder),this.decoder=new StringDecoder$3(e.encoding),this.encoding=e.encoding)}function Readable$4(e){if(Duplex$8=Duplex$8||_stream_duplex$2,!(this instanceof Readable$4))return new Readable$4(e);var t=this instanceof Duplex$8;this._readableState=new ReadableState$2(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),stream$2.call(this)}function readableAddChunk$2(e,t,r,n,i){debug$d("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,onEofChunk$2(e,s);else if(i||(o=chunkInvalid$2(s,t)),o)e.emit("error",o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===Buffer$F.prototype||(t=_uint8ArrayToBuffer$5(t)),n)s.endEmitted?e.emit("error",new ERR_STREAM_UNSHIFT_AFTER_END_EVENT$2):addChunk$2(e,s,t,!0);else if(s.ended)e.emit("error",new ERR_STREAM_PUSH_AFTER_EOF$2);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?addChunk$2(e,s,t,!1):maybeReadMore$2(e,s)):addChunk$2(e,s,t,!1)}else n||(s.reading=!1,maybeReadMore$2(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function addChunk$2(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable$2(e)),maybeReadMore$2(e,t)}function chunkInvalid$2(e,t){var r;return _isUint8Array$5(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new ERR_INVALID_ARG_TYPE$5("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(Readable$4.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable$4.prototype.destroy=destroy_1$2.destroy,Readable$4.prototype._undestroy=destroy_1$2.undestroy,Readable$4.prototype._destroy=function(e,t){t(e)},Readable$4.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Buffer$F.from(e,t),t=""),r=!0),readableAddChunk$2(this,e,t,!1,r)},Readable$4.prototype.unshift=function(e){return readableAddChunk$2(this,e,null,!0,!1)},Readable$4.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable$4.prototype.setEncoding=function(e){return StringDecoder$3||(StringDecoder$3=string_decoder.StringDecoder),this._readableState.decoder=new StringDecoder$3(e),this._readableState.encoding=this._readableState.decoder.encoding,this};var MAX_HWM$2=8388608;function computeNewHighWaterMark$2(e){return e>=MAX_HWM$2?e=MAX_HWM$2:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead$2(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark$2(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk$2(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?emitReadable$2(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,emitReadable_$2(e)))}}function emitReadable$2(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug$d("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(emitReadable_$2,e))}function emitReadable_$2(e){var t=e._readableState;debug$d("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,flow$2(e)}function maybeReadMore$2(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(maybeReadMore_$2,e,t))}function maybeReadMore_$2(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(debug$d("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function pipeOnDrain$2(e){return function(){var t=e._readableState;debug$d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount$2(e,"data")&&(t.flowing=!0,flow$2(e))}}function updateReadableListening$2(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function nReadingNextTick$2(e){debug$d("readable nexttick read 0"),e.read(0)}function resume$2(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(resume_$2,e,t))}function resume_$2(e,t){debug$d("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),flow$2(e),t.flowing&&!t.reading&&e.read(0)}function flow$2(e){var t=e._readableState;for(debug$d("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList$2(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function endReadable$2(e){var t=e._readableState;debug$d("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(endReadableNT$2,t,e))}function endReadableNT$2(e,t){debug$d("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf$3(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Readable$4.prototype.read=function(e){debug$d("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return debug$d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable$2(this):emitReadable$2(this),null;if(0===(e=howMuchToRead$2(e,t))&&t.ended)return 0===t.length&&endReadable$2(this),null;var n,i=t.needReadable;return debug$d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&debug$d("length less than watermark",i=!0),t.ended||t.reading?debug$d("reading or ended",i=!1):i&&(debug$d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead$2(r,t))),null===(n=e>0?fromList$2(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable$2(this)),null!==n&&this.emit("data",n),n},Readable$4.prototype._read=function(e){this.emit("error",new ERR_METHOD_NOT_IMPLEMENTED$7("_read()"))},Readable$4.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,debug$d("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?s:h;function o(t,i){debug$d("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,debug$d("cleanup"),e.removeListener("close",l),e.removeListener("finish",d),e.removeListener("drain",a),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",h),r.removeListener("data",u),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||a())}function s(){debug$d("onend"),e.end()}n.endEmitted?process.nextTick(i):r.once("end",i),e.on("unpipe",o);var a=pipeOnDrain$2(r);e.on("drain",a);var c=!1;function u(t){debug$d("ondata");var i=e.write(t);debug$d("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf$3(n.pipes,e))&&!c&&(debug$d("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(t){debug$d("onerror",t),h(),e.removeListener("error",f),0===EElistenerCount$2(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",d),h()}function d(){debug$d("onfinish"),e.removeListener("close",l),h()}function h(){debug$d("unpipe"),r.unpipe(e)}return r.on("data",u),prependListener$2(e,"error",f),e.once("close",l),e.once("finish",d),e.emit("pipe",r),n.flowing||(debug$d("pipe resume"),r.resume()),e},Readable$4.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=indexOf$3(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Readable$4.prototype.on=function(e,t){var r=stream$2.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,debug$d("on readable",n.length,n.reading),n.length?emitReadable$2(this):n.reading||process.nextTick(nReadingNextTick$2,this))),r},Readable$4.prototype.addListener=Readable$4.prototype.on,Readable$4.prototype.removeListener=function(e,t){var r=stream$2.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(updateReadableListening$2,this),r},Readable$4.prototype.removeAllListeners=function(e){var t=stream$2.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(updateReadableListening$2,this),t},Readable$4.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug$d("resume"),e.flowing=!e.readableListening,resume$2(this,e)),e.paused=!1,this},Readable$4.prototype.pause=function(){return debug$d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug$d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable$4.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(debug$d("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(debug$d("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<kProxyEvents$2.length;o++)e.on(kProxyEvents$2[o],this.emit.bind(this,kProxyEvents$2[o]));return this._read=function(t){debug$d("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(Readable$4.prototype[Symbol.asyncIterator]=function(){return emitExperimentalWarning$5("Readable[Symbol.asyncIterator]"),void 0===createReadableStreamAsyncIterator$5&&(createReadableStreamAsyncIterator$5=async_iterator$2),createReadableStreamAsyncIterator$5(this)}),Object.defineProperty(Readable$4.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable$4.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable$4.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),Readable$4._fromList=fromList$2,Object.defineProperty(Readable$4.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});var _stream_transform$2=Transform$4,_require$codes$a=errors$c.codes,ERR_METHOD_NOT_IMPLEMENTED$8=_require$codes$a.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$5=_require$codes$a.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING$2=_require$codes$a.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0$2=_require$codes$a.ERR_TRANSFORM_WITH_LENGTH_0;function afterTransform$2(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new ERR_MULTIPLE_CALLBACK$5);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform$4(e){if(!(this instanceof Transform$4))return new Transform$4(e);_stream_duplex$2.call(this,e),this._transformState={afterTransform:afterTransform$2.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish$5)}function prefinish$5(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?done$3(this,null,null):this._flush(function(t,r){done$3(e,t,r)})}function done$3(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0$2;if(e._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING$2;return e.push(null)}inherits(Transform$4,_stream_duplex$2),Transform$4.prototype.push=function(e,t){return this._transformState.needTransform=!1,_stream_duplex$2.prototype.push.call(this,e,t)},Transform$4.prototype._transform=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED$8("_transform()"))},Transform$4.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform$4.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},Transform$4.prototype._destroy=function(e,t){_stream_duplex$2.prototype._destroy.call(this,e,function(e){t(e)})};var eos$5,_stream_passthrough$2=PassThrough$3;function PassThrough$3(e){if(!(this instanceof PassThrough$3))return new PassThrough$3(e);_stream_transform$2.call(this,e)}function once$8(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}inherits(PassThrough$3,_stream_transform$2),PassThrough$3.prototype._transform=function(e,t,r){r(null,e)};var _require$codes$b=errors$c.codes,ERR_MISSING_ARGS$2=_require$codes$b.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED$5=_require$codes$b.ERR_STREAM_DESTROYED;function noop$k(e){if(e)throw e}function isRequest$6(e){return e.setHeader&&"function"==typeof e.abort}function destroyer$2(e,t,r,n){n=once$8(n);var i=!1;e.on("close",function(){i=!0}),void 0===eos$5&&(eos$5=endOfStream$2),eos$5(e,{readable:t,writable:r},function(e){if(e)return n(e);i=!0,n()});var o=!1;return function(t){if(!i&&!o)return o=!0,isRequest$6(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new ERR_STREAM_DESTROYED$5("pipe"))}}function call$2(e){e()}function pipe$3(e,t){return e.pipe(t)}function popCallback$2(e){return e.length?"function"!=typeof e[e.length-1]?noop$k:e.pop():noop$k}function pipeline$2(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=popCallback$2(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new ERR_MISSING_ARGS$2("streams");var o=t.map(function(e,r){var s=r<t.length-1;return destroyer$2(e,s,r>0,function(e){n||(n=e),e&&o.forEach(call$2),s||(o.forEach(call$2),i(n))})});return t.reduce(pipe$3)}var pipeline_1$2=pipeline$2,readable$2=createCommonjsModule(function(e,t){"disable"===process.env.READABLE_STREAM&&Stream$1?(e.exports=Stream$1.Readable,Object.assign(e.exports,Stream$1),e.exports.Stream=Stream$1):((t=e.exports=_stream_readable$2).Stream=Stream$1||t,t.Readable=t,t.Writable=_stream_writable$2,t.Duplex=_stream_duplex$2,t.Transform=_stream_transform$2,t.PassThrough=_stream_passthrough$2,t.finished=endOfStream$2,t.pipeline=pipeline_1$2)}),readable_1$2=readable$2.Stream,readable_2$2=readable$2.Readable,readable_3$2=readable$2.Writable,readable_4$2=readable$2.Duplex,readable_5$2=readable$2.Transform,readable_6$2=readable$2.PassThrough,readable_7$2=readable$2.finished,readable_8$2=readable$2.pipeline,supports={supportsFileReader:"undefined"!=typeof self&&"FileReader"in self};const{Readable:Readable$5}=readable$2,{supportsFileReader:supportsFileReader}=supports,streamFromFileReader=(e,t)=>{if(!supportsFileReader)throw new Error("FileReader DOM API is not supported.");return new class extends Readable$5{constructor(e,t={}){super(t),this.file=e,this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576,this.fileReader=new self.FileReader(e),this.fileReader.onloadend=e=>{const t=e.target.result;0===t.byteLength&&this.push(null),this.push(new Uint8Array(t))},this.fileReader.onerror=e=>this.destroy(e)}_read(t){const r=this.offset+this.chunkSize,n=e.slice(this.offset,r);this.fileReader.readAsArrayBuffer(n),this.offset=r}}(e,t)};var streamFromFilereader=streamFromFileReader;const{isSource:isSource$3}=isPullStream,{parseChunkerString:parseChunkerString$1}=utils$M,{supportsFileReader:supportsFileReader$1}=supports;function noop$l(){}function prepareFile(e,t,r,n){r=r||{};let i=e.cid;waterfall([n=>r.onlyHash?n(null,e):t.object.get(e.cid,Object.assign({},r,{preload:!1}),n),(t,n)=>{1===r.cidVersion&&(i=i.toV1());const o=i.toBaseEncodedString();let s=t.size;Buffer.isBuffer(t)&&(s=t.length),n(null,{path:void 0===e.path?o:e.path||"",hash:o,size:s})}],n)}function normalizeContent(e,t){return Array.isArray(e)||(e=[e]),e.map(e=>{if(supportsFileReader$1&&"file"===kindOf$1(e)&&(e={path:"",content:streamToPullStream.source(streamFromFilereader(e))}),Buffer.isBuffer(e)&&(e={path:"",content:values([e])}),isStream_1$1.readable(e)&&(e={path:"",content:streamToPullStream.source(e)}),isSource$3(e)&&(e={path:"",content:e}),e&&e.content&&"function"!=typeof e.content&&(supportsFileReader$1&&"file"===kindOf$1(e.content)&&(e={path:e.path,content:streamToPullStream.source(streamFromFilereader(e.content))}),Buffer.isBuffer(e.content)&&(e={path:e.path,content:values([e.content])}),isStream_1$1.readable(e.content)&&(e={path:e.path,content:streamToPullStream.source(e.content)})),t.wrapWithDirectory&&!e.path)throw new Error("Must provide a path when wrapping with a directory");return e})}function preloadFile(e,t,r){return(!e.path||r.wrapWithDirectory?""===e.path:!e.path.includes("/"))&&!r.onlyHash&&!1!==r.preload&&t._preload(e.hash),e}function pinFile(e,t,r,n){const i=!("pin"in r)||r.pin,o=!e.path.includes("/");if(i&&o&&!r.onlyHash&&!r.hashAlg)return t.pin.add(e.hash,{preload:!1},t=>n(t,e));n(null,e)}var addPullStream=function(e){return function(t){let r;t=t||{};try{r=parseChunkerString$1(t.chunker)}catch(e){return map$3(()=>{throw e})}const n=Object.assign({},{shardSplitThreshold:e._options.EXPERIMENTAL.sharding?1e3:1/0},t,{chunker:r.chunker,chunkerOptions:r.chunkerOptions});n.hashAlg&&1!==n.cidVersion&&(n.cidVersion=1);let i=0;const o=n.progress||noop$l;return n.progress=e=>{o(i+=e)},pull(map$3(e=>normalizeContent(e,n)),flatten$2(),map$3(e=>({path:e.path?e.path:void 0,content:e.content?pullStreamToAsyncIterator(e.content):void 0})),asyncIteratorToPullStream.transform(t=>src$1F(t,e._ipld,n)),asyncMap((t,r)=>prepareFile(t,e,n,r)),map$3(t=>preloadFile(t,e,n)),asyncMap((t,r)=>pinFile(t,e,n,r)))}},stream$3=Stream$1;function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty$6(e,t,r[t])})}return e}function _defineProperty$6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Buffer$G=buffer$1.Buffer,inspect$3=util$j.inspect,custom$4=inspect$3&&inspect$3.custom||"inspect";function copyBuffer$3(e,t,r){Buffer$G.prototype.copy.call(e,t,r)}var buffer_list$3=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},t.concat=function(e){if(0===this.length)return Buffer$G.alloc(0);for(var t=Buffer$G.allocUnsafe(e>>>0),r=this.head,n=0;r;)copyBuffer$3(r.data,t,n),n+=r.data.length,r=r.next;return t},t.consume=function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n},t._getBuffer=function(e){var t=Buffer$G.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t},t[custom$4]=function(e,t){return inspect$3(this,_objectSpread$3({},t,{depth:0,customInspect:!1}))},e}();function destroy$3(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||process.nextTick(emitErrorNT$3,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(process.nextTick(emitErrorAndCloseNT$3,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t?(process.nextTick(emitCloseNT$3,r),t(e)):process.nextTick(emitCloseNT$3,r)}),this)}function emitErrorAndCloseNT$3(e,t){emitErrorNT$3(e,t),emitCloseNT$3(e)}function emitCloseNT$3(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function undestroy$3(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT$3(e,t){e.emit("error",t)}var destroy_1$3={destroy:destroy$3,undestroy:undestroy$3};const codes$9={};function createErrorType$3(e,t,r){r||(r=Error);class n extends r{constructor(e,r,n){super(function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(e,r,n))}}n.prototype.name=r.name,n.prototype.code=e,codes$9[e]=n}function oneOf$3(e,t){if(Array.isArray(e)){const r=e.length;return e=e.map(e=>String(e)),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}function startsWith$3(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function endsWith$3(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function includes$4(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}createErrorType$3("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),createErrorType$3("ERR_INVALID_ARG_TYPE",function(e,t,r){let n,i;if("string"==typeof t&&startsWith$3(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",endsWith$3(e," argument"))i=`The ${e} ${n} ${oneOf$3(t,"type")}`;else{i=`The "${e}" ${includes$4(e,".")?"property":"argument"} ${n} ${oneOf$3(t,"type")}`}return i+=`. Received type ${typeof r}`},TypeError),createErrorType$3("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType$3("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),createErrorType$3("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType$3("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),createErrorType$3("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType$3("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType$3("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType$3("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType$3("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),createErrorType$3("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");var codes_1$3=codes$9,errors$d={codes:codes_1$3},ERR_INVALID_OPT_VALUE$3=errors$d.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom$3(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function getHighWaterMark$9(e,t,r,n){var i=highWaterMarkFrom$3(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new ERR_INVALID_OPT_VALUE$3(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}var state$5={getHighWaterMark:getHighWaterMark$9},experimentalWarnings$3=new Set;function emitExperimentalWarning$6(e){if(!experimentalWarnings$3.has(e)){var t=e+" is an experimental feature. This feature could change at any time";experimentalWarnings$3.add(e),process.emitWarning(t,"ExperimentalWarning")}}function noop$m(){}var Duplex$9,emitExperimentalWarning_1$3=process.emitWarning?emitExperimentalWarning$6:noop$m,experimentalWarning$3={emitExperimentalWarning:emitExperimentalWarning_1$3},_stream_writable$3=Writable$3;function CorkedRequest$3(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish$3(t,e)}}Writable$3.WritableState=WritableState$3;var internalUtil$3={deprecate:node$4},Buffer$H=buffer$1.Buffer,OurUint8Array$6=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer$6(e){return Buffer$H.from(e)}function _isUint8Array$6(e){return Buffer$H.isBuffer(e)||e instanceof OurUint8Array$6}var realHasInstance$3,getHighWaterMark$a=state$5.getHighWaterMark,_require$codes$c=errors$d.codes,ERR_INVALID_ARG_TYPE$6=_require$codes$c.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED$9=_require$codes$c.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$6=_require$codes$c.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE$3=_require$codes$c.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED$6=_require$codes$c.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES$3=_require$codes$c.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END$3=_require$codes$c.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING$3=_require$codes$c.ERR_UNKNOWN_ENCODING;function nop$3(){}function WritableState$3(e,t,r){Duplex$9=Duplex$9||_stream_duplex$3,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$9),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=getHighWaterMark$a(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite$3(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest$3(this)}function Writable$3(e){var t=this instanceof(Duplex$9=Duplex$9||_stream_duplex$3);if(!t&&!realHasInstance$3.call(Writable$3,this))return new Writable$3(e);this._writableState=new WritableState$3(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),stream$3.call(this)}function writeAfterEnd$3(e,t){var r=new ERR_STREAM_WRITE_AFTER_END$3;e.emit("error",r),process.nextTick(t,r)}function validChunk$3(e,t,r,n){var i;return null===r?i=new ERR_STREAM_NULL_VALUES$3:"string"==typeof r||t.objectMode||(i=new ERR_INVALID_ARG_TYPE$6("chunk",["string","Buffer"],r)),!i||(e.emit("error",i),process.nextTick(n,i),!1)}function decodeChunk$3(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer$H.from(t,r)),t}function writeOrBuffer$3(e,t,r,n,i,o){if(!r){var s=decodeChunk$3(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite$3(e,t,!1,a,n,i,o);return c}function doWrite$3(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new ERR_STREAM_DESTROYED$6("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function onwriteError$3(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(finishMaybe$3,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),finishMaybe$3(e,t))}function onwriteStateUpdate$3(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite$3(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new ERR_MULTIPLE_CALLBACK$6;if(onwriteStateUpdate$3(r),t)onwriteError$3(e,r,n,t,i);else{var o=needFinish$3(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer$3(e,r),n?process.nextTick(afterWrite$3,e,r,o,i):afterWrite$3(e,r,o,i)}}function afterWrite$3(e,t,r,n){r||onwriteDrain$3(e,t),t.pendingcb--,n(),finishMaybe$3(e,t)}function onwriteDrain$3(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer$3(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,doWrite$3(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest$3(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,f=r.callback;if(doWrite$3(e,t,!1,t.objectMode?1:c.length,c,u,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish$3(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal$3(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),finishMaybe$3(e,t)})}function prefinish$6(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(callFinal$3,e,t)))}function finishMaybe$3(e,t){var r=needFinish$3(t);return r&&(prefinish$6(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function endWritable$3(e,t,r){t.ending=!0,finishMaybe$3(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish$3(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}inherits(Writable$3,stream$3),WritableState$3.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState$3.prototype,"buffer",{get:internalUtil$3.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance$3=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable$3,Symbol.hasInstance,{value:function(e){return!!realHasInstance$3.call(this,e)||this===Writable$3&&(e&&e._writableState instanceof WritableState$3)}})):realHasInstance$3=function(e){return e instanceof this},Writable$3.prototype.pipe=function(){this.emit("error",new ERR_STREAM_CANNOT_PIPE$3)},Writable$3.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&_isUint8Array$6(e);return o&&!Buffer$H.isBuffer(e)&&(e=_uint8ArrayToBuffer$6(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=nop$3),n.ending?writeAfterEnd$3(this,r):(o||validChunk$3(this,n,e,r))&&(n.pendingcb++,i=writeOrBuffer$3(this,n,o,e,t,r)),i},Writable$3.prototype.cork=function(){this._writableState.corked++},Writable$3.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||clearBuffer$3(this,e))},Writable$3.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING$3(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable$3.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable$3.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable$3.prototype._write=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED$9("_write()"))},Writable$3.prototype._writev=null,Writable$3.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||endWritable$3(this,n,r),this},Object.defineProperty(Writable$3.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable$3.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable$3.prototype.destroy=destroy_1$3.destroy,Writable$3.prototype._undestroy=destroy_1$3.undestroy,Writable$3.prototype._destroy=function(e,t){t(e)};var objectKeys$3=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},_stream_duplex$3=Duplex$a;inherits(Duplex$a,_stream_readable$3);for(var keys$8=objectKeys$3(_stream_writable$3.prototype),v$5=0;v$5<keys$8.length;v$5++){var method$3=keys$8[v$5];Duplex$a.prototype[method$3]||(Duplex$a.prototype[method$3]=_stream_writable$3.prototype[method$3])}function Duplex$a(e){if(!(this instanceof Duplex$a))return new Duplex$a(e);_stream_readable$3.call(this,e),_stream_writable$3.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend$3)))}function onend$3(){this._writableState.ended||process.nextTick(onEndNT$3,this)}function onEndNT$3(e){e.end()}Object.defineProperty(Duplex$a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex$a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex$a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex$a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var ERR_STREAM_PREMATURE_CLOSE$3=errors$d.codes.ERR_STREAM_PREMATURE_CLOSE;function once$9(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function noop$n(){}function isRequest$7(e){return e.setHeader&&"function"==typeof e.abort}function eos$6(e,t,r){if("function"==typeof t)return eos$6(e,null,t);t||(t={}),r=once$9(r||noop$n);var n=t.readable||!1!==t.readable&&e.readable,i=t.writable||!1!==t.writable&&e.writable,o=function(){e.writable||a()},s=e._writableState&&e._writableState.finished,a=function(){i=!1,s=!0,n||r.call(e)},c=e._readableState&&e._readableState.endEmitted,u=function(){n=!1,c=!0,i||r.call(e)},f=function(t){r.call(e,t)},l=function(){var t;return n&&!c?(e._readableState&&e._readableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE$3),r.call(e,t)):i&&!s?(e._writableState&&e._writableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE$3),r.call(e,t)):void 0},d=function(){e.req.on("finish",a)};return isRequest$7(e)?(e.on("complete",a),e.on("abort",l),e.req?d():e.on("request",d)):i&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",a),!1!==t.error&&e.on("error",f),e.on("close",l),function(){e.removeListener("complete",a),e.removeListener("abort",l),e.removeListener("request",d),e.req&&e.req.removeListener("finish",a),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",a),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",l)}}var _Object$setPrototypeO$3,endOfStream$3=eos$6;function _defineProperty$7(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kLastResolve$3=Symbol("lastResolve"),kLastReject$3=Symbol("lastReject"),kError$4=Symbol("error"),kEnded$3=Symbol("ended"),kLastPromise$3=Symbol("lastPromise"),kHandlePromise$3=Symbol("handlePromise"),kStream$3=Symbol("stream");function createIterResult$3(e,t){return{value:e,done:t}}function readAndResolve$3(e){var t=e[kLastResolve$3];if(null!==t){var r=e[kStream$3].read();null!==r&&(e[kLastPromise$3]=null,e[kLastResolve$3]=null,e[kLastReject$3]=null,t(createIterResult$3(r,!1)))}}function onReadable$3(e){process.nextTick(readAndResolve$3,e)}function wrapForNext$3(e,t){return function(r,n){e.then(function(){t[kEnded$3]?r(createIterResult$3(void 0,!0)):t[kHandlePromise$3](r,n)},n)}}var Duplex$b,AsyncIteratorPrototype$3=Object.getPrototypeOf(function(){}),ReadableStreamAsyncIteratorPrototype$3=Object.setPrototypeOf((_defineProperty$7(_Object$setPrototypeO$3={get stream(){return this[kStream$3]},next:function(){var e=this,t=this[kError$4];if(null!==t)return Promise.reject(t);if(this[kEnded$3])return Promise.resolve(createIterResult$3(void 0,!0));if(this[kStream$3].destroyed)return new Promise(function(t,r){process.nextTick(function(){e[kError$4]?r(e[kError$4]):t(createIterResult$3(void 0,!0))})});var r,n=this[kLastPromise$3];if(n)r=new Promise(wrapForNext$3(n,this));else{var i=this[kStream$3].read();if(null!==i)return Promise.resolve(createIterResult$3(i,!1));r=new Promise(this[kHandlePromise$3])}return this[kLastPromise$3]=r,r}},Symbol.asyncIterator,function(){return this}),_defineProperty$7(_Object$setPrototypeO$3,"return",function(){var e=this;return new Promise(function(t,r){e[kStream$3].destroy(null,function(e){e?r(e):t(createIterResult$3(void 0,!0))})})}),_Object$setPrototypeO$3),AsyncIteratorPrototype$3),createReadableStreamAsyncIterator$6=function(e){var t,r=Object.create(ReadableStreamAsyncIteratorPrototype$3,(_defineProperty$7(t={},kStream$3,{value:e,writable:!0}),_defineProperty$7(t,kLastResolve$3,{value:null,writable:!0}),_defineProperty$7(t,kLastReject$3,{value:null,writable:!0}),_defineProperty$7(t,kError$4,{value:null,writable:!0}),_defineProperty$7(t,kEnded$3,{value:e._readableState.endEmitted,writable:!0}),_defineProperty$7(t,kHandlePromise$3,{value:function(e,t){var n=r[kStream$3].read();n?(r[kLastPromise$3]=null,r[kLastResolve$3]=null,r[kLastReject$3]=null,e(createIterResult$3(n,!1))):(r[kLastResolve$3]=e,r[kLastReject$3]=t)},writable:!0}),t));return r[kLastPromise$3]=null,endOfStream$3(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[kLastReject$3];return null!==t&&(r[kLastPromise$3]=null,r[kLastResolve$3]=null,r[kLastReject$3]=null,t(e)),void(r[kError$4]=e)}var n=r[kLastResolve$3];null!==n&&(r[kLastPromise$3]=null,r[kLastResolve$3]=null,r[kLastReject$3]=null,n(createIterResult$3(void 0,!0))),r[kEnded$3]=!0}),e.on("readable",onReadable$3.bind(null,r)),r},async_iterator$3=createReadableStreamAsyncIterator$6,_stream_readable$3=Readable$6;Readable$6.ReadableState=ReadableState$3;var debug$e,EE$c=events$1.EventEmitter,EElistenerCount$3=function(e,t){return e.listeners(t).length},Buffer$I=buffer$1.Buffer,OurUint8Array$7=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer$7(e){return Buffer$I.from(e)}function _isUint8Array$7(e){return Buffer$I.isBuffer(e)||e instanceof OurUint8Array$7}debug$e=util$j&&util$j.debuglog?util$j.debuglog("stream"):function(){};var StringDecoder$4,createReadableStreamAsyncIterator$7,getHighWaterMark$b=state$5.getHighWaterMark,_require$codes$d=errors$d.codes,ERR_INVALID_ARG_TYPE$7=_require$codes$d.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF$3=_require$codes$d.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED$a=_require$codes$d.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT$3=_require$codes$d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,emitExperimentalWarning$7=experimentalWarning$3.emitExperimentalWarning;inherits(Readable$6,stream$3);var kProxyEvents$3=["error","close","destroy","pause","resume"];function prependListener$3(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState$3(e,t,r){Duplex$b=Duplex$b||_stream_duplex$3,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$b),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=getHighWaterMark$b(this,e,"readableHighWaterMark",r),this.buffer=new buffer_list$3,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder$4||(StringDecoder$4=string_decoder.StringDecoder),this.decoder=new StringDecoder$4(e.encoding),this.encoding=e.encoding)}function Readable$6(e){if(Duplex$b=Duplex$b||_stream_duplex$3,!(this instanceof Readable$6))return new Readable$6(e);var t=this instanceof Duplex$b;this._readableState=new ReadableState$3(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),stream$3.call(this)}function readableAddChunk$3(e,t,r,n,i){debug$e("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,onEofChunk$3(e,s);else if(i||(o=chunkInvalid$3(s,t)),o)e.emit("error",o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===Buffer$I.prototype||(t=_uint8ArrayToBuffer$7(t)),n)s.endEmitted?e.emit("error",new ERR_STREAM_UNSHIFT_AFTER_END_EVENT$3):addChunk$3(e,s,t,!0);else if(s.ended)e.emit("error",new ERR_STREAM_PUSH_AFTER_EOF$3);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?addChunk$3(e,s,t,!1):maybeReadMore$3(e,s)):addChunk$3(e,s,t,!1)}else n||(s.reading=!1,maybeReadMore$3(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function addChunk$3(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable$3(e)),maybeReadMore$3(e,t)}function chunkInvalid$3(e,t){var r;return _isUint8Array$7(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new ERR_INVALID_ARG_TYPE$7("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(Readable$6.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable$6.prototype.destroy=destroy_1$3.destroy,Readable$6.prototype._undestroy=destroy_1$3.undestroy,Readable$6.prototype._destroy=function(e,t){t(e)},Readable$6.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Buffer$I.from(e,t),t=""),r=!0),readableAddChunk$3(this,e,t,!1,r)},Readable$6.prototype.unshift=function(e){return readableAddChunk$3(this,e,null,!0,!1)},Readable$6.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable$6.prototype.setEncoding=function(e){return StringDecoder$4||(StringDecoder$4=string_decoder.StringDecoder),this._readableState.decoder=new StringDecoder$4(e),this._readableState.encoding=this._readableState.decoder.encoding,this};var MAX_HWM$3=8388608;function computeNewHighWaterMark$3(e){return e>=MAX_HWM$3?e=MAX_HWM$3:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead$3(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark$3(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk$3(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?emitReadable$3(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,emitReadable_$3(e)))}}function emitReadable$3(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug$e("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(emitReadable_$3,e))}function emitReadable_$3(e){var t=e._readableState;debug$e("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,flow$3(e)}function maybeReadMore$3(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(maybeReadMore_$3,e,t))}function maybeReadMore_$3(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(debug$e("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function pipeOnDrain$3(e){return function(){var t=e._readableState;debug$e("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount$3(e,"data")&&(t.flowing=!0,flow$3(e))}}function updateReadableListening$3(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function nReadingNextTick$3(e){debug$e("readable nexttick read 0"),e.read(0)}function resume$3(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(resume_$3,e,t))}function resume_$3(e,t){debug$e("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),flow$3(e),t.flowing&&!t.reading&&e.read(0)}function flow$3(e){var t=e._readableState;for(debug$e("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList$3(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function endReadable$3(e){var t=e._readableState;debug$e("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(endReadableNT$3,t,e))}function endReadableNT$3(e,t){debug$e("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf$4(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Readable$6.prototype.read=function(e){debug$e("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return debug$e("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable$3(this):emitReadable$3(this),null;if(0===(e=howMuchToRead$3(e,t))&&t.ended)return 0===t.length&&endReadable$3(this),null;var n,i=t.needReadable;return debug$e("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&debug$e("length less than watermark",i=!0),t.ended||t.reading?debug$e("reading or ended",i=!1):i&&(debug$e("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead$3(r,t))),null===(n=e>0?fromList$3(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable$3(this)),null!==n&&this.emit("data",n),n},Readable$6.prototype._read=function(e){this.emit("error",new ERR_METHOD_NOT_IMPLEMENTED$a("_read()"))},Readable$6.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,debug$e("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?s:h;function o(t,i){debug$e("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,debug$e("cleanup"),e.removeListener("close",l),e.removeListener("finish",d),e.removeListener("drain",a),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",h),r.removeListener("data",u),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||a())}function s(){debug$e("onend"),e.end()}n.endEmitted?process.nextTick(i):r.once("end",i),e.on("unpipe",o);var a=pipeOnDrain$3(r);e.on("drain",a);var c=!1;function u(t){debug$e("ondata");var i=e.write(t);debug$e("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf$4(n.pipes,e))&&!c&&(debug$e("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(t){debug$e("onerror",t),h(),e.removeListener("error",f),0===EElistenerCount$3(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",d),h()}function d(){debug$e("onfinish"),e.removeListener("close",l),h()}function h(){debug$e("unpipe"),r.unpipe(e)}return r.on("data",u),prependListener$3(e,"error",f),e.once("close",l),e.once("finish",d),e.emit("pipe",r),n.flowing||(debug$e("pipe resume"),r.resume()),e},Readable$6.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=indexOf$4(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Readable$6.prototype.on=function(e,t){var r=stream$3.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,debug$e("on readable",n.length,n.reading),n.length?emitReadable$3(this):n.reading||process.nextTick(nReadingNextTick$3,this))),r},Readable$6.prototype.addListener=Readable$6.prototype.on,Readable$6.prototype.removeListener=function(e,t){var r=stream$3.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(updateReadableListening$3,this),r},Readable$6.prototype.removeAllListeners=function(e){var t=stream$3.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(updateReadableListening$3,this),t},Readable$6.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug$e("resume"),e.flowing=!e.readableListening,resume$3(this,e)),e.paused=!1,this},Readable$6.prototype.pause=function(){return debug$e("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug$e("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable$6.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(debug$e("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(debug$e("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<kProxyEvents$3.length;o++)e.on(kProxyEvents$3[o],this.emit.bind(this,kProxyEvents$3[o]));return this._read=function(t){debug$e("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(Readable$6.prototype[Symbol.asyncIterator]=function(){return emitExperimentalWarning$7("Readable[Symbol.asyncIterator]"),void 0===createReadableStreamAsyncIterator$7&&(createReadableStreamAsyncIterator$7=async_iterator$3),createReadableStreamAsyncIterator$7(this)}),Object.defineProperty(Readable$6.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable$6.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable$6.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),Readable$6._fromList=fromList$3,Object.defineProperty(Readable$6.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});var _stream_transform$3=Transform$5,_require$codes$e=errors$d.codes,ERR_METHOD_NOT_IMPLEMENTED$b=_require$codes$e.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$7=_require$codes$e.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING$3=_require$codes$e.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0$3=_require$codes$e.ERR_TRANSFORM_WITH_LENGTH_0;function afterTransform$3(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new ERR_MULTIPLE_CALLBACK$7);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform$5(e){if(!(this instanceof Transform$5))return new Transform$5(e);_stream_duplex$3.call(this,e),this._transformState={afterTransform:afterTransform$3.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish$7)}function prefinish$7(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?done$4(this,null,null):this._flush(function(t,r){done$4(e,t,r)})}function done$4(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0$3;if(e._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING$3;return e.push(null)}inherits(Transform$5,_stream_duplex$3),Transform$5.prototype.push=function(e,t){return this._transformState.needTransform=!1,_stream_duplex$3.prototype.push.call(this,e,t)},Transform$5.prototype._transform=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED$b("_transform()"))},Transform$5.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform$5.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},Transform$5.prototype._destroy=function(e,t){_stream_duplex$3.prototype._destroy.call(this,e,function(e){t(e)})};var eos$7,_stream_passthrough$3=PassThrough$4;function PassThrough$4(e){if(!(this instanceof PassThrough$4))return new PassThrough$4(e);_stream_transform$3.call(this,e)}function once$a(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}inherits(PassThrough$4,_stream_transform$3),PassThrough$4.prototype._transform=function(e,t,r){r(null,e)};var _require$codes$f=errors$d.codes,ERR_MISSING_ARGS$3=_require$codes$f.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED$7=_require$codes$f.ERR_STREAM_DESTROYED;function noop$o(e){if(e)throw e}function isRequest$8(e){return e.setHeader&&"function"==typeof e.abort}function destroyer$3(e,t,r,n){n=once$a(n);var i=!1;e.on("close",function(){i=!0}),void 0===eos$7&&(eos$7=endOfStream$3),eos$7(e,{readable:t,writable:r},function(e){if(e)return n(e);i=!0,n()});var o=!1;return function(t){if(!i&&!o)return o=!0,isRequest$8(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new ERR_STREAM_DESTROYED$7("pipe"))}}function call$3(e){e()}function pipe$4(e,t){return e.pipe(t)}function popCallback$3(e){return e.length?"function"!=typeof e[e.length-1]?noop$o:e.pop():noop$o}function pipeline$3(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=popCallback$3(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new ERR_MISSING_ARGS$3("streams");var o=t.map(function(e,r){var s=r<t.length-1;return destroyer$3(e,s,r>0,function(e){n||(n=e),e&&o.forEach(call$3),s||(o.forEach(call$3),i(n))})});return t.reduce(pipe$4)}var pipeline_1$3=pipeline$3,readable$3=createCommonjsModule(function(e,t){"disable"===process.env.READABLE_STREAM&&Stream$1?(e.exports=Stream$1.Readable,Object.assign(e.exports,Stream$1),e.exports.Stream=Stream$1):((t=e.exports=_stream_readable$3).Stream=Stream$1||t,t.Readable=t,t.Writable=_stream_writable$3,t.Duplex=_stream_duplex$3,t.Transform=_stream_transform$3,t.PassThrough=_stream_passthrough$3,t.finished=endOfStream$3,t.pipeline=pipeline_1$3)}),readable_1$3=readable$3.Stream,readable_2$3=readable$3.Readable,readable_3$3=readable$3.Writable,readable_4$3=readable$3.Duplex,readable_5$3=readable$3.Transform,readable_6$3=readable$3.PassThrough,readable_7$3=readable$3.finished,readable_8$3=readable$3.pipeline;const Duplex$c=readable$3.Duplex;class AddHelper extends Duplex$c{constructor(e,t,r){super(Object.assign({objectMode:!0},r)),this._pullStream=e,this._pushable=t,this._waitingPullFlush=[]}_read(){this._pullStream(null,(e,t)=>{for(;this._waitingPullFlush.length;){this._waitingPullFlush.shift()()}e?e instanceof Error?this.emit("error",e):this.push(null):this.push(t)})}_write(e,t,r){this._waitingPullFlush.push(r),this._pushable.push(e)}}var addReadableStream=function(e){return t=>{t=t||{};const r=pullPushable_1(),n=pullStream(r,e.addPullStream(t)),i=new AddHelper(n,r);return i.once("finish",()=>r.end()),i}},cat=function(e){return promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={}),pullStream(e.catPullStream(t,r),pullStream.collect((e,t)=>{if(e)return n(e);n(null,Buffer.concat(t))}))})},CIDUtil$a={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$a=CIDUtil$a;class CID$9{constructor(e,t,r,n){if(_CID$9.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$9.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$9.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$9.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$9(0,this.codec,this.multihash)}toV1(){return new _CID$9(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$a.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$9=classIs(CID$9,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$9.codecs=baseTable;var src$1G=_CID$9;const addLinksToHamtBucket=(e,t,r)=>Promise.all(e.map(e=>{if(2===e.Name.length){const r=parseInt(e.Name,16);return t._putObjectAt(r,new bucket({hashFn:dirSharded.hashFn},t,r))}return r.put(e.Name.substring(2),!0)})),toPrefix=e=>e.toString("16").toUpperCase().padStart(2,"0").substring(0,2),toBucketPath=e=>{let t=e.bucket;const r=[];for(;t._parent;)r.push(t),t=t._parent;return r.push(t),r.reverse()},findShardCid=async(e,t,r,n)=>{n||((n={rootBucket:new bucket({hashFn:dirSharded.hashFn}),hamtDepth:1}).lastBucket=n.rootBucket),await addLinksToHamtBucket(e.Links,n.lastBucket,n.rootBucket);const i=await n.rootBucket._findNewBucketAndPos(t);let o=toPrefix(i.pos);const s=toBucketPath(i);s.length>n.hamtDepth&&(n.lastBucket=s[n.hamtDepth],o=toPrefix(n.lastBucket._posAtParent));const a=e.Links.find(e=>{const r=e.Name.substring(0,2),n=e.Name.substring(2);if(r===o&&(!n||n===t))return!0});return a?a.Name.substring(2)===t?a.Hash:(n.hamtDepth++,e=await r.get(a.Hash),findShardCid(e,t,r,n)):null};var findCidInShard=findShardCid,extractDataFromBlock=function(e,t,r,n){const i=t+e.length;return r>=i||n<t?Buffer.alloc(0):(n>=t&&n<i&&(e=e.slice(0,n-t)),r>=t&&r<i&&(e=e.slice(r-t)),e)};const validateOffsetAndLength=(e,t,r)=>{if(t||(t=0),t<0)throw errCode(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(t>e)throw errCode(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(r||0===r||(r=e-t),r<0)throw errCode(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return t+r>e&&(r=e-t),{offset:t,length:r}};var validateOffsetAndLength_1=validateOffsetAndLength;async function*emitBytes(e,t,r,n,i=0){if(Buffer.isBuffer(t)){const e=extractDataFromBlock(t,i,r,n);return e.length&&(yield e),i+=e.length}let o;try{o=src$1B.unmarshal(t.Data)}catch(e){throw errCode(e,"ERR_NOT_UNIXFS")}if(Boolean(o.data&&o.data.length)){const e=extractDataFromBlock(o.data,i,r,n);e.length&&(yield e),i+=o.data.length}let s=i;for(let a=0;a<t.Links.length;a++){const c=t.Links[a],u=i+o.blockSizes[a];if(r>=s&&r<u||n>s&&n<=u||r<s&&n>u){const t=await e.get(c.Hash);for await(const o of emitBytes(e,t,r,n,i))i+=o.length,yield o}i=u,s=u+1}}const fileContent=(e,t,r,n,i,o,s)=>(e={})=>{const n=r.fileSize(),{offset:i,length:o}=validateOffsetAndLength_1(n,e.offset,e.length);return emitBytes(s,t,i,i+o)};var file$1=fileContent;const directoryContent=(e,t,r,n,i,o,s)=>(async function*(e={}){const r=e.offset||0,a=e.length||t.Links.length,c=t.Links.slice(r,a);for(const e of c){const t=await i(e.Hash,e.Name,`${n}/${e.Name}`,[],o+1,s);yield t.entry}});var directory=directoryContent;const hamtShardedDirectoryContent=(e,t,r,n,i,o,s)=>(e={})=>listDirectory(t,n,i,o,s);async function*listDirectory(e,t,r,n,i,o){const s=e.Links;for(const o of s){const s=o.Name.substring(2);if(s){const e=await r(o.Hash,s,`${t}/${s}`,[],n+1,i);yield e.entry}else{e=await i.get(o.Hash);for await(const o of listDirectory(e,t,r,n,i))yield o}}}var hamtShardedDirectory=hamtShardedDirectoryContent;const findLinkCid=(e,t)=>{const r=e.Links.find(e=>e.Name===t);return r&&r.Hash},contentExporters={raw:fileContent,file:fileContent,directory:directory,"hamt-sharded-directory":hamtShardedDirectory,metadata:(e,t,r,n,i,o,s)=>{},symlink:(e,t,r,n,i,o,s)=>{}},unixFsResolver=async(e,t,r,n,i,o,s)=>{const a=await s.get(e);let c,u;t||(t=e.toBaseEncodedString());try{c=src$1B.unmarshal(a.Data)}catch(e){throw errCode(e,"ERR_NOT_UNIXFS")}if(r||(r=t),n.length){let e;if(!(e=c&&"hamt-sharded-directory"===c.type?await findCidInShard(a,n[0],s):findLinkCid(a,n[0])))throw errCode(new Error("file does not exist"),"ERR_NOT_FOUND");const t=n.shift();u={cid:e,toResolve:n,name:t,path:`${r}/${t}`}}return{entry:{name:t,path:r,cid:e,node:a,content:contentExporters[c.type](e,a,c,r,i,o,s),unixfs:c,depth:o},next:u}};var unixfsV1=unixFsResolver;const rawContent=e=>(function*(t={}){const{offset:r,length:n}=validateOffsetAndLength_1(e.length,t.offset,t.length);yield extractDataFromBlock(e,0,r,r+n)}),resolve$2=async(e,t,r,n,i,o,s)=>{if(n.length)throw errCode(new Error(`No link named ${r} found in raw node ${e.toBaseEncodedString()}`),"ERR_NOT_FOUND");const a=await s.get(e);return{entry:{name:t,path:r,cid:e,node:a,content:rawContent(a),depth:o}}};var raw=resolve$2;const resolve$3=async(e,t,r,n,i,o,s)=>{let a=await s.get(e),c=a,u=r;for(;n.length;){const i=n[0];if(!(i in c))throw errCode(new Error(`No property named ${i} found in cbor node ${e.toBaseEncodedString()}`),"ERR_NO_PROP");if(n.shift(),u=`${u}/${i}`,src$1G.isCID(c[i]))return{entry:{name:t,path:r,cid:e,node:a,depth:o},next:{cid:c[i],name:i,path:u,toResolve:n}};c=c[i]}return{entry:{name:t,path:r,cid:e,node:a,depth:o}}};var dagCbor=resolve$3;const resolvers={"dag-pb":unixfsV1,raw:raw,"dag-cbor":dagCbor},resolve$4=(e,t,r,n,i,o)=>{const s=resolvers[e.codec];if(!s)throw errCode(new Error(`No resolver for codec ${e.codec}`),"ERR_NO_RESOLVER");return s(e,t,r,n,resolve$4,i,o)};var resolvers_1=resolve$4;const last=async e=>{let t;for await(const r of e)t=r;return t};var asyncIteratorLast=last;const toPathComponents$1=(e="")=>(e.trim().match(/([^\\^\/]|\\\/)+/g)||[]).filter(Boolean),cidAndRest=e=>{if(Buffer.isBuffer(e))return{cid:new src$1G(e),toResolve:[]};if(src$1G.isCID(e))return{cid:e,toResolve:[]};if("string"==typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));const t=toPathComponents$1(e);return{cid:new src$1G(t[0]),toResolve:t.slice(1)}}throw errCode(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")},walkPath=async function*(e,t){let{cid:r,toResolve:n}=cidAndRest(e),i=r.toBaseEncodedString(),o=i;const s=n.length;for(;;){const a=await resolvers_1(r,i,o,n,s,t);if(!a.entry&&!a.next)throw errCode(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");if(a.entry&&(yield a.entry),!a.next)return;n=a.next.toResolve,r=a.next.cid,i=a.next.name,o=a.next.path}},exporter=(e,t)=>asyncIteratorLast(walkPath(e,t)),recursive=async function*(e,t){const r=await exporter(e,t);if(yield r,r.unixfs&&r.unixfs.type.includes("dir"))for await(const e of async function*e(t){for await(const r of t.content())if(yield r,r.unixfs.type.includes("dir"))for await(const t of e(r))yield t}(r))yield e};var src$1H=exporter,path$3=walkPath,recursive_1=recursive;src$1H.path=path$3,src$1H.recursive=recursive_1;const{normalizePath:normalizePath$1}=utils$M;var catPullStream=function(e){return function(t,r){if("function"==typeof t)throw new Error("You must supply an ipfsPath");r=r||{};const n=(t=normalizePath$1(t)).split("/");!1!==r.preload&&e._preload(n[0]);const i=pullDefer.source();return src$1H(t,e._ipld).then(e=>e.unixfs&&e.unixfs.type.includes("dir")?i.abort(new Error("this dag node is a directory")):e.content?void i.resolve(asyncIteratorToPullStream.source(e.content(r))):i.abort(new Error("this dag node has no content")),e=>{i.abort(e)}),i}},catReadableStream=function(e){return(t,r)=>pullStreamToStream.source(e.catPullStream(t,r))},get$3=function(e){return promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{},pullStream(e.getPullStream(t,r),pullStream.asyncMap((e,t)=>{e.content?pullStream(e.content,pullStream.collect((r,n)=>{if(r)return t(r);e.content=Buffer.concat(n),t(null,e)})):t(null,e)}),pullStream.collect(n))})};const{normalizePath:normalizePath$2,mapFile:mapFile$1}=utils$M;var getPullStream=function(e){return(t,r)=>{if(!1!==(r=r||{}).preload){let r;try{r=normalizePath$2(t).split("/")}catch(e){return pull.error(errCode(e,"ERR_INVALID_PATH"))}e._preload(r[0])}return pull(asyncIteratorToPullStream.source(src$1H.recursive(t,e._ipld,r)),map$3(mapFile$1({...r,includeContent:!0})))}},getReadableStream=function(e){return(t,r)=>(r=r||{},pullStreamToStream.source(pullStream(e.getPullStream(t,r),pullStream.map(e=>(e.content&&(e.content=pullStreamToStream.source(e.content),e.content.pause()),e)))))},ls=function(e){return promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{},pullStream(e.lsPullStream(t,r),pullStream.collect((e,t)=>{if(e)return n(e);n(null,t)}))})};const{normalizePath:normalizePath$3,mapFile:mapFile$2}=utils$M;var lsPullStream=function(e){return function(t,r){r=r||{};const n=normalizePath$3(t),i=r.recursive,o=n.split("/");!1!==r.preload&&e._preload(o[0]);const s=pullDefer.source();return src$1H(t,e._ipld).then(t=>t.unixfs?"file"===t.unixfs.type?s.resolve(once(mapFile$2(r)(t))):t.unixfs.type.includes("dir")?i?s.resolve(pull(asyncIteratorToPullStream.source(src$1H.recursive(t.cid,e._ipld,r)),filter$1(e=>t.cid.toBaseEncodedString()!==e.cid.toBaseEncodedString()),map$3(mapFile$2(r)))):s.resolve(pull(asyncIteratorToPullStream.source(t.content()),map$3(mapFile$2(r)),map$3(e=>(e.depth--,e)))):void s.abort(errCode(new Error(`Unknown UnixFS type ${t.unixfs.type}`),"EUNKNOWNUNIXFSTYPE")):s.abort(errCode(new Error("dag node was not a UnixFS node"),"ENOTUNIXFS")),e=>{s.abort(e)}),s}},lsReadableStream=function(e){return(t,r)=>pullStreamToStream.source(e.lsPullStream(t,r))},refs=function(e){return promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{},pullStream(e.refsPullStream(t,r),pullStream.collect((e,t)=>{if(e)return n(e);n(null,t)}))})},Format={default:"<dst>",edges:"<src> -> <dst>"};refs.Format=Format;var refsReadableStream=function(e){return(t,r)=>pullStreamToStream.source(e.refsPullStream(t,r))},pullTraverse=createCommonjsModule(function(e,t){var r=t.once=function(e){return function(t,r){if(t)return r(t);if(null!=e){var n=e;e=null,r(null,n)}else r(!0)}};t.depthFirst=function(e,t){var n,i=[];return i.unshift(r(e)),function e(r,o){return i.length?n?o(n):void i[0](r,function(r,s){if(r){if(!0!==r){for(n=r,i.shift();i.length;)i.shift()(r,function(){});return o(r)}return i.shift(),e(null,o)}i.unshift(t(s)),o(r,s)}):o(!0)}},t.widthFirst=function(e,t){var n=[];return n.push(r(e)),function e(r,i){if(!n.length)return i(!0);n[0](r,function(r,o){if(r)return n.shift(),e(null,i);n.push(t(o)),i(r,o)})}},t.leafFirst=function(e,t){var n=[],i=[];return n.push(r(e)),function e(r,o){n[0](r,function(r,s){if(r)return n.shift(),i.length?o(null,i.shift()):o(!0);n.unshift(t(s)),i.unshift(s),e(null,o)})}}}),pullTraverse_1=pullTraverse.once,pullTraverse_2=pullTraverse.depthFirst,pullTraverse_3=pullTraverse.widthFirst,pullTraverse_4=pullTraverse.leafFirst;const{DAGNode:DAGNode$7}=src$k,{normalizePath:normalizePath$4}=utils$M,{Format:Format$1}=refs;var refsPullStream=function(e){return function(t,r={}){if(0===r.maxDepth)return pullStream.empty();if(r.edges&&r.format&&r.format!==Format$1.default)return pullStream.error(new Error("Cannot set edges to true and also specify format"));let n;r.format=r.edges?Format$1.edges:r.format||Format$1.default,"number"!=typeof r.maxDepth&&(r.maxDepth=r.recursive?1/0:1);try{n=(Array.isArray(t)?t:[t]).map(t=>getFullPath(e,t,r))}catch(e){return pullStream.error(e)}return pullCat(n.map(t=>refsStream(e,t,r)))}};function getFullPath(e,t,r){const n=normalizePath$4(t),i=n.split("/")[0];if(!src$w.cid(i))throw new Error(`Error resolving path '${n}': '${i}' is not a valid CID`);return!1!==r.preload&&e._preload(i),"/ipfs/"+n}function refsStream(e,t,r){const n=pullDefer.source();return e.resolve(t,(t,i)=>{if(t)return n.resolve(pullStream.error(t));const o=i.split("/")[2];n.resolve(pullStream(objectStream(e,o,r.maxDepth,r.unique),pullStream.filter(e=>Boolean(e.parent)),pullStream.filter(e=>!e.isDuplicate),pullStream.map(e=>formatLink(e.parent.cid,e.node.cid,e.node.name,r.format)),pullStream.map(e=>({ref:e}))))}),n}function formatLink(e,t,r,n){let i=n.replace(/<src>/g,e.toString());return i=(i=i.replace(/<dst>/g,t.toString())).replace(/<linkname>/g,r)}function objectStream(e,t,r,n){const i=new Set,o={node:{cid:t},depth:0};return pullTraverse.depthFirst(o,t=>{const{node:o,depth:s}=t,a=s+1;if(a>r)return pullStream.empty();if(n){if(i.has(o.cid.toString()))return t.isDuplicate=!0,pullStream.empty();i.add(o.cid.toString())}const c=pullDefer.source();return getLinks(e,o.cid,(e,t)=>{if(e)return"ERR_NOT_FOUND"===e.code&&(e.message=`Could not find object with CID: ${o.cid}`),c.resolve(pullStream.error(e));const r=t.map(e=>({parent:o,node:e,depth:a}));c.resolve(pullStream.values(r))}),c})}function getLinks(e,t,r){e._ipld.get(new src$v(t)).then(e=>{let t;t=DAGNode$7.isDAGNode(e)?e.Links.map(({Name:e,Hash:t})=>({name:e,cid:new src$v(t)})):getNodeLinks(e),r(null,t)}).catch(r)}function getNodeLinks(e,t=""){let r=[];for(const[n,i]of Object.entries(e))src$v.isCID(i)?r.push({name:t+n,cid:i}):"object"==typeof i&&(r=r.concat(getNodeLinks(i,t+n+"/")));return r}var refsLocal=function(e){return promisifyEs6(t=>{pullStream(e.refs.localPullStream(),pullStream.collect((e,r)=>{if(e)return t(e);t(null,r)}))})},refsLocalReadableStream=function(e){return(t,r)=>pullStreamToStream.source(e.refs.localPullStream())},refsLocalPullStream=function(e){return()=>{const t=pullDefer.source();return e._repo.blocks.query({keysOnly:!0},(e,r)=>{if(e)return t.resolve(pullStream.error(e));const n=r.map(e=>dsKeyToRef(e.key));t.resolve(pullStream.values(n))}),t}};function dsKeyToRef(e){try{const t=new base32_js.Decoder,r=Buffer.from(t.write(e.toString().slice(1)).finalize());return{ref:new src$v(r).toString()}}catch(t){return{err:`Could not convert block with key '${e}' to CID: ${t.message}`}}}var filesRegular=e=>{const t={add:add(e),addFromFs:addFromFs(e),addFromStream:addFromStream(e),addFromURL:addFromUrl(e),addPullStream:addPullStream(e),addReadableStream:addReadableStream(e),cat:cat(e),catPullStream:catPullStream(e),catReadableStream:catReadableStream(e),get:get$3(e),getPullStream:getPullStream(e),getReadableStream:getReadableStream(e),ls:ls(e),lsPullStream:lsPullStream(e),lsReadableStream:lsReadableStream(e),refs:refs(e),refsReadableStream:refsReadableStream(e),refsPullStream:refsPullStream(e)};return t.refs.local=refsLocal(e),t.refs.localReadableStream=refsLocalReadableStream(e),t.refs.localPullStream=refsLocalPullStream(e),t},seed$1=1;function getNextValue(){return(seed$1=(9301*seed$1+49297)%233280)/233280}function setSeed(e){seed$1=e}var alphabet$1,previousSeed,shuffled,randomFromSeed={nextValue:getNextValue,seed:setSeed},ORIGINAL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function reset(){shuffled=!1}function setCharacters(e){if(e){if(e!==alphabet$1){if(e.length!==ORIGINAL.length)throw new Error("Custom alphabet for shortid must be "+ORIGINAL.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(e,t,r){return t!==r.lastIndexOf(e)});if(t.length)throw new Error("Custom alphabet for shortid must be "+ORIGINAL.length+" unique characters. These characters were not unique: "+t.join(", "));alphabet$1=e,reset()}}else alphabet$1!==ORIGINAL&&(alphabet$1=ORIGINAL,reset())}function characters(e){return setCharacters(e),alphabet$1}function setSeed$1(e){randomFromSeed.seed(e),previousSeed!==e&&(reset(),previousSeed=e)}function shuffle(){alphabet$1||setCharacters(ORIGINAL);for(var e,t=alphabet$1.split(""),r=[],n=randomFromSeed.nextValue();t.length>0;)n=randomFromSeed.nextValue(),e=Math.floor(n*t.length),r.push(t.splice(e,1)[0]);return r.join("")}function getShuffled(){return shuffled||(shuffled=shuffle())}function lookup(e){return getShuffled()[e]}function get$4(){return alphabet$1||ORIGINAL}var alphabet_1={get:get$4,characters:characters,seed:setSeed$1,lookup:lookup,shuffled:getShuffled},random$2=createCommonjsModule(function(e){if(crypto$l.randomFillSync){var t={};e.exports=function(e){var r=t[e];return r||(r=Buffer.allocUnsafe(e),e<=255&&(t[e]=r)),crypto$l.randomFillSync(r)}}else e.exports=crypto$l.randomBytes}),randomByte=random$2,format$5=function(e,t,r){var n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=Math.ceil(1.6*n*r/t.length);r=+r;for(var o="";;)for(var s=e(i),a=0;a<i;a++){var c=s[a]&n;if(t[c]&&(o+=t[c]).length===r)return o}};function generate$1(e){for(var t,r=0,n="";!t;)n+=format$5(randomByte,alphabet_1.get(),1),t=e<Math.pow(16,r+1),r++;return n}var counter$2,previousSeconds,generate_1=generate$1,REDUCE_TIME=1459707606518,version$6=6;function build(e){var t="",r=Math.floor(.001*(Date.now()-REDUCE_TIME));return r===previousSeconds?counter$2++:(counter$2=0,previousSeconds=r),t+=generate_1(version$6),t+=generate_1(e),counter$2>0&&(t+=generate_1(counter$2)),t+=generate_1(r)}var build_1=build;function isShortId(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+alphabet_1.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}var isValid$1=isShortId,clusterId=0;!cluster$1.isMaster&&cluster$1.worker&&(clusterId=cluster$1.worker.id);var clusterWorkerId=parseInt(process.env.NODE_UNIQUE_ID||clusterId,10),lib$9=createCommonjsModule(function(e){var t=clusterWorkerId||0;function r(){return build_1(t)}e.exports=r,e.exports.generate=r,e.exports.seed=function(t){return alphabet_1.seed(t),e.exports},e.exports.worker=function(r){return t=r,e.exports},e.exports.characters=function(e){return void 0!==e&&alphabet_1.characters(e),alphabet_1.shuffled()},e.exports.isValid=isValid$1}),lib_1$3=lib$9.generate,lib_2$3=lib$9.seed,lib_3$3=lib$9.worker,lib_4$3=lib$9.characters,lib_5$3=lib$9.isValid,shortid=lib$9,constants$h={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"};const EventEmitter$f=events$1.EventEmitter,{WORKER_REQUEST_READ_LOCK:WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK:WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK:MASTER_GRANT_READ_LOCK,WORKER_REQUEST_WRITE_LOCK:WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK:WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK:MASTER_GRANT_WRITE_LOCK}=constants$h;let cluster;const handleWorkerLockRequest=(e,t,r,n,i)=>(o,s)=>{s&&s.type===r&&e.emit(t,s.name,()=>(o.send({type:i,name:s.name,identifier:s.identifier}),new Promise(e=>{const t=r=>{r&&r.type===n&&r.identifier===s.identifier&&(o.removeListener("message",t),e())};o.on("message",t)})))},makeWorkerLockRequest=(e,t,r,n)=>i=>{const o=shortid.generate();return process.send({type:t,identifier:o,name:e}),new Promise((t,s)=>{const a=c=>{if(c&&c.type===r&&c.identifier===o){process.removeListener("message",a);let r=null;i().catch(e=>{r=e}).then(i=>{if(process.send({type:n,identifier:o,name:e}),r)return s(r);t(i)})}};process.on("message",a)})};var node$t=e=>{try{if(cluster=cluster$1,!Object.keys(cluster).length)return}catch(e){return}if(cluster.isMaster||e.singleProcess){const e=new EventEmitter$f;return cluster.on("message",handleWorkerLockRequest(e,"requestReadLock",WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK)),cluster.on("message",handleWorkerLockRequest(e,"requestWriteLock",WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK)),e}return{isWorker:!0,readLock:(e,t)=>makeWorkerLockRequest(e,WORKER_REQUEST_READ_LOCK,MASTER_GRANT_READ_LOCK,WORKER_RELEASE_READ_LOCK),writeLock:(e,t)=>makeWorkerLockRequest(e,WORKER_REQUEST_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK)}};const events={},observable$1=e=>{e.addEventListener("message",t=>{observable$1.dispatchEvent("message",e,t)}),e.port&&e.port.addEventListener("message",t=>{observable$1.dispatchEvent("message",e,t)})};observable$1.addEventListener=(e,t)=>{events[e]||(events[e]=[]),events[e].push(t)},observable$1.removeEventListener=(e,t)=>{events[e]&&(events[e]=events[e].filter(e=>e===t))},observable$1.dispatchEvent=function(){const e=Array.prototype.slice.call(arguments),t=e.shift();events[t]&&events[t].forEach(t=>t.apply(null,e))};var lib$a=observable$1;const EventEmitter$g=events$1.EventEmitter,{WORKER_REQUEST_READ_LOCK:WORKER_REQUEST_READ_LOCK$1,WORKER_RELEASE_READ_LOCK:WORKER_RELEASE_READ_LOCK$1,MASTER_GRANT_READ_LOCK:MASTER_GRANT_READ_LOCK$1,WORKER_REQUEST_WRITE_LOCK:WORKER_REQUEST_WRITE_LOCK$1,WORKER_RELEASE_WRITE_LOCK:WORKER_RELEASE_WRITE_LOCK$1,MASTER_GRANT_WRITE_LOCK:MASTER_GRANT_WRITE_LOCK$1}=constants$h,handleWorkerLockRequest$1=(e,t,r,n,i)=>(o,s)=>{if(!s||!s.data||s.data.type!==r)return;const a={type:s.data.type,name:s.data.name,identifier:s.data.identifier};e.emit(t,a.name,()=>(o.postMessage({type:i,name:a.name,identifier:a.identifier}),new Promise(e=>{const t=r=>{if(!r||!r.data)return;const i={type:r.data.type,name:r.data.name,identifier:r.data.identifier};i&&i.type===n&&i.identifier===a.identifier&&(o.removeEventListener("message",t),e())};o.addEventListener("message",t)})))},makeWorkerLockRequest$1=(e,t,r,n,i)=>o=>{const s=shortid.generate();return e.postMessage({type:r,identifier:s,name:t}),new Promise((r,a)=>{const c=u=>{if(!u||!u.data)return;const f={type:u.data.type,identifier:u.data.identifier};if(f&&f.type===n&&f.identifier===s){let n;e.removeEventListener("message",c),o().catch(e=>{n=e}).then(o=>(e.postMessage({type:i,identifier:s,name:t}),n?a(n):r(o)))}};e.addEventListener("message",c)})},defaultOptions$8={global:commonjsGlobal,singleProcess:!1};var browser$r=e=>{if(!!(e=Object.assign({},defaultOptions$8,e)).global.document||e.singleProcess){const e=new EventEmitter$g;return lib$a.addEventListener("message",handleWorkerLockRequest$1(e,"requestReadLock",WORKER_REQUEST_READ_LOCK$1,WORKER_RELEASE_READ_LOCK$1,MASTER_GRANT_READ_LOCK$1)),lib$a.addEventListener("message",handleWorkerLockRequest$1(e,"requestWriteLock",WORKER_REQUEST_WRITE_LOCK$1,WORKER_RELEASE_WRITE_LOCK$1,MASTER_GRANT_WRITE_LOCK$1)),e}return{isWorker:!0,readLock:(e,t)=>makeWorkerLockRequest$1(t.global,e,WORKER_REQUEST_READ_LOCK$1,MASTER_GRANT_READ_LOCK$1,WORKER_RELEASE_READ_LOCK$1),writeLock:(e,t)=>makeWorkerLockRequest$1(t.global,e,WORKER_REQUEST_WRITE_LOCK$1,MASTER_GRANT_WRITE_LOCK$1,WORKER_RELEASE_WRITE_LOCK$1)}},eventemitter3=createCommonjsModule(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,f=this._events[a],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,i),!0;case 5:return f.fn.call(f.context,t,n,i,o),!0;case 6:return f.fn.call(f.context,t,n,i,o,s),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];f.fn.apply(f.context,c)}else{var d,h=f.length;for(u=0;u<h;u++)switch(f[u].once&&this.removeListener(e,f[u].fn,void 0,!0),l){case 1:f[u].fn.call(f[u].context);break;case 2:f[u].fn.call(f[u].context,t);break;case 3:f[u].fn.call(f[u].context,t,n);break;case 4:f[u].fn.call(f[u].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];f[u].fn.apply(f[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var c=0,u=[],f=a.length;c<f;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a});function lowerBound(e,t,r){let n=0,i=e.length;for(;i>0;){const o=i/2|0;let s=n+o;r(e[s],t)<=0?(n=++s,i-=o+1):i=o}return n}class PriorityQueue{constructor(){this._queue=[]}enqueue(e,t){const r={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);const n=lowerBound(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(n,0,r)}dequeue(){return this._queue.shift().run}get size(){return this._queue.length}}var pQueue=class extends eventemitter3{constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:PriorityQueue,...e}).concurrency&&e.concurrency>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e.concurrency}\` (${typeof e.concurrency})`);if(!("number"==typeof e.intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap}\` (${typeof e.intervalCap})`);if(!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCount=0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._intervalId=null,this._intervalEnd=0,this._timeoutId=null,this.queue=new e.queueClass,this._queueClass=e.queueClass,this._pendingCount=0,this._concurrency=e.concurrency,this._isPaused=!1===e.autoStart,this._resolveEmpty=()=>{},this._resolveIdle=()=>{}}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=()=>{},0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=()=>{})}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=null}_intervalPaused(){const e=Date.now();if(null===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return null===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this.queue.size)return clearInterval(this._intervalId),this._intervalId=null,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._intervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this.queue.dequeue()(),e&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||null!==this._intervalId||(this._intervalId=setInterval(()=>this._onInterval(),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){for(0===this._intervalCount&&0===this._pendingCount&&(clearInterval(this._intervalId),this._intervalId=null),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;this._tryToStartAnother(););}async add(e,t){return new Promise((r,n)=>{this.queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{r(await e())}catch(e){n(e)}this._next()},t),this._tryToStartAnother()})}async addAll(e,t){return Promise.all(e.map(e=>this.add(e,t)))}start(){if(this._isPaused)for(this._isPaused=!1;this._tryToStartAnother(););}pause(){this._isPaused=!0}clear(){this.queue=new this._queueClass}async onEmpty(){if(0!==this.queue.size)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this.queue.size)return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this.queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}},promiseTimeout=createCommonjsModule(function(e){var t;e.exports.timeout=function(e,r){var n,i=new t;return Promise.race([e,new Promise(function(e,t){n=setTimeout(function(){t(i)},r)})]).then(function(e){return clearTimeout(n),e},function(e){throw clearTimeout(n),e})};(t=e.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"}).prototype=Object.create(Error.prototype),t.prototype.name="TimeoutError"}),promiseTimeout_1=promiseTimeout.timeout,promiseTimeout_2=promiseTimeout.TimeoutError;const{timeout:timeout}=promiseTimeout,mutexes={};let implementation;const createMutex=(e,t)=>{if(implementation.isWorker)return{readLock:implementation.readLock(e,t),writeLock:implementation.writeLock(e,t)};const r=new pQueue({concurrency:1});let n=null;return{readLock:e=>{if(n)return n.add(()=>timeout(e(),t.timeout));const i=n=new pQueue({concurrency:t.concurrency,autoStart:!1}),o=n.add(()=>timeout(e(),t.timeout));return r.add(()=>(i.start(),i.onIdle().then(()=>{n===i&&(n=null)}))),o},writeLock:e=>(n=null,r.add(()=>timeout(e(),t.timeout)))}},defaultOptions$9={concurrency:1/0,timeout:846e5,global:commonjsGlobal,singleProcess:!1};var lib$b=(e,t)=>(t||(t={}),"object"==typeof e&&(t=e,e="lock"),e||(e="lock"),t=Object.assign({},defaultOptions$9,t),implementation||(implementation=node$t(t)||browser$r(t)).isWorker||(implementation.on("requestReadLock",(e,t)=>{mutexes[e]&&mutexes[e].readLock(t)}),implementation.on("requestWriteLock",(e,t)=>{mutexes[e]&&mutexes[e].writeLock(t)})),mutexes[e]||(mutexes[e]=createMutex(e,t)),mutexes[e]),Worker$1=function(e,t){let r;t=t||commonjsGlobal.Worker;try{r=new t(e)}catch(n){n.message.includes("not a constructor")&&(r=t(e))}if(!r)throw new Error("Could not create Worker from",t);return lib$a(r),r};let lock$4;lib$b.Worker=Worker$1;var createLock=e=>{if(lock$4)return lock$4;const t=lib$b({singleProcess:e});return lock$4={readLock:e=>(...r)=>t.readLock(()=>e.apply(null,r)),writeLock:e=>(...r)=>t.writeLock(()=>e.apply(null,r))}},applyDefaultOptions=(e={},t)=>{Array.isArray(e)&&(e=e.filter(e=>"object"==typeof e).pop()||{});const r={};for(let n in t)null!==e[n]&&void 0!==e[n]?r[n]=e[n]:r[n]=t[n];const n=r.format||r.codec;if(n&&isNaN(n)&&(r.format=n,delete r.codec),void 0!==e.count&&(r.length=e.count),void 0!==e.p&&(r.parents=e.p),void 0!==e.l&&(r.long=e.l),r.length||0===r.length||(r.length=1/0),r.offset<0)throw errCode(new Error("cannot have negative write offset"),"ERR_INVALID_PARAMS");if(r.length<0)throw errCode(new Error("cannot have negative byte count"),"ERR_INVALID_PARAMS");return r};const Key$e=src$B.Key,FILE_TYPES={file:0,directory:1,"hamt-sharded-directory":1};var constants$i={FILE_SEPARATOR:"/",MFS_ROOT_KEY:new Key$e("/local/filesroot"),MAX_CHUNK_SIZE:262144,MAX_LINKS:174,FILE_TYPES:FILE_TYPES},CIDUtil$b={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$b=CIDUtil$b;class CID$a{constructor(e,t,r,n){if(_CID$a.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$a.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$a.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$a.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$a(0,this.codec,this.multihash)}toV1(){return new _CID$a(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$b.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$a=classIs(CID$a,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$a.codecs=baseTable;var src$1I=_CID$a,s$t=1e3,m$q=60*s$t,h$o=60*m$q,d$o=24*h$o,w$n=7*d$o,y$o=365.25*d$o,ms$o=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$u(e);if("number"===r&&isFinite(e))return t.long?fmtLong$o(e):fmtShort$o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$u(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y$o;case"weeks":case"week":case"w":return r*w$n;case"days":case"day":case"d":return r*d$o;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h$o;case"minutes":case"minute":case"mins":case"min":case"m":return r*m$q;case"seconds":case"second":case"secs":case"sec":case"s":return r*s$t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort$o(e){var t=Math.abs(e);return t>=d$o?Math.round(e/d$o)+"d":t>=h$o?Math.round(e/h$o)+"h":t>=m$q?Math.round(e/m$q)+"m":t>=s$t?Math.round(e/s$t)+"s":e+"ms"}function fmtLong$o(e){var t=Math.abs(e);return t>=d$o?plural$o(e,t,d$o,"day"):t>=h$o?plural$o(e,t,h$o,"hour"):t>=m$q?plural$o(e,t,m$q,"minute"):t>=s$t?plural$o(e,t,s$t,"second"):e+" ms"}function plural$o(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function setup$m(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let o;function s(...e){if(!s.enabled)return;const t=s,n=Number(new Date),i=n-(o||n);t.diff=i,t.prev=o,t.curr=n,o=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];n=o.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms$o,Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common$t=setup$m,browser$s=createCommonjsModule(function(e,t){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common$t(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1$q=browser$s.log,browser_2$q=browser$s.formatArgs,browser_3$q=browser$s.save,browser_4$q=browser$s.load,browser_5$q=browser$s.useColors,browser_6$q=browser$s.storage,browser_7$q=browser$s.colors,node$u=createCommonjsModule(function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(util$j.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=supportsColor_1;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=common$t(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,util$j.inspect(e,this.inspectOpts)}}),node_1$q=node$u.init,node_2$q=node$u.log,node_3$q=node$u.formatArgs,node_4$q=node$u.save,node_5$q=node$u.load,node_6$q=node$u.useColors,node_7$q=node$u.colors,node_8$q=node$u.inspectOpts,src$1J=createCommonjsModule(function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser$s:e.exports=node$u});const{DAGNode:DAGNode$8}=src$k,log$J=src$1J("ipfs:mfs:utils:with-mfs-root"),{MFS_ROOT_KEY:MFS_ROOT_KEY}=constants$i,loadMfsRoot=async e=>{let t;await e.repo.datastore.open();try{const r=await e.repo.datastore.get(MFS_ROOT_KEY);t=new src$1I(r)}catch(r){if("ERR_NOT_FOUND"!==r.code)throw r;log$J("Creating new MFS root");const n=DAGNode$8.create(new src$1B("directory").marshal());t=await e.ipld.put(n,src$4.DAG_PB,{cidVersion:0,hashAlg:src.names["sha2-256"]}),await e.repo.datastore.put(MFS_ROOT_KEY,t.buffer)}return log$J(`Loaded MFS root /ipfs/${t}`),t};var withMfsRoot=loadMfsRoot;const toPathComponents$2=(e="")=>(e.trim().match(/([^\\^\/]|\\\/)+/g)||[]).filter(Boolean);var toPathComponents_1$1=toPathComponents$2;const{FILE_SEPARATOR:FILE_SEPARATOR}=constants$i,IPFS_PREFIX="ipfs",toMfsPath=async(e,t)=>{let r=Array.isArray(t),n=Array.isArray(t)?t:[t];const i=await withMfsRoot(e);return n=n.map(e=>{if((e=(e=(e||"").trim()).replace(/(\/\/+)/g,"/")).endsWith("/")&&e.length>1&&(e=e.substring(0,e.length-1)),!e)throw errCode(new Error("paths must not be empty"),"ERR_NO_PATH");if(e.substring(0,1)!==FILE_SEPARATOR)throw errCode(new Error(`paths must start with a leading ${FILE_SEPARATOR}`),"ERR_INVALID_PATH");e.substring(e.length-FILE_SEPARATOR.length)===FILE_SEPARATOR&&(e=e.substring(0,e.length-FILE_SEPARATOR.length));const t=toPathComponents_1$1(e);if("ipfs"===t[0]){let e;return e=2===t.length?`${FILE_SEPARATOR}${t.join(FILE_SEPARATOR)}`:`${FILE_SEPARATOR}${t.slice(0,t.length-1).join(FILE_SEPARATOR)}`,{type:"ipfs",depth:t.length-2,mfsPath:`${FILE_SEPARATOR}${t.join(FILE_SEPARATOR)}`,mfsDirectory:e,parts:t,path:`${FILE_SEPARATOR}${t.join(FILE_SEPARATOR)}`,name:t[t.length-1]}}const r=`/ipfs/${i}${t.length?"/"+t.join(FILE_SEPARATOR):""}`,n=`/ipfs/${i}/${t.slice(0,t.length-1).join(FILE_SEPARATOR)}`;return{type:"mfs",depth:t.length,mfsDirectory:n,mfsPath:r,parts:t,path:`${FILE_SEPARATOR}${t.join(FILE_SEPARATOR)}`,name:t[t.length-1]}}),await Promise.all(n.map(async t=>{const r="mfs"===t.type?t.mfsPath:t.path;try{const n=await src$1H(r,e.ipld);t.cid=n.cid,t.mfsPath=`/ipfs/${n.path}`,t.unixfs=n.unixfs,t.content=n.content}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}t.exists=Boolean(t.cid)})),r?n:n[0]};var toMfsPath_1=toMfsPath;const log$K=src$1J("ipfs:mfs:stat"),defaultOptions$a={withLocal:!1};var stat$2=e=>(async function(t,r){r=applyDefaultOptions(r,defaultOptions$a),log$K(`Fetching stats for ${t}`);const{type:n,cid:i,mfsPath:o}=await toMfsPath_1(e,t);let s,a="ipfs"===n&&i?i:o;try{s=await src$1H(a,e.ipld)}catch(e){if("ERR_NOT_FOUND"===e.code)throw errCode(new Error(`${t} does not exist`),"ERR_NOT_FOUND");throw e}if(!statters[s.cid.codec])throw new Error(`Cannot stat codec ${s.cid.codec}`);return statters[s.cid.codec](s,r)});const statters={raw:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),"dag-pb":e=>{let t=e.node.Links.length,r=e.node.size,n=e.node.size,i=null;return e.unixfs&&(r=e.unixfs.fileSize(),(i=e.unixfs.type).includes("directory")&&(r=0,n=e.node.size),"file"===i&&(t=e.unixfs.blockSizes.length)),{cid:e.cid,size:r,cumulativeSize:n,blocks:t,type:i,local:void 0,sizeLocal:void 0,withLocality:!1}}},{DAGNode:DAGNode$9}=src$k,createNode$1=async(e,t,r)=>{const n=src$4[r.format.toUpperCase().replace(/-/g,"_")],i=src.names[r.hashAlg],o=DAGNode$9.create(new src$1B(t).marshal());return{cid:await e.ipld.put(o,n,{cidVersion:r.cidVersion,hashAlg:i}),node:o}};var createNode_1=createNode$1;const log$L=src$1J("ipfs:mfs:utils:update-mfs-root"),{MFS_ROOT_KEY:MFS_ROOT_KEY$1}=constants$i,updateMfsRoot=async(e,t)=>(log$L(`New MFS root will be ${t}`),await e.repo.datastore.put(MFS_ROOT_KEY$1,t.buffer),t);var updateMfsRoot_1=updateMfsRoot;const{DAGNode:DAGNode$a}=src$k,log$M=src$1J("ipfs:mfs:core:utils:hamt-utils"),updateHamtDirectory=async(e,t,r,n)=>{const i=Buffer.from(r._children.bitField().reverse()),o=new src$1B("hamt-sharded-directory",i);o.fanout=r.tableSize(),o.hashType=dirSharded.hashFn.code;const s=src$4[n.format.toUpperCase().replace(/-/g,"_")],a=src.names[n.hashAlg],c=DAGNode$a.create(o.marshal(),t);return{node:c,cid:await e.ipld.put(c,s,{cidVersion:n.cidVersion,hashAlg:a,hashOnly:!n.flush})}},recreateHamtLevel=async(e,t,r,n)=>{const i=new bucket({hashFn:dirSharded.hashFn,hash:r?r._options.hash:void 0},r,n);return r&&r._putObjectAt(n,i),await addLinksToHamtBucket$1(e,i,t),i},addLinksToHamtBucket$1=async(e,t,r)=>{await Promise.all(e.map(e=>{if(2===e.Name.length){const r=parseInt(e.Name,16);return t._putObjectAt(r,new bucket({hashFn:dirSharded.hashFn},t,r)),Promise.resolve()}return(r||t).put(e.Name.substring(2),{size:e.TSize,cid:e.Hash})}))},toPrefix$1=e=>e.toString("16").toUpperCase().padStart(2,"0").substring(0,2),generatePath=async(e,t,r)=>{const n=await recreateHamtLevel(r.Links,null,null,null),i=await n._findNewBucketAndPos(t);let o=[{bucket:i.bucket,prefix:toPrefix$1(i.pos)}],s=i.bucket;for(;s!==n;)o.push({bucket:s,prefix:toPrefix$1(s._posAtParent)}),s=s._parent;o.reverse(),o[0].node=r;for(let r=0;r<o.length;r++){const i=o[r],s=i.node.Links.filter(e=>e.Name.substring(0,2)===i.prefix).pop();if(!s){log$M(`Link ${i.prefix}${t} will be added`);continue}if(s.Name===`${i.prefix}${t}`){log$M(`Link ${i.prefix}${t} will be replaced`);continue}log$M(`Found subshard ${i.prefix}`);const a=await e.ipld.get(s.Hash);if(!o[r+1]){log$M(`Loaded new subshard ${i.prefix}`),await recreateHamtLevel(a.Links,n,i.bucket,parseInt(i.prefix,16));const e=await n._findNewBucketAndPos(t);o.push({bucket:e.bucket,prefix:toPrefix$1(e.pos),node:a});continue}const c=o[r+1];await addLinksToHamtBucket$1(a.Links,c.bucket,n),c.node=a}return await n.put(t,!0),o.reverse(),{rootBucket:n,path:o}},createShard=async(e,t,r)=>{const n=new dirSharded({root:!0,dir:!0,parent:null,parentKey:null,path:"",dirty:!0,flat:!1},r);for(let e=0;e<t.length;e++)await n._bucket.put(t[e].name,{size:t[e].size,cid:t[e].cid});return asyncIteratorLast(n.flush("",e.ipld,null))};var hamtUtils={generatePath:generatePath,updateHamtDirectory:updateHamtDirectory,recreateHamtLevel:recreateHamtLevel,addLinksToHamtBucket:addLinksToHamtBucket$1,toPrefix:toPrefix$1,createShard:createShard};const{DAGNode:DAGNode$b,DAGLink:DAGLink$5}=src$k,log$N=src$1J("ipfs:mfs:core:utils:add-link"),{updateHamtDirectory:updateHamtDirectory$1,recreateHamtLevel:recreateHamtLevel$1,createShard:createShard$1,toPrefix:toPrefix$2,addLinksToHamtBucket:addLinksToHamtBucket$2}=hamtUtils,addLink$1=async(e,t)=>{if(!t.parentCid&&!t.parent)throw errCode(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(t.parentCid&&!src$1I.isCID(t.parentCid))throw errCode(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(t.parent||(log$N(`Loading parent node ${t.parentCid}`),t.parent=await e.ipld.get(t.parentCid)),!t.cid)throw errCode(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!t.name)throw errCode(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(src$1I.isCID(t.cid)||(t.cid=new src$1I(t.cid)),!t.size&&0!==t.size)throw errCode(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");return"hamt-sharded-directory"===src$1B.unmarshal(t.parent.Data).type?(log$N("Adding link to sharded directory"),addToShardedDirectory(e,t)):t.parent.Links.length>=t.shardSplitThreshold?(log$N("Converting directory to sharded directory"),convertToShardedDirectory(e,t)):(log$N(`Adding ${t.name} (${t.cid}) to regular directory`),addToDirectory(e,t))},convertToShardedDirectory=async(e,t)=>{const r=await createShard$1(e,t.parent.Links.map(e=>({name:e.Name,size:e.Tsize,cid:e.Hash})).concat({name:t.name,size:t.size,cid:t.cid}),t);return log$N(`Converted directory to sharded directory ${r.cid}`),r},addToDirectory=async(e,t)=>{let r=await DAGNode$b.rmLink(t.parent,t.name);r=await DAGNode$b.addLink(r,new DAGLink$5(t.name,t.size,t.cid));const n=src$4[t.format.toUpperCase().replace(/-/g,"_")],i=src.names[t.hashAlg];return{node:r,cid:await e.ipld.put(r,n,{cidVersion:t.cidVersion,hashAlg:i,hashOnly:!t.flush})}},addToShardedDirectory=async(e,t)=>{const{shard:r,path:n}=await addFileToShardedDirectory(e,t),i=await asyncIteratorLast(r.flush("",e.ipld)),o=t.parent.Links.find(e=>e.Name.substring(0,2)===n[0].prefix),s=i.node.Links.find(e=>e.Name.substring(0,2)===n[0].prefix);let a=t.parent;return o&&(a=await DAGNode$b.rmLink(t.parent,o.Name)),a=await DAGNode$b.addLink(a,s),updateHamtDirectory$1(e,a.Links,n[0].bucket,t)},addFileToShardedDirectory=async(e,t)=>{const r={name:t.name,cid:t.cid,size:t.size},n=await recreateHamtLevel$1(t.parent.Links),i=new dirSharded({root:!0,dir:!0,parent:null,parentKey:null,path:"",dirty:!0,flat:!1},t);i._bucket=n;const o=await n._findNewBucketAndPos(r.name),s=toBucketPath$1(o);s[0].node=t.parent;let a=0;for(;a<s.length;){let t=s[a];a++;let i=t.node.Links.find(e=>e.Name.substring(0,2)===t.prefix);if(!i){log$N(`Link ${t.prefix}${r.name} will be added`),a=s.length;break}if(i.Name===`${t.prefix}${r.name}`){log$N(`Link ${t.prefix}${r.name} will be replaced`),a=s.length;break}if(i.Name.length>2){log$N(`Link ${i.Name} will be replaced with a subshard`),a=s.length;break}log$N(`Found subshard ${t.prefix}`);const o=await e.ipld.get(i.Hash);if(!s[a]){log$N(`Loaded new subshard ${t.prefix}`),await recreateHamtLevel$1(o.Links,n,t.bucket,parseInt(t.prefix,16));const e=await n._findNewBucketAndPos(r.name);s.push({bucket:e.bucket,prefix:toPrefix$2(e.pos),node:o});break}const c=s[a];await addLinksToHamtBucket$2(o.Links,c.bucket,n),c.node=o}return await i._bucket.put(r.name,{size:r.size,cid:r.cid}),{shard:i,path:s}},toBucketPath$1=e=>{let t=e.bucket,r=e.pos,n=[{bucket:t,prefix:toPrefix$2(r)}];for(t=e.bucket._parent,r=e.bucket._posAtParent;t;)n.push({bucket:t,prefix:toPrefix$2(r)}),r=t._posAtParent,t=t._parent;return n.reverse(),n};var addLink_1$1=addLink$1;const log$O=src$1J("ipfs:mfs:utils:update-tree"),defaultOptions$b={shardSplitThreshold:1e3},updateTree=async(e,t,r)=>{r=Object.assign({},defaultOptions$b,r),log$O("Trail",t),t=t.slice().reverse();let n,i=0;for await(const o of e.ipld.getMany(t.map(e=>e.cid))){const s=t[i].cid,a=t[i].name;if(i++,!n){n={cid:s,name:a,size:o.size};continue}const c=await addLink_1$1(e,{parent:o,name:n.name,cid:n.cid,size:n.size,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,format:r.format,hashAlg:r.hashAlg,cidVersion:r.cidVersion});n={cid:c.cid,name:a,size:c.node.size}}return log$O(`Final CID ${n.cid}`),n.cid};var updateTree_1=updateTree;const log$P=src$1J("ipfs:mfs:mkdir"),{FILE_SEPARATOR:FILE_SEPARATOR$1}=constants$i,defaultOptions$c={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,format:"dag-pb",flush:!0};var mkdir=e=>(async function(t,r){if(r=applyDefaultOptions(r,defaultOptions$c),!t)throw new Error("no path given to Mkdir");if((t=t.trim())===FILE_SEPARATOR$1){if(r.parents)return;throw errCode(new Error(`cannot create directory '${FILE_SEPARATOR$1}': Already exists`),"ERR_INVALID_PATH")}if(t.substring(0,1)!==FILE_SEPARATOR$1)throw errCode(new Error("paths must start with a leading /"),"ERR_INVALID_PATH");log$P(`Creating ${t}`);const n=toPathComponents_1$1(t);if("ipfs"===n[0])throw errCode(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");let i,o=await withMfsRoot(e),s=[];const a=await createNode_1(e,"directory",r);for(let t=0;t<=n.length;t++){const c=n.slice(0,t),u=`/ipfs/${o}/${c.join("/")}`;try{if(i=await src$1H(u,e.ipld),log$P(`${u} existed`),log$P(`${u} had children ${i.node.Links.map(e=>e.Name)}`),t===n.length){if(r.parents)return;throw errCode(new Error("file already exists"),"ERR_ALREADY_EXISTS")}s.push({name:i.name,cid:i.cid})}catch(i){if("ERR_NOT_FOUND"!==i.code)throw i;if(t<n.length&&!r.parents)throw errCode(new Error(`Intermediate directory path ${u} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await addEmptyDir(e,c[c.length-1],a,s[s.length-1],s,r)}}const c=await updateTree_1(e,s,r);await updateMfsRoot_1(e,c)});const addEmptyDir=async(e,t,r,n,i,o)=>{log$P(`Adding empty dir called ${t} to ${n.cid}`);const s=await addLink_1$1(e,{parent:n.node,parentCid:n.cid,size:r.node.size,cid:r.cid,name:t,format:o.format,hashAlg:o.hashAlg,cidVersion:o.cidVersion});i[i.length-1].cid=s.cid,i.push({name:t,cid:r.cid})};async function toSources(e,t){Array.isArray(t[0])&&(t=t[0]);const r=t.filter(e=>"string"==typeof e).map(e=>e.trim());return{sources:await toMfsPath_1(e,r)}}var toSources_1=toSources;async function toSourcesAndDestination(e,t){const{sources:r,options:n}=await toSources_1(e,t);return{destination:r.pop(),sources:r,options:n}}var toSourcesAndDestination_1=toSourcesAndDestination;const log$Q=src$1J("ipfs:mfs:utils:to-trail"),toTrail=async(e,t)=>{log$Q(`Creating trail for path ${t}`);const r=[];for await(const n of src$1H.path(t,e.ipld))r.push({name:n.name,cid:n.cid,size:n.node.size,type:n.unixfs.type});return r};var toTrail_1=toTrail;const log$R=src$1J("ipfs:mfs:cp"),defaultOptions$d={parents:!1,flush:!0,format:"dag-pb",hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};var cp=e=>(async function(...t){const r=applyDefaultOptions(t,defaultOptions$d);let{sources:n,destination:i}=await toSourcesAndDestination_1(e,t);if(!n.length)throw errCode(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");if(!i)throw errCode(new Error("Please supply a destination"),"ERR_INVALID_PARAMS");r.parents=r.p||r.parents;const o=n.find(e=>!e.exists);if(o)throw errCode(new Error(`${o.path} does not exist`),"ERR_INVALID_PARAMS");const s=isDirectory(i);if(i.exists){if(log$R("Destination exists"),1===n.length&&!s)throw errCode(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(log$R("Destination does not exist"),n.length>1){if(!r.parents)throw errCode(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await mkdir(e)(i.path,r),i=await toMfsPath_1(e,i.path)}const a=isDirectory(i)?i.mfsPath:i.mfsDirectory,c=await toTrail_1(e,a);if(1===n.length){const t=n.pop(),o=s?t.name:i.name;return log$R(`Only one source, copying to destination ${s?"directory":"file"} ${o}`),copyToFile(e,t,o,c,r)}return log$R("Multiple sources, wrapping in a directory"),copyToDirectory(e,n,i,c,r)});const isDirectory=e=>e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory"),copyToFile=async(e,t,r,n,i)=>{let o=n.pop();o=await addSourceToParent(e,t,r,o,i),n.push(o);const s=await updateTree_1(e,n,i);await updateMfsRoot_1(e,s)},copyToDirectory=async(e,t,r,n,i)=>{for(let n=0;n<t.length;n++){const o=t[n];r=await addSourceToParent(e,o,o.name,r,i)}n[n.length-1]=r;const o=await updateTree_1(e,n,i);await updateMfsRoot_1(e,o)},addSourceToParent=async(e,t,r,n,i)=>{const o=await e.repo.blocks.get(t.cid),{node:s,cid:a}=await addLink_1$1(e,{parentCid:n.cid,size:o.data.length,cid:t.cid,name:r,format:i.format,hashAlg:i.hashAlg,cidVersion:i.cidVersion});return n.node=s,n.cid=a,n.size=s.size,n},{FILE_SEPARATOR:FILE_SEPARATOR$2}=constants$i,defaultOptions$e={};var flush$1=e=>(async function(t=FILE_SEPARATOR$2,r=defaultOptions$e){r=applyDefaultOptions(r,defaultOptions$e),await stat$2(e)(t,r)});const{DAGNode:DAGNode$c,DAGLink:DAGLink$6}=src$k,log$S=src$1J("ipfs:mfs:core:utils:remove-link"),{generatePath:generatePath$1,updateHamtDirectory:updateHamtDirectory$2}=hamtUtils,removeLink=async(e,t)=>{if(!t.parentCid&&!t.parent)throw errCode(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(t.parentCid&&!src$1I.isCID(t.parentCid))throw errCode(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");if(t.parent||(log$S(`Loading parent node ${t.parentCid}`),t.parent=await e.ipld.get(t.parentCid)),!t.name)throw errCode(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");return"hamt-sharded-directory"===src$1B.unmarshal(t.parent.Data).type?(log$S(`Removing ${t.name} from sharded directory`),removeFromShardedDirectory(e,t)):(log$S(`Removing link ${t.name} regular directory`),removeFromDirectory(e,t))},removeFromDirectory=async(e,t)=>{const r=src$4[t.format.toUpperCase().replace(/-/g,"_")],n=src.names[t.hashAlg],i=await DAGNode$c.rmLink(t.parent,t.name),o=await e.ipld.put(i,r,{cidVersion:t.cidVersion,hashAlg:n});return log$S(`Updated regular directory ${o}`),{node:i,cid:o}},removeFromShardedDirectory=async(e,t)=>{const{rootBucket:r,path:n}=await generatePath$1(e,t.name,t.parent);await r.del(t.name);const{node:i}=await updateShard(e,n,{name:t.name,cid:t.cid,size:t.size,hashAlg:t.hashAlg,format:t.format,cidVersion:t.cidVersion,flush:t.flush},t);return updateHamtDirectory$2(e,i.Links,r,t)},updateShard=async(e,t,r,n)=>{const{bucket:i,prefix:o,node:s}=t.pop(),a=s.Links.find(e=>e.Name.substring(0,2)===o);if(!a)throw errCode(new Error(`No link found with prefix ${o} for file ${r.name}`),"ERR_NOT_FOUND");if(a.Name===`${o}${r.name}`){log$S(`Removing existing link ${a.Name}`);const t=await DAGNode$c.rmLink(s,a.Name);return await i.del(r.name),updateHamtDirectory$2(e,t.Links,i,n)}log$S(`Descending into sub-shard ${a.Name} for ${o}${r.name}`);const c=await updateShard(e,t,r,n);let u=o;1===c.node.Links.length&&(log$S(`Removing subshard for ${o}`),c.cid=c.node.Links[0].Hash,c.node=c.node.Links[0],u=`${o}${c.node.Name.substring(2)}`),log$S(`Updating shard ${o} with name ${u}`);const f=DAGNode$c.isDAGNode(c.node)?c.node.size:c.node.Tsize;return updateShardParent(e,i,s,o,u,f,c.cid,n)},updateShardParent=async(e,t,r,n,i,o,s,a)=>(r=await DAGNode$c.rmLink(r,n),r=await DAGNode$c.addLink(r,new DAGLink$6(i,o,s)),updateHamtDirectory$2(e,r.Links,t,a));var removeLink_1=removeLink;const{FILE_SEPARATOR:FILE_SEPARATOR$3}=constants$i,defaultOptions$f={recursive:!1,cidVersion:0,hashAlg:"sha2-256",format:"dag-pb",flush:!0};var rm=e=>(async function(){const t=Array.from(arguments),{sources:r}=await toSources_1(e,t),n=applyDefaultOptions(t,defaultOptions$f);if(!r.length)throw errCode(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");r.forEach(e=>{if(e.path===FILE_SEPARATOR$3)throw errCode(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")});for(const t of r)await removePath(e,t.path,n)});const removePath=async(e,t,r)=>{const n=await toMfsPath_1(e,t),i=await toTrail_1(e,n.mfsPath),o=i.pop(),s=i[i.length-1];if(!s)throw errCode(new Error(`${t} does not exist`),"ERR_NOT_FOUND");if("directory"===o.type&&!r.recursive)throw errCode(new Error(`${t} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:a}=await removeLink_1(e,{parentCid:s.cid,name:o.name,format:r.format,hashAlg:r.hashAlg,cidVersion:r.cidVersion,flush:r.flush});s.cid=a;const c=await updateTree_1(e,i,r);await updateMfsRoot_1(e,c)},defaultOptions$g={parents:!1,recursive:!1,flush:!0,format:"dag-pb",hashAlg:"sha2-256",shardSplitThreshold:1e3};var mv=e=>(async function(...t){Array.isArray(t[0])&&(t=t[0].concat(t.slice(1)));const{sources:r}=await toSources_1(e,t),n=applyDefaultOptions(t,defaultOptions$g),i=r.map(e=>e.path).concat(n),o=r.slice(0,-1).map(e=>e.path).concat(Object.assign(n,{recursive:!0}));await cp(e).apply(null,i),await rm(e).apply(null,o)});const log$T=src$1J("ipfs:mfs:utils:to-async-iterator"),{MAX_CHUNK_SIZE:MAX_CHUNK_SIZE}=constants$i,toAsyncIterator=async e=>{if(!e)throw errCode(new Error("paths must start with a leading /"),"ERR_INVALID_PATH");if("string"==typeof e||e instanceof String)return log$T("Content was a path"),fs.createReadStream(e);if(e.length)return log$T("Content was array-like"),{[Symbol.asyncIterator]:async function*(){yield e}};if(e[Symbol.asyncIterator])return log$T("Content was an async iterator"),e;if(e[Symbol.iterator])return log$T("Content was an iterator"),e;if(commonjsGlobal.Blob&&e instanceof commonjsGlobal.Blob){log$T("Content was an HTML5 Blob");let t=0;const r={next:async()=>t>e.size?{done:!0}:new Promise((r,n)=>{const i=e.slice(t,MAX_CHUNK_SIZE);t+=MAX_CHUNK_SIZE;const o=new commonjsGlobal.FileReader,s=e=>{if(o.removeEventListener("loadend",s,!1),e.error)return n(e.error);r({done:!1,value:Buffer.from(o.result)})};o.addEventListener("loadend",s),o.readAsArrayBuffer(i)})};return{[Symbol.asyncIterator]:()=>r}}throw errCode(new Error(`Don't know how to convert ${e} into an async iterator`),"ERR_INVALID_PARAMS")};var toAsyncIterator_1=toAsyncIterator;const log$U=src$1J("ipfs:mfs:write"),{MAX_CHUNK_SIZE:MAX_CHUNK_SIZE$1}=constants$i,defaultOptions$h={offset:0,length:void 0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",format:"dag-pb",parents:!1,progress:()=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};var write_1=e=>(async function(t,r,n){let i,o,s;if(log$U("Hello world, writing",t,r,n),n=applyDefaultOptions(n,defaultOptions$h),log$U("Reading source, destination and parent"),await createLock().readLock(async()=>{i=await toAsyncIterator_1(r),o=await toMfsPath_1(e,t),s=await toMfsPath_1(e,o.mfsDirectory)})(),log$U("Read source, destination and parent"),!n.parents&&!s.exists)throw errCode(new Error("directory does not exist"),"ERR_NO_EXIST");if(!n.create&&!o.exists)throw errCode(new Error("file does not exist"),"ERR_NO_EXIST");return updateOrImport(e,t,i,o,n)});const updateOrImport=async(e,t,r,n,i)=>{const o=await write$2(e,r,n,i);await createLock().writeLock(async()=>{const r=toPathComponents_1$1(t),n=r.pop();let s=!1;try{await stat$2(e)(`/${r.join("/")}`,i),s=!0}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}s||await mkdir(e)(`/${r.join("/")}`,i);const a=await toMfsPath_1(e,t),c=await toTrail_1(e,a.mfsDirectory),u=c[c.length-1];if(!u.type.includes("directory"))throw errCode(new Error(`cannot write to ${u.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const f=await e.ipld.get(u.cid),l=await addLink_1$1(e,{parent:f,name:n,cid:o.cid,size:o.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,format:i.format,hashAlg:i.hashAlg,cidVersion:i.cidVersion});u.cid=l.cid;const d=await updateTree_1(e,c,i);await updateMfsRoot_1(e,d)})()},write$2=async(e,t,r,n)=>{r.exists?log$U(`Overwriting file ${r.cid} offset ${n.offset} length ${n.length}`):log$U(`Writing file offset ${n.offset} length ${n.length}`);const i=[];n.offset>0&&(r.unixfs&&r.unixfs.fileSize()>n.offset?(log$U(`Writing first ${n.offset} bytes of original file`),i.push(()=>r.content({offset:0,length:n.offset}))):(log$U(`Writing zeros for first ${n.offset} bytes`),i.push(asyncZeroes(n.offset)))),i.push(limitAsyncStreamBytes(t,n.length));const o=countBytesStreamed(catAsyncInterators(i),e=>{if(r.unixfs&&!n.truncate){const t=r.unixfs.fileSize();if(t>e)return log$U(`Writing last ${t-e} of ${t} bytes from original file starting at offset ${e}`),r.content({offset:e});log$U("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}});let s=await asyncIteratorLast(src$1F([{content:o}],e.ipld,{progress:n.progress,hashAlg:n.hashAlg,cidVersion:n.cidVersion,strategy:n.strategy,rawLeaves:n.rawLeaves,reduceSingleLeafToSelf:n.reduceSingleLeafToSelf,leafType:n.leafType}));return log$U(`Wrote ${s.cid}`),{cid:s.cid,size:s.size}},limitAsyncStreamBytes=(e,t)=>(async function*(){let r=0;for await(const n of e){if((r+=n.length)>t)return void(yield n.slice(0,t-r));yield n}}),asyncZeroes=(e,t=MAX_CHUNK_SIZE$1)=>{const r=Buffer.alloc(t,0);return limitAsyncStreamBytes({[Symbol.asyncIterator]:async function*(){for(;;)yield r.slice()}},e)},catAsyncInterators=async function*(e){for(let t=0;t<e.length;t++)for await(const r of e[t]())yield r},countBytesStreamed=async function*(e,t){let r=0;for await(const t of e)r+=t.length,yield t;for await(const e of t(r))r+=e.length,yield e},defaultOptions$i={offset:0,length:1/0};var read$2=e=>(function(t,r={}){return r=applyDefaultOptions(r,defaultOptions$i),{[Symbol.asyncIterator]:async function*(){const n=await toMfsPath_1(e,t),i=await src$1H(n.mfsPath,e.ipld);if("file"!==i.unixfs.type)throw errCode(new Error(`${t} was not a file`),"ERR_NOT_FILE");if(!i.content)throw errCode(new Error(`Could not load content stream from ${t}`),"ERR_NO_CONTENT");for await(const e of i.content({offset:r.offset,length:r.length}))yield e}}});const{FILE_SEPARATOR:FILE_SEPARATOR$4,FILE_TYPES:FILE_TYPES$1}=constants$i,defaultOptions$j={},toOutput=e=>{let t=0,r=e.node.size||e.node.length;return e.unixfs&&(r=e.unixfs.fileSize(),t=FILE_TYPES$1[e.unixfs.type]),{cid:e.cid,name:e.name,type:t,size:r}};var ls$1=e=>(async function*(t=FILE_SEPARATOR$4,r={}){"object"!=typeof t||t instanceof String||(r=t,t=FILE_SEPARATOR$4),r=applyDefaultOptions(r,defaultOptions$j);const n=await toMfsPath_1(e,t),i=await src$1H(n.mfsPath,e.ipld);if(i.unixfs&&i.unixfs.type.includes("directory"))for await(const e of i.content(r))yield toOutput(e);else yield toOutput(i)});const readOperations={stat:stat$2},writeOperations={cp:cp,flush:flush$1,mkdir:mkdir,mv:mv,rm:rm},unwrappedOperations={write:write_1,read:read$2,ls:ls$1},wrap=({options:e,mfs:t,operations:r,lock:n})=>{Object.keys(r).forEach(i=>{t[i]=n(r[i](e))})},defaultOptions$k={repoOwner:!0,ipld:null,repo:null};var core=e=>{const{repoOwner:t}=Object.assign({},defaultOptions$k||{},e);assert$t(e.ipld,"MFS requires an IPLD instance"),assert$t(e.blocks,"MFS requires an BlockStore instance"),assert$t(e.datastore,"MFS requires a DataStore instance"),e.repo={blocks:{get:promisifyEs6(e.blocks.get,{context:e.blocks})},datastore:{open:promisifyEs6(e.datastore.open,{context:e.datastore}),get:promisifyEs6(e.datastore.get,{context:e.datastore}),put:promisifyEs6(e.datastore.put,{context:e.datastore})}};const r=createLock(t),n={};return wrap({options:e,mfs:n,operations:readOperations,lock:e=>r.readLock(e)}),wrap({options:e,mfs:n,operations:writeOperations,lock:e=>r.writeLock(e)}),Object.keys(unwrappedOperations).forEach(t=>{n[t]=unwrappedOperations[t](e)}),n},core$1=core,stream$4=Stream$1;function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty$8(e,t,r[t])})}return e}function _defineProperty$8(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Buffer$J=buffer$1.Buffer,inspect$4=util$j.inspect,custom$5=inspect$4&&inspect$4.custom||"inspect";function copyBuffer$4(e,t,r){Buffer$J.prototype.copy.call(e,t,r)}var buffer_list$4=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},t.concat=function(e){if(0===this.length)return Buffer$J.alloc(0);for(var t=Buffer$J.allocUnsafe(e>>>0),r=this.head,n=0;r;)copyBuffer$4(r.data,t,n),n+=r.data.length,r=r.next;return t},t.consume=function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n},t._getBuffer=function(e){var t=Buffer$J.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t},t[custom$5]=function(e,t){return inspect$4(this,_objectSpread$4({},t,{depth:0,customInspect:!1}))},e}();function destroy$4(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||process.nextTick(emitErrorNT$4,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(process.nextTick(emitErrorAndCloseNT$4,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t?(process.nextTick(emitCloseNT$4,r),t(e)):process.nextTick(emitCloseNT$4,r)}),this)}function emitErrorAndCloseNT$4(e,t){emitErrorNT$4(e,t),emitCloseNT$4(e)}function emitCloseNT$4(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function undestroy$4(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT$4(e,t){e.emit("error",t)}var destroy_1$4={destroy:destroy$4,undestroy:undestroy$4};const codes$a={};function createErrorType$4(e,t,r){r||(r=Error);class n extends r{constructor(e,r,n){super(function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(e,r,n))}}n.prototype.name=r.name,n.prototype.code=e,codes$a[e]=n}function oneOf$4(e,t){if(Array.isArray(e)){const r=e.length;return e=e.map(e=>String(e)),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}function startsWith$4(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function endsWith$4(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function includes$5(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}createErrorType$4("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),createErrorType$4("ERR_INVALID_ARG_TYPE",function(e,t,r){let n,i;if("string"==typeof t&&startsWith$4(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",endsWith$4(e," argument"))i=`The ${e} ${n} ${oneOf$4(t,"type")}`;else{i=`The "${e}" ${includes$5(e,".")?"property":"argument"} ${n} ${oneOf$4(t,"type")}`}return i+=`. Received type ${typeof r}`},TypeError),createErrorType$4("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType$4("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),createErrorType$4("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType$4("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),createErrorType$4("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType$4("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType$4("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType$4("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType$4("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),createErrorType$4("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");var codes_1$4=codes$a,errors$e={codes:codes_1$4},ERR_INVALID_OPT_VALUE$4=errors$e.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom$4(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function getHighWaterMark$c(e,t,r,n){var i=highWaterMarkFrom$4(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new ERR_INVALID_OPT_VALUE$4(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}var state$6={getHighWaterMark:getHighWaterMark$c},experimentalWarnings$4=new Set;function emitExperimentalWarning$8(e){if(!experimentalWarnings$4.has(e)){var t=e+" is an experimental feature. This feature could change at any time";experimentalWarnings$4.add(e),process.emitWarning(t,"ExperimentalWarning")}}function noop$p(){}var Duplex$d,emitExperimentalWarning_1$4=process.emitWarning?emitExperimentalWarning$8:noop$p,experimentalWarning$4={emitExperimentalWarning:emitExperimentalWarning_1$4},_stream_writable$4=Writable$4;function CorkedRequest$4(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish$4(t,e)}}Writable$4.WritableState=WritableState$4;var internalUtil$4={deprecate:node$4},Buffer$K=buffer$1.Buffer,OurUint8Array$8=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer$8(e){return Buffer$K.from(e)}function _isUint8Array$8(e){return Buffer$K.isBuffer(e)||e instanceof OurUint8Array$8}var realHasInstance$4,getHighWaterMark$d=state$6.getHighWaterMark,_require$codes$g=errors$e.codes,ERR_INVALID_ARG_TYPE$8=_require$codes$g.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED$c=_require$codes$g.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$8=_require$codes$g.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE$4=_require$codes$g.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED$8=_require$codes$g.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES$4=_require$codes$g.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END$4=_require$codes$g.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING$4=_require$codes$g.ERR_UNKNOWN_ENCODING;function nop$4(){}function WritableState$4(e,t,r){Duplex$d=Duplex$d||_stream_duplex$4,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$d),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=getHighWaterMark$d(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite$4(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest$4(this)}function Writable$4(e){var t=this instanceof(Duplex$d=Duplex$d||_stream_duplex$4);if(!t&&!realHasInstance$4.call(Writable$4,this))return new Writable$4(e);this._writableState=new WritableState$4(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),stream$4.call(this)}function writeAfterEnd$4(e,t){var r=new ERR_STREAM_WRITE_AFTER_END$4;e.emit("error",r),process.nextTick(t,r)}function validChunk$4(e,t,r,n){var i;return null===r?i=new ERR_STREAM_NULL_VALUES$4:"string"==typeof r||t.objectMode||(i=new ERR_INVALID_ARG_TYPE$8("chunk",["string","Buffer"],r)),!i||(e.emit("error",i),process.nextTick(n,i),!1)}function decodeChunk$4(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer$K.from(t,r)),t}function writeOrBuffer$4(e,t,r,n,i,o){if(!r){var s=decodeChunk$4(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite$4(e,t,!1,a,n,i,o);return c}function doWrite$4(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new ERR_STREAM_DESTROYED$8("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function onwriteError$4(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(finishMaybe$4,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),finishMaybe$4(e,t))}function onwriteStateUpdate$4(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite$4(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new ERR_MULTIPLE_CALLBACK$8;if(onwriteStateUpdate$4(r),t)onwriteError$4(e,r,n,t,i);else{var o=needFinish$4(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer$4(e,r),n?process.nextTick(afterWrite$4,e,r,o,i):afterWrite$4(e,r,o,i)}}function afterWrite$4(e,t,r,n){r||onwriteDrain$4(e,t),t.pendingcb--,n(),finishMaybe$4(e,t)}function onwriteDrain$4(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer$4(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,doWrite$4(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest$4(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,f=r.callback;if(doWrite$4(e,t,!1,t.objectMode?1:c.length,c,u,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish$4(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal$4(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),finishMaybe$4(e,t)})}function prefinish$8(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(callFinal$4,e,t)))}function finishMaybe$4(e,t){var r=needFinish$4(t);return r&&(prefinish$8(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function endWritable$4(e,t,r){t.ending=!0,finishMaybe$4(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish$4(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}inherits(Writable$4,stream$4),WritableState$4.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState$4.prototype,"buffer",{get:internalUtil$4.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance$4=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable$4,Symbol.hasInstance,{value:function(e){return!!realHasInstance$4.call(this,e)||this===Writable$4&&(e&&e._writableState instanceof WritableState$4)}})):realHasInstance$4=function(e){return e instanceof this},Writable$4.prototype.pipe=function(){this.emit("error",new ERR_STREAM_CANNOT_PIPE$4)},Writable$4.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&_isUint8Array$8(e);return o&&!Buffer$K.isBuffer(e)&&(e=_uint8ArrayToBuffer$8(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=nop$4),n.ending?writeAfterEnd$4(this,r):(o||validChunk$4(this,n,e,r))&&(n.pendingcb++,i=writeOrBuffer$4(this,n,o,e,t,r)),i},Writable$4.prototype.cork=function(){this._writableState.corked++},Writable$4.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||clearBuffer$4(this,e))},Writable$4.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING$4(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable$4.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable$4.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable$4.prototype._write=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED$c("_write()"))},Writable$4.prototype._writev=null,Writable$4.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||endWritable$4(this,n,r),this},Object.defineProperty(Writable$4.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable$4.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable$4.prototype.destroy=destroy_1$4.destroy,Writable$4.prototype._undestroy=destroy_1$4.undestroy,Writable$4.prototype._destroy=function(e,t){t(e)};var objectKeys$4=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},_stream_duplex$4=Duplex$e;inherits(Duplex$e,_stream_readable$4);for(var keys$9=objectKeys$4(_stream_writable$4.prototype),v$6=0;v$6<keys$9.length;v$6++){var method$4=keys$9[v$6];Duplex$e.prototype[method$4]||(Duplex$e.prototype[method$4]=_stream_writable$4.prototype[method$4])}function Duplex$e(e){if(!(this instanceof Duplex$e))return new Duplex$e(e);_stream_readable$4.call(this,e),_stream_writable$4.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend$4)))}function onend$4(){this._writableState.ended||process.nextTick(onEndNT$4,this)}function onEndNT$4(e){e.end()}Object.defineProperty(Duplex$e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex$e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex$e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex$e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var ERR_STREAM_PREMATURE_CLOSE$4=errors$e.codes.ERR_STREAM_PREMATURE_CLOSE;function once$b(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function noop$q(){}function isRequest$9(e){return e.setHeader&&"function"==typeof e.abort}function eos$8(e,t,r){if("function"==typeof t)return eos$8(e,null,t);t||(t={}),r=once$b(r||noop$q);var n=t.readable||!1!==t.readable&&e.readable,i=t.writable||!1!==t.writable&&e.writable,o=function(){e.writable||a()},s=e._writableState&&e._writableState.finished,a=function(){i=!1,s=!0,n||r.call(e)},c=e._readableState&&e._readableState.endEmitted,u=function(){n=!1,c=!0,i||r.call(e)},f=function(t){r.call(e,t)},l=function(){var t;return n&&!c?(e._readableState&&e._readableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE$4),r.call(e,t)):i&&!s?(e._writableState&&e._writableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE$4),r.call(e,t)):void 0},d=function(){e.req.on("finish",a)};return isRequest$9(e)?(e.on("complete",a),e.on("abort",l),e.req?d():e.on("request",d)):i&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",a),!1!==t.error&&e.on("error",f),e.on("close",l),function(){e.removeListener("complete",a),e.removeListener("abort",l),e.removeListener("request",d),e.req&&e.req.removeListener("finish",a),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",a),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",l)}}var _Object$setPrototypeO$4,endOfStream$4=eos$8;function _defineProperty$9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kLastResolve$4=Symbol("lastResolve"),kLastReject$4=Symbol("lastReject"),kError$5=Symbol("error"),kEnded$4=Symbol("ended"),kLastPromise$4=Symbol("lastPromise"),kHandlePromise$4=Symbol("handlePromise"),kStream$4=Symbol("stream");function createIterResult$4(e,t){return{value:e,done:t}}function readAndResolve$4(e){var t=e[kLastResolve$4];if(null!==t){var r=e[kStream$4].read();null!==r&&(e[kLastPromise$4]=null,e[kLastResolve$4]=null,e[kLastReject$4]=null,t(createIterResult$4(r,!1)))}}function onReadable$4(e){process.nextTick(readAndResolve$4,e)}function wrapForNext$4(e,t){return function(r,n){e.then(function(){t[kEnded$4]?r(createIterResult$4(void 0,!0)):t[kHandlePromise$4](r,n)},n)}}var Duplex$f,AsyncIteratorPrototype$4=Object.getPrototypeOf(function(){}),ReadableStreamAsyncIteratorPrototype$4=Object.setPrototypeOf((_defineProperty$9(_Object$setPrototypeO$4={get stream(){return this[kStream$4]},next:function(){var e=this,t=this[kError$5];if(null!==t)return Promise.reject(t);if(this[kEnded$4])return Promise.resolve(createIterResult$4(void 0,!0));if(this[kStream$4].destroyed)return new Promise(function(t,r){process.nextTick(function(){e[kError$5]?r(e[kError$5]):t(createIterResult$4(void 0,!0))})});var r,n=this[kLastPromise$4];if(n)r=new Promise(wrapForNext$4(n,this));else{var i=this[kStream$4].read();if(null!==i)return Promise.resolve(createIterResult$4(i,!1));r=new Promise(this[kHandlePromise$4])}return this[kLastPromise$4]=r,r}},Symbol.asyncIterator,function(){return this}),_defineProperty$9(_Object$setPrototypeO$4,"return",function(){var e=this;return new Promise(function(t,r){e[kStream$4].destroy(null,function(e){e?r(e):t(createIterResult$4(void 0,!0))})})}),_Object$setPrototypeO$4),AsyncIteratorPrototype$4),createReadableStreamAsyncIterator$8=function(e){var t,r=Object.create(ReadableStreamAsyncIteratorPrototype$4,(_defineProperty$9(t={},kStream$4,{value:e,writable:!0}),_defineProperty$9(t,kLastResolve$4,{value:null,writable:!0}),_defineProperty$9(t,kLastReject$4,{value:null,writable:!0}),_defineProperty$9(t,kError$5,{value:null,writable:!0}),_defineProperty$9(t,kEnded$4,{value:e._readableState.endEmitted,writable:!0}),_defineProperty$9(t,kHandlePromise$4,{value:function(e,t){var n=r[kStream$4].read();n?(r[kLastPromise$4]=null,r[kLastResolve$4]=null,r[kLastReject$4]=null,e(createIterResult$4(n,!1))):(r[kLastResolve$4]=e,r[kLastReject$4]=t)},writable:!0}),t));return r[kLastPromise$4]=null,endOfStream$4(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[kLastReject$4];return null!==t&&(r[kLastPromise$4]=null,r[kLastResolve$4]=null,r[kLastReject$4]=null,t(e)),void(r[kError$5]=e)}var n=r[kLastResolve$4];null!==n&&(r[kLastPromise$4]=null,r[kLastResolve$4]=null,r[kLastReject$4]=null,n(createIterResult$4(void 0,!0))),r[kEnded$4]=!0}),e.on("readable",onReadable$4.bind(null,r)),r},async_iterator$4=createReadableStreamAsyncIterator$8,_stream_readable$4=Readable$7;Readable$7.ReadableState=ReadableState$4;var debug$f,EE$d=events$1.EventEmitter,EElistenerCount$4=function(e,t){return e.listeners(t).length},Buffer$L=buffer$1.Buffer,OurUint8Array$9=commonjsGlobal.Uint8Array||function(){};function _uint8ArrayToBuffer$9(e){return Buffer$L.from(e)}function _isUint8Array$9(e){return Buffer$L.isBuffer(e)||e instanceof OurUint8Array$9}debug$f=util$j&&util$j.debuglog?util$j.debuglog("stream"):function(){};var StringDecoder$5,createReadableStreamAsyncIterator$9,getHighWaterMark$e=state$6.getHighWaterMark,_require$codes$h=errors$e.codes,ERR_INVALID_ARG_TYPE$9=_require$codes$h.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF$4=_require$codes$h.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED$d=_require$codes$h.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT$4=_require$codes$h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,emitExperimentalWarning$9=experimentalWarning$4.emitExperimentalWarning;inherits(Readable$7,stream$4);var kProxyEvents$4=["error","close","destroy","pause","resume"];function prependListener$4(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState$4(e,t,r){Duplex$f=Duplex$f||_stream_duplex$4,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$f),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=getHighWaterMark$e(this,e,"readableHighWaterMark",r),this.buffer=new buffer_list$4,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder$5||(StringDecoder$5=string_decoder.StringDecoder),this.decoder=new StringDecoder$5(e.encoding),this.encoding=e.encoding)}function Readable$7(e){if(Duplex$f=Duplex$f||_stream_duplex$4,!(this instanceof Readable$7))return new Readable$7(e);var t=this instanceof Duplex$f;this._readableState=new ReadableState$4(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),stream$4.call(this)}function readableAddChunk$4(e,t,r,n,i){debug$f("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,onEofChunk$4(e,s);else if(i||(o=chunkInvalid$4(s,t)),o)e.emit("error",o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===Buffer$L.prototype||(t=_uint8ArrayToBuffer$9(t)),n)s.endEmitted?e.emit("error",new ERR_STREAM_UNSHIFT_AFTER_END_EVENT$4):addChunk$4(e,s,t,!0);else if(s.ended)e.emit("error",new ERR_STREAM_PUSH_AFTER_EOF$4);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?addChunk$4(e,s,t,!1):maybeReadMore$4(e,s)):addChunk$4(e,s,t,!1)}else n||(s.reading=!1,maybeReadMore$4(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function addChunk$4(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable$4(e)),maybeReadMore$4(e,t)}function chunkInvalid$4(e,t){var r;return _isUint8Array$9(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new ERR_INVALID_ARG_TYPE$9("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(Readable$7.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable$7.prototype.destroy=destroy_1$4.destroy,Readable$7.prototype._undestroy=destroy_1$4.undestroy,Readable$7.prototype._destroy=function(e,t){t(e)},Readable$7.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Buffer$L.from(e,t),t=""),r=!0),readableAddChunk$4(this,e,t,!1,r)},Readable$7.prototype.unshift=function(e){return readableAddChunk$4(this,e,null,!0,!1)},Readable$7.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable$7.prototype.setEncoding=function(e){return StringDecoder$5||(StringDecoder$5=string_decoder.StringDecoder),this._readableState.decoder=new StringDecoder$5(e),this._readableState.encoding=this._readableState.decoder.encoding,this};var MAX_HWM$4=8388608;function computeNewHighWaterMark$4(e){return e>=MAX_HWM$4?e=MAX_HWM$4:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead$4(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark$4(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk$4(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?emitReadable$4(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,emitReadable_$4(e)))}}function emitReadable$4(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug$f("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(emitReadable_$4,e))}function emitReadable_$4(e){var t=e._readableState;debug$f("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,flow$4(e)}function maybeReadMore$4(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(maybeReadMore_$4,e,t))}function maybeReadMore_$4(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(debug$f("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function pipeOnDrain$4(e){return function(){var t=e._readableState;debug$f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount$4(e,"data")&&(t.flowing=!0,flow$4(e))}}function updateReadableListening$4(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function nReadingNextTick$4(e){debug$f("readable nexttick read 0"),e.read(0)}function resume$4(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(resume_$4,e,t))}function resume_$4(e,t){debug$f("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),flow$4(e),t.flowing&&!t.reading&&e.read(0)}function flow$4(e){var t=e._readableState;for(debug$f("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList$4(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function endReadable$4(e){var t=e._readableState;debug$f("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(endReadableNT$4,t,e))}function endReadableNT$4(e,t){debug$f("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf$5(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Readable$7.prototype.read=function(e){debug$f("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return debug$f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable$4(this):emitReadable$4(this),null;if(0===(e=howMuchToRead$4(e,t))&&t.ended)return 0===t.length&&endReadable$4(this),null;var n,i=t.needReadable;return debug$f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&debug$f("length less than watermark",i=!0),t.ended||t.reading?debug$f("reading or ended",i=!1):i&&(debug$f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead$4(r,t))),null===(n=e>0?fromList$4(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable$4(this)),null!==n&&this.emit("data",n),n},Readable$7.prototype._read=function(e){this.emit("error",new ERR_METHOD_NOT_IMPLEMENTED$d("_read()"))},Readable$7.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,debug$f("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?s:h;function o(t,i){debug$f("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,debug$f("cleanup"),e.removeListener("close",l),e.removeListener("finish",d),e.removeListener("drain",a),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",h),r.removeListener("data",u),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||a())}function s(){debug$f("onend"),e.end()}n.endEmitted?process.nextTick(i):r.once("end",i),e.on("unpipe",o);var a=pipeOnDrain$4(r);e.on("drain",a);var c=!1;function u(t){debug$f("ondata");var i=e.write(t);debug$f("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf$5(n.pipes,e))&&!c&&(debug$f("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(t){debug$f("onerror",t),h(),e.removeListener("error",f),0===EElistenerCount$4(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",d),h()}function d(){debug$f("onfinish"),e.removeListener("close",l),h()}function h(){debug$f("unpipe"),r.unpipe(e)}return r.on("data",u),prependListener$4(e,"error",f),e.once("close",l),e.once("finish",d),e.emit("pipe",r),n.flowing||(debug$f("pipe resume"),r.resume()),e},Readable$7.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=indexOf$5(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Readable$7.prototype.on=function(e,t){var r=stream$4.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,debug$f("on readable",n.length,n.reading),n.length?emitReadable$4(this):n.reading||process.nextTick(nReadingNextTick$4,this))),r},Readable$7.prototype.addListener=Readable$7.prototype.on,Readable$7.prototype.removeListener=function(e,t){var r=stream$4.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(updateReadableListening$4,this),r},Readable$7.prototype.removeAllListeners=function(e){var t=stream$4.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(updateReadableListening$4,this),t},Readable$7.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug$f("resume"),e.flowing=!e.readableListening,resume$4(this,e)),e.paused=!1,this},Readable$7.prototype.pause=function(){return debug$f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug$f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable$7.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(debug$f("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(debug$f("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<kProxyEvents$4.length;o++)e.on(kProxyEvents$4[o],this.emit.bind(this,kProxyEvents$4[o]));return this._read=function(t){debug$f("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(Readable$7.prototype[Symbol.asyncIterator]=function(){return emitExperimentalWarning$9("Readable[Symbol.asyncIterator]"),void 0===createReadableStreamAsyncIterator$9&&(createReadableStreamAsyncIterator$9=async_iterator$4),createReadableStreamAsyncIterator$9(this)}),Object.defineProperty(Readable$7.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable$7.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable$7.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),Readable$7._fromList=fromList$4,Object.defineProperty(Readable$7.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});var _stream_transform$4=Transform$6,_require$codes$i=errors$e.codes,ERR_METHOD_NOT_IMPLEMENTED$e=_require$codes$i.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$9=_require$codes$i.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING$4=_require$codes$i.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0$4=_require$codes$i.ERR_TRANSFORM_WITH_LENGTH_0;function afterTransform$4(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new ERR_MULTIPLE_CALLBACK$9);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform$6(e){if(!(this instanceof Transform$6))return new Transform$6(e);_stream_duplex$4.call(this,e),this._transformState={afterTransform:afterTransform$4.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish$9)}function prefinish$9(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?done$5(this,null,null):this._flush(function(t,r){done$5(e,t,r)})}function done$5(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0$4;if(e._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING$4;return e.push(null)}inherits(Transform$6,_stream_duplex$4),Transform$6.prototype.push=function(e,t){return this._transformState.needTransform=!1,_stream_duplex$4.prototype.push.call(this,e,t)},Transform$6.prototype._transform=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED$e("_transform()"))},Transform$6.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform$6.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},Transform$6.prototype._destroy=function(e,t){_stream_duplex$4.prototype._destroy.call(this,e,function(e){t(e)})};var eos$9,_stream_passthrough$4=PassThrough$5;function PassThrough$5(e){if(!(this instanceof PassThrough$5))return new PassThrough$5(e);_stream_transform$4.call(this,e)}function once$c(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}inherits(PassThrough$5,_stream_transform$4),PassThrough$5.prototype._transform=function(e,t,r){r(null,e)};var _require$codes$j=errors$e.codes,ERR_MISSING_ARGS$4=_require$codes$j.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED$9=_require$codes$j.ERR_STREAM_DESTROYED;function noop$r(e){if(e)throw e}function isRequest$a(e){return e.setHeader&&"function"==typeof e.abort}function destroyer$4(e,t,r,n){n=once$c(n);var i=!1;e.on("close",function(){i=!0}),void 0===eos$9&&(eos$9=endOfStream$4),eos$9(e,{readable:t,writable:r},function(e){if(e)return n(e);i=!0,n()});var o=!1;return function(t){if(!i&&!o)return o=!0,isRequest$a(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new ERR_STREAM_DESTROYED$9("pipe"))}}function call$4(e){e()}function pipe$5(e,t){return e.pipe(t)}function popCallback$4(e){return e.length?"function"!=typeof e[e.length-1]?noop$r:e.pop():noop$r}function pipeline$4(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=popCallback$4(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new ERR_MISSING_ARGS$4("streams");var o=t.map(function(e,r){var s=r<t.length-1;return destroyer$4(e,s,r>0,function(e){n||(n=e),e&&o.forEach(call$4),s||(o.forEach(call$4),i(n))})});return t.reduce(pipe$5)}var pipeline_1$4=pipeline$4,readable$4=createCommonjsModule(function(e,t){"disable"===process.env.READABLE_STREAM&&Stream$1?(e.exports=Stream$1.Readable,Object.assign(e.exports,Stream$1),e.exports.Stream=Stream$1):((t=e.exports=_stream_readable$4).Stream=Stream$1||t,t.Readable=t,t.Writable=_stream_writable$4,t.Duplex=_stream_duplex$4,t.Transform=_stream_transform$4,t.PassThrough=_stream_passthrough$4,t.finished=endOfStream$4,t.pipeline=pipeline_1$4)}),readable_1$4=readable$4.Stream,readable_2$4=readable$4.Readable,readable_3$4=readable$4.Writable,readable_4$4=readable$4.Duplex,readable_5$4=readable$4.Transform,readable_6$4=readable$4.PassThrough,readable_7$4=readable$4.finished,readable_8$4=readable$4.pipeline;function _extends$1(){return(_extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function asyncGeneratorStep(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function s(e){asyncGeneratorStep(o,n,i,s,a,"next",e)}function a(e){asyncGeneratorStep(o,n,i,s,a,"throw",e)}s(void 0)})}}const Readable$8=readable$4.Readable,getSymbol="function"==typeof Symbol?e=>{const t=Symbol[e];return void 0!==t?t:`@@${e}`}:e=>`@@${e}`,$$asyncIterator=asyncIteratorToStream.$$asyncIterator=getSymbol("asyncIterator"),$$iterator=asyncIteratorToStream.$$iterator=getSymbol("iterator"),resolveToIterator=e=>{let t;return"function"==typeof(t=e[$$asyncIterator])?t.call(e):"function"==typeof(t=e[$$iterator])?t.call(e):e};function asyncIteratorToStream(e,t){if("function"==typeof e)return function(){return asyncIteratorToStream(e.apply(this,arguments),t)};const r=e.then;if("function"==typeof r)return r.call(e,e=>asyncIteratorToStream(e,t));const n=resolveToIterator(e),i="return"in n,o=t instanceof Readable$8?t:new Readable$8(t);var s;i&&(o._destroy=(s=_asyncToGenerator(function*(e,t){try{yield null!=e?n.throw(e):n.return()}catch(e){return t(e)}t(e)}),function(e,t){return s.apply(this,arguments)}));let a=!1;var c;return o._read=(c=_asyncToGenerator(function*(e){if(!a){a=!0;try{let t;do{let r=n.next(e);if("function"==typeof r.then)r=yield r;else for(;!r.done&&null!=(t=r.value)&&"function"==typeof t.then;){try{t=yield t}catch(e){r=n.throw(e);continue}r=n.next(t)}if(r.done)return o.push(null);t=r.value}while(void 0===t||o.push(t))}catch(e){process.nextTick(o.emit.bind(o,"error",e))}finally{a=!1}}}),function(e){return c.apply(this,arguments)}),o}var dist$4=asyncIteratorToStream;asyncIteratorToStream.obj=(e,t)=>asyncIteratorToStream(e,_extends$1({objectMode:!0},t));const toArray$4=async e=>{const t=[];for await(const r of e)t.push(r);return t};var asyncIteratorAll$1=toArray$4;const PassThrough$6=Stream$1.PassThrough,mapLsFile=(e={})=>{const t=e.long||e.l;return r=>({hash:t?r.cid.toBaseEncodedString(e.cidBase):"",name:r.name,type:t?r.type:0,size:t&&r.size||0})};var filesMfs=e=>{const t=core$1({ipld:e._ipld,blocks:e._blockService,datastore:e._repo.root,repoOwner:e._options.repoOwner});return{cp:callbackify_1.variadic(t.cp),flush:callbackify_1.variadic(t.flush),ls:callbackify_1.variadic(async(e,r={})=>{return(await asyncIteratorAll$1(t.ls(e,r))).map(mapLsFile(r))}),lsReadableStream:(e,r={})=>{const n=dist$4.obj(t.ls(e,r)),i=new PassThrough$6({objectMode:!0});return n.on("data",e=>{i.write(mapLsFile(r)(e))}),n.on("error",e=>{i.destroy(e)}),n.on("end",(e,t,n)=>{e&&(e=mapLsFile(r)(e)),i.end(e,t,n)}),i},lsPullStream:(e,r={})=>pull(asyncIteratorToPullStream.source(t.ls(e,r)),map$3(mapLsFile(r))),mkdir:callbackify_1.variadic(t.mkdir),mv:callbackify_1.variadic(t.mv),read:callbackify_1(async(e,r={})=>Buffer.concat(await asyncIteratorAll$1(t.read(e,r)))),readPullStream:(e,r={})=>asyncIteratorToPullStream.source(t.read(e,r)),readReadableStream:(e,r={})=>dist$4(t.read(e,r)),rm:callbackify_1.variadic(t.rm),stat:callbackify_1(async(e,r={})=>{const n=await t.stat(e,r);return n.hash=n.cid.toBaseEncodedString(r&&r.cidBase),delete n.cid,n}),write:callbackify_1.variadic(async(e,r,n={})=>{isPullStream.isSource(r)&&(r=pullStreamToAsyncIterator(r)),await t.write(e,r,n)})}},isNumeric$5=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil$4=Math.ceil,mathfloor$4=Math.floor,bignumberError$4="[BigNumber Error] ",tooManyDigits$4=bignumberError$4+"Number primitive has more than 15 significant digits: ",BASE$4=1e14,LOG_BASE$4=14,MAX_SAFE_INTEGER$7=9007199254740991,POWS_TEN$4=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE$4=1e7,MAX$5=1e9;function clone$a(e){var t,r,n,i,o,s,a,c,u,f=E.prototype={constructor:E,toString:null,valueOf:null},l=new E(1),d=20,h=4,p=-7,b=21,m=-1e7,g=1e7,y=!1,v=1,_=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},S="0123456789abcdefghijklmnopqrstuvwxyz";function E(e,t){var i,o,s,a,c,u,f,l,p=this;if(!(p instanceof E))return new E(e,t);if(null==t){if(e&&!0===e._isBigNumber)return p.s=e.s,void(!e.c||e.e>g?p.c=p.e=null:e.e<m?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,c=e;c>=10;c/=10,a++);return void(a>g?p.c=p.e=null:(p.e=a,p.c=[e]))}l=String(e)}else{if(!isNumeric$5.test(l=String(e)))return n(p,l,u);p.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}(a=l.indexOf("."))>-1&&(l=l.replace(".","")),(c=l.search(/e/i))>0?(a<0&&(a=c),a+=+l.slice(c+1),l=l.substring(0,c)):a<0&&(a=l.length)}else{if(intCheck$4(t,2,S.length,"Base"),10==t)return k(p=new E(e),d+p.e+1,h);if(l=String(e),u="number"==typeof e){if(0*e!=0)return n(p,l,u,t);if(p.s=1/e<0?(l=l.slice(1),-1):1,E.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits$4+e)}else p.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(i=S.slice(0,t),a=c=0,f=l.length;c<f;c++)if(i.indexOf(o=l.charAt(c))<0){if("."==o){if(c>a){a=f;continue}}else if(!s&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){s=!0,c=-1,a=0;continue}return n(p,String(e),u,t)}u=!1,(a=(l=r(l,t,10,p.s)).indexOf("."))>-1?l=l.replace(".",""):a=l.length}for(c=0;48===l.charCodeAt(c);c++);for(f=l.length;48===l.charCodeAt(--f););if(l=l.slice(c,++f)){if(f-=c,u&&E.DEBUG&&f>15&&(e>MAX_SAFE_INTEGER$7||e!==mathfloor$4(e)))throw Error(tooManyDigits$4+p.s*e);if((a=a-c-1)>g)p.c=p.e=null;else if(a<m)p.c=[p.e=0];else{if(p.e=a,p.c=[],c=(a+1)%LOG_BASE$4,a<0&&(c+=LOG_BASE$4),c<f){for(c&&p.c.push(+l.slice(0,c)),f-=LOG_BASE$4;c<f;)p.c.push(+l.slice(c,c+=LOG_BASE$4));c=LOG_BASE$4-(l=l.slice(c)).length}else c-=f;for(;c--;l+="0");p.c.push(+l)}}else p.c=[p.e=0]}function w(e,t,r,n){var i,o,s,a,c;if(null==r?r=h:intCheck$4(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)c=coeffToString$4(e.c),c=1==n||2==n&&(s<=p||s>=b)?toExponential$4(c,s):toFixedPoint$4(c,s,"0");else if(o=(e=k(new E(e),t,r)).e,a=(c=coeffToString$4(e.c)).length,1==n||2==n&&(t<=o||o<=p)){for(;a<t;c+="0",a++);c=toExponential$4(c,o)}else if(t-=s,c=toFixedPoint$4(c,o,"0"),o+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=o-a)>0)for(o+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function C(e,t){for(var r,n=1,i=new E(e[0]);n<e.length;n++){if(!(r=new E(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function A(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*LOG_BASE$4-1)>g?e.c=e.e=null:r<m?e.c=[e.e=0]:(e.e=r,e.c=t),e}function k(e,t,r,n){var i,o,s,a,c,u,f,l=e.c,d=POWS_TEN$4;if(l){e:{for(i=1,a=l[0];a>=10;a/=10,i++);if((o=t-i)<0)o+=LOG_BASE$4,s=t,f=(c=l[u=0])/d[i-s-1]%10|0;else if((u=mathceil$4((o+1)/LOG_BASE$4))>=l.length){if(!n)break e;for(;l.length<=u;l.push(0));c=f=0,i=1,s=(o%=LOG_BASE$4)-LOG_BASE$4+1}else{for(c=a=l[u],i=1;a>=10;a/=10,i++);f=(s=(o%=LOG_BASE$4)-LOG_BASE$4+i)<0?0:c/d[i-s-1]%10|0}if(n=n||t<0||null!=l[u+1]||(s<0?c:c%d[i-s-1]),n=r<4?(f||n)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||n||6==r&&(o>0?s>0?c/d[i-s]:0:l[u-1])%10&1||r==(e.s<0?8:7)),t<1||!l[0])return l.length=0,n?(t-=e.e+1,l[0]=d[(LOG_BASE$4-t%LOG_BASE$4)%LOG_BASE$4],e.e=-t||0):l[0]=e.e=0,e;if(0==o?(l.length=u,a=1,u--):(l.length=u+1,a=d[LOG_BASE$4-o],l[u]=s>0?mathfloor$4(c/d[i-s]%d[s])*a:0),n)for(;;){if(0==u){for(o=1,s=l[0];s>=10;s/=10,o++);for(s=l[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(e.e++,l[0]==BASE$4&&(l[0]=1));break}if(l[u]+=a,l[u]!=BASE$4)break;l[u--]=0,a=1}for(o=l.length;0===l[--o];l.pop());}e.e>g?e.c=e.e=null:e.e<m&&(e.c=[e.e=0])}return e}function T(e){var t,r=e.e;return null===r?e.toString():(t=coeffToString$4(e.c),t=r<=p||r>=b?toExponential$4(t,r):toFixedPoint$4(t,r,"0"),e.s<0?"-"+t:t)}return E.clone=clone$a,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(bignumberError$4+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(intCheck$4(r=e[t],0,MAX$5,t),d=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(intCheck$4(r=e[t],0,8,t),h=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(intCheck$4(r[0],-MAX$5,0,t),intCheck$4(r[1],0,MAX$5,t),p=r[0],b=r[1]):(intCheck$4(r,-MAX$5,MAX$5,t),p=-(b=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)intCheck$4(r[0],-MAX$5,-1,t),intCheck$4(r[1],1,MAX$5,t),m=r[0],g=r[1];else{if(intCheck$4(r,-MAX$5,MAX$5,t),!r)throw Error(bignumberError$4+t+" cannot be zero: "+r);m=-(g=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(bignumberError$4+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw y=!r,Error(bignumberError$4+"crypto unavailable");y=r}else y=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(intCheck$4(r=e[t],0,9,t),v=r),e.hasOwnProperty(t="POW_PRECISION")&&(intCheck$4(r=e[t],0,MAX$5,t),_=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(bignumberError$4+t+" not an object: "+r);$=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(bignumberError$4+t+" invalid: "+r);S=r}}return{DECIMAL_PLACES:d,ROUNDING_MODE:h,EXPONENTIAL_AT:[p,b],RANGE:[m,g],CRYPTO:y,MODULO_MODE:v,POW_PRECISION:_,FORMAT:$,ALPHABET:S}},E.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!E.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-MAX$5&&i<=MAX$5&&i===mathfloor$4(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%LOG_BASE$4)<1&&(t+=LOG_BASE$4),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=BASE$4||r!==mathfloor$4(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(bignumberError$4+"Invalid BigNumber: "+e)},E.maximum=E.max=function(){return C(arguments,f.lt)},E.minimum=E.min=function(){return C(arguments,f.gt)},E.random=(i=9007199254740992*Math.random()&2097151?function(){return mathfloor$4(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,s,a=0,c=[],u=new E(l);if(null==e?e=d:intCheck$4(e,0,MAX$5),o=mathceil$4(e/LOG_BASE$4),y)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(s=131072*t[a]+(t[a+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[a]=r[0],t[a+1]=r[1]):(c.push(s%1e14),a+=2);a=o/2}else{if(!crypto.randomBytes)throw y=!1,Error(bignumberError$4+"crypto unavailable");for(t=crypto.randomBytes(o*=7);a<o;)(s=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(c.push(s%1e14),a+=7);a=o/7}if(!y)for(;a<o;)(s=i())<9e15&&(c[a++]=s%1e14);for(o=c[--a],e%=LOG_BASE$4,o&&e&&(s=POWS_TEN$4[LOG_BASE$4-e],c[a]=mathfloor$4(o/s)*s);0===c[a];c.pop(),a--);if(a<0)c=[n=0];else{for(n=-1;0===c[0];c.splice(0,1),n-=LOG_BASE$4);for(a=1,s=c[0];s>=10;s/=10,a++);a<LOG_BASE$4&&(n-=LOG_BASE$4-a)}return u.e=n,u.c=c,u}),E.sum=function(){for(var e=1,t=arguments,r=new E(t[0]);e<t.length;)r=r.plus(t[e++]);return r},r=function(){function e(e,t,r,n){for(var i,o,s=[0],a=0,c=e.length;a<c;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(r,n,i,o,s){var a,c,u,f,l,p,b,m,g=r.indexOf("."),y=d,v=h;for(g>=0&&(f=_,_=0,r=r.replace(".",""),p=(m=new E(n)).pow(r.length-g),_=f,m.c=e(toFixedPoint$4(coeffToString$4(p.c),p.e,"0"),10,i,"0123456789"),m.e=m.c.length),u=f=(b=e(r,n,i,s?(a=S,"0123456789"):(a="0123456789",S))).length;0==b[--f];b.pop());if(!b[0])return a.charAt(0);if(g<0?--u:(p.c=b,p.e=u,p.s=o,b=(p=t(p,m,y,v,i)).c,l=p.r,u=p.e),g=b[c=u+y+1],f=i/2,l=l||c<0||null!=b[c+1],l=v<4?(null!=g||l)&&(0==v||v==(p.s<0?3:2)):g>f||g==f&&(4==v||l||6==v&&1&b[c-1]||v==(p.s<0?8:7)),c<1||!b[0])r=l?toFixedPoint$4(a.charAt(1),-y,a.charAt(0)):a.charAt(0);else{if(b.length=c,l)for(--i;++b[--c]>i;)b[c]=0,c||(++u,b=[1].concat(b));for(f=b.length;!b[--f];);for(g=0,r="";g<=f;r+=a.charAt(b[g++]));r=toFixedPoint$4(r,u,a.charAt(0))}return r}}(),t=function(){function e(e,t,r){var n,i,o,s,a=0,c=e.length,u=t%SQRT_BASE$4,f=t/SQRT_BASE$4|0;for(e=e.slice();c--;)a=((i=u*(o=e[c]%SQRT_BASE$4)+(n=f*o+(s=e[c]/SQRT_BASE$4|0)*u)%SQRT_BASE$4*SQRT_BASE$4+a)/r|0)+(n/SQRT_BASE$4|0)+f*s,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,s,a){var c,u,f,l,d,h,p,b,m,g,y,v,_,$,S,w,C,A=n.s==i.s?1:-1,T=n.c,I=i.c;if(!(T&&T[0]&&I&&I[0]))return new E(n.s&&i.s&&(T?!I||T[0]!=I[0]:I)?T&&0==T[0]||!I?0*A:A/0:NaN);for(m=(b=new E(A)).c=[],A=o+(u=n.e-i.e)+1,a||(a=BASE$4,u=bitFloor$4(n.e/LOG_BASE$4)-bitFloor$4(i.e/LOG_BASE$4),A=A/LOG_BASE$4|0),f=0;I[f]==(T[f]||0);f++);if(I[f]>(T[f]||0)&&u--,A<0)m.push(1),l=!0;else{for($=T.length,w=I.length,f=0,A+=2,(d=mathfloor$4(a/(I[0]+1)))>1&&(I=e(I,d,a),T=e(T,d,a),w=I.length,$=T.length),_=w,y=(g=T.slice(0,w)).length;y<w;g[y++]=0);C=I.slice(),C=[0].concat(C),S=I[0],I[1]>=a/2&&S++;do{if(d=0,(c=t(I,g,w,y))<0){if(v=g[0],w!=y&&(v=v*a+(g[1]||0)),(d=mathfloor$4(v/S))>1)for(d>=a&&(d=a-1),p=(h=e(I,d,a)).length,y=g.length;1==t(h,g,p,y);)d--,r(h,w<p?C:I,p,a),p=h.length,c=1;else 0==d&&(c=d=1),p=(h=I.slice()).length;if(p<y&&(h=[0].concat(h)),r(g,h,y,a),y=g.length,-1==c)for(;t(I,g,w,y)<1;)d++,r(g,w<y?C:I,y,a),y=g.length}else 0===c&&(d++,g=[0]);m[f++]=d,g[0]?g[y++]=T[_]||0:(g=[T[_]],y=1)}while((_++<$||null!=g[0])&&A--);l=null!=g[0],m[0]||m.splice(0,1)}if(a==BASE$4){for(f=1,A=m[0];A>=10;A/=10,f++);k(b,o+(b.e=f+u*LOG_BASE$4-1)+1,s,l)}else b.e=u,b.r=+l;return b}}(),o=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,a=/^\.([^.]+)$/,c=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(e,t,r,n){var i,f=r?t:t.replace(u,"");if(c.test(f))e.s=isNaN(f)?null:f<0?-1:1;else{if(!r&&(f=f.replace(o,function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t}),n&&(i=n,f=f.replace(s,"$1").replace(a,"0.$1")),t!=f))return new E(f,i);if(E.DEBUG)throw Error(bignumberError$4+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},f.absoluteValue=f.abs=function(){var e=new E(this);return e.s<0&&(e.s=1),e},f.comparedTo=function(e,t){return compare$4(this,new E(e,t))},f.decimalPlaces=f.dp=function(e,t){var r,n,i,o=this;if(null!=e)return intCheck$4(e,0,MAX$5),null==t?t=h:intCheck$4(t,0,8),k(new E(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-bitFloor$4(this.e/LOG_BASE$4))*LOG_BASE$4,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},f.dividedBy=f.div=function(e,r){return t(this,new E(e,r),d,h)},f.dividedToIntegerBy=f.idiv=function(e,r){return t(this,new E(e,r),0,1)},f.exponentiatedBy=f.pow=function(e,t){var r,n,i,o,s,a,c,u,f=this;if((e=new E(e)).c&&!e.isInteger())throw Error(bignumberError$4+"Exponent not an integer: "+T(e));if(null!=t&&(t=new E(t)),s=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return u=new E(Math.pow(+T(f),s?2-isOdd$4(e):+T(e))),t?u.mod(t):u;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new E(NaN);(n=!a&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||s&&f.c[1]>=24e7:f.c[0]<8e13||s&&f.c[0]<=9999975e7)))return o=f.s<0&&isOdd$4(e)?-0:0,f.e>-1&&(o=1/o),new E(a?1/o:o);_&&(o=mathceil$4(_/LOG_BASE$4+2))}for(s?(r=new E(.5),a&&(e.s=1),c=isOdd$4(e)):c=(i=Math.abs(+T(e)))%2,u=new E(l);;){if(c){if(!(u=u.times(f)).c)break;o?u.c.length>o&&(u.c.length=o):n&&(u=u.mod(t))}if(i){if(0===(i=mathfloor$4(i/2)))break;c=i%2}else if(k(e=e.times(r),e.e+1,1),e.e>14)c=isOdd$4(e);else{if(0===(i=+T(e)))break;c=i%2}f=f.times(f),o?f.c&&f.c.length>o&&(f.c.length=o):n&&(f=f.mod(t))}return n?u:(a&&(u=l.div(u)),t?u.mod(t):o?k(u,_,h,void 0):u)},f.integerValue=function(e){var t=new E(this);return null==e?e=h:intCheck$4(e,0,8),k(t,t.e+1,e)},f.isEqualTo=f.eq=function(e,t){return 0===compare$4(this,new E(e,t))},f.isFinite=function(){return!!this.c},f.isGreaterThan=f.gt=function(e,t){return compare$4(this,new E(e,t))>0},f.isGreaterThanOrEqualTo=f.gte=function(e,t){return 1===(t=compare$4(this,new E(e,t)))||0===t},f.isInteger=function(){return!!this.c&&bitFloor$4(this.e/LOG_BASE$4)>this.c.length-2},f.isLessThan=f.lt=function(e,t){return compare$4(this,new E(e,t))<0},f.isLessThanOrEqualTo=f.lte=function(e,t){return-1===(t=compare$4(this,new E(e,t)))||0===t},f.isNaN=function(){return!this.s},f.isNegative=function(){return this.s<0},f.isPositive=function(){return this.s>0},f.isZero=function(){return!!this.c&&0==this.c[0]},f.minus=function(e,t){var r,n,i,o,s=this,a=s.s;if(t=(e=new E(e,t)).s,!a||!t)return new E(NaN);if(a!=t)return e.s=-t,s.plus(e);var c=s.e/LOG_BASE$4,u=e.e/LOG_BASE$4,f=s.c,l=e.c;if(!c||!u){if(!f||!l)return f?(e.s=-t,e):new E(l?s:NaN);if(!f[0]||!l[0])return l[0]?(e.s=-t,e):new E(f[0]?s:3==h?-0:0)}if(c=bitFloor$4(c),u=bitFloor$4(u),f=f.slice(),a=c-u){for((o=a<0)?(a=-a,i=f):(u=c,i=l),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(o=(a=f.length)<(t=l.length))?a:t,a=t=0;t<n;t++)if(f[t]!=l[t]){o=f[t]<l[t];break}if(o&&(i=f,f=l,l=i,e.s=-e.s),(t=(n=l.length)-(r=f.length))>0)for(;t--;f[r++]=0);for(t=BASE$4-1;n>a;){if(f[--n]<l[n]){for(r=n;r&&!f[--r];f[r]=t);--f[r],f[n]+=BASE$4}f[n]-=l[n]}for(;0==f[0];f.splice(0,1),--u);return f[0]?A(e,f,u):(e.s=3==h?-1:1,e.c=[e.e=0],e)},f.modulo=f.mod=function(e,r){var n,i,o=this;return e=new E(e,r),!o.c||!e.s||e.c&&!e.c[0]?new E(NaN):!e.c||o.c&&!o.c[0]?new E(o):(9==v?(i=e.s,e.s=1,n=t(o,e,0,3),e.s=i,n.s*=i):n=t(o,e,0,v),(e=o.minus(n.times(e))).c[0]||1!=v||(e.s=o.s),e)},f.multipliedBy=f.times=function(e,t){var r,n,i,o,s,a,c,u,f,l,d,h,p,b,m,g=this,y=g.c,v=(e=new E(e,t)).c;if(!(y&&v&&y[0]&&v[0]))return!g.s||!e.s||y&&!y[0]&&!v||v&&!v[0]&&!y?e.c=e.e=e.s=null:(e.s*=g.s,y&&v?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=bitFloor$4(g.e/LOG_BASE$4)+bitFloor$4(e.e/LOG_BASE$4),e.s*=g.s,(c=y.length)<(l=v.length)&&(p=y,y=v,v=p,i=c,c=l,l=i),i=c+l,p=[];i--;p.push(0));for(b=BASE$4,m=SQRT_BASE$4,i=l;--i>=0;){for(r=0,d=v[i]%m,h=v[i]/m|0,o=i+(s=c);o>i;)r=((u=d*(u=y[--s]%m)+(a=h*u+(f=y[s]/m|0)*d)%m*m+p[o]+r)/b|0)+(a/m|0)+h*f,p[o--]=u%b;p[o]=r}return r?++n:p.splice(0,1),A(e,p,n)},f.negated=function(){var e=new E(this);return e.s=-e.s||null,e},f.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new E(e,t)).s,!i||!t)return new E(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/LOG_BASE$4,s=e.e/LOG_BASE$4,a=n.c,c=e.c;if(!o||!s){if(!a||!c)return new E(i/0);if(!a[0]||!c[0])return c[0]?e:new E(a[0]?n:0*i)}if(o=bitFloor$4(o),s=bitFloor$4(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/BASE$4|0,a[t]=BASE$4===a[t]?0:a[t]%BASE$4;return i&&(a=[i].concat(a),++s),A(e,a,s)},f.precision=f.sd=function(e,t){var r,n,i,o=this;if(null!=e&&e!==!!e)return intCheck$4(e,1,MAX$5),null==t?t=h:intCheck$4(t,0,8),k(new E(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*LOG_BASE$4+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},f.shiftedBy=function(e){return intCheck$4(e,-MAX_SAFE_INTEGER$7,MAX_SAFE_INTEGER$7),this.times("1e"+e)},f.squareRoot=f.sqrt=function(){var e,r,n,i,o,s=this,a=s.c,c=s.s,u=s.e,f=d+4,l=new E("0.5");if(1!==c||!a||!a[0])return new E(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+T(s)))||c==1/0?(((r=coeffToString$4(a)).length+u)%2==0&&(r+="0"),c=Math.sqrt(+r),u=bitFloor$4((u+1)/2)-(u<0||u%2),n=new E(r=c==1/0?"1e"+u:(r=c.toExponential()).slice(0,r.indexOf("e")+1)+u)):n=new E(c+""),n.c[0])for((c=(u=n.e)+f)<3&&(c=0);;)if(o=n,n=l.times(o.plus(t(s,o,f,1))),coeffToString$4(o.c).slice(0,c)===(r=coeffToString$4(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(r=r.slice(c-3,c+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(k(n,n.e+d+2,1),e=!n.times(n).eq(s));break}if(!i&&(k(o,o.e+d+2,0),o.times(o).eq(s))){n=o;break}f+=4,c+=4,i=1}return k(n,n.e+d+1,h,e)},f.toExponential=function(e,t){return null!=e&&(intCheck$4(e,0,MAX$5),e++),w(this,e,t,1)},f.toFixed=function(e,t){return null!=e&&(intCheck$4(e,0,MAX$5),e=e+this.e+1),w(this,e,t)},f.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=$;else if("object"!=typeof r)throw Error(bignumberError$4+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,s=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",f=s[0],l=s[1],d=i.s<0,h=d?f.slice(1):f,p=h.length;if(c&&(o=a,a=c,c=o,p-=o),a>0&&p>0){for(o=p%a||a,f=h.substr(0,o);o<p;o+=a)f+=u+h.substr(o,a);c>0&&(f+=u+h.slice(o)),d&&(f="-"+f)}n=l?f+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):f}return(r.prefix||"")+n+(r.suffix||"")},f.toFraction=function(e){var r,n,i,o,s,a,c,u,f,d,p,b,m=this,y=m.c;if(null!=e&&(!(c=new E(e)).isInteger()&&(c.c||1!==c.s)||c.lt(l)))throw Error(bignumberError$4+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+T(c));if(!y)return new E(m);for(r=new E(l),f=n=new E(l),i=u=new E(l),b=coeffToString$4(y),s=r.e=b.length-m.e-1,r.c[0]=POWS_TEN$4[(a=s%LOG_BASE$4)<0?LOG_BASE$4+a:a],e=!e||c.comparedTo(r)>0?s>0?r:f:c,a=g,g=1/0,c=new E(b),u.c[0]=0;d=t(c,r,0,1),1!=(o=n.plus(d.times(i))).comparedTo(e);)n=i,i=o,f=u.plus(d.times(o=f)),u=o,r=c.minus(d.times(o=r)),c=o;return o=t(e.minus(n),i,0,1),u=u.plus(o.times(f)),n=n.plus(o.times(i)),u.s=f.s=m.s,p=t(f,i,s*=2,h).minus(m).abs().comparedTo(t(u,n,s,h).minus(m).abs())<1?[f,i]:[u,n],g=a,p},f.toNumber=function(){return+T(this)},f.toPrecision=function(e,t){return null!=e&&intCheck$4(e,1,MAX$5),w(this,e,t,2)},f.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=p||o>=b?toExponential$4(coeffToString$4(n.c),o):toFixedPoint$4(coeffToString$4(n.c),o,"0"):10===e?t=toFixedPoint$4(coeffToString$4((n=k(new E(n),d+o+1,h)).c),n.e,"0"):(intCheck$4(e,2,S.length,"Base"),t=r(toFixedPoint$4(coeffToString$4(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},f.valueOf=f.toJSON=function(){return T(this)},f._isBigNumber=!0,f[Symbol.toStringTag]="BigNumber",f[Symbol.for("nodejs.util.inspect.custom")]=f.valueOf,null!=e&&E.set(e),E}function bitFloor$4(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString$4(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=LOG_BASE$4-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function compare$4(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,c=e.e,u=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=c==u,!i||!o)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=o.length)?c:u,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return c==u?0:c>u^r?1:-1}function intCheck$4(e,t,r,n){if(e<t||e>r||e!==mathfloor$4(e))throw Error(bignumberError$4+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function isOdd$4(e){var t=e.c.length-1;return bitFloor$4(e.e/LOG_BASE$4)==t&&e.c[t]%2!=0}function toExponential$4(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint$4(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var BigNumber$4=clone$a(),bignumber$5=Object.freeze({BigNumber:BigNumber$4,default:BigNumber$4}),Big$3=getCjsExportFromNamespace(bignumber$5);const OFFLINE_ERROR$2=utils$K.OFFLINE_ERROR;function formatWantlist(e,t){return Array.from(e).map(e=>({"/":e[1].cid.toBaseEncodedString(t)}))}var bitswap=function(e){return{wantlist:promisifyEs6((t,r)=>{if("function"==typeof t&&(r=t,t=null),!e.isOnline())return setImmediate$1(()=>r(new Error(OFFLINE_ERROR$2)));let n;if(t){try{t=src$s.createFromB58String(t)}catch(e){t=null}if(!t)return setImmediate$1(()=>r(new Error("Invalid peerId")));n=e._bitswap.wantlistForPeer(t)}else n=e._bitswap.getWantlist();setImmediate$1(()=>r(null,{Keys:formatWantlist(n)}))}),stat:promisifyEs6(t=>{if(!e.isOnline())return setImmediate$1(()=>t(new Error(OFFLINE_ERROR$2)));const r=e._bitswap.stat().snapshot;setImmediate$1(()=>{t(null,{provideBufLen:parseInt(r.providesBufferLength.toString()),blocksReceived:new Big$3(r.blocksReceived),wantlist:formatWantlist(e._bitswap.getWantlist()),peers:e._bitswap.peers().map(e=>e.toB58String()),dupBlksReceived:new Big$3(r.dupBlksReceived),dupDataReceived:new Big$3(r.dupDataReceived),dataReceived:new Big$3(r.dataReceived),blocksSent:new Big$3(r.blocksSent),dataSent:new Big$3(r.dataSent)})})}),unwant:promisifyEs6((t,r)=>{if(!e.isOnline())return setImmediate$1(()=>r(new Error(OFFLINE_ERROR$2)));Array.isArray(t)||(t=[t]);try{t=t.map(e=>src$v.isCID(e)?e:new src$v(e))}catch(e){return setImmediate$1(()=>r(errCode(e,"ERR_INVALID_CID")))}setImmediate$1(()=>r(null,e._bitswap.unwant(t)))})}};const errPubsubDisabled=()=>errCode(new Error("pubsub experiment is not enabled"),"ERR_PUBSUB_DISABLED");var pubsub$1=function(e){return{subscribe:(t,r,n,i)=>("function"==typeof n&&(i=n,n={}),e._options.EXPERIMENTAL.pubsub?i?void e.libp2p.pubsub.subscribe(t,n,r,i):new Promise((i,o)=>{e.libp2p.pubsub.subscribe(t,n,r,e=>{if(e)return o(e);i()})}):i?setImmediate$1(()=>i(errPubsubDisabled())):Promise.reject(errPubsubDisabled())),unsubscribe:(t,r,n)=>e._options.EXPERIMENTAL.pubsub?(e.libp2p.pubsub.unsubscribe(t,r),n?void setImmediate$1(()=>n()):Promise.resolve()):n?setImmediate$1(()=>n(errPubsubDisabled())):Promise.reject(errPubsubDisabled()),publish:promisifyEs6((t,r,n)=>{if(!e._options.EXPERIMENTAL.pubsub)return setImmediate$1(()=>n(errPubsubDisabled()));e.libp2p.pubsub.publish(t,r,n)}),ls:promisifyEs6(t=>{if(!e._options.EXPERIMENTAL.pubsub)return setImmediate$1(()=>t(errPubsubDisabled()));e.libp2p.pubsub.ls(t)}),peers:promisifyEs6((t,r)=>{if(!e._options.EXPERIMENTAL.pubsub)return setImmediate$1(()=>r(errPubsubDisabled()));e.libp2p.pubsub.peers(t,r)}),setMaxListeners(t){if(!e._options.EXPERIMENTAL.pubsub)throw errPubsubDisabled();e.libp2p.pubsub.setMaxListeners(t)}}},notId_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!e},e.exports=t.default});unwrapExports(notId_1);var every=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(createTester),n=o(doParallel_1),i=o(notId_1);function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)((0,r.default)(i.default,i.default)),e.exports=t.default});unwrapExports(every);const log$V=src$z("ipfs:dht");log$V.error=src$z("ipfs:dht:error");var dht$1=e=>({get:promisifyEs6((t,r,n)=>{if("function"==typeof r&&(n=r,r={}),r=r||{},!Buffer.isBuffer(t))try{t=new src$v(t).buffer}catch(e){return log$V.error(e),nextTick(()=>n(errCode(e,"ERR_INVALID_CID")))}e.libp2p.dht.get(t,r,n)}),put:promisifyEs6((t,r,n)=>{if(!Buffer.isBuffer(t))try{t=new src$v(t).buffer}catch(e){return log$V.error(e),nextTick(()=>n(errCode(e,"ERR_INVALID_CID")))}e.libp2p.dht.put(t,r,n)}),findProvs:promisifyEs6((t,r,n)=>{if("function"==typeof r&&(n=r,r={}),r=r||{},"string"==typeof t)try{t=new src$v(t)}catch(e){return log$V.error(e),nextTick(()=>n(errCode(e,"ERR_INVALID_CID")))}e.libp2p.contentRouting.findProviders(t,r,n)}),findPeer:promisifyEs6((t,r)=>{"string"==typeof t&&(t=src$s.createFromB58String(t)),e.libp2p.peerRouting.findPeer(t,r)}),provide:promisifyEs6((t,r,n)=>{Array.isArray(t)||(t=[t]),"function"==typeof r&&(n=r,r={}),r=r||{},every(t,(t,r)=>{e._repo.blocks.has(t,r)},(i,o)=>{if(i)return n(i);if(!o){const e="block(s) not found locally, cannot provide";return log$V.error(e),n(errCode(e,"ERR_BLOCK_NOT_FOUND"))}if(r.recursive)return n(errCode("not implemented yet","ERR_NOT_IMPLEMENTED_YET"));each(t,(t,r)=>{e.libp2p.contentRouting.provide(t,r)},n)})}),query:promisifyEs6((t,r)=>{if("string"==typeof t)try{t=src$s.createFromB58String(t)}catch(e){return log$V.error(e),r(e)}e.libp2p._dht.getClosestPeers(t.toBytes(),(e,t)=>{if(e)return log$V.error(e),r(e);r(null,t.map(e=>new src$t(e)))})})});const MAX_RECURSIVE_DEPTH=32;var dnsNodejs=(e,t,r)=>{let n;return(null==t.recursive||Boolean(t.recursive))&&(n=32),recursiveResolveDnslink(e,n,r)};function recursiveResolveDnslink(e,t,r){return 0===t?r(errCode("recursion limit exceeded","ERR_DNSLINK_RECURSION_LIMIT")):resolveDnslink(e).catch(t=>{if("ENOTFOUND"!==t.code&&"ERR_DNSLINK_NOT_FOUND"!==t.code&&"ENODATA"!==t.code)throw t;if(e.startsWith("_dnslink.")){return resolveDnslink(e.replace("_dnslink.",""))}return resolveDnslink(`_dnslink.${e}`)}).then(e=>{const n=e.replace("dnslink=",""),i=n.split("/")[2];return src$w.cid(i)||!t?r(null,n):recursiveResolveDnslink(i,t-1,r)}).catch(r)}function resolveDnslink(e){const t=/^dnslink=.+$/;return new Promise((t,r)=>{dns$1.resolveTxt(e,(e,n)=>{if(e)return r(e);t(n)})}).then(e=>lodash.chain(e).flatten().filter(e=>t.test(e)).value()).then(t=>{if(0===t.length)throw errCode(`No dnslink records found for domain: ${e}`,"ERR_DNSLINK_NOT_FOUND");return t[0]})}var dns_1=()=>promisifyEs6((e,t,r)=>{if("string"!=typeof e)return r(new Error("Invalid arguments, domain must be a string"));"function"==typeof t&&(r=t,t={}),dnsNodejs(e,t=t||{},r)}),key$6=function(e){return{gen:promisifyEs6((t,r,n)=>{r=r||{},e._keychain.createKey(t,r.type,r.size,n)}),info:promisifyEs6((t,r)=>{e._keychain.findKeyByName(t,r)}),list:promisifyEs6(t=>{e._keychain.listKeys(t)}),rm:promisifyEs6((t,r)=>{e._keychain.removeKey(t,r)}),rename:promisifyEs6((t,r,n)=>{e._keychain.renameKey(t,r,(e,r)=>{if(e)return n(e);const i={was:t,now:r.name,id:r.id,overwrite:!1};n(null,i)})}),import:promisifyEs6((t,r,n,i)=>{e._keychain.importKey(t,r,n,i)}),export:promisifyEs6((t,r,n)=>{e._keychain.exportKey(t,r,n)})}};const whole=/^((\d+(\.\d+)*)(ns|ms|us|µs|m|s|h))+$/,pieces=/((\d+(\.\d+)*)(ns|ms|us|µs|m|s|h))/g,measure=/(ns|ms|us|µs|m|s|h)/g,multipliers={ns:1e-6,us:.001,"µs":.001,ms:1,s:1e3,m:6e4,h:36e5};function analyse(e){let t=e.match(measure)[0];return e=e.substring(0,e.length-t.length),parseFloat(e)*multipliers[t]}var src$1K=promisifyEs6(function(e,t){return"string"!=typeof e?t(new Error("the first argument must be a string")):whole.test(e)?void t(null,e.match(pieces).reduce((e,t)=>e+analyse(t),0)):t(new Error("invalid time"))});function bandwidthStats(e,t){return new Promise((r,n)=>{let i;(i=t.peer?e.libp2p.stats.forPeer(t.peer):t.proto?e.libp2p.stats.forProtocol(t.proto):e.libp2p.stats.global)?r({totalIn:i.snapshot.dataReceived,totalOut:i.snapshot.dataSent,rateIn:new Big$3(i.movingAverages.dataReceived[6e4].movingAverage()/60),rateOut:new Big$3(i.movingAverages.dataSent[6e4].movingAverage()/60)}):r({totalIn:new Big$3(0),totalOut:new Big$3(0),rateIn:new Big$3(0),rateOut:new Big$3(0)})})}var stats$2=function(e){const t=t=>{t=t||{};let r=null,n=pullPushable_1(!0,()=>{r&&clearInterval(r)});return t.poll?src$1K(t.interval||"1s",(i,o)=>{if(i)return n.end(errCode(i,"ERR_INVALID_POLL_INTERVAL"));r=setInterval(()=>{bandwidthStats(e,t).then(e=>n.push(e)).catch(e=>n.end(e))},o)}):bandwidthStats(e,t).then(e=>{n.push(e),n.end()}).catch(e=>n.end(e)),n.source};return{bitswap:bitswap(e).stat,repo:repo(e).stat,bw:promisifyEs6((t,r)=>{"function"==typeof t&&(r=t,t={}),bandwidthStats(e,t=t||{}).then(e=>r(null,e)).catch(e=>r(e))}),bwReadableStream:e=>pullStreamToStream.source(t(e)),bwPullStream:t}};const{cidToString:cidToString$2}=cid;var resolve$5=e=>promisifyEs6(async(t,r,n)=>{if("function"==typeof r&&(n=r,r={}),r=r||{},!src$w.path(t))return setImmediate$1(()=>n(new Error("invalid argument "+t)));if(!src$w.ipfsPath(t))return setImmediate$1(()=>n(new Error("resolve non-IPFS names is not implemented")));const i=t.split("/"),o=new src$v(i[2]);if(3===i.length)return setImmediate$1(()=>n(null,`/ipfs/${cidToString$2(o,{base:r.cidBase})}`));const s=i.slice(3).join("/"),a=e._ipld.resolve(o,s);let c=o,u=s;try{for await(const e of a){if(""===e.remainderPath){src$v.isCID(e.value)&&(c=e.value,u=""),e.value&&src$v.isCID(e.value.Hash)&&(c=e.value.Hash,u="");break}c=e.value,u=e.remainderPath}}catch(e){return n(e)}return n(null,`/ipfs/${cidToString$2(c,{base:r.cidBase})}${u?"/"+u:""}`)});const log$W=src$z("ipfs:name-pubsub");log$W.error=src$z("ipfs:name-pubsub:error");const isNamePubsubEnabled=e=>{try{return Boolean(getPubsubRouting(e))}catch(e){return!1}},getPubsubRouting=e=>{if(!e._ipns||!e._options.EXPERIMENTAL.ipnsPubsub){throw errCode("IPNS pubsub subsystem is not enabled","ERR_IPNS_PUBSUB_NOT_ENABLED")}if(pubsubDatastore.isIpnsPubsubDatastore(e._ipns.routing))return e._ipns.routing;const t=(e._ipns.routing.stores||[]).find(e=>pubsubDatastore.isIpnsPubsubDatastore(e));if(!t){throw errCode("IPNS pubsub datastore not found","ERR_PUBSUB_DATASTORE_NOT_FOUND")}return t};var namePubsub=function(e){return{state:promisifyEs6(t=>{t(null,{enabled:isNamePubsubEnabled(e)})}),cancel:promisifyEs6((t,r)=>{let n;try{n=getPubsubRouting(e)}catch(e){return r(e)}n.cancel(t,r)}),subs:promisifyEs6(t=>{let r;try{r=getPubsubRouting(e)}catch(e){return t(e)}r.getSubscriptions(t)})}};const log$X=src$z("ipfs:name");log$X.error=src$z("ipfs:name:error");const keyLookup=(e,t,r)=>{if("self"===t)return r(null,e._peerInfo.id.privKey);const n=e._options.pass;waterfall([r=>e._keychain.exportKey(t,n,r),(e,t)=>src$u.keys.import(e,n,t)],(e,t)=>e?(log$X.error(e),r(errCode(e,"ERR_CANNOT_GET_KEY"))):r(null,t))};var name$4=function(e){return{publish:promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={});const i=!(!1===(r=r||{}).resolve),o=r.lifetime||"24h",s=r.key||"self";if(!e.isOnline()){const e=utils$K.OFFLINE_ERROR;return log$X.error(e),n(errCode(e,"OFFLINE_ERROR"))}try{t=utils$K.normalizePath(t)}catch(e){return log$X.error(e),n(e)}parallel$1([e=>src$1K(o,e),t=>keyLookup(e,s,t),r=>"true"===i.toString()?path$1.resolvePath(e,t,r):r()],(r,i)=>{if(r)return log$X.error(r),n(r);const o=i[0].toFixed(6),s=i[1];e._ipns.publish(s,t,o,n)})}),resolve:promisifyEs6((t,r,n)=>{"function"==typeof r&&(n=r,r={});const i=(r=r||{}).nocache&&"true"===r.nocache.toString(),o=r.recursive&&"true"===r.recursive.toString(),s=e._options.offline;if(!e.isOnline()&&!s){const e=utils$K.OFFLINE_ERROR;return log$X.error(e),n(errCode(e,"OFFLINE_ERROR"))}if(s&&i){const e="cannot specify both offline and nocache";return log$X.error(e),n(errCode(new Error(e),"ERR_NOCACHE_AND_OFFLINE"))}t||(t=e._peerInfo.id.toB58String()),t.startsWith("/ipns/")||(t=`/ipns/${t}`);const a={nocache:i,recursive:o};e._ipns.resolve(t,a,n)}),pubsub:namePubsub(e)}},preStart$1=preStart,start$1=start,stop$2=stop$1,isOnline$1=isOnline,version$7=version$5,id$7=id$6,repo$1=repo,init$4=init$3,bootstrap$1=bootstrap,config$7=config$6,block$1=block,object$2=object$1,dag$1=dag,libp2p$1=libp2p,swarm$1=swarm,ping$3=ping$2,pingPullStream$1=pingPullStream,pingReadableStream$1=pingReadableStream,pin$1=pin,filesRegular$1=filesRegular,filesMFS=filesMfs,bitswap$1=bitswap,pubsub$2=pubsub$1,dht$2=dht$1,dns=dns_1,key$7=key$6,stats$3=stats$2,resolve$6=resolve$5,name$5=name$4,components={preStart:preStart$1,start:start$1,stop:stop$2,isOnline:isOnline$1,version:version$7,id:id$7,repo:repo$1,init:init$4,bootstrap:bootstrap$1,config:config$7,block:block$1,object:object$2,dag:dag$1,libp2p:libp2p$1,swarm:swarm$1,ping:ping$3,pingPullStream:pingPullStream$1,pingReadableStream:pingReadableStream$1,pin:pin$1,filesRegular:filesRegular$1,filesMFS:filesMFS,bitswap:bitswap$1,pubsub:pubsub$2,dht:dht$2,dns:dns,key:key$7,stats:stats$3,resolve:resolve$6,name:name$5},repoNodejs=e=>{const t=e||path$4.join(os.homedir(),".jsipfs");return new src$G(t)};function constant(e){return function(){return e}}var constant_1=constant,retry_1$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o){var s=5,a=0,c={times:s,intervalFunc:(0,n.default)(a)};arguments.length<3&&"function"==typeof e?(o=t||r.default,t=e):(!function(e,t){if("object"==typeof t)e.times=+t.times||s,e.intervalFunc="function"==typeof t.interval?t.interval:(0,n.default)(+t.interval||a),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||s}}(c,e),o=o||r.default);if("function"!=typeof t)throw new Error("Invalid arguments for async.retry");var u=(0,i.default)(t),f=1;!function e(){u(function(t){t&&f++<c.times&&("function"!=typeof c.errorFilter||c.errorFilter(t))?setTimeout(e,c.intervalFunc(f)):o.apply(null,arguments)})}()};var r=o(noop_1),n=o(constant_1),i=o(wrapAsync_1);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default});unwrapExports(retry_1$1);const{URL:URL$5}=Url,log$Y=src$z("ipfs:preload");log$Y.error=src$z("ipfs:preload:error");var preloadNodejs=function(e,t){log$Y(e);try{e=new URL$5(e)}catch(e){return setImmediate$1(()=>t(e))}const r=("https:"===e.protocol?https:http).get({hostname:e.hostname,port:e.port,path:e.pathname+e.search},r=>{if(r.statusCode<200||r.statusCode>=300)return r.resume(),log$Y.error("failed to preload",e.href,r.statusCode,r.statusMessage),t(new Error(`failed to preload ${e}`));r.on("data",e=>log$Y(`data ${e}`)),r.on("abort",()=>{t(new Error("request aborted"))}),r.on("error",r=>{log$Y.error("response error preloading",e.href,r),t(r)}),r.on("end",()=>{r.aborted||t()})});return r.on("error",r=>{log$Y.error("request error preloading",e.href,r),t(r)}),{cancel:()=>{r.abort()}}};const log$Z=src$z("ipfs:preload");log$Z.error=src$z("ipfs:preload:error");const noop$s=e=>{e&&log$Z.error(e)};var preload_1=e=>{const t=e._options.preload||{};if(t.enabled=Boolean(t.enabled),t.addresses=t.addresses||[],!t.enabled||!t.addresses.length){log$Z("preload disabled");const e=(e,t)=>{t&&setImmediate$1(()=>t())};return e.start=()=>{},e.stop=()=>{},e}let r=!0,n=[];const i=t.addresses.map(apiAddrToUri),o=(e,t)=>{if(t=t||noop$s,"string"!=typeof e)try{e=new src$v(e).toBaseEncodedString()}catch(e){return setImmediate$1(()=>t(e))}const o=Array.from(i);let s;const a=Date.now();retry_1$1({times:o.length},t=>{if(r)return t(new Error(`preload aborted for ${e}`));n=n.filter(e=>e!==s);const i=o.shift();s=preloadNodejs(`${i}/api/v0/refs?r=true&arg=${e}`,t),n=n.concat(s)},r=>{if(n=n.filter(e=>e!==s),r)return t(r);log$Z(`preloaded ${e} in ${Date.now()-a}ms`),t()})};return o.start=()=>{r=!1},o.stop=()=>{r=!0,log$Z(`canceling ${n.length} pending preload request(s)`),n.forEach(e=>e.cancel()),n=[]},o};function apiAddrToUri(e){return e.endsWith("http")||e.endsWith("https")||(e+="/http"),multiaddrToUri(e)}const log$_=src$z("ipfs:mfs-preload");log$_.error=src$z("ipfs:mfs-preload:error");var mfsPreload=e=>{const t=e._options.preload||{};if(t.interval=t.interval||3e4,!t.enabled)return log$_("MFS preload disabled"),{start:e=>setImmediate$1(e),stop:e=>setImmediate$1(e)};let r,n;const i=()=>{e.files.stat("/",(o,s)=>o?(n=setTimeout(i,t.interval),log$_.error("failed to stat MFS root for preload",o)):r!==s.hash?(log$_(`preloading updated MFS root ${r} -> ${s.hash}`),e._preload(s.hash,e=>{if(n=setTimeout(i,t.interval),e)return log$_.error(`failed to preload MFS root ${s.hash}`,e);r=s.hash})):void(n=setTimeout(i,t.interval)))};return{start(o){e.files.stat("/",(e,s)=>{if(e)return o(e);r=s.hash,log$_(`monitoring MFS root ${r}`),n=setTimeout(i,t.interval),o()})},stop(e){clearTimeout(n),e()}}},CIDUtil$c={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$c=CIDUtil$c;class CID$b{constructor(e,t,r,n){if(_CID$b.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$b.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$b.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$b.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$b(0,this.codec,this.multihash)}toV1(){return new _CID$b(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$c.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$b=classIs(CID$b,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$b.codecs=baseTable;var src$1L=_CID$b,createHmac=crypto$l.createHmac,crypto$e=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash160=function(e){const t=createHash("sha256").update(e).digest();try{return createHash("rmd160").update(t).digest()}catch(e){return createHash("ripemd160").update(t).digest()}},t.hmacSHA512=function(e,t){return createHmac("sha512",e).update(t).digest()}});unwrapExports(crypto$e);var crypto_1$1=crypto$e.hash160,crypto_2=crypto$e.hmacSHA512,Buffer$M=safeBuffer.Buffer,base$7=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=e(t);return bs58.encode(Buffer$M.concat([t,r],t.length+4))},decode:function(e){var r=t(bs58.decode(e));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=bs58.decodeUnsafe(e);if(r)return t(r)}}};function sha256x2(e){var t=createHash("sha256").update(e).digest();return createHash("sha256").update(t).digest()}var bs58check=base$7(sha256x2);let binding$1=bindings_1("secp256k1");delete binding$1.path;for(let e in binding$1)0===e.indexOf("is")&&(binding$1[e].toJSON=function(){return e});var native_1=binding$1,tinySecp256k1Native=native_1;const ONE1=Buffer.alloc(1,1),ZERO1=Buffer.alloc(1,0);function deterministicGenerateK(e,t,r,n,i){let o=Buffer.alloc(32,0),s=Buffer.alloc(32,1);o=createHmac("sha256",o).update(s).update(ZERO1).update(t).update(e).update(i||"").digest(),s=createHmac("sha256",o).update(s).digest(),o=createHmac("sha256",o).update(s).update(ONE1).update(t).update(e).update(i||"").digest(),s=createHmac("sha256",o).update(s).digest();let a=s=createHmac("sha256",o).update(s).digest();for(;!n(a)||!r(a);)o=createHmac("sha256",o).update(s).update(ZERO1).digest(),s=createHmac("sha256",o).update(s).digest(),a=s=createHmac("sha256",o).update(s).digest();return a}var rfc6979=deterministicGenerateK;const EC$2=elliptic_1.ec,secp256k1$4=new EC$2("secp256k1"),ZERO32=Buffer.alloc(32,0),EC_GROUP_ORDER=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),EC_P=Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),n=secp256k1$4.curve.n,nDiv2=n.shrn(1),G=secp256k1$4.curve.g,THROW_BAD_PRIVATE="Expected Private",THROW_BAD_POINT="Expected Point",THROW_BAD_TWEAK="Expected Tweak",THROW_BAD_HASH="Expected Hash",THROW_BAD_SIGNATURE="Expected Signature",THROW_BAD_EXTRA_DATA="Expected Extra Data (32 bytes)";function isScalar(e){return Buffer.isBuffer(e)&&32===e.length}function isOrderScalar(e){return!!isScalar(e)&&e.compare(EC_GROUP_ORDER)<0}function isPoint(e){if(!Buffer.isBuffer(e))return!1;if(e.length<33)return!1;const t=e[0],r=e.slice(1,33);if(0===r.compare(ZERO32))return!1;if(r.compare(EC_P)>=0)return!1;if((2===t||3===t)&&33===e.length){try{decodeFrom(e)}catch(e){return!1}return!0}const n=e.slice(33);return 0!==n.compare(ZERO32)&&(!(n.compare(EC_P)>=0)&&(4===t&&65===e.length))}function __isPointCompressed(e){return 4!==e[0]}function isPointCompressed(e){return!!isPoint(e)&&__isPointCompressed(e)}function isPrivate(e){return!!isScalar(e)&&(e.compare(ZERO32)>0&&e.compare(EC_GROUP_ORDER)<0)}function isSignature(e){const t=e.slice(0,32),r=e.slice(32,64);return Buffer.isBuffer(e)&&64===e.length&&t.compare(EC_GROUP_ORDER)<0&&r.compare(EC_GROUP_ORDER)<0}function assumeCompression(e,t){return void 0===e&&void 0!==t?__isPointCompressed(t):void 0===e||e}function fromBuffer$2(e){return new bn(e)}function toBuffer$1(e){return e.toArrayLike(Buffer,"be",32)}function decodeFrom(e){return secp256k1$4.curve.decodePoint(e)}function getEncoded(e,t){return Buffer.from(e._encode(t))}function pointAdd(e,t,r){if(!isPoint(e))throw new TypeError(THROW_BAD_POINT);if(!isPoint(t))throw new TypeError(THROW_BAD_POINT);const n=decodeFrom(e),i=decodeFrom(t),o=n.add(i);return o.isInfinity()?null:getEncoded(o,assumeCompression(r,e))}function pointAddScalar(e,t,r){if(!isPoint(e))throw new TypeError(THROW_BAD_POINT);if(!isOrderScalar(t))throw new TypeError(THROW_BAD_TWEAK);const n=assumeCompression(r,e),i=decodeFrom(e);if(0===t.compare(ZERO32))return getEncoded(i,n);const o=fromBuffer$2(t),s=G.mul(o),a=i.add(s);return a.isInfinity()?null:getEncoded(a,n)}function pointCompress(e,t){if(!isPoint(e))throw new TypeError(THROW_BAD_POINT);const r=decodeFrom(e);if(r.isInfinity())throw new TypeError(THROW_BAD_POINT);return getEncoded(r,t)}function pointFromScalar(e,t){if(!isPrivate(e))throw new TypeError(THROW_BAD_PRIVATE);const r=fromBuffer$2(e),n=G.mul(r);return n.isInfinity()?null:getEncoded(n,assumeCompression(t))}function pointMultiply(e,t,r){if(!isPoint(e))throw new TypeError(THROW_BAD_POINT);if(!isOrderScalar(t))throw new TypeError(THROW_BAD_TWEAK);const n=assumeCompression(r,e),i=decodeFrom(e),o=fromBuffer$2(t),s=i.mul(o);return s.isInfinity()?null:getEncoded(s,n)}function privateAdd(e,t){if(!isPrivate(e))throw new TypeError(THROW_BAD_PRIVATE);if(!isOrderScalar(t))throw new TypeError(THROW_BAD_TWEAK);const r=fromBuffer$2(e),i=fromBuffer$2(t),o=toBuffer$1(r.add(i).umod(n));return isPrivate(o)?o:null}function privateSub(e,t){if(!isPrivate(e))throw new TypeError(THROW_BAD_PRIVATE);if(!isOrderScalar(t))throw new TypeError(THROW_BAD_TWEAK);const r=fromBuffer$2(e),i=fromBuffer$2(t),o=toBuffer$1(r.sub(i).umod(n));return isPrivate(o)?o:null}function sign$2(e,t){return __sign(e,t)}function signWithEntropy(e,t,r){return __sign(e,t,r)}function __sign(e,t,r){if(!isScalar(e))throw new TypeError(THROW_BAD_HASH);if(!isPrivate(t))throw new TypeError(THROW_BAD_PRIVATE);if(void 0!==r&&!isScalar(r))throw new TypeError(THROW_BAD_EXTRA_DATA);const i=fromBuffer$2(t),o=fromBuffer$2(e);let s,a;rfc6979(e,t,function(e){const t=fromBuffer$2(e),r=G.mul(t);return!r.isInfinity()&&0!==(s=r.x.umod(n)).isZero()&&0!==(a=t.invm(n).mul(o.add(i.mul(s))).umod(n)).isZero()},isPrivate,r),a.cmp(nDiv2)>0&&(a=n.sub(a));const c=Buffer.allocUnsafe(64);return toBuffer$1(s).copy(c,0),toBuffer$1(a).copy(c,32),c}function verify$1(e,t,r){if(!isScalar(e))throw new TypeError(THROW_BAD_HASH);if(!isPoint(t))throw new TypeError(THROW_BAD_POINT);if(!isSignature(r))throw new TypeError(THROW_BAD_SIGNATURE);const i=decodeFrom(t),o=fromBuffer$2(r.slice(0,32)),s=fromBuffer$2(r.slice(32,64));if(o.gtn(0)<=0)return!1;if(s.gtn(0)<=0)return!1;const a=fromBuffer$2(e),c=s.invm(n),u=a.mul(c).umod(n),f=o.mul(c).umod(n),l=G.mulAdd(u,i,f);return!l.isInfinity()&&l.x.umod(n).eq(o)}var js$1={isPoint:isPoint,isPointCompressed:isPointCompressed,isPrivate:isPrivate,pointAdd:pointAdd,pointAddScalar:pointAddScalar,pointCompress:pointCompress,pointFromScalar:pointFromScalar,pointMultiply:pointMultiply,privateAdd:privateAdd,privateSub:privateSub,sign:sign$2,signWithEntropy:signWithEntropy,verify:verify$1},tinySecp256k1=createCommonjsModule(function(e){try{e.exports=tinySecp256k1Native}catch(t){e.exports=js$1}}),types$2={Array:function(e){return null!=e&&e.constructor===Array},Boolean:function(e){return"boolean"==typeof e},Function:function(e){return"function"==typeof e},Nil:function(e){return null==e},Number:function(e){return"number"==typeof e},Object:function(e){return"object"==typeof e},String:function(e){return"string"==typeof e},"":function(){return!0}};for(var typeName in types$2.Null=types$2.Nil,types$2)types$2[typeName].toJSON=function(e){return e}.bind(null,typeName);var native_1$1=types$2;function getTypeName(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function getValueTypeName(e){return native_1$1.Nil(e)?"":getTypeName(e.constructor)}function getValue$2(e){return native_1$1.Function(e)?"":native_1$1.String(e)?JSON.stringify(e):e&&native_1$1.Object(e)?"":e}function captureStackTrace(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function tfJSON(e){return native_1$1.Function(e)?e.toJSON?e.toJSON():getTypeName(e):native_1$1.Array(e)?"Array":e&&native_1$1.Object(e)?"Object":void 0!==e?e:""}function tfErrorString(e,t,r){var n=getValue$2(t);return"Expected "+tfJSON(e)+", got"+(""!==r?" "+r:"")+(""!==n?" "+n:"")}function TfTypeError(e,t,r){r=r||getValueTypeName(t),this.message=tfErrorString(e,t,r),captureStackTrace(this,TfTypeError),this.__type=e,this.__value=t,this.__valueTypeName=r}function tfPropertyErrorString(e,t,r,n,i){var o='" of type ';return"key"===t&&(o='" with key type '),tfErrorString('property "'+tfJSON(r)+o+tfJSON(e),n,i)}function TfPropertyTypeError(e,t,r,n,i){e?(i=i||getValueTypeName(n),this.message=tfPropertyErrorString(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',captureStackTrace(this,TfTypeError),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}function tfCustomError(e,t){return new TfTypeError(e,{},t)}function tfSubError(e,t,r){return e instanceof TfPropertyTypeError?(t=t+"."+e.__property,e=new TfPropertyTypeError(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof TfTypeError&&(e=new TfPropertyTypeError(e.__type,t,r,e.__value,e.__valueTypeName)),captureStackTrace(e),e}TfTypeError.prototype=Object.create(Error.prototype),TfTypeError.prototype.constructor=TfTypeError,TfPropertyTypeError.prototype=Object.create(Error.prototype),TfPropertyTypeError.prototype.constructor=TfTypeError;var errors$f={TfTypeError:TfTypeError,TfPropertyTypeError:TfPropertyTypeError,tfCustomError:tfCustomError,tfSubError:tfSubError,tfJSON:tfJSON,getValueTypeName:getValueTypeName};function _Buffer(e){return Buffer.isBuffer(e)}function Hex(e){return"string"==typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function _LengthN(e,t){var r=e.toJSON();function n(n){if(!e(n))return!1;if(n.length===t)return!0;throw errors$f.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+n.length+")")}return n.toJSON=function(){return r},n}var _ArrayN=_LengthN.bind(null,native_1$1.Array),_BufferN=_LengthN.bind(null,_Buffer),_HexN=_LengthN.bind(null,Hex),_StringN=_LengthN.bind(null,native_1$1.String);function Range(e,t,r){function n(n,i){return r(n,i)&&n>e&&n<t}return r=r||native_1$1.Number,n.toJSON=function(){return`${r.toJSON()} between [${e}, ${t}]`},n}var INT53_MAX=Math.pow(2,53)-1;function Finite(e){return"number"==typeof e&&isFinite(e)}function Int8(e){return e<<24>>24===e}function Int16(e){return e<<16>>16===e}function Int32(e){return(0|e)===e}function Int53(e){return"number"==typeof e&&e>=-INT53_MAX&&e<=INT53_MAX&&Math.floor(e)===e}function UInt8(e){return(255&e)===e}function UInt16(e){return(65535&e)===e}function UInt32(e){return e>>>0===e}function UInt53(e){return"number"==typeof e&&e>=0&&e<=INT53_MAX&&Math.floor(e)===e}var types$3={ArrayN:_ArrayN,Buffer:_Buffer,BufferN:_BufferN,Finite:Finite,Hex:Hex,HexN:_HexN,Int8:Int8,Int16:Int16,Int32:Int32,Int53:Int53,Range:Range,StringN:_StringN,UInt8:UInt8,UInt16:UInt16,UInt32:UInt32,UInt53:UInt53};for(var typeName$1 in types$3)types$3[typeName$1].toJSON=function(e){return e}.bind(null,typeName$1);var extra=types$3,tfJSON$1=errors$f.tfJSON,TfTypeError$1=errors$f.TfTypeError,TfPropertyTypeError$1=errors$f.TfPropertyTypeError,tfSubError$1=errors$f.tfSubError,getValueTypeName$1=errors$f.getValueTypeName,TYPES$2={arrayOf:function(e,t){function r(r,n){return!!native_1$1.Array(r)&&(!native_1$1.Nil(r)&&(!(void 0!==t.minLength&&r.length<t.minLength)&&(!(void 0!==t.maxLength&&r.length>t.maxLength)&&((void 0===t.length||r.length===t.length)&&r.every(function(t,r){try{return typeforce(e,t,n)}catch(e){throw tfSubError$1(e,r)}})))))}return e=compile$1(e),t=t||{},r.toJSON=function(){var r="["+tfJSON$1(e)+"]";return void 0!==t.length?r+="{"+t.length+"}":void 0===t.minLength&&void 0===t.maxLength||(r+="{"+(void 0===t.minLength?0:t.minLength)+","+(void 0===t.maxLength?1/0:t.maxLength)+"}"),r},r},maybe:function e(t){function r(r,n){return native_1$1.Nil(r)||t(r,n,e)}return t=compile$1(t),r.toJSON=function(){return"?"+tfJSON$1(t)},r},map:function(e,t){function r(r,n){if(!native_1$1.Object(r))return!1;if(native_1$1.Nil(r))return!1;for(var i in r){try{t&&typeforce(t,i,n)}catch(e){throw tfSubError$1(e,i,"key")}try{var o=r[i];typeforce(e,o,n)}catch(e){throw tfSubError$1(e,i)}}return!0}return e=compile$1(e),t&&(t=compile$1(t)),r.toJSON=t?function(){return"{"+tfJSON$1(t)+": "+tfJSON$1(e)+"}"}:function(){return"{"+tfJSON$1(e)+"}"},r},object:function(e){var t={};for(var r in e)t[r]=compile$1(e[r]);function n(e,r){if(!native_1$1.Object(e))return!1;if(native_1$1.Nil(e))return!1;var n;try{for(n in t){typeforce(t[n],e[n],r)}}catch(e){throw tfSubError$1(e,n)}if(r)for(n in e)if(!t[n])throw new TfPropertyTypeError$1(void 0,n);return!0}return n.toJSON=function(){return tfJSON$1(t)},n},anyOf:function(){var e=[].slice.call(arguments).map(compile$1);function t(t,r){return e.some(function(e){try{return typeforce(e,t,r)}catch(e){return!1}})}return t.toJSON=function(){return e.map(tfJSON$1).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(compile$1);function t(t,r){return e.every(function(e){try{return typeforce(e,t,r)}catch(e){return!1}})}return t.toJSON=function(){return e.map(tfJSON$1).join(" & ")},t},quacksLike:function(e){function t(t){return e===getValueTypeName$1(t)}return t.toJSON=function(){return e},t},tuple:function(){var e=[].slice.call(arguments).map(compile$1);function t(t,r){return!native_1$1.Nil(t)&&(!native_1$1.Nil(t.length)&&((!r||t.length===e.length)&&e.every(function(e,n){try{return typeforce(e,t[n],r)}catch(e){throw tfSubError$1(e,n)}})))}return t.toJSON=function(){return"("+e.map(tfJSON$1).join(", ")+")"},t},value:function(e){function t(t){return t===e}return t.toJSON=function(){return e},t}};function compile$1(e){if(native_1$1.String(e))return"?"===e[0]?TYPES$2.maybe(e.slice(1)):native_1$1[e]||TYPES$2.quacksLike(e);if(e&&native_1$1.Object(e)){if(native_1$1.Array(e)){if(1!==e.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return TYPES$2.arrayOf(e[0])}return TYPES$2.object(e)}return native_1$1.Function(e)?e:TYPES$2.value(e)}function typeforce(e,t,r,n){if(native_1$1.Function(e)){if(e(t,r))return!0;throw new TfTypeError$1(n||e,t)}return typeforce(compile$1(e),t,r)}for(var typeName$2 in TYPES$2.oneOf=TYPES$2.anyOf,native_1$1)typeforce[typeName$2]=native_1$1[typeName$2];for(typeName$2 in TYPES$2)typeforce[typeName$2]=TYPES$2[typeName$2];for(typeName$2 in extra)typeforce[typeName$2]=extra[typeName$2];typeforce.compile=compile$1,typeforce.TfTypeError=TfTypeError$1,typeforce.TfPropertyTypeError=TfPropertyTypeError$1;var typeforce_1=typeforce;function decodeRaw(e,t){if(void 0!==t&&e[0]!==t)throw new Error("Invalid network version");if(33===e.length)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(34!==e.length)throw new Error("Invalid WIF length");if(1!==e[33])throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function encodeRaw(e,t,r){var n=new Buffer(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}function decode$a(e,t){return decodeRaw(bs58check.decode(e),t)}function encode$9(e,t,r){return"number"==typeof e?bs58check.encode(encodeRaw(e,t,r)):bs58check.encode(encodeRaw(e.version,e.privateKey,e.compressed))}var wif={decode:decode$a,decodeRaw:decodeRaw,encode:encode$9,encodeRaw:encodeRaw},bip32=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=typeforce_1.BufferN(32),n=typeforce_1.compile({wif:typeforce_1.UInt8,bip32:{public:typeforce_1.UInt32,private:typeforce_1.UInt32}}),i={wif:128,bip32:{public:76067358,private:76066276}},o=2147483648,s=Math.pow(2,31)-1;function a(e){return typeforce_1.String(e)&&null!==e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function c(e){return typeforce_1.UInt32(e)&&e<=s}class u{constructor(e,t,r,i,o=0,s=0,a=0){this.__D=e,this.__Q=t,this.chainCode=r,this.network=i,this.__DEPTH=o,this.__INDEX=s,this.__PARENT_FINGERPRINT=a,typeforce_1(n,i)}get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get publicKey(){return void 0===this.__Q&&(this.__Q=tinySecp256k1.pointFromScalar(this.__D,!0)),this.__Q}get privateKey(){return this.__D}get identifier(){return crypto$e.hash160(this.publicKey)}get fingerprint(){return this.identifier.slice(0,4)}isNeutered(){return void 0===this.__D}neutered(){return d(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){const e=this.network,t=this.isNeutered()?e.bip32.public:e.bip32.private,r=Buffer.allocUnsafe(78);return r.writeUInt32BE(t,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),bs58check.encode(r)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return wif.encode(this.network.wif,this.privateKey,!0)}derive(e){typeforce_1(typeforce_1.UInt32,e);const t=e>=o,r=Buffer.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");r[0]=0,this.privateKey.copy(r,1),r.writeUInt32BE(e,33)}else this.publicKey.copy(r,0),r.writeUInt32BE(e,33);const n=crypto$e.hmacSHA512(this.chainCode,r),i=n.slice(0,32),s=n.slice(32);if(!tinySecp256k1.isPrivate(i))return this.derive(e+1);let a;if(this.isNeutered()){const t=tinySecp256k1.pointAddScalar(this.publicKey,i,!0);if(null===t)return this.derive(e+1);a=d(t,s,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}else{const t=tinySecp256k1.privateAdd(this.privateKey,i);if(null==t)return this.derive(e+1);a=l(t,s,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}return a}deriveHardened(e){return typeforce_1(c,e),this.derive(e+o)}derivePath(e){typeforce_1(a,e);let t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce((e,t)=>{let r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))},this)}sign(e,t=!1){if(!this.privateKey)throw new Error("Missing private key");if(!1===t)return tinySecp256k1.sign(e,this.privateKey);{let t=tinySecp256k1.sign(e,this.privateKey);const r=Buffer.alloc(32,0);let n=0;for(;t[0]>127;)n++,r.writeUIntLE(n,0,6),t=tinySecp256k1.signWithEntropy(e,this.privateKey,r);return t}}verify(e,t){return tinySecp256k1.verify(e,this.publicKey,t)}}function f(e,t,r){return l(e,t,r)}function l(e,t,n,o,s,a){if(typeforce_1({privateKey:r,chainCode:r},{privateKey:e,chainCode:t}),n=n||i,!tinySecp256k1.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new u(e,void 0,t,n,o,s,a)}function d(e,t,n,o,s,a){if(typeforce_1({publicKey:typeforce_1.BufferN(33),chainCode:r},{publicKey:e,chainCode:t}),n=n||i,!tinySecp256k1.isPoint(e))throw new TypeError("Point is not on the curve");return new u(void 0,e,t,n,o,s,a)}t.fromBase58=function(e,t){const r=bs58check.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");t=t||i;const n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");const o=r[4],s=r.readUInt32BE(5);if(0===o&&0!==s)throw new TypeError("Invalid parent fingerprint");const a=r.readUInt32BE(9);if(0===o&&0!==a)throw new TypeError("Invalid index");const c=r.slice(13,45);let u;if(n===t.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");u=l(r.slice(46,78),c,t,o,a,s)}else u=d(r.slice(45,78),c,t,o,a,s);return u},t.fromPrivateKey=f,t.fromPublicKey=function(e,t,r){return d(e,t,r)},t.fromSeed=function(e,t){if(typeforce_1(typeforce_1.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");t=t||i;const r=crypto$e.hmacSHA512(Buffer.from("Bitcoin seed","utf8"),e);return f(r.slice(0,32),r.slice(32),t)}});unwrapExports(bip32);var bip32_1=bip32.fromBase58,bip32_2=bip32.fromPrivateKey,bip32_3=bip32.fromPublicKey,bip32_4=bip32.fromSeed,src$1M=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromSeed=bip32.fromSeed,t.fromBase58=bip32.fromBase58,t.fromPublicKey=bip32.fromPublicKey,t.fromPrivateKey=bip32.fromPrivateKey});unwrapExports(src$1M);var src_1$f=src$1M.fromSeed,src_2$d=src$1M.fromBase58,src_3$c=src$1M.fromPublicKey,src_4$c=src$1M.fromPrivateKey,networks=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});unwrapExports(networks);var networks_1$1=networks.bitcoin,networks_2$1=networks.regtest,networks_3=networks.testnet,script_number=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e,t,r){t=t||4,r=void 0===r||r;const n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0==(127&e[n-1])&&(n<=1||0==(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){const t=e.readUInt32LE(0),r=e.readUInt8(4);return 128&r?-(4294967296*(-129&r)+t):4294967296*r+t}let i=0;for(let t=0;t<n;++t)i|=e[t]<<8*t;return 128&e[n-1]?-(i&~(128<<8*(n-1))):i},t.encode=function(e){let t=Math.abs(e);const r=function(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}(t),n=Buffer.allocUnsafe(r),i=e<0;for(let e=0;e<r;++e)n.writeUInt8(255&t,e),t>>=8;return 128&n[r-1]?n.writeUInt8(i?128:0,r-1):i&&(n[r-1]|=128),n}});unwrapExports(script_number);var script_number_1=script_number.decode,script_number_2=script_number.encode,types$4=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Math.pow(2,31)-1;function n(e){return typeforce_1.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function(e){return typeforce_1.UInt32(e)&&e<=r},t.BIP32Path=n,n.toJSON=()=>"BIP32 derivation path";const i=21e14;t.Satoshi=function(e){return typeforce_1.UInt53(e)&&e<=i},t.ECPoint=typeforce_1.quacksLike("Point"),t.Network=typeforce_1.compile({messagePrefix:typeforce_1.oneOf(typeforce_1.Buffer,typeforce_1.String),bip32:{public:typeforce_1.UInt32,private:typeforce_1.UInt32},pubKeyHash:typeforce_1.UInt8,scriptHash:typeforce_1.UInt8,wif:typeforce_1.UInt8}),t.Buffer256bit=typeforce_1.BufferN(32),t.Hash160bit=typeforce_1.BufferN(20),t.Hash256bit=typeforce_1.BufferN(32),t.Number=typeforce_1.Number,t.Array=typeforce_1.Array,t.Boolean=typeforce_1.Boolean,t.String=typeforce_1.String,t.Buffer=typeforce_1.Buffer,t.Hex=typeforce_1.Hex,t.maybe=typeforce_1.maybe,t.tuple=typeforce_1.tuple,t.UInt8=typeforce_1.UInt8,t.UInt32=typeforce_1.UInt32,t.Function=typeforce_1.Function,t.BufferN=typeforce_1.BufferN,t.Null=typeforce_1.Null,t.oneOf=typeforce_1.oneOf});unwrapExports(types$4);var types_1=types$4.UInt31,types_2=types$4.BIP32Path,types_3=types$4.Satoshi,types_4=types$4.ECPoint,types_5=types$4.Network,types_6=types$4.Buffer256bit,types_7=types$4.Hash160bit,types_8=types$4.Hash256bit,types_9=types$4.Number,types_10=types$4.Array,types_11=types$4.Boolean,types_12=types$4.String,types_13=types$4.Buffer,types_14=types$4.Hex,types_15=types$4.maybe,types_16=types$4.tuple,types_17=types$4.UInt8,types_18=types$4.UInt32,types_19=types$4.Function,types_20=types$4.BufferN,types_21=types$4.Null,types_22=types$4.oneOf,script_signature=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Buffer.alloc(1,0);function n(e){let t=0;for(;0===e[t];)++t;return t===e.length?r:128&(e=e.slice(t))[0]?Buffer.concat([r,e],1+e.length):e}function i(e){0===e[0]&&(e=e.slice(1));const t=Buffer.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}t.decode=function(e){const t=e.readUInt8(e.length-1),r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);const n=bip66.decode(e.slice(0,-1)),o=i(n.r),s=i(n.s);return{signature:Buffer.concat([o,s],64),hashType:t}},t.encode=function(e,t){typeforce_1({signature:types$4.BufferN(64),hashType:types$4.UInt8},{signature:e,hashType:t});const r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);const i=Buffer.allocUnsafe(1);i.writeUInt8(t,0);const o=n(e.slice(0,32)),s=n(e.slice(32,64));return Buffer.concat([bip66.encode(o,s),i])}});unwrapExports(script_signature);var script_signature_1=script_signature.decode,script_signature_2=script_signature.encode,OP_FALSE=0,OP_0=0,OP_PUSHDATA1=76,OP_PUSHDATA2=77,OP_PUSHDATA4=78,OP_1NEGATE=79,OP_RESERVED=80,OP_TRUE=81,OP_1=81,OP_2=82,OP_3=83,OP_4=84,OP_5=85,OP_6=86,OP_7=87,OP_8=88,OP_9=89,OP_10=90,OP_11=91,OP_12=92,OP_13=93,OP_14=94,OP_15=95,OP_16=96,OP_NOP=97,OP_VER=98,OP_IF=99,OP_NOTIF=100,OP_VERIF=101,OP_VERNOTIF=102,OP_ELSE=103,OP_ENDIF=104,OP_VERIFY=105,OP_RETURN=106,OP_TOALTSTACK=107,OP_FROMALTSTACK=108,OP_2DROP=109,OP_2DUP=110,OP_3DUP=111,OP_2OVER=112,OP_2ROT=113,OP_2SWAP=114,OP_IFDUP=115,OP_DEPTH=116,OP_DROP=117,OP_DUP=118,OP_NIP=119,OP_OVER=120,OP_PICK=121,OP_ROLL=122,OP_ROT=123,OP_SWAP=124,OP_TUCK=125,OP_CAT=126,OP_SUBSTR=127,OP_LEFT=128,OP_RIGHT=129,OP_SIZE=130,OP_INVERT=131,OP_AND=132,OP_OR=133,OP_XOR=134,OP_EQUAL=135,OP_EQUALVERIFY=136,OP_RESERVED1=137,OP_RESERVED2=138,OP_1ADD=139,OP_1SUB=140,OP_2MUL=141,OP_2DIV=142,OP_NEGATE=143,OP_ABS=144,OP_NOT=145,OP_0NOTEQUAL=146,OP_ADD=147,OP_SUB=148,OP_MUL=149,OP_DIV=150,OP_MOD=151,OP_LSHIFT=152,OP_RSHIFT=153,OP_BOOLAND=154,OP_BOOLOR=155,OP_NUMEQUAL=156,OP_NUMEQUALVERIFY=157,OP_NUMNOTEQUAL=158,OP_LESSTHAN=159,OP_GREATERTHAN=160,OP_LESSTHANOREQUAL=161,OP_GREATERTHANOREQUAL=162,OP_MIN=163,OP_MAX=164,OP_WITHIN=165,OP_RIPEMD160=166,OP_SHA1=167,OP_SHA256=168,OP_HASH160=169,OP_HASH256=170,OP_CODESEPARATOR=171,OP_CHECKSIG=172,OP_CHECKSIGVERIFY=173,OP_CHECKMULTISIG=174,OP_CHECKMULTISIGVERIFY=175,OP_NOP1=176,OP_NOP2=177,OP_CHECKLOCKTIMEVERIFY=177,OP_NOP3=178,OP_CHECKSEQUENCEVERIFY=178,OP_NOP4=179,OP_NOP5=180,OP_NOP6=181,OP_NOP7=182,OP_NOP8=183,OP_NOP9=184,OP_NOP10=185,OP_PUBKEYHASH=253,OP_PUBKEY=254,OP_INVALIDOPCODE=255,index={OP_FALSE:OP_FALSE,OP_0:OP_0,OP_PUSHDATA1:OP_PUSHDATA1,OP_PUSHDATA2:OP_PUSHDATA2,OP_PUSHDATA4:OP_PUSHDATA4,OP_1NEGATE:OP_1NEGATE,OP_RESERVED:OP_RESERVED,OP_TRUE:OP_TRUE,OP_1:OP_1,OP_2:OP_2,OP_3:OP_3,OP_4:OP_4,OP_5:OP_5,OP_6:OP_6,OP_7:OP_7,OP_8:OP_8,OP_9:OP_9,OP_10:OP_10,OP_11:OP_11,OP_12:OP_12,OP_13:OP_13,OP_14:OP_14,OP_15:OP_15,OP_16:OP_16,OP_NOP:OP_NOP,OP_VER:OP_VER,OP_IF:OP_IF,OP_NOTIF:OP_NOTIF,OP_VERIF:OP_VERIF,OP_VERNOTIF:OP_VERNOTIF,OP_ELSE:OP_ELSE,OP_ENDIF:OP_ENDIF,OP_VERIFY:OP_VERIFY,OP_RETURN:OP_RETURN,OP_TOALTSTACK:OP_TOALTSTACK,OP_FROMALTSTACK:OP_FROMALTSTACK,OP_2DROP:OP_2DROP,OP_2DUP:OP_2DUP,OP_3DUP:OP_3DUP,OP_2OVER:OP_2OVER,OP_2ROT:OP_2ROT,OP_2SWAP:OP_2SWAP,OP_IFDUP:OP_IFDUP,OP_DEPTH:OP_DEPTH,OP_DROP:OP_DROP,OP_DUP:OP_DUP,OP_NIP:OP_NIP,OP_OVER:OP_OVER,OP_PICK:OP_PICK,OP_ROLL:OP_ROLL,OP_ROT:OP_ROT,OP_SWAP:OP_SWAP,OP_TUCK:OP_TUCK,OP_CAT:OP_CAT,OP_SUBSTR:OP_SUBSTR,OP_LEFT:OP_LEFT,OP_RIGHT:OP_RIGHT,OP_SIZE:OP_SIZE,OP_INVERT:OP_INVERT,OP_AND:OP_AND,OP_OR:OP_OR,OP_XOR:OP_XOR,OP_EQUAL:OP_EQUAL,OP_EQUALVERIFY:OP_EQUALVERIFY,OP_RESERVED1:OP_RESERVED1,OP_RESERVED2:OP_RESERVED2,OP_1ADD:OP_1ADD,OP_1SUB:OP_1SUB,OP_2MUL:OP_2MUL,OP_2DIV:OP_2DIV,OP_NEGATE:OP_NEGATE,OP_ABS:OP_ABS,OP_NOT:OP_NOT,OP_0NOTEQUAL:OP_0NOTEQUAL,OP_ADD:OP_ADD,OP_SUB:OP_SUB,OP_MUL:OP_MUL,OP_DIV:OP_DIV,OP_MOD:OP_MOD,OP_LSHIFT:OP_LSHIFT,OP_RSHIFT:OP_RSHIFT,OP_BOOLAND:OP_BOOLAND,OP_BOOLOR:OP_BOOLOR,OP_NUMEQUAL:OP_NUMEQUAL,OP_NUMEQUALVERIFY:OP_NUMEQUALVERIFY,OP_NUMNOTEQUAL:OP_NUMNOTEQUAL,OP_LESSTHAN:OP_LESSTHAN,OP_GREATERTHAN:OP_GREATERTHAN,OP_LESSTHANOREQUAL:OP_LESSTHANOREQUAL,OP_GREATERTHANOREQUAL:OP_GREATERTHANOREQUAL,OP_MIN:OP_MIN,OP_MAX:OP_MAX,OP_WITHIN:OP_WITHIN,OP_RIPEMD160:OP_RIPEMD160,OP_SHA1:OP_SHA1,OP_SHA256:OP_SHA256,OP_HASH160:OP_HASH160,OP_HASH256:OP_HASH256,OP_CODESEPARATOR:OP_CODESEPARATOR,OP_CHECKSIG:OP_CHECKSIG,OP_CHECKSIGVERIFY:OP_CHECKSIGVERIFY,OP_CHECKMULTISIG:OP_CHECKMULTISIG,OP_CHECKMULTISIGVERIFY:OP_CHECKMULTISIGVERIFY,OP_NOP1:OP_NOP1,OP_NOP2:OP_NOP2,OP_CHECKLOCKTIMEVERIFY:OP_CHECKLOCKTIMEVERIFY,OP_NOP3:OP_NOP3,OP_CHECKSEQUENCEVERIFY:OP_CHECKSEQUENCEVERIFY,OP_NOP4:OP_NOP4,OP_NOP5:OP_NOP5,OP_NOP6:OP_NOP6,OP_NOP7:OP_NOP7,OP_NOP8:OP_NOP8,OP_NOP9:OP_NOP9,OP_NOP10:OP_NOP10,OP_PUBKEYHASH:OP_PUBKEYHASH,OP_PUBKEY:OP_PUBKEY,OP_INVALIDOPCODE:OP_INVALIDOPCODE},bitcoinOps=Object.freeze({OP_FALSE:OP_FALSE,OP_0:OP_0,OP_PUSHDATA1:OP_PUSHDATA1,OP_PUSHDATA2:OP_PUSHDATA2,OP_PUSHDATA4:OP_PUSHDATA4,OP_1NEGATE:OP_1NEGATE,OP_RESERVED:OP_RESERVED,OP_TRUE:OP_TRUE,OP_1:OP_1,OP_2:OP_2,OP_3:OP_3,OP_4:OP_4,OP_5:OP_5,OP_6:OP_6,OP_7:OP_7,OP_8:OP_8,OP_9:OP_9,OP_10:OP_10,OP_11:OP_11,OP_12:OP_12,OP_13:OP_13,OP_14:OP_14,OP_15:OP_15,OP_16:OP_16,OP_NOP:OP_NOP,OP_VER:OP_VER,OP_IF:OP_IF,OP_NOTIF:OP_NOTIF,OP_VERIF:OP_VERIF,OP_VERNOTIF:OP_VERNOTIF,OP_ELSE:OP_ELSE,OP_ENDIF:OP_ENDIF,OP_VERIFY:OP_VERIFY,OP_RETURN:OP_RETURN,OP_TOALTSTACK:OP_TOALTSTACK,OP_FROMALTSTACK:OP_FROMALTSTACK,OP_2DROP:OP_2DROP,OP_2DUP:OP_2DUP,OP_3DUP:OP_3DUP,OP_2OVER:OP_2OVER,OP_2ROT:OP_2ROT,OP_2SWAP:OP_2SWAP,OP_IFDUP:OP_IFDUP,OP_DEPTH:OP_DEPTH,OP_DROP:OP_DROP,OP_DUP:OP_DUP,OP_NIP:OP_NIP,OP_OVER:OP_OVER,OP_PICK:OP_PICK,OP_ROLL:OP_ROLL,OP_ROT:OP_ROT,OP_SWAP:OP_SWAP,OP_TUCK:OP_TUCK,OP_CAT:OP_CAT,OP_SUBSTR:OP_SUBSTR,OP_LEFT:OP_LEFT,OP_RIGHT:OP_RIGHT,OP_SIZE:OP_SIZE,OP_INVERT:OP_INVERT,OP_AND:OP_AND,OP_OR:OP_OR,OP_XOR:OP_XOR,OP_EQUAL:OP_EQUAL,OP_EQUALVERIFY:OP_EQUALVERIFY,OP_RESERVED1:OP_RESERVED1,OP_RESERVED2:OP_RESERVED2,OP_1ADD:OP_1ADD,OP_1SUB:OP_1SUB,OP_2MUL:OP_2MUL,OP_2DIV:OP_2DIV,OP_NEGATE:OP_NEGATE,OP_ABS:OP_ABS,OP_NOT:OP_NOT,OP_0NOTEQUAL:OP_0NOTEQUAL,OP_ADD:OP_ADD,OP_SUB:OP_SUB,OP_MUL:OP_MUL,OP_DIV:OP_DIV,OP_MOD:OP_MOD,OP_LSHIFT:OP_LSHIFT,OP_RSHIFT:OP_RSHIFT,OP_BOOLAND:OP_BOOLAND,OP_BOOLOR:OP_BOOLOR,OP_NUMEQUAL:OP_NUMEQUAL,OP_NUMEQUALVERIFY:OP_NUMEQUALVERIFY,OP_NUMNOTEQUAL:OP_NUMNOTEQUAL,OP_LESSTHAN:OP_LESSTHAN,OP_GREATERTHAN:OP_GREATERTHAN,OP_LESSTHANOREQUAL:OP_LESSTHANOREQUAL,OP_GREATERTHANOREQUAL:OP_GREATERTHANOREQUAL,OP_MIN:OP_MIN,OP_MAX:OP_MAX,OP_WITHIN:OP_WITHIN,OP_RIPEMD160:OP_RIPEMD160,OP_SHA1:OP_SHA1,OP_SHA256:OP_SHA256,OP_HASH160:OP_HASH160,OP_HASH256:OP_HASH256,OP_CODESEPARATOR:OP_CODESEPARATOR,OP_CHECKSIG:OP_CHECKSIG,OP_CHECKSIGVERIFY:OP_CHECKSIGVERIFY,OP_CHECKMULTISIG:OP_CHECKMULTISIG,OP_CHECKMULTISIGVERIFY:OP_CHECKMULTISIGVERIFY,OP_NOP1:OP_NOP1,OP_NOP2:OP_NOP2,OP_CHECKLOCKTIMEVERIFY:OP_CHECKLOCKTIMEVERIFY,OP_NOP3:OP_NOP3,OP_CHECKSEQUENCEVERIFY:OP_CHECKSEQUENCEVERIFY,OP_NOP4:OP_NOP4,OP_NOP5:OP_NOP5,OP_NOP6:OP_NOP6,OP_NOP7:OP_NOP7,OP_NOP8:OP_NOP8,OP_NOP9:OP_NOP9,OP_NOP10:OP_NOP10,OP_PUBKEYHASH:OP_PUBKEYHASH,OP_PUBKEY:OP_PUBKEY,OP_INVALIDOPCODE:OP_INVALIDOPCODE,default:index}),require$$0$4=getCjsExportFromNamespace(bitcoinOps);function encodingLength$2(e){return e<require$$0$4.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}function encode$a(e,t,r){var n=encodingLength$2(t);return 1===n?e.writeUInt8(t,r):2===n?(e.writeUInt8(require$$0$4.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===n?(e.writeUInt8(require$$0$4.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(require$$0$4.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n}function decode$b(e,t){var r,n,i=e.readUInt8(t);if(i<require$$0$4.OP_PUSHDATA1)r=i,n=1;else if(i===require$$0$4.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),n=2}else if(i===require$$0$4.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),n=3}else{if(t+5>e.length)return null;if(i!==require$$0$4.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=e.readUInt32LE(t+1),n=5}return{opcode:i,number:r,size:n}}var pushdataBitcoin={encodingLength:encodingLength$2,encode:encode$a,decode:decode$b},map$6={};for(var op in require$$0$4){var code=require$$0$4[op];map$6[code]=op}var map_1=map$6,script=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OPS=require$$0$4;const r=t.OPS.OP_RESERVED;function n(e){return types$4.Buffer(e)||function(e){return types$4.Number(e)&&(e===t.OPS.OP_0||e>=t.OPS.OP_1&&e<=t.OPS.OP_16||e===t.OPS.OP_1NEGATE)}(e)}function i(e){return types$4.Array(e)&&e.every(n)}function o(e){return 0===e.length?t.OPS.OP_0:1===e.length?e[0]>=1&&e[0]<=16?r+e[0]:129===e[0]?t.OPS.OP_1NEGATE:void 0:void 0}function s(e){return Buffer.isBuffer(e)}function a(e){return Buffer.isBuffer(e)}function c(e){if(s(e))return e;typeforce_1(types$4.Array,e);const t=e.reduce((e,t)=>a(t)?1===t.length&&void 0!==o(t)?e+1:e+pushdataBitcoin.encodingLength(t.length)+t.length:e+1,0),r=Buffer.allocUnsafe(t);let n=0;if(e.forEach(e=>{if(a(e)){const t=o(e);if(void 0!==t)return r.writeUInt8(t,n),void(n+=1);n+=pushdataBitcoin.encode(r,e.length,n),e.copy(r,n),n+=e.length}else r.writeUInt8(e,n),n+=1}),n!==r.length)throw new Error("Could not decode chunks");return r}function u(e){if(r=e,types$4.Array(r))return e;var r;typeforce_1(types$4.Buffer,e);const n=[];let i=0;for(;i<e.length;){const r=e[i];if(r>t.OPS.OP_0&&r<=t.OPS.OP_PUSHDATA4){const t=pushdataBitcoin.decode(e,i);if(null===t)return null;if((i+=t.size)+t.number>e.length)return null;const r=e.slice(i,i+t.number);i+=t.number;const s=o(r);void 0!==s?n.push(s):n.push(r)}else n.push(r),i+=1}return n}function f(e){const t=-129&e;return t>0&&t<4}t.isPushOnly=i,t.compile=c,t.decompile=u,t.toASM=function(e){return s(e)&&(e=u(e)),e.map(e=>{if(a(e)){const t=o(e);if(void 0===t)return e.toString("hex");e=t}return map_1[e]}).join(" ")},t.fromASM=function(e){return typeforce_1(types$4.String,e),c(e.split(" ").map(e=>void 0!==t.OPS[e]?t.OPS[e]:(typeforce_1(types$4.Hex,e),Buffer.from(e,"hex"))))},t.toStack=function(e){return e=u(e),typeforce_1(i,e),e.map(e=>a(e)?e:e===t.OPS.OP_0?Buffer.allocUnsafe(0):script_number.encode(e-r))},t.isCanonicalPubKey=function(e){return tinySecp256k1.isPoint(e)},t.isDefinedHashType=f,t.isCanonicalScriptSignature=function(e){return!!Buffer.isBuffer(e)&&!!f(e[e.length-1])&&bip66.check(e.slice(0,-1))},t.number=script_number,t.signature=script_signature});unwrapExports(script);var script_1=script.OPS,script_2=script.isPushOnly,script_3=script.compile,script_4=script.decompile,script_5=script.toASM,script_6=script.fromASM,script_7=script.toStack,script_8=script.isCanonicalPubKey,script_9=script.isDefinedHashType,script_10=script.isCanonicalScriptSignature,script_11=script.number,script_12=script.signature,lazy$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){let t;return()=>void 0!==t?t:t=e()}});unwrapExports(lazy$1);var lazy_1=lazy$1.prop,lazy_2=lazy$1.value,embed=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),typeforce_1({network:typeforce_1.maybe(typeforce_1.Object),output:typeforce_1.maybe(typeforce_1.Buffer),data:typeforce_1.maybe(typeforce_1.arrayOf(typeforce_1.Buffer))},e);const n={network:e.network||networks.bitcoin};if(lazy$1.prop(n,"output",()=>{if(e.data)return script.compile([r.OP_RETURN].concat(e.data))}),lazy$1.prop(n,"data",()=>{if(e.output)return script.decompile(e.output).slice(1)}),t.validate&&e.output){const t=script.decompile(e.output);if(t[0]!==r.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(typeforce_1.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}});unwrapExports(embed);var embed_1=embed.p2data,p2ms_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script.OPS,n=r.OP_RESERVED;function i(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}t.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function o(e){return script.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===r.OP_0)}t=Object.assign({validate:!0},t||{}),typeforce_1({network:typeforce_1.maybe(typeforce_1.Object),m:typeforce_1.maybe(typeforce_1.Number),n:typeforce_1.maybe(typeforce_1.Number),output:typeforce_1.maybe(typeforce_1.Buffer),pubkeys:typeforce_1.maybe(typeforce_1.arrayOf(tinySecp256k1.isPoint)),signatures:typeforce_1.maybe(typeforce_1.arrayOf(o)),input:typeforce_1.maybe(typeforce_1.Buffer)},e);const s={network:e.network||networks.bitcoin};let a=[],c=!1;function u(e){c||(c=!0,a=script.decompile(e),s.m=a[0]-n,s.n=a[a.length-2]-n,s.pubkeys=a.slice(1,-2))}if(lazy$1.prop(s,"output",()=>{if(e.m&&s.n&&e.pubkeys)return script.compile([].concat(n+e.m,e.pubkeys,n+s.n,r.OP_CHECKMULTISIG))}),lazy$1.prop(s,"m",()=>{if(s.output)return u(s.output),s.m}),lazy$1.prop(s,"n",()=>{if(s.pubkeys)return s.pubkeys.length}),lazy$1.prop(s,"pubkeys",()=>{if(e.output)return u(e.output),s.pubkeys}),lazy$1.prop(s,"signatures",()=>{if(e.input)return script.decompile(e.input).slice(1)}),lazy$1.prop(s,"input",()=>{if(e.signatures)return script.compile([r.OP_0].concat(e.signatures))}),lazy$1.prop(s,"witness",()=>{if(s.input)return[]}),t.validate){if(e.output){if(u(e.output),!typeforce_1.Number(a[0]))throw new TypeError("Output is invalid");if(!typeforce_1.Number(a[a.length-2]))throw new TypeError("Output is invalid");if(a[a.length-1]!==r.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(s.m<=0||s.n>16||s.m>s.n||s.n!==a.length-3)throw new TypeError("Output is invalid");if(!s.pubkeys.every(e=>tinySecp256k1.isPoint(e)))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==s.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==s.n)throw new TypeError("n mismatch");if(e.pubkeys&&!i(e.pubkeys,s.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(s.n=e.pubkeys.length,s.n<s.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<s.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>s.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==r.OP_0)throw new TypeError("Input is invalid");if(0===s.signatures.length||!s.signatures.every(o))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!i(e.signatures,s.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(s,e)}});unwrapExports(p2ms_1);var p2ms_2=p2ms_1.p2ms,p2pk_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script.OPS;t.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),typeforce_1({network:typeforce_1.maybe(typeforce_1.Object),output:typeforce_1.maybe(typeforce_1.Buffer),pubkey:typeforce_1.maybe(tinySecp256k1.isPoint),signature:typeforce_1.maybe(script.isCanonicalScriptSignature),input:typeforce_1.maybe(typeforce_1.Buffer)},e);const n=lazy$1.value(()=>script.decompile(e.input)),i={network:e.network||networks.bitcoin};if(lazy$1.prop(i,"output",()=>{if(e.pubkey)return script.compile([e.pubkey,r.OP_CHECKSIG])}),lazy$1.prop(i,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),lazy$1.prop(i,"signature",()=>{if(e.input)return n()[0]}),lazy$1.prop(i,"input",()=>{if(e.signature)return script.compile([e.signature])}),lazy$1.prop(i,"witness",()=>{if(i.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==r.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!tinySecp256k1.isPoint(i.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(i.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==n().length)throw new TypeError("Input is invalid");if(!script.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,e)}});unwrapExports(p2pk_1);var p2pk_2=p2pk_1.p2pk,crypto$f=createCommonjsModule(function(e,t){function r(e){try{return createHash("rmd160").update(e).digest()}catch(t){return createHash("ripemd160").update(e).digest()}}function n(e){return createHash("sha256").update(e).digest()}Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=r,t.sha1=function(e){return createHash("sha1").update(e).digest()},t.sha256=n,t.hash160=function(e){return r(n(e))},t.hash256=function(e){return n(n(e))}});unwrapExports(crypto$f);var crypto_1$2=crypto$f.ripemd160,crypto_2$1=crypto$f.sha1,crypto_3=crypto$f.sha256,crypto_4=crypto$f.hash160,crypto_5=crypto$f.hash256,p2pkh_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script.OPS;t.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),typeforce_1({network:typeforce_1.maybe(typeforce_1.Object),address:typeforce_1.maybe(typeforce_1.String),hash:typeforce_1.maybe(typeforce_1.BufferN(20)),output:typeforce_1.maybe(typeforce_1.BufferN(25)),pubkey:typeforce_1.maybe(tinySecp256k1.isPoint),signature:typeforce_1.maybe(script.isCanonicalScriptSignature),input:typeforce_1.maybe(typeforce_1.Buffer)},e);const n=lazy$1.value(()=>{const t=bs58check.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}}),i=lazy$1.value(()=>script.decompile(e.input)),o=e.network||networks.bitcoin,s={network:o};if(lazy$1.prop(s,"address",()=>{if(!s.hash)return;const e=Buffer.allocUnsafe(21);return e.writeUInt8(o.pubKeyHash,0),s.hash.copy(e,1),bs58check.encode(e)}),lazy$1.prop(s,"hash",()=>e.output?e.output.slice(3,23):e.address?n().hash:e.pubkey||s.pubkey?crypto$f.hash160(e.pubkey||s.pubkey):void 0),lazy$1.prop(s,"output",()=>{if(s.hash)return script.compile([r.OP_DUP,r.OP_HASH160,s.hash,r.OP_EQUALVERIFY,r.OP_CHECKSIG])}),lazy$1.prop(s,"pubkey",()=>{if(e.input)return i()[1]}),lazy$1.prop(s,"signature",()=>{if(e.input)return i()[0]}),lazy$1.prop(s,"input",()=>{if(e.pubkey&&e.signature)return script.compile([e.signature,e.pubkey])}),lazy$1.prop(s,"witness",()=>{if(s.input)return[]}),t.validate){let t=Buffer.from([]);if(e.address){if(n().version!==o.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==n().hash.length)throw new TypeError("Invalid address");t=n().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==r.OP_DUP||e.output[1]!==r.OP_HASH160||20!==e.output[2]||e.output[23]!==r.OP_EQUALVERIFY||e.output[24]!==r.OP_CHECKSIG)throw new TypeError("Output is invalid");const n=e.output.slice(3,23);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.pubkey){const r=crypto$f.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.input){const r=i();if(2!==r.length)throw new TypeError("Input is invalid");if(!script.isCanonicalScriptSignature(r[0]))throw new TypeError("Input has invalid signature");if(!tinySecp256k1.isPoint(r[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(r[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(r[1]))throw new TypeError("Pubkey mismatch");const n=crypto$f.hash160(r[1]);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch")}}return Object.assign(s,e)}});unwrapExports(p2pkh_1);var p2pkh_2=p2pkh_1.p2pkh,p2sh_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script.OPS;t.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),typeforce_1({network:typeforce_1.maybe(typeforce_1.Object),address:typeforce_1.maybe(typeforce_1.String),hash:typeforce_1.maybe(typeforce_1.BufferN(20)),output:typeforce_1.maybe(typeforce_1.BufferN(23)),redeem:typeforce_1.maybe({network:typeforce_1.maybe(typeforce_1.Object),output:typeforce_1.maybe(typeforce_1.Buffer),input:typeforce_1.maybe(typeforce_1.Buffer),witness:typeforce_1.maybe(typeforce_1.arrayOf(typeforce_1.Buffer))}),input:typeforce_1.maybe(typeforce_1.Buffer),witness:typeforce_1.maybe(typeforce_1.arrayOf(typeforce_1.Buffer))},e);let n=e.network;n||(n=e.redeem&&e.redeem.network||networks.bitcoin);const i={network:n},o=lazy$1.value(()=>{const t=bs58check.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}}),s=lazy$1.value(()=>script.decompile(e.input)),a=lazy$1.value(()=>{const t=s();return{network:n,output:t[t.length-1],input:script.compile(t.slice(0,-1)),witness:e.witness||[]}});if(lazy$1.prop(i,"address",()=>{if(!i.hash)return;const e=Buffer.allocUnsafe(21);return e.writeUInt8(i.network.scriptHash,0),i.hash.copy(e,1),bs58check.encode(e)}),lazy$1.prop(i,"hash",()=>e.output?e.output.slice(2,22):e.address?o().hash:i.redeem&&i.redeem.output?crypto$f.hash160(i.redeem.output):void 0),lazy$1.prop(i,"output",()=>{if(i.hash)return script.compile([r.OP_HASH160,i.hash,r.OP_EQUAL])}),lazy$1.prop(i,"redeem",()=>{if(e.input)return a()}),lazy$1.prop(i,"input",()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return script.compile([].concat(script.decompile(e.redeem.input),e.redeem.output))}),lazy$1.prop(i,"witness",()=>i.redeem&&i.redeem.witness?i.redeem.witness:i.input?[]:void 0),t.validate){let t=Buffer.from([]);if(e.address){if(o().version!==n.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==o().hash.length)throw new TypeError("Invalid address");t=o().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==r.OP_HASH160||20!==e.output[1]||e.output[22]!==r.OP_EQUAL)throw new TypeError("Output is invalid");const n=e.output.slice(2,22);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}const i=e=>{if(e.output){const r=script.decompile(e.output);if(!r||r.length<1)throw new TypeError("Redeem.output too short");const n=crypto$f.hash160(e.output);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.input){const t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw new TypeError("Empty input");if(t&&r)throw new TypeError("Input and witness provided");if(t){const t=script.decompile(e.input);if(!script.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=s();if(!e||e.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(a().output))throw new TypeError("Input is invalid");i(a())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==n)throw new TypeError("Network mismatch");if(e.input){const t=a();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw new TypeError("Redeem.input mismatch")}i(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(i,e)}});unwrapExports(p2sh_1);for(var p2sh_2=p2sh_1.p2sh,ALPHABET$1="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={},z=0;z<ALPHABET$1.length;z++){var x=ALPHABET$1.charAt(z);if(void 0!==ALPHABET_MAP[x])throw new TypeError(x+" is ambiguous");ALPHABET_MAP[x]=z}function polymodStep(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function prefixChk(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)throw new Error("Invalid prefix ("+e+")");t=polymodStep(t)^n>>5}for(t=polymodStep(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=polymodStep(t)^31&i}return t}function encode$b(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");for(var n=prefixChk(e=e.toLowerCase()),i=e+"1",o=0;o<t.length;++o){var s=t[o];if(s>>5!=0)throw new Error("Non 5-bit word");n=polymodStep(n)^s,i+=ALPHABET$1.charAt(s)}for(o=0;o<6;++o)n=polymodStep(n);for(n^=1,o=0;o<6;++o){var a=n>>5*(5-o)&31;i+=ALPHABET$1.charAt(a)}return i}function decode$c(e,t){if(t=t||90,e.length<8)throw new TypeError(e+" too short");if(e.length>t)throw new TypeError("Exceeds length limit");var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)throw new Error("Mixed-case string "+e);var i=(e=r).lastIndexOf("1");if(-1===i)throw new Error("No separator character for "+e);if(0===i)throw new Error("Missing prefix for "+e);var o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw new Error("Data too short");for(var a=prefixChk(o),c=[],u=0;u<s.length;++u){var f=s.charAt(u),l=ALPHABET_MAP[f];if(void 0===l)throw new Error("Unknown character "+f);a=polymodStep(a)^l,u+6>=s.length||c.push(l)}if(1!==a)throw new Error("Invalid checksum for "+e);return{prefix:o,words:c}}function convert$3(e,t,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],c=0;c<e.length;++c)for(i=i<<t|e[c],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)throw new Error("Excess padding");if(i<<r-o&s)throw new Error("Non-zero padding")}return a}function toWords(e){return convert$3(e,8,5,!0)}function fromWords(e){return convert$3(e,5,8,!1)}var bech32={decode:decode$c,encode:encode$b,toWords:toWords,fromWords:fromWords},p2wpkh_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script.OPS,n=Buffer.alloc(0);t.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),typeforce_1({address:typeforce_1.maybe(typeforce_1.String),hash:typeforce_1.maybe(typeforce_1.BufferN(20)),input:typeforce_1.maybe(typeforce_1.BufferN(0)),network:typeforce_1.maybe(typeforce_1.Object),output:typeforce_1.maybe(typeforce_1.BufferN(22)),pubkey:typeforce_1.maybe(tinySecp256k1.isPoint),signature:typeforce_1.maybe(script.isCanonicalScriptSignature),witness:typeforce_1.maybe(typeforce_1.arrayOf(typeforce_1.Buffer))},e);const i=lazy$1.value(()=>{const t=bech32.decode(e.address),r=t.words.shift(),n=bech32.fromWords(t.words);return{version:r,prefix:t.prefix,data:Buffer.from(n)}}),o=e.network||networks.bitcoin,s={network:o};if(lazy$1.prop(s,"address",()=>{if(!s.hash)return;const e=bech32.toWords(s.hash);return e.unshift(0),bech32.encode(o.bech32,e)}),lazy$1.prop(s,"hash",()=>e.output?e.output.slice(2,22):e.address?i().data:e.pubkey||s.pubkey?crypto$f.hash160(e.pubkey||s.pubkey):void 0),lazy$1.prop(s,"output",()=>{if(s.hash)return script.compile([r.OP_0,s.hash])}),lazy$1.prop(s,"pubkey",()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0),lazy$1.prop(s,"signature",()=>{if(e.witness)return e.witness[0]}),lazy$1.prop(s,"input",()=>{if(s.witness)return n}),lazy$1.prop(s,"witness",()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]}),t.validate){let t=Buffer.from([]);if(e.address){if(o&&o.bech32!==i().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==i().version)throw new TypeError("Invalid address version");if(20!==i().data.length)throw new TypeError("Invalid address data");t=i().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==r.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){const r=crypto$f.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!script.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!tinySecp256k1.isPoint(e.witness[1]))throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");const r=crypto$f.hash160(e.witness[1]);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch")}}return Object.assign(s,e)}});unwrapExports(p2wpkh_1);var p2wpkh_2=p2wpkh_1.p2wpkh,p2wsh_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script.OPS,n=Buffer.alloc(0);t.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),typeforce_1({network:typeforce_1.maybe(typeforce_1.Object),address:typeforce_1.maybe(typeforce_1.String),hash:typeforce_1.maybe(typeforce_1.BufferN(32)),output:typeforce_1.maybe(typeforce_1.BufferN(34)),redeem:typeforce_1.maybe({input:typeforce_1.maybe(typeforce_1.Buffer),network:typeforce_1.maybe(typeforce_1.Object),output:typeforce_1.maybe(typeforce_1.Buffer),witness:typeforce_1.maybe(typeforce_1.arrayOf(typeforce_1.Buffer))}),input:typeforce_1.maybe(typeforce_1.BufferN(0)),witness:typeforce_1.maybe(typeforce_1.arrayOf(typeforce_1.Buffer))},e);const i=lazy$1.value(()=>{const t=bech32.decode(e.address),r=t.words.shift(),n=bech32.fromWords(t.words);return{version:r,prefix:t.prefix,data:Buffer.from(n)}}),o=lazy$1.value(()=>script.decompile(e.redeem.input));let s=e.network;s||(s=e.redeem&&e.redeem.network||networks.bitcoin);const a={network:s};if(lazy$1.prop(a,"address",()=>{if(!a.hash)return;const e=bech32.toWords(a.hash);return e.unshift(0),bech32.encode(s.bech32,e)}),lazy$1.prop(a,"hash",()=>e.output?e.output.slice(2):e.address?i().data:a.redeem&&a.redeem.output?crypto$f.sha256(a.redeem.output):void 0),lazy$1.prop(a,"output",()=>{if(a.hash)return script.compile([r.OP_0,a.hash])}),lazy$1.prop(a,"redeem",()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:n,witness:e.witness.slice(0,-1)}}),lazy$1.prop(a,"input",()=>{if(a.witness)return n}),lazy$1.prop(a,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=script.toStack(o());return a.redeem=Object.assign({witness:t},e.redeem),a.redeem.input=n,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),t.validate){let t=Buffer.from([]);if(e.address){if(i().prefix!==s.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==i().version)throw new TypeError("Invalid address version");if(32!==i().data.length)throw new TypeError("Invalid address data");t=i().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==r.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const n=e.output.slice(2);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem){if(e.redeem.network&&e.redeem.network!==s)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===script.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");const r=crypto$f.sha256(e.redeem.output);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.redeem.input&&!script.isPushOnly(o()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch")}if(e.witness&&e.redeem&&e.redeem.output&&!e.redeem.output.equals(e.witness[e.witness.length-1]))throw new TypeError("Witness and redeem.output mismatch")}return Object.assign(a,e)}});unwrapExports(p2wsh_1);var p2wsh_2=p2wsh_1.p2wsh,payments=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.embed=embed.p2data,t.p2ms=p2ms_1.p2ms,t.p2pk=p2pk_1.p2pk,t.p2pkh=p2pkh_1.p2pkh,t.p2sh=p2sh_1.p2sh,t.p2wpkh=p2wpkh_1.p2wpkh,t.p2wsh=p2wsh_1.p2wsh});unwrapExports(payments);var payments_1=payments.embed,payments_2=payments.p2ms,payments_3=payments.p2pk,payments_4=payments.p2pkh,payments_5=payments.p2sh,payments_6=payments.p2wpkh,payments_7=payments.p2wsh,address$1=createCommonjsModule(function(e,t){function r(e){const t=bs58check.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function n(e){const t=bech32.decode(e),r=bech32.fromWords(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:Buffer.from(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase58Check=r,t.fromBech32=n,t.toBase58Check=function(e,t){typeforce_1(types$4.tuple(types$4.Hash160bit,types$4.UInt8),arguments);const r=Buffer.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),bs58check.encode(r)},t.toBech32=function(e,t,r){const n=bech32.toWords(e);return n.unshift(t),bech32.encode(r,n)},t.fromOutputScript=function(e,t){t=t||networks.bitcoin;try{return payments.p2pkh({output:e,network:t}).address}catch(e){}try{return payments.p2sh({output:e,network:t}).address}catch(e){}try{return payments.p2wpkh({output:e,network:t}).address}catch(e){}try{return payments.p2wsh({output:e,network:t}).address}catch(e){}throw new Error(script.toASM(e)+" has no matching Address")},t.toOutputScript=function(e,t){let i,o;t=t||networks.bitcoin;try{i=r(e)}catch(e){}if(i){if(i.version===t.pubKeyHash)return payments.p2pkh({hash:i.hash}).output;if(i.version===t.scriptHash)return payments.p2sh({hash:i.hash}).output}else{try{o=n(e)}catch(e){}if(o){if(o.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===o.version){if(20===o.data.length)return payments.p2wpkh({hash:o.data}).output;if(32===o.data.length)return payments.p2wsh({hash:o.data}).output}}}throw new Error(e+" has no matching Script")}});unwrapExports(address$1);var address_1$1=address$1.fromBase58Check,address_2$1=address$1.fromBech32,address_3$1=address$1.toBase58Check,address_4=address$1.toBech32,address_5=address$1.fromOutputScript,address_6=address$1.toOutputScript,ecpair=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=typeforce_1.maybe(typeforce_1.compile({compressed:types$4.maybe(types$4.Boolean),network:types$4.maybe(types$4.Network)}));class n{constructor(e,t,r){this.__D=e,this.__Q=t,void 0===r&&(r={}),this.compressed=void 0===r.compressed||r.compressed,this.network=r.network||networks.bitcoin,void 0!==t&&(this.__Q=tinySecp256k1.pointCompress(t,this.compressed))}get privateKey(){return this.__D}get publicKey(){return this.__Q||(this.__Q=tinySecp256k1.pointFromScalar(this.__D,this.compressed)),this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return wif.encode(this.network.wif,this.__D,this.compressed)}sign(e,t=!1){if(!this.__D)throw new Error("Missing private key");if(!1===t)return tinySecp256k1.sign(e,this.__D);{let t=tinySecp256k1.sign(e,this.__D);const r=Buffer.alloc(32,0);let n=0;for(;t[0]>127;)n++,r.writeUIntLE(n,0,6),t=tinySecp256k1.signWithEntropy(e,this.__D,r);return t}}verify(e,t){return tinySecp256k1.verify(e,this.publicKey,t)}}function i(e,t){if(typeforce_1(types$4.Buffer256bit,e),!tinySecp256k1.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return typeforce_1(r,t),new n(e,void 0,t)}t.fromPrivateKey=i,t.fromPublicKey=function(e,t){return typeforce_1(tinySecp256k1.isPoint,e),typeforce_1(r,t),new n(void 0,e,t)},t.fromWIF=function(e,t){const r=wif.decode(e),n=r.version;if(types$4.Array(t)){if(!(t=t.filter(e=>n===e.wif).pop()))throw new Error("Unknown network version")}else if(t=t||networks.bitcoin,n!==t.wif)throw new Error("Invalid network version");return i(r.privateKey,{compressed:r.compressed,network:t})},t.makeRandom=function(e){typeforce_1(r,e),void 0===e&&(e={});const t=e.rng||randombytes;let n;do{n=t(32),typeforce_1(types$4.Buffer256bit,n)}while(!tinySecp256k1.isPrivate(n));return i(n,e)}});unwrapExports(ecpair);var ecpair_1=ecpair.fromPrivateKey,ecpair_2=ecpair.fromPublicKey,ecpair_3=ecpair.fromWIF,ecpair_4=ecpair.makeRandom,bufferutils=createCommonjsModule(function(e,t){function r(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}Object.defineProperty(t,"__esModule",{value:!0}),t.readUInt64LE=function(e,t){const n=e.readUInt32LE(t);let i=e.readUInt32LE(t+4);return r((i*=4294967296)+n,9007199254740991),i+n},t.writeUInt64LE=function(e,t,n){return r(t,9007199254740991),e.writeInt32LE(-1&t,n),e.writeUInt32LE(Math.floor(t/4294967296),n+4),n+8},t.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}});unwrapExports(bufferutils);var bufferutils_1=bufferutils.readUInt64LE,bufferutils_2=bufferutils.writeUInt64LE,bufferutils_3=bufferutils.reverseBuffer,Buffer$N=safeBuffer.Buffer,MAX_SAFE_INTEGER$8=9007199254740991;function checkUInt53(e){if(e<0||e>MAX_SAFE_INTEGER$8||e%1!=0)throw new RangeError("value out of range")}function encode$c(e,t,r){if(checkUInt53(e),t||(t=Buffer$N.allocUnsafe(encodingLength$3(e))),!Buffer$N.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),encode$c.bytes=1):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),encode$c.bytes=3):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),encode$c.bytes=5):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),encode$c.bytes=9),t}function decode$d(e,t){if(!Buffer$N.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);var r=e.readUInt8(t);if(r<253)return decode$d.bytes=1,r;if(253===r)return decode$d.bytes=3,e.readUInt16LE(t+1);if(254===r)return decode$d.bytes=5,e.readUInt32LE(t+1);decode$d.bytes=9;var n=e.readUInt32LE(t+1),i=4294967296*e.readUInt32LE(t+5)+n;return checkUInt53(i),i}function encodingLength$3(e){return checkUInt53(e),e<253?1:e<=65535?3:e<=4294967295?5:9}var varuintBitcoin={encode:encode$c,decode:decode$d,encodingLength:encodingLength$3},transaction$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=bufferutils,n=script;function i(e){const t=e.length;return varuintBitcoin.encodingLength(t)+t}const o=Buffer.allocUnsafe(0),s=[],a=Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),c=Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),u=Buffer.from("ffffffffffffffff","hex"),f={script:o,valueBuffer:u};class l{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(e,t){let r=0;function n(t){return r+=t,e.slice(r-t,r)}function i(){const t=e.readUInt32LE(r);return r+=4,t}function o(){const t=bufferutils.readUInt64LE(e,r);return r+=8,t}function a(){const t=varuintBitcoin.decode(e,r);return r+=varuintBitcoin.decode.bytes,t}function c(){return n(a())}function u(){const e=a(),t=[];for(let r=0;r<e;r++)t.push(c());return t}const f=new l;f.version=function(){const t=e.readInt32LE(r);return r+=4,t}();const d=e.readUInt8(r),h=e.readUInt8(r+1);let p=!1;d===l.ADVANCED_TRANSACTION_MARKER&&h===l.ADVANCED_TRANSACTION_FLAG&&(r+=2,p=!0);const b=a();for(let e=0;e<b;++e)f.ins.push({hash:n(32),index:i(),script:c(),sequence:i(),witness:s});const m=a();for(let e=0;e<m;++e)f.outs.push({value:o(),script:c()});if(p){for(let e=0;e<b;++e)f.ins[e].witness=u();if(!f.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(f.locktime=i(),t)return f;if(r!==e.length)throw new Error("Transaction has unexpected data");return f}static fromHex(e){return l.fromBuffer(Buffer.from(e,"hex"),!1)}static isCoinbaseHash(e){typeforce_1(types$4.Hash256bit,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}isCoinbase(){return 1===this.ins.length&&l.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return typeforce_1(types$4.tuple(types$4.Hash256bit,types$4.UInt32,types$4.maybe(types$4.UInt32),types$4.maybe(types$4.Buffer)),arguments),types$4.Null(r)&&(r=l.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||o,sequence:r,witness:s})-1}addOutput(e,t){return typeforce_1(types$4.tuple(types$4.Buffer,types$4.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some(e=>0!==e.witness.length)}weight(){return 3*this.__byteLength(!1)+this.__byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(){return this.__byteLength(!0)}clone(){const e=new l;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness})),e.outs=this.outs.map(e=>({script:e.script,value:e.value})),e}hashForSignature(e,t,r){if(typeforce_1(types$4.tuple(types$4.UInt32,types$4.Buffer,types$4.Number),arguments),e>=this.ins.length)return c;const i=script.compile(script.decompile(t).filter(e=>e!==n.OPS.OP_CODESEPARATOR)),s=this.clone();if((31&r)===l.SIGHASH_NONE)s.outs=[],s.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)});else if((31&r)===l.SIGHASH_SINGLE){if(e>=this.outs.length)return c;s.outs.length=e+1;for(let t=0;t<e;t++)s.outs[t]=f;s.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)})}r&l.SIGHASH_ANYONECANPAY?(s.ins=[s.ins[e]],s.ins[0].script=i):(s.ins.forEach(e=>{e.script=o}),s.ins[e].script=i);const a=Buffer.allocUnsafe(s.__byteLength(!1)+4);return a.writeInt32LE(r,a.length-4),s.__toBuffer(a,0,!1),crypto$f.hash256(a)}hashForWitnessV0(e,t,r,n){typeforce_1(types$4.tuple(types$4.UInt32,types$4.Buffer,types$4.Satoshi,types$4.UInt32),arguments);let o=Buffer.from([]),s=0;function c(e){s+=e.copy(o,s)}function u(e){s=o.writeUInt32LE(e,s)}function f(e){s=bufferutils.writeUInt64LE(o,e,s)}function d(e){!function(e){varuintBitcoin.encode(e,o,s),s+=varuintBitcoin.encode.bytes}(e.length),c(e)}let h=a,p=a,b=a;if(n&l.SIGHASH_ANYONECANPAY||(o=Buffer.allocUnsafe(36*this.ins.length),s=0,this.ins.forEach(e=>{c(e.hash),u(e.index)}),p=crypto$f.hash256(o)),n&l.SIGHASH_ANYONECANPAY||(31&n)===l.SIGHASH_SINGLE||(31&n)===l.SIGHASH_NONE||(o=Buffer.allocUnsafe(4*this.ins.length),s=0,this.ins.forEach(e=>{u(e.sequence)}),b=crypto$f.hash256(o)),(31&n)!==l.SIGHASH_SINGLE&&(31&n)!==l.SIGHASH_NONE){const e=this.outs.reduce((e,t)=>e+8+i(t.script),0);o=Buffer.allocUnsafe(e),s=0,this.outs.forEach(e=>{f(e.value),d(e.script)}),h=crypto$f.hash256(o)}else if((31&n)===l.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e];o=Buffer.allocUnsafe(8+i(t.script)),s=0,f(t.value),d(t.script),h=crypto$f.hash256(o)}o=Buffer.allocUnsafe(156+i(t)),s=0;const m=this.ins[e];return u(this.version),c(p),c(b),c(m.hash),u(m.index),d(t),f(r),u(m.sequence),c(h),u(this.locktime),u(n),crypto$f.hash256(o)}getHash(e){return e&&this.isCoinbase()?Buffer.alloc(32,0):crypto$f.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return r.reverseBuffer(this.getHash(!1)).toString("hex")}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){typeforce_1(types$4.tuple(types$4.Number,types$4.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){typeforce_1(types$4.tuple(types$4.Number,[types$4.Buffer]),arguments),this.ins[e].witness=t}__byteLength(e){const t=e&&this.hasWitnesses();return(t?10:8)+varuintBitcoin.encodingLength(this.ins.length)+varuintBitcoin.encodingLength(this.outs.length)+this.ins.reduce((e,t)=>e+40+i(t.script),0)+this.outs.reduce((e,t)=>e+8+i(t.script),0)+(t?this.ins.reduce((e,t)=>e+function(e){const t=e.length;return varuintBitcoin.encodingLength(t)+e.reduce((e,t)=>e+i(t),0)}(t.witness),0):0)}__toBuffer(e,t,r){e||(e=Buffer.allocUnsafe(this.__byteLength(r)));let n=t||0;function i(t){n+=t.copy(e,n)}function o(t){n=e.writeUInt8(t,n)}function s(t){n=e.writeUInt32LE(t,n)}function a(t){varuintBitcoin.encode(t,e,n),n+=varuintBitcoin.encode.bytes}function c(e){a(e.length),i(e)}!function(t){n=e.writeInt32LE(t,n)}(this.version);const u=r&&this.hasWitnesses();return u&&(o(l.ADVANCED_TRANSACTION_MARKER),o(l.ADVANCED_TRANSACTION_FLAG)),a(this.ins.length),this.ins.forEach(e=>{i(e.hash),s(e.index),c(e.script),s(e.sequence)}),a(this.outs.length),this.outs.forEach(t=>{!function(e){return void 0!==e.value}(t)?i(t.valueBuffer):function(t){n=bufferutils.writeUInt64LE(e,t,n)}(t.value),c(t.script)}),u&&this.ins.forEach(e=>{!function(e){a(e.length),e.forEach(c)}(e.witness)}),s(this.locktime),void 0!==t?e.slice(t,n):e}}l.DEFAULT_SEQUENCE=4294967295,l.SIGHASH_ALL=1,l.SIGHASH_NONE=2,l.SIGHASH_SINGLE=3,l.SIGHASH_ANYONECANPAY=128,l.ADVANCED_TRANSACTION_MARKER=0,l.ADVANCED_TRANSACTION_FLAG=1,t.Transaction=l});unwrapExports(transaction$1);var transaction_1$1=transaction$1.Transaction,fastRoot=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");for(var r=e.length,n=e.concat();r>1;){for(var i=0,o=0;o<r;o+=2,++i){var s=n[o],a=o+1===r?s:n[o+1],c=Buffer.concat([s,a]);n[i]=t(c)}r=i}return n[0]},block$2=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=new TypeError("Cannot compute merkle root for zero transactions"),n=new TypeError("Cannot compute witness commit for non-segwit block");class i{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");let t=0;const r=r=>(t+=r,e.slice(t-r,t)),n=()=>{const r=e.readUInt32LE(t);return t+=4,r},o=new i;if(o.version=(()=>{const r=e.readInt32LE(t);return t+=4,r})(),o.prevHash=r(32),o.merkleRoot=r(32),o.timestamp=n(),o.bits=n(),o.nonce=n(),80===e.length)return o;const s=()=>{const r=transaction$1.Transaction.fromBuffer(e.slice(t),!0);return t+=r.byteLength(),r},a=(()=>{const r=varuintBitcoin.decode(e,t);return t+=varuintBitcoin.decode.bytes,r})();o.transactions=[];for(let e=0;e<a;++e){const e=s();o.transactions.push(e)}const c=o.getWitnessCommit();return c&&(o.witnessCommit=c),o}static fromHex(e){return i.fromBuffer(Buffer.from(e,"hex"))}static calculateTarget(e){const t=((4278190080&e)>>24)-3,r=8388607&e,n=Buffer.alloc(32,0);return n.writeUIntBE(r,29-t,3),n}static calculateMerkleRoot(e,t){if(typeforce_1([{getHash:types$4.Function}],e),0===e.length)throw r;if(t&&!o(e))throw n;const i=e.map(e=>e.getHash(t)),s=fastRoot(i,crypto$f.hash256);return t?crypto$f.hash256(Buffer.concat([s,e[0].ins[0].witness[0]])):s}getWitnessCommit(){if(!o(this.transactions))return null;const e=this.transactions[0].outs.filter(e=>e.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex"))).map(e=>e.script.slice(6,38));if(0===e.length)return null;const t=e[e.length-1];return t instanceof Buffer&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return(e=this.transactions)instanceof Array&&e.some(e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some(e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0));var e}byteLength(e){return e||!this.transactions?80:80+varuintBitcoin.encodingLength(this.transactions.length)+this.transactions.reduce((e,t)=>e+t.byteLength(),0)}getHash(){return crypto$f.hash256(this.toBuffer(!0))}getId(){return bufferutils.reverseBuffer(this.getHash()).toString("hex")}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){const t=Buffer.allocUnsafe(this.byteLength(e));let r=0;const n=e=>{e.copy(t,r),r+=e.length},i=e=>{t.writeUInt32LE(e,r),r+=4};return(e=>{t.writeInt32LE(e,r),r+=4})(this.version),n(this.prevHash),n(this.merkleRoot),i(this.timestamp),i(this.bits),i(this.nonce),e||!this.transactions?t:(varuintBitcoin.encode(this.transactions.length,t,r),r+=varuintBitcoin.encode.bytes,this.transactions.forEach(e=>{const n=e.byteLength();e.toBuffer(t,r),r+=n}),t)}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){const e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit()))}checkProofOfWork(){const e=bufferutils.reverseBuffer(this.getHash()),t=i.calculateTarget(this.bits);return e.compare(t)<=0}__checkMerkleRoot(){if(!this.transactions)throw r;const e=i.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw r;if(!this.hasWitnessCommit())throw n;const e=i.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}function o(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=i});unwrapExports(block$2);var block_1=block$2.Block,input=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script;function n(e){return e===r.OPS.OP_0||script.isCanonicalScriptSignature(e)}function i(e,t){const i=script.decompile(e);return!(i.length<2)&&(i[0]===r.OPS.OP_0&&(t?i.slice(1).every(n):i.slice(1).every(script.isCanonicalScriptSignature)))}t.check=i,i.toJSON=()=>"multisig input"});unwrapExports(input);var input_1=input.check,output=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script,n=r.OPS.OP_RESERVED;function i(e,t){const i=script.decompile(e);if(i.length<4)return!1;if(i[i.length-1]!==r.OPS.OP_CHECKMULTISIG)return!1;if(!types$4.Number(i[0]))return!1;if(!types$4.Number(i[i.length-2]))return!1;const o=i[0]-n,s=i[i.length-2]-n;return!(o<=0)&&(!(s>16)&&(!(o>s)&&(s===i.length-3&&(!!t||i.slice(1,-2).every(script.isCanonicalPubKey)))))}t.check=i,i.toJSON=()=>"multi-sig output"});unwrapExports(output);var output_1=output.check,multisig=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=input,t.output=output});unwrapExports(multisig);var multisig_1=multisig.input,multisig_2=multisig.output,nulldata=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script.OPS;function n(e){const t=script.compile(e);return t.length>1&&t[0]===r.OP_RETURN}t.check=n,n.toJSON=()=>"null data output";const i={check:n};t.output=i});unwrapExports(nulldata);var nulldata_1=nulldata.check,nulldata_2=nulldata.output,input$1=createCommonjsModule(function(e,t){function r(e){const t=script.decompile(e);return 1===t.length&&script.isCanonicalScriptSignature(t[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=()=>"pubKey input"});unwrapExports(input$1);var input_1$1=input$1.check,output$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script;function n(e){const t=script.decompile(e);return 2===t.length&&script.isCanonicalPubKey(t[0])&&t[1]===r.OPS.OP_CHECKSIG}t.check=n,n.toJSON=()=>"pubKey output"});unwrapExports(output$1);var output_1$1=output$1.check,pubkey=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=input$1,t.output=output$1});unwrapExports(pubkey);var pubkey_1=pubkey.input,pubkey_2=pubkey.output,input$2=createCommonjsModule(function(e,t){function r(e){const t=script.decompile(e);return 2===t.length&&script.isCanonicalScriptSignature(t[0])&&script.isCanonicalPubKey(t[1])}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=()=>"pubKeyHash input"});unwrapExports(input$2);var input_1$2=input$2.check,output$2=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script;function n(e){const t=script.compile(e);return 25===t.length&&t[0]===r.OPS.OP_DUP&&t[1]===r.OPS.OP_HASH160&&20===t[2]&&t[23]===r.OPS.OP_EQUALVERIFY&&t[24]===r.OPS.OP_CHECKSIG}t.check=n,n.toJSON=()=>"pubKeyHash output"});unwrapExports(output$2);var output_1$2=output$2.check,pubkeyhash=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=input$2,t.output=output$2});unwrapExports(pubkeyhash);var pubkeyhash_1=pubkeyhash.input,pubkeyhash_2=pubkeyhash.output,output$3=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script;function n(e){const t=script.compile(e);return 22===t.length&&t[0]===r.OPS.OP_0&&20===t[1]}t.check=n,n.toJSON=()=>"Witness pubKeyHash output"});unwrapExports(output$3);var output_1$3=output$3.check,output$4=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script;function n(e){const t=script.compile(e);return 34===t.length&&t[0]===r.OPS.OP_0&&32===t[1]}t.check=n,n.toJSON=()=>"Witness scriptHash output"});unwrapExports(output$4);var output_1$4=output$4.check,input$3=createCommonjsModule(function(e,t){function r(e,t){const r=script.decompile(e);if(r.length<1)return!1;const n=r[r.length-1];if(!Buffer.isBuffer(n))return!1;const i=script.decompile(script.compile(r.slice(0,-1))),o=script.decompile(n);return!!o&&(!!script.isPushOnly(i)&&(1===r.length?output$4.check(o)||output$3.check(o):!(!pubkeyhash.input.check(i)||!pubkeyhash.output.check(o))||(!(!multisig.input.check(i,t)||!multisig.output.check(o))||!(!pubkey.input.check(i)||!pubkey.output.check(o)))))}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=()=>"scriptHash input"});unwrapExports(input$3);var input_1$3=input$3.check,output$5=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script;function n(e){const t=script.compile(e);return 23===t.length&&t[0]===r.OPS.OP_HASH160&&20===t[1]&&t[22]===r.OPS.OP_EQUAL}t.check=n,n.toJSON=()=>"scriptHash output"});unwrapExports(output$5);var output_1$5=output$5.check,scripthash=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=input$3,t.output=output$5});unwrapExports(scripthash);var scripthash_1=scripthash.input,scripthash_2=scripthash.output,output$6=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script,n=Buffer.from("aa21a9ed","hex");function i(e){const t=script.compile(e);return t.length>37&&t[0]===r.OPS.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(n)}t.check=i,i.toJSON=()=>"Witness commitment output",t.encode=function(e){typeforce_1(types$4.Hash256bit,e);const t=Buffer.allocUnsafe(36);return n.copy(t,0),e.copy(t,4),script.compile([r.OPS.OP_RETURN,t])},t.decode=function(e){return typeforce_1(i,e),script.decompile(e)[1].slice(4,36)}});unwrapExports(output$6);var output_1$6=output$6.check,output_2=output$6.encode,output_3=output$6.decode,witnesscommitment=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.output=output$6});unwrapExports(witnesscommitment);var witnesscommitment_1=witnesscommitment.output,input$4=createCommonjsModule(function(e,t){function r(e){const t=script.decompile(e);return 2===t.length&&script.isCanonicalScriptSignature(t[0])&&(r=t[1],script.isCanonicalPubKey(r)&&33===r.length);var r}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=()=>"witnessPubKeyHash input"});unwrapExports(input$4);var input_1$4=input$4.check,witnesspubkeyhash=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=input$4,t.output=output$3});unwrapExports(witnesspubkeyhash);var witnesspubkeyhash_1=witnesspubkeyhash.input,witnesspubkeyhash_2=witnesspubkeyhash.output,input$5=createCommonjsModule(function(e,t){function r(e,t){if(typeforce_1(typeforce_1.Array,e),e.length<1)return!1;const r=e[e.length-1];if(!Buffer.isBuffer(r))return!1;const n=script.decompile(r);if(!n||0===n.length)return!1;const i=script.compile(e.slice(0,-1));return!(!pubkeyhash.input.check(i)||!pubkeyhash.output.check(n))||(!(!multisig.input.check(i,t)||!multisig.output.check(n))||!(!pubkey.input.check(i)||!pubkey.output.check(n)))}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=()=>"witnessScriptHash input"});unwrapExports(input$5);var input_1$5=input$5.check,witnessscripthash=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=input$5,t.output=output$4});unwrapExports(witnessscripthash);var witnessscripthash_1=witnessscripthash.input,witnessscripthash_2=witnessscripthash.output,classify=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};t.types=r,t.output=function(e){if(witnesspubkeyhash.output.check(e))return r.P2WPKH;if(witnessscripthash.output.check(e))return r.P2WSH;if(pubkeyhash.output.check(e))return r.P2PKH;if(scripthash.output.check(e))return r.P2SH;const t=script.decompile(e);if(!t)throw new TypeError("Invalid script");return multisig.output.check(t)?r.P2MS:pubkey.output.check(t)?r.P2PK:witnesscommitment.output.check(t)?r.WITNESS_COMMITMENT:nulldata.output.check(t)?r.NULLDATA:r.NONSTANDARD},t.input=function(e,t){const n=script.decompile(e);if(!n)throw new TypeError("Invalid script");return pubkeyhash.input.check(n)?r.P2PKH:scripthash.input.check(n,t)?r.P2SH:multisig.input.check(n,t)?r.P2MS:pubkey.input.check(n)?r.P2PK:r.NONSTANDARD},t.witness=function(e,t){const n=script.decompile(e);if(!n)throw new TypeError("Invalid script");return witnesspubkeyhash.input.check(n)?r.P2WPKH:witnessscripthash.input.check(n,t)?r.P2WSH:r.NONSTANDARD}});unwrapExports(classify);var classify_1=classify.types,classify_2=classify.output,classify_3=classify.input,classify_4=classify.witness,transaction_builder=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=script,n=classify.types;class i{constructor(e=networks.bitcoin,t=2500){this.network=e,this.maximumFeeRate=t,this.__PREV_TX_SET={},this.__INPUTS=[],this.__TX=new transaction$1.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1}static fromTransaction(e,t){const r=new i(t);return r.setVersion(e.version),r.setLockTime(e.locktime),e.outs.forEach(e=>{r.addOutput(e.script,e.value)}),e.ins.forEach(e=>{r.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})}),r.__INPUTS.forEach((t,r)=>{!function(e,t,r){if(e.redeemScriptType!==n.P2MS||!e.redeemScript)return;if(e.pubkeys.length===e.signatures.length)return;const i=e.signatures.concat();e.signatures=e.pubkeys.map(n=>{const o=ecpair.fromPublicKey(n);let s;return i.some((n,a)=>{if(!n)return!1;const c=script.signature.decode(n),u=t.hashForSignature(r,e.redeemScript,c.hashType);return!!o.verify(u,c.signature)&&(i[a]=void 0,s=n,!0)}),s})}(t,e,r)}),r}setLowR(e){return typeforce_1(typeforce_1.maybe(typeforce_1.Boolean),e),void 0===e&&(e=!0),this.__USE_LOW_R=e,e}setLockTime(e){if(typeforce_1(types$4.UInt32,e),this.__INPUTS.some(e=>!!e.signatures&&e.signatures.some(e=>void 0!==e)))throw new Error("No, this would invalidate signatures");this.__TX.locktime=e}setVersion(e){typeforce_1(types$4.UInt32,e),this.__TX.version=e}addInput(e,t,r,n){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");let i;if("string"==typeof(o=e)||o instanceof String)e=bufferutils.reverseBuffer(Buffer.from(e,"hex"));else if(function(e){return e instanceof transaction$1.Transaction}(e)){const r=e.outs[t];n=r.script,i=r.value,e=e.getHash(!1)}var o;return this.__addInputUnsafe(e,t,{sequence:r,prevOutScript:n,value:i})}addOutput(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=address$1.toOutputScript(e,this.network)),this.__TX.addOutput(e,t)}build(){return this.__build(!1)}buildIncomplete(){return this.__build(!0)}sign(e,t,r,i,a,c){if(t.network&&t.network!==this.network)throw new TypeError("Inconsistent network");if(!this.__INPUTS[e])throw new Error("No input at index: "+e);if(i=i||transaction$1.Transaction.SIGHASH_ALL,this.__needsOutputs(i))throw new Error("Transaction needs outputs");const u=this.__INPUTS[e];if(void 0!==u.redeemScript&&r&&!u.redeemScript.equals(r))throw new Error("Inconsistent redeemScript");const f=t.publicKey||t.getPublicKey();if(!s(u)){if(void 0!==a){if(void 0!==u.value&&u.value!==a)throw new Error("Input did not match witnessValue");typeforce_1(types$4.Satoshi,a),u.value=a}if(!s(u)){const e=function(e,t,r,i){if(r&&i){const s=payments.p2wsh({redeem:{output:i}}),a=payments.p2wsh({output:r}),c=payments.p2sh({redeem:{output:r}}),u=payments.p2sh({redeem:s});if(!s.hash.equals(a.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!c.hash.equals(u.hash))throw new Error("Redeem script inconsistent with prevOutScript");const f=o(s.redeem.output,t);if(!f.pubkeys)throw new Error(f.type+" not supported as witnessScript ("+script.toASM(i)+")");e.signatures&&e.signatures.some(e=>void 0!==e)&&(f.signatures=e.signatures);const l=i;if(f.type===n.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:n.P2WSH,witnessScript:i,witnessScriptType:f.type,prevOutType:n.P2SH,prevOutScript:c.output,hasWitness:!0,signScript:l,signType:f.type,pubkeys:f.pubkeys,signatures:f.signatures,maxSignatures:f.maxSignatures}}if(r){const i=payments.p2sh({redeem:{output:r}});if(e.prevOutScript){let t;try{t=payments.p2sh({output:e.prevOutScript})}catch(e){throw new Error("PrevOutScript must be P2SH")}if(!i.hash.equals(t.hash))throw new Error("Redeem script inconsistent with prevOutScript")}const s=o(i.redeem.output,t);if(!s.pubkeys)throw new Error(s.type+" not supported as redeemScript ("+script.toASM(r)+")");e.signatures&&e.signatures.some(e=>void 0!==e)&&(s.signatures=e.signatures);let a=r;return s.type===n.P2WPKH&&(a=payments.p2pkh({pubkey:s.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:s.type,prevOutType:n.P2SH,prevOutScript:i.output,hasWitness:s.type===n.P2WPKH,signScript:a,signType:s.type,pubkeys:s.pubkeys,signatures:s.signatures,maxSignatures:s.maxSignatures}}if(i){const r=payments.p2wsh({redeem:{output:i}});if(e.prevOutScript){const t=payments.p2wsh({output:e.prevOutScript});if(!r.hash.equals(t.hash))throw new Error("Witness script inconsistent with prevOutScript")}const s=o(r.redeem.output,t);if(!s.pubkeys)throw new Error(s.type+" not supported as witnessScript ("+script.toASM(i)+")");e.signatures&&e.signatures.some(e=>void 0!==e)&&(s.signatures=e.signatures);const a=i;if(s.type===n.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:i,witnessScriptType:s.type,prevOutType:n.P2WSH,prevOutScript:r.output,hasWitness:!0,signScript:a,signType:s.type,pubkeys:s.pubkeys,signatures:s.signatures,maxSignatures:s.maxSignatures}}if(e.prevOutType&&e.prevOutScript){if(e.prevOutType===n.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===n.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(!e.prevOutScript)throw new Error("PrevOutScript is missing");const r=o(e.prevOutScript,t);if(!r.pubkeys)throw new Error(r.type+" not supported ("+script.toASM(e.prevOutScript)+")");e.signatures&&e.signatures.some(e=>void 0!==e)&&(r.signatures=e.signatures);let i=e.prevOutScript;return r.type===n.P2WPKH&&(i=payments.p2pkh({pubkey:r.pubkeys[0]}).output),{prevOutType:r.type,prevOutScript:e.prevOutScript,hasWitness:r.type===n.P2WPKH,signScript:i,signType:r.type,pubkeys:r.pubkeys,signatures:r.signatures,maxSignatures:r.maxSignatures}}const s=payments.p2pkh({pubkey:t}).output;return{prevOutType:n.P2PKH,prevOutScript:s,hasWitness:!1,signScript:s,signType:n.P2PKH,pubkeys:[t],signatures:[void 0]}}(u,f,r,c);Object.assign(u,e)}if(!s(u))throw Error(u.prevOutType+" not supported")}let l;if(l=u.hasWitness?this.__TX.hashForWitnessV0(e,u.signScript,u.value,i):this.__TX.hashForSignature(e,u.signScript,i),!u.pubkeys.some((e,r)=>{if(!f.equals(e))return!1;if(u.signatures[r])throw new Error("Signature already exists");if(33!==f.length&&u.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");const n=t.sign(l,this.__USE_LOW_R);return u.signatures[r]=script.signature.encode(n,i),!0}))throw new Error("Key pair cannot sign for this input")}__addInputUnsafe(e,t,r){if(transaction$1.Transaction.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");const i=e.toString("hex")+":"+t;if(void 0!==this.__PREV_TX_SET[i])throw new Error("Duplicate TxOut: "+i);let s={};if(void 0!==r.script&&(s=function e(t,r,i,o){if(0===t.length&&0===r.length)return{};if(!i){let e=classify.input(t,!0),o=classify.witness(r,!0);e===n.NONSTANDARD&&(e=void 0),o===n.NONSTANDARD&&(o=void 0),i=e||o}switch(i){case n.P2WPKH:{const{output:e,pubkey:t,signature:i}=payments.p2wpkh({witness:r});return{prevOutScript:e,prevOutType:n.P2WPKH,pubkeys:[t],signatures:[i]}}case n.P2PKH:{const{output:e,pubkey:r,signature:i}=payments.p2pkh({input:t});return{prevOutScript:e,prevOutType:n.P2PKH,pubkeys:[r],signatures:[i]}}case n.P2PK:{const{signature:e}=payments.p2pk({input:t});return{prevOutType:n.P2PK,pubkeys:[void 0],signatures:[e]}}case n.P2MS:{const{m:e,pubkeys:r,signatures:i}=payments.p2ms({input:t,output:o},{allowIncomplete:!0});return{prevOutType:n.P2MS,pubkeys:r,signatures:i,maxSignatures:e}}}if(i===n.P2SH){const{output:i,redeem:o}=payments.p2sh({input:t,witness:r}),s=classify.output(o.output),a=e(o.input,o.witness,s,o.output);return a.prevOutType?{prevOutScript:i,prevOutType:n.P2SH,redeemScript:o.output,redeemScriptType:a.prevOutType,witnessScript:a.witnessScript,witnessScriptType:a.witnessScriptType,pubkeys:a.pubkeys,signatures:a.signatures}:{}}if(i===n.P2WSH){const{output:i,redeem:o}=payments.p2wsh({input:t,witness:r}),s=classify.output(o.output);let a;return(a=s===n.P2WPKH?e(o.input,o.witness,s):e(script.compile(o.witness),[],s,o.output)).prevOutType?{prevOutScript:i,prevOutType:n.P2WSH,witnessScript:o.output,witnessScriptType:a.prevOutType,pubkeys:a.pubkeys,signatures:a.signatures}:{}}return{prevOutType:n.NONSTANDARD,prevOutScript:t}}(r.script,r.witness||[])),void 0!==r.value&&(s.value=r.value),!s.prevOutScript&&r.prevOutScript){let e;if(!s.pubkeys&&!s.signatures){const t=o(r.prevOutScript);t.pubkeys&&(s.pubkeys=t.pubkeys,s.signatures=t.signatures),e=t.type}s.prevOutScript=r.prevOutScript,s.prevOutType=e||classify.output(r.prevOutScript)}const a=this.__TX.addInput(e,t,r.sequence,r.scriptSig);return this.__INPUTS[a]=s,this.__PREV_TX_SET[i]=!0,a}__build(e){if(!e){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}const t=this.__TX.clone();if(this.__INPUTS.forEach((i,o)=>{if(!i.prevOutType&&!e)throw new Error("Transaction is not complete");const s=function e(t,i,o){const s=i.pubkeys||[];let a=i.signatures||[];switch(t){case n.P2PKH:if(0===s.length)break;if(0===a.length)break;return payments.p2pkh({pubkey:s[0],signature:a[0]});case n.P2WPKH:if(0===s.length)break;if(0===a.length)break;return payments.p2wpkh({pubkey:s[0],signature:a[0]});case n.P2PK:if(0===s.length)break;if(0===a.length)break;return payments.p2pk({signature:a[0]});case n.P2MS:{const e=i.maxSignatures;a=o?a.map(e=>e||r.OPS.OP_0):a.filter(e=>e);const t=!o||e===a.length;return payments.p2ms({m:e,pubkeys:s,signatures:a},{allowIncomplete:o,validate:t})}case n.P2SH:{const t=e(i.redeemScriptType,i,o);if(!t)return;return payments.p2sh({redeem:{output:t.output||i.redeemScript,input:t.input,witness:t.witness}})}case n.P2WSH:{const t=e(i.witnessScriptType,i,o);if(!t)return;return payments.p2wsh({redeem:{output:i.witnessScript,input:t.input,witness:t.witness}})}}}(i.prevOutType,i,e);if(s)t.setInputScript(o,s.input),t.setWitness(o,s.witness);else{if(!e&&i.prevOutType===n.NONSTANDARD)throw new Error("Unknown input type");if(!e)throw new Error("Not enough information")}}),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t}__canModifyInputs(){return this.__INPUTS.every(e=>!e.signatures||e.signatures.every(e=>{if(!e)return!0;return 0!=(a(e)&transaction$1.Transaction.SIGHASH_ANYONECANPAY)}))}__needsOutputs(e){return e===transaction$1.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some(e=>!!e.signatures&&e.signatures.some(e=>{if(!e)return!1;return!(a(e)&transaction$1.Transaction.SIGHASH_NONE)}))}__canModifyOutputs(){const e=this.__TX.ins.length,t=this.__TX.outs.length;return this.__INPUTS.every(r=>void 0===r.signatures||r.signatures.every(r=>{if(!r)return!0;const n=31&a(r);return n===transaction$1.Transaction.SIGHASH_NONE||n===transaction$1.Transaction.SIGHASH_SINGLE&&e<=t}))}__overMaximumFees(e){return(this.__INPUTS.reduce((e,t)=>e+(t.value>>>0),0)-this.__TX.outs.reduce((e,t)=>e+t.value,0))/e>this.maximumFeeRate}}function o(e,t){typeforce_1(types$4.Buffer,e);const r=classify.output(e);switch(r){case n.P2PKH:{if(!t)return{type:r};const n=payments.p2pkh({output:e}).hash,i=crypto$f.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r}}case n.P2WPKH:{if(!t)return{type:r};const n=payments.p2wpkh({output:e}).hash,i=crypto$f.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r}}case n.P2PK:return{type:r,pubkeys:[payments.p2pk({output:e}).pubkey],signatures:[void 0]};case n.P2MS:{const t=payments.p2ms({output:e});return{type:r,pubkeys:t.pubkeys,signatures:t.pubkeys.map(()=>void 0),maxSignatures:t.m}}}return{type:r}}function s(e){return void 0!==e.signScript&&void 0!==e.signType&&void 0!==e.pubkeys&&void 0!==e.signatures&&e.signatures.length===e.pubkeys.length&&e.pubkeys.length>0&&(!1===e.hasWitness||void 0!==e.value)}function a(e){return e.readUInt8(e.length-1)}t.TransactionBuilder=i});unwrapExports(transaction_builder);var transaction_builder_1=transaction_builder.TransactionBuilder,src$1N=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bip32=src$1M,t.address=address$1,t.crypto=crypto$f,t.ECPair=ecpair,t.networks=networks,t.payments=payments,t.script=script,t.Block=block$2.Block;var r=script;t.opcodes=r.OPS,t.Transaction=transaction$1.Transaction,t.TransactionBuilder=transaction_builder.TransactionBuilder});unwrapExports(src$1N);var src_1$g=src$1N.bip32,src_2$e=src$1N.address,src_3$d=src$1N.crypto,src_4$d=src$1N.ECPair,src_5$8=src$1N.networks,src_6$6=src$1N.payments,src_7$4=src$1N.script,src_8$4=src$1N.Block,src_9$3=src$1N.opcodes,src_10$2=src$1N.Transaction,src_11$2=src$1N.TransactionBuilder,sha3$b=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),sha$6=e=>async t=>{switch(e){case"sha1":return crypto$l.createHash("sha1").update(t).digest();case"sha2-256":return crypto$l.createHash("sha256").update(t).digest();case"sha2-512":return crypto$l.createHash("sha512").update(t).digest();case"dbl-sha2-256":{const e=crypto$l.createHash("sha256").update(t).digest();return crypto$l.createHash("sha256").update(e).digest()}default:throw new Error(`${e} is not a supported algorithm`)}};const{Buffer:Buffer$O}=buffer$1,fromNumberTo32BitBuf$k=e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return Buffer$O.from(t)};var utils$N={fromNumberTo32BitBuf:fromNumberTo32BitBuf$k};const{Buffer:Buffer$P}=buffer$1,minB$a=45569,minS$a=45633,blake2b$b={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$b={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$a=(e,t)=>async r=>{const n=t.init(e,null);return t.update(n,r),Buffer$P.from(t.digest(n))};var blake_1$a=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$a(t+1,blake2b$b);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$a(t+1,blake2s$b)};const{Buffer:Buffer$Q}=buffer$1,{fromNumberTo32BitBuf:fromNumberTo32BitBuf$l}=utils$N,hash$7=e=>async t=>{switch(e){case"sha3-224":return Buffer$Q.from(sha3$b.sha3_224.arrayBuffer(t));case"sha3-256":return Buffer$Q.from(sha3$b.sha3_256.arrayBuffer(t));case"sha3-384":return Buffer$Q.from(sha3$b.sha3_384.arrayBuffer(t));case"sha3-512":return Buffer$Q.from(sha3$b.sha3_512.arrayBuffer(t));case"shake-128":return Buffer$Q.from(sha3$b.shake128.create(128).update(t).arrayBuffer());case"shake-256":return Buffer$Q.from(sha3$b.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return Buffer$Q.from(sha3$b.keccak224.arrayBuffer(t));case"keccak-256":return Buffer$Q.from(sha3$b.keccak256.arrayBuffer(t));case"keccak-384":return Buffer$Q.from(sha3$b.keccak384.arrayBuffer(t));case"keccak-512":return Buffer$Q.from(sha3$b.keccak512.arrayBuffer(t));case"murmur3-128":return Buffer$Q.from(murmurhash3jsRevisited.x64.hash128(t),"hex");case"murmur3-32":return fromNumberTo32BitBuf$l(murmurhash3jsRevisited.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};var crypto$g={sha1:sha$6("sha1"),sha2256:sha$6("sha2-256"),sha2512:sha$6("sha2-512"),dblSha2256:sha$6("dbl-sha2-256"),sha3224:hash$7("sha3-224"),sha3256:hash$7("sha3-256"),sha3384:hash$7("sha3-384"),sha3512:hash$7("sha3-512"),shake128:hash$7("shake-128"),shake256:hash$7("shake-256"),keccak224:hash$7("keccak-224"),keccak256:hash$7("keccak-256"),keccak384:hash$7("keccak-384"),keccak512:hash$7("keccak-512"),murmur3128:hash$7("murmur3-128"),murmur332:hash$7("murmur3-32"),addBlake:blake_1$a};const{Buffer:Buffer$R}=buffer$1;async function Multihashing$a(e,t,r){const n=await Multihashing$a.digest(e,t,r);return src.encode(n,t,r)}Multihashing$a.Buffer=Buffer$R,Multihashing$a.multihash=src,Multihashing$a.digest=async(e,t,r)=>{const n=Multihashing$a.createHash(t),i=await n(e);return r?i.slice(0,r):i},Multihashing$a.createHash=function(e){if(!e)throw errCode("hash algorithm must be specified","ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=src.coerceCode(e),!Multihashing$a.functions[e])throw errCode(`multihash function '${e}' not yet supported`,"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing$a.functions[e]},Multihashing$a.functions={17:crypto$g.sha1,18:crypto$g.sha2256,19:crypto$g.sha2512,20:crypto$g.sha3512,21:crypto$g.sha3384,22:crypto$g.sha3256,23:crypto$g.sha3224,24:crypto$g.shake128,25:crypto$g.shake256,26:crypto$g.keccak224,27:crypto$g.keccak256,28:crypto$g.keccak384,29:crypto$g.keccak512,34:crypto$g.murmur3128,35:crypto$g.murmur332,86:crypto$g.dblSha2256},crypto$g.addBlake(Multihashing$a.functions),Multihashing$a.validate=async(e,t)=>{const r=await Multihashing$a(e,src.decode(t).name);return 0===Buffer$R.compare(t,r)};var src$1O=Multihashing$a;const BitcoinjsBlock=src$1N.Block,BITCOIN_BLOCK_HEADER_SIZE=80,CODEC=src$4.BITCOIN_BLOCK,DEFAULT_HASH_ALG=src$4.DBL_SHA2_256,serialize$1=e=>e.toBuffer(!0),deserialize=e=>{if(80!==e.length)throw new Error("Bitcoin block header needs to be 80 bytes");const t=BitcoinjsBlock.fromBuffer(e),r={difficulty:function(){return this.bits},parent:function(){return hashToCid(this.prevHash)},tx:function(){return hashToCid(this.merkleRoot)}};Object.entries(r).forEach(([e,r])=>{Object.defineProperty(t,e,{enumerable:!0,get:r})});return["bits","merkleRoot","prevHash","transactions","witnessCommit"].forEach(e=>{e in t&&Object.defineProperty(t,e,{enumerable:!1})}),t},cid$1=async(e,t)=>{const r={cidVersion:1,hashAlg:DEFAULT_HASH_ALG},n=Object.assign(r,t),i=await src$1O(e,n.hashAlg),o=src$4.print[CODEC];return new src$1L(n.cidVersion,o,i)},hashToCid=e=>{const t=src.encode(e,DEFAULT_HASH_ALG);return new src$1L(1,"bitcoin-block",t)};var util$f={hashToCid:hashToCid,BITCOIN_BLOCK_HEADER_SIZE:80,codec:CODEC,defaultHashAlg:DEFAULT_HASH_ALG,cid:cid$1,deserialize:deserialize,serialize:serialize$1},resolve$7=(e,t)=>{let r=util$f.deserialize(e);const n=t.split("/").filter(Boolean);for(;n.length;){const e=n.shift();if(void 0===r[e])throw new Error(`Object has no property '${e}'`);if(r=r[e],src$1L.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}};const traverse$2=function*(e,t){if(!Buffer.isBuffer(e)&&!src$1L.isCID(e)&&"string"!=typeof e&&null!==e)for(const r of Object.keys(e)){const n=void 0===t?r:t+"/"+r;yield n,yield*traverse$2(e[r],n)}};var tree$2=function*(e){const t=util$f.deserialize(e);yield*traverse$2(t)},resolver$3={resolve:resolve$7,tree:tree$2},src$1P=createCommonjsModule(function(e,t){t.resolver=resolver$3,t.util=util$f,t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg}),src_1$h=src$1P.resolver,src_2$f=src$1P.util,src_3$e=src$1P.codec,src_4$e=src$1P.defaultHashAlg,dist$5=createCommonjsModule(function(e,t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=safeBuffer.Buffer;Object.assign(t,lib$3),t.MAX_INTEGER=new bn("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new bn("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.SHA3_NULL_S=t.KECCAK256_NULL_S,t.KECCAK256_NULL=n.from(t.KECCAK256_NULL_S,"hex"),t.SHA3_NULL=t.KECCAK256_NULL,t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.SHA3_RLP_ARRAY_S=t.KECCAK256_RLP_ARRAY_S,t.KECCAK256_RLP_ARRAY=n.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.SHA3_RLP_ARRAY=t.KECCAK256_RLP_ARRAY,t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.SHA3_RLP_S=t.KECCAK256_RLP_S,t.KECCAK256_RLP=n.from(t.KECCAK256_RLP_S,"hex"),t.SHA3_RLP=t.KECCAK256_RLP,t.BN=bn,t.rlp=dist,t.secp256k1=secp256k1$1,t.zeros=function(e){return n.allocUnsafe(e).fill(0)},t.zeroAddress=function(){var e=t.zeros(20);return t.bufferToHex(e)},t.setLengthLeft=t.setLength=function(e,r,n){var i=t.zeros(r);return e=t.toBuffer(e),n?e.length<r?(e.copy(i),i):e.slice(0,r):e.length<r?(e.copy(i,r-e.length),i):e.slice(-r)},t.setLengthRight=function(e,r){return t.setLength(e,r,!0)},t.unpad=t.stripZeros=function(e){for(var r=(e=t.stripHexPrefix(e))[0];e.length>0&&"0"===r.toString();)r=(e=e.slice(1))[0];return e},t.toBuffer=function(e){if(!n.isBuffer(e))if(Array.isArray(e))e=n.from(e);else if("string"==typeof e)e=t.isHexString(e)?n.from(t.padToEven(t.stripHexPrefix(e)),"hex"):n.from(e);else if("number"==typeof e)e=t.intToBuffer(e);else if(null==e)e=n.allocUnsafe(0);else if(bn.isBN(e))e=e.toArrayLike(n);else{if(!e.toArray)throw new Error("invalid type");e=n.from(e.toArray())}return e},t.bufferToInt=function(e){return new bn(t.toBuffer(e)).toNumber()},t.bufferToHex=function(e){return"0x"+(e=t.toBuffer(e)).toString("hex")},t.fromSigned=function(e){return new bn(e).fromTwos(256)},t.toUnsigned=function(e){return n.from(e.toTwos(256).toArray())},t.keccak=function(e,r){return e=t.toBuffer(e),r||(r=256),keccak$2("keccak"+r).update(e).digest()},t.keccak256=function(e){return t.keccak(e)},t.sha3=t.keccak,t.sha256=function(e){return e=t.toBuffer(e),createHash("sha256").update(e).digest()},t.ripemd160=function(e,r){e=t.toBuffer(e);var n=createHash("rmd160").update(e).digest();return!0===r?t.setLength(n,32):n},t.rlphash=function(e){return t.keccak(dist.encode(e))},t.isValidPrivate=function(e){return secp256k1$1.privateKeyVerify(e)},t.isValidPublic=function(e,t){return 64===e.length?secp256k1$1.publicKeyVerify(n.concat([n.from([4]),e])):!!t&&secp256k1$1.publicKeyVerify(e)},t.pubToAddress=t.publicToAddress=function(e,r){return e=t.toBuffer(e),r&&64!==e.length&&(e=secp256k1$1.publicKeyConvert(e,!1).slice(1)),assert$t(64===e.length),t.keccak(e).slice(-20)};var i=t.privateToPublic=function(e){return e=t.toBuffer(e),secp256k1$1.publicKeyCreate(e,!1).slice(1)};t.importPublic=function(e){return 64!==(e=t.toBuffer(e)).length&&(e=secp256k1$1.publicKeyConvert(e,!1).slice(1)),e},t.ecsign=function(e,t){var r=secp256k1$1.sign(e,t),n={};return n.r=r.signature.slice(0,32),n.s=r.signature.slice(32,64),n.v=r.recovery+27,n},t.hashPersonalMessage=function(e){var r=t.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return t.keccak(n.concat([r,e]))},t.ecrecover=function(e,r,i,o){var s=n.concat([t.setLength(i,32),t.setLength(o,32)],64),a=r-27;if(0!==a&&1!==a)throw new Error("Invalid signature v value");var c=secp256k1$1.recover(e,s,a);return secp256k1$1.publicKeyConvert(c,!1).slice(1)},t.toRpcSig=function(e,r,i){if(27!==e&&28!==e)throw new Error("Invalid recovery id");return t.bufferToHex(n.concat([t.setLengthLeft(r,32),t.setLengthLeft(i,32),t.toBuffer(e-27)]))},t.fromRpcSig=function(e){if(65!==(e=t.toBuffer(e)).length)throw new Error("Invalid signature length");var r=e[64];return r<27&&(r+=27),{v:r,r:e.slice(0,32),s:e.slice(32,64)}},t.privateToAddress=function(e){return t.publicToAddress(i(e))},t.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},t.isZeroAddress=function(e){return t.zeroAddress()===t.addHexPrefix(e)},t.toChecksumAddress=function(e){e=t.stripHexPrefix(e).toLowerCase();for(var r=t.keccak(e).toString("hex"),n="0x",i=0;i<e.length;i++)parseInt(r[i],16)>=8?n+=e[i].toUpperCase():n+=e[i];return n},t.isValidChecksumAddress=function(e){return t.isValidAddress(e)&&t.toChecksumAddress(e)===e},t.generateAddress=function(e,r){return e=t.toBuffer(e),r=(r=new bn(r)).isZero()?null:n.from(r.toArray()),t.rlphash([e,r]).slice(-20)},t.isPrecompiled=function(e){var r=t.unpad(e);return 1===r.length&&r[0]>=1&&r[0]<=8},t.addHexPrefix=function(e){return"string"!=typeof e?e:t.isHexPrefixed(e)?e:"0x"+e},t.isValidSignature=function(e,t,r,n){var i=new bn("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),o=new bn("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);return 32===t.length&&32===r.length&&((27===e||28===e)&&(t=new bn(t),r=new bn(r),!(t.isZero()||t.gt(o)||r.isZero()||r.gt(o))&&(!1!==n||1!==new bn(r).cmp(i))))},t.baToJSON=function(e){if(n.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var r=[],i=0;i<e.length;i++)r.push(t.baToJSON(e[i]));return r}},t.defineProperties=function(e,i,o){if(e.raw=[],e._fields=[],e.toJSON=function(r){if(r){var n={};return e._fields.forEach(function(t){n[t]="0x"+e[t].toString("hex")}),n}return t.baToJSON(this.raw)},e.serialize=function(){return dist.encode(e.raw)},i.forEach(function(r,i){function o(){return e.raw[i]}function s(o){"00"!==(o=t.toBuffer(o)).toString("hex")||r.allowZero||(o=n.allocUnsafe(0)),r.allowLess&&r.length?(o=t.stripZeros(o),assert$t(r.length>=o.length,"The field "+r.name+" must not have more "+r.length+" bytes")):r.allowZero&&0===o.length||!r.length||assert$t(r.length===o.length,"The field "+r.name+" must have byte length of "+r.length),e.raw[i]=o}e._fields.push(r.name),Object.defineProperty(e,r.name,{enumerable:!0,configurable:!0,get:o,set:s}),r.default&&(e[r.name]=r.default),r.alias&&Object.defineProperty(e,r.alias,{enumerable:!1,configurable:!0,set:s,get:o})}),o)if("string"==typeof o&&(o=n.from(t.stripHexPrefix(o),"hex")),n.isBuffer(o)&&(o=dist.decode(o)),Array.isArray(o)){if(o.length>e._fields.length)throw new Error("wrong number of fields in data");o.forEach(function(r,n){e[e._fields[n]]=t.toBuffer(r)})}else{if("object"!==(void 0===o?"undefined":r(o)))throw new Error("invalid data");var s=Object.keys(o);i.forEach(function(t){-1!==s.indexOf(t.name)&&(e[t.name]=o[t.name]),-1!==s.indexOf(t.alias)&&(e[t.alias]=o[t.alias])})}}}),dist_1$2=dist$5.MAX_INTEGER,dist_2$2=dist$5.TWO_POW256,dist_3$2=dist$5.KECCAK256_NULL_S,dist_4$1=dist$5.SHA3_NULL_S,dist_5$1=dist$5.KECCAK256_NULL,dist_6$1=dist$5.SHA3_NULL,dist_7$1=dist$5.KECCAK256_RLP_ARRAY_S,dist_8$1=dist$5.SHA3_RLP_ARRAY_S,dist_9$1=dist$5.KECCAK256_RLP_ARRAY,dist_10$1=dist$5.SHA3_RLP_ARRAY,dist_11$1=dist$5.KECCAK256_RLP_S,dist_12$1=dist$5.SHA3_RLP_S,dist_13$1=dist$5.KECCAK256_RLP,dist_14$1=dist$5.SHA3_RLP,dist_15$1=dist$5.BN,dist_16$1=dist$5.rlp,dist_17$1=dist$5.secp256k1,dist_18$1=dist$5.zeros,dist_19$1=dist$5.zeroAddress,dist_20$1=dist$5.setLengthLeft,dist_21$1=dist$5.setLength,dist_22$1=dist$5.setLengthRight,dist_23$1=dist$5.unpad,dist_24$1=dist$5.stripZeros,dist_25$1=dist$5.toBuffer,dist_26$1=dist$5.bufferToInt,dist_27$1=dist$5.bufferToHex,dist_28$1=dist$5.fromSigned,dist_29$1=dist$5.toUnsigned,dist_30$1=dist$5.keccak,dist_31$1=dist$5.keccak256,dist_32$1=dist$5.sha3,dist_33$1=dist$5.sha256,dist_34$1=dist$5.ripemd160,dist_35$1=dist$5.rlphash,dist_36$1=dist$5.isValidPrivate,dist_37$1=dist$5.isValidPublic,dist_38$1=dist$5.pubToAddress,dist_39$1=dist$5.publicToAddress,dist_40$1=dist$5.privateToPublic,dist_41$1=dist$5.importPublic,dist_42$1=dist$5.ecsign,dist_43$1=dist$5.hashPersonalMessage,dist_44$1=dist$5.ecrecover,dist_45$1=dist$5.toRpcSig,dist_46$1=dist$5.fromRpcSig,dist_47$1=dist$5.privateToAddress,dist_48$1=dist$5.isValidAddress,dist_49$1=dist$5.isZeroAddress,dist_50$1=dist$5.toChecksumAddress,dist_51$1=dist$5.isValidChecksumAddress,dist_52=dist$5.generateAddress,dist_53=dist$5.isPrecompiled,dist_54=dist$5.addHexPrefix,dist_55=dist$5.isValidSignature,dist_56=dist$5.baToJSON,dist_57=dist$5.defineProperties,ethereumjsAccount=createCommonjsModule(function(e){const t=safeBuffer.Buffer;var r=e.exports=function(e){var r=[{name:"nonce",default:t.alloc(0)},{name:"balance",default:t.alloc(0)},{name:"stateRoot",length:32,default:dist$5.SHA3_RLP},{name:"codeHash",length:32,default:dist$5.SHA3_NULL}];dist$5.defineProperties(this,r,e)};r.prototype.serialize=function(){return dist.encode(this.raw)},r.prototype.isContract=function(){return this.codeHash.toString("hex")!==dist$5.SHA3_NULL_S},r.prototype.getCode=function(e,r){this.isContract()?e.getRaw(this.codeHash,r):r(null,t.alloc(0))},r.prototype.setCode=function(e,r,n){var i=this;this.codeHash=dist$5.sha3(r),this.codeHash.toString("hex")!==dist$5.SHA3_NULL_S?e.putRaw(this.codeHash,r,function(e){n(e,i.codeHash)}):n(null,t.alloc(0))},r.prototype.getStorage=function(e,t,r){var n=e.copy();n.root=this.stateRoot,n.get(t,r)},r.prototype.setStorage=function(e,t,r,n){var i=this,o=e.copy();o.root=i.stateRoot,o.put(t,r,function(e){if(e)return n();i.stateRoot=o.root,n()})},r.prototype.isEmpty=function(){return""===this.balance.toString("hex")&&""===this.nonce.toString("hex")&&this.stateRoot.toString("hex")===dist$5.SHA3_RLP_S&&this.codeHash.toString("hex")===dist$5.SHA3_NULL_S}}),CIDUtil$d={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$d=CIDUtil$d;class CID$c{constructor(e,t,r,n){if(_CID$c.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$c.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$c.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$c.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$c(0,this.codec,this.multihash)}toV1(){return new _CID$c(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$d.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$c=classIs(CID$c,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$c.codecs=baseTable;var src$1Q=_CID$c,cidFromHash_1=cidFromHash;function cidFromHash(e,t,r){const n=src$4.print[e],i=(r=r||{}).hashAlg||"keccak-256",o=void 0===r.version?1:r.version,s=src.encode(t,i);return new src$1Q(o,n,s)}var sha3$c=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),sha$7=e=>async t=>{switch(e){case"sha1":return crypto$l.createHash("sha1").update(t).digest();case"sha2-256":return crypto$l.createHash("sha256").update(t).digest();case"sha2-512":return crypto$l.createHash("sha512").update(t).digest();case"dbl-sha2-256":{const e=crypto$l.createHash("sha256").update(t).digest();return crypto$l.createHash("sha256").update(e).digest()}default:throw new Error(`${e} is not a supported algorithm`)}};const{Buffer:Buffer$S}=buffer$1,fromNumberTo32BitBuf$m=e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return Buffer$S.from(t)};var utils$O={fromNumberTo32BitBuf:fromNumberTo32BitBuf$m};const{Buffer:Buffer$T}=buffer$1,minB$b=45569,minS$b=45633,blake2b$c={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$c={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$b=(e,t)=>async r=>{const n=t.init(e,null);return t.update(n,r),Buffer$T.from(t.digest(n))};var blake_1$b=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$b(t+1,blake2b$c);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$b(t+1,blake2s$c)};const{Buffer:Buffer$U}=buffer$1,{fromNumberTo32BitBuf:fromNumberTo32BitBuf$n}=utils$O,hash$8=e=>async t=>{switch(e){case"sha3-224":return Buffer$U.from(sha3$c.sha3_224.arrayBuffer(t));case"sha3-256":return Buffer$U.from(sha3$c.sha3_256.arrayBuffer(t));case"sha3-384":return Buffer$U.from(sha3$c.sha3_384.arrayBuffer(t));case"sha3-512":return Buffer$U.from(sha3$c.sha3_512.arrayBuffer(t));case"shake-128":return Buffer$U.from(sha3$c.shake128.create(128).update(t).arrayBuffer());case"shake-256":return Buffer$U.from(sha3$c.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return Buffer$U.from(sha3$c.keccak224.arrayBuffer(t));case"keccak-256":return Buffer$U.from(sha3$c.keccak256.arrayBuffer(t));case"keccak-384":return Buffer$U.from(sha3$c.keccak384.arrayBuffer(t));case"keccak-512":return Buffer$U.from(sha3$c.keccak512.arrayBuffer(t));case"murmur3-128":return Buffer$U.from(murmurhash3jsRevisited.x64.hash128(t),"hex");case"murmur3-32":return fromNumberTo32BitBuf$n(murmurhash3jsRevisited.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};var crypto$h={sha1:sha$7("sha1"),sha2256:sha$7("sha2-256"),sha2512:sha$7("sha2-512"),dblSha2256:sha$7("dbl-sha2-256"),sha3224:hash$8("sha3-224"),sha3256:hash$8("sha3-256"),sha3384:hash$8("sha3-384"),sha3512:hash$8("sha3-512"),shake128:hash$8("shake-128"),shake256:hash$8("shake-256"),keccak224:hash$8("keccak-224"),keccak256:hash$8("keccak-256"),keccak384:hash$8("keccak-384"),keccak512:hash$8("keccak-512"),murmur3128:hash$8("murmur3-128"),murmur332:hash$8("murmur3-32"),addBlake:blake_1$b};const{Buffer:Buffer$V}=buffer$1;async function Multihashing$b(e,t,r){const n=await Multihashing$b.digest(e,t,r);return src.encode(n,t,r)}Multihashing$b.Buffer=Buffer$V,Multihashing$b.multihash=src,Multihashing$b.digest=async(e,t,r)=>{const n=Multihashing$b.createHash(t),i=await n(e);return r?i.slice(0,r):i},Multihashing$b.createHash=function(e){if(!e)throw errCode("hash algorithm must be specified","ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=src.coerceCode(e),!Multihashing$b.functions[e])throw errCode(`multihash function '${e}' not yet supported`,"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing$b.functions[e]},Multihashing$b.functions={17:crypto$h.sha1,18:crypto$h.sha2256,19:crypto$h.sha2512,20:crypto$h.sha3512,21:crypto$h.sha3384,22:crypto$h.sha3256,23:crypto$h.sha3224,24:crypto$h.shake128,25:crypto$h.shake256,26:crypto$h.keccak224,27:crypto$h.keccak256,28:crypto$h.keccak384,29:crypto$h.keccak512,34:crypto$h.murmur3128,35:crypto$h.murmur332,86:crypto$h.dblSha2256},crypto$h.addBlake(Multihashing$b.functions),Multihashing$b.validate=async(e,t)=>{const r=await Multihashing$b(e,src.decode(t).name);return 0===Buffer$V.compare(t,r)};var src$1R=Multihashing$b;const DEFAULT_HASH_ALG$1=src$4.KECCAK_256,createUtil=(e,t)=>({deserialize:t,serialize:e=>e._ethObj.serialize(),cid:async(t,r)=>{const n={cidVersion:1,hashAlg:DEFAULT_HASH_ALG$1},i=Object.assign(n,r),o=await src$1R(t,i.hashAlg),s=src$4.print[e];return new src$1Q(i.cidVersion,s,o)}});var createUtil_1=createUtil;const createResolver=(e,t)=>{const r=createUtil_1(e,t),n=function*(e,t){if(!Buffer.isBuffer(e)&&!src$1Q.isCID(e)&&"string"!=typeof e&&null!==e)for(const r of Object.keys(e)){const i=void 0===t?r:t+"/"+r;yield i,yield*n(e[r],i)}};return{codec:e,defaultHashAlg:src$4.KECCAK_256,resolver:{resolve:(e,t)=>{let n=r.deserialize(e);const i=t.split("/").filter(e=>e);for(;i.length;){const e=i.shift();if(void 0===n[e])throw new Error(`Object has no property '${e}'`);if(n=n[e],src$1Q.isCID(n))return{value:n,remainderPath:i.join("/")}}return{value:n,remainderPath:""}},tree:function*(e){const t=r.deserialize(e);yield*n(t)}},util:r}};var createResolver_1=createResolver,emptyCodeHash=Buffer.from("c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470","hex");const deserialize$1=e=>{const t=new ethereumjsAccount(e),r={balance:t.balance,code:emptyCodeHash.equals(t.codeHash)?Buffer.alloc(0):cidFromHash_1(src$4.RAW,t.codeHash),codeHash:t.codeHash,isEmpty:t.isEmpty(),isContract:t.isContract(),nonce:t.nonce,stateRoot:t.stateRoot,storage:cidFromHash_1(src$4.ETH_STORAGE_TRIE,t.stateRoot),_ethObj:t};return Object.defineProperty(r,"_ethObj",{enumerable:!1}),r};var ethAccountSnapshot=createResolver_1(src$4.ETH_ACCOUNT_SNAPSHOT,deserialize$1),name$6="mainnet",chainId=1,networkId=1,comment="The Ethereum main chain",url$2="https://ethstats.net/",genesis={hash:"0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3",timestamp:null,gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa",stateRoot:"0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544"},hardforks=[{name:"chainstart",block:0,consensus:"pow",finality:null},{name:"homestead",block:115e4,consensus:"pow",finality:null},{name:"dao",block:192e4,consensus:"pow",finality:null},{name:"tangerineWhistle",block:2463e3,consensus:"pow",finality:null},{name:"spuriousDragon",block:2675e3,consensus:"pow",finality:null},{name:"byzantium",block:437e4,consensus:"pow",finality:null},{name:"constantinople",block:728e4,consensus:"pow",finality:null},{name:"petersburg",block:728e4,consensus:"pow",finality:null},{name:"istanbul",block:null,consensus:"pow",finality:null}],bootstrapNodes=[{ip:"13.93.211.84",port:30303,id:"3f1d12044546b76342d59d4a05532c14b85aa669704bfe1f864fe079415aa2c02d743e03218e57a33fb94523adb54032871a6c51b2cc5514cb7c7e35b3ed0a99",location:"US-WEST",comment:"Go Bootnode"},{ip:"191.235.84.50",port:30303,id:"78de8a0916848093c73790ead81d1928bec737d565119932b98c6b100d944b7a95e94f847f689fc723399d2e31129d182f7ef3863f2b4c820abbf3ab2722344d",location:"BR",comment:"Go Bootnode"},{ip:"13.75.154.138",port:30303,id:"158f8aab45f6d19c6cbf4a089c2670541a8da11978a2f90dbf6a502a4a3bab80d288afdbeb7ec0ef6d92de563767f3b1ea9e8e334ca711e9f8e2df5a0385e8e6",location:"AU",comment:"Go Bootnode"},{ip:"52.74.57.123",port:30303,id:"1118980bf48b0a3640bdba04e0fe78b1add18e1cd99bf22d53daac1fd9972ad650df52176e7c7d89d1114cfef2bc23a2959aa54998a46afcf7d91809f0855082",location:"SG",comment:"Go Bootnode"}],mainnet={name:name$6,chainId:chainId,networkId:networkId,comment:comment,url:url$2,genesis:genesis,hardforks:hardforks,bootstrapNodes:bootstrapNodes},mainnet$1=Object.freeze({name:name$6,chainId:chainId,networkId:networkId,comment:comment,url:url$2,genesis:genesis,hardforks:hardforks,bootstrapNodes:bootstrapNodes,default:mainnet}),name$7="ropsten",chainId$1=3,networkId$1=3,comment$1="PoW test network",url$3="https://github.com/ethereum/ropsten",genesis$1={hash:"0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d",timestamp:null,gasLimit:16777216,difficulty:1048576,nonce:"0x0000000000000042",extraData:"0x3535353535353535353535353535353535353535353535353535353535353535",stateRoot:"0x217b0bbcfb72e2d57e28f33cb361b9983513177755dc3f33ce3e7022ed62b77b"},hardforks$1=[{name:"chainstart",block:0,consensus:"pow",finality:null},{name:"homestead",block:0,consensus:"pow",finality:null},{name:"dao",block:null,consensus:"pow",finality:null},{name:"tangerineWhistle",block:0,consensus:"pow",finality:null},{name:"spuriousDragon",block:10,consensus:"pow",finality:null},{name:"byzantium",block:17e5,consensus:"pow",finality:null},{name:"constantinople",block:423e4,consensus:"pow",finality:null},{name:"petersburg",block:4939394,consensus:"pow",finality:null},{name:"istanbul",block:null,consensus:"pow",finality:null}],bootstrapNodes$1=[{ip:"52.176.7.10",port:"30303",id:"30b7ab30a01c124a6cceca36863ece12c4f5fa68e3ba9b0b51407ccc002eeed3b3102d20a88f1c1d3c3154e2449317b8ef95090e77b312d5cc39354f86d5d606",network:"Ropsten",chainId:3,location:"US",comment:"US-Azure geth"},{ip:"52.176.100.77",port:"30303",id:"865a63255b3bb68023b6bffd5095118fcc13e79dcf014fe4e47e065c350c7cc72af2e53eff895f11ba1bbb6a2b33271c1116ee870f266618eadfc2e78aa7349c",network:"Ropsten",chainId:3,location:"US",comment:"US-Azure parity"},{ip:"52.232.243.152",port:"30303",id:"6332792c4a00e3e4ee0926ed89e0d27ef985424d97b6a45bf0f23e51f0dcb5e66b875777506458aea7af6f9e4ffb69f43f3778ee73c81ed9d34c51c4b16b0b0f",network:"Ropsten",chainId:3,location:"US",comment:"Parity"},{ip:"192.81.208.223",port:"30303",id:"94c15d1b9e2fe7ce56e458b9a3b672ef11894ddedd0c6f247e0f1d3487f52b66208fb4aeb8179fce6e3a749ea93ed147c37976d67af557508d199d9594c35f09",network:"Ropsten",chainId:3,location:"US",comment:"@gpip"}],ropsten={name:name$7,chainId:chainId$1,networkId:networkId$1,comment:comment$1,url:url$3,genesis:genesis$1,hardforks:hardforks$1,bootstrapNodes:bootstrapNodes$1},ropsten$1=Object.freeze({name:name$7,chainId:chainId$1,networkId:networkId$1,comment:comment$1,url:url$3,genesis:genesis$1,hardforks:hardforks$1,bootstrapNodes:bootstrapNodes$1,default:ropsten}),name$8="rinkeby",chainId$2=4,networkId$2=4,comment$2="PoA test network",url$4="https://www.rinkeby.io",genesis$2={hash:"0x6341fd3daf94b748c72ced5a5b26028f2474f5f00d824504e4fa37a75767e177",timestamp:"0x58ee40ba",gasLimit:47e5,difficulty:1,nonce:"0x0000000000000000",extraData:"0x52657370656374206d7920617574686f7269746168207e452e436172746d616e42eb768f2244c8811c63729a21a3569731535f067ffc57839b00206d1ad20c69a1981b489f772031b279182d99e65703f0076e4812653aab85fca0f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",stateRoot:"0x53580584816f617295ea26c0e17641e0120cab2f0a8ffb53a866fd53aa8e8c2d"},hardforks$2=[{name:"chainstart",block:0,consensus:"poa",finality:null},{name:"homestead",block:1,consensus:"poa",finality:null},{name:"dao",block:null,consensus:"poa",finality:null},{name:"tangerineWhistle",block:2,consensus:"poa",finality:null},{name:"spuriousDragon",block:3,consensus:"poa",finality:null},{name:"byzantium",block:1035301,consensus:"poa",finality:null},{name:"constantinople",block:null,consensus:"poa",finality:null},{name:"istanbul",block:null,consensus:"poa",finality:null}],bootstrapNodes$2=[{ip:"52.169.42.101",port:30303,id:"a24ac7c5484ef4ed0c5eb2d36620ba4e4aa13b8c84684e1b4aab0cebea2ae45cb4d375b77eab56516d34bfbd3c1a833fc51296ff084b770b94fb9028c4d25ccf",location:"IE",comment:""},{ip:"52.3.158.184",port:30303,id:"343149e4feefa15d882d9fe4ac7d88f885bd05ebb735e547f12e12080a9fa07c8014ca6fd7f373123488102fe5e34111f8509cf0b7de3f5b44339c9f25e87cb8",location:"",comment:"INFURA"}],rinkeby={name:name$8,chainId:chainId$2,networkId:networkId$2,comment:comment$2,url:url$4,genesis:genesis$2,hardforks:hardforks$2,bootstrapNodes:bootstrapNodes$2},rinkeby$1=Object.freeze({name:name$8,chainId:chainId$2,networkId:networkId$2,comment:comment$2,url:url$4,genesis:genesis$2,hardforks:hardforks$2,bootstrapNodes:bootstrapNodes$2,default:rinkeby}),name$9="kovan",chainId$3=42,networkId$3=42,comment$3="Parity PoA test network",url$5="https://kovan-testnet.github.io/website/",genesis$3={hash:"0xa3c565fc15c7478862d50ccd6561e3c06b24cc509bf388941c25ea985ce32cb9",timestamp:null,gasLimit:6e6,difficulty:131072,nonce:"0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",extraData:"0x",stateRoot:"0x2480155b48a1cea17d67dbfdfaafe821c1d19cdd478c5358e8ec56dec24502b2"},hardforks$3=[],bootstrapNodes$3=[{ip:"40.71.221.215",port:30303,id:"56abaf065581a5985b8c5f4f88bd202526482761ba10be9bfdcd14846dd01f652ec33fde0f8c0fd1db19b59a4c04465681fcef50e11380ca88d25996191c52de",location:"",comment:"Parity Bootnode"},{ip:"52.166.117.77",port:30303,id:"d07827483dc47b368eaf88454fb04b41b7452cf454e194e2bd4c14f98a3278fed5d819dbecd0d010407fc7688d941ee1e58d4f9c6354d3da3be92f55c17d7ce3",location:"",comment:"Parity Bootnode"},{ip:"52.165.239.18",port:30303,id:"8fa162563a8e5a05eef3e1cd5abc5828c71344f7277bb788a395cce4a0e30baf2b34b92fe0b2dbbba2313ee40236bae2aab3c9811941b9f5a7e8e90aaa27ecba",location:"",comment:"Parity Bootnode"},{ip:"52.243.47.56",port:30303,id:"7e2e7f00784f516939f94e22bdc6cf96153603ca2b5df1c7cc0f90a38e7a2f218ffb1c05b156835e8b49086d11fdd1b3e2965be16baa55204167aa9bf536a4d9",location:"",comment:"Parity Bootnode"},{ip:"40.68.248.100",port:30303,id:"0518a3d35d4a7b3e8c433e7ffd2355d84a1304ceb5ef349787b556197f0c87fad09daed760635b97d52179d645d3e6d16a37d2cc0a9945c2ddf585684beb39ac",location:"",comment:"Parity Bootnode"}],kovan={name:name$9,chainId:chainId$3,networkId:networkId$3,comment:comment$3,url:url$5,genesis:genesis$3,hardforks:hardforks$3,bootstrapNodes:bootstrapNodes$3},kovan$1=Object.freeze({name:name$9,chainId:chainId$3,networkId:networkId$3,comment:comment$3,url:url$5,genesis:genesis$3,hardforks:hardforks$3,bootstrapNodes:bootstrapNodes$3,default:kovan}),name$a="goerli",chainId$4=5,networkId$4=5,comment$4="Cross-client PoA test network",url$6="https://github.com/goerli/testnet",genesis$4={hash:"0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a",timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",stateRoot:"0x5d6cded585e73c4e322c30c2f782a336316f17dd85a4863b9d838d2d4b8b3008"},hardforks$4=[{name:"chainstart",block:0,consensus:"poa",finality:null},{name:"homestead",block:0,consensus:"poa",finality:null},{name:"dao",block:0,consensus:"poa",finality:null},{name:"tangerineWhistle",block:0,consensus:"poa",finality:null},{name:"spuriousDragon",block:0,consensus:"poa",finality:null},{name:"byzantium",block:0,consensus:"poa",finality:null},{name:"constantinople",block:0,consensus:"poa",finality:null},{name:"petersburg",block:0,consensus:"poa",finality:null},{name:"istanbul",block:null,consensus:"poa",finality:null}],bootstrapNodes$4=[{ip:"51.141.78.53",port:30303,id:"011f758e6552d105183b1761c5e2dea0111bc20fd5f6422bc7f91e0fabbec9a6595caf6239b37feb773dddd3f87240d99d859431891e4a642cf2a0a9e6cbb98a",location:"",comment:"Source: https://github.com/goerli/testnet/blob/master/bootnodes.txt"},{ip:"13.93.54.137",port:30303,id:"176b9417f511d05b6b2cf3e34b756cf0a7096b3094572a8f6ef4cdcb9d1f9d00683bf0f83347eebdf3b81c3521c2332086d9592802230bf528eaf606a1d9677b",location:"",comment:"Source: https://github.com/goerli/testnet/blob/master/bootnodes.txt"},{ip:"94.237.54.114",port:30313,id:"46add44b9f13965f7b9875ac6b85f016f341012d84f975377573800a863526f4da19ae2c620ec73d11591fa9510e992ecc03ad0751f53cc02f7c7ed6d55c7291",location:"",comment:"Source: https://github.com/goerli/testnet/blob/master/bootnodes.txt"},{ip:"52.64.155.147",port:30303,id:"c1f8b7c2ac4453271fa07d8e9ecf9a2e8285aa0bd0c07df0131f47153306b0736fd3db8924e7a9bf0bed6b1d8d4f87362a71b033dc7c64547728d953e43e59b2",location:"",comment:"Source: https://github.com/goerli/testnet/blob/master/bootnodes.txt"},{ip:"213.186.16.82",port:30303,id:"f4a9c6ee28586009fb5a96c8af13a58ed6d8315a9eee4772212c1d4d9cebe5a8b8a78ea4434f318726317d04a3f531a1ef0420cf9752605a562cfe858c46e263",location:"",comment:"Source: https://github.com/goerli/testnet/blob/master/bootnodes.txt"}],goerli={name:name$a,chainId:chainId$4,networkId:networkId$4,comment:comment$4,url:url$6,genesis:genesis$4,hardforks:hardforks$4,bootstrapNodes:bootstrapNodes$4},goerli$1=Object.freeze({name:name$a,chainId:chainId$4,networkId:networkId$4,comment:comment$4,url:url$6,genesis:genesis$4,hardforks:hardforks$4,bootstrapNodes:bootstrapNodes$4,default:goerli}),require$$0$5=getCjsExportFromNamespace(mainnet$1),require$$1=getCjsExportFromNamespace(ropsten$1),require$$2=getCjsExportFromNamespace(rinkeby$1),require$$3=getCjsExportFromNamespace(kovan$1),require$$4=getCjsExportFromNamespace(goerli$1),chains=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.chains={names:{1:"mainnet",3:"ropsten",4:"rinkeby",42:"kovan",6284:"goerli"},mainnet:require$$0$5,ropsten:require$$1,rinkeby:require$$2,kovan:require$$3,goerli:require$$4}});unwrapExports(chains);var chains_1=chains.chains,name$b="chainstart",comment$5="Start of the Ethereum main chain",eip={url:"",status:""},status="",gasConfig={minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"}},gasPrices={tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Once per EXP instuction"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Once per SHA3 operation"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Once per SLOAD operation"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Refunded gas, once per SSTORE operation if the zeroness changes to zero"},log:{v:375,d:"Per LOG* operation"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Once per CREATE operation & contract-creation transaction"},call:{v:40,d:"Once per CALL operation & message call transaction"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""}},vm={stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow={minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"}},casper={},sharding$1={},chainstart={name:name$b,comment:comment$5,eip:eip,status:status,gasConfig:gasConfig,gasPrices:gasPrices,vm:vm,pow:pow,casper:casper,sharding:sharding$1},chainstart$1=Object.freeze({name:name$b,comment:comment$5,eip:eip,status:status,gasConfig:gasConfig,gasPrices:gasPrices,vm:vm,pow:pow,casper:casper,sharding:sharding$1,default:chainstart}),name$c="homestead",comment$6="Homestead hardfork with protocol and network changes",eip$1={url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final"},gasConfig$1={},gasPrices$1={},vm$1={},pow$1={},casper$1={},sharding$2={},homestead={name:name$c,comment:comment$6,eip:eip$1,gasConfig:gasConfig$1,gasPrices:gasPrices$1,vm:vm$1,pow:pow$1,casper:casper$1,sharding:sharding$2},homestead$1=Object.freeze({name:name$c,comment:comment$6,eip:eip$1,gasConfig:gasConfig$1,gasPrices:gasPrices$1,vm:vm$1,pow:pow$1,casper:casper$1,sharding:sharding$2,default:homestead}),name$d="dao",comment$7="DAO rescue hardfork",eip$2={url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final"},gasConfig$2={},gasPrices$2={},vm$2={},pow$2={},casper$2={},sharding$3={},dao={name:name$d,comment:comment$7,eip:eip$2,gasConfig:gasConfig$2,gasPrices:gasPrices$2,vm:vm$2,pow:pow$2,casper:casper$2,sharding:sharding$3},dao$1=Object.freeze({name:name$d,comment:comment$7,eip:eip$2,gasConfig:gasConfig$2,gasPrices:gasPrices$2,vm:vm$2,pow:pow$2,casper:casper$2,sharding:sharding$3,default:dao}),name$e="tangerineWhistle",comment$8="Hardfork with gas cost changes for IO-heavy operations",eip$3={url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final"},gasConfig$3={},gasPrices$3={sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"}},vm$3={},pow$3={},casper$3={},sharding$4={},tangerineWhistle={name:name$e,comment:comment$8,eip:eip$3,gasConfig:gasConfig$3,gasPrices:gasPrices$3,vm:vm$3,pow:pow$3,casper:casper$3,sharding:sharding$4},tangerineWhistle$1=Object.freeze({name:name$e,comment:comment$8,eip:eip$3,gasConfig:gasConfig$3,gasPrices:gasPrices$3,vm:vm$3,pow:pow$3,casper:casper$3,sharding:sharding$4,default:tangerineWhistle}),name$f="spuriousDragon",comment$9="HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",eip$4={url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final"},gasConfig$4={},gasPrices$4={expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm$4={maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow$4={},casper$4={},sharding$5={},spuriousDragon={name:name$f,comment:comment$9,eip:eip$4,gasConfig:gasConfig$4,gasPrices:gasPrices$4,vm:vm$4,pow:pow$4,casper:casper$4,sharding:sharding$5},spuriousDragon$1=Object.freeze({name:name$f,comment:comment$9,eip:eip$4,gasConfig:gasConfig$4,gasPrices:gasPrices$4,vm:vm$4,pow:pow$4,casper:casper$4,sharding:sharding$5,default:spuriousDragon}),name$g="byzantium",comment$a="Hardfork with new precompiles, instructions and other protocol changes",eip$5={url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final"},gasConfig$5={},gasPrices$5={modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"}},vm$5={},pow$5={minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"}},casper$5={},sharding$6={},byzantium={name:name$g,comment:comment$a,eip:eip$5,gasConfig:gasConfig$5,gasPrices:gasPrices$5,vm:vm$5,pow:pow$5,casper:casper$5,sharding:sharding$6},byzantium$1=Object.freeze({name:name$g,comment:comment$a,eip:eip$5,gasConfig:gasConfig$5,gasPrices:gasPrices$5,vm:vm$5,pow:pow$5,casper:casper$5,sharding:sharding$6,default:byzantium}),name$h="constantinople",comment$b="Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",eip$6={url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final"},gasConfig$6={},gasPrices$6={netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"}},vm$6={},pow$6={minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"}},casper$6={},sharding$7={},constantinople={name:name$h,comment:comment$b,eip:eip$6,gasConfig:gasConfig$6,gasPrices:gasPrices$6,vm:vm$6,pow:pow$6,casper:casper$6,sharding:sharding$7},constantinople$1=Object.freeze({name:name$h,comment:comment$b,eip:eip$6,gasConfig:gasConfig$6,gasPrices:gasPrices$6,vm:vm$6,pow:pow$6,casper:casper$6,sharding:sharding$7,default:constantinople}),name$i="petersburg",comment$c="Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",eip$7={url:"https://github.com/ethereum/EIPs/pull/1716",status:"Draft"},gasConfig$7={},gasPrices$7={netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm$7={},pow$7={},casper$7={},sharding$8={},petersburg={name:name$i,comment:comment$c,eip:eip$7,gasConfig:gasConfig$7,gasPrices:gasPrices$7,vm:vm$7,pow:pow$7,casper:casper$7,sharding:sharding$8},petersburg$1=Object.freeze({name:name$i,comment:comment$c,eip:eip$7,gasConfig:gasConfig$7,gasPrices:gasPrices$7,vm:vm$7,pow:pow$7,casper:casper$7,sharding:sharding$8,default:petersburg}),name$j="istanbul",comment$d="HF targeted for October 2019 following the Constantinople/Petersburg HF",eip$8={url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Draft"},gasConfig$8={},gasPrices$8={ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"}},vm$8={},pow$8={},casper$8={},sharding$9={},istanbul={name:name$j,comment:comment$d,eip:eip$8,gasConfig:gasConfig$8,gasPrices:gasPrices$8,vm:vm$8,pow:pow$8,casper:casper$8,sharding:sharding$9},istanbul$1=Object.freeze({name:name$j,comment:comment$d,eip:eip$8,gasConfig:gasConfig$8,gasPrices:gasPrices$8,vm:vm$8,pow:pow$8,casper:casper$8,sharding:sharding$9,default:istanbul}),require$$0$6=getCjsExportFromNamespace(chainstart$1),require$$1$1=getCjsExportFromNamespace(homestead$1),require$$2$1=getCjsExportFromNamespace(dao$1),require$$3$1=getCjsExportFromNamespace(tangerineWhistle$1),require$$4$1=getCjsExportFromNamespace(spuriousDragon$1),require$$5=getCjsExportFromNamespace(byzantium$1),require$$6=getCjsExportFromNamespace(constantinople$1),require$$7=getCjsExportFromNamespace(petersburg$1),require$$8=getCjsExportFromNamespace(istanbul$1),hardforks$5=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hardforks=[["chainstart",require$$0$6],["homestead",require$$1$1],["dao",require$$2$1],["tangerineWhistle",require$$3$1],["spuriousDragon",require$$4$1],["byzantium",require$$5],["constantinople",require$$6],["petersburg",require$$7],["istanbul",require$$8]]});unwrapExports(hardforks$5);var hardforks_1=hardforks$5.hardforks,dist$6=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){this._chainParams=this.setChain(e),this._hardfork=null,this._supportedHardforks=void 0===r?[]:r,t&&this.setHardfork(t)}return e.prototype.setChain=function(e){if("number"==typeof e){if(!chains.chains.names[e])throw new Error("Chain with ID "+e+" not supported");this._chainParams=chains.chains[chains.chains.names[e]]}else if("string"==typeof e){if(!chains.chains[e])throw new Error("Chain with name "+e+" not supported");this._chainParams=chains.chains[e]}else{if("object"!=typeof e)throw new Error("Wrong input format");for(var t=0,r=["networkId","genesis","hardforks","bootstrapNodes"];t<r.length;t++){var n=r[t];if(void 0===e[n])throw new Error("Missing required chain parameter: "+n)}this._chainParams=e}return this._chainParams},e.prototype.setHardfork=function(e){if(!this._isSupportedHardfork(e))throw new Error("Hardfork "+e+" not set as supported in supportedHardforks");for(var t=!1,r=0,n=hardforks$5.hardforks;r<n.length;r++){n[r][0]===e&&(this._hardfork=e,t=!0)}if(!t)throw new Error("Hardfork with name "+e+" not supported")},e.prototype._chooseHardfork=function(e,t){if(t=void 0===t||t,e){if(t&&!this._isSupportedHardfork(e))throw new Error("Hardfork "+e+" not set as supported in supportedHardforks")}else{if(!this._hardfork)throw new Error("Method called with neither a hardfork set nor provided by param");e=this._hardfork}return e},e.prototype._getHardfork=function(e){for(var t=0,r=this.hardforks();t<r.length;t++){var n=r[t];if(n.name===e)return n}throw new Error("Hardfork "+e+" not defined for chain "+this.chainName())},e.prototype._isSupportedHardfork=function(e){if(!(this._supportedHardforks.length>0))return!0;for(var t=0,r=this._supportedHardforks;t<r.length;t++){if(e===r[t])return!0}return!1},e.prototype.param=function(e,t,r){var n;r=this._chooseHardfork(r);for(var i=0,o=hardforks$5.hardforks;i<o.length;i++){var s=o[i];if(!s[1][e])throw new Error("Topic "+e+" not defined");if(void 0!==s[1][e][t]&&(n=s[1][e][t].v),s[0]===r)break}if(void 0===n)throw new Error(e+" value for "+t+" not found");return n},e.prototype.paramByBlock=function(e,t,r){var n=this.activeHardforks(r),i=n[n.length-1].name;return this.param(e,t,i)},e.prototype.hardforkIsActiveOnBlock=function(e,t,r){var n=void 0!==(r=void 0!==r?r:{}).onlySupported&&r.onlySupported;e=this._chooseHardfork(e,n);var i=this.hardforkBlock(e);return null!==i&&t>=i},e.prototype.activeOnBlock=function(e,t){return this.hardforkIsActiveOnBlock(null,e,t)},e.prototype.hardforkGteHardfork=function(e,t,r){var n=void 0!==(r=void 0!==r?r:{}).onlyActive&&r.onlyActive;e=this._chooseHardfork(e,r.onlySupported);for(var i=-1,o=-1,s=0,a=0,c=n?this.activeHardforks(null,r):this.hardforks();a<c.length;a++){var u=c[a];u.name===e&&(i=s),u.name===t&&(o=s),s+=1}return i>=o},e.prototype.gteHardfork=function(e,t){return this.hardforkGteHardfork(null,e,t)},e.prototype.hardforkIsActiveOnChain=function(e,t){var r=void 0!==(t=void 0!==t?t:{}).onlySupported&&t.onlySupported;e=this._chooseHardfork(e,r);for(var n=0,i=this.hardforks();n<i.length;n++){var o=i[n];if(o.name===e&&null!==o.block)return!0}return!1},e.prototype.activeHardforks=function(e,t){t=void 0!==t?t:{};for(var r=[],n=0,i=this.hardforks();n<i.length;n++){var o=i[n];if(null!==o.block){if(null!=e&&e<o.block)break;t.onlySupported&&!this._isSupportedHardfork(o.name)||r.push(o)}}return r},e.prototype.activeHardfork=function(e,t){t=void 0!==t?t:{};var r=this.activeHardforks(e,t);if(r.length>0)return r[r.length-1].name;throw new Error("No (supported) active hardfork found")},e.prototype.hardforkBlock=function(e){return e=this._chooseHardfork(e,!1),this._getHardfork(e).block},e.prototype.isHardforkBlock=function(e,t){return t=this._chooseHardfork(t,!1),this.hardforkBlock(t)===e},e.prototype.consensus=function(e){return e=this._chooseHardfork(e),this._getHardfork(e).consensus},e.prototype.finality=function(e){return e=this._chooseHardfork(e),this._getHardfork(e).finality},e.prototype.genesis=function(){return this._chainParams.genesis},e.prototype.hardforks=function(){return this._chainParams.hardforks},e.prototype.bootstrapNodes=function(){return this._chainParams.bootstrapNodes},e.prototype.hardfork=function(){return this._hardfork},e.prototype.chainId=function(){return this._chainParams.chainId},e.prototype.chainName=function(){return chains.chains.names[this.chainId()]||this._chainParams.name},e.prototype.networkId=function(){return this._chainParams.networkId},e}();t.default=r});unwrapExports(dist$6);var dist$7=createCommonjsModule(function(e,t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=safeBuffer.Buffer;Object.assign(t,lib$3),t.MAX_INTEGER=new bn("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new bn("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.SHA3_NULL_S=t.KECCAK256_NULL_S,t.KECCAK256_NULL=n.from(t.KECCAK256_NULL_S,"hex"),t.SHA3_NULL=t.KECCAK256_NULL,t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.SHA3_RLP_ARRAY_S=t.KECCAK256_RLP_ARRAY_S,t.KECCAK256_RLP_ARRAY=n.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.SHA3_RLP_ARRAY=t.KECCAK256_RLP_ARRAY,t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.SHA3_RLP_S=t.KECCAK256_RLP_S,t.KECCAK256_RLP=n.from(t.KECCAK256_RLP_S,"hex"),t.SHA3_RLP=t.KECCAK256_RLP,t.BN=bn,t.rlp=dist,t.secp256k1=secp256k1$1,t.zeros=function(e){return n.allocUnsafe(e).fill(0)},t.zeroAddress=function(){var e=t.zeros(20);return t.bufferToHex(e)},t.setLengthLeft=t.setLength=function(e,r,n){var i=t.zeros(r);return e=t.toBuffer(e),n?e.length<r?(e.copy(i),i):e.slice(0,r):e.length<r?(e.copy(i,r-e.length),i):e.slice(-r)},t.setLengthRight=function(e,r){return t.setLength(e,r,!0)},t.unpad=t.stripZeros=function(e){for(var r=(e=t.stripHexPrefix(e))[0];e.length>0&&"0"===r.toString();)r=(e=e.slice(1))[0];return e},t.toBuffer=function(e){if(!n.isBuffer(e))if(Array.isArray(e))e=n.from(e);else if("string"==typeof e)e=t.isHexString(e)?n.from(t.padToEven(t.stripHexPrefix(e)),"hex"):n.from(e);else if("number"==typeof e)e=t.intToBuffer(e);else if(null==e)e=n.allocUnsafe(0);else if(bn.isBN(e))e=e.toArrayLike(n);else{if(!e.toArray)throw new Error("invalid type");e=n.from(e.toArray())}return e},t.bufferToInt=function(e){return new bn(t.toBuffer(e)).toNumber()},t.bufferToHex=function(e){return"0x"+(e=t.toBuffer(e)).toString("hex")},t.fromSigned=function(e){return new bn(e).fromTwos(256)},t.toUnsigned=function(e){return n.from(e.toTwos(256).toArray())},t.keccak=function(e,r){return e=t.toBuffer(e),r||(r=256),keccak$2("keccak"+r).update(e).digest()},t.keccak256=function(e){return t.keccak(e)},t.sha3=t.keccak,t.sha256=function(e){return e=t.toBuffer(e),createHash("sha256").update(e).digest()},t.ripemd160=function(e,r){e=t.toBuffer(e);var n=createHash("rmd160").update(e).digest();return!0===r?t.setLength(n,32):n},t.rlphash=function(e){return t.keccak(dist.encode(e))},t.isValidPrivate=function(e){return secp256k1$1.privateKeyVerify(e)},t.isValidPublic=function(e,t){return 64===e.length?secp256k1$1.publicKeyVerify(n.concat([n.from([4]),e])):!!t&&secp256k1$1.publicKeyVerify(e)},t.pubToAddress=t.publicToAddress=function(e,r){return e=t.toBuffer(e),r&&64!==e.length&&(e=secp256k1$1.publicKeyConvert(e,!1).slice(1)),assert$t(64===e.length),t.keccak(e).slice(-20)};var i=t.privateToPublic=function(e){return e=t.toBuffer(e),secp256k1$1.publicKeyCreate(e,!1).slice(1)};t.importPublic=function(e){return 64!==(e=t.toBuffer(e)).length&&(e=secp256k1$1.publicKeyConvert(e,!1).slice(1)),e},t.ecsign=function(e,t){var r=secp256k1$1.sign(e,t),n={};return n.r=r.signature.slice(0,32),n.s=r.signature.slice(32,64),n.v=r.recovery+27,n},t.hashPersonalMessage=function(e){var r=t.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return t.keccak(n.concat([r,e]))},t.ecrecover=function(e,r,i,o){var s=n.concat([t.setLength(i,32),t.setLength(o,32)],64),a=r-27;if(0!==a&&1!==a)throw new Error("Invalid signature v value");var c=secp256k1$1.recover(e,s,a);return secp256k1$1.publicKeyConvert(c,!1).slice(1)},t.toRpcSig=function(e,r,i){if(27!==e&&28!==e)throw new Error("Invalid recovery id");return t.bufferToHex(n.concat([t.setLengthLeft(r,32),t.setLengthLeft(i,32),t.toBuffer(e-27)]))},t.fromRpcSig=function(e){if(65!==(e=t.toBuffer(e)).length)throw new Error("Invalid signature length");var r=e[64];return r<27&&(r+=27),{v:r,r:e.slice(0,32),s:e.slice(32,64)}},t.privateToAddress=function(e){return t.publicToAddress(i(e))},t.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},t.isZeroAddress=function(e){return t.zeroAddress()===t.addHexPrefix(e)},t.toChecksumAddress=function(e){e=t.stripHexPrefix(e).toLowerCase();for(var r=t.keccak(e).toString("hex"),n="0x",i=0;i<e.length;i++)parseInt(r[i],16)>=8?n+=e[i].toUpperCase():n+=e[i];return n},t.isValidChecksumAddress=function(e){return t.isValidAddress(e)&&t.toChecksumAddress(e)===e},t.generateAddress=function(e,r){return e=t.toBuffer(e),r=(r=new bn(r)).isZero()?null:n.from(r.toArray()),t.rlphash([e,r]).slice(-20)},t.isPrecompiled=function(e){var r=t.unpad(e);return 1===r.length&&r[0]>=1&&r[0]<=8},t.addHexPrefix=function(e){return"string"!=typeof e?e:t.isHexPrefixed(e)?e:"0x"+e},t.isValidSignature=function(e,t,r,n){var i=new bn("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),o=new bn("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);return 32===t.length&&32===r.length&&((27===e||28===e)&&(t=new bn(t),r=new bn(r),!(t.isZero()||t.gt(o)||r.isZero()||r.gt(o))&&(!1!==n||1!==new bn(r).cmp(i))))},t.baToJSON=function(e){if(n.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var r=[],i=0;i<e.length;i++)r.push(t.baToJSON(e[i]));return r}},t.defineProperties=function(e,i,o){if(e.raw=[],e._fields=[],e.toJSON=function(r){if(r){var n={};return e._fields.forEach(function(t){n[t]="0x"+e[t].toString("hex")}),n}return t.baToJSON(this.raw)},e.serialize=function(){return dist.encode(e.raw)},i.forEach(function(r,i){function o(){return e.raw[i]}function s(o){"00"!==(o=t.toBuffer(o)).toString("hex")||r.allowZero||(o=n.allocUnsafe(0)),r.allowLess&&r.length?(o=t.stripZeros(o),assert$t(r.length>=o.length,"The field "+r.name+" must not have more "+r.length+" bytes")):r.allowZero&&0===o.length||!r.length||assert$t(r.length===o.length,"The field "+r.name+" must have byte length of "+r.length),e.raw[i]=o}e._fields.push(r.name),Object.defineProperty(e,r.name,{enumerable:!0,configurable:!0,get:o,set:s}),r.default&&(e[r.name]=r.default),r.alias&&Object.defineProperty(e,r.alias,{enumerable:!1,configurable:!0,set:s,get:o})}),o)if("string"==typeof o&&(o=n.from(t.stripHexPrefix(o),"hex")),n.isBuffer(o)&&(o=dist.decode(o)),Array.isArray(o)){if(o.length>e._fields.length)throw new Error("wrong number of fields in data");o.forEach(function(r,n){e[e._fields[n]]=t.toBuffer(r)})}else{if("object"!==(void 0===o?"undefined":r(o)))throw new Error("invalid data");var s=Object.keys(o);i.forEach(function(t){-1!==s.indexOf(t.name)&&(e[t.name]=o[t.name]),-1!==s.indexOf(t.alias)&&(e[t.alias]=o[t.alias])})}}}),dist_1$3=dist$7.MAX_INTEGER,dist_2$3=dist$7.TWO_POW256,dist_3$3=dist$7.KECCAK256_NULL_S,dist_4$2=dist$7.SHA3_NULL_S,dist_5$2=dist$7.KECCAK256_NULL,dist_6$2=dist$7.SHA3_NULL,dist_7$2=dist$7.KECCAK256_RLP_ARRAY_S,dist_8$2=dist$7.SHA3_RLP_ARRAY_S,dist_9$2=dist$7.KECCAK256_RLP_ARRAY,dist_10$2=dist$7.SHA3_RLP_ARRAY,dist_11$2=dist$7.KECCAK256_RLP_S,dist_12$2=dist$7.SHA3_RLP_S,dist_13$2=dist$7.KECCAK256_RLP,dist_14$2=dist$7.SHA3_RLP,dist_15$2=dist$7.BN,dist_16$2=dist$7.rlp,dist_17$2=dist$7.secp256k1,dist_18$2=dist$7.zeros,dist_19$2=dist$7.zeroAddress,dist_20$2=dist$7.setLengthLeft,dist_21$2=dist$7.setLength,dist_22$2=dist$7.setLengthRight,dist_23$2=dist$7.unpad,dist_24$2=dist$7.stripZeros,dist_25$2=dist$7.toBuffer,dist_26$2=dist$7.bufferToInt,dist_27$2=dist$7.bufferToHex,dist_28$2=dist$7.fromSigned,dist_29$2=dist$7.toUnsigned,dist_30$2=dist$7.keccak,dist_31$2=dist$7.keccak256,dist_32$2=dist$7.sha3,dist_33$2=dist$7.sha256,dist_34$2=dist$7.ripemd160,dist_35$2=dist$7.rlphash,dist_36$2=dist$7.isValidPrivate,dist_37$2=dist$7.isValidPublic,dist_38$2=dist$7.pubToAddress,dist_39$2=dist$7.publicToAddress,dist_40$2=dist$7.privateToPublic,dist_41$2=dist$7.importPublic,dist_42$2=dist$7.ecsign,dist_43$2=dist$7.hashPersonalMessage,dist_44$2=dist$7.ecrecover,dist_45$2=dist$7.toRpcSig,dist_46$2=dist$7.fromRpcSig,dist_47$2=dist$7.privateToAddress,dist_48$2=dist$7.isValidAddress,dist_49$2=dist$7.isZeroAddress,dist_50$2=dist$7.toChecksumAddress,dist_51$2=dist$7.isValidChecksumAddress,dist_52$1=dist$7.generateAddress,dist_53$1=dist$7.isPrecompiled,dist_54$1=dist$7.addHexPrefix,dist_55$1=dist$7.isValidSignature,dist_56$1=dist$7.baToJSON,dist_57$1=dist$7.defineProperties,header=createCommonjsModule(function(e){const t=dist$6.default,r=dist$7.BN;var n=e.exports=function(e,r){if((r=r||{}).common){if(r.chain)throw new Error("Instantiation with both opts.common and opts.chain parameter not allowed!");this._common=r.common}else{let e=r.chain?r.chain:"mainnet",n=r.hardfork?r.hardfork:null;this._common=new t(e,n)}var n=[{name:"parentHash",length:32,default:dist$7.zeros(32)},{name:"uncleHash",default:dist$7.SHA3_RLP_ARRAY},{name:"coinbase",length:20,default:dist$7.zeros(20)},{name:"stateRoot",length:32,default:dist$7.zeros(32)},{name:"transactionsTrie",length:32,default:dist$7.SHA3_RLP},{name:"receiptTrie",length:32,default:dist$7.SHA3_RLP},{name:"bloom",default:dist$7.zeros(256)},{name:"difficulty",default:Buffer.from([])},{name:"number",default:dist$7.intToBuffer(115e4)},{name:"gasLimit",default:Buffer.from("ffffffffffffff","hex")},{name:"gasUsed",empty:!0,default:Buffer.from([])},{name:"timestamp",default:Buffer.from([])},{name:"extraData",allowZero:!0,empty:!0,default:Buffer.from([])},{name:"mixHash",default:dist$7.zeros(32)},{name:"nonce",default:dist$7.zeros(8)}];dist$7.defineProperties(this,n,e)};n.prototype.canonicalDifficulty=function(e){const t=this._common.hardfork()||this._common.activeHardfork(dist$7.bufferToInt(this.number)),n=new r(this.timestamp),i=new r(e.header.timestamp),o=new r(e.header.difficulty),s=new r(this._common.param("pow","minimumDifficulty",t));var a,c,u,f=o.div(new r(this._common.param("pow","difficultyBoundDivisor",t))),l=new r(this.number);if(this._common.hardforkGteHardfork(t,"byzantium")){var d=e.header.uncleHash.equals(dist$7.SHA3_RLP_ARRAY)?1:2;a=n.sub(i).idivn(9).ineg().iaddn(d),1===(c=new r(-99)).cmp(a)&&(a=c),u=o.add(f.mul(a))}this._common.hardforkGteHardfork(t,"constantinople")?(l.isubn(5e6),l.ltn(0)&&(l=new r(0))):this._common.hardforkGteHardfork(t,"byzantium")?(l.isubn(3e6),l.ltn(0)&&(l=new r(0))):this._common.hardforkGteHardfork(t,"homestead")?(a=n.sub(i).idivn(10).ineg().iaddn(1),1===(c=new r(-99)).cmp(a)&&(a=c),u=o.add(f.mul(a))):u=1===i.addn(this._common.param("pow","durationLimit",t)).cmp(n)?f.add(o):o.sub(f);var h=l.idivn(1e5).isubn(2);return h.isNeg()||u.iadd(new r(2).pow(h)),-1===u.cmp(s)&&(u=s),u},n.prototype.validateDifficulty=function(e){return 0===this.canonicalDifficulty(e).cmp(new r(this.difficulty))},n.prototype.validateGasLimit=function(e){const t=new r(e.header.gasLimit),n=new r(this.gasLimit),i=this._common.hardfork()?this._common.hardfork():this._common.activeHardfork(this.number),o=t.div(new r(this._common.param("gasConfig","gasLimitBoundDivisor",i))),s=t.add(o),a=t.sub(o);return n.lt(s)&&n.gt(a)&&n.gte(this._common.param("gasConfig","minGasLimit",i))},n.prototype.validate=function(e,t,n){var i=this;if(2===arguments.length&&(n=t,t=!1),this.isGenesis())return n();e.getBlock(i.parentHash,function(e,o){if(e)return n("could not find parent block");if(i.parentBlock=o,0!==new r(i.number).cmp(new r(o.header.number).iaddn(1)))return n("invalid number");if(t){var s=t.sub(new r(o.header.number));if(-1!==s.cmpn(8)||1!==s.cmpn(1))return n("uncle block has a parent that is too old or to young")}if(!i.validateDifficulty(o))return n("invalid Difficulty");if(!i.validateGasLimit(o))return n("invalid gas limit");if(dist$7.bufferToInt(o.header.number)+1!==dist$7.bufferToInt(i.number))return n("invalid heigth");if(dist$7.bufferToInt(i.timestamp)<=dist$7.bufferToInt(o.header.timestamp))return n("invalid timestamp");const a=i._common.hardfork()?i._common.hardfork():i._common.activeHardfork(t);if(i.extraData.length>i._common.param("vm","maxExtraDataSize",a))return n("invalid amount of extra data");n()})},n.prototype.hash=function(){return dist$7.rlphash(this.raw)},n.prototype.isGenesis=function(){return""===this.number.toString("hex")},n.prototype.setGenesisParams=function(){this.timestamp=this._common.genesis().timestamp,this.gasLimit=this._common.genesis().gasLimit,this.difficulty=this._common.genesis().difficulty,this.extraData=this._common.genesis().extraData,this.nonce=this._common.genesis().nonce,this.stateRoot=this._common.genesis().stateRoot,this.number=Buffer.from([])}});const deserialize$2=e=>{const t=new header(e),r={authorAddress:t.coinbase,bloom:t.bloom,difficulty:t.difficulty,extraData:t.extraData,gasLimit:t.gasLimit,gasUsed:t.gasUsed,mixHash:t.mixHash,nonce:t.nonce,number:t.number,ommerHash:t.uncleHash,ommers:cidFromHash_1(src$4.ETH_BLOCK_LIST,t.uncleHash),parent:cidFromHash_1(src$4.ETH_BLOCK,t.parentHash),parentHash:t.parentHash,state:cidFromHash_1(src$4.ETH_STATE_TRIE,t.stateRoot),stateRoot:t.stateRoot,timestamp:t.timestamp,transactions:cidFromHash_1(src$4.ETH_TX_TRIE,t.transactionsTrie),transactionReceipts:cidFromHash_1(src$4.ETH_TX_RECEIPT_TRIE,t.receiptTrie),transactionReceiptTrieRoot:t.receiptTrie,transactionTrieRoot:t.transactionsTrie,_ethObj:t};return Object.defineProperty(r,"_ethObj",{enumerable:!1}),r};var ethBlock=createResolver_1(src$4.ETH_BLOCK,deserialize$2);const deserialize$3=e=>{const t=dist.decode(e).map(e=>ethBlock.util.deserialize(e));return t.count=t.length,t},ethBlockListResolver=createResolver_1(src$4.ETH_BLOCK_LIST,deserialize$3);ethBlockListResolver.util.serialize=e=>{const t=e.map(e=>e._ethObj.raw);return dist.encode(t)};var ethBlockList=ethBlockListResolver,dist$8=createCommonjsModule(function(e,t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=safeBuffer.Buffer;Object.assign(t,lib$3),t.MAX_INTEGER=new bn("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new bn("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.SHA3_NULL_S=t.KECCAK256_NULL_S,t.KECCAK256_NULL=n.from(t.KECCAK256_NULL_S,"hex"),t.SHA3_NULL=t.KECCAK256_NULL,t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.SHA3_RLP_ARRAY_S=t.KECCAK256_RLP_ARRAY_S,t.KECCAK256_RLP_ARRAY=n.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.SHA3_RLP_ARRAY=t.KECCAK256_RLP_ARRAY,t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.SHA3_RLP_S=t.KECCAK256_RLP_S,t.KECCAK256_RLP=n.from(t.KECCAK256_RLP_S,"hex"),t.SHA3_RLP=t.KECCAK256_RLP,t.BN=bn,t.rlp=dist,t.secp256k1=secp256k1$1,t.zeros=function(e){return n.allocUnsafe(e).fill(0)},t.zeroAddress=function(){var e=t.zeros(20);return t.bufferToHex(e)},t.setLengthLeft=t.setLength=function(e,r,n){var i=t.zeros(r);return e=t.toBuffer(e),n?e.length<r?(e.copy(i),i):e.slice(0,r):e.length<r?(e.copy(i,r-e.length),i):e.slice(-r)},t.setLengthRight=function(e,r){return t.setLength(e,r,!0)},t.unpad=t.stripZeros=function(e){for(var r=(e=t.stripHexPrefix(e))[0];e.length>0&&"0"===r.toString();)r=(e=e.slice(1))[0];return e},t.toBuffer=function(e){if(!n.isBuffer(e))if(Array.isArray(e))e=n.from(e);else if("string"==typeof e)e=t.isHexString(e)?n.from(t.padToEven(t.stripHexPrefix(e)),"hex"):n.from(e);else if("number"==typeof e)e=t.intToBuffer(e);else if(null==e)e=n.allocUnsafe(0);else if(bn.isBN(e))e=e.toArrayLike(n);else{if(!e.toArray)throw new Error("invalid type");e=n.from(e.toArray())}return e},t.bufferToInt=function(e){return new bn(t.toBuffer(e)).toNumber()},t.bufferToHex=function(e){return"0x"+(e=t.toBuffer(e)).toString("hex")},t.fromSigned=function(e){return new bn(e).fromTwos(256)},t.toUnsigned=function(e){return n.from(e.toTwos(256).toArray())},t.keccak=function(e,r){return e=t.toBuffer(e),r||(r=256),keccak$2("keccak"+r).update(e).digest()},t.keccak256=function(e){return t.keccak(e)},t.sha3=t.keccak,t.sha256=function(e){return e=t.toBuffer(e),createHash("sha256").update(e).digest()},t.ripemd160=function(e,r){e=t.toBuffer(e);var n=createHash("rmd160").update(e).digest();return!0===r?t.setLength(n,32):n},t.rlphash=function(e){return t.keccak(dist.encode(e))},t.isValidPrivate=function(e){return secp256k1$1.privateKeyVerify(e)},t.isValidPublic=function(e,t){return 64===e.length?secp256k1$1.publicKeyVerify(n.concat([n.from([4]),e])):!!t&&secp256k1$1.publicKeyVerify(e)},t.pubToAddress=t.publicToAddress=function(e,r){return e=t.toBuffer(e),r&&64!==e.length&&(e=secp256k1$1.publicKeyConvert(e,!1).slice(1)),assert$t(64===e.length),t.keccak(e).slice(-20)};var i=t.privateToPublic=function(e){return e=t.toBuffer(e),secp256k1$1.publicKeyCreate(e,!1).slice(1)};t.importPublic=function(e){return 64!==(e=t.toBuffer(e)).length&&(e=secp256k1$1.publicKeyConvert(e,!1).slice(1)),e},t.ecsign=function(e,t){var r=secp256k1$1.sign(e,t),n={};return n.r=r.signature.slice(0,32),n.s=r.signature.slice(32,64),n.v=r.recovery+27,n},t.hashPersonalMessage=function(e){var r=t.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return t.keccak(n.concat([r,e]))},t.ecrecover=function(e,r,i,o){var s=n.concat([t.setLength(i,32),t.setLength(o,32)],64),a=r-27;if(0!==a&&1!==a)throw new Error("Invalid signature v value");var c=secp256k1$1.recover(e,s,a);return secp256k1$1.publicKeyConvert(c,!1).slice(1)},t.toRpcSig=function(e,r,i){if(27!==e&&28!==e)throw new Error("Invalid recovery id");return t.bufferToHex(n.concat([t.setLengthLeft(r,32),t.setLengthLeft(i,32),t.toBuffer(e-27)]))},t.fromRpcSig=function(e){if(65!==(e=t.toBuffer(e)).length)throw new Error("Invalid signature length");var r=e[64];return r<27&&(r+=27),{v:r,r:e.slice(0,32),s:e.slice(32,64)}},t.privateToAddress=function(e){return t.publicToAddress(i(e))},t.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},t.isZeroAddress=function(e){return t.zeroAddress()===t.addHexPrefix(e)},t.toChecksumAddress=function(e){e=t.stripHexPrefix(e).toLowerCase();for(var r=t.keccak(e).toString("hex"),n="0x",i=0;i<e.length;i++)parseInt(r[i],16)>=8?n+=e[i].toUpperCase():n+=e[i];return n},t.isValidChecksumAddress=function(e){return t.isValidAddress(e)&&t.toChecksumAddress(e)===e},t.generateAddress=function(e,r){return e=t.toBuffer(e),r=(r=new bn(r)).isZero()?null:n.from(r.toArray()),t.rlphash([e,r]).slice(-20)},t.isPrecompiled=function(e){var r=t.unpad(e);return 1===r.length&&r[0]>=1&&r[0]<=8},t.addHexPrefix=function(e){return"string"!=typeof e?e:t.isHexPrefixed(e)?e:"0x"+e},t.isValidSignature=function(e,t,r,n){var i=new bn("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),o=new bn("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);return 32===t.length&&32===r.length&&((27===e||28===e)&&(t=new bn(t),r=new bn(r),!(t.isZero()||t.gt(o)||r.isZero()||r.gt(o))&&(!1!==n||1!==new bn(r).cmp(i))))},t.baToJSON=function(e){if(n.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var r=[],i=0;i<e.length;i++)r.push(t.baToJSON(e[i]));return r}},t.defineProperties=function(e,i,o){if(e.raw=[],e._fields=[],e.toJSON=function(r){if(r){var n={};return e._fields.forEach(function(t){n[t]="0x"+e[t].toString("hex")}),n}return t.baToJSON(this.raw)},e.serialize=function(){return dist.encode(e.raw)},i.forEach(function(r,i){function o(){return e.raw[i]}function s(o){"00"!==(o=t.toBuffer(o)).toString("hex")||r.allowZero||(o=n.allocUnsafe(0)),r.allowLess&&r.length?(o=t.stripZeros(o),assert$t(r.length>=o.length,"The field "+r.name+" must not have more "+r.length+" bytes")):r.allowZero&&0===o.length||!r.length||assert$t(r.length===o.length,"The field "+r.name+" must have byte length of "+r.length),e.raw[i]=o}e._fields.push(r.name),Object.defineProperty(e,r.name,{enumerable:!0,configurable:!0,get:o,set:s}),r.default&&(e[r.name]=r.default),r.alias&&Object.defineProperty(e,r.alias,{enumerable:!1,configurable:!0,set:s,get:o})}),o)if("string"==typeof o&&(o=n.from(t.stripHexPrefix(o),"hex")),n.isBuffer(o)&&(o=dist.decode(o)),Array.isArray(o)){if(o.length>e._fields.length)throw new Error("wrong number of fields in data");o.forEach(function(r,n){e[e._fields[n]]=t.toBuffer(r)})}else{if("object"!==(void 0===o?"undefined":r(o)))throw new Error("invalid data");var s=Object.keys(o);i.forEach(function(t){-1!==s.indexOf(t.name)&&(e[t.name]=o[t.name]),-1!==s.indexOf(t.alias)&&(e[t.alias]=o[t.alias])})}}}),dist_1$4=dist$8.MAX_INTEGER,dist_2$4=dist$8.TWO_POW256,dist_3$4=dist$8.KECCAK256_NULL_S,dist_4$3=dist$8.SHA3_NULL_S,dist_5$3=dist$8.KECCAK256_NULL,dist_6$3=dist$8.SHA3_NULL,dist_7$3=dist$8.KECCAK256_RLP_ARRAY_S,dist_8$3=dist$8.SHA3_RLP_ARRAY_S,dist_9$3=dist$8.KECCAK256_RLP_ARRAY,dist_10$3=dist$8.SHA3_RLP_ARRAY,dist_11$3=dist$8.KECCAK256_RLP_S,dist_12$3=dist$8.SHA3_RLP_S,dist_13$3=dist$8.KECCAK256_RLP,dist_14$3=dist$8.SHA3_RLP,dist_15$3=dist$8.BN,dist_16$3=dist$8.rlp,dist_17$3=dist$8.secp256k1,dist_18$3=dist$8.zeros,dist_19$3=dist$8.zeroAddress,dist_20$3=dist$8.setLengthLeft,dist_21$3=dist$8.setLength,dist_22$3=dist$8.setLengthRight,dist_23$3=dist$8.unpad,dist_24$3=dist$8.stripZeros,dist_25$3=dist$8.toBuffer,dist_26$3=dist$8.bufferToInt,dist_27$3=dist$8.bufferToHex,dist_28$3=dist$8.fromSigned,dist_29$3=dist$8.toUnsigned,dist_30$3=dist$8.keccak,dist_31$3=dist$8.keccak256,dist_32$3=dist$8.sha3,dist_33$3=dist$8.sha256,dist_34$3=dist$8.ripemd160,dist_35$3=dist$8.rlphash,dist_36$3=dist$8.isValidPrivate,dist_37$3=dist$8.isValidPublic,dist_38$3=dist$8.pubToAddress,dist_39$3=dist$8.publicToAddress,dist_40$3=dist$8.privateToPublic,dist_41$3=dist$8.importPublic,dist_42$3=dist$8.ecsign,dist_43$3=dist$8.hashPersonalMessage,dist_44$3=dist$8.ecrecover,dist_45$3=dist$8.toRpcSig,dist_46$3=dist$8.fromRpcSig,dist_47$3=dist$8.privateToAddress,dist_48$3=dist$8.isValidAddress,dist_49$3=dist$8.isZeroAddress,dist_50$3=dist$8.toChecksumAddress,dist_51$3=dist$8.isValidChecksumAddress,dist_52$2=dist$8.generateAddress,dist_53$2=dist$8.isPrecompiled,dist_54$2=dist$8.addHexPrefix,dist_55$2=dist$8.isValidSignature,dist_56$2=dist$8.baToJSON,dist_57$2=dist$8.defineProperties,trieNode=TrieNode;function TrieNode(e,t,r){if(Array.isArray(e))this.parseNode(e);else if(this.type=e,"branch"===e){var n=t;this.raw=Array.apply(null,Array(17)),n&&n.forEach(function(e){this.set.apply(this,e)})}else this.raw=Array(2),this.setValue(r),this.setKey(t)}function addHexPrefix(e,t){return e.length%2?e.unshift(1):(e.unshift(0),e.unshift(0)),t&&(e[0]+=2),e}function removeHexPrefix(e){return e=e[0]%2?e.slice(1):e.slice(2)}function isTerminator(e){return e[0]>1}function stringToNibbles(e){for(var t=new Buffer(e),r=[],n=0;n<t.length;n++){var i=2*n;r[i]=t[n]>>4,r[++i]=t[n]%16}return r}function nibblesToBuffer(e){for(var t=new Buffer(e.length/2),r=0;r<t.length;r++){var n=2*r;t[r]=(e[n]<<4)+e[++n]}return t}function getNodeType(e){return 17===e.length?"branch":2===e.length?isTerminator(stringToNibbles(e[0]))?"leaf":"extention":void 0}function isRawNode(e){return Array.isArray(e)&&!Buffer.isBuffer(e)}TrieNode.isRawNode=isRawNode,TrieNode.addHexPrefix=addHexPrefix,TrieNode.removeHexPrefix=removeHexPrefix,TrieNode.isTerminator=isTerminator,TrieNode.stringToNibbles=stringToNibbles,TrieNode.nibblesToBuffer=nibblesToBuffer,TrieNode.getNodeType=getNodeType,Object.defineProperty(TrieNode.prototype,"value",{get:function(){return this.getValue()},set:function(e){this.setValue(e)}}),Object.defineProperty(TrieNode.prototype,"key",{get:function(){return this.getKey()},set:function(e){this.setKey(e)}}),TrieNode.prototype.parseNode=function(e){this.raw=e,this.type=getNodeType(e)},TrieNode.prototype.setValue=function(e,t){"branch"!==this.type?this.raw[1]=e:(1===arguments.length&&(t=e,e=16),this.raw[e]=t)},TrieNode.prototype.getValue=function(e){if("branch"!==this.type)return this.raw[1];0===arguments.length&&(e=16);var t=this.raw[e];return null!=t&&0!==t.length?t:void 0},TrieNode.prototype.setKey=function(e){"branch"!==this.type&&(e=addHexPrefix(e=Buffer.isBuffer(e)?stringToNibbles(e):e.slice(0),"leaf"===this.type),this.raw[0]=nibblesToBuffer(e))},TrieNode.prototype.getKey=function(){if("branch"!==this.type){var e=this.raw[0];return e=removeHexPrefix(stringToNibbles(e))}},TrieNode.prototype.serialize=function(){return dist.encode(this.raw)},TrieNode.prototype.hash=function(){return dist$8.sha3(this.serialize())},TrieNode.prototype.toString=function(){var e=this.type;return e+=": [",this.raw.forEach(function(t){Buffer.isBuffer(t)?e+=t.toString("hex")+", ":e+=t?"object, ":"empty, "}),e=e.slice(0,-2),e+="]"},TrieNode.prototype.getChildren=function(){var e=[];switch(this.type){case"leaf":break;case"extention":e.push([this.key,this.getValue()]);break;case"branch":for(var t=0;t<16;t++){var r=this.getValue(t);r&&e.push([[t],r])}}return e};const addNibbleToObject=(e,t,r)=>{let n=e;for(const[e,i]of t.entries()){const o=i.toString(16);if(!(e+1<t.length))return void(n[o]=r);o in n||(n[o]={}),n=n[o]}},getLeafValue=(e,t)=>{let r=e.getValue();return void 0!==t&&(r=t.util.deserialize(r)),r},mapFromBaseTrie=(e,t,r,n)=>{if("leaf"!==r.type)r.getChildren().forEach(([r,i])=>{let o;if(trieNode.isRawNode(i)){const e=new trieNode(i);"leaf"===e.type?(r.push(...e.getKey()),o=getLeafValue(e,n)):o=e}else o=cidFromHash_1(e,i);addNibbleToObject(t,r,o)});else{const e=getLeafValue(r,n);addNibbleToObject(t,r.getKey(),e)}},createCustomEthTrieNode=function(e,t){return function(r){const n=dist.decode(r),i=new trieNode(n),o={};return mapFromBaseTrie(e,o,i,t),o}},createTrieResolver=(e,t)=>{const r=createCustomEthTrieNode(e,t);return createResolver_1(e,r)};var createTrieResolver_1=createTrieResolver;const ethStateTrieResolver=createTrieResolver_1(src$4.ETH_STATE_TRIE,ethAccountSnapshot);var ethStateTrie=ethStateTrieResolver;const ethStorageTrieResolver=createTrieResolver_1(src$4.ETH_STORAGE_TRIE);var ethStorageTrie=ethStorageTrieResolver,dist$9=createCommonjsModule(function(e,t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=safeBuffer.Buffer;Object.assign(t,lib$3),t.MAX_INTEGER=new bn("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new bn("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.SHA3_NULL_S=t.KECCAK256_NULL_S,t.KECCAK256_NULL=n.from(t.KECCAK256_NULL_S,"hex"),t.SHA3_NULL=t.KECCAK256_NULL,t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.SHA3_RLP_ARRAY_S=t.KECCAK256_RLP_ARRAY_S,t.KECCAK256_RLP_ARRAY=n.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.SHA3_RLP_ARRAY=t.KECCAK256_RLP_ARRAY,t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.SHA3_RLP_S=t.KECCAK256_RLP_S,t.KECCAK256_RLP=n.from(t.KECCAK256_RLP_S,"hex"),t.SHA3_RLP=t.KECCAK256_RLP,t.BN=bn,t.rlp=dist,t.secp256k1=secp256k1$1,t.zeros=function(e){return n.allocUnsafe(e).fill(0)},t.zeroAddress=function(){var e=t.zeros(20);return t.bufferToHex(e)},t.setLengthLeft=t.setLength=function(e,r,n){var i=t.zeros(r);return e=t.toBuffer(e),n?e.length<r?(e.copy(i),i):e.slice(0,r):e.length<r?(e.copy(i,r-e.length),i):e.slice(-r)},t.setLengthRight=function(e,r){return t.setLength(e,r,!0)},t.unpad=t.stripZeros=function(e){for(var r=(e=t.stripHexPrefix(e))[0];e.length>0&&"0"===r.toString();)r=(e=e.slice(1))[0];return e},t.toBuffer=function(e){if(!n.isBuffer(e))if(Array.isArray(e))e=n.from(e);else if("string"==typeof e)e=t.isHexString(e)?n.from(t.padToEven(t.stripHexPrefix(e)),"hex"):n.from(e);else if("number"==typeof e)e=t.intToBuffer(e);else if(null==e)e=n.allocUnsafe(0);else if(bn.isBN(e))e=e.toArrayLike(n);else{if(!e.toArray)throw new Error("invalid type");e=n.from(e.toArray())}return e},t.bufferToInt=function(e){return new bn(t.toBuffer(e)).toNumber()},t.bufferToHex=function(e){return"0x"+(e=t.toBuffer(e)).toString("hex")},t.fromSigned=function(e){return new bn(e).fromTwos(256)},t.toUnsigned=function(e){return n.from(e.toTwos(256).toArray())},t.keccak=function(e,r){return e=t.toBuffer(e),r||(r=256),keccak$2("keccak"+r).update(e).digest()},t.keccak256=function(e){return t.keccak(e)},t.sha3=t.keccak,t.sha256=function(e){return e=t.toBuffer(e),createHash("sha256").update(e).digest()},t.ripemd160=function(e,r){e=t.toBuffer(e);var n=createHash("rmd160").update(e).digest();return!0===r?t.setLength(n,32):n},t.rlphash=function(e){return t.keccak(dist.encode(e))},t.isValidPrivate=function(e){return secp256k1$1.privateKeyVerify(e)},t.isValidPublic=function(e,t){return 64===e.length?secp256k1$1.publicKeyVerify(n.concat([n.from([4]),e])):!!t&&secp256k1$1.publicKeyVerify(e)},t.pubToAddress=t.publicToAddress=function(e,r){return e=t.toBuffer(e),r&&64!==e.length&&(e=secp256k1$1.publicKeyConvert(e,!1).slice(1)),assert$t(64===e.length),t.keccak(e).slice(-20)};var i=t.privateToPublic=function(e){return e=t.toBuffer(e),secp256k1$1.publicKeyCreate(e,!1).slice(1)};t.importPublic=function(e){return 64!==(e=t.toBuffer(e)).length&&(e=secp256k1$1.publicKeyConvert(e,!1).slice(1)),e},t.ecsign=function(e,t){var r=secp256k1$1.sign(e,t),n={};return n.r=r.signature.slice(0,32),n.s=r.signature.slice(32,64),n.v=r.recovery+27,n},t.hashPersonalMessage=function(e){var r=t.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return t.keccak(n.concat([r,e]))},t.ecrecover=function(e,r,i,o){var s=n.concat([t.setLength(i,32),t.setLength(o,32)],64),a=r-27;if(0!==a&&1!==a)throw new Error("Invalid signature v value");var c=secp256k1$1.recover(e,s,a);return secp256k1$1.publicKeyConvert(c,!1).slice(1)},t.toRpcSig=function(e,r,i){if(27!==e&&28!==e)throw new Error("Invalid recovery id");return t.bufferToHex(n.concat([t.setLengthLeft(r,32),t.setLengthLeft(i,32),t.toBuffer(e-27)]))},t.fromRpcSig=function(e){if(65!==(e=t.toBuffer(e)).length)throw new Error("Invalid signature length");var r=e[64];return r<27&&(r+=27),{v:r,r:e.slice(0,32),s:e.slice(32,64)}},t.privateToAddress=function(e){return t.publicToAddress(i(e))},t.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},t.isZeroAddress=function(e){return t.zeroAddress()===t.addHexPrefix(e)},t.toChecksumAddress=function(e){e=t.stripHexPrefix(e).toLowerCase();for(var r=t.keccak(e).toString("hex"),n="0x",i=0;i<e.length;i++)parseInt(r[i],16)>=8?n+=e[i].toUpperCase():n+=e[i];return n},t.isValidChecksumAddress=function(e){return t.isValidAddress(e)&&t.toChecksumAddress(e)===e},t.generateAddress=function(e,r){return e=t.toBuffer(e),r=(r=new bn(r)).isZero()?null:n.from(r.toArray()),t.rlphash([e,r]).slice(-20)},t.isPrecompiled=function(e){var r=t.unpad(e);return 1===r.length&&r[0]>=1&&r[0]<=8},t.addHexPrefix=function(e){return"string"!=typeof e?e:t.isHexPrefixed(e)?e:"0x"+e},t.isValidSignature=function(e,t,r,n){var i=new bn("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),o=new bn("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);return 32===t.length&&32===r.length&&((27===e||28===e)&&(t=new bn(t),r=new bn(r),!(t.isZero()||t.gt(o)||r.isZero()||r.gt(o))&&(!1!==n||1!==new bn(r).cmp(i))))},t.baToJSON=function(e){if(n.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var r=[],i=0;i<e.length;i++)r.push(t.baToJSON(e[i]));return r}},t.defineProperties=function(e,i,o){if(e.raw=[],e._fields=[],e.toJSON=function(r){if(r){var n={};return e._fields.forEach(function(t){n[t]="0x"+e[t].toString("hex")}),n}return t.baToJSON(this.raw)},e.serialize=function(){return dist.encode(e.raw)},i.forEach(function(r,i){function o(){return e.raw[i]}function s(o){"00"!==(o=t.toBuffer(o)).toString("hex")||r.allowZero||(o=n.allocUnsafe(0)),r.allowLess&&r.length?(o=t.stripZeros(o),assert$t(r.length>=o.length,"The field "+r.name+" must not have more "+r.length+" bytes")):r.allowZero&&0===o.length||!r.length||assert$t(r.length===o.length,"The field "+r.name+" must have byte length of "+r.length),e.raw[i]=o}e._fields.push(r.name),Object.defineProperty(e,r.name,{enumerable:!0,configurable:!0,get:o,set:s}),r.default&&(e[r.name]=r.default),r.alias&&Object.defineProperty(e,r.alias,{enumerable:!1,configurable:!0,set:s,get:o})}),o)if("string"==typeof o&&(o=n.from(t.stripHexPrefix(o),"hex")),n.isBuffer(o)&&(o=dist.decode(o)),Array.isArray(o)){if(o.length>e._fields.length)throw new Error("wrong number of fields in data");o.forEach(function(r,n){e[e._fields[n]]=t.toBuffer(r)})}else{if("object"!==(void 0===o?"undefined":r(o)))throw new Error("invalid data");var s=Object.keys(o);i.forEach(function(t){-1!==s.indexOf(t.name)&&(e[t.name]=o[t.name]),-1!==s.indexOf(t.alias)&&(e[t.alias]=o[t.alias])})}}}),dist_1$5=dist$9.MAX_INTEGER,dist_2$5=dist$9.TWO_POW256,dist_3$5=dist$9.KECCAK256_NULL_S,dist_4$4=dist$9.SHA3_NULL_S,dist_5$4=dist$9.KECCAK256_NULL,dist_6$4=dist$9.SHA3_NULL,dist_7$4=dist$9.KECCAK256_RLP_ARRAY_S,dist_8$4=dist$9.SHA3_RLP_ARRAY_S,dist_9$4=dist$9.KECCAK256_RLP_ARRAY,dist_10$4=dist$9.SHA3_RLP_ARRAY,dist_11$4=dist$9.KECCAK256_RLP_S,dist_12$4=dist$9.SHA3_RLP_S,dist_13$4=dist$9.KECCAK256_RLP,dist_14$4=dist$9.SHA3_RLP,dist_15$4=dist$9.BN,dist_16$4=dist$9.rlp,dist_17$4=dist$9.secp256k1,dist_18$4=dist$9.zeros,dist_19$4=dist$9.zeroAddress,dist_20$4=dist$9.setLengthLeft,dist_21$4=dist$9.setLength,dist_22$4=dist$9.setLengthRight,dist_23$4=dist$9.unpad,dist_24$4=dist$9.stripZeros,dist_25$4=dist$9.toBuffer,dist_26$4=dist$9.bufferToInt,dist_27$4=dist$9.bufferToHex,dist_28$4=dist$9.fromSigned,dist_29$4=dist$9.toUnsigned,dist_30$4=dist$9.keccak,dist_31$4=dist$9.keccak256,dist_32$4=dist$9.sha3,dist_33$4=dist$9.sha256,dist_34$4=dist$9.ripemd160,dist_35$4=dist$9.rlphash,dist_36$4=dist$9.isValidPrivate,dist_37$4=dist$9.isValidPublic,dist_38$4=dist$9.pubToAddress,dist_39$4=dist$9.publicToAddress,dist_40$4=dist$9.privateToPublic,dist_41$4=dist$9.importPublic,dist_42$4=dist$9.ecsign,dist_43$4=dist$9.hashPersonalMessage,dist_44$4=dist$9.ecrecover,dist_45$4=dist$9.toRpcSig,dist_46$4=dist$9.fromRpcSig,dist_47$4=dist$9.privateToAddress,dist_48$4=dist$9.isValidAddress,dist_49$4=dist$9.isZeroAddress,dist_50$4=dist$9.toChecksumAddress,dist_51$4=dist$9.isValidChecksumAddress,dist_52$3=dist$9.generateAddress,dist_53$3=dist$9.isPrecompiled,dist_54$3=dist$9.addHexPrefix,dist_55$3=dist$9.isValidSignature,dist_56$3=dist$9.baToJSON,dist_57$3=dist$9.defineProperties,genesisGasLimit={v:5e3,d:"Gas limit of the Genesis block."},genesisDifficulty={v:17179869184,d:"Difficulty of the Genesis block."},genesisNonce={v:"0x0000000000000042",d:"the geneis nonce"},genesisExtraData={v:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa",d:"extra data "},genesisHash={v:"0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3",d:"genesis hash"},genesisStateRoot={v:"0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544",d:"the genesis state root"},minGasLimit={v:5e3,d:"Minimum the gas limit may ever be."},gasLimitBoundDivisor={v:1024,d:"The bound divisor of the gas limit, used in update calculations."},minimumDifficulty={v:131072,d:"The minimum that the difficulty may ever be."},difficultyBoundDivisor={v:2048,d:"The bound divisor of the difficulty, used in the update calculations."},durationLimit={v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not."},maximumExtraDataSize={v:32,d:"Maximum size extra data may be after Genesis."},epochDuration={v:3e4,d:"Duration between proof-of-work epochs."},stackLimit={v:1024,d:"Maximum size of VM stack allowed."},callCreateDepth={v:1024,d:"Maximum depth of call/create stack."},tierStepGas={v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them."},expGas={v:10,d:"Once per EXP instuction."},expByteGas={v:10,d:"Times ceil(log256(exponent)) for the EXP instruction."},sha3Gas={v:30,d:"Once per SHA3 operation."},sha3WordGas={v:6,d:"Once per word of the SHA3 operation's data."},sloadGas={v:50,d:"Once per SLOAD operation."},sstoreSetGas={v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero."},sstoreResetGas={v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero."},sstoreRefundGas={v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero."},jumpdestGas={v:1,d:"Refunded gas, once per SSTORE operation if the zeroness changes to zero."},logGas={v:375,d:"Per LOG* operation."},logDataGas={v:8,d:"Per byte in a LOG* operation's data."},logTopicGas={v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas."},createGas={v:32e3,d:"Once per CREATE operation & contract-creation transaction."},callGas={v:40,d:"Once per CALL operation & message call transaction."},callStipend={v:2300,d:"Free gas given at beginning of call."},callValueTransferGas={v:9e3,d:"Paid for CALL when the value transfor is non-zero."},callNewAccountGas={v:25e3,d:"Paid for CALL when the destination address didn't exist prior."},suicideRefundGas={v:24e3,d:"Refunded following a suicide operation."},memoryGas={v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL."},quadCoeffDiv={v:512,d:"Divisor for the quadratic particle of the memory cost equation."},createDataGas={v:200,d:""},txGas={v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions."},txCreation={v:32e3,d:"the cost of creating a contract via tx"},txDataZeroGas={v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions."},txDataNonZeroGas={v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions."},copyGas={v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added."},ecrecoverGas={v:3e3,d:""},sha256Gas={v:60,d:""},sha256WordGas={v:12,d:""},ripemd160Gas={v:600,d:""},ripemd160WordGas={v:120,d:""},identityGas={v:15,d:""},identityWordGas={v:3,d:""},minerReward={v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},ommerReward={v:"625000000000000000",d:"The amount of wei a miner of an uncle block gets for being inculded in the blockchain"},niblingReward={v:"156250000000000000",d:"the amount a miner gets for inculding a uncle"},homeSteadForkNumber={v:115e4,d:"the block that the Homestead fork started at"},homesteadRepriceForkNumber={v:2463e3,d:"the block that the Homestead Reprice (EIP150) fork started at"},timebombPeriod={v:1e5,d:"Exponential difficulty timebomb period"},freeBlockPeriod={v:2},params={genesisGasLimit:genesisGasLimit,genesisDifficulty:genesisDifficulty,genesisNonce:genesisNonce,genesisExtraData:genesisExtraData,genesisHash:genesisHash,genesisStateRoot:genesisStateRoot,minGasLimit:minGasLimit,gasLimitBoundDivisor:gasLimitBoundDivisor,minimumDifficulty:minimumDifficulty,difficultyBoundDivisor:difficultyBoundDivisor,durationLimit:durationLimit,maximumExtraDataSize:maximumExtraDataSize,epochDuration:epochDuration,stackLimit:stackLimit,callCreateDepth:callCreateDepth,tierStepGas:tierStepGas,expGas:expGas,expByteGas:expByteGas,sha3Gas:sha3Gas,sha3WordGas:sha3WordGas,sloadGas:sloadGas,sstoreSetGas:sstoreSetGas,sstoreResetGas:sstoreResetGas,sstoreRefundGas:sstoreRefundGas,jumpdestGas:jumpdestGas,logGas:logGas,logDataGas:logDataGas,logTopicGas:logTopicGas,createGas:createGas,callGas:callGas,callStipend:callStipend,callValueTransferGas:callValueTransferGas,callNewAccountGas:callNewAccountGas,suicideRefundGas:suicideRefundGas,memoryGas:memoryGas,quadCoeffDiv:quadCoeffDiv,createDataGas:createDataGas,txGas:txGas,txCreation:txCreation,txDataZeroGas:txDataZeroGas,txDataNonZeroGas:txDataNonZeroGas,copyGas:copyGas,ecrecoverGas:ecrecoverGas,sha256Gas:sha256Gas,sha256WordGas:sha256WordGas,ripemd160Gas:ripemd160Gas,ripemd160WordGas:ripemd160WordGas,identityGas:identityGas,identityWordGas:identityWordGas,minerReward:minerReward,ommerReward:ommerReward,niblingReward:niblingReward,homeSteadForkNumber:homeSteadForkNumber,homesteadRepriceForkNumber:homesteadRepriceForkNumber,timebombPeriod:timebombPeriod,freeBlockPeriod:freeBlockPeriod},params$1=Object.freeze({genesisGasLimit:genesisGasLimit,genesisDifficulty:genesisDifficulty,genesisNonce:genesisNonce,genesisExtraData:genesisExtraData,genesisHash:genesisHash,genesisStateRoot:genesisStateRoot,minGasLimit:minGasLimit,gasLimitBoundDivisor:gasLimitBoundDivisor,minimumDifficulty:minimumDifficulty,difficultyBoundDivisor:difficultyBoundDivisor,durationLimit:durationLimit,maximumExtraDataSize:maximumExtraDataSize,epochDuration:epochDuration,stackLimit:stackLimit,callCreateDepth:callCreateDepth,tierStepGas:tierStepGas,expGas:expGas,expByteGas:expByteGas,sha3Gas:sha3Gas,sha3WordGas:sha3WordGas,sloadGas:sloadGas,sstoreSetGas:sstoreSetGas,sstoreResetGas:sstoreResetGas,sstoreRefundGas:sstoreRefundGas,jumpdestGas:jumpdestGas,logGas:logGas,logDataGas:logDataGas,logTopicGas:logTopicGas,createGas:createGas,callGas:callGas,callStipend:callStipend,callValueTransferGas:callValueTransferGas,callNewAccountGas:callNewAccountGas,suicideRefundGas:suicideRefundGas,memoryGas:memoryGas,quadCoeffDiv:quadCoeffDiv,createDataGas:createDataGas,txGas:txGas,txCreation:txCreation,txDataZeroGas:txDataZeroGas,txDataNonZeroGas:txDataNonZeroGas,copyGas:copyGas,ecrecoverGas:ecrecoverGas,sha256Gas:sha256Gas,sha256WordGas:sha256WordGas,ripemd160Gas:ripemd160Gas,ripemd160WordGas:ripemd160WordGas,identityGas:identityGas,identityWordGas:identityWordGas,minerReward:minerReward,ommerReward:ommerReward,niblingReward:niblingReward,homeSteadForkNumber:homeSteadForkNumber,homesteadRepriceForkNumber:homesteadRepriceForkNumber,timebombPeriod:timebombPeriod,freeBlockPeriod:freeBlockPeriod,default:params}),fees=getCjsExportFromNamespace(params$1);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var BN$2=dist$9.BN,N_DIV_2=new BN$2("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),Transaction=function(){function e(t){_classCallCheck(this,e),t=t||{};var r=[{name:"nonce",length:32,allowLess:!0,default:new Buffer([])},{name:"gasPrice",length:32,allowLess:!0,default:new Buffer([])},{name:"gasLimit",alias:"gas",length:32,allowLess:!0,default:new Buffer([])},{name:"to",allowZero:!0,length:20,default:new Buffer([])},{name:"value",length:32,allowLess:!0,default:new Buffer([])},{name:"data",alias:"input",allowZero:!0,default:new Buffer([])},{name:"v",allowZero:!0,default:new Buffer([28])},{name:"r",length:32,allowZero:!0,allowLess:!0,default:new Buffer([])},{name:"s",length:32,allowZero:!0,allowLess:!0,default:new Buffer([])}];dist$9.defineProperties(this,r,t),Object.defineProperty(this,"from",{enumerable:!0,configurable:!0,get:this.getSenderAddress.bind(this)});var n=dist$9.bufferToInt(this.v),i=Math.floor((n-35)/2);i<0&&(i=0),this._chainId=i||t.chainId||0,this._homestead=!0}return e.prototype.toCreationAddress=function(){return""===this.to.toString("hex")},e.prototype.hash=function(e){void 0===e&&(e=!0);var t=void 0;if(e)t=this.raw;else if(this._chainId>0){var r=this.raw.slice();this.v=this._chainId,this.r=0,this.s=0,t=this.raw,this.raw=r}else t=this.raw.slice(0,6);return dist$9.rlphash(t)},e.prototype.getChainId=function(){return this._chainId},e.prototype.getSenderAddress=function(){if(this._from)return this._from;var e=this.getSenderPublicKey();return this._from=dist$9.publicToAddress(e),this._from},e.prototype.getSenderPublicKey=function(){if(!(this._senderPubKey&&this._senderPubKey.length||this.verifySignature()))throw new Error("Invalid Signature");return this._senderPubKey},e.prototype.verifySignature=function(){var e=this.hash(!1);if(this._homestead&&1===new BN$2(this.s).cmp(N_DIV_2))return!1;try{var t=dist$9.bufferToInt(this.v);this._chainId>0&&(t-=2*this._chainId+8),this._senderPubKey=dist$9.ecrecover(e,t,this.r,this.s)}catch(e){return!1}return!!this._senderPubKey},e.prototype.sign=function(e){var t=this.hash(!1),r=dist$9.ecsign(t,e);this._chainId>0&&(r.v+=2*this._chainId+8),Object.assign(this,r)},e.prototype.getDataFee=function(){for(var e=this.raw[5],t=new BN$2(0),r=0;r<e.length;r++)0===e[r]?t.iaddn(fees.txDataZeroGas.v):t.iaddn(fees.txDataNonZeroGas.v);return t},e.prototype.getBaseFee=function(){var e=this.getDataFee().iaddn(fees.txGas.v);return this._homestead&&this.toCreationAddress()&&e.iaddn(fees.txCreation.v),e},e.prototype.getUpfrontCost=function(){return new BN$2(this.gasLimit).imul(new BN$2(this.gasPrice)).iadd(new BN$2(this.value))},e.prototype.validate=function(e){var t=[];return this.verifySignature()||t.push("Invalid Signature"),this.getBaseFee().cmp(new BN$2(this.gasLimit))>0&&t.push(["gas limit is too low. Need at least "+this.getBaseFee()]),void 0===e||!1===e?0===t.length:t.join(" ")},e}(),es5=Transaction;const deserialize$4=e=>{const t=new es5(e),r={data:t.data,fromAddress:t.from,gasLimit:t.gasLimit,gasPrice:t.gasPrice,isContractPublish:t.toCreationAddress(),nonce:t.nonce,r:t.r,s:t.s,signature:[t.v,t.r,t.s],toAddress:t.to,v:t.v,value:t.value,_ethObj:t};return Object.defineProperty(r,"_ethObj",{enumerable:!1}),r};var ethTx=createResolver_1(src$4.ETH_TX,deserialize$4);const ethTxTrieResolver=createTrieResolver_1(src$4.ETH_TX_TRIE,ethTx);var ethTxTrie=ethTxTrieResolver,ethAccountSnapshot$1=ethAccountSnapshot,ethBlock$1=ethBlock,ethBlockList$1=ethBlockList,ethStateTrie$1=ethStateTrie,ethStorageTrie$1=ethStorageTrie,ethTx$1=ethTx,ethTxTrie$1=ethTxTrie,src$1S={ethAccountSnapshot:ethAccountSnapshot$1,ethBlock:ethBlock$1,ethBlockList:ethBlockList$1,ethStateTrie:ethStateTrie$1,ethStorageTrie:ethStorageTrie$1,ethTx:ethTx$1,ethTxTrie:ethTxTrie$1},sha3$d=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),sha$8=e=>async t=>{switch(e){case"sha1":return crypto$l.createHash("sha1").update(t).digest();case"sha2-256":return crypto$l.createHash("sha256").update(t).digest();case"sha2-512":return crypto$l.createHash("sha512").update(t).digest();case"dbl-sha2-256":{const e=crypto$l.createHash("sha256").update(t).digest();return crypto$l.createHash("sha256").update(e).digest()}default:throw new Error(`${e} is not a supported algorithm`)}};const{Buffer:Buffer$W}=buffer$1,fromNumberTo32BitBuf$o=e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return Buffer$W.from(t)};var utils$P={fromNumberTo32BitBuf:fromNumberTo32BitBuf$o};const{Buffer:Buffer$X}=buffer$1,minB$c=45569,minS$c=45633,blake2b$d={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$d={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$c=(e,t)=>async r=>{const n=t.init(e,null);return t.update(n,r),Buffer$X.from(t.digest(n))};var blake_1$c=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$c(t+1,blake2b$d);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$c(t+1,blake2s$d)};const{Buffer:Buffer$Y}=buffer$1,{fromNumberTo32BitBuf:fromNumberTo32BitBuf$p}=utils$P,hash$9=e=>async t=>{switch(e){case"sha3-224":return Buffer$Y.from(sha3$d.sha3_224.arrayBuffer(t));case"sha3-256":return Buffer$Y.from(sha3$d.sha3_256.arrayBuffer(t));case"sha3-384":return Buffer$Y.from(sha3$d.sha3_384.arrayBuffer(t));case"sha3-512":return Buffer$Y.from(sha3$d.sha3_512.arrayBuffer(t));case"shake-128":return Buffer$Y.from(sha3$d.shake128.create(128).update(t).arrayBuffer());case"shake-256":return Buffer$Y.from(sha3$d.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return Buffer$Y.from(sha3$d.keccak224.arrayBuffer(t));case"keccak-256":return Buffer$Y.from(sha3$d.keccak256.arrayBuffer(t));case"keccak-384":return Buffer$Y.from(sha3$d.keccak384.arrayBuffer(t));case"keccak-512":return Buffer$Y.from(sha3$d.keccak512.arrayBuffer(t));case"murmur3-128":return Buffer$Y.from(murmurhash3jsRevisited.x64.hash128(t),"hex");case"murmur3-32":return fromNumberTo32BitBuf$p(murmurhash3jsRevisited.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};var crypto$i={sha1:sha$8("sha1"),sha2256:sha$8("sha2-256"),sha2512:sha$8("sha2-512"),dblSha2256:sha$8("dbl-sha2-256"),sha3224:hash$9("sha3-224"),sha3256:hash$9("sha3-256"),sha3384:hash$9("sha3-384"),sha3512:hash$9("sha3-512"),shake128:hash$9("shake-128"),shake256:hash$9("shake-256"),keccak224:hash$9("keccak-224"),keccak256:hash$9("keccak-256"),keccak384:hash$9("keccak-384"),keccak512:hash$9("keccak-512"),murmur3128:hash$9("murmur3-128"),murmur332:hash$9("murmur3-32"),addBlake:blake_1$c};const{Buffer:Buffer$Z}=buffer$1;async function Multihashing$c(e,t,r){const n=await Multihashing$c.digest(e,t,r);return src.encode(n,t,r)}Multihashing$c.Buffer=Buffer$Z,Multihashing$c.multihash=src,Multihashing$c.digest=async(e,t,r)=>{const n=Multihashing$c.createHash(t),i=await n(e);return r?i.slice(0,r):i},Multihashing$c.createHash=function(e){if(!e)throw errCode("hash algorithm must be specified","ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=src.coerceCode(e),!Multihashing$c.functions[e])throw errCode(`multihash function '${e}' not yet supported`,"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing$c.functions[e]},Multihashing$c.functions={17:crypto$i.sha1,18:crypto$i.sha2256,19:crypto$i.sha2512,20:crypto$i.sha3512,21:crypto$i.sha3384,22:crypto$i.sha3256,23:crypto$i.sha3224,24:crypto$i.shake128,25:crypto$i.shake256,26:crypto$i.keccak224,27:crypto$i.keccak256,28:crypto$i.keccak384,29:crypto$i.keccak512,34:crypto$i.murmur3128,35:crypto$i.murmur332,86:crypto$i.dblSha2256},crypto$i.addBlake(Multihashing$c.functions),Multihashing$c.validate=async(e,t)=>{const r=await Multihashing$c(e,src.decode(t).name);return 0===Buffer$Z.compare(t,r)};var src$1T=Multihashing$c,CIDUtil$e={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$e=CIDUtil$e;class CID$d{constructor(e,t,r,n){if(_CID$d.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$d.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$d.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$d.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$d(0,this.codec,this.multihash)}toV1(){return new _CID$d(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$e.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$d=classIs(CID$d,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$d.codecs=baseTable;var src$1U=_CID$d,strftime=createCommonjsModule(function(e){!function(){var t={de_DE:{days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d.%m.%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},en_CA:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},en_US:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%m/%d/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},es_MX:{days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre"," diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},fr_FR:{days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},it_IT:{days:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],shortDays:["dom","lun","mar","mer","gio","ven","sab"],months:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],shortMonths:["pr","mag","giu","lug","ago","set","ott","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},nl_NL:{days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},pt_BR:{days:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},ru_RU:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],shortDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X",D:"%d.%m.%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},tr_TR:{days:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],shortDays:["Paz","Pzt","Sal","Çrş","Prş","Cum","Cts"],months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],shortMonths:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],AM:"ÖÖ",PM:"ÖS",am:"ÖÖ",pm:"ÖS",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},zh_CN:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["日","一","二","三","四","五","六"],months:["一月份","二月份","三月份","四月份","五月份","六月份","七月份","八月份","九月份","十月份","十一月份","十二月份"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],AM:"上午",PM:"下午",am:"上午",pm:"下午",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}}},r=t.en_US,n=new function e(n,l,d){var h,p=n||r,b=l||0,m=d||!1,g=0;var y=function(e,t){var r;if(t){if(r=t.getTime(),m){var n=u(t);if(u(t=new Date(r+n+b))!==n){var l=u(t);t=new Date(r+l+b)}}}else{var d=Date.now();d>g?(g=d,h=new Date(g),r=g,m&&(h=new Date(g+u(h)+b))):r=g,t=h}return function e(t,r,n,u){var l="",d=null,h=!1,p=t.length,g=!1;for(var y=0;y<p;y++){var v=t.charCodeAt(y);if(!0!==h)37!==v?l+=t[y]:h=!0;else{if(45===v){d="";continue}if(95===v){d=" ";continue}if(48===v){d="0";continue}if(58===v){g&&f("[WARNING] detected use of unsupported %:: or %::: modifiers to strftime"),g=!0;continue}switch(v){case 37:l+="%";break;case 65:l+=n.days[r.getDay()];break;case 66:l+=n.months[r.getMonth()];break;case 67:l+=i(Math.floor(r.getFullYear()/100),d);break;case 68:l+=e(n.formats.D,r,n,u);break;case 70:l+=e(n.formats.F,r,n,u);break;case 72:l+=i(r.getHours(),d);break;case 73:l+=i(s(r.getHours()),d);break;case 76:l+=o(Math.floor(u%1e3));break;case 77:l+=i(r.getMinutes(),d);break;case 80:l+=r.getHours()<12?n.am:n.pm;break;case 82:l+=e(n.formats.R,r,n,u);break;case 83:l+=i(r.getSeconds(),d);break;case 84:l+=e(n.formats.T,r,n,u);break;case 85:l+=i(a(r,"sunday"),d);break;case 87:l+=i(a(r,"monday"),d);break;case 88:l+=e(n.formats.X,r,n,u);break;case 89:l+=r.getFullYear();break;case 90:if(m&&0===b)l+="GMT";else{var _=r.toString().match(/\(([\w\s]+)\)/);l+=_&&_[1]||""}break;case 97:l+=n.shortDays[r.getDay()];break;case 98:l+=n.shortMonths[r.getMonth()];break;case 99:l+=e(n.formats.c,r,n,u);break;case 100:l+=i(r.getDate(),d);break;case 101:l+=i(r.getDate(),null==d?" ":d);break;case 104:l+=n.shortMonths[r.getMonth()];break;case 106:var $=new Date(r.getFullYear(),0,1),S=Math.ceil((r.getTime()-$.getTime())/864e5);l+=o(S);break;case 107:l+=i(r.getHours(),null==d?" ":d);break;case 108:l+=i(s(r.getHours()),null==d?" ":d);break;case 109:l+=i(r.getMonth()+1,d);break;case 110:l+="\n";break;case 111:var S=r.getDate();n.ordinalSuffixes?l+=String(S)+(n.ordinalSuffixes[S-1]||c(S)):l+=String(S)+c(S);break;case 112:l+=r.getHours()<12?n.AM:n.PM;break;case 114:l+=e(n.formats.r,r,n,u);break;case 115:l+=Math.floor(u/1e3);break;case 116:l+="\t";break;case 117:var S=r.getDay();l+=0===S?7:S;break;case 118:l+=e(n.formats.v,r,n,u);break;case 119:l+=r.getDay();break;case 120:l+=e(n.formats.x,r,n,u);break;case 121:l+=(""+r.getFullYear()).slice(2);break;case 122:if(m&&0===b)l+=g?"+00:00":"+0000";else{var E,w=(E=0!==b?b/6e4:-r.getTimezoneOffset())<0?"-":"+",C=g?":":"",A=Math.floor(Math.abs(E/60)),k=Math.abs(E%60);l+=w+i(A)+C+i(k)}break;default:h&&(l+="%"),l+=t[y]}d=null,h=!1}}return l}(e,t,p,r)};y.localize=function(t){return new e(t||p,b,m)};y.localizeByIdentifier=function(e){var r=t[e];return r?y.localize(r):(f('[WARNING] No locale found with identifier "'+e+'".'),y)};y.timezone=function(t){var r=b,n=m,i=typeof t;if("number"===i||"string"===i)if(n=!0,"string"===i){var o="-"===t[0]?-1:1,s=parseInt(t.slice(1,3),10),a=parseInt(t.slice(3,5),10);r=o*(60*s+a)*60*1e3}else"number"===i&&(r=60*t*1e3);return new e(p,r,n)};y.utc=function(){return new e(p,b,!0)};return y}(r,0,!1);function i(e,t){return""===t||e>9?e:(null==t&&(t="0"),t+e)}function o(e){return e>99?e:e>9?"0"+e:"00"+e}function s(e){return 0===e?12:e>12?e-12:e}function a(e,t){t=t||"sunday";var r=e.getDay();"monday"===t&&(0===r?r=6:r--);var n=Date.UTC(e.getFullYear(),0,1),i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),o=(Math.floor((i-n)/864e5)+7-r)/7;return Math.floor(o)}function c(e){var t=e%10,r=e%100;if(r>=11&&r<=13||0===t||t>=4)return"th";switch(t){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function u(e){return 6e4*(e.getTimezoneOffset()||0)}function f(e){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e)}e.exports=n,"function"!=typeof Date.now&&(Date.now=function(){return+new Date})}()}),util$g=createCommonjsModule(function(e,t){(t=e.exports).SHA1_LENGTH=constants.defaultLengths[constants.names.sha1],t.find=(e,t)=>{for(let r=0;r<e.length;r++)if(e[r]===t)return r;return-1};const r=(e,t)=>strftime.timezone(t)("%FT%T%:z",new Date(1e3*e));t.parsePersonLine=e=>{let t=e.match(/^(([^<]+)\s)?\s?<([^>]+)>\s?(?:(\d+)\s([+-]\d+))?$/);return null===t?null:{name:t[2],email:t[3],date:t[4]&&t[5]&&r(parseInt(t[4]),t[5])}},t.serializePersonLine=e=>{let t=[];return e.name&&t.push(e.name),t.push("<"+e.email+">"),e.date&&t.push((e=>{const t=e.match(/([+-]\d{2}:\d{2})/),r=null===t?"+0000":t[0].slice(0,3)+t[0].slice(4);return strftime.timezone(r)("%s %z",new Date(e))})(e.date)),t.join(" ")},t.shaToCid=e=>{const t=src.encode(e,"sha1");return new src$1U(1,"git-raw",t)},t.cidToSha=e=>{let t=src.decode(e.multihash);return"sha1"!==t.name?null:t.digest}}),util_1$9=util$g.SHA1_LENGTH,util_2$5=util$g.find,util_3$4=util$g.parsePersonLine,util_4$4=util$g.serializePersonLine,util_5$2=util$g.shaToCid,util_6$1=util$g.cidToSha,utils$Q=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};function n(e){return"number"==typeof e&&isFinite(e)&&function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}function i(e,t){if("number"!=typeof e)throw new Error(t?r.INVALID_OFFSET_NON_NUMBER:r.INVALID_LENGTH_NON_NUMBER);if(!n(e)||e<0)throw new Error(t?r.INVALID_OFFSET:r.INVALID_LENGTH)}t.ERRORS=r,t.checkEncoding=function(e){if(!Buffer.isEncoding(e))throw new Error(r.INVALID_ENCODING)},t.isFiniteInteger=n,t.checkLengthValue=function(e){i(e,!1)},t.checkOffsetValue=function(e){i(e,!0)},t.checkTargetOffset=function(e,t){if(e<0||e>t.length)throw new Error(r.INVALID_TARGET_OFFSET)}});unwrapExports(utils$Q);var utils_1$b=utils$Q.ERRORS,utils_2$6=utils$Q.checkEncoding,utils_3$6=utils$Q.isFiniteInteger,utils_4$6=utils$Q.checkLengthValue,utils_5$5=utils$Q.checkOffsetValue,utils_6$4=utils$Q.checkTargetOffset,smartbuffer=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=4096,n="utf8";class i{constructor(e){if(this.length=0,this._encoding=n,this._writeOffset=0,this._readOffset=0,i.isSmartBufferOptions(e))if(e.encoding&&(utils$Q.checkEncoding(e.encoding),this._encoding=e.encoding),e.size){if(!(utils$Q.isFiniteInteger(e.size)&&e.size>0))throw new Error(utils$Q.ERRORS.INVALID_SMARTBUFFER_SIZE);this._buff=Buffer.allocUnsafe(e.size)}else if(e.buff){if(!(e.buff instanceof Buffer))throw new Error(utils$Q.ERRORS.INVALID_SMARTBUFFER_BUFFER);this._buff=e.buff,this.length=e.buff.length}else this._buff=Buffer.allocUnsafe(r);else{if(void 0!==e)throw new Error(utils$Q.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(r)}}static fromSize(e,t){return new this({size:e,encoding:t})}static fromBuffer(e,t){return new this({buff:e,encoding:t})}static fromOptions(e){return new this(e)}static isSmartBufferOptions(e){const t=e;return t&&(void 0!==t.encoding||void 0!==t.size||void 0!==t.buff)}readInt8(e){return this._readNumberValue(Buffer.prototype.readInt8,1,e)}readInt16BE(e){return this._readNumberValue(Buffer.prototype.readInt16BE,2,e)}readInt16LE(e){return this._readNumberValue(Buffer.prototype.readInt16LE,2,e)}readInt32BE(e){return this._readNumberValue(Buffer.prototype.readInt32BE,4,e)}readInt32LE(e){return this._readNumberValue(Buffer.prototype.readInt32LE,4,e)}writeInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeInt8,1,e,t),this}insertInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeInt8,1,e,t)}writeInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}insertInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}writeInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}insertInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}writeInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}insertInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}writeInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}insertInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}readUInt8(e){return this._readNumberValue(Buffer.prototype.readUInt8,1,e)}readUInt16BE(e){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,e)}readUInt16LE(e){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,e)}readUInt32BE(e){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,e)}readUInt32LE(e){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,e)}writeUInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,e,t)}insertUInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,e,t)}writeUInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}insertUInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}writeUInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}insertUInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}writeUInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}insertUInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}writeUInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}insertUInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}readFloatBE(e){return this._readNumberValue(Buffer.prototype.readFloatBE,4,e)}readFloatLE(e){return this._readNumberValue(Buffer.prototype.readFloatLE,4,e)}writeFloatBE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}insertFloatBE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}writeFloatLE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}insertFloatLE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}readDoubleBE(e){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,e)}readDoubleLE(e){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,e)}writeDoubleBE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}insertDoubleBE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}writeDoubleLE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}insertDoubleLE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}readString(e,t){let r;"number"==typeof e?(utils$Q.checkLengthValue(e),r=Math.min(e,this.length-this._readOffset)):(t=e,r=this.length-this._readOffset),void 0!==t&&utils$Q.checkEncoding(t);const n=this._buff.slice(this._readOffset,this._readOffset+r).toString(t||this._encoding);return this._readOffset+=r,n}insertString(e,t,r){return utils$Q.checkOffsetValue(t),this._handleString(e,!0,t,r)}writeString(e,t,r){return this._handleString(e,!1,t,r)}readStringNT(e){void 0!==e&&utils$Q.checkEncoding(e);let t=this.length;for(let e=this._readOffset;e<this.length;e++)if(0===this._buff[e]){t=e;break}const r=this._buff.slice(this._readOffset,t);return this._readOffset=t+1,r.toString(e||this._encoding)}insertStringNT(e,t,r){return utils$Q.checkOffsetValue(t),this.insertString(e,t,r),this.insertUInt8(0,t+e.length),this}writeStringNT(e,t,r){return this.writeString(e,t,r),this.writeUInt8(0,"number"==typeof t?t+e.length:this.writeOffset),this}readBuffer(e){void 0!==e&&utils$Q.checkLengthValue(e);const t="number"==typeof e?e:this.length,r=Math.min(this.length,this._readOffset+t),n=this._buff.slice(this._readOffset,r);return this._readOffset=r,n}insertBuffer(e,t){return utils$Q.checkOffsetValue(t),this._handleBuffer(e,!0,t)}writeBuffer(e,t){return this._handleBuffer(e,!1,t)}readBufferNT(){let e=this.length;for(let t=this._readOffset;t<this.length;t++)if(0===this._buff[t]){e=t;break}const t=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,t}insertBufferNT(e,t){return utils$Q.checkOffsetValue(t),this.insertBuffer(e,t),this.insertUInt8(0,t+e.length),this}writeBufferNT(e,t){return void 0!==t&&utils$Q.checkOffsetValue(t),this.writeBuffer(e,t),this.writeUInt8(0,"number"==typeof t?t+e.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(e){utils$Q.checkOffsetValue(e),utils$Q.checkTargetOffset(e,this),this._readOffset=e}get writeOffset(){return this._writeOffset}set writeOffset(e){utils$Q.checkOffsetValue(e),utils$Q.checkTargetOffset(e,this),this._writeOffset=e}get encoding(){return this._encoding}set encoding(e){utils$Q.checkEncoding(e),this._encoding=e}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(e){const t="string"==typeof e?e:this._encoding;return utils$Q.checkEncoding(t),this._buff.toString(t,0,this.length)}destroy(){return this.clear(),this}_handleString(e,t,r,n){let i=this._writeOffset,o=this._encoding;"number"==typeof r?i=r:"string"==typeof r&&(utils$Q.checkEncoding(r),o=r),"string"==typeof n&&(utils$Q.checkEncoding(n),o=n);const s=Buffer.byteLength(e,o);return t?this.ensureInsertable(s,i):this._ensureWriteable(s,i),this._buff.write(e,i,s,o),t?this._writeOffset+=s:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,i+s):this._writeOffset+=s,this}_handleBuffer(e,t,r){const n="number"==typeof r?r:this._writeOffset;return t?this.ensureInsertable(e.length,n):this._ensureWriteable(e.length,n),e.copy(this._buff,n),t?this._writeOffset+=e.length:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,n+e.length):this._writeOffset+=e.length,this}ensureReadable(e,t){let r=this._readOffset;if(void 0!==t&&(utils$Q.checkOffsetValue(t),r=t),r<0||r+e>this.length)throw new Error(utils$Q.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(e,t){utils$Q.checkOffsetValue(t),this._ensureCapacity(this.length+e),t<this.length&&this._buff.copy(this._buff,t+e,t,this._buff.length),t+e>this.length?this.length=t+e:this.length+=e}_ensureWriteable(e,t){const r="number"==typeof t?t:this._writeOffset;this._ensureCapacity(r+e),r+e>this.length&&(this.length=r+e)}_ensureCapacity(e){const t=this._buff.length;if(e>t){let r=this._buff,n=3*t/2+1;n<e&&(n=e),this._buff=Buffer.allocUnsafe(n),r.copy(this._buff,0,0,t)}}_readNumberValue(e,t,r){this.ensureReadable(t,r);const n=e.call(this._buff,"number"==typeof r?r:this._readOffset);return void 0===r&&(this._readOffset+=t),n}_insertNumberValue(e,t,r,n){return utils$Q.checkOffsetValue(n),this.ensureInsertable(t,n),e.call(this._buff,r,n),this._writeOffset+=t,this}_writeNumberValue(e,t,r,n){if("number"==typeof n){if(n<0)throw new Error(utils$Q.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);utils$Q.checkOffsetValue(n)}const i="number"==typeof n?n:this._writeOffset;return this._ensureWriteable(t,i),e.call(this._buff,r,i),"number"==typeof n?this._writeOffset=Math.max(this._writeOffset,i+t):this._writeOffset+=t,this}}t.SmartBuffer=i});unwrapExports(smartbuffer);var smartbuffer_1=smartbuffer.SmartBuffer,commit=createCommonjsModule(function(e,t){const r=smartbuffer.SmartBuffer;(t=e.exports).serialize=e=>{let t=[];t.push("tree "+util$g.cidToSha(e.tree).toString("hex")),e.parents.forEach(e=>{t.push("parent "+util$g.cidToSha(e).toString("hex"))}),t.push("author "+util$g.serializePersonLine(e.author)),t.push("committer "+util$g.serializePersonLine(e.committer)),e.encoding&&t.push("encoding "+e.encoding),e.mergetag&&e.mergetag.forEach(e=>{t.push("mergetag object "+util$g.cidToSha(e.object).toString("hex")),t.push(e.text)}),e.signature&&(t.push("gpgsig -----BEGIN PGP SIGNATURE-----"),t.push(e.signature.text)),t.push(""),t.push(e.message);let n=t.join("\n"),i=new r;return i.writeString("commit "),i.writeString(n.length.toString()),i.writeUInt8(0),i.writeString(n),i.toBuffer()},t.deserialize=e=>{let t=e.toString().split("\n"),r={gitType:"commit",parents:[]};for(let e=0;e<t.length;e++){let n=t[e].match(/^([^ ]+) (.+)$/);if(!n){if(""!==t[e])throw new Error("Invalid commit line "+e);r.message=t.slice(e+1).join("\n");break}let i=n[1],o=n[2];switch(i){case"tree":r.tree=util$g.shaToCid(Buffer.from(o,"hex"));break;case"committer":r.committer=util$g.parsePersonLine(o);break;case"author":r.author=util$g.parsePersonLine(o);break;case"parent":r.parents.push(util$g.shaToCid(Buffer.from(o,"hex")));break;case"gpgsig":{if("-----BEGIN PGP SIGNATURE-----"!==o)throw new Error("Invalid commit line "+e);r.signature={};let n=e;for(;e<t.length-1;e++)if(" "!==t[e+1][0]){r.signature.text=t.slice(n+1,e+1).join("\n");break}break}case"mergetag":{let n=o.match(/^object ([0-9a-f]{40})$/);if(!n)throw new Error("Invalid commit line "+e);let i={object:util$g.shaToCid(Buffer.from(n[1],"hex"))},s=e;for(;e<t.length-1;e++)if(" "!==t[e+1][0]){i.text=t.slice(s+1,e+1).join("\n");break}r.mergetag||(r.mergetag=[]),r.mergetag.push(i)}break;default:r[i]=o}}return Object.defineProperty(r,"gitType",{enumerable:!1}),r}}),commit_1=commit.serialize,commit_2=commit.deserialize,tag=createCommonjsModule(function(e,t){const r=smartbuffer.SmartBuffer;(t=e.exports).serialize=e=>{let t=[];t.push("object "+util$g.cidToSha(e.object).toString("hex")),t.push("type "+e.type),t.push("tag "+e.tag),null!==e.tagger&&t.push("tagger "+util$g.serializePersonLine(e.tagger)),t.push(""),t.push(e.message);let n=t.join("\n"),i=new r;return i.writeString("tag "),i.writeString(n.length.toString()),i.writeUInt8(0),i.writeString(n),i.toBuffer()},t.deserialize=e=>{let t=e.toString().split("\n"),r={gitType:"tag"};for(let e=0;e<t.length;e++){let n=t[e].match(/^([^ ]+) (.+)$/);if(null===n){if(""!==t[e])throw new Error("Invalid tag line "+e);r.message=t.slice(e+1).join("\n");break}let i=n[1],o=n[2];switch(i){case"object":r.object=util$g.shaToCid(Buffer.from(o,"hex"));break;case"tagger":r.tagger=util$g.parsePersonLine(o);break;case"tag":r.tag=o;break;case"type":r.type=o;break;default:r[i]=o}}return Object.defineProperty(r,"gitType",{enumerable:!1}),r}}),tag_1=tag.serialize,tag_2=tag.deserialize,tree$3=createCommonjsModule(function(e,t){const r=smartbuffer.SmartBuffer;(t=e.exports).serialize=e=>{let t=[];Object.keys(e).forEach(r=>{t.push([r,e[r]])}),t.sort((e,t)=>{return e[0]+("40000"===e[1].mode?"/":"")>t[0]+("40000"===t[1].mode?"/":"")?1:-1});let n=new r;t.forEach(e=>{n.writeStringNT(e[1].mode+" "+e[0]),n.writeBuffer(util$g.cidToSha(e[1].hash))});let i=new r;return i.writeString("tree "),i.writeString(n.length.toString()),i.writeUInt8(0),i.writeBuffer(n.toBuffer()),i.toBuffer()},t.deserialize=e=>{let t={},n=r.fromBuffer(e,"utf8");for(;;){let e=n.readStringNT();if(""===e)break;let r=n.readBuffer(util$g.SHA1_LENGTH),i=e.match(/^(\d+) (.+)$/);if(!i)throw new Error("invalid file mode/name");if(t[i[2]])throw new Error("duplicate file in tree");t[i[2]]={mode:i[1],hash:util$g.shaToCid(r)}}return t}}),tree_1=tree$3.serialize,tree_2=tree$3.deserialize,util$h=createCommonjsModule(function(e,t){(t=e.exports).codec=src$4.GIT_RAW,t.defaultHashAlg=src$4.SHA1,t.serialize=e=>{if(null===e)throw new Error("dagNode passed to serialize was null");if(Buffer.isBuffer(e)){if("blob"===e.slice(0,4).toString())return e;throw new Error("unexpected dagNode passed to serialize")}switch(e.gitType){case"commit":return commit.serialize(e);case"tag":return tag.serialize(e);default:return tree$3.serialize(e)}},t.deserialize=e=>{let t=util$g.find(e,0),r=e.slice(0,t).toString().match(/([^ ]+) (\d+)/);if(!r)throw new Error("invalid object header");switch(r[1]){case"blob":return e;case"commit":return commit.deserialize(e.slice(t+1));case"tag":return tag.deserialize(e.slice(t+1));case"tree":return tree$3.deserialize(e.slice(t+1));default:throw new Error("unknown object type "+r[1])}},t.cid=async(e,r)=>{const n={cidVersion:1,hashAlg:t.defaultHashAlg},i=Object.assign(n,r),o=await src$1T(e,i.hashAlg),s=src$4.print[t.codec];return new src$1U(i.cidVersion,s,o)}}),util_1$a=util$h.codec,util_2$6=util$h.defaultHashAlg,util_3$5=util$h.serialize,util_4$5=util$h.deserialize,util_5$3=util$h.cid,resolve$8=(e,t)=>{let r=util$h.deserialize(e);const n=t.split("/").filter(Boolean);for(;n.length;){const e=n.shift();if(void 0===r[e])throw new Error(`Object has no property '${e}'`);if(r=r[e],src$1U.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}};const traverse$3=function*(e,t){if(!Buffer.isBuffer(e)&&!src$1U.isCID(e)&&"string"!=typeof e&&null!==e)for(const r of Object.keys(e)){const n=void 0===t?r:t+"/"+r;yield n,yield*traverse$3(e[r],n)}};var tree$4=function*(e){const t=util$h.deserialize(e);yield*traverse$3(t)},resolver$4={resolve:resolve$8,tree:tree$4},src$1V=createCommonjsModule(function(e,t){t.util=util$h,t.resolver=resolver$4,t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg}),src_1$i=src$1V.util,src_2$g=src$1V.resolver,src_3$f=src$1V.codec,src_4$f=src$1V.defaultHashAlg,CIDUtil$f={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!Buffer.isBuffer(e.multihash))return"multihash must be a Buffer";try{src.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}},cidUtil$f=CIDUtil$f;class CID$e{constructor(e,t,r,n){if(_CID$e.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=Buffer.from(t.multihash),void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=src$1.isEncoded(e);if(t){const r=src$1.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=src$4.getCodec(r.slice(1)),this.multihash=src$4.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=src.fromB58String(e),this.multibaseName="base58btc";return CID$e.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(Buffer.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=src$4.getCodec(t.slice(1)),this.multihash=src$4.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$e.validateCID(this)}else this.version=e,this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$e.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=Buffer.concat([Buffer.from("01","hex"),src$4.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,"hex"),src$4.getCodeVarint(this.codec),src.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=src.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new _CID$e(0,this.codec,this.multihash)}toV1(){return new _CID$e(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=src.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=src$1.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=cidUtil$f.checkCIDComponents(e);if(t)throw new Error(t)}}const _CID$e=classIs(CID$e,{className:"CID",symbolName:"@ipld/js-cid/CID"});_CID$e.codecs=baseTable;var src$1W=_CID$e,_from$3="zcash-bitcore-lib@~0.13.20-rc3",_id$3="zcash-bitcore-lib@0.13.20-rc3",_inBundle$3=!1,_integrity$3="sha1-gToPVtz4t2vBQplRvqbRI2xQcAg=",_location$3="/zcash-bitcore-lib",_phantomChildren$3={},_requested$3={type:"range",registry:!0,raw:"zcash-bitcore-lib@~0.13.20-rc3",name:"zcash-bitcore-lib",escapedName:"zcash-bitcore-lib",rawSpec:"~0.13.20-rc3",saveSpec:null,fetchSpec:"~0.13.20-rc3"},_requiredBy$3=["/ipld-zcash"],_resolved$3="https://registry.npmjs.org/zcash-bitcore-lib/-/zcash-bitcore-lib-0.13.20-rc3.tgz",_shasum$3="813a0f56dcf8b76bc1429951bea6d1236c507008",_shrinkwrap={name:"bitcore",version:"0.13.19",dependencies:{"bn.js":{version:"2.0.4",from:"bn.js@=2.0.4",resolved:"https://registry.npmjs.org/bn.js/-/bn.js-2.0.4.tgz"},bs58:{version:"2.0.0",from:"bs58@=2.0.0",resolved:"https://registry.npmjs.org/bs58/-/bs58-2.0.0.tgz"},"buffer-compare":{version:"1.0.0",from:"buffer-compare@=1.0.0",resolved:"https://registry.npmjs.org/buffer-compare/-/buffer-compare-1.0.0.tgz"},elliptic:{version:"3.0.3",from:"elliptic@=3.0.3",resolved:"https://registry.npmjs.org/elliptic/-/elliptic-3.0.3.tgz",dependencies:{brorand:{version:"1.0.5",from:"brorand@^1.0.1",resolved:"https://registry.npmjs.org/brorand/-/brorand-1.0.5.tgz"},"hash.js":{version:"1.0.3",from:"hash.js@=1.0.3",resolved:"https://registry.npmjs.org/hash.js/-/hash.js-1.0.3.tgz"}}},inherits:{version:"2.0.1",from:"inherits@=2.0.1",resolved:"https://registry.npmjs.org/inherits/-/inherits-2.0.1.tgz"},lodash:{version:"3.10.1",from:"lodash@=3.10.1",resolved:"https://registry.npmjs.org/lodash/-/lodash-3.10.1.tgz"}}},_spec$3="zcash-bitcore-lib@~0.13.20-rc3",_where$3="/Users/mariusdarila/go/src/akasha-sdk-js/node_modules/ipld-zcash",author$2={name:"BitPay",email:"dev@bitpay.com"},browser$t={request:"browser-request"},bugs$3={url:"https://github.com/bitmex/zcash-bitcore-lib/issues"},bundleDependencies$3=!1,contributors$1=[{name:"Daniel Cousens",email:"bitcoin@dcousens.com"},{name:"Esteban Ordano",email:"eordano@gmail.com"},{name:"Gordon Hall",email:"gordon@bitpay.com"},{name:"Jeff Garzik",email:"jgarzik@bitpay.com"},{name:"Kyle Drake",email:"kyle@kyledrake.net"},{name:"Manuel Araoz",email:"manuelaraoz@gmail.com"},{name:"Matias Alejo Garcia",email:"ematiu@gmail.com"},{name:"Ryan X. Charles",email:"ryanxcharles@gmail.com"},{name:"Stefan Thomas",email:"moon@justmoon.net"},{name:"Stephen Pair",email:"stephen@bitpay.com"},{name:"Wei Lu",email:"luwei.here@gmail.com"},{name:"Jack Grigg",email:"jack@z.cash"}],dependencies$3={"bn.js":"=2.0.4",bs58:"=2.0.0","buffer-compare":"=1.0.0",elliptic:"=3.0.3",inherits:"=2.0.1",lodash:"=3.10.1"},deprecated$3=!1,description$3="A pure and powerful JavaScript Zcash library.",devDependencies$3={brfs:"^1.2.0",chai:"^1.10.0",gulp:"^3.8.10",sinon:"^1.13.0","zcash-bitcore-build":"^0.5.4"},homepage$3="https://github.com/bitmex/zcash-bitcore-lib#readme",keywords$3=["zcash","transaction","address","p2p","ecies","cryptocurrency","blockchain","payment","bip21","bip32","bip37","bip69","bip70","multisig"],license$3="MIT",main$3="index.js",name$k="zcash-bitcore-lib",repository$3={type:"git",url:"git+https://github.com/bitmex/zcash-bitcore-lib.git"},scripts$3={build:"gulp",coverage:"gulp coverage",lint:"gulp lint",test:"gulp test"},version$8="0.13.20-rc3",_package$6={_from:_from$3,_id:_id$3,_inBundle:_inBundle$3,_integrity:_integrity$3,_location:_location$3,_phantomChildren:_phantomChildren$3,_requested:_requested$3,_requiredBy:_requiredBy$3,_resolved:_resolved$3,_shasum:_shasum$3,_shrinkwrap:_shrinkwrap,_spec:_spec$3,_where:_where$3,author:author$2,browser:browser$t,bugs:bugs$3,bundleDependencies:bundleDependencies$3,contributors:contributors$1,dependencies:dependencies$3,deprecated:deprecated$3,description:description$3,devDependencies:devDependencies$3,homepage:homepage$3,keywords:keywords$3,license:license$3,main:main$3,name:name$k,repository:repository$3,scripts:scripts$3,version:version$8},_package$7=Object.freeze({_from:_from$3,_id:_id$3,_inBundle:_inBundle$3,_integrity:_integrity$3,_location:_location$3,_phantomChildren:_phantomChildren$3,_requested:_requested$3,_requiredBy:_requiredBy$3,_resolved:_resolved$3,_shasum:_shasum$3,_shrinkwrap:_shrinkwrap,_spec:_spec$3,_where:_where$3,author:author$2,browser:browser$t,bugs:bugs$3,bundleDependencies:bundleDependencies$3,contributors:contributors$1,dependencies:dependencies$3,deprecated:deprecated$3,description:description$3,devDependencies:devDependencies$3,homepage:homepage$3,keywords:keywords$3,license:license$3,main:main$3,name:name$k,repository:repository$3,scripts:scripts$3,version:version$8,default:_package$6}),bn$1=createCommonjsModule(function(e){!function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(null!==e&&"object"==typeof e&&Array.isArray(e.words))return e;this.sign=!1,this.words=null,this.length=0,this.red=null,"le"!==t&&"be"!==t||(r=t,t=10),null!==e&&this._init(e||0,t||10,r||"be")}function o(e,t,r){for(var n=0,i=Math.min(e.length,r),o=t;o<i;o++){var s=e.charCodeAt(o)-48;n<<=4,n|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return n}function s(e,t,r,n){for(var i=0,o=Math.min(e.length,r),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26,i.prototype._init=function(e,t,n){if("number"==typeof e)return e<0&&(this.sign=!0,e=-e),void(e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3));if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.sign=!0),this.strip()},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o=0;if("be"===n){i=e.length-1;for(var s=0;i>=0;i-=3){var a=e[i]|e[i-1]<<8|e[i-2]<<16;this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++)}}else if("le"===n)for(i=0,s=0;i<e.length;i+=3){a=e[i]|e[i+1]<<8|e[i+2]<<16;this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++)}return this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;for(var n=0,i=(r=e.length-6,0);r>=t;r-=6){var s=o(e,r,r+6);this.words[i]|=s<<n&67108863,this.words[i+1]|=s>>>26-n&4194303,(n+=24)>=26&&(n-=26,i++)}if(r+6!==t){s=o(e,t,r+6);this.words[i]|=s<<n&67108863,this.words[i+1]|=s>>>26-n&4194303}this.strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,a=o%n,c=Math.min(o,o-a)+r,u=0,f=r;f<c;f+=n)u=s(e,f,f+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var l=1;for(u=s(e,f,e.length,t),f=0;f<a;f++)l*=t;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.sign=this.sign,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){if(16===(e=e||10)||"hex"===e){for(var n="",i=0,o=(t=0|t||1,0),s=0;s<this.length;s++){var f=this.words[s],l=(16777215&(f<<i|o)).toString(16);n=0!==(o=f>>>24-i&16777215)||s!==this.length-1?a[6-l.length]+l+n:l+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return this.sign&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var d=c[e],h=u[e],p=(n="",this.clone());for(p.sign=!1;0!==p.cmpn(0);){var b=p.modn(h).toString(e);n=0!==(p=p.idivn(h)).cmpn(0)?a[d-b.length]+b+n:b+n}return 0===this.cmpn(0)&&(n="0"+n),this.sign&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toArray=function(){this.strip();var e=new Array(this.byteLength());e[0]=0;for(var t=this.clone(),r=0;0!==t.cmpn(0);r++){var n=t.andln(255);t.ishrn(8),e[e.length-r-1]=n}return e},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var e=this.clone();return e.sign=!this.sign,e},i.prototype.ior=function(e){for(this.sign=this.sign||e.sign;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.iand=function(e){var t;this.sign=this.sign&&e.sign,t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.ixor=function(e){var t,r;this.sign=this.sign||e.sign,this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);for(var n=e/26|0,i=e%26;this.length<=n;)this.words[this.length++]=0;return this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(e){if(this.sign&&!e.sign){this.sign=!1;var t=this.isub(e);return this.sign=!this.sign,this._normSign()}if(!this.sign&&e.sign){e.sign=!1;t=this.isub(e);return e.sign=!0,t._normSign()}var r,n;this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++){t=r.words[o]+n.words[o]+i;this.words[o]=67108863&t,i=t>>>26}for(;0!==i&&o<r.length;o++){t=r.words[o]+i;this.words[o]=67108863&t,i=t>>>26}if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(e){if(e.sign&&!this.sign){e.sign=!1;var t=this.sub(e);return e.sign=!0,t}if(!e.sign&&this.sign){this.sign=!1;t=e.sub(this);return this.sign=!0,t}return this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(e.sign){e.sign=!1;var t=this.iadd(e);return e.sign=!0,t._normSign()}if(this.sign)return this.sign=!1,this.iadd(e),this.sign=!0,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.sign=!1,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++){o=(t=r.words[s]-n.words[s]+o)>>26,this.words[s]=67108863&t}for(;0!==o&&s<r.length;s++){o=(t=r.words[s]+o)>>26,this.words[s]=67108863&t}if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.sign=!0),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)},i.prototype._smallMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var r=0,n=0;n<t.length-1;n++){for(var i=r>>>26,o=67108863&r,s=Math.min(n,e.length-1),a=Math.max(0,n-this.length+1);a<=s;a++){var c=n-a,u=(0|this.words[c])*(0|e.words[a]),f=67108863&u;o=67108863&(f=f+o|0),i=(i=i+(u/67108864|0)|0)+(f>>>26)|0}t.words[n]=o,r=i}return 0!==r?t.words[n]=r:t.length--,t.strip()},i.prototype._bigMulTo=function(e,t){t.sign=e.sign!==this.sign,t.length=this.length+e.length;for(var r=0,n=0,i=0;i<t.length-1;i++){var o=n;n=0;for(var s=67108863&r,a=Math.min(i,e.length-1),c=Math.max(0,i-this.length+1);c<=a;c++){var u=i-c,f=(0|this.words[u])*(0|e.words[c]),l=67108863&f;s=67108863&(l=l+s|0),n+=(o=(o=o+(f/67108864|0)|0)+(l>>>26)|0)>>>26,o&=67108863}t.words[i]=s,r=o,o=n}return 0!==r?t.words[i]=r:t.length--,t.strip()},i.prototype.mulTo=function(e,t){return this.length+e.length<63?this._smallMulTo(e,t):this._bigMulTo(e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.imul=function(e){if(0===this.cmpn(0)||0===e.cmpn(0))return this.words[0]=0,this.length=1,this;var t=this.length,r=e.length;this.sign=e.sign!==this.sign,this.length=this.length+e.length,this.words[this.length-1]=0;for(var n=this.length-2;n>=0;n--){for(var i=0,o=0,s=Math.min(n,r-1),a=Math.max(0,n-t+1);a<=s;a++){var c=n-a,u=this.words[c]*e.words[a],f=67108863&u;i+=u/67108864|0,o=67108863&(f+=o),i+=f>>>26}this.words[n]=o,this.words[n+1]+=i,i=0}for(i=0,c=1;c<this.length;c++){var l=this.words[c]+i;this.words[c]=67108863&l,i=l>>>26}return this.strip()},i.prototype.imuln=function(e){r("number"==typeof e);for(var t=0,n=0;n<this.length;n++){var i=this.words[n]*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.mul(this)},i.prototype.ishln=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=67108863>>>26-t<<26-t;if(0!==t){for(var o=0,s=0;s<this.length;s++){var a=this.words[s]&i,c=this.words[s]-a<<t;this.words[s]=c|o,o=a>>>26-t}o&&(this.words[s]=o,this.length++)}if(0!==n){for(s=this.length-1;s>=0;s--)this.words[s+n]=this.words[s];for(s=0;s<n;s++)this.words[s]=0;this.length+=n}return this.strip()},i.prototype.ishrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=n;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s){this.length-=s;for(u=0;u<this.length;u++)this.words[u]=this.words[u+s]}else this.words[0]=0,this.length=1;var f=0;for(u=this.length-1;u>=0&&(0!==f||u>=i);u--){var l=this.words[u];this.words[u]=f<<26-o|l>>>o,f=l&a}return c&&0!==f&&(c.words[c.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),this},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(!this.sign,"imaskn works only with positive numbers"),0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),e<0?this.isubn(-e):this.sign?1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(e),this.sign=!0,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),e<0)return this.iaddn(-e);if(this.sign)return this.sign=!1,this.iaddn(e),this.sign=!0,this;this.words[0]-=e;for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.sign=!1,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i=e.length+n;if(this.words.length<i){for(var o=new Array(i),s=0;s<this.length;s++)o[s]=this.words[s];this.words=o}else s=this.length;for(this.length=Math.max(this.length,i);s<this.length;s++)this.words[s]=0;var a=0;for(s=0;s<e.length;s++){var c=this.words[s+n]+a,u=e.words[s]*t;a=((c-=67108863&u)>>26)-(u/67108864|0),this.words[s+n]=67108863&c}for(;s<this.length-n;s++){a=(c=this.words[s+n]+a)>>26,this.words[s+n]=67108863&c}if(0===a)return this.strip();r(-1===a),a=0;for(s=0;s<this.length;s++){a=(c=-this.words[s]+a)>>26,this.words[s]=67108863&c}return this.sign=!0,this.strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),o=e,s=o.words[o.length-1];0!==(r=26-this._countBits(s))&&(o=o.shln(r),n.ishln(r),s=o.words[o.length-1]);var a,c=n.length-o.length;if("mod"!==t){(a=new i(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var f=n.clone()._ishlnsubmul(o,1,c);f.sign||(n=f,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var d=67108864*n.words[o.length+l]+n.words[o.length+l-1];for(d=Math.min(d/s|0,67108863),n._ishlnsubmul(o,d,l);n.sign;)d--,n.sign=!1,n._ishlnsubmul(o,1,l),0!==n.cmpn(0)&&(n.sign=!n.sign);a&&(a.words[l]=d)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.ishrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(e,t){if(r(0!==e.cmpn(0)),this.sign&&!e.sign){var n,o=this.neg().divmod(e,t);return"mod"!==t&&(s=o.div.neg()),"div"!==t&&(n=0===o.mod.cmpn(0)?o.mod:e.sub(o.mod)),{div:s,mod:n}}if(!this.sign&&e.sign){var s;o=this.divmod(e.neg(),t);return"mod"!==t&&(s=o.div.neg()),{div:s,mod:o.mod}}return this.sign&&e.sign?this.neg().divmod(e.neg(),t):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t)},i.prototype.div=function(e){return this.divmod(e,"div").div},i.prototype.mod=function(e){return this.divmod(e,"mod").mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(0===t.mod.cmpn(0))return t.div;var r=t.div.sign?t.mod.isub(e):t.mod,n=e.shrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:t.div.sign?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+this.words[i])%e;return n},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=this.words[n]+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(!e.sign),r(0!==e.cmpn(0));var t=this,n=e.clone();t=t.sign?t.mod(e):t.clone();for(var o=new i(1),s=new i(0),a=new i(0),c=new i(1),u=0;t.isEven()&&n.isEven();)t.ishrn(1),n.ishrn(1),++u;for(var f=n.clone(),l=t.clone();0!==t.cmpn(0);){for(;t.isEven();)t.ishrn(1),o.isEven()&&s.isEven()?(o.ishrn(1),s.ishrn(1)):(o.iadd(f).ishrn(1),s.isub(l).ishrn(1));for(;n.isEven();)n.ishrn(1),a.isEven()&&c.isEven()?(a.ishrn(1),c.ishrn(1)):(a.iadd(f).ishrn(1),c.isub(l).ishrn(1));t.cmp(n)>=0?(t.isub(n),o.isub(a),s.isub(c)):(n.isub(t),a.isub(o),c.isub(s))}return{a:a,b:c,gcd:n.ishln(u)}},i.prototype._invmp=function(e){r(!e.sign),r(0!==e.cmpn(0));var t=this,n=e.clone();t=t.sign?t.mod(e):t.clone();for(var o=new i(1),s=new i(0),a=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(;t.isEven();)t.ishrn(1),o.isEven()?o.ishrn(1):o.iadd(a).ishrn(1);for(;n.isEven();)n.ishrn(1),s.isEven()?s.ishrn(1):s.iadd(a).ishrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(s)):(n.isub(t),s.isub(o))}return 0===t.cmpn(1)?o:s},i.prototype.gcd=function(e){if(0===this.cmpn(0))return e.clone();if(0===e.cmpn(0))return this.clone();var t=this.clone(),r=e.clone();t.sign=!1,r.sign=!1;for(var n=0;t.isEven()&&r.isEven();n++)t.ishrn(1),r.ishrn(1);for(;;){for(;t.isEven();)t.ishrn(1);for(;r.isEven();)r.ishrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.ishln(n)},i.prototype.invm=function(e){return this.egcd(e).a.mod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n){for(var o=this.length;o<n+1;o++)this.words[o]=0;return this.words[n]|=i,this.length=n+1,this}var s=i;for(o=n;0!==s&&o<this.length;o++){var a=this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},i.prototype.cmpn=function(e){var t,r=e<0;if(r&&(e=-e),this.sign&&!r)return-1;if(!this.sign&&r)return 1;if(e&=67108863,this.strip(),this.length>1)t=1;else{var n=this.words[0];t=n===e?0:n<e?-1:1}return this.sign&&(t=-t),t},i.prototype.cmp=function(e){if(this.sign&&!e.sign)return-1;if(!this.sign&&e.sign)return 1;var t=this.ucmp(e);return this.sign?-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=this.words[r],i=e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.red=function(e){return new m(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(!this.sign,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var f={k256:null,p224:null,p192:null,p25519:null};function l(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function d(){l.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function h(){l.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function p(){l.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){l.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function m(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else this.m=e,this.prime=null}function g(e){m.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv.sign=!0,this.minv=this.minv.mod(this.r)}l.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},l.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},l.prototype.split=function(e,t){e.ishrn(this.n,0,t)},l.prototype.imulK=function(e){return e.imul(this.k)},n(d,l),d.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];t.words[t.length++]=4194303&i;for(n=10;n<e.length;n++){var o=e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}e.words[n-10]=i>>>22,e.length-=9},d.prototype.imulK=function(e){var t;e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var r=0,n=0;n<e.length;n++){var i=e.words[n];t=64*i,t+=(r+=977*i)/67108864|0,r&=67108863,e.words[n]=r,r=t}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(h,l),n(p,l),n(b,l),b.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*e.words[r]+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(f[e])return f[e];var t;if("k256"===e)t=new d;else if("p224"===e)t=new h;else if("p192"===e)t=new p;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new b}return f[e]=t,t},m.prototype._verify1=function(e){r(!e.sign,"red works only with positives"),r(e.red,"red works only with red numbers")},m.prototype._verify2=function(e,t){r(!e.sign&&!t.sign,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},m.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.mod(this.m)._forceRed(this)},m.prototype.neg=function(e){var t=e.clone();return t.sign=!t.sign,t.iadd(this.m)._forceRed(this)},m.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},m.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},m.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},m.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},m.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.shln(t))},m.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},m.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},m.prototype.isqr=function(e){return this.imul(e,e)},m.prototype.sqr=function(e){return this.mul(e,e)},m.prototype.sqrt=function(e){if(0===e.cmpn(0))return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).ishrn(2);return d=this.pow(e,n)}for(var o=this.m.subn(1),s=0;0!==o.cmpn(0)&&0===o.andln(1);)s++,o.ishrn(1);r(0!==o.cmpn(0));var a=new i(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).ishrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);0!==this.pow(f,u).cmp(c);)f.redIAdd(c);for(var l=this.pow(f,o),d=this.pow(e,o.addn(1).ishrn(1)),h=this.pow(e,o),p=s;0!==h.cmp(a);){for(var b=h,m=0;0!==b.cmp(a);m++)b=b.redSqr();r(m<p);var g=this.pow(l,new i(1).ishln(p-m-1));d=d.redMul(g),l=g.redSqr(),h=h.redMul(l),p=m}return d},m.prototype.invm=function(e){var t=e._invmp(this.m);return t.sign?(t.sign=!1,this.imod(t).redNeg()):this.imod(t)},m.prototype.pow=function(e,t){var r=[];if(0===t.cmpn(0))return new i(1);for(var n=t.clone();0!==n.cmpn(0);)r.push(n.andln(1)),n.ishrn(1);for(var o=e,s=0;s<r.length&&0===r[s];s++,o=this.sqr(o));if(++s<r.length)for(n=this.sqr(o);s<r.length;s++,n=this.sqr(n))0!==r[s]&&(o=this.mul(o,n));return o},m.prototype.convertTo=function(e){return e.clone()},m.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new g(e)},n(g,m),g.prototype.convertTo=function(e){return this.imod(e.shln(this.shift))},g.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},g.prototype.imul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).ishrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},g.prototype.mul=function(e,t){if(0===e.cmpn(0)||0===t.cmpn(0))return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).ishrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},g.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,commonjsGlobal)}),lodash$1=createCommonjsModule(function(e,t){(function(){var r,n,i,o="3.10.1",s=1,a=2,c=4,u=8,f=16,l=32,d=64,h=128,p=256,b=30,m="...",g=150,y=16,v=200,_=1,$=2,S="Expected a function",E="__lodash_placeholder__",w="[object Arguments]",C="[object Array]",A="[object Boolean]",k="[object Date]",T="[object Error]",I="[object Function]",B="[object Number]",P="[object Object]",R="[object RegExp]",O="[object String]",N="[object ArrayBuffer]",x="[object Float32Array]",L="[object Float64Array]",M="[object Int8Array]",D="[object Int16Array]",F="[object Int32Array]",j="[object Uint8Array]",U="[object Uint8ClampedArray]",H="[object Uint16Array]",K="[object Uint32Array]",G=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39|#96);/g,W=/[&<>"'`]/g,J=RegExp(q.source),X=RegExp(W.source),Y=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,te=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ne=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,ie=RegExp(ne.source),oe=/[\u0300-\u036f\ufe20-\ufe23]/g,se=/\\(\\)?/g,ae=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,ue=/^0[xX]/,fe=/^\[object .+?Constructor\]$/,le=/^\d+$/,de=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,he=/($^)/,pe=/['\n\r\u2028\u2029\\]/g,be=(n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",i="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(n+"+(?="+n+i+")|"+n+"?"+i+"|"+n+"+|[0-9]+","g")),me=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],ge=-1,ye={};ye[x]=ye[L]=ye[M]=ye[D]=ye[F]=ye[j]=ye[U]=ye[H]=ye[K]=!0,ye[w]=ye[C]=ye[N]=ye[A]=ye[k]=ye[T]=ye[I]=ye["[object Map]"]=ye[B]=ye[P]=ye[R]=ye["[object Set]"]=ye[O]=ye["[object WeakMap]"]=!1;var ve={};ve[w]=ve[C]=ve[N]=ve[A]=ve[k]=ve[x]=ve[L]=ve[M]=ve[D]=ve[F]=ve[B]=ve[P]=ve[R]=ve[O]=ve[j]=ve[U]=ve[H]=ve[K]=!0,ve[T]=ve[I]=ve["[object Map]"]=ve["[object Set]"]=ve["[object WeakMap]"]=!1;var _e={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},$e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Se={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ee={function:!0,object:!0},we={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ae=t&&!t.nodeType&&t,ke=e&&!e.nodeType&&e,Te=Ae&&ke&&"object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object&&commonjsGlobal,Ie=Ee[typeof self]&&self&&self.Object&&self,Be=Ee[typeof window]&&window&&window.Object&&window,Pe=ke&&ke.exports===Ae&&Ae,Re=Te||Be!==(this&&this.window)&&Be||Ie||this;function Oe(e,t){if(e!==t){var n=null===e,i=e===r,o=e==e,s=null===t,a=t===r,c=t==t;if(e>t&&!s||!o||n&&!a&&c||i&&c)return 1;if(e<t&&!n||!c||s&&!i&&o||a&&o)return-1}return 0}function Ne(e,t,r){for(var n=e.length,i=r?n:-1;r?i--:++i<n;)if(t(e[i],i,e))return i;return-1}function xe(e,t,r){if(t!=t)return Ve(e,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function Le(e){return"function"==typeof e||!1}function Me(e){return null==e?"":e+""}function De(e,t){for(var r=-1,n=e.length;++r<n&&t.indexOf(e.charAt(r))>-1;);return r}function Fe(e,t){for(var r=e.length;r--&&t.indexOf(e.charAt(r))>-1;);return r}function je(e,t){return Oe(e.criteria,t.criteria)||e.index-t.index}function Ue(e){return _e[e]}function He(e){return $e[e]}function Ke(e,t,r){return t?e=we[e]:r&&(e=Ce[e]),"\\"+e}function Ge(e){return"\\"+Ce[e]}function Ve(e,t,r){for(var n=e.length,i=t+(r?0:-1);r?i--:++i<n;){var o=e[i];if(o!=o)return i}return-1}function ze(e){return!!e&&"object"==typeof e}function qe(e){return e<=160&&e>=9&&e<=13||32==e||160==e||5760==e||6158==e||e>=8192&&(e<=8202||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function We(e,t){for(var r=-1,n=e.length,i=-1,o=[];++r<n;)e[r]===t&&(e[r]=E,o[++i]=r);return o}function Je(e){for(var t=-1,r=e.length;++t<r&&qe(e.charCodeAt(t)););return t}function Xe(e){for(var t=e.length;t--&&qe(e.charCodeAt(t)););return t}function Ye(e){return Se[e]}var Ze=function e(t){var n=(t=t?Ze.defaults(Re.Object(),t,Ze.pick(Re,me)):Re).Array,i=t.Date,_e=t.Error,$e=t.Function,Se=t.Math,Ee=t.Number,we=t.Object,Ce=t.RegExp,Ae=t.String,ke=t.TypeError,Te=n.prototype,Ie=we.prototype,Be=Ae.prototype,Pe=$e.prototype.toString,qe=Ie.hasOwnProperty,Qe=0,et=Ie.toString,tt=Re._,rt=Ce("^"+Pe.call(qe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=t.ArrayBuffer,it=t.clearTimeout,ot=t.parseFloat,st=Se.pow,at=Ie.propertyIsEnumerable,ct=yn(t,"Set"),ut=t.setTimeout,ft=Te.splice,lt=t.Uint8Array,dt=yn(t,"WeakMap"),ht=Se.ceil,pt=yn(we,"create"),bt=Se.floor,mt=yn(n,"isArray"),gt=t.isFinite,yt=yn(we,"keys"),vt=Se.max,_t=Se.min,$t=yn(i,"now"),St=t.parseInt,Et=Se.random,wt=Ee.NEGATIVE_INFINITY,Ct=Ee.POSITIVE_INFINITY,At=4294967295,kt=At-1,Tt=At>>>1,It=9007199254740991,Bt=dt&&new dt,Pt={};function Rt(e){if(ze(e)&&!Gi(e)&&!(e instanceof xt)){if(e instanceof Nt)return e;if(qe.call(e,"__chain__")&&qe.call(e,"__wrapped__"))return Nn(e)}return new Nt(e)}function Ot(){}function Nt(e,t,r){this.__wrapped__=e,this.__actions__=r||[],this.__chain__=!!t}Rt.support={};function xt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ct,this.__views__=[]}function Lt(){this.__data__={}}function Mt(e){var t=e?e.length:0;for(this.data={hash:pt(null),set:new ct};t--;)this.push(e[t])}function Dt(e,t){var r=e.data;return("string"==typeof t||Wi(t)?r.set.has(t):r.hash[t])?0:-1}function Ft(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function jt(e,t){for(var r=-1,n=e.length;++r<n&&!1!==t(e[r],r,e););return e}function Ut(e,t){for(var r=-1,n=e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Ht(e,t){for(var r=-1,n=e.length,i=-1,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[++i]=s)}return o}function Kt(e,t){for(var r=-1,i=e.length,o=n(i);++r<i;)o[r]=t(e[r],r,e);return o}function Gt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Vt(e,t,r,n){var i=-1,o=e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function zt(e,t){for(var r=-1,n=e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function qt(e,t,n,i){return e!==r&&qe.call(i,n)?e:t}function Wt(e,t,n){for(var i=-1,o=mo(t),s=o.length;++i<s;){var a=o[i],c=e[a],u=n(c,t[a],a,e,t);(u==u?u===c:c!=c)&&(c!==r||a in e)||(e[a]=u)}return e}function Jt(e,t){return null==t?e:Yt(t,mo(t),e)}function Xt(e,t){for(var i=-1,o=null==e,s=!o&&_n(e),a=s?e.length:0,c=t.length,u=n(c);++i<c;){var f=t[i];u[i]=s?$n(f,a)?e[f]:r:o?r:e[f]}return u}function Yt(e,t,r){r||(r={});for(var n=-1,i=t.length;++n<i;){var o=t[n];r[o]=e[o]}return r}function Zt(e,t,n){var i=typeof e;return"function"==i?t===r?e:xr(e,t,n):null==e?Lo:"object"==i?vr(e):t===r?Ho(e):_r(e,t)}function Qt(e,t,n,i,o,s,a){var c;if(n&&(c=o?n(e,i,o):n(e)),c!==r)return c;if(!Wi(e))return e;var u=Gi(e);if(u){if(c=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&qe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!t)return Ft(e,c)}else{var f=et.call(e),l=f==I;if(f!=P&&f!=w&&(!l||o))return ve[f]?function(e,t,r){var n=e.constructor;switch(t){case N:return Lr(e);case A:case k:return new n(+e);case x:case L:case M:case D:case F:case j:case U:case H:case K:var i=e.buffer;return new n(r?Lr(i):i,e.byteOffset,e.length);case B:case O:return new n(e);case R:var o=new n(e.source,ce.exec(e));o.lastIndex=e.lastIndex}return o}(e,f,t):o?e:{};if(c=function(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=we),new t}(l?{}:e),!t)return Jt(c,e)}s||(s=[]),a||(a=[]);for(var d=s.length;d--;)if(s[d]==e)return a[d];return s.push(e),a.push(c),(u?jt:dr)(e,function(r,i){c[i]=Qt(r,t,n,i,e,s,a)}),c}Rt.templateSettings={escape:Y,evaluate:Z,interpolate:Q,variable:"",imports:{_:Rt}};var er=function(){function e(){}return function(t){if(Wi(t)){e.prototype=t;var n=new e;e.prototype=r}return n||{}}}();function tr(e,t,n){if("function"!=typeof e)throw new ke(S);return ut(function(){e.apply(r,n)},t)}function rr(e,t){var r=e?e.length:0,n=[];if(!r)return n;var i=-1,o=bn(),s=o==xe,a=s&&t.length>=v?Kr(t):null,c=t.length;a&&(o=Dt,s=!1,t=a);e:for(;++i<r;){var u=e[i];if(s&&u==u){for(var f=c;f--;)if(t[f]===u)continue e;n.push(u)}else o(t,u,0)<0&&n.push(u)}return n}var nr=Ur(dr),ir=Ur(hr,!0);function or(e,t){var r=!0;return nr(e,function(e,n,i){return r=!!t(e,n,i)}),r}function sr(e,t){var r=[];return nr(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function ar(e,t,r,n){var i;return r(e,function(e,r,o){if(t(e,r,o))return i=n?r:e,!1}),i}function cr(e,t,r,n){n||(n=[]);for(var i=-1,o=e.length;++i<o;){var s=e[i];ze(s)&&_n(s)&&(r||Gi(s)||Ki(s))?t?cr(s,t,r,n):Gt(n,s):r||(n[n.length]=s)}return n}var ur=Hr(),fr=Hr(!0);function lr(e,t){return ur(e,t,go)}function dr(e,t){return ur(e,t,mo)}function hr(e,t){return fr(e,t,mo)}function pr(e,t){for(var r=-1,n=t.length,i=-1,o=[];++r<n;){var s=t[r];qi(e[s])&&(o[++i]=s)}return o}function br(e,t,n){if(null!=e){n!==r&&n in Rn(e)&&(t=[n]);for(var i=0,o=t.length;null!=e&&i<o;)e=e[t[i++]];return i&&i==o?e:r}}function mr(e,t,n,i,o,s){return e===t||(null==e||null==t||!Wi(e)&&!ze(t)?e!=e&&t!=t:function(e,t,n,i,o,s,a){var c=Gi(e),u=Gi(t),f=C,l=C;c||((f=et.call(e))==w?f=P:f!=P&&(c=eo(e))),u||((l=et.call(t))==w?l=P:l!=P&&(u=eo(t)));var d=f==P,h=l==P,p=f==l;if(p&&!c&&!d)return function(e,t,r){switch(r){case A:case k:return+e==+t;case T:return e.name==t.name&&e.message==t.message;case B:return e!=+e?t!=+t:e==+t;case R:case O:return e==t+""}return!1}(e,t,f);if(!o){var b=d&&qe.call(e,"__wrapped__"),m=h&&qe.call(t,"__wrapped__");if(b||m)return n(b?e.value():e,m?t.value():t,i,o,s,a)}if(!p)return!1;s||(s=[]),a||(a=[]);for(var g=s.length;g--;)if(s[g]==e)return a[g]==t;s.push(e),a.push(t);var y=(c?function(e,t,n,i,o,s,a){var c=-1,u=e.length,f=t.length;if(u!=f&&!(o&&f>u))return!1;for(;++c<u;){var l=e[c],d=t[c],h=i?i(o?d:l,o?l:d,c):r;if(h!==r){if(h)continue;return!1}if(o){if(!zt(t,function(e){return l===e||n(l,e,i,o,s,a)}))return!1}else if(l!==d&&!n(l,d,i,o,s,a))return!1}return!0}:function(e,t,n,i,o,s,a){var c=mo(e),u=c.length,f=mo(t).length;if(u!=f&&!o)return!1;for(var l=u;l--;){var d=c[l];if(!(o?d in t:qe.call(t,d)))return!1}for(var h=o;++l<u;){d=c[l];var p=e[d],b=t[d],m=i?i(o?b:p,o?p:b,d):r;if(!(m===r?n(p,b,i,o,s,a):m))return!1;h||(h="constructor"==d)}if(!h){var g=e.constructor,y=t.constructor;if(g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y))return!1}return!0})(e,t,n,i,o,s,a);return s.pop(),a.pop(),y}(e,t,mr,n,i,o,s))}function gr(e,t,n){var i=t.length,o=i,s=!n;if(null==e)return!o;for(e=Rn(e);i--;){var a=t[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var c=(a=t[i])[0],u=e[c],f=a[1];if(s&&a[2]){if(u===r&&!(c in e))return!1}else{var l=n?n(u,f,c):r;if(!(l===r?mr(f,u,n,!0):l))return!1}}return!0}function yr(e,t){var r=-1,i=_n(e)?n(e.length):[];return nr(e,function(e,n,o){i[++r]=t(e,n,o)}),i}function vr(e){var t=gn(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null!=e&&e[n]===i&&(i!==r||n in Rn(e))}}return function(e){return gr(e,t)}}function _r(e,t){var n=Gi(e),i=En(e)&&An(t),o=e+"";return e=On(e),function(s){if(null==s)return!1;var a=o;if(s=Rn(s),(n||!i)&&!(a in s)){if(null==(s=1==e.length?s:br(s,Cr(e,0,-1))))return!1;a=Kn(e),s=Rn(s)}return s[a]===t?t!==r||a in s:mr(t,s[a],r,!0)}}function $r(e){return function(t){return null==t?r:t[e]}}function Sr(e,t){for(var r=e?t.length:0;r--;){var n=t[r];if(n!=i&&$n(n)){var i=n;ft.call(e,n,1)}}return e}function Er(e,t){return e+bt(Et()*(t-e+1))}var wr=Bt?function(e,t){return Bt.set(e,t),e}:Lo;function Cr(e,t,i){var o=-1,s=e.length;(t=null==t?0:+t||0)<0&&(t=-t>s?0:s+t),(i=i===r||i>s?s:+i||0)<0&&(i+=s),s=t>i?0:i-t>>>0,t>>>=0;for(var a=n(s);++o<s;)a[o]=e[o+t];return a}function Ar(e,t){var r;return nr(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}function kr(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}function Tr(e,t,r){var n=dn(),i=-1;return t=Kt(t,function(e){return n(e)}),kr(yr(e,function(e){return{criteria:Kt(t,function(t){return t(e)}),index:++i,value:e}}),function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;++n<s;){var c=Oe(i[n],o[n]);if(c){if(n>=a)return c;var u=r[n];return c*("asc"===u||!0===u?1:-1)}}return e.index-t.index}(e,t,r)})}function Ir(e,t){var r=-1,n=bn(),i=e.length,o=n==xe,s=o&&i>=v,a=s?Kr():null,c=[];a?(n=Dt,o=!1):(s=!1,a=t?[]:c);e:for(;++r<i;){var u=e[r],f=t?t(u,r,e):u;if(o&&u==u){for(var l=a.length;l--;)if(a[l]===f)continue e;t&&a.push(f),c.push(u)}else n(a,f,0)<0&&((t||s)&&a.push(f),c.push(u))}return c}function Br(e,t){for(var r=-1,i=t.length,o=n(i);++r<i;)o[r]=e[t[r]];return o}function Pr(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?Cr(e,n?0:o,n?o+1:i):Cr(e,n?o+1:0,n?i:o)}function Rr(e,t){var r=e;r instanceof xt&&(r=r.value());for(var n=-1,i=t.length;++n<i;){var o=t[n];r=o.func.apply(o.thisArg,Gt([r],o.args))}return r}function Or(e,t,r){var n=0,i=e?e.length:n;if("number"==typeof t&&t==t&&i<=Tt){for(;n<i;){var o=n+i>>>1,s=e[o];(r?s<=t:s<t)&&null!==s?n=o+1:i=o}return i}return Nr(e,t,Lo,r)}function Nr(e,t,n,i){t=n(t);for(var o=0,s=e?e.length:0,a=t!=t,c=null===t,u=t===r;o<s;){var f=bt((o+s)/2),l=n(e[f]),d=l!==r,h=l==l;if(a)var p=h||i;else p=c?h&&d&&(i||null!=l):u?h&&(i||d):null!=l&&(i?l<=t:l<t);p?o=f+1:s=f}return _t(s,kt)}function xr(e,t,n){if("function"!=typeof e)return Lo;if(t===r)return e;switch(n){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)};case 5:return function(r,n,i,o,s){return e.call(t,r,n,i,o,s)}}return function(){return e.apply(t,arguments)}}function Lr(e){var t=new nt(e.byteLength);return new lt(t).set(new lt(e)),t}function Mr(e,t,r){for(var i=r.length,o=-1,s=vt(e.length-i,0),a=-1,c=t.length,u=n(c+s);++a<c;)u[a]=t[a];for(;++o<i;)u[r[o]]=e[o];for(;s--;)u[a++]=e[o++];return u}function Dr(e,t,r){for(var i=-1,o=r.length,s=-1,a=vt(e.length-o,0),c=-1,u=t.length,f=n(a+u);++s<a;)f[s]=e[s];for(var l=s;++c<u;)f[l+c]=t[c];for(;++i<o;)f[l+r[i]]=e[s++];return f}function Fr(e,t){return function(r,n,i){var o=t?t():{};if(n=dn(n,i,3),Gi(r))for(var s=-1,a=r.length;++s<a;){var c=r[s];e(o,c,n(c,s,r),r)}else nr(r,function(t,r,i){e(o,t,n(t,r,i),i)});return o}}function jr(e){return Ui(function(t,n){var i=-1,o=null==t?0:n.length,s=o>2?n[o-2]:r,a=o>2?n[2]:r,c=o>1?n[o-1]:r;for("function"==typeof s?(s=xr(s,c,5),o-=2):o-=(s="function"==typeof c?c:r)?1:0,a&&Sn(n[0],n[1],a)&&(s=o<3?r:s,o=1);++i<o;){var u=n[i];u&&e(t,u,s)}return t})}function Ur(e,t){return function(r,n){var i=r?mn(r):0;if(!Cn(i))return e(r,n);for(var o=t?i:-1,s=Rn(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function Hr(e){return function(t,r,n){for(var i=Rn(t),o=n(t),s=o.length,a=e?s:-1;e?a--:++a<s;){var c=o[a];if(!1===r(i[c],c,i))break}return t}}function Kr(e){return pt&&ct?new Mt(e):null}function Gr(e){return function(t){for(var r=-1,n=Oo(Co(t)),i=n.length,o="";++r<i;)o=e(o,n[r],r);return o}}function Vr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=er(e.prototype),n=e.apply(r,t);return Wi(n)?n:r}}function zr(e){return function t(n,i,o){o&&Sn(n,i,o)&&(i=r);var s=ln(n,e,r,r,r,r,r,i);return s.placeholder=t.placeholder,s}}function qr(e,t){return Ui(function(n){var i=n[0];return null==i?i:(n.push(t),e.apply(r,n))})}function Wr(e,t){return function(n,i,o){if(o&&Sn(n,i,o)&&(i=r),1==(i=dn(i,o,3)).length){var s=function(e,t,r,n){for(var i=-1,o=e.length,s=n,a=s;++i<o;){var c=e[i],u=+t(c);r(u,s)&&(s=u,a=c)}return a}(n=Gi(n)?n:Pn(n),i,e,t);if(!n.length||s!==t)return s}return function(e,t,r,n){var i=n,o=i;return nr(e,function(e,s,a){var c=+t(e,s,a);(r(c,i)||c===n&&c===o)&&(i=c,o=e)}),o}(n,i,e,t)}}function Jr(e,t){return function(n,i,o){if(i=dn(i,o,3),Gi(n)){var s=Ne(n,i,t);return s>-1?n[s]:r}return ar(n,i,e)}}function Xr(e){return function(t,r,n){return t&&t.length?Ne(t,r=dn(r,n,3),e):-1}}function Yr(e){return function(t,r,n){return ar(t,r=dn(r,n,3),e,!0)}}function Zr(e){return function(){for(var t,i=arguments.length,o=e?i:-1,s=0,a=n(i);e?o--:++o<i;){var c=a[s++]=arguments[o];if("function"!=typeof c)throw new ke(S);!t&&Nt.prototype.thru&&"wrapper"==pn(c)&&(t=new Nt([],!0))}for(o=t?-1:i;++o<i;){var f=pn(c=a[o]),d="wrapper"==f?hn(c):r;t=d&&wn(d[0])&&d[1]==(h|u|l|p)&&!d[4].length&&1==d[9]?t[pn(d[0])].apply(t,d[3]):1==c.length&&wn(c)?t[f]():t.thru(c)}return function(){var e=arguments,r=e[0];if(t&&1==e.length&&Gi(r)&&r.length>=v)return t.plant(r).value();for(var n=0,o=i?a[n].apply(this,e):r;++n<i;)o=a[n].call(this,o);return o}}}function Qr(e,t){return function(n,i,o){return"function"==typeof i&&o===r&&Gi(n)?e(n,i):t(n,xr(i,o,3))}}function en(e){return function(t,n,i){return"function"==typeof n&&i===r||(n=xr(n,i,3)),e(t,n,go)}}function tn(e){return function(t,n,i){return"function"==typeof n&&i===r||(n=xr(n,i,3)),e(t,n)}}function rn(e){return function(t,r,n){var i={};return r=dn(r,n,3),dr(t,function(t,n,o){var s=r(t,n,o);t=e?t:s,i[n=e?s:n]=t}),i}}function nn(e){return function(t,r,n){return t=Me(t),(e?t:"")+cn(t,r,n)+(e?"":t)}}function on(e){var t=Ui(function(n,i){var o=We(i,t.placeholder);return ln(n,e,r,i,o)});return t}function sn(e,t){return function(n,i,o,s){var a=arguments.length<3;return"function"==typeof i&&s===r&&Gi(n)?e(n,i,o,a):function(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r}(n,dn(i,s,4),o,a,t)}}function an(e,t,i,o,p,b,m,g,y,v){var _=t&h,$=t&s,S=t&a,E=t&u,w=t&c,C=t&f,A=S?r:Vr(e);return function c(){for(var u=arguments.length,f=u,h=n(u);f--;)h[f]=arguments[f];if(o&&(h=Mr(h,o,p)),b&&(h=Dr(h,b,m)),E||C){var k=c.placeholder,T=We(h,k);if((u-=T.length)<v){var I=g?Ft(g):r,B=vt(v-u,0);t|=E?l:d,t&=~(E?d:l),w||(t&=~(s|a));var P=[e,t,i,E?h:r,E?T:r,E?r:h,E?r:T,I,y,B],R=an.apply(r,P);return wn(e)&&In(R,P),R.placeholder=k,R}}var O=$?i:this,N=S?O[e]:e;return g&&(h=function(e,t){for(var n=e.length,i=_t(t.length,n),o=Ft(e);i--;){var s=t[i];e[i]=$n(s,n)?o[s]:r}return e}(h,g)),_&&y<h.length&&(h.length=y),this&&this!==Re&&this instanceof c&&(N=A||Vr(e)),N.apply(O,h)}}function cn(e,t,r){var n=e.length;if(n>=(t=+t)||!gt(t))return"";var i=t-n;return Io(r=null==r?" ":r+"",ht(i/r.length)).slice(0,i)}function un(e){var t=Se[e];return function(e,n){return(n=n===r?0:+n||0)?(n=st(10,n),t(e*n)/n):t(e)}}function fn(e){return function(t,r,n,i){var o=dn(n);return null==n&&o===Zt?Or(t,r,e):Nr(t,r,o(n,i,1),e)}}function ln(e,t,i,o,f,b,m,g){var y=t&a;if(!y&&"function"!=typeof e)throw new ke(S);var v=o?o.length:0;if(v||(t&=~(l|d),o=f=r),v-=f?f.length:0,t&d){var _=o,$=f;o=f=r}var w=y?r:hn(e),C=[e,t,i,o,f,_,$,b,m,g];if(w&&(function(e,t){var r=e[1],n=t[1],i=r|n,o=i<h,a=n==h&&r==u||n==h&&r==p&&e[7].length<=t[8]||n==(h|p)&&r==u;if(!o&&!a)return e;n&s&&(e[2]=t[2],i|=r&s?0:c);var f=t[3];if(f){var l=e[3];e[3]=l?Mr(l,f,t[4]):Ft(f),e[4]=l?We(e[3],E):Ft(t[4])}(f=t[5])&&(l=e[5],e[5]=l?Dr(l,f,t[6]):Ft(f),e[6]=l?We(e[5],E):Ft(t[6])),(f=t[7])&&(e[7]=Ft(f)),n&h&&(e[8]=null==e[8]?t[8]:_t(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(C,w),t=C[1],g=C[9]),C[9]=null==g?y?0:e.length:vt(g-v,0)||0,t==s)var A=function(e,t){var r=Vr(e);return function n(){return(this&&this!==Re&&this instanceof n?r:e).apply(t,arguments)}}(C[0],C[2]);else A=t!=l&&t!=(s|l)||C[4].length?an.apply(r,C):function(e,t,r,i){var o=t&s,a=Vr(e);return function t(){for(var s=-1,c=arguments.length,u=-1,f=i.length,l=n(f+c);++u<f;)l[u]=i[u];for(;c--;)l[u++]=arguments[++s];return(this&&this!==Re&&this instanceof t?a:e).apply(o?r:this,l)}}.apply(r,C);return(w?wr:In)(A,C)}function dn(e,t,r){var n=Rt.callback||xo;return n=n===xo?Zt:n,r?n(e,t,r):n}var hn=Bt?function(e){return Bt.get(e)}:Uo;function pn(e){for(var t=e.name,r=Pt[t],n=r?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function bn(e,t,r){var n=Rt.indexOf||Un;return n=n===Un?xe:n,e?n(e,t,r):n}var mn=$r("length");function gn(e){for(var t=$o(e),r=t.length;r--;)t[r][2]=An(t[r][1]);return t}function yn(e,t){var n=null==e?r:e[t];return Ji(n)?n:r}function vn(e,t,n){null==e||En(t,e)||(e=1==(t=On(t)).length?e:br(e,Cr(t,0,-1)),t=Kn(t));var i=null==e?e:e[t];return null==i?r:i.apply(e,n)}function _n(e){return null!=e&&Cn(mn(e))}function $n(e,t){return e="number"==typeof e||le.test(e)?+e:-1,t=null==t?It:t,e>-1&&e%1==0&&e<t}function Sn(e,t,r){if(!Wi(r))return!1;var n=typeof t;if("number"==n?_n(r)&&$n(t,r.length):"string"==n&&t in r){var i=r[t];return e==e?e===i:i!=i}return!1}function En(e,t){var r=typeof e;return!!("string"==r&&te.test(e)||"number"==r)||!Gi(e)&&(!ee.test(e)||null!=t&&e in Rn(t))}function wn(e){var t=pn(e);if(!(t in xt.prototype))return!1;var r=Rt[t];if(e===r)return!0;var n=hn(r);return!!n&&e===n[0]}function Cn(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=It}function An(e){return e==e&&!Wi(e)}function kn(e,t){e=Rn(e);for(var r=-1,n=t.length,i={};++r<n;){var o=t[r];o in e&&(i[o]=e[o])}return i}function Tn(e,t){var r={};return lr(e,function(e,n,i){t(e,n,i)&&(r[n]=e)}),r}var In=function(){var e=0,t=0;return function(r,n){var i=wi(),o=y-(i-t);if(t=i,o>0){if(++e>=g)return r}else e=0;return wr(r,n)}}();function Bn(e){for(var t=go(e),r=t.length,n=r&&e.length,i=!!n&&Cn(n)&&(Gi(e)||Ki(e)),o=-1,s=[];++o<r;){var a=t[o];(i&&$n(a,n)||qe.call(e,a))&&s.push(a)}return s}function Pn(e){return null==e?[]:_n(e)?Wi(e)?e:we(e):Eo(e)}function Rn(e){return Wi(e)?e:we(e)}function On(e){if(Gi(e))return e;var t=[];return Me(e).replace(re,function(e,r,n,i){t.push(n?i.replace(se,"$1"):r||e)}),t}function Nn(e){return e instanceof xt?e.clone():new Nt(e.__wrapped__,e.__chain__,Ft(e.__actions__))}var xn=Ui(function(e,t){return ze(e)&&_n(e)?rr(e,cr(t,!1,!0)):[]});function Ln(e,t,r){return e&&e.length?((r?Sn(e,t,r):null==t)&&(t=1),Cr(e,t<0?0:t)):[]}function Mn(e,t,r){var n=e?e.length:0;return n?((r?Sn(e,t,r):null==t)&&(t=1),Cr(e,0,(t=n-(+t||0))<0?0:t)):[]}var Dn=Xr(),Fn=Xr(!0);function jn(e){return e?e[0]:r}function Un(e,t,r){var n=e?e.length:0;if(!n)return-1;if("number"==typeof r)r=r<0?vt(n+r,0):r;else if(r){var i=Or(e,t);return i<n&&(t==t?t===e[i]:e[i]!=e[i])?i:-1}return xe(e,t,r||0)}var Hn=Ui(function(e){for(var t=e.length,r=t,i=n(l),o=bn(),s=o==xe,a=[];r--;){var c=e[r]=_n(c=e[r])?c:[];i[r]=s&&c.length>=120?Kr(r&&c):null}var u=e[0],f=-1,l=u?u.length:0,d=i[0];e:for(;++f<l;)if(c=u[f],(d?Dt(d,c):o(a,c,0))<0){for(r=t;--r;){var h=i[r];if((h?Dt(h,c):o(e[r],c,0))<0)continue e}d&&d.push(c),a.push(c)}return a});function Kn(e){var t=e?e.length:0;return t?e[t-1]:r}var Gn=Ui(function(e,t){var r=Xt(e,t=cr(t));return Sr(e,t.sort(Oe)),r});function Vn(e){return Ln(e,1)}var zn=fn(),qn=fn(!0);var Wn=Ui(function(e){return Ir(cr(e,!1,!0))});function Jn(e,t,n,i){if(!e||!e.length)return[];null!=t&&"boolean"!=typeof t&&(n=Sn(e,t,i=n)?r:t,t=!1);var o=dn();return null==n&&o===Zt||(n=o(n,i,3)),t&&bn()==xe?function(e,t){for(var r,n=-1,i=e.length,o=-1,s=[];++n<i;){var a=e[n],c=t?t(a,n,e):a;n&&r===c||(r=c,s[++o]=a)}return s}(e,n):Ir(e,n)}function Xn(e){if(!e||!e.length)return[];var t=-1,r=0;e=Ht(e,function(e){if(_n(e))return r=vt(e.length,r),!0});for(var i=n(r);++t<r;)i[t]=Kt(e,$r(t));return i}function Yn(e,t,n){if(!e||!e.length)return[];var i=Xn(e);return null==t?i:(t=xr(t,n,4),Kt(i,function(e){return Vt(e,t,r,!0)}))}var Zn=Ui(function(e,t){return _n(e)?rr(e,t):[]});var Qn=Ui(Xn);function ei(e,t){var r=-1,n=e?e.length:0,i={};for(!n||t||Gi(e[0])||(t=[]);++r<n;){var o=e[r];t?i[o]=t[r]:o&&(i[o[0]]=o[1])}return i}var ti=Ui(function(e){var t=e.length,n=t>2?e[t-2]:r,i=t>1?e[t-1]:r;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof i?(--t,i):r,i=r),e.length=t,Yn(e,n,i)});function ri(e){var t=Rt(e);return t.__chain__=!0,t}function ni(e,t,r){return t.call(r,e)}var ii=Ui(function(e){return e=cr(e),this.thru(function(t){return function(e,t){for(var r=-1,i=e.length,o=-1,s=t.length,a=n(i+s);++r<i;)a[r]=e[r];for(;++o<s;)a[r++]=t[o];return a}(Gi(t)?t:[Rn(t)],e)})});var oi=Ui(function(e,t){return Xt(e,cr(t))}),si=Fr(function(e,t,r){qe.call(e,r)?++e[r]:e[r]=1});function ai(e,t,n){var i=Gi(e)?Ut:or;return n&&Sn(e,t,n)&&(t=r),"function"==typeof t&&n===r||(t=dn(t,n,3)),i(e,t)}function ci(e,t,r){return(Gi(e)?Ht:sr)(e,t=dn(t,r,3))}var ui=Jr(nr),fi=Jr(ir,!0);var li=Qr(jt,nr),di=Qr(function(e,t){for(var r=e.length;r--&&!1!==t(e[r],r,e););return e},ir),hi=Fr(function(e,t,r){qe.call(e,r)?e[r].push(t):e[r]=[t]});function pi(e,t,r,n){var i=e?mn(e):0;return Cn(i)||(i=(e=Eo(e)).length),r="number"!=typeof r||n&&Sn(t,r,n)?0:r<0?vt(i+r,0):r||0,"string"==typeof e||!Gi(e)&&Qi(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&bn(e,t,r)>-1}var bi=Fr(function(e,t,r){e[r]=t}),mi=Ui(function(e,t,i){var o=-1,s="function"==typeof t,a=En(t),c=_n(e)?n(e.length):[];return nr(e,function(e){var n=s?t:a&&null!=e?e[t]:r;c[++o]=n?n.apply(e,i):vn(e,t,i)}),c});function gi(e,t,r){return(Gi(e)?Kt:yr)(e,t=dn(t,r,3))}var yi=Fr(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var vi=sn(Vt,nr),_i=sn(function(e,t,r,n){var i=e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r},ir);function $i(e,t,n){if(n?Sn(e,t,n):null==t)return(i=(e=Pn(e)).length)>0?e[Er(0,i-1)]:r;var i,o=-1,s=ro(e),a=(i=s.length)-1;for(t=_t(t<0?0:+t||0,i);++o<t;){var c=Er(o,a),u=s[c];s[c]=s[o],s[o]=u}return s.length=t,s}function Si(e,t,n){var i=Gi(e)?zt:Ar;return n&&Sn(e,t,n)&&(t=r),"function"==typeof t&&n===r||(t=dn(t,n,3)),i(e,t)}var Ei=Ui(function(e,t){if(null==e)return[];var r=t[2];return r&&Sn(t[0],t[1],r)&&(t.length=1),Tr(e,cr(t),[])});var wi=$t||function(){return(new i).getTime()};function Ci(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new ke(S);var i=e;e=t,t=i}return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Ai=Ui(function(e,t,r){var n=s;if(r.length){var i=We(r,Ai.placeholder);n|=l}return ln(e,n,t,r,i)}),ki=Ui(function(e,t){for(var r=-1,n=(t=t.length?cr(t):bo(e)).length;++r<n;){var i=t[r];e[i]=ln(e[i],s,e)}return e}),Ti=Ui(function(e,t,r){var n=s|a;if(r.length){var i=We(r,Ti.placeholder);n|=l}return ln(t,n,e,r,i)}),Ii=zr(u),Bi=zr(f);function Pi(e,t,n){var i,o,s,a,c,u,f,l=0,d=!1,h=!0;if("function"!=typeof e)throw new ke(S);if(t=t<0?0:+t||0,!0===n){var p=!0;h=!1}else Wi(n)&&(p=!!n.leading,d="maxWait"in n&&vt(+n.maxWait||0,t),h="trailing"in n?!!n.trailing:h);function b(t,n){n&&it(n),o=u=f=r,t&&(l=wi(),s=e.apply(c,i),u||o||(i=c=r))}function m(){var e=t-(wi()-a);e<=0||e>t?b(f,o):u=ut(m,e)}function g(){b(h,u)}function y(){if(i=arguments,a=wi(),c=this,f=h&&(u||!p),!1===d)var n=p&&!u;else{o||p||(l=a);var b=d-(a-l),y=b<=0||b>d;y?(o&&(o=it(o)),l=a,s=e.apply(c,i)):o||(o=ut(g,b))}return y&&u?u=it(u):u||t===d||(u=ut(m,t)),n&&(y=!0,s=e.apply(c,i)),!y||u||o||(i=c=r),s}return y.cancel=function(){u&&it(u),o&&it(o),l=0,o=u=f=r},y}var Ri=Ui(function(e,t){return tr(e,1,t)}),Oi=Ui(function(e,t,r){return tr(e,t,r)}),Ni=Zr(),xi=Zr(!0);function Li(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new ke(S);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new Li.Cache,r}var Mi=Ui(function(e,t){if(t=cr(t),"function"!=typeof e||!Ut(t,Le))throw new ke(S);var r=t.length;return Ui(function(n){for(var i=_t(n.length,r);i--;)n[i]=t[i](n[i]);return e.apply(this,n)})});var Di=on(l),Fi=on(d),ji=Ui(function(e,t){return ln(e,p,r,r,r,cr(t))});function Ui(e,t){if("function"!=typeof e)throw new ke(S);return t=vt(t===r?e.length-1:+t||0,0),function(){for(var r=arguments,i=-1,o=vt(r.length-t,0),s=n(o);++i<o;)s[i]=r[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,r[0],s);case 2:return e.call(this,r[0],r[1],s)}var a=n(t+1);for(i=-1;++i<t;)a[i]=r[i];return a[t]=s,e.apply(this,a)}}function Hi(e,t){return e>t}function Ki(e){return ze(e)&&_n(e)&&qe.call(e,"callee")&&!at.call(e,"callee")}var Gi=mt||function(e){return ze(e)&&Cn(e.length)&&et.call(e)==C};function Vi(e,t,n,i){var o=(n="function"==typeof n?xr(n,i,3):r)?n(e,t):r;return o===r?mr(e,t,n):!!o}function zi(e){return ze(e)&&"string"==typeof e.message&&et.call(e)==T}function qi(e){return Wi(e)&&et.call(e)==I}function Wi(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ji(e){return null!=e&&(qi(e)?rt.test(Pe.call(e)):ze(e)&&fe.test(e))}function Xi(e){return"number"==typeof e||ze(e)&&et.call(e)==B}function Yi(e){var t,n;return!(!ze(e)||et.call(e)!=P||Ki(e)||!(qe.call(e,"constructor")||"function"!=typeof(t=e.constructor)||t instanceof t))&&(lr(e,function(e,t){n=t}),n===r||qe.call(e,n))}function Zi(e){return Wi(e)&&et.call(e)==R}function Qi(e){return"string"==typeof e||ze(e)&&et.call(e)==O}function eo(e){return ze(e)&&Cn(e.length)&&!!ye[et.call(e)]}function to(e,t){return e<t}function ro(e){var t=e?mn(e):0;return Cn(t)?t?Ft(e):[]:Eo(e)}function no(e){return Yt(e,go(e))}var io=jr(function e(t,n,i,o,s){if(!Wi(t))return t;var a=_n(n)&&(Gi(n)||eo(n)),c=a?r:mo(n);return jt(c||n,function(u,f){if(c&&(u=n[f=u]),ze(u))o||(o=[]),s||(s=[]),function(e,t,n,i,o,s,a){for(var c=s.length,u=t[n];c--;)if(s[c]==u)return void(e[n]=a[c]);var f=e[n],l=o?o(f,u,n,e,t):r,d=l===r;d&&(l=u,_n(u)&&(Gi(u)||eo(u))?l=Gi(f)?f:_n(f)?Ft(f):[]:Yi(u)||Ki(u)?l=Ki(f)?no(f):Yi(f)?f:{}:d=!1),s.push(u),a.push(l),d?e[n]=i(l,u,o,s,a):(l==l?l!==f:f==f)&&(e[n]=l)}(t,n,f,e,i,o,s);else{var l=t[f],d=i?i(l,u,f,t,n):r,h=d===r;h&&(d=u),d===r&&(!a||f in t)||!h&&(d==d?d===l:l!=l)||(t[f]=d)}}),t}),oo=jr(function(e,t,r){return r?Wt(e,t,r):Jt(e,t)});var so=qr(oo,function(e,t){return e===r?t:e}),ao=qr(io,function e(t,n){return t===r?n:io(t,n,e)}),co=Yr(dr),uo=Yr(hr),fo=en(ur),lo=en(fr),ho=tn(dr),po=tn(hr);function bo(e){return pr(e,go(e))}var mo=yt?function(e){var t=null==e?r:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&_n(e)?Bn(e):Wi(e)?yt(e):[]}:Bn;function go(e){if(null==e)return[];Wi(e)||(e=we(e));var t=e.length;t=t&&Cn(t)&&(Gi(e)||Ki(e))&&t||0;for(var r=e.constructor,i=-1,o="function"==typeof r&&r.prototype===e,s=n(t),a=t>0;++i<t;)s[i]=i+"";for(var c in e)a&&$n(c,t)||"constructor"==c&&(o||!qe.call(e,c))||s.push(c);return s}var yo=rn(!0),vo=rn(),_o=Ui(function(e,t){if(null==e)return{};if("function"!=typeof t[0])return t=Kt(cr(t),Ae),kn(e,rr(go(e),t));var r=xr(t[0],t[1],3);return Tn(e,function(e,t,n){return!r(e,t,n)})});function $o(e){e=Rn(e);for(var t=-1,r=mo(e),i=r.length,o=n(i);++t<i;){var s=r[t];o[t]=[s,e[s]]}return o}var So=Ui(function(e,t){return null==e?{}:"function"==typeof t[0]?Tn(e,xr(t[0],t[1],3)):kn(e,cr(t))});function Eo(e){return Br(e,mo(e))}var wo=Gr(function(e,t,r){return t=t.toLowerCase(),e+(r?t.charAt(0).toUpperCase()+t.slice(1):t)});function Co(e){return(e=Me(e))&&e.replace(de,Ue).replace(oe,"")}var Ao=Gr(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()});var ko=nn(),To=nn(!0);function Io(e,t){var r="";if(e=Me(e),(t=+t)<1||!e||!gt(t))return r;do{t%2&&(r+=e),t=bt(t/2),e+=e}while(t);return r}var Bo=Gr(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),Po=Gr(function(e,t,r){return e+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});function Ro(e,t,r){var n=e;return(e=Me(e))?(r?Sn(n,t,r):null==t)?e.slice(Je(e),Xe(e)+1):(t+="",e.slice(De(e,t),Fe(e,t)+1)):e}function Oo(e,t,n){return n&&Sn(e,t,n)&&(t=r),(e=Me(e)).match(t||be)||[]}var No=Ui(function(e,t){try{return e.apply(r,t)}catch(e){return zi(e)?e:new _e(e)}});function xo(e,t,n){return n&&Sn(e,t,n)&&(t=r),ze(e)?Mo(e):Zt(e,t)}function Lo(e){return e}function Mo(e){return vr(Qt(e,!0))}var Do=Ui(function(e,t){return function(r){return vn(r,e,t)}}),Fo=Ui(function(e,t){return function(r){return vn(e,r,t)}});function jo(e,t,n){if(null==n){var i=Wi(t),o=i?mo(t):r,s=o&&o.length?pr(t,o):r;(s?s.length:i)||(s=!1,n=t,t=e,e=this)}s||(s=pr(t,mo(t)));var a=!0,c=-1,u=qi(e),f=s.length;!1===n?a=!1:Wi(n)&&"chain"in n&&(a=n.chain);for(;++c<f;){var l=s[c],d=t[l];e[l]=d,u&&(e.prototype[l]=function(t){return function(){var r=this.__chain__;if(a||r){var n=e(this.__wrapped__);return(n.__actions__=Ft(this.__actions__)).push({func:t,args:arguments,thisArg:e}),n.__chain__=r,n}return t.apply(e,Gt([this.value()],arguments))}}(d))}return e}function Uo(){}function Ho(e){return En(e)?$r(e):function(e){var t=e+"";return e=On(e),function(r){return br(r,e,t)}}(e)}var Ko=un("ceil"),Go=un("floor"),Vo=Wr(Hi,wt),zo=Wr(to,Ct),qo=un("round");return Rt.prototype=Ot.prototype,Nt.prototype=er(Ot.prototype),Nt.prototype.constructor=Nt,xt.prototype=er(Ot.prototype),xt.prototype.constructor=xt,Lt.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Lt.prototype.get=function(e){return"__proto__"==e?r:this.__data__[e]},Lt.prototype.has=function(e){return"__proto__"!=e&&qe.call(this.__data__,e)},Lt.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},Mt.prototype.push=function(e){var t=this.data;"string"==typeof e||Wi(e)?t.set.add(e):t.hash[e]=!0},Li.Cache=Lt,Rt.after=function(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new ke(S);var r=e;e=t,t=r}return e=gt(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}},Rt.ary=function(e,t,n){return n&&Sn(e,t,n)&&(t=r),t=e&&null==t?e.length:vt(+t||0,0),ln(e,h,r,r,r,r,t)},Rt.assign=oo,Rt.at=oi,Rt.before=Ci,Rt.bind=Ai,Rt.bindAll=ki,Rt.bindKey=Ti,Rt.callback=xo,Rt.chain=ri,Rt.chunk=function(e,t,r){t=(r?Sn(e,t,r):null==t)?1:vt(bt(t)||1,1);for(var i=0,o=e?e.length:0,s=-1,a=n(ht(o/t));i<o;)a[++s]=Cr(e,i,i+=t);return a},Rt.compact=function(e){for(var t=-1,r=e?e.length:0,n=-1,i=[];++t<r;){var o=e[t];o&&(i[++n]=o)}return i},Rt.constant=function(e){return function(){return e}},Rt.countBy=si,Rt.create=function(e,t,n){var i=er(e);return n&&Sn(e,t,n)&&(t=r),t?Jt(i,t):i},Rt.curry=Ii,Rt.curryRight=Bi,Rt.debounce=Pi,Rt.defaults=so,Rt.defaultsDeep=ao,Rt.defer=Ri,Rt.delay=Oi,Rt.difference=xn,Rt.drop=Ln,Rt.dropRight=Mn,Rt.dropRightWhile=function(e,t,r){return e&&e.length?Pr(e,dn(t,r,3),!0,!0):[]},Rt.dropWhile=function(e,t,r){return e&&e.length?Pr(e,dn(t,r,3),!0):[]},Rt.fill=function(e,t,n,i){var o=e?e.length:0;return o?(n&&"number"!=typeof n&&Sn(e,t,n)&&(n=0,i=o),function(e,t,n,i){var o=e.length;for((n=null==n?0:+n||0)<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:+i||0)<0&&(i+=o),o=n>i?0:i>>>0,n>>>=0;n<o;)e[n++]=t;return e}(e,t,n,i)):[]},Rt.filter=ci,Rt.flatten=function(e,t,r){var n=e?e.length:0;return r&&Sn(e,t,r)&&(t=!1),n?cr(e,t):[]},Rt.flattenDeep=function(e){return e&&e.length?cr(e,!0):[]},Rt.flow=Ni,Rt.flowRight=xi,Rt.forEach=li,Rt.forEachRight=di,Rt.forIn=fo,Rt.forInRight=lo,Rt.forOwn=ho,Rt.forOwnRight=po,Rt.functions=bo,Rt.groupBy=hi,Rt.indexBy=bi,Rt.initial=function(e){return Mn(e,1)},Rt.intersection=Hn,Rt.invert=function(e,t,n){n&&Sn(e,t,n)&&(t=r);for(var i=-1,o=mo(e),s=o.length,a={};++i<s;){var c=o[i],u=e[c];t?qe.call(a,u)?a[u].push(c):a[u]=[c]:a[u]=c}return a},Rt.invoke=mi,Rt.keys=mo,Rt.keysIn=go,Rt.map=gi,Rt.mapKeys=yo,Rt.mapValues=vo,Rt.matches=Mo,Rt.matchesProperty=function(e,t){return _r(e,Qt(t,!0))},Rt.memoize=Li,Rt.merge=io,Rt.method=Do,Rt.methodOf=Fo,Rt.mixin=jo,Rt.modArgs=Mi,Rt.negate=function(e){if("function"!=typeof e)throw new ke(S);return function(){return!e.apply(this,arguments)}},Rt.omit=_o,Rt.once=function(e){return Ci(2,e)},Rt.pairs=$o,Rt.partial=Di,Rt.partialRight=Fi,Rt.partition=yi,Rt.pick=So,Rt.pluck=function(e,t){return gi(e,Ho(t))},Rt.property=Ho,Rt.propertyOf=function(e){return function(t){return br(e,On(t),t+"")}},Rt.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var r=0,n=bn(),i=e.length;++r<i;)for(var o=0,s=e[r];(o=n(t,s,o))>-1;)ft.call(t,o,1);return t},Rt.pullAt=Gn,Rt.range=function(e,t,i){i&&Sn(e,t,i)&&(t=i=r),e=+e||0,null==t?(t=e,e=0):t=+t||0;for(var o=-1,s=vt(ht((t-e)/((i=null==i?1:+i||0)||1)),0),a=n(s);++o<s;)a[o]=e,e+=i;return a},Rt.rearg=ji,Rt.reject=function(e,t,r){var n=Gi(e)?Ht:sr;return t=dn(t,r,3),n(e,function(e,r,n){return!t(e,r,n)})},Rt.remove=function(e,t,r){var n=[];if(!e||!e.length)return n;var i=-1,o=[],s=e.length;for(t=dn(t,r,3);++i<s;){var a=e[i];t(a,i,e)&&(n.push(a),o.push(i))}return Sr(e,o),n},Rt.rest=Vn,Rt.restParam=Ui,Rt.set=function(e,t,r){if(null==e)return e;for(var n=t+"",i=-1,o=(t=null!=e[n]||En(t,e)?[n]:On(t)).length,s=o-1,a=e;null!=a&&++i<o;){var c=t[i];Wi(a)&&(i==s?a[c]=r:null==a[c]&&(a[c]=$n(t[i+1])?[]:{})),a=a[c]}return e},Rt.shuffle=function(e){return $i(e,Ct)},Rt.slice=function(e,t,r){var n=e?e.length:0;return n?(r&&"number"!=typeof r&&Sn(e,t,r)&&(t=0,r=n),Cr(e,t,r)):[]},Rt.sortBy=function(e,t,n){if(null==e)return[];n&&Sn(e,t,n)&&(t=r);var i=-1;return t=dn(t,n,3),kr(yr(e,function(e,r,n){return{criteria:t(e,r,n),index:++i,value:e}}),je)},Rt.sortByAll=Ei,Rt.sortByOrder=function(e,t,n,i){return null==e?[]:(i&&Sn(t,n,i)&&(n=r),Gi(t)||(t=null==t?[]:[t]),Gi(n)||(n=null==n?[]:[n]),Tr(e,t,n))},Rt.spread=function(e){if("function"!=typeof e)throw new ke(S);return function(t){return e.apply(this,t)}},Rt.take=function(e,t,r){return e&&e.length?((r?Sn(e,t,r):null==t)&&(t=1),Cr(e,0,t<0?0:t)):[]},Rt.takeRight=function(e,t,r){var n=e?e.length:0;return n?((r?Sn(e,t,r):null==t)&&(t=1),Cr(e,(t=n-(+t||0))<0?0:t)):[]},Rt.takeRightWhile=function(e,t,r){return e&&e.length?Pr(e,dn(t,r,3),!1,!0):[]},Rt.takeWhile=function(e,t,r){return e&&e.length?Pr(e,dn(t,r,3)):[]},Rt.tap=function(e,t,r){return t.call(r,e),e},Rt.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new ke(S);return!1===r?n=!1:Wi(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Pi(e,t,{leading:n,maxWait:+t,trailing:i})},Rt.thru=ni,Rt.times=function(e,t,r){if((e=bt(e))<1||!gt(e))return[];var i=-1,o=n(_t(e,At));for(t=xr(t,r,1);++i<e;)i<At?o[i]=t(i):t(i);return o},Rt.toArray=ro,Rt.toPlainObject=no,Rt.transform=function(e,t,n,i){var o=Gi(e)||eo(e);if(t=dn(t,i,4),null==n)if(o||Wi(e)){var s=e.constructor;n=o?Gi(e)?new s:[]:er(qi(s)?s.prototype:r)}else n={};return(o?jt:dr)(e,function(e,r,i){return t(n,e,r,i)}),n},Rt.union=Wn,Rt.uniq=Jn,Rt.unzip=Xn,Rt.unzipWith=Yn,Rt.values=Eo,Rt.valuesIn=function(e){return Br(e,go(e))},Rt.where=function(e,t){return ci(e,vr(t))},Rt.without=Zn,Rt.wrap=function(e,t){return ln(t=null==t?Lo:t,l,r,[e],[])},Rt.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var r=arguments[e];if(_n(r))var n=n?Gt(rr(n,r),rr(r,n)):r}return n?Ir(n):[]},Rt.zip=Qn,Rt.zipObject=ei,Rt.zipWith=ti,Rt.backflow=xi,Rt.collect=gi,Rt.compose=xi,Rt.each=li,Rt.eachRight=di,Rt.extend=oo,Rt.iteratee=xo,Rt.methods=bo,Rt.object=ei,Rt.select=ci,Rt.tail=Vn,Rt.unique=Jn,jo(Rt,Rt),Rt.add=function(e,t){return(+e||0)+(+t||0)},Rt.attempt=No,Rt.camelCase=wo,Rt.capitalize=function(e){return(e=Me(e))&&e.charAt(0).toUpperCase()+e.slice(1)},Rt.ceil=Ko,Rt.clone=function(e,t,r,n){return t&&"boolean"!=typeof t&&Sn(e,t,r)?t=!1:"function"==typeof t&&(n=r,r=t,t=!1),"function"==typeof r?Qt(e,t,xr(r,n,1)):Qt(e,t)},Rt.cloneDeep=function(e,t,r){return"function"==typeof t?Qt(e,!0,xr(t,r,1)):Qt(e,!0)},Rt.deburr=Co,Rt.endsWith=function(e,t,n){t+="";var i=(e=Me(e)).length;return n=n===r?i:_t(n<0?0:+n||0,i),(n-=t.length)>=0&&e.indexOf(t,n)==n},Rt.escape=function(e){return(e=Me(e))&&X.test(e)?e.replace(W,He):e},Rt.escapeRegExp=function(e){return(e=Me(e))&&ie.test(e)?e.replace(ne,Ke):e||"(?:)"},Rt.every=ai,Rt.find=ui,Rt.findIndex=Dn,Rt.findKey=co,Rt.findLast=fi,Rt.findLastIndex=Fn,Rt.findLastKey=uo,Rt.findWhere=function(e,t){return ui(e,vr(t))},Rt.first=jn,Rt.floor=Go,Rt.get=function(e,t,n){var i=null==e?r:br(e,On(t),t+"");return i===r?n:i},Rt.gt=Hi,Rt.gte=function(e,t){return e>=t},Rt.has=function(e,t){if(null==e)return!1;var r=qe.call(e,t);if(!r&&!En(t)){if(null==(e=1==(t=On(t)).length?e:br(e,Cr(t,0,-1))))return!1;t=Kn(t),r=qe.call(e,t)}return r||Cn(e.length)&&$n(t,e.length)&&(Gi(e)||Ki(e))},Rt.identity=Lo,Rt.includes=pi,Rt.indexOf=Un,Rt.inRange=function(e,t,n){return t=+t||0,n===r?(n=t,t=0):n=+n||0,e>=_t(t,n)&&e<vt(t,n)},Rt.isArguments=Ki,Rt.isArray=Gi,Rt.isBoolean=function(e){return!0===e||!1===e||ze(e)&&et.call(e)==A},Rt.isDate=function(e){return ze(e)&&et.call(e)==k},Rt.isElement=function(e){return!!e&&1===e.nodeType&&ze(e)&&!Yi(e)},Rt.isEmpty=function(e){return null==e||(_n(e)&&(Gi(e)||Qi(e)||Ki(e)||ze(e)&&qi(e.splice))?!e.length:!mo(e).length)},Rt.isEqual=Vi,Rt.isError=zi,Rt.isFinite=function(e){return"number"==typeof e&&gt(e)},Rt.isFunction=qi,Rt.isMatch=function(e,t,n,i){return n="function"==typeof n?xr(n,i,3):r,gr(e,gn(t),n)},Rt.isNaN=function(e){return Xi(e)&&e!=+e},Rt.isNative=Ji,Rt.isNull=function(e){return null===e},Rt.isNumber=Xi,Rt.isObject=Wi,Rt.isPlainObject=Yi,Rt.isRegExp=Zi,Rt.isString=Qi,Rt.isTypedArray=eo,Rt.isUndefined=function(e){return e===r},Rt.kebabCase=Ao,Rt.last=Kn,Rt.lastIndexOf=function(e,t,r){var n=e?e.length:0;if(!n)return-1;var i=n;if("number"==typeof r)i=(r<0?vt(n+r,0):_t(r||0,n-1))+1;else if(r){var o=e[i=Or(e,t,!0)-1];return(t==t?t===o:o!=o)?i:-1}if(t!=t)return Ve(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},Rt.lt=to,Rt.lte=function(e,t){return e<=t},Rt.max=Vo,Rt.min=zo,Rt.noConflict=function(){return Re._=tt,this},Rt.noop=Uo,Rt.now=wi,Rt.pad=function(e,t,r){t=+t;var n=(e=Me(e)).length;if(n>=t||!gt(t))return e;var i=(t-n)/2,o=bt(i);return(r=cn("",ht(i),r)).slice(0,o)+e+r},Rt.padLeft=ko,Rt.padRight=To,Rt.parseInt=function(e,t,r){return(r?Sn(e,t,r):null==t)?t=0:t&&(t=+t),e=Ro(e),St(e,t||(ue.test(e)?16:10))},Rt.random=function(e,t,n){n&&Sn(e,t,n)&&(t=n=r);var i=null==e,o=null==t;if(null==n&&(o&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,o=!0)),i&&o&&(t=1,o=!1),e=+e||0,o?(t=e,e=0):t=+t||0,n||e%1||t%1){var s=Et();return _t(e+s*(t-e+ot("1e-"+((s+"").length-1))),t)}return Er(e,t)},Rt.reduce=vi,Rt.reduceRight=_i,Rt.repeat=Io,Rt.result=function(e,t,n){var i=null==e?r:e[t];return i===r&&(null==e||En(t,e)||(i=null==(e=1==(t=On(t)).length?e:br(e,Cr(t,0,-1)))?r:e[Kn(t)]),i=i===r?n:i),qi(i)?i.call(e):i},Rt.round=qo,Rt.runInContext=e,Rt.size=function(e){var t=e?mn(e):0;return Cn(t)?t:mo(e).length},Rt.snakeCase=Bo,Rt.some=Si,Rt.sortedIndex=zn,Rt.sortedLastIndex=qn,Rt.startCase=Po,Rt.startsWith=function(e,t,r){return e=Me(e),r=null==r?0:_t(r<0?0:+r||0,e.length),e.lastIndexOf(t,r)==r},Rt.sum=function(e,t,n){return n&&Sn(e,t,n)&&(t=r),1==(t=dn(t,n,3)).length?function(e,t){for(var r=e.length,n=0;r--;)n+=+t(e[r])||0;return n}(Gi(e)?e:Pn(e),t):function(e,t){var r=0;return nr(e,function(e,n,i){r+=+t(e,n,i)||0}),r}(e,t)},Rt.template=function(e,t,n){var i=Rt.templateSettings;n&&Sn(e,t,n)&&(t=n=r),e=Me(e),t=Wt(Jt({},n||t),i,qt);var o,s,a=Wt(Jt({},t.imports),i.imports,qt),c=mo(a),u=Br(a,c),f=0,l=t.interpolate||he,d="__p += '",h=Ce((t.escape||he).source+"|"+l.source+"|"+(l===Q?ae:he).source+"|"+(t.evaluate||he).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++ge+"]")+"\n";e.replace(h,function(t,r,n,i,a,c){return n||(n=i),d+=e.slice(f,c).replace(pe,Ge),r&&(o=!0,d+="' +\n__e("+r+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),f=c+t.length,t}),d+="';\n";var b=t.variable;b||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(G,""):d).replace(V,"$1").replace(z,"$1;"),d="function("+(b||"obj")+") {\n"+(b?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=No(function(){return $e(c,p+"return "+d).apply(r,u)});if(m.source=d,zi(m))throw m;return m},Rt.trim=Ro,Rt.trimLeft=function(e,t,r){var n=e;return(e=Me(e))?(r?Sn(n,t,r):null==t)?e.slice(Je(e)):e.slice(De(e,t+"")):e},Rt.trimRight=function(e,t,r){var n=e;return(e=Me(e))?(r?Sn(n,t,r):null==t)?e.slice(0,Xe(e)+1):e.slice(0,Fe(e,t+"")+1):e},Rt.trunc=function(e,t,n){n&&Sn(e,t,n)&&(t=r);var i=b,o=m;if(null!=t)if(Wi(t)){var s="separator"in t?t.separator:s;i="length"in t?+t.length||0:i,o="omission"in t?Me(t.omission):o}else i=+t||0;if(i>=(e=Me(e)).length)return e;var a=i-o.length;if(a<1)return o;var c=e.slice(0,a);if(null==s)return c+o;if(Zi(s)){if(e.slice(a).search(s)){var u,f,l=e.slice(0,a);for(s.global||(s=Ce(s.source,(ce.exec(s)||"")+"g")),s.lastIndex=0;u=s.exec(l);)f=u.index;c=c.slice(0,null==f?a:f)}}else if(e.indexOf(s,a)!=a){var d=c.lastIndexOf(s);d>-1&&(c=c.slice(0,d))}return c+o},Rt.unescape=function(e){return(e=Me(e))&&J.test(e)?e.replace(q,Ye):e},Rt.uniqueId=function(e){var t=++Qe;return Me(e)+t},Rt.words=Oo,Rt.all=ai,Rt.any=Si,Rt.contains=pi,Rt.eq=Vi,Rt.detect=ui,Rt.foldl=vi,Rt.foldr=_i,Rt.head=jn,Rt.include=pi,Rt.inject=vi,jo(Rt,function(){var e={};return dr(Rt,function(t,r){Rt.prototype[r]||(e[r]=t)}),e}(),!1),Rt.sample=$i,Rt.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return $i(t,e)}):$i(this.value())},Rt.VERSION=o,jt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Rt[e].placeholder=Rt}),jt(["drop","take"],function(e,t){xt.prototype[e]=function(r){var n=this.__filtered__;if(n&&!t)return new xt(this);r=null==r?1:vt(bt(r)||0,0);var i=this.clone();return n?i.__takeCount__=_t(i.__takeCount__,r):i.__views__.push({size:r,type:e+(i.__dir__<0?"Right":"")}),i},xt.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),jt(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r!=$;xt.prototype[e]=function(e,t){var i=this.clone();return i.__iteratees__.push({iteratee:dn(e,t,1),type:r}),i.__filtered__=i.__filtered__||n,i}}),jt(["first","last"],function(e,t){var r="take"+(t?"Right":"");xt.prototype[e]=function(){return this[r](1).value()[0]}}),jt(["initial","rest"],function(e,t){var r="drop"+(t?"":"Right");xt.prototype[e]=function(){return this.__filtered__?new xt(this):this[r](1)}}),jt(["pluck","where"],function(e,t){var r=t?"filter":"map",n=t?vr:Ho;xt.prototype[e]=function(e){return this[r](n(e))}}),xt.prototype.compact=function(){return this.filter(Lo)},xt.prototype.reject=function(e,t){return e=dn(e,t,1),this.filter(function(t){return!e(t)})},xt.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||t<0)?new xt(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=+t||0)<0?n.dropRight(-t):n.take(t-e)),n)},xt.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},xt.prototype.toArray=function(){return this.take(Ct)},dr(xt.prototype,function(e,t){var n=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t),o=Rt[i?"take"+("last"==t?"Right":""):t];o&&(Rt.prototype[t]=function(){var t=i?[1]:arguments,s=this.__chain__,a=this.__wrapped__,c=!!this.__actions__.length,u=a instanceof xt,f=t[0],l=u||Gi(a);l&&n&&"function"==typeof f&&1!=f.length&&(u=l=!1);var d=function(e){return i&&s?o(e,1)[0]:o.apply(r,Gt([e],t))},h={func:ni,args:[d],thisArg:r},p=u&&!c;if(i&&!s)return p?((a=a.clone()).__actions__.push(h),e.call(a)):o.call(r,this.value())[0];if(!i&&l){a=p?a:new xt(this);var b=e.apply(a,t);return b.__actions__.push(h),new Nt(b,s)}return this.thru(d)})}),jt(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?Be:Te)[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:join|pop|replace|shift)$/.test(e);Rt.prototype[e]=function(){var e=arguments;return n&&!this.__chain__?t.apply(this.value(),e):this[r](function(r){return t.apply(r,e)})}}),dr(xt.prototype,function(e,t){var r=Rt[t];if(r){var n=r.name;(Pt[n]||(Pt[n]=[])).push({name:t,func:r})}}),Pt[an(r,a).name]=[{name:"wrapper",func:r}],xt.prototype.clone=function(){var e=new xt(this.__wrapped__);return e.__actions__=Ft(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ft(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ft(this.__views__),e},xt.prototype.reverse=function(){if(this.__filtered__){var e=new xt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},xt.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Gi(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=_t(t,e+s);break;case"takeRight":e=vt(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=n?a:s-1,f=this.__iteratees__,l=f.length,d=0,h=_t(c,this.__takeCount__);if(!r||i<v||i==c&&h==c)return Rr(n&&r?e.reverse():e,this.__actions__);var p=[];e:for(;c--&&d<h;){for(var b=-1,m=e[u+=t];++b<l;){var g=f[b],y=g.iteratee,S=g.type,E=y(m);if(S==$)m=E;else if(!E){if(S==_)continue e;break e}}p[d++]=m}return p},Rt.prototype.chain=function(){return ri(this)},Rt.prototype.commit=function(){return new Nt(this.value(),this.__chain__)},Rt.prototype.concat=ii,Rt.prototype.plant=function(e){for(var t,r=this;r instanceof Ot;){var n=Nn(r);t?i.__wrapped__=n:t=n;var i=n;r=r.__wrapped__}return i.__wrapped__=e,t},Rt.prototype.reverse=function(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof xt){var n=e;return this.__actions__.length&&(n=new xt(this)),(n=n.reverse()).__actions__.push({func:ni,args:[t],thisArg:r}),new Nt(n,this.__chain__)}return this.thru(t)},Rt.prototype.toString=function(){return this.value()+""},Rt.prototype.run=Rt.prototype.toJSON=Rt.prototype.valueOf=Rt.prototype.value=function(){return Rr(this.__wrapped__,this.__actions__)},Rt.prototype.collect=Rt.prototype.map,Rt.prototype.head=Rt.prototype.first,Rt.prototype.select=Rt.prototype.filter,Rt.prototype.tail=Rt.prototype.rest,Rt}();Ae&&ke?Pe?(ke.exports=Ze)._=Ze:Ae._=Ze:Re._=Ze}).call(commonjsGlobal)}),docsURL="http://bitcore.io/",spec$1=[{name:"InvalidB58Char",message:"Invalid Base58 character: {0} in {1}"},{name:"InvalidB58Checksum",message:"Invalid Base58 checksum for {0}"},{name:"InvalidNetwork",message:"Invalid version for network: got {0}"},{name:"InvalidState",message:"Invalid state: {0}"},{name:"NotImplemented",message:"Function {0} was not implemented yet"},{name:"InvalidNetworkArgument",message:'Invalid network: must be "livenet" or "testnet", got {0}'},{name:"InvalidArgument",message:function(){return"Invalid Argument"+(arguments[0]?": "+arguments[0]:"")+(arguments[1]?" Documentation: "+docsURL+arguments[1]:"")}},{name:"AbstractMethodInvoked",message:"Abstract Method Invocation: {0}"},{name:"InvalidArgumentType",message:function(){return"Invalid Argument for "+arguments[2]+", expected "+arguments[1]+" but got "+typeof arguments[0]}},{name:"Unit",message:"Internal Error on Unit {0}",errors:[{name:"UnknownCode",message:"Unrecognized unit code: {0}"},{name:"InvalidRate",message:"Invalid exchange rate: {0}"}]},{name:"Transaction",message:"Internal Error on Transaction {0}",errors:[{name:"Input",message:"Internal Error on Input {0}",errors:[{name:"MissingScript",message:"Need a script to create an input"},{name:"UnsupportedScript",message:"Unsupported input script type: {0}"},{name:"MissingPreviousOutput",message:"No previous output information."}]},{name:"NeedMoreInfo",message:"{0}"},{name:"InvalidSorting",message:"The sorting function provided did not return the change output as one of the array elements"},{name:"InvalidOutputAmountSum",message:"{0}"},{name:"MissingSignatures",message:"Some inputs have not been fully signed"},{name:"InvalidIndex",message:"Invalid index: {0} is not between 0, {1}"},{name:"UnableToVerifySignature",message:"Unable to verify signature: {0}"},{name:"DustOutputs",message:"Dust amount detected in one output"},{name:"InvalidSatoshis",message:"Output satoshis are invalid"},{name:"FeeError",message:"Internal Error on Fee {0}",errors:[{name:"TooSmall",message:"Fee is too small: {0}"},{name:"TooLarge",message:"Fee is too large: {0}"},{name:"Different",message:"Unspent value is different from specified fee: {0}"}]},{name:"ChangeAddressMissing",message:"Change address is missing"},{name:"BlockHeightTooHigh",message:"Block Height can be at most 2^32 -1"},{name:"NLockTimeOutOfRange",message:"Block Height can only be between 0 and 499 999 999"},{name:"LockTimeTooEarly",message:"Lock Time can't be earlier than UNIX date 500 000 000"}]},{name:"Script",message:"Internal Error on Script {0}",errors:[{name:"UnrecognizedAddress",message:"Expected argument {0} to be an address"},{name:"CantDeriveAddress",message:"Can't derive address associated with script {0}, needs to be p2pkh in, p2pkh out, p2sh in, or p2sh out."},{name:"InvalidBuffer",message:"Invalid script buffer: can't parse valid script from given buffer {0}"}]},{name:"HDPrivateKey",message:"Internal Error on HDPrivateKey {0}",errors:[{name:"InvalidDerivationArgument",message:"Invalid derivation argument {0}, expected string, or number and boolean"},{name:"InvalidEntropyArgument",message:"Invalid entropy: must be an hexa string or binary buffer, got {0}",errors:[{name:"TooMuchEntropy",message:'Invalid entropy: more than 512 bits is non standard, got "{0}"'},{name:"NotEnoughEntropy",message:'Invalid entropy: at least 128 bits needed, got "{0}"'}]},{name:"InvalidLength",message:"Invalid length for xprivkey string in {0}"},{name:"InvalidPath",message:"Invalid derivation path: {0}"},{name:"UnrecognizedArgument",message:'Invalid argument: creating a HDPrivateKey requires a string, buffer, json or object, got "{0}"'}]},{name:"HDPublicKey",message:"Internal Error on HDPublicKey {0}",errors:[{name:"ArgumentIsPrivateExtended",message:"Argument is an extended private key: {0}"},{name:"InvalidDerivationArgument",message:"Invalid derivation argument: got {0}"},{name:"InvalidLength",message:'Invalid length for xpubkey: got "{0}"'},{name:"InvalidPath",message:'Invalid derivation path, it should look like: "m/1/100", got "{0}"'},{name:"InvalidIndexCantDeriveHardened",message:"Invalid argument: creating a hardened path requires an HDPrivateKey"},{name:"MustSupplyArgument",message:"Must supply an argument to create a HDPublicKey"},{name:"UnrecognizedArgument",message:"Invalid argument for creation, must be string, json, buffer, or object"}]}];function format$6(e,t){return e.replace("{0}",t[0]).replace("{1}",t[1]).replace("{2}",t[2])}var traverseNode=function(e,t){var r=function(){if(lodash$1.isString(t.message))this.message=format$6(t.message,arguments);else{if(!lodash$1.isFunction(t.message))throw new Error("Invalid error definition for "+t.name);this.message=t.message.apply(null,arguments)}this.stack=this.message+"\n"+(new Error).stack};return(r.prototype=Object.create(e.prototype)).name=e.prototype.name+t.name,e[t.name]=r,t.errors&&childDefinitions(r,t.errors),r},childDefinitions=function(e,t){lodash$1.each(t,function(t){traverseNode(e,t)})},traverseRoot=function(e,t){return childDefinitions(e,t),e},bitcore={Error:function(){this.message="Internal error",this.stack=this.message+"\n"+(new Error).stack}};bitcore.Error.prototype=Object.create(Error.prototype),bitcore.Error.prototype.name="bitcore.Error",traverseRoot(bitcore.Error,spec$1);var errors$g=bitcore.Error,extend$2=function(e){return traverseNode(bitcore.Error,e)};errors$g.extend=extend$2;var isHexa=function(e){return!!lodash$1.isString(e)&&/^[0-9a-fA-F]+$/.test(e)},js$2={isValidJSON:function(e){var t;if(!lodash$1.isString(e))return!1;try{t=JSON.parse(e)}catch(e){return!1}return"object"==typeof t},isHexa:isHexa,isHexaString:isHexa,cloneArray:function(e){return[].concat(e)},defineImmutable:function(e,t){return Object.keys(t).forEach(function(r){Object.defineProperty(e,r,{configurable:!1,enumerable:!0,value:t[r]})}),e},isNaturalNumber:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&e>=0}},buffer_1=createCommonjsModule(function(e){function t(e,t){if(e.length!==t.length)return!1;for(var r=e.length,n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}e.exports={fill:function(e,t){preconditions.checkArgumentType(e,"Buffer","buffer"),preconditions.checkArgumentType(t,"number","value");for(var r=e.length,n=0;n<r;n++)e[n]=t;return e},copy:function(e){var t=new Buffer(e.length);return e.copy(t),t},isBuffer:function(e){return buffer$1.Buffer.isBuffer(e)||e instanceof Uint8Array},emptyBuffer:function(e){preconditions.checkArgumentType(e,"number","bytes");for(var t=new buffer$1.Buffer(e),r=0;r<e;r++)t.write("\0",r);return t},concat:buffer$1.Buffer.concat,equals:t,equal:t,integerAsSingleByteBuffer:function(e){return preconditions.checkArgumentType(e,"number","integer"),new buffer$1.Buffer([255&e])},integerAsBuffer:function(e){preconditions.checkArgumentType(e,"number","integer");var t=[];return t.push(e>>24&255),t.push(e>>16&255),t.push(e>>8&255),t.push(255&e),new Buffer(t)},integerFromBuffer:function(e){return preconditions.checkArgumentType(e,"Buffer","buffer"),e[0]<<24|e[1]<<16|e[2]<<8|e[3]},integerFromSingleByteBuffer:function(e){return preconditions.checkArgumentType(e,"Buffer","buffer"),e[0]},bufferToHex:function(e){return preconditions.checkArgumentType(e,"Buffer","buffer"),e.toString("hex")},reverse:function(e){for(var t=new buffer$1.Buffer(e.length),r=0;r<e.length;r++)t[r]=e[e.length-r-1];return t},hexToBuffer:function(e){return assert$t(js$2.isHexa(e)),new buffer$1.Buffer(e,"hex")}},e.exports.NULL_HASH=e.exports.fill(new Buffer(32),0),e.exports.EMPTY_BUFFER=new Buffer(0)}),buffer_2=buffer_1.fill,buffer_3=buffer_1.copy,buffer_4=buffer_1.isBuffer,buffer_5=buffer_1.emptyBuffer,buffer_6=buffer_1.concat,buffer_7=buffer_1.equals,buffer_8=buffer_1.equal,buffer_9=buffer_1.integerAsSingleByteBuffer,buffer_10=buffer_1.integerAsBuffer,buffer_11=buffer_1.integerFromBuffer,buffer_12=buffer_1.integerFromSingleByteBuffer,buffer_13=buffer_1.bufferToHex,buffer_14=buffer_1.reverse,buffer_15=buffer_1.hexToBuffer,buffer_16=buffer_1.NULL_HASH,buffer_17=buffer_1.EMPTY_BUFFER,preconditions={checkState:function(e,t){if(!e)throw new errors$g.InvalidState(t)},checkArgument:function(e,t,r,n){if(!e)throw new errors$g.InvalidArgument(t,r,n)},checkArgumentType:function(e,t,r){if(r=r||"(unknown name)",lodash$1.isString(t)){if("Buffer"===t){if(!buffer_1.isBuffer(e))throw new errors$g.InvalidArgumentType(e,t,r)}else if(typeof e!==t)throw new errors$g.InvalidArgumentType(e,t,r)}else if(!(e instanceof t))throw new errors$g.InvalidArgumentType(e,t.name,r)}},reversebuf=function(e){for(var t=new Buffer(e.length),r=0;r<e.length;r++)t[r]=e[e.length-1-r];return t};bn$1.Zero=new bn$1(0),bn$1.One=new bn$1(1),bn$1.Minus1=new bn$1(-1),bn$1.fromNumber=function(e){return preconditions.checkArgument(lodash$1.isNumber(e)),new bn$1(e)},bn$1.fromString=function(e,t){return preconditions.checkArgument(lodash$1.isString(e)),new bn$1(e,t)},bn$1.fromBuffer=function(e,t){void 0!==t&&"little"===t.endian&&(e=reversebuf(e));var r=e.toString("hex");return new bn$1(r,16)},bn$1.fromSM=function(e,t){var r;if(0===e.length)return bn$1.fromBuffer(new Buffer([0]));var n="big";return t&&(n=t.endian),"little"===n&&(e=reversebuf(e)),128&e[0]?(e[0]=127&e[0],(r=bn$1.fromBuffer(e)).neg().copy(r)):r=bn$1.fromBuffer(e),r},bn$1.prototype.toNumber=function(){return parseInt(this.toString(10),10)},bn$1.prototype.toBuffer=function(e){var t,r;if(e&&e.size){var n=(r=this.toString(16,2)).length/2;t=new Buffer(r,"hex"),n===e.size?t=t:n>e.size?t=bn$1.trim(t,n):n<e.size&&(t=bn$1.pad(t,n,e.size))}else r=this.toString(16,2),t=new Buffer(r,"hex");return void 0!==e&&"little"===e.endian&&(t=reversebuf(t)),t},bn$1.prototype.toSMBigEndian=function(){var e;return-1===this.cmp(bn$1.Zero)?128&(e=this.neg().toBuffer())[0]?e=Buffer.concat([new Buffer([128]),e]):e[0]=128|e[0]:128&(e=this.toBuffer())[0]&&(e=Buffer.concat([new Buffer([0]),e])),1===e.length&0===e[0]&&(e=new Buffer([])),e},bn$1.prototype.toSM=function(e){var t=e?e.endian:"big",r=this.toSMBigEndian();return"little"===t&&(r=reversebuf(r)),r},bn$1.fromScriptNumBuffer=function(e,t,r){var n=r||4;if(preconditions.checkArgument(e.length<=n,new Error("script number overflow")),t&&e.length>0&&0==(127&e[e.length-1])&&(e.length<=1||0==(128&e[e.length-2])))throw new Error("non-minimally encoded script number");return bn$1.fromSM(e,{endian:"little"})},bn$1.prototype.toScriptNumBuffer=function(){return this.toSM({endian:"little"})},bn$1.prototype.gt=function(e){return this.cmp(e)>0},bn$1.prototype.gte=function(e){return this.cmp(e)>=0},bn$1.prototype.lt=function(e){return this.cmp(e)<0},bn$1.trim=function(e,t){return e.slice(t-e.length,e.length)},bn$1.pad=function(e,t,r){for(var n=new Buffer(r),i=0;i<e.length;i++)n[n.length-1-i]=e[e.length-1-i];for(i=0;i<r-t;i++)n[i]=0;return n};var r$3,bn$2=bn$1,_from$4="elliptic@=3.0.3",_id$4="elliptic@3.0.3",_inBundle$4=!1,_integrity$4="sha1-hlybQgv75VAGuflp+XoNLESWZZU=",_location$4="/zcash-bitcore-lib/elliptic",_phantomChildren$4={inherits:"2.0.1"},_requested$4={type:"version",registry:!0,raw:"elliptic@3.0.3",name:"elliptic",escapedName:"elliptic",rawSpec:"3.0.3",saveSpec:null,fetchSpec:"3.0.3"},_requiredBy$4=["/zcash-bitcore-lib"],_resolved$4="https://registry.npmjs.org/elliptic/-/elliptic-3.0.3.tgz",_shasum$4="865c9b420bfbe55006b9f969f97a0d2c44966595",_spec$4="elliptic@3.0.3",_where$4="/Users/mariusdarila/go/src/akasha-sdk-js/node_modules/zcash-bitcore-lib",author$3={name:"Fedor Indutny",email:"fedor@indutny.com"},bugs$4={url:"https://github.com/indutny/elliptic/issues"},bundleDependencies$4=!1,dependencies$4={"bn.js":"^2.0.0",brorand:"^1.0.1","hash.js":"^1.0.0",inherits:"^2.0.1"},deprecated$4=!1,description$4="EC cryptography",devDependencies$4={browserify:"^3.44.2",jscs:"^1.11.3",jshint:"^2.6.0",mocha:"^2.1.0","uglify-js":"^2.4.13"},homepage$4="https://github.com/indutny/elliptic",keywords$4=["EC","Elliptic","curve","Cryptography"],license$4="MIT",main$4="lib/elliptic.js",name$l="elliptic",repository$4={type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts$4={test:"make lint && mocha --reporter=spec test/*-test.js"},version$9="3.0.3",_package$8={_from:_from$4,_id:_id$4,_inBundle:_inBundle$4,_integrity:_integrity$4,_location:_location$4,_phantomChildren:_phantomChildren$4,_requested:_requested$4,_requiredBy:_requiredBy$4,_resolved:_resolved$4,_shasum:_shasum$4,_spec:_spec$4,_where:_where$4,author:author$3,bugs:bugs$4,bundleDependencies:bundleDependencies$4,dependencies:dependencies$4,deprecated:deprecated$4,description:description$4,devDependencies:devDependencies$4,homepage:homepage$4,keywords:keywords$4,license:license$4,main:main$4,name:name$l,repository:repository$4,scripts:scripts$4,version:version$9},_package$9=Object.freeze({_from:_from$4,_id:_id$4,_inBundle:_inBundle$4,_integrity:_integrity$4,_location:_location$4,_phantomChildren:_phantomChildren$4,_requested:_requested$4,_requiredBy:_requiredBy$4,_resolved:_resolved$4,_shasum:_shasum$4,_spec:_spec$4,_where:_where$4,author:author$3,bugs:bugs$4,bundleDependencies:bundleDependencies$4,dependencies:dependencies$4,deprecated:deprecated$4,description:description$4,devDependencies:devDependencies$4,homepage:homepage$4,keywords:keywords$4,license:license$4,main:main$4,name:name$l,repository:repository$4,scripts:scripts$4,version:version$9,default:_package$8}),utils_1$c=createCommonjsModule(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.assert=function(e,t){if(!e)throw new Error(t||"Assertion failed")},r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e},r.getNAF=function(e,t){for(var r=[],n=1<<t+1,i=e.clone();i.cmpn(1)>=0;){var o;if(i.isOdd()){var s=i.andln(n-1);o=s>(n>>1)-1?(n>>1)-s:s,i.isubn(o)}else o=0;r.push(o);for(var a=0!==i.cmpn(0)&&0===i.andln(n-1)?t+1:1,c=1;c<a;c++)r.push(0);i.ishrn(a)}return r},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n=0,i=0;e.cmpn(-n)>0||t.cmpn(-i)>0;){var o,s,a,c=e.andln(3)+n&3,u=t.andln(3)+i&3;3===c&&(c=-1),3===u&&(u=-1),o=0==(1&c)?0:3!=(a=e.andln(7)+n&7)&&5!==a||2!==u?c:-c,r[0].push(o),s=0==(1&u)?0:3!=(a=t.andln(7)+i&7)&&5!==a||2!==c?u:-u,r[1].push(s),2*n===o+1&&(n=1-n),2*i===s+1&&(i=1-i),e.ishrn(1),t.ishrn(1)}return r}}),brorand$1=function(e){return r$3||(r$3=new Rand$1(null)),r$3.generate(e)};function Rand$1(e){this.rand=e}var Rand_1$1=Rand$1;if(Rand$1.prototype.generate=function(e){return this._rand(e)},"object"==typeof window)window.crypto&&window.crypto.getRandomValues?Rand$1.prototype._rand=function(e){var t=new Uint8Array(e);return window.crypto.getRandomValues(t),t}:window.msCrypto&&window.msCrypto.getRandomValues?Rand$1.prototype._rand=function(e){var t=new Uint8Array(e);return window.msCrypto.getRandomValues(t),t}:Rand$1.prototype._rand=function(){throw new Error("Not implemented yet")};else try{var crypto$j=commonjsRequire("crypto");Rand$1.prototype._rand=function(e){return crypto$j.randomBytes(e)}}catch(e){Rand$1.prototype._rand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t}}brorand$1.Rand=Rand_1$1;var inherits$2=util$j.inherits,utils_1$d=createCommonjsModule(function(e,t){var r=t;function n(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function i(e){return 1===e.length?"0"+e:e}function o(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}function s(e,t){if(!e)throw new Error(t||"Assertion failed")}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}else for(n=0;n<e.length;n++)r[n]=0|e[n];return r},r.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=i(e[r].toString(16));return t},r.htonl=n,r.toHex32=function(e,t){for(var r="",i=0;i<e.length;i++){var s=e[i];"little"===t&&(s=n(s)),r+=o(s.toString(16))}return r},r.zero2=i,r.zero8=o,r.join32=function(e,t,r,n){var i=r-t;s(i%4==0);for(var o=new Array(i/4),a=0,c=t;a<o.length;a++,c+=4){var u;u="big"===n?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],o[a]=u>>>0}return o},r.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},r.rotr32=function(e,t){return e>>>t|e<<32-t},r.rotl32=function(e,t){return e<<t|e>>>32-t},r.sum32=function(e,t){return e+t>>>0},r.sum32_3=function(e,t,r){return e+t+r>>>0},r.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},r.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},r.assert=s,r.inherits=inherits$2,t.sum64=function(e,t,r,n){var i=e[t],o=n+e[t+1]>>>0,s=(o<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=o},t.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,n){return t+n>>>0},t.sum64_4_hi=function(e,t,r,n,i,o,s,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+o>>>0)<o?1:0,e+r+i+s+(c+=(u=u+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,r,n,i,o,s,a){return t+n+o+a>>>0},t.sum64_5_hi=function(e,t,r,n,i,o,s,a,c,u){var f=0,l=t;return f+=(l=l+n>>>0)<t?1:0,f+=(l=l+o>>>0)<o?1:0,f+=(l=l+a>>>0)<a?1:0,e+r+i+s+c+(f+=(l=l+u>>>0)<u?1:0)>>>0},t.sum64_5_lo=function(e,t,r,n,i,o,s,a,c,u){return t+n+o+a+u>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}}),utils_2$7=utils_1$d.sum64,utils_3$7=utils_1$d.sum64_hi,utils_4$7=utils_1$d.sum64_lo,utils_5$6=utils_1$d.sum64_4_hi,utils_6$5=utils_1$d.sum64_4_lo,utils_7$4=utils_1$d.sum64_5_hi,utils_8$3=utils_1$d.sum64_5_lo,utils_9$3=utils_1$d.rotr64_hi,utils_10$2=utils_1$d.rotr64_lo,utils_11$2=utils_1$d.shr64_hi,utils_12$2=utils_1$d.shr64_lo,utils$R=hash_1$3.utils,assert$l=utils$R.assert;function BlockHash$a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var BlockHash_1$2=BlockHash$a;BlockHash$a.prototype.update=function(e,t){if(e=utils$R.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=utils$R.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},BlockHash$a.prototype.digest=function(e){return this.update(this._pad()),assert$l(null===this.pending),this._digest(e)},BlockHash$a.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else{n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0;for(o=8;o<this.padLength;o++)n[i++]=0}return n};var common$u={BlockHash:BlockHash_1$2},utils$S=hash_1$3.utils,assert$m=utils$S.assert,rotr32$4=utils$S.rotr32,rotl32$6=utils$S.rotl32,sum32$8=utils$S.sum32,sum32_4$6=utils$S.sum32_4,sum32_5$6=utils$S.sum32_5,rotr64_hi$4=utils$S.rotr64_hi,rotr64_lo$4=utils$S.rotr64_lo,shr64_hi$4=utils$S.shr64_hi,shr64_lo$4=utils$S.shr64_lo,sum64$4=utils$S.sum64,sum64_hi$4=utils$S.sum64_hi,sum64_lo$4=utils$S.sum64_lo,sum64_4_hi$4=utils$S.sum64_4_hi,sum64_4_lo$4=utils$S.sum64_4_lo,sum64_5_hi$4=utils$S.sum64_5_hi,sum64_5_lo$4=utils$S.sum64_5_lo,BlockHash$b=hash_1$3.common.BlockHash,sha256_K$2=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],sha512_K$2=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],sha1_K$2=[1518500249,1859775393,2400959708,3395469782];function SHA256$2(){if(!(this instanceof SHA256$2))return new SHA256$2;BlockHash$b.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K$2,this.W=new Array(64)}utils$S.inherits(SHA256$2,BlockHash$b);var sha256$2=SHA256$2;function SHA224$2(){if(!(this instanceof SHA224$2))return new SHA224$2;SHA256$2.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}SHA256$2.blockSize=512,SHA256$2.outSize=256,SHA256$2.hmacStrength=192,SHA256$2.padLength=64,SHA256$2.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=sum32_4$6(g1_256$4(r[n-2]),r[n-7],g0_256$4(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],f=this.h[6],l=this.h[7];assert$m(this.k.length===r.length);for(n=0;n<r.length;n++){var d=sum32_5$6(l,s1_256$4(c),ch32$4(c,u,f),this.k[n],r[n]),h=sum32$8(s0_256$4(i),maj32$4(i,o,s));l=f,f=u,u=c,c=sum32$8(a,d),a=s,s=o,o=i,i=sum32$8(d,h)}this.h[0]=sum32$8(this.h[0],i),this.h[1]=sum32$8(this.h[1],o),this.h[2]=sum32$8(this.h[2],s),this.h[3]=sum32$8(this.h[3],a),this.h[4]=sum32$8(this.h[4],c),this.h[5]=sum32$8(this.h[5],u),this.h[6]=sum32$8(this.h[6],f),this.h[7]=sum32$8(this.h[7],l)},SHA256$2.prototype._digest=function(e){return"hex"===e?utils$S.toHex32(this.h,"big"):utils$S.split32(this.h,"big")},utils$S.inherits(SHA224$2,SHA256$2);var sha224$2=SHA224$2;function SHA512$2(){if(!(this instanceof SHA512$2))return new SHA512$2;BlockHash$b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K$2,this.W=new Array(160)}SHA224$2.blockSize=512,SHA224$2.outSize=224,SHA224$2.hmacStrength=192,SHA224$2.padLength=64,SHA224$2.prototype._digest=function(e){return"hex"===e?utils$S.toHex32(this.h.slice(0,7),"big"):utils$S.split32(this.h.slice(0,7),"big")},utils$S.inherits(SHA512$2,BlockHash$b);var sha512$2=SHA512$2;function SHA384$2(){if(!(this instanceof SHA384$2))return new SHA384$2;SHA512$2.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}SHA512$2.blockSize=1024,SHA512$2.outSize=512,SHA512$2.hmacStrength=192,SHA512$2.padLength=128,SHA512$2.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=g1_512_hi$2(r[n-4],r[n-3]),o=g1_512_lo$2(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],c=g0_512_hi$2(r[n-30],r[n-29]),u=g0_512_lo$2(r[n-30],r[n-29]),f=r[n-32],l=r[n-31];r[n]=sum64_4_hi$4(i,o,s,a,c,u,f,l),r[n+1]=sum64_4_lo$4(i,o,s,a,c,u,f,l)}},SHA512$2.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],c=this.h[5],u=this.h[6],f=this.h[7],l=this.h[8],d=this.h[9],h=this.h[10],p=this.h[11],b=this.h[12],m=this.h[13],g=this.h[14],y=this.h[15];assert$m(this.k.length===r.length);for(var v=0;v<r.length;v+=2){var _=g,$=y,S=s1_512_hi$2(l,d),E=s1_512_lo$2(l,d),w=ch64_hi$2(l,d,h,p,b),C=ch64_lo$2(l,d,h,p,b,m),A=this.k[v],k=this.k[v+1],T=r[v],I=r[v+1],B=sum64_5_hi$4(_,$,S,E,w,C,A,k,T,I),P=sum64_5_lo$4(_,$,S,E,w,C,A,k,T,I),R=(_=s0_512_hi$2(n,i),$=s0_512_lo$2(n,i),S=maj64_hi$2(n,i,o,s,a),E=maj64_lo$2(n,i,o,s,a,c),sum64_hi$4(_,$,S,E)),O=sum64_lo$4(_,$,S,E);g=b,y=m,b=h,m=p,h=l,p=d,l=sum64_hi$4(u,f,B,P),d=sum64_lo$4(f,f,B,P),u=a,f=c,a=o,c=s,o=n,s=i,n=sum64_hi$4(B,P,R,O),i=sum64_lo$4(B,P,R,O)}sum64$4(this.h,0,n,i),sum64$4(this.h,2,o,s),sum64$4(this.h,4,a,c),sum64$4(this.h,6,u,f),sum64$4(this.h,8,l,d),sum64$4(this.h,10,h,p),sum64$4(this.h,12,b,m),sum64$4(this.h,14,g,y)},SHA512$2.prototype._digest=function(e){return"hex"===e?utils$S.toHex32(this.h,"big"):utils$S.split32(this.h,"big")},utils$S.inherits(SHA384$2,SHA512$2);var sha384$2=SHA384$2;function SHA1$2(){if(!(this instanceof SHA1$2))return new SHA1$2;BlockHash$b.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}SHA384$2.blockSize=1024,SHA384$2.outSize=384,SHA384$2.hmacStrength=192,SHA384$2.padLength=128,SHA384$2.prototype._digest=function(e){return"hex"===e?utils$S.toHex32(this.h.slice(0,12),"big"):utils$S.split32(this.h.slice(0,12),"big")},utils$S.inherits(SHA1$2,BlockHash$b);var sha1$9=SHA1$2;function ch32$4(e,t,r){return e&t^~e&r}function maj32$4(e,t,r){return e&t^e&r^t&r}function p32$2(e,t,r){return e^t^r}function s0_256$4(e){return rotr32$4(e,2)^rotr32$4(e,13)^rotr32$4(e,22)}function s1_256$4(e){return rotr32$4(e,6)^rotr32$4(e,11)^rotr32$4(e,25)}function g0_256$4(e){return rotr32$4(e,7)^rotr32$4(e,18)^e>>>3}function g1_256$4(e){return rotr32$4(e,17)^rotr32$4(e,19)^e>>>10}function ft_1$4(e,t,r,n){return 0===e?ch32$4(t,r,n):1===e||3===e?p32$2(t,r,n):2===e?maj32$4(t,r,n):void 0}function ch64_hi$2(e,t,r,n,i,o){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function ch64_lo$2(e,t,r,n,i,o){var s=t&n^~t&o;return s<0&&(s+=4294967296),s}function maj64_hi$2(e,t,r,n,i,o){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function maj64_lo$2(e,t,r,n,i,o){var s=t&n^t&o^n&o;return s<0&&(s+=4294967296),s}function s0_512_hi$2(e,t){var r=rotr64_hi$4(e,t,28)^rotr64_hi$4(t,e,2)^rotr64_hi$4(t,e,7);return r<0&&(r+=4294967296),r}function s0_512_lo$2(e,t){var r=rotr64_lo$4(e,t,28)^rotr64_lo$4(t,e,2)^rotr64_lo$4(t,e,7);return r<0&&(r+=4294967296),r}function s1_512_hi$2(e,t){var r=rotr64_hi$4(e,t,14)^rotr64_hi$4(e,t,18)^rotr64_hi$4(t,e,9);return r<0&&(r+=4294967296),r}function s1_512_lo$2(e,t){var r=rotr64_lo$4(e,t,14)^rotr64_lo$4(e,t,18)^rotr64_lo$4(t,e,9);return r<0&&(r+=4294967296),r}function g0_512_hi$2(e,t){var r=rotr64_hi$4(e,t,1)^rotr64_hi$4(e,t,8)^shr64_hi$4(e,t,7);return r<0&&(r+=4294967296),r}function g0_512_lo$2(e,t){var r=rotr64_lo$4(e,t,1)^rotr64_lo$4(e,t,8)^shr64_lo$4(e,t,7);return r<0&&(r+=4294967296),r}function g1_512_hi$2(e,t){var r=rotr64_hi$4(e,t,19)^rotr64_hi$4(t,e,29)^shr64_hi$4(e,t,6);return r<0&&(r+=4294967296),r}function g1_512_lo$2(e,t){var r=rotr64_lo$4(e,t,19)^rotr64_lo$4(t,e,29)^shr64_lo$4(e,t,6);return r<0&&(r+=4294967296),r}SHA1$2.blockSize=512,SHA1$2.outSize=160,SHA1$2.hmacStrength=80,SHA1$2.padLength=64,SHA1$2.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=rotl32$6(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4];for(n=0;n<r.length;n++){var u=~~(n/20),f=sum32_5$6(rotl32$6(i,5),ft_1$4(u,o,s,a),c,r[n],sha1_K$2[u]);c=a,a=s,s=rotl32$6(o,30),o=i,i=f}this.h[0]=sum32$8(this.h[0],i),this.h[1]=sum32$8(this.h[1],o),this.h[2]=sum32$8(this.h[2],s),this.h[3]=sum32$8(this.h[3],a),this.h[4]=sum32$8(this.h[4],c)},SHA1$2.prototype._digest=function(e){return"hex"===e?utils$S.toHex32(this.h,"big"):utils$S.split32(this.h,"big")};var sha$9={sha256:sha256$2,sha224:sha224$2,sha512:sha512$2,sha384:sha384$2,sha1:sha1$9},utils$T=hash_1$3.utils,rotl32$7=utils$T.rotl32,sum32$9=utils$T.sum32,sum32_3$4=utils$T.sum32_3,sum32_4$7=utils$T.sum32_4,BlockHash$c=hash_1$3.common.BlockHash;function RIPEMD160$2(){if(!(this instanceof RIPEMD160$2))return new RIPEMD160$2;BlockHash$c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$T.inherits(RIPEMD160$2,BlockHash$c);var ripemd160$2=RIPEMD160$2;function f$2(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function K$2(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Kh$2(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}RIPEMD160$2.blockSize=512,RIPEMD160$2.outSize=160,RIPEMD160$2.hmacStrength=192,RIPEMD160$2.padLength=64,RIPEMD160$2.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],o=this.h[3],s=this.h[4],a=r,c=n,u=i,f=o,l=s,d=0;d<80;d++){var h=sum32$9(rotl32$7(sum32_4$7(r,f$2(d,n,i,o),e[r$4[d]+t],K$2(d)),s$u[d]),s);r=s,s=o,o=rotl32$7(i,10),i=n,n=h,h=sum32$9(rotl32$7(sum32_4$7(a,f$2(79-d,c,u,f),e[rh$2[d]+t],Kh$2(d)),sh$2[d]),l),a=l,l=f,f=rotl32$7(u,10),u=c,c=h}h=sum32_3$4(this.h[1],i,f),this.h[1]=sum32_3$4(this.h[2],o,l),this.h[2]=sum32_3$4(this.h[3],s,a),this.h[3]=sum32_3$4(this.h[4],r,c),this.h[4]=sum32_3$4(this.h[0],n,u),this.h[0]=h},RIPEMD160$2.prototype._digest=function(e){return"hex"===e?utils$T.toHex32(this.h,"little"):utils$T.split32(this.h,"little")};var r$4=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh$2=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh$2=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],ripemd$2={ripemd160:ripemd160$2},hmac_1$2=createCommonjsModule(function(e,t){var r=hash_1$3.utils,n=r.assert;function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}e.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),n(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;this.inner=(new this.Hash).update(e);for(t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}}),hash_1$3=createCommonjsModule(function(e,t){var r=t;r.utils=utils_1$d,r.common=common$u,r.sha=sha$9,r.ripemd=ripemd$2,r.hmac=hmac_1$2,r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160}),utils$U=elliptic_1$3.utils,assert$n=utils$U.assert;function HmacDRBG$2(e){if(!(this instanceof HmacDRBG$2))return new HmacDRBG$2(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=utils$U.toArray(e.entropy,e.entropyEnc),r=utils$U.toArray(e.nonce,e.nonceEnc),n=utils$U.toArray(e.pers,e.persEnc);assert$n(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var hmacDrbg$2=HmacDRBG$2;HmacDRBG$2.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this.reseed=1,this.reseedInterval=281474976710656},HmacDRBG$2.prototype._hmac=function(){return new hash_1$3.hmac(this.hash,this.K)},HmacDRBG$2.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG$2.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=utils$U.toBuffer(e,t),r=utils$U.toBuffer(r,n),assert$n(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this.reseed=1},HmacDRBG$2.prototype.generate=function(e,t,r,n){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=utils$U.toArray(r,n),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this.reseed++,utils$U.encode(o,t)};var getNAF$2=elliptic_1$3.utils.getNAF,getJSF$2=elliptic_1$3.utils.getJSF,assert$o=elliptic_1$3.utils.assert;function BaseCurve$2(e,t){this.type=e,this.p=new bn$1(t.p,16),this.red=t.prime?bn$1.red(t.prime):bn$1.mont(this.p),this.zero=new bn$1(0).toRed(this.red),this.one=new bn$1(1).toRed(this.red),this.two=new bn$1(2).toRed(this.red),this.n=t.n&&new bn$1(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}var base$8=BaseCurve$2;function BasePoint$2(e,t){this.curve=e,this.type=t,this.precomputed=null}BaseCurve$2.prototype.point=function(){throw new Error("Not implemented")},BaseCurve$2.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve$2.prototype._fixedNafMul=function(e,t){var r=e._getDoubles(),n=getNAF$2(t,1),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;for(var o=[],s=0;s<n.length;s+=r.step){var a=0;for(t=s+r.step-1;t>=s;t--)a=(a<<1)+n[t];o.push(a)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=i;f>0;f--){for(s=0;s<o.length;s++){(a=o[s])===f?u=u.mixedAdd(r.points[s]):a===-f&&(u=u.mixedAdd(r.points[s].neg()))}c=c.add(u)}return c.toP()},BaseCurve$2.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=getNAF$2(t,r),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(t=0;a>=0&&0===o[a];a--)t++;if(a>=0&&t++,s=s.dblp(t),a<0)break;var c=o[a];assert$o(0!==c),s="affine"===e.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===e.type?s.toP():s},BaseCurve$2.prototype._wnafMulAdd=function(e,t,r,n){for(var i=this._wnafT1,o=this._wnafT2,s=this._wnafT3,a=0,c=0;c<n;c++){var u=(S=t[c])._getNAFPoints(e);i[c]=u.wnd,o[c]=u.points}for(c=n-1;c>=1;c-=2){var f=c-1,l=c;if(1===i[f]&&1===i[l]){var d=[t[f],null,null,t[l]];0===t[f].y.cmp(t[l].y)?(d[1]=t[f].add(t[l]),d[2]=t[f].toJ().mixedAdd(t[l].neg())):0===t[f].y.cmp(t[l].y.redNeg())?(d[1]=t[f].toJ().mixedAdd(t[l]),d[2]=t[f].add(t[l].neg())):(d[1]=t[f].toJ().mixedAdd(t[l]),d[2]=t[f].toJ().mixedAdd(t[l].neg()));var h=[-3,-1,-5,-7,0,7,5,1,3],p=getJSF$2(r[f],r[l]);a=Math.max(p[0].length,a),s[f]=new Array(a),s[l]=new Array(a);for(var b=0;b<a;b++){var m=0|p[0][b],g=0|p[1][b];s[f][b]=h[3*(m+1)+(g+1)],s[l][b]=0,o[f]=d}}else s[f]=getNAF$2(r[f],i[f]),s[l]=getNAF$2(r[l],i[l]),a=Math.max(s[f].length,a),a=Math.max(s[l].length,a)}var y=this.jpoint(null,null,null),v=this._wnafT4;for(c=a;c>=0;c--){for(var _=0;c>=0;){var $=!0;for(b=0;b<n;b++)v[b]=0|s[b][c],0!==v[b]&&($=!1);if(!$)break;_++,c--}if(c>=0&&_++,y=y.dblp(_),c<0)break;for(b=0;b<n;b++){var S,E=v[b];0!==E&&(E>0?S=o[b][E-1>>1]:E<0&&(S=o[b][-E-1>>1].neg()),y="affine"===S.type?y.mixedAdd(S):y.add(S))}}for(c=0;c<n;c++)o[c]=null;return y.toP()},BaseCurve$2.BasePoint=BasePoint$2,BasePoint$2.prototype.validate=function(){return this.curve.validate(this)},BasePoint$2.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},BasePoint$2.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},BasePoint$2.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},BasePoint$2.prototype._getBeta=function(){return null},BasePoint$2.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var Base$7=curve_1$2.base,assert$p=elliptic_1$3.utils.assert;function ShortCurve$2(e){Base$7.call(this,"short",e),this.a=new bn$1(e.a,16).toRed(this.red),this.b=new bn$1(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$2(ShortCurve$2,Base$7);var short_1$2=ShortCurve$2;function Point$6(e,t,r,n){Base$7.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new bn$1(t,16),this.y=new bn$1(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint$2(e,t,r,n){Base$7.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new bn$1(0)):(this.x=new bn$1(t,16),this.y=new bn$1(r,16),this.z=new bn$1(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ShortCurve$2.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new bn$1(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new bn$1(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],assert$p(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new bn$1(e.a,16),b:new bn$1(e.b,16)}}):this._getEndoBasis(r)}}},ShortCurve$2.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:bn$1.mont(e),r=new bn$1(2).toRed(t).redInvm(),n=r.redNeg(),i=new bn$1(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},ShortCurve$2.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,c,u,f=this.n.shrn(Math.floor(this.n.bitLength()/2)),l=e,d=this.n.clone(),h=new bn$1(1),p=new bn$1(0),b=new bn$1(0),m=new bn$1(1),g=0;0!==l.cmpn(0);){var y=d.div(l);c=d.sub(y.mul(l)),u=b.sub(y.mul(h));var v=m.sub(y.mul(p));if(!n&&c.cmp(f)<0)t=a.neg(),r=h,n=c.neg(),i=u;else if(n&&2==++g)break;a=c,d=l,l=c,b=h,h=u,m=p,p=v}o=c.neg(),s=u;var _=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(_)>=0&&(o=t,s=r),n.sign&&(n=n.neg(),i=i.neg()),o.sign&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},ShortCurve$2.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),c=i.mul(r.b),u=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:c.add(u).neg()}},ShortCurve$2.prototype.pointFromX=function(e,t){(t=new bn$1(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b).redSqrt(),n=r.fromRed().isOdd();return(e&&!n||!e&&n)&&(r=r.redNeg()),this.point(t,r)},ShortCurve$2.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},ShortCurve$2.prototype._endoWnafMulAdd=function(e,t){for(var r=this._endoWnafT1,n=this._endoWnafT2,i=0;i<e.length;i++){var o=this._endoSplit(t[i]),s=e[i],a=s._getBeta();o.k1.sign&&(o.k1.sign=!o.k1.sign,s=s.neg(!0)),o.k2.sign&&(o.k2.sign=!o.k2.sign,a=a.neg(!0)),r[2*i]=s,r[2*i+1]=a,n[2*i]=o.k1,n[2*i+1]=o.k2}for(var c=this._wnafMulAdd(1,r,n,2*i),u=0;u<2*i;u++)r[u]=null,n[u]=null;return c},inherits$2(Point$6,Base$7.BasePoint),ShortCurve$2.prototype.point=function(e,t,r){return new Point$6(this,e,t,r)},ShortCurve$2.prototype.pointFromJSON=function(e,t){return Point$6.fromJSON(this,e,t)},Point$6.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Point$6.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point$6.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},Point$6.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point$6.prototype.isInfinity=function(){return this.inf},Point$6.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Point$6.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},Point$6.prototype.getX=function(){return this.x.fromRed()},Point$6.prototype.getY=function(){return this.y.fromRed()},Point$6.prototype.mul=function(e){return e=new bn$1(e,16),this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Point$6.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Point$6.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Point$6.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Point$6.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},inherits$2(JPoint$2,Base$7.BasePoint),ShortCurve$2.prototype.jpoint=function(e,t,r){return new JPoint$2(this,e,t,r)},JPoint$2.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},JPoint$2.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint$2.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),f=u.redMul(a),l=n.redMul(u),d=c.redSqr().redIAdd(f).redISub(l).redISub(l),h=c.redMul(l.redISub(d)).redISub(o.redMul(f)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,h,p)},JPoint$2.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),f=r.redMul(c),l=a.redSqr().redIAdd(u).redISub(f).redISub(f),d=a.redMul(f.redISub(l)).redISub(i.redMul(u)),h=this.z.redMul(s);return this.curve.jpoint(l,d,h)},JPoint$2.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),u=s.redAdd(s);for(r=0;r<e;r++){var f=o.redSqr(),l=u.redSqr(),d=l.redSqr(),h=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(c)),p=o.redMul(l),b=h.redSqr().redISub(p.redAdd(p)),m=p.redISub(b),g=h.redMul(m);g=g.redIAdd(g).redISub(d);var y=u.redMul(a);r+1<e&&(c=c.redMul(d)),o=b,a=y,u=g}return this.curve.jpoint(o,u.redMul(i),a)},JPoint$2.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint$2.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),l=this.y.redSqr(),d=l.redSqr(),h=this.x.redAdd(l).redSqr().redISub(f).redISub(d);h=h.redIAdd(h);var p=f.redAdd(f).redIAdd(f),b=p.redSqr(),m=d.redIAdd(d);m=(m=m.redIAdd(m)).redIAdd(m),e=b.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},JPoint$2.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);e=c;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),l=this.y.redSqr(),d=this.x.redMul(l),h=this.x.redSub(f).redMul(this.x.redAdd(f));h=h.redAdd(h).redIAdd(h);var p=d.redIAdd(d),b=(p=p.redIAdd(p)).redAdd(p);e=h.redSqr().redISub(b),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(f);var m=l.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=h.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},JPoint$2.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(s),f=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(f),d=s.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var h=a.redMul(l).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(f,h,p)},JPoint$2.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),f=t.redMul(u);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.x.redMul(a).redISub(f);l=(l=l.redIAdd(l)).redIAdd(l);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var h=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,d,h)},JPoint$2.prototype.mul=function(e,t){return e=new bn$1(e,t),this.curve._wnafMul(this,e)},JPoint$2.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},JPoint$2.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint$2.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Base$8=curve_1$2.base;function MontCurve$2(e){Base$8.call(this,"mont",e),this.a=new bn$1(e.a,16).toRed(this.red),this.b=new bn$1(e.b,16).toRed(this.red),this.i4=new bn$1(4).toRed(this.red).redInvm(),this.two=new bn$1(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$2(MontCurve$2,Base$8);var mont$2=MontCurve$2;function Point$7(e,t,r){Base$8.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new bn$1(t,16),this.z=new bn$1(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}MontCurve$2.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},inherits$2(Point$7,Base$8.BasePoint),MontCurve$2.prototype.point=function(e,t){return new Point$7(this,e,t)},MontCurve$2.prototype.pointFromJSON=function(e){return Point$7.fromJSON(this,e)},Point$7.prototype.precompute=function(){},Point$7.fromJSON=function(e,t){return new Point$7(e,t[0],t[1]||e.one)},Point$7.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$7.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Point$7.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},Point$7.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Point$7.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(r),s=i.redMul(n),a=t.z.redMul(o.redAdd(s).redSqr()),c=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,c)},Point$7.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.ishrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},Point$7.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$7.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point$7.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Base$9=curve_1$2.base,assert$q=elliptic_1$3.utils.assert;function EdwardsCurve$2(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,Base$9.call(this,"edwards",e),this.a=new bn$1(e.a,16).mod(this.red.m).toRed(this.red),this.c=new bn$1(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new bn$1(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$q(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}inherits$2(EdwardsCurve$2,Base$9);var edwards$2=EdwardsCurve$2;function Point$8(e,t,r,n,i){Base$9.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new bn$1(t,16),this.y=new bn$1(r,16),this.z=n?new bn$1(n,16):this.curve.one,this.t=i&&new bn$1(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}EdwardsCurve$2.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},EdwardsCurve$2.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},EdwardsCurve$2.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},EdwardsCurve$2.prototype.pointFromX=function(e,t){(t=new bn$1(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(i.redInvm()).redSqrt(),s=o.fromRed().isOdd();return(e&&!s||!e&&s)&&(o=o.redNeg()),this.point(t,o,curve_1$2.one)},EdwardsCurve$2.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},inherits$2(Point$8,Base$9.BasePoint),EdwardsCurve$2.prototype.pointFromJSON=function(e){return Point$8.fromJSON(this,e)},EdwardsCurve$2.prototype.point=function(e,t,r,n){return new Point$8(this,e,t,r,n)},Point$8.fromJSON=function(e,t){return new Point$8(e,t[0],t[1],t[2])},Point$8.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$8.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},Point$8.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),s=o.redSub(r),a=n.redSub(t),c=i.redMul(s),u=o.redMul(a),f=i.redMul(a),l=s.redMul(o);return this.curve.point(c,u,l,f)},Point$8.prototype._projDbl=function(){var e,t,r,n=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var s=(u=this.curve._mulA(i)).redAdd(o);if(this.zOne)e=n.redSub(i).redSub(o).redMul(s.redSub(this.curve.two)),t=s.redMul(u.redSub(o)),r=s.redSqr().redSub(s).redSub(s);else{var a=this.z.redSqr(),c=s.redSub(a).redISub(a);e=n.redSub(i).redISub(o).redMul(c),t=s.redMul(u.redSub(o)),r=s.redMul(c)}}else{var u=i.redAdd(o);a=this.curve._mulC(this.c.redMul(this.z)).redSqr(),c=u.redSub(a).redSub(a);e=this.curve._mulC(n.redISub(u)).redMul(c),t=this.curve._mulC(u).redMul(i.redISub(o)),r=u.redMul(c)}return this.curve.point(e,t,r)},Point$8.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point$8.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),s=i.redSub(n),a=i.redAdd(n),c=r.redAdd(t),u=o.redMul(s),f=a.redMul(c),l=o.redMul(c),d=s.redMul(a);return this.curve.point(u,f,d,l)},Point$8.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),c=i.redSub(a),u=i.redAdd(a),f=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),l=n.redMul(c).redMul(f);return this.curve.twisted?(t=n.redMul(u).redMul(s.redSub(this.curve._mulA(o))),r=c.redMul(u)):(t=n.redMul(u).redMul(s.redSub(o)),r=this.curve._mulC(c).redMul(u)),this.curve.point(l,t,r)},Point$8.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},Point$8.prototype.mul=function(e){return this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},Point$8.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2)},Point$8.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},Point$8.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point$8.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Point$8.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Point$8.prototype.toP=Point$8.prototype.normalize,Point$8.prototype.mixedAdd=Point$8.prototype.add;var curve_1$2=createCommonjsModule(function(e,t){var r=t;r.base=base$8,r.short=short_1$2,r.mont=mont$2,r.edwards=edwards$2}),secp256k1$5={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},curves_1$2=createCommonjsModule(function(e,t){var r,n=t,i=elliptic_1$3.utils.assert;function o(e){"short"===e.type?this.curve=new elliptic_1$3.curve.short(e):"edwards"===e.type?this.curve=new elliptic_1$3.curve.edwards(e):this.curve=new elliptic_1$3.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash_1$3.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash_1$3.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash_1$3.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1$3.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1$3.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=secp256k1$5}catch(e){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash_1$3.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}),utils$V=elliptic_1$3.utils;function KeyPair$4(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var key$8=KeyPair$4;KeyPair$4.fromPublic=function(e,t,r){return t instanceof KeyPair$4?t:new KeyPair$4(e,{pub:t,pubEnc:r})},KeyPair$4.fromPrivate=function(e,t,r){return t instanceof KeyPair$4?t:new KeyPair$4(e,{priv:t,privEnc:r})},KeyPair$4.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair$4.prototype.getPublic=function(e,t){if(this.pub||(this.pub=this.ec.g.mul(this.priv)),"string"==typeof e&&(t=e,e=null),!t)return this.pub;for(var r=this.ec.curve.p.byteLength(),n=this.pub.getX().toArray(),i=n.length;i<r;i++)n.unshift(0);if("mont"!==this.ec.curve.type)if(e)s=[this.pub.getY().isEven()?2:3].concat(n);else{var o=this.pub.getY().toArray();for(i=o.length;i<r;i++)o.unshift(0);var s=[4].concat(n,o)}else s=n;return utils$V.encode(s,t)},KeyPair$4.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},KeyPair$4.prototype._importPrivate=function(e,t){this.priv=new bn$1(e,t||16),this.priv=this.priv.mod(this.ec.curve.n)},KeyPair$4.prototype._importPublic=function(e,t){if(!e.x&&!e.y)return e=utils$V.toArray(e,t),"mont"!==this.ec.curve.type?this._importPublicShort(e):this._importPublicMont(e);this.pub=this.ec.curve.point(e.x,e.y)},KeyPair$4.prototype._importPublicShort=function(e){var t=this.ec.curve.p.byteLength();4===e[0]&&e.length-1==2*t?this.pub=this.ec.curve.point(e.slice(1,1+t),e.slice(1+t,1+2*t)):2!==e[0]&&3!==e[0]||e.length-1!==t||(this.pub=this.ec.curve.pointFromX(3===e[0],e.slice(1,1+t)))},KeyPair$4.prototype._importPublicMont=function(e){this.pub=this.ec.curve.point(e,1)},KeyPair$4.prototype.derive=function(e){return e.mul(this.priv).getX()},KeyPair$4.prototype.sign=function(e){return this.ec.sign(e,this)},KeyPair$4.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},KeyPair$4.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var utils$W=elliptic_1$3.utils,assert$r=utils$W.assert;function Signature$4(e,t){if(e instanceof Signature$4)return e;this._importDER(e,t)||(assert$r(e.r&&e.s,"Signature without r or s"),this.r=new bn$1(e.r,16),this.s=new bn$1(e.s,16))}var signature$4=Signature$4;Signature$4.prototype._importDER=function(e,t){if((e=utils$W.toArray(e,t)).length<6||48!==e[0]||2!==e[2])return!1;if(1+e[1]>e.length)return!1;var r=e[3];if(r>=128)return!1;if(4+r+2>=e.length)return!1;if(2!==e[4+r])return!1;var n=e[5+r];return!(n>=128)&&(!(4+r+2+n>e.length)&&(this.r=new bn$1(e.slice(4,4+r)),this.s=new bn$1(e.slice(4+r+2,4+r+2+n)),!0))},Signature$4.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r));var n=[48,t.length+r.length+4,2,t.length];return n=n.concat(t,[2,r.length],r),utils$W.encode(n,e)};var utils$X=elliptic_1$3.utils,assert$s=utils$X.assert;function EC$3(e){if(!(this instanceof EC$3))return new EC$3(e);"string"==typeof e&&(assert$s(elliptic_1$3.curves.hasOwnProperty(e),"Unknown curve "+e),e=elliptic_1$3.curves[e]),e instanceof elliptic_1$3.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.shrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var ec$2=EC$3;EC$3.prototype.keyPair=function(e){return new key$8(this,e)},EC$3.prototype.keyFromPrivate=function(e,t){return key$8.fromPrivate(this,e,t)},EC$3.prototype.keyFromPublic=function(e,t){return key$8.fromPublic(this,e,t)},EC$3.prototype.genKeyPair=function(e){e||(e={});for(var t=new elliptic_1$3.hmacDRBG({hash:this.hash,pers:e.pers,entropy:e.entropy||elliptic_1$3.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new bn$1(2));;){var i=new bn$1(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},EC$3.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.shrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},EC$3.prototype.sign=function(e,t,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new bn$1(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray(),s=o.length;s<21;s++)o.unshift(0);var a=e.toArray();for(s=a.length;s<i;s++)a.unshift(0);for(var c=new elliptic_1$3.hmacDRBG({hash:this.hash,entropy:o,nonce:a}),u=this.n.sub(new bn$1(1));;){var f=new bn$1(c.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(u)>=0)){var l=this.g.mul(f);if(!l.isInfinity()){var d=l.getX().mod(this.n);if(0!==d.cmpn(0)){var h=f.invm(this.n).mul(d.mul(t.getPrivate()).iadd(e)).mod(this.n);if(0!==h.cmpn(0))return n.canonical&&h.cmp(this.nh)>0&&(h=this.n.sub(h)),new signature$4({r:d,s:h})}}}}},EC$3.prototype.verify=function(e,t,r,n){e=this._truncateToN(new bn$1(e,16)),r=this.keyFromPublic(r,n);var i=(t=new signature$4(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s=o.invm(this.n),a=s.mul(e).mod(this.n),c=s.mul(i).mod(this.n),u=this.g.mulAdd(a,r.getPublic(),c);return!u.isInfinity()&&0===u.getX().mod(this.n).cmp(i)};var require$$0$7=getCjsExportFromNamespace(_package$9),elliptic_1$3=createCommonjsModule(function(e,t){var r=t;r.version=require$$0$7.version,r.utils=utils_1$c,r.rand=brorand$1,r.hmacDRBG=hmacDrbg$2,r.curve=curve_1$2,r.curves=curves_1$2,r.ec=ec$2}),ec$3=elliptic_1$3.curves.secp256k1,ecPoint=ec$3.curve.point.bind(ec$3.curve),ecPointFromX=ec$3.curve.pointFromX.bind(ec$3.curve),Point$9=function(e,t,r){var n=ecPoint(e,t,r);return n.validate(),n};Point$9.prototype=Object.getPrototypeOf(ec$3.curve.point()),Point$9.fromX=function(e,t){var r=ecPointFromX(e,t);return r.validate(),r},Point$9.getG=function(){return ec$3.curve.g},Point$9.getN=function(){return new bn$2(ec$3.curve.n.toArray())},Point$9.prototype._getX=Point$9.prototype.getX,Point$9.prototype.getX=function(){return new bn$2(this._getX().toArray())},Point$9.prototype._getY=Point$9.prototype.getY,Point$9.prototype.getY=function(){return new bn$2(this._getY().toArray())},Point$9.prototype.validate=function(){if(this.isInfinity())throw new Error("Point cannot be equal to Infinity");if(0===this.getX().cmp(bn$2.Zero)||0===this.getY().cmp(bn$2.Zero))throw new Error("Invalid x,y value for curve, cannot equal 0.");if(0!==ecPointFromX(this.getY().isOdd(),this.getX()).y.cmp(this.y))throw new Error("Invalid y value for curve.");var e=this.getX().gt(bn$2.Minus1)&&this.getX().lt(Point$9.getN()),t=this.getY().gt(bn$2.Minus1)&&this.getY().lt(Point$9.getN());if(!e||!t)throw new Error("Point does not lie on the curve");if(!this.mul(Point$9.getN()).isInfinity())throw new Error("Point times N must be infinity");return this},Point$9.pointToCompressed=function(e){var t,r=e.getX().toBuffer({size:32}),n=e.getY().toBuffer({size:32});return t=n[n.length-1]%2?new Buffer([3]):new Buffer([2]),buffer_1.concat([t,r])};var point=Point$9,Signature$5=function e(t,r){if(!(this instanceof e))return new e(t,r);if(t instanceof bn$2)this.set({r:t,s:r});else if(t){var n=t;this.set(n)}};Signature$5.prototype.set=function(e){return this.r=e.r||this.r||void 0,this.s=e.s||this.s||void 0,this.i=void 0!==e.i?e.i:this.i,this.compressed=void 0!==e.compressed?e.compressed:this.compressed,this.nhashtype=e.nhashtype||this.nhashtype||void 0,this},Signature$5.fromCompact=function(e){preconditions.checkArgument(buffer_1.isBuffer(e),"Argument is expected to be a Buffer");var t=new Signature$5,r=!0,n=e.slice(0,1)[0]-27-4;n<0&&(r=!1,n+=4);var i=e.slice(1,33),o=e.slice(33,65);return preconditions.checkArgument(0===n||1===n||2===n||3===n,new Error("i must be 0, 1, 2, or 3")),preconditions.checkArgument(32===i.length,new Error("r must be 32 bytes")),preconditions.checkArgument(32===o.length,new Error("s must be 32 bytes")),t.compressed=r,t.i=n,t.r=bn$2.fromBuffer(i),t.s=bn$2.fromBuffer(o),t},Signature$5.fromDER=Signature$5.fromBuffer=function(e,t){var r=Signature$5.parseDER(e,t),n=new Signature$5;return n.r=r.r,n.s=r.s,n},Signature$5.fromTxFormat=function(e){var t=e.readUInt8(e.length-1),r=e.slice(0,e.length-1),n=new Signature$5.fromDER(r,!1);return n.nhashtype=t,n},Signature$5.fromString=function(e){var t=new Buffer(e,"hex");return Signature$5.fromDER(t)},Signature$5.parseDER=function(e,t){preconditions.checkArgument(buffer_1.isBuffer(e),new Error("DER formatted signature should be a buffer")),lodash$1.isUndefined(t)&&(t=!0);var r=e[0];preconditions.checkArgument(48===r,new Error("Header byte should be 0x30"));var n=e[1],i=e.slice(2).length;preconditions.checkArgument(!t||n===i,new Error("Length byte should length of what follows")),n=n<i?n:i;var o=e[2];preconditions.checkArgument(2===o,new Error("Integer byte for r should be 0x02"));var s=e[3],a=e.slice(4,4+s),c=bn$2.fromBuffer(a),u=0===e[4];preconditions.checkArgument(s===a.length,new Error("Length of r incorrect"));var f=e[4+s+0];preconditions.checkArgument(2===f,new Error("Integer byte for s should be 0x02"));var l=e[4+s+1],d=e.slice(4+s+2,4+s+2+l),h=bn$2.fromBuffer(d),p=0===e[4+s+2+2];preconditions.checkArgument(l===d.length,new Error("Length of s incorrect"));var b=4+s+2+l;return preconditions.checkArgument(n===b-2,new Error("Length of signature incorrect")),{header:r,length:n,rheader:o,rlength:s,rneg:u,rbuf:a,r:c,sheader:f,slength:l,sneg:p,sbuf:d,s:h}},Signature$5.prototype.toCompact=function(e,t){if(e="number"==typeof e?e:this.i,t="boolean"==typeof t?t:this.compressed,0!==e&&1!==e&&2!==e&&3!==e)throw new Error("i must be equal to 0, 1, 2, or 3");var r=e+27+4;!1===t&&(r-=4);var n=new Buffer([r]),i=this.r.toBuffer({size:32}),o=this.s.toBuffer({size:32});return Buffer.concat([n,i,o])},Signature$5.prototype.toBuffer=Signature$5.prototype.toDER=function(){var e=this.r.toBuffer(),t=this.s.toBuffer(),r=!!(128&e[0]),n=!!(128&t[0]),i=r?Buffer.concat([new Buffer([0]),e]):e,o=n?Buffer.concat([new Buffer([0]),t]):t,s=i.length,a=o.length,c=2+s+2+a;return Buffer.concat([new Buffer([48,c,2,s]),i,new Buffer([2,a]),o])},Signature$5.prototype.toString=function(){return this.toDER().toString("hex")},Signature$5.isTxDER=function(e){if(e.length<9)return!1;if(e.length>73)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-3)return!1;var t=e[3];if(5+t>=e.length)return!1;var r=e[5+t];if(t+r+7!==e.length)return!1;var n=e.slice(4);if(2!==e[2])return!1;if(0===t)return!1;if(128&n[0])return!1;if(t>1&&0===n[0]&&!(128&n[1]))return!1;var i=e.slice(6+t);return 2===e[6+t-2]&&(0!==r&&(!(128&i[0])&&!(r>1&&0===i[0]&&!(128&i[1]))))},Signature$5.prototype.hasLowS=function(){return!this.s.lt(new bn$2(1))&&!this.s.gt(new bn$2("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex"))},Signature$5.prototype.hasDefinedHashtype=function(){if(!js$2.isNaturalNumber(this.nhashtype))return!1;var e=this.nhashtype&~Signature$5.SIGHASH_ANYONECANPAY;return!(e<Signature$5.SIGHASH_ALL||e>Signature$5.SIGHASH_SINGLE)},Signature$5.prototype.toTxFormat=function(){var e=this.toDER(),t=new Buffer(1);return t.writeUInt8(this.nhashtype,0),Buffer.concat([e,t])},Signature$5.SIGHASH_ALL=1,Signature$5.SIGHASH_NONE=2,Signature$5.SIGHASH_SINGLE=3,Signature$5.SIGHASH_ANYONECANPAY=128;var signature$5=Signature$5,hash$a=createCommonjsModule(function(e){var t=e.exports;t.sha1=function(e){return preconditions.checkArgument(buffer_1.isBuffer(e)),crypto$l.createHash("sha1").update(e).digest()},t.sha1.blocksize=512,t.sha256=function(e){return preconditions.checkArgument(buffer_1.isBuffer(e)),crypto$l.createHash("sha256").update(e).digest()},t.sha256.blocksize=512,t.sha256sha256=function(e){return preconditions.checkArgument(buffer_1.isBuffer(e)),t.sha256(t.sha256(e))},t.ripemd160=function(e){return preconditions.checkArgument(buffer_1.isBuffer(e)),crypto$l.createHash("ripemd160").update(e).digest()},t.sha256ripemd160=function(e){return preconditions.checkArgument(buffer_1.isBuffer(e)),t.ripemd160(t.sha256(e))},t.sha512=function(e){return preconditions.checkArgument(buffer_1.isBuffer(e)),crypto$l.createHash("sha512").update(e).digest()},t.sha512.blocksize=1024,t.hmac=function(e,t,r){preconditions.checkArgument(buffer_1.isBuffer(t)),preconditions.checkArgument(buffer_1.isBuffer(r)),preconditions.checkArgument(e.blocksize);var n=e.blocksize/8;if(r.length>n)r=e(r);else if(r<n){var i=new Buffer(n);i.fill(0),r.copy(i),r=i}var o=new Buffer(n);o.fill(92);var s=new Buffer(n);s.fill(54);for(var a=new Buffer(n),c=new Buffer(n),u=0;u<n;u++)a[u]=o[u]^r[u],c[u]=s[u]^r[u];return e(Buffer.concat([a,e(Buffer.concat([c,t]))]))},t.sha256hmac=function(e,r){return t.hmac(t.sha256,e,r)},t.sha512hmac=function(e,r){return t.hmac(t.sha512,e,r)}}),networks$1=[],networkMaps={};function Network$2(){}function get$5(e,t){if(~networks$1.indexOf(e))return e;if(!t)return networkMaps[e];lodash$1.isArray(t)||(t=[t]);var r=function(t){return networks$1[n][t]===e};for(var n in networks$1)if(lodash$1.any(t,r))return networks$1[n]}function addNetwork(e){var t=new Network$2;return js$2.defineImmutable(t,{name:e.name,alias:e.alias,pubkeyhash:e.pubkeyhash,privatekey:e.privatekey,scripthash:e.scripthash,xpubkey:e.xpubkey,xprivkey:e.xprivkey,zaddr:e.zaddr,zkey:e.zkey}),e.networkMagic&&js$2.defineImmutable(t,{networkMagic:buffer_1.integerAsBuffer(e.networkMagic)}),e.port&&js$2.defineImmutable(t,{port:e.port}),e.dnsSeeds&&js$2.defineImmutable(t,{dnsSeeds:e.dnsSeeds}),lodash$1.each(t,function(e){lodash$1.isUndefined(e)||lodash$1.isObject(e)||(networkMaps[e]=t)}),networks$1.push(t),t}function removeNetwork(e){for(var t=0;t<networks$1.length;t++)networks$1[t]===e&&networks$1.splice(t,1);for(var r in networkMaps)networkMaps[r]===e&&delete networkMaps[r]}Network$2.prototype.toString=function(){return this.name},addNetwork({name:"livenet",alias:"mainnet",pubkeyhash:7352,privatekey:128,scripthash:7357,xpubkey:76067358,xprivkey:76066276,zaddr:5786,zkey:43830,networkMagic:4179340459,port:8233,dnsSeeds:[]});var livenet=get$5("livenet");addNetwork({name:"testnet",alias:"regtest",pubkeyhash:7461,privatekey:239,scripthash:7354,xpubkey:70617039,xprivkey:70615956,zaddr:5814,zkey:44040});var testnet=get$5("testnet"),TESTNET={PORT:18233,NETWORK_MAGIC:buffer_1.integerAsBuffer(4187956406),DNS_SEEDS:["dnsseed.testnet.z.cash"]};for(var key$9 in TESTNET)lodash$1.isObject(TESTNET[key$9])||(networkMaps[TESTNET[key$9]]=testnet);var REGTEST={PORT:18444,NETWORK_MAGIC:buffer_1.integerAsBuffer(2867347295),DNS_SEEDS:[]};for(var key$9 in REGTEST)lodash$1.isObject(REGTEST[key$9])||(networkMaps[REGTEST[key$9]]=testnet);function enableRegtest(){testnet.regtestEnabled=!0}function disableRegtest(){testnet.regtestEnabled=!1}Object.defineProperty(testnet,"port",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?REGTEST.PORT:TESTNET.PORT}}),Object.defineProperty(testnet,"networkMagic",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?REGTEST.NETWORK_MAGIC:TESTNET.NETWORK_MAGIC}}),Object.defineProperty(testnet,"dnsSeeds",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?REGTEST.DNS_SEEDS:TESTNET.DNS_SEEDS}});for(var networks_1$2={add:addNetwork,remove:removeNetwork,defaultNetwork:livenet,livenet:livenet,mainnet:livenet,testnet:testnet,get:get$5,enableRegtest:enableRegtest,disableRegtest:disableRegtest},ALPHABET$2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ALPHABET_MAP$1={},i$3=0;i$3<ALPHABET$2.length;i$3++)ALPHABET_MAP$1[ALPHABET$2.charAt(i$3)]=i$3;var BASE$5=58;function encode$d(e){if(0===e.length)return"";var t,r,n=[0];for(t=0;t<e.length;t++){for(r=0;r<n.length;r++)n[r]<<=8;n[0]+=e[t];var i=0;for(r=0;r<n.length;++r)n[r]+=i,i=n[r]/BASE$5|0,n[r]%=BASE$5;for(;i;)n.push(i%BASE$5),i=i/BASE$5|0}for(t=0;0===e[t]&&t<e.length-1;t++)n.push(0);return n.reverse().map(function(e){return ALPHABET$2[e]}).join("")}function decode$e(e){if(0===e.length)return[];var t,r,n=[0];for(t=0;t<e.length;t++){var i=e[t];if(!(i in ALPHABET_MAP$1))throw new Error("Non-base58 character");for(r=0;r<n.length;r++)n[r]*=BASE$5;n[0]+=ALPHABET_MAP$1[i];var o=0;for(r=0;r<n.length;++r)n[r]+=o,o=n[r]>>8,n[r]&=255;for(;o;)n.push(255&o),o>>=8}for(t=0;"1"===e[t]&&t<e.length-1;t++)n.push(0);return n.reverse()}var bs58$1={encode:encode$d,decode:decode$e},ALPHABET$3="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz".split(""),Base58=function e(t){if(!(this instanceof e))return new e(t);if(Buffer.isBuffer(t)){var r=t;this.fromBuffer(r)}else if("string"==typeof t){var n=t;this.fromString(n)}else t&&this.set(t)};Base58.validCharacters=function(e){return buffer$1.Buffer.isBuffer(e)&&(e=e.toString()),lodash$1.all(lodash$1.map(e,function(e){return lodash$1.contains(ALPHABET$3,e)}))},Base58.prototype.set=function(e){return this.buf=e.buf||this.buf||void 0,this},Base58.encode=function(e){if(!buffer$1.Buffer.isBuffer(e))throw new Error("Input should be a buffer");return bs58$1.encode(e)},Base58.decode=function(e){if("string"!=typeof e)throw new Error("Input should be a string");return new Buffer(bs58$1.decode(e))},Base58.prototype.fromBuffer=function(e){return this.buf=e,this},Base58.prototype.fromString=function(e){var t=Base58.decode(e);return this.buf=t,this},Base58.prototype.toBuffer=function(){return this.buf},Base58.prototype.toString=function(){return Base58.encode(this.buf)};var base58=Base58,sha256sha256=hash$a.sha256sha256,Base58Check=function e(t){if(!(this instanceof e))return new e(t);if(Buffer.isBuffer(t)){var r=t;this.fromBuffer(r)}else if("string"==typeof t){var n=t;this.fromString(n)}else t&&this.set(t)};Base58Check.prototype.set=function(e){return this.buf=e.buf||this.buf||void 0,this},Base58Check.validChecksum=function(e,t){return lodash$1.isString(e)&&(e=new buffer$1.Buffer(base58.decode(e))),lodash$1.isString(t)&&(t=new buffer$1.Buffer(base58.decode(t))),t||(t=e.slice(-4),e=e.slice(0,-4)),Base58Check.checksum(e).toString("hex")===t.toString("hex")},Base58Check.decode=function(e){if("string"!=typeof e)throw new Error("Input must be a string");var t=new Buffer(base58.decode(e));if(t.length<4)throw new Error("Input string too short");var r=t.slice(0,-4),n=t.slice(-4),i=sha256sha256(r).slice(0,4);if(n.toString("hex")!==i.toString("hex"))throw new Error("Checksum mismatch");return r},Base58Check.checksum=function(e){return sha256sha256(e).slice(0,4)},Base58Check.encode=function(e){if(!Buffer.isBuffer(e))throw new Error("Input must be a buffer");var t=new Buffer(e.length+4),r=Base58Check.checksum(e);return e.copy(t),r.copy(t,e.length),base58.encode(t)},Base58Check.prototype.fromBuffer=function(e){return this.buf=e,this},Base58Check.prototype.fromString=function(e){var t=Base58Check.decode(e);return this.buf=t,this},Base58Check.prototype.toBuffer=function(){return this.buf},Base58Check.prototype.toString=function(){return Base58Check.encode(this.buf)};var base58check=Base58Check,BufferReader=function e(t){if(!(this instanceof e))return new e(t);if(!lodash$1.isUndefined(t))if(Buffer.isBuffer(t))this.set({buf:t});else if(lodash$1.isString(t))this.set({buf:new Buffer(t,"hex")});else{if(!lodash$1.isObject(t))throw new TypeError("Unrecognized argument for BufferReader");var r=t;this.set(r)}};BufferReader.prototype.set=function(e){return this.buf=e.buf||this.buf||void 0,this.pos=e.pos||this.pos||0,this},BufferReader.prototype.eof=function(){return this.pos>=this.buf.length},BufferReader.prototype.finished=BufferReader.prototype.eof,BufferReader.prototype.read=function(e){preconditions.checkArgument(!lodash$1.isUndefined(e),"Must specify a length");var t=this.buf.slice(this.pos,this.pos+e);return this.pos=this.pos+e,t},BufferReader.prototype.readAll=function(){var e=this.buf.slice(this.pos,this.buf.length);return this.pos=this.buf.length,e},BufferReader.prototype.readUInt8=function(){var e=this.buf.readUInt8(this.pos);return this.pos=this.pos+1,e},BufferReader.prototype.readUInt16BE=function(){var e=this.buf.readUInt16BE(this.pos);return this.pos=this.pos+2,e},BufferReader.prototype.readUInt16LE=function(){var e=this.buf.readUInt16LE(this.pos);return this.pos=this.pos+2,e},BufferReader.prototype.readUInt32BE=function(){var e=this.buf.readUInt32BE(this.pos);return this.pos=this.pos+4,e},BufferReader.prototype.readUInt32LE=function(){var e=this.buf.readUInt32LE(this.pos);return this.pos=this.pos+4,e},BufferReader.prototype.readUInt64BEBN=function(){var e=this.buf.slice(this.pos,this.pos+8),t=bn$2.fromBuffer(e);return this.pos=this.pos+8,t},BufferReader.prototype.readUInt64LEBN=function(){var e,t=this.buf.readUInt32LE(this.pos),r=4294967296*this.buf.readUInt32LE(this.pos+4)+t;if(r<=9007199254740991)e=new bn$2(r);else{var n=Array.prototype.slice.call(this.buf,this.pos,this.pos+8);e=new bn$2(n,10,"le")}return this.pos=this.pos+8,e},BufferReader.prototype.readVarintNum=function(){var e=this.readUInt8();switch(e){case 253:return this.readUInt16LE();case 254:return this.readUInt32LE();case 255:var t=this.readUInt64LEBN().toNumber();if(t<=Math.pow(2,53))return t;throw new Error("number too large to retain precision - use readVarintBN");default:return e}},BufferReader.prototype.readVarLengthBuffer=function(){var e=this.readVarintNum(),t=this.read(e);return preconditions.checkState(t.length===e,"Invalid length while reading varlength buffer. Expected to read: "+e+" and read "+t.length),t},BufferReader.prototype.readVarintBuf=function(){switch(this.buf.readUInt8(this.pos)){case 253:return this.read(3);case 254:return this.read(5);case 255:return this.read(9);default:return this.read(1)}},BufferReader.prototype.readVarintBN=function(){var e=this.readUInt8();switch(e){case 253:return new bn$2(this.readUInt16LE());case 254:return new bn$2(this.readUInt32LE());case 255:return this.readUInt64LEBN();default:return new bn$2(e)}},BufferReader.prototype.reverse=function(){for(var e=new Buffer(this.buf.length),t=0;t<e.length;t++)e[t]=this.buf[this.buf.length-1-t];return this.buf=e,this},BufferReader.prototype.readReverse=function(e){lodash$1.isUndefined(e)&&(e=this.buf.length);var t=this.buf.slice(this.pos,this.pos+e);return this.pos=this.pos+e,buffer_1.reverse(t)};var bufferreader=BufferReader,BufferWriter=function e(t){if(!(this instanceof e))return new e(t);t?this.set(t):this.bufs=[]};BufferWriter.prototype.set=function(e){return this.bufs=e.bufs||this.bufs||[],this},BufferWriter.prototype.toBuffer=function(){return this.concat()},BufferWriter.prototype.concat=function(){return Buffer.concat(this.bufs)},BufferWriter.prototype.write=function(e){return assert$t(buffer_1.isBuffer(e)),this.bufs.push(e),this},BufferWriter.prototype.writeReverse=function(e){return assert$t(buffer_1.isBuffer(e)),this.bufs.push(buffer_1.reverse(e)),this},BufferWriter.prototype.writeUInt8=function(e){var t=new Buffer(1);return t.writeUInt8(e,0),this.write(t),this},BufferWriter.prototype.writeUInt16BE=function(e){var t=new Buffer(2);return t.writeUInt16BE(e,0),this.write(t),this},BufferWriter.prototype.writeUInt16LE=function(e){var t=new Buffer(2);return t.writeUInt16LE(e,0),this.write(t),this},BufferWriter.prototype.writeUInt32BE=function(e){var t=new Buffer(4);return t.writeUInt32BE(e,0),this.write(t),this},BufferWriter.prototype.writeInt32LE=function(e){var t=new Buffer(4);return t.writeInt32LE(e,0),this.write(t),this},BufferWriter.prototype.writeUInt32LE=function(e){var t=new Buffer(4);return t.writeUInt32LE(e,0),this.write(t),this},BufferWriter.prototype.writeUInt64BEBN=function(e){var t=e.toBuffer({size:8});return this.write(t),this},BufferWriter.prototype.writeUInt64LEBN=function(e){var t=e.toBuffer({size:8});return this.writeReverse(t),this},BufferWriter.prototype.writeVarintNum=function(e){var t=BufferWriter.varintBufNum(e);return this.write(t),this},BufferWriter.prototype.writeVarintBN=function(e){var t=BufferWriter.varintBufBN(e);return this.write(t),this},BufferWriter.varintBufNum=function(e){var t=void 0;return e<253?(t=new Buffer(1)).writeUInt8(e,0):e<65536?((t=new Buffer(3)).writeUInt8(253,0),t.writeUInt16LE(e,1)):e<4294967296?((t=new Buffer(5)).writeUInt8(254,0),t.writeUInt32LE(e,1)):((t=new Buffer(9)).writeUInt8(255,0),t.writeInt32LE(-1&e,1),t.writeUInt32LE(Math.floor(e/4294967296),5)),t},BufferWriter.varintBufBN=function(e){var t=void 0,r=e.toNumber();if(r<253)(t=new Buffer(1)).writeUInt8(r,0);else if(r<65536)(t=new Buffer(3)).writeUInt8(253,0),t.writeUInt16LE(r,1);else if(r<4294967296)(t=new Buffer(5)).writeUInt8(254,0),t.writeUInt32LE(r,1);else{var n=new BufferWriter;n.writeUInt8(255),n.writeUInt64LEBN(e);t=n.concat()}return t};var bufferwriter=BufferWriter;function Opcode(e){if(!(this instanceof Opcode))return new Opcode(e);var t;if(lodash$1.isNumber(e))t=e;else{if(!lodash$1.isString(e))throw new TypeError('Unrecognized num type: "'+typeof e+'" for Opcode');t=Opcode.map[e]}return js$2.defineImmutable(this,{num:t}),this}for(var k in Opcode.fromBuffer=function(e){return preconditions.checkArgument(buffer_1.isBuffer(e)),new Opcode(Number("0x"+e.toString("hex")))},Opcode.fromNumber=function(e){return preconditions.checkArgument(lodash$1.isNumber(e)),new Opcode(e)},Opcode.fromString=function(e){preconditions.checkArgument(lodash$1.isString(e));var t=Opcode.map[e];if(void 0===t)throw new TypeError("Invalid opcodestr");return new Opcode(t)},Opcode.prototype.toHex=function(){return this.num.toString(16)},Opcode.prototype.toBuffer=function(){return new Buffer(this.toHex(),"hex")},Opcode.prototype.toNumber=function(){return this.num},Opcode.prototype.toString=function(){var e=Opcode.reverseMap[this.num];if(void 0===e)throw new Error("Opcode does not have a string representation");return e},Opcode.smallInt=function(e){return preconditions.checkArgument(lodash$1.isNumber(e),"Invalid Argument: n should be number"),preconditions.checkArgument(e>=0&&e<=16,"Invalid Argument: n must be between 0 and 16"),0===e?Opcode("OP_0"):new Opcode(Opcode.map.OP_1+e-1)},Opcode.map={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},Opcode.reverseMap=[],Opcode.map)Opcode.reverseMap[Opcode.map[k]]=k;lodash$1.extend(Opcode,Opcode.map),Opcode.isSmallIntOp=function(e){return e instanceof Opcode&&(e=e.toNumber()),e===Opcode.map.OP_0||e>=Opcode.map.OP_1&&e<=Opcode.map.OP_16},Opcode.prototype.inspect=function(){return"<Opcode: "+this.toString()+", hex: "+this.toHex()+", decimal: "+this.num+">"};var opcode=Opcode,Script=function e(t){return this instanceof e?(this.chunks=[],buffer_1.isBuffer(t)?e.fromBuffer(t):t instanceof address$2?e.fromAddress(t):t instanceof e?e.fromBuffer(t.toBuffer()):"string"==typeof t?e.fromString(t):void(void 0!==t&&this.set(t))):new e(t)};Script.prototype.set=function(e){return this.chunks=e.chunks||this.chunks,this},Script.fromBuffer=function(e){var t=new Script;t.chunks=[];for(var r=new bufferreader(e);!r.finished();)try{var n,i,o=r.readUInt8();o>0&&o<opcode.OP_PUSHDATA1?(n=o,t.chunks.push({buf:r.read(n),len:n,opcodenum:o})):o===opcode.OP_PUSHDATA1?(n=r.readUInt8(),i=r.read(n),t.chunks.push({buf:i,len:n,opcodenum:o})):o===opcode.OP_PUSHDATA2?(n=r.readUInt16LE(),i=r.read(n),t.chunks.push({buf:i,len:n,opcodenum:o})):o===opcode.OP_PUSHDATA4?(n=r.readUInt32LE(),i=r.read(n),t.chunks.push({buf:i,len:n,opcodenum:o})):t.chunks.push({opcodenum:o})}catch(t){if(t instanceof RangeError)throw new errors$g.Script.InvalidBuffer(e.toString("hex"));throw t}return t},Script.prototype.toBuffer=function(){for(var e=new bufferwriter,t=0;t<this.chunks.length;t++){var r=this.chunks[t],n=r.opcodenum;e.writeUInt8(r.opcodenum),r.buf&&(n<opcode.OP_PUSHDATA1?e.write(r.buf):n===opcode.OP_PUSHDATA1?(e.writeUInt8(r.len),e.write(r.buf)):n===opcode.OP_PUSHDATA2?(e.writeUInt16LE(r.len),e.write(r.buf)):n===opcode.OP_PUSHDATA4&&(e.writeUInt32LE(r.len),e.write(r.buf)))}return e.concat()},Script.fromASM=function(e){var t=new Script;t.chunks=[];for(var r=e.split(" "),n=0;n<r.length;){var i=r[n],o=opcode(i).toNumber();if(lodash$1.isUndefined(o)){var s=new Buffer(r[n],"hex");t.chunks.push({buf:s,len:s.length,opcodenum:s.length}),n+=1}else o===opcode.OP_PUSHDATA1||o===opcode.OP_PUSHDATA2||o===opcode.OP_PUSHDATA4?(t.chunks.push({buf:new Buffer(r[n+2],"hex"),len:parseInt(r[n+1]),opcodenum:o}),n+=3):(t.chunks.push({opcodenum:o}),n+=1)}return t},Script.fromHex=function(e){return new Script(new buffer$1.Buffer(e,"hex"))},Script.fromString=function(e){if(js$2.isHexa(e)||0===e.length)return new Script(new buffer$1.Buffer(e,"hex"));var t=new Script;t.chunks=[];for(var r=e.split(" "),n=0;n<r.length;){var i=r[n],o=opcode(i).toNumber();if(lodash$1.isUndefined(o)){if(!((o=parseInt(i))>0&&o<opcode.OP_PUSHDATA1))throw new Error("Invalid script: "+JSON.stringify(e));t.chunks.push({buf:new Buffer(r[n+1].slice(2),"hex"),len:o,opcodenum:o}),n+=2}else if(o===opcode.OP_PUSHDATA1||o===opcode.OP_PUSHDATA2||o===opcode.OP_PUSHDATA4){if("0x"!==r[n+2].slice(0,2))throw new Error("Pushdata data must start with 0x");t.chunks.push({buf:new Buffer(r[n+2].slice(2),"hex"),len:parseInt(r[n+1]),opcodenum:o}),n+=3}else t.chunks.push({opcodenum:o}),n+=1}return t},Script.prototype._chunkToString=function(e,t){var r=e.opcodenum,n="asm"===t,i="";if(e.buf)r!==opcode.OP_PUSHDATA1&&r!==opcode.OP_PUSHDATA2&&r!==opcode.OP_PUSHDATA4||(i=i+" "+opcode(r).toString()),e.len>0&&(i=n?i+" "+e.buf.toString("hex"):i+" "+e.len+" 0x"+e.buf.toString("hex"));else if(void 0!==opcode.reverseMap[r])i=i+" "+opcode(r).toString();else{var o=r.toString(16);o.length%2!=0&&(o="0"+o),i=n?i+" "+o:i+" 0x"+o}return i},Script.prototype.toASM=function(){for(var e="",t=0;t<this.chunks.length;t++){var r=this.chunks[t];e+=this._chunkToString(r,"asm")}return e.substr(1)},Script.prototype.toString=function(){for(var e="",t=0;t<this.chunks.length;t++){var r=this.chunks[t];e+=this._chunkToString(r)}return e.substr(1)},Script.prototype.toHex=function(){return this.toBuffer().toString("hex")},Script.prototype.inspect=function(){return"<Script: "+this.toString()+">"},Script.prototype.isPublicKeyHashOut=function(){return!(5!==this.chunks.length||this.chunks[0].opcodenum!==opcode.OP_DUP||this.chunks[1].opcodenum!==opcode.OP_HASH160||!this.chunks[2].buf||20!==this.chunks[2].buf.length||this.chunks[3].opcodenum!==opcode.OP_EQUALVERIFY||this.chunks[4].opcodenum!==opcode.OP_CHECKSIG)},Script.prototype.isPublicKeyHashIn=function(){if(2===this.chunks.length){var e=this.chunks[0].buf,t=this.chunks[1].buf;if(e&&e.length&&48===e[0]&&t&&t.length){var r=t[0];if((4===r||6===r||7===r)&&65===t.length)return!0;if((3===r||2===r)&&33===t.length)return!0}}return!1},Script.prototype.getPublicKey=function(){return preconditions.checkState(this.isPublicKeyOut(),"Can't retreive PublicKey from a non-PK output"),this.chunks[0].buf},Script.prototype.getPublicKeyHash=function(){return preconditions.checkState(this.isPublicKeyHashOut(),"Can't retrieve PublicKeyHash from a non-PKH output"),this.chunks[2].buf},Script.prototype.isPublicKeyOut=function(){if(2===this.chunks.length&&this.chunks[0].buf&&this.chunks[0].buf.length&&this.chunks[1].opcodenum===opcode.OP_CHECKSIG){var e=this.chunks[0].buf,t=e[0],r=!1;if((4!==t&&6!==t&&7!==t||65!==e.length)&&(3!==t&&2!==t||33!==e.length)||(r=!0),r)return publickey$1.isValid(e)}return!1},Script.prototype.isPublicKeyIn=function(){if(1===this.chunks.length){var e=this.chunks[0].buf;if(e&&e.length&&48===e[0])return!0}return!1},Script.prototype.isScriptHashOut=function(){var e=this.toBuffer();return 23===e.length&&e[0]===opcode.OP_HASH160&&20===e[1]&&e[e.length-1]===opcode.OP_EQUAL},Script.prototype.isScriptHashIn=function(){if(this.chunks.length<=1)return!1;var e,t=this.chunks[this.chunks.length-1].buf;if(!t)return!1;try{e=Script.fromBuffer(t)}catch(e){if(e instanceof errors$g.Script.InvalidBuffer)return!1;throw e}return e.classify()!==Script.types.UNKNOWN},Script.prototype.isMultisigOut=function(){return this.chunks.length>3&&opcode.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every(function(e){return e.buf&&buffer_1.isBuffer(e.buf)})&&opcode.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===opcode.OP_CHECKMULTISIG},Script.prototype.isMultisigIn=function(){return this.chunks.length>=2&&0===this.chunks[0].opcodenum&&this.chunks.slice(1,this.chunks.length).every(function(e){return e.buf&&buffer_1.isBuffer(e.buf)&&signature$5.isTxDER(e.buf)})},Script.prototype.isDataOut=function(){return this.chunks.length>=1&&this.chunks[0].opcodenum===opcode.OP_RETURN&&(1===this.chunks.length||2===this.chunks.length&&this.chunks[1].buf&&this.chunks[1].buf.length<=Script.OP_RETURN_STANDARD_SIZE&&this.chunks[1].length===this.chunks.len)},Script.prototype.getData=function(){if(this.isDataOut()||this.isScriptHashOut())return lodash$1.isUndefined(this.chunks[1])?new Buffer(0):new Buffer(this.chunks[1].buf);if(this.isPublicKeyHashOut())return new Buffer(this.chunks[2].buf);throw new Error("Unrecognized script type to get data from")},Script.prototype.isPushOnly=function(){return lodash$1.every(this.chunks,function(e){return e.opcodenum<=opcode.OP_16})},Script.types={},Script.types.UNKNOWN="Unknown",Script.types.PUBKEY_OUT="Pay to public key",Script.types.PUBKEY_IN="Spend from public key",Script.types.PUBKEYHASH_OUT="Pay to public key hash",Script.types.PUBKEYHASH_IN="Spend from public key hash",Script.types.SCRIPTHASH_OUT="Pay to script hash",Script.types.SCRIPTHASH_IN="Spend from script hash",Script.types.MULTISIG_OUT="Pay to multisig",Script.types.MULTISIG_IN="Spend from multisig",Script.types.DATA_OUT="Data push",Script.OP_RETURN_STANDARD_SIZE=80,Script.prototype.classify=function(){if(this._isInput)return this.classifyInput();if(this._isOutput)return this.classifyOutput();var e=this.classifyOutput();return e!=Script.types.UNKNOWN?e:this.classifyInput()},Script.outputIdentifiers={},Script.outputIdentifiers.PUBKEY_OUT=Script.prototype.isPublicKeyOut,Script.outputIdentifiers.PUBKEYHASH_OUT=Script.prototype.isPublicKeyHashOut,Script.outputIdentifiers.MULTISIG_OUT=Script.prototype.isMultisigOut,Script.outputIdentifiers.SCRIPTHASH_OUT=Script.prototype.isScriptHashOut,Script.outputIdentifiers.DATA_OUT=Script.prototype.isDataOut,Script.prototype.classifyOutput=function(){for(var e in Script.outputIdentifiers)if(Script.outputIdentifiers[e].bind(this)())return Script.types[e];return Script.types.UNKNOWN},Script.inputIdentifiers={},Script.inputIdentifiers.PUBKEY_IN=Script.prototype.isPublicKeyIn,Script.inputIdentifiers.PUBKEYHASH_IN=Script.prototype.isPublicKeyHashIn,Script.inputIdentifiers.MULTISIG_IN=Script.prototype.isMultisigIn,Script.inputIdentifiers.SCRIPTHASH_IN=Script.prototype.isScriptHashIn,Script.prototype.classifyInput=function(){for(var e in Script.inputIdentifiers)if(Script.inputIdentifiers[e].bind(this)())return Script.types[e];return Script.types.UNKNOWN},Script.prototype.isStandard=function(){return this.classify()!==Script.types.UNKNOWN},Script.prototype.prepend=function(e){return this._addByType(e,!0),this},Script.prototype.equals=function(e){if(preconditions.checkState(e instanceof Script,"Must provide another script"),this.chunks.length!==e.chunks.length)return!1;var t;for(t=0;t<this.chunks.length;t++){if(buffer_1.isBuffer(this.chunks[t].buf)&&!buffer_1.isBuffer(e.chunks[t].buf))return!1;if(buffer_1.isBuffer(this.chunks[t].buf)&&!buffer_1.equals(this.chunks[t].buf,e.chunks[t].buf))return!1;if(this.chunks[t].opcodenum!==e.chunks[t].opcodenum)return!1}return!0},Script.prototype.add=function(e){return this._addByType(e,!1),this},Script.prototype._addByType=function(e,t){if("string"==typeof e)this._addOpcode(e,t);else if("number"==typeof e)this._addOpcode(e,t);else if(e instanceof opcode)this._addOpcode(e,t);else if(buffer_1.isBuffer(e))this._addBuffer(e,t);else if(e instanceof Script)this.chunks=this.chunks.concat(e.chunks);else{if("object"!=typeof e)throw new Error("Invalid script chunk");this._insertAtPosition(e,t)}},Script.prototype._insertAtPosition=function(e,t){t?this.chunks.unshift(e):this.chunks.push(e)},Script.prototype._addOpcode=function(e,t){var r;return r="number"==typeof e?e:e instanceof opcode?e.toNumber():opcode(e).toNumber(),this._insertAtPosition({opcodenum:r},t),this},Script.prototype._addBuffer=function(e,t){var r,n=e.length;if(n>=0&&n<opcode.OP_PUSHDATA1)r=n;else if(n<Math.pow(2,8))r=opcode.OP_PUSHDATA1;else if(n<Math.pow(2,16))r=opcode.OP_PUSHDATA2;else{if(!(n<Math.pow(2,32)))throw new Error("You can't push that much data");r=opcode.OP_PUSHDATA4}return this._insertAtPosition({buf:e,len:n,opcodenum:r},t),this},Script.prototype.removeCodeseparators=function(){for(var e=[],t=0;t<this.chunks.length;t++)this.chunks[t].opcodenum!==opcode.OP_CODESEPARATOR&&e.push(this.chunks[t]);return this.chunks=e,this},Script.buildMultisigOut=function(e,t,r){preconditions.checkArgument(t<=e.length,"Number of required signatures must be less than or equal to the number of public keys"),r=r||{};var n=new Script;n.add(opcode.smallInt(t));var i=e=lodash$1.map(e,publickey$1);r.noSorting||(i=lodash$1.sortBy(e,function(e){return e.toString("hex")}));for(var o=0;o<i.length;o++){var s=i[o];n.add(s.toBuffer())}return n.add(opcode.smallInt(e.length)),n.add(opcode.OP_CHECKMULTISIG),n},Script.buildMultisigIn=function(e,t,r,n){preconditions.checkArgument(lodash$1.isArray(e)),preconditions.checkArgument(lodash$1.isNumber(t)),preconditions.checkArgument(lodash$1.isArray(r));var i=new Script;return i.add(opcode.OP_0),lodash$1.each(r,function(e){preconditions.checkArgument(buffer_1.isBuffer(e),"Signatures must be an array of Buffers"),i.add(e)}),i},Script.buildP2SHMultisigIn=function(e,t,r,n){preconditions.checkArgument(lodash$1.isArray(e)),preconditions.checkArgument(lodash$1.isNumber(t)),preconditions.checkArgument(lodash$1.isArray(r)),n=n||{};var i=new Script;return i.add(opcode.OP_0),lodash$1.each(r,function(e){preconditions.checkArgument(buffer_1.isBuffer(e),"Signatures must be an array of Buffers"),i.add(e)}),i.add((n.cachedMultisig||Script.buildMultisigOut(e,t,n)).toBuffer()),i},Script.buildPublicKeyHashOut=function(e){preconditions.checkArgument(!lodash$1.isUndefined(e)),preconditions.checkArgument(e instanceof publickey$1||e instanceof address$2||lodash$1.isString(e)),e instanceof publickey$1?e=e.toAddress():lodash$1.isString(e)&&(e=new address$2(e));var t=new Script;return t.add(opcode.OP_DUP).add(opcode.OP_HASH160).add(e.hashBuffer).add(opcode.OP_EQUALVERIFY).add(opcode.OP_CHECKSIG),t._network=e.network,t},Script.buildPublicKeyOut=function(e){preconditions.checkArgument(e instanceof publickey$1);var t=new Script;return t.add(e.toBuffer()).add(opcode.OP_CHECKSIG),t},Script.buildDataOut=function(e,t){preconditions.checkArgument(lodash$1.isUndefined(e)||lodash$1.isString(e)||buffer_1.isBuffer(e)),lodash$1.isString(e)&&(e=new Buffer(e,t));var r=new Script;return r.add(opcode.OP_RETURN),lodash$1.isUndefined(e)||r.add(e),r},Script.buildScriptHashOut=function(e){preconditions.checkArgument(e instanceof Script||e instanceof address$2&&e.isPayToScriptHash());var t=new Script;return t.add(opcode.OP_HASH160).add(e instanceof address$2?e.hashBuffer:hash$a.sha256ripemd160(e.toBuffer())).add(opcode.OP_EQUAL),t._network=e._network||e.network,t},Script.buildPublicKeyIn=function(e,t){preconditions.checkArgument(e instanceof signature$5||buffer_1.isBuffer(e)),preconditions.checkArgument(lodash$1.isUndefined(t)||lodash$1.isNumber(t)),e instanceof signature$5&&(e=e.toBuffer());var r=new Script;return r.add(buffer_1.concat([e,buffer_1.integerAsSingleByteBuffer(t||signature$5.SIGHASH_ALL)])),r},Script.buildPublicKeyHashIn=function(e,t,r){return preconditions.checkArgument(t instanceof signature$5||buffer_1.isBuffer(t)),preconditions.checkArgument(lodash$1.isUndefined(r)||lodash$1.isNumber(r)),t instanceof signature$5&&(t=t.toBuffer()),(new Script).add(buffer_1.concat([t,buffer_1.integerAsSingleByteBuffer(r||signature$5.SIGHASH_ALL)])).add(new publickey$1(e).toBuffer())},Script.empty=function(){return new Script},Script.prototype.toScriptHashOut=function(){return Script.buildScriptHashOut(this)},Script.fromAddress=function(e){if((e=address$2(e)).isPayToScriptHash())return Script.buildScriptHashOut(e);if(e.isPayToPublicKeyHash())return Script.buildPublicKeyHashOut(e);throw new errors$g.Script.UnrecognizedAddress(e)},Script.prototype.getAddressInfo=function(e){if(this._isInput)return this._getInputAddressInfo();if(this._isOutput)return this._getOutputAddressInfo();var t=this._getOutputAddressInfo();return t||this._getInputAddressInfo()},Script.prototype._getOutputAddressInfo=function(){var e={};if(this.isScriptHashOut())e.hashBuffer=this.getData(),e.type=address$2.PayToScriptHash;else{if(!this.isPublicKeyHashOut())return!1;e.hashBuffer=this.getData(),e.type=address$2.PayToPublicKeyHash}return e},Script.prototype._getInputAddressInfo=function(){var e={};if(this.isPublicKeyHashIn())e.hashBuffer=hash$a.sha256ripemd160(this.chunks[1].buf),e.type=address$2.PayToPublicKeyHash;else{if(!this.isScriptHashIn())return!1;e.hashBuffer=hash$a.sha256ripemd160(this.chunks[this.chunks.length-1].buf),e.type=address$2.PayToScriptHash}return e},Script.prototype.toAddress=function(e){var t=this.getAddressInfo();return!!t&&(t.network=networks_1$2.get(e)||this._network||networks_1$2.defaultNetwork,new address$2(t))},Script.prototype.findAndDelete=function(e){for(var t=e.toBuffer().toString("hex"),r=0;r<this.chunks.length;r++){t===Script({chunks:[this.chunks[r]]}).toBuffer().toString("hex")&&this.chunks.splice(r,1)}return this},Script.prototype.checkMinimalPush=function(e){var t=this.chunks[e],r=t.buf,n=t.opcodenum;return!r||(0===r.length?n===opcode.OP_0:1===r.length&&r[0]>=1&&r[0]<=16?n===opcode.OP_1+(r[0]-1):1===r.length&&129===r[0]?n===opcode.OP_1NEGATE:r.length<=75?n===r.length:r.length<=255?n===opcode.OP_PUSHDATA1:!(r.length<=65535)||n===opcode.OP_PUSHDATA2)},Script.prototype._decodeOP_N=function(e){if(e===opcode.OP_0)return 0;if(e>=opcode.OP_1&&e<=opcode.OP_16)return e-(opcode.OP_1-1);throw new Error("Invalid opcode: "+JSON.stringify(e))},Script.prototype.getSignatureOperationsCount=function(e){e=!!lodash$1.isUndefined(e)||e;var t=this,r=0,n=opcode.OP_INVALIDOPCODE;return lodash$1.each(t.chunks,function(i){var o=i.opcodenum;o==opcode.OP_CHECKSIG||o==opcode.OP_CHECKSIGVERIFY?r++:o!=opcode.OP_CHECKMULTISIG&&o!=opcode.OP_CHECKMULTISIGVERIFY||(e&&n>=opcode.OP_1&&n<=opcode.OP_16?r+=t._decodeOP_N(n):r+=20),n=o}),r};var script$1=Script,bufferCompare=function(e,t){for(var r=0,n=0;n<e.length&&n!=t.length&&0==(r=e[n]<t[n]?-1:e[n]>t[n]?1:0);++n);return 0==r&&(t.length>e.length?r=-1:e.length>t.length&&(r=1)),r},MAX_SAFE_INTEGER$9=9007199254740991;function Output(e){if(!(this instanceof Output))return new Output(e);if(!lodash$1.isObject(e))throw new TypeError("Unrecognized argument for Output");var t;this.satoshis=e.satoshis,buffer_1.isBuffer(e.script)?this._scriptBuffer=e.script:(t=lodash$1.isString(e.script)&&js$2.isHexa(e.script)?new buffer$1.Buffer(e.script,"hex"):e.script,this.setScript(t))}Object.defineProperty(Output.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this._script?this._script:(this.setScriptFromBuffer(this._scriptBuffer),this._script)}}),Object.defineProperty(Output.prototype,"satoshis",{configurable:!1,enumerable:!0,get:function(){return this._satoshis},set:function(e){e instanceof bn$2?(this._satoshisBN=e,this._satoshis=e.toNumber()):lodash$1.isString(e)?(this._satoshis=parseInt(e),this._satoshisBN=bn$2.fromNumber(this._satoshis)):(preconditions.checkArgument(js$2.isNaturalNumber(e),"Output satoshis is not a natural number"),this._satoshisBN=bn$2.fromNumber(e),this._satoshis=e),preconditions.checkState(js$2.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}}),Output.prototype.invalidSatoshis=function(){return this._satoshis>MAX_SAFE_INTEGER$9?"transaction txout satoshis greater than max safe integer":this._satoshis!==this._satoshisBN.toNumber()?"transaction txout satoshis has corrupted value":this._satoshis<0&&"transaction txout negative"},Output.prototype.toObject=Output.prototype.toJSON=function(){var e={satoshis:this.satoshis};return e.script=this._scriptBuffer.toString("hex"),e},Output.fromObject=function(e){return new Output(e)},Output.prototype.setScriptFromBuffer=function(e){this._scriptBuffer=e;try{this._script=script$2.fromBuffer(this._scriptBuffer),this._script._isOutput=!0}catch(e){if(!(e instanceof errors$g.Script.InvalidBuffer))throw e;this._script=null}},Output.prototype.setScript=function(e){if(e instanceof script$2)this._scriptBuffer=e.toBuffer(),this._script=e,this._script._isOutput=!0;else if(lodash$1.isString(e))this._script=script$2.fromString(e),this._scriptBuffer=this._script.toBuffer(),this._script._isOutput=!0;else{if(!buffer_1.isBuffer(e))throw new TypeError("Invalid argument type: script");this.setScriptFromBuffer(e)}return this},Output.prototype.inspect=function(){var e;return e=this.script?this.script.inspect():this._scriptBuffer.toString("hex"),"<Output ("+this.satoshis+" sats) "+e+">"},Output.fromBufferReader=function(e){var t={};t.satoshis=e.readUInt64LEBN();var r=e.readVarintNum();return t.script=0!==r?e.read(r):new buffer$1.Buffer([]),new Output(t)},Output.prototype.toBufferWriter=function(e){e||(e=new bufferwriter),e.writeUInt64LEBN(this._satoshisBN);var t=this._scriptBuffer;return e.writeVarintNum(t.length),e.write(t),e};var output$7=Output,MAXINT=4294967295,DEFAULT_RBF_SEQNUMBER=MAXINT-2,DEFAULT_SEQNUMBER=MAXINT,DEFAULT_LOCKTIME_SEQNUMBER=MAXINT-1;function Input(e){return this instanceof Input?e?this._fromObject(e):void 0:new Input(e)}Input.MAXINT=MAXINT,Input.DEFAULT_SEQNUMBER=DEFAULT_SEQNUMBER,Input.DEFAULT_LOCKTIME_SEQNUMBER=DEFAULT_LOCKTIME_SEQNUMBER,Input.DEFAULT_RBF_SEQNUMBER=DEFAULT_RBF_SEQNUMBER,Object.defineProperty(Input.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this.isNull()?null:(this._script||(this._script=new script$2(this._scriptBuffer),this._script._isInput=!0),this._script)}}),Input.fromObject=function(e){return preconditions.checkArgument(lodash$1.isObject(e)),(new Input)._fromObject(e)},Input.prototype._fromObject=function(e){var t;if(t=lodash$1.isString(e.prevTxId)&&js$2.isHexa(e.prevTxId)?new buffer$1.Buffer(e.prevTxId,"hex"):e.prevTxId,this.output=e.output?e.output instanceof output$7?e.output:new output$7(e.output):void 0,this.prevTxId=t||e.txidbuf,this.outputIndex=lodash$1.isUndefined(e.outputIndex)?e.txoutnum:e.outputIndex,this.sequenceNumber=lodash$1.isUndefined(e.sequenceNumber)?lodash$1.isUndefined(e.seqnum)?DEFAULT_SEQNUMBER:e.seqnum:e.sequenceNumber,lodash$1.isUndefined(e.script)&&lodash$1.isUndefined(e.scriptBuffer))throw new errors$g.Transaction.Input.MissingScript;return this.setScript(e.scriptBuffer||e.script),this},Input.prototype.toObject=Input.prototype.toJSON=function(){var e={prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,sequenceNumber:this.sequenceNumber,script:this._scriptBuffer.toString("hex")};return this.script&&(e.scriptString=this.script.toString()),this.output&&(e.output=this.output.toObject()),e},Input.fromBufferReader=function(e){var t=new Input;return t.prevTxId=e.readReverse(32),t.outputIndex=e.readUInt32LE(),t._scriptBuffer=e.readVarLengthBuffer(),t.sequenceNumber=e.readUInt32LE(),t},Input.prototype.toBufferWriter=function(e){e||(e=new bufferwriter),e.writeReverse(this.prevTxId),e.writeUInt32LE(this.outputIndex);var t=this._scriptBuffer;return e.writeVarintNum(t.length),e.write(t),e.writeUInt32LE(this.sequenceNumber),e},Input.prototype.setScript=function(e){if(this._script=null,e instanceof script$2)this._script=e,this._script._isInput=!0,this._scriptBuffer=e.toBuffer();else if(js$2.isHexa(e))this._scriptBuffer=new buffer$1.Buffer(e,"hex");else if(lodash$1.isString(e))this._script=new script$2(e),this._script._isInput=!0,this._scriptBuffer=this._script.toBuffer();else{if(!buffer_1.isBuffer(e))throw new TypeError("Invalid argument type: script");this._scriptBuffer=new buffer$1.Buffer(e)}return this},Input.prototype.getSignatures=function(){throw new errors$g.AbstractMethodInvoked("Trying to sign unsupported output type (only P2PKH and P2SH multisig inputs are supported) for input: "+JSON.stringify(this))},Input.prototype.isFullySigned=function(){throw new errors$g.AbstractMethodInvoked("Input#isFullySigned")},Input.prototype.isFinal=function(){return 4294967295!==this.sequenceNumber},Input.prototype.addSignature=function(){throw new errors$g.AbstractMethodInvoked("Input#addSignature")},Input.prototype.clearSignatures=function(){throw new errors$g.AbstractMethodInvoked("Input#clearSignatures")},Input.prototype.isValidSignature=function(e,t){return t.signature.nhashtype=t.sigtype,sighash_1.verify(e,t.signature,t.publicKey,t.inputIndex,this.output.script)},Input.prototype.isNull=function(){return"0000000000000000000000000000000000000000000000000000000000000000"===this.prevTxId.toString("hex")&&4294967295===this.outputIndex},Input.prototype._estimateSize=function(){return this.toBufferWriter().toBuffer().length};var input$6=Input;function TransactionSignature(e){if(!(this instanceof TransactionSignature))return new TransactionSignature(e);if(e instanceof TransactionSignature)return e;if(lodash$1.isObject(e))return this._fromObject(e);throw new errors$g.InvalidArgument("TransactionSignatures must be instantiated from an object")}inherits$2(TransactionSignature,signature$5),TransactionSignature.prototype._fromObject=function(e){return this._checkObjectArgs(e),this.publicKey=new publickey$1(e.publicKey),this.prevTxId=buffer_1.isBuffer(e.prevTxId)?e.prevTxId:new Buffer(e.prevTxId,"hex"),this.outputIndex=e.outputIndex,this.inputIndex=e.inputIndex,this.signature=e.signature instanceof signature$5?e.signature:buffer_1.isBuffer(e.signature)?signature$5.fromBuffer(e.signature):signature$5.fromString(e.signature),this.sigtype=e.sigtype,this},TransactionSignature.prototype._checkObjectArgs=function(e){preconditions.checkArgument(publickey$1(e.publicKey),"publicKey"),preconditions.checkArgument(!lodash$1.isUndefined(e.inputIndex),"inputIndex"),preconditions.checkArgument(!lodash$1.isUndefined(e.outputIndex),"outputIndex"),preconditions.checkState(lodash$1.isNumber(e.inputIndex),"inputIndex must be a number"),preconditions.checkState(lodash$1.isNumber(e.outputIndex),"outputIndex must be a number"),preconditions.checkArgument(e.signature,"signature"),preconditions.checkArgument(e.prevTxId,"prevTxId"),preconditions.checkState(e.signature instanceof signature$5||buffer_1.isBuffer(e.signature)||js$2.isHexa(e.signature),"signature must be a buffer or hexa value"),preconditions.checkState(buffer_1.isBuffer(e.prevTxId)||js$2.isHexa(e.prevTxId),"prevTxId must be a buffer or hexa value"),preconditions.checkArgument(e.sigtype,"sigtype"),preconditions.checkState(lodash$1.isNumber(e.sigtype),"sigtype must be a number")},TransactionSignature.prototype.toObject=TransactionSignature.prototype.toJSON=function(){return{publicKey:this.publicKey.toString(),prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,inputIndex:this.inputIndex,signature:this.signature.toString(),sigtype:this.sigtype}},TransactionSignature.fromObject=function(e){return preconditions.checkArgument(e),new TransactionSignature(e)};var signature$6=TransactionSignature;function PublicKeyInput(){input$6.apply(this,arguments)}inherits$2(PublicKeyInput,input$6),PublicKeyInput.prototype.getSignatures=function(e,t,r,n){preconditions.checkState(this.output instanceof output$7),n=n||signature$5.SIGHASH_ALL;var i=t.toPublicKey();return i.toString()===this.output.script.getPublicKey().toString("hex")?[new signature$6({publicKey:i,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:sighash_1.sign(e,t,n,r,this.output.script),sigtype:n})]:[]},PublicKeyInput.prototype.addSignature=function(e,t){return preconditions.checkState(this.isValidSignature(e,t),"Signature is invalid"),this.setScript(script$2.buildPublicKeyIn(t.signature.toDER(),t.sigtype)),this},PublicKeyInput.prototype.clearSignatures=function(){return this.setScript(script$2.empty()),this},PublicKeyInput.prototype.isFullySigned=function(){return this.script.isPublicKeyIn()},PublicKeyInput.SCRIPT_MAX_SIZE=73,PublicKeyInput.prototype._estimateSize=function(){return PublicKeyInput.SCRIPT_MAX_SIZE};var publickey=PublicKeyInput;function PublicKeyHashInput(){input$6.apply(this,arguments)}inherits$2(PublicKeyHashInput,input$6),PublicKeyHashInput.prototype.getSignatures=function(e,t,r,n,i){return preconditions.checkState(this.output instanceof output$7),i=i||hash$a.sha256ripemd160(t.publicKey.toBuffer()),n=n||signature$5.SIGHASH_ALL,buffer_1.equals(i,this.output.script.getPublicKeyHash())?[new signature$6({publicKey:t.publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:sighash_1.sign(e,t,n,r,this.output.script),sigtype:n})]:[]},PublicKeyHashInput.prototype.addSignature=function(e,t){return preconditions.checkState(this.isValidSignature(e,t),"Signature is invalid"),this.setScript(script$2.buildPublicKeyHashIn(t.publicKey,t.signature.toDER(),t.sigtype)),this},PublicKeyHashInput.prototype.clearSignatures=function(){return this.setScript(script$2.empty()),this},PublicKeyHashInput.prototype.isFullySigned=function(){return this.script.isPublicKeyHashIn()},PublicKeyHashInput.SCRIPT_MAX_SIZE=107,PublicKeyHashInput.prototype._estimateSize=function(){return PublicKeyHashInput.SCRIPT_MAX_SIZE};var publickeyhash=PublicKeyHashInput;function MultiSigInput(e,t,r,n){input$6.apply(this,arguments);var i=this;t=t||e.publicKeys,r=r||e.threshold,n=n||e.signatures,this.publicKeys=lodash$1.sortBy(t,function(e){return e.toString("hex")}),preconditions.checkState(script$2.buildMultisigOut(this.publicKeys,r).equals(this.output.script),"Provided public keys don't match to the provided output script"),this.publicKeyIndex={},lodash$1.each(this.publicKeys,function(e,t){i.publicKeyIndex[e.toString()]=t}),this.threshold=r,this.signatures=n?this._deserializeSignatures(n):new Array(this.publicKeys.length)}inherits$2(MultiSigInput,input$6),MultiSigInput.prototype.toObject=function(){var e=input$6.prototype.toObject.apply(this,arguments);return e.threshold=this.threshold,e.publicKeys=lodash$1.map(this.publicKeys,function(e){return e.toString()}),e.signatures=this._serializeSignatures(),e},MultiSigInput.prototype._deserializeSignatures=function(e){return lodash$1.map(e,function(e){if(e)return new signature$6(e)})},MultiSigInput.prototype._serializeSignatures=function(){return lodash$1.map(this.signatures,function(e){if(e)return e.toObject()})},MultiSigInput.prototype.getSignatures=function(e,t,r,n){preconditions.checkState(this.output instanceof output$7),n=n||signature$5.SIGHASH_ALL;var i=this,o=[];return lodash$1.each(this.publicKeys,function(s){s.toString()===t.publicKey.toString()&&o.push(new signature$6({publicKey:t.publicKey,prevTxId:i.prevTxId,outputIndex:i.outputIndex,inputIndex:r,signature:sighash_1.sign(e,t,n,r,i.output.script),sigtype:n}))}),o},MultiSigInput.prototype.addSignature=function(e,t){return preconditions.checkState(!this.isFullySigned(),"All needed signatures have already been added"),preconditions.checkArgument(!lodash$1.isUndefined(this.publicKeyIndex[t.publicKey.toString()]),"Signature has no matching public key"),preconditions.checkState(this.isValidSignature(e,t)),this.signatures[this.publicKeyIndex[t.publicKey.toString()]]=t,this._updateScript(),this},MultiSigInput.prototype._updateScript=function(){return this.setScript(script$2.buildMultisigIn(this.publicKeys,this.threshold,this._createSignatures())),this},MultiSigInput.prototype._createSignatures=function(){return lodash$1.map(lodash$1.filter(this.signatures,function(e){return!lodash$1.isUndefined(e)}),function(e){return buffer_1.concat([e.signature.toDER(),buffer_1.integerAsSingleByteBuffer(e.sigtype)])})},MultiSigInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},MultiSigInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},MultiSigInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},MultiSigInput.prototype.countSignatures=function(){return lodash$1.reduce(this.signatures,function(e,t){return e+!!t},0)},MultiSigInput.prototype.publicKeysWithoutSignature=function(){var e=this;return lodash$1.filter(this.publicKeys,function(t){return!e.signatures[e.publicKeyIndex[t.toString()]]})},MultiSigInput.prototype.isValidSignature=function(e,t){return t.signature.nhashtype=t.sigtype,sighash_1.verify(e,t.signature,t.publicKey,t.inputIndex,this.output.script)},MultiSigInput.normalizeSignatures=function(e,t,r,n,i){return i.map(function(i){var o=null;return n=n.filter(function(n){if(o)return!0;var s=new signature$6({signature:signature$5.fromTxFormat(n),publicKey:i,prevTxId:t.prevTxId,outputIndex:t.outputIndex,inputIndex:r,sigtype:signature$5.SIGHASH_ALL});return s.signature.nhashtype=s.sigtype,!sighash_1.verify(e,s.signature,s.publicKey,s.inputIndex,t.output.script)||(o=s,!1)}),o||null})},MultiSigInput.OPCODES_SIZE=1,MultiSigInput.SIGNATURE_SIZE=73,MultiSigInput.prototype._estimateSize=function(){return MultiSigInput.OPCODES_SIZE+this.threshold*MultiSigInput.SIGNATURE_SIZE};var multisig$1=MultiSigInput;function MultiSigScriptHashInput(e,t,r,n){input$6.apply(this,arguments);var i=this;t=t||e.publicKeys,r=r||e.threshold,n=n||e.signatures,this.publicKeys=lodash$1.sortBy(t,function(e){return e.toString("hex")}),this.redeemScript=script$2.buildMultisigOut(this.publicKeys,r),preconditions.checkState(script$2.buildScriptHashOut(this.redeemScript).equals(this.output.script),"Provided public keys don't hash to the provided output"),this.publicKeyIndex={},lodash$1.each(this.publicKeys,function(e,t){i.publicKeyIndex[e.toString()]=t}),this.threshold=r,this.signatures=n?this._deserializeSignatures(n):new Array(this.publicKeys.length)}inherits$2(MultiSigScriptHashInput,input$6),MultiSigScriptHashInput.prototype.toObject=function(){var e=input$6.prototype.toObject.apply(this,arguments);return e.threshold=this.threshold,e.publicKeys=lodash$1.map(this.publicKeys,function(e){return e.toString()}),e.signatures=this._serializeSignatures(),e},MultiSigScriptHashInput.prototype._deserializeSignatures=function(e){return lodash$1.map(e,function(e){if(e)return new signature$6(e)})},MultiSigScriptHashInput.prototype._serializeSignatures=function(){return lodash$1.map(this.signatures,function(e){if(e)return e.toObject()})},MultiSigScriptHashInput.prototype.getSignatures=function(e,t,r,n){preconditions.checkState(this.output instanceof output$7),n=n||signature$5.SIGHASH_ALL;var i=this,o=[];return lodash$1.each(this.publicKeys,function(s){s.toString()===t.publicKey.toString()&&o.push(new signature$6({publicKey:t.publicKey,prevTxId:i.prevTxId,outputIndex:i.outputIndex,inputIndex:r,signature:sighash_1.sign(e,t,n,r,i.redeemScript),sigtype:n}))}),o},MultiSigScriptHashInput.prototype.addSignature=function(e,t){return preconditions.checkState(!this.isFullySigned(),"All needed signatures have already been added"),preconditions.checkArgument(!lodash$1.isUndefined(this.publicKeyIndex[t.publicKey.toString()]),"Signature has no matching public key"),preconditions.checkState(this.isValidSignature(e,t)),this.signatures[this.publicKeyIndex[t.publicKey.toString()]]=t,this._updateScript(),this},MultiSigScriptHashInput.prototype._updateScript=function(){return this.setScript(script$2.buildP2SHMultisigIn(this.publicKeys,this.threshold,this._createSignatures(),{cachedMultisig:this.redeemScript})),this},MultiSigScriptHashInput.prototype._createSignatures=function(){return lodash$1.map(lodash$1.filter(this.signatures,function(e){return!lodash$1.isUndefined(e)}),function(e){return buffer_1.concat([e.signature.toDER(),buffer_1.integerAsSingleByteBuffer(e.sigtype)])})},MultiSigScriptHashInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},MultiSigScriptHashInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},MultiSigScriptHashInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},MultiSigScriptHashInput.prototype.countSignatures=function(){return lodash$1.reduce(this.signatures,function(e,t){return e+!!t},0)},MultiSigScriptHashInput.prototype.publicKeysWithoutSignature=function(){var e=this;return lodash$1.filter(this.publicKeys,function(t){return!e.signatures[e.publicKeyIndex[t.toString()]]})},MultiSigScriptHashInput.prototype.isValidSignature=function(e,t){return t.signature.nhashtype=t.sigtype,sighash_1.verify(e,t.signature,t.publicKey,t.inputIndex,this.redeemScript)},MultiSigScriptHashInput.OPCODES_SIZE=7,MultiSigScriptHashInput.SIGNATURE_SIZE=74,MultiSigScriptHashInput.PUBKEY_SIZE=34,MultiSigScriptHashInput.prototype._estimateSize=function(){return MultiSigScriptHashInput.OPCODES_SIZE+this.threshold*MultiSigScriptHashInput.SIGNATURE_SIZE+this.publicKeys.length*MultiSigScriptHashInput.PUBKEY_SIZE};var multisigscripthash=MultiSigScriptHashInput,input$7=input$6,PublicKey$2=publickey,PublicKeyHash=publickeyhash,MultiSig=multisig$1,MultiSigScriptHash=multisigscripthash;input$7.PublicKey=PublicKey$2,input$7.PublicKeyHash=PublicKeyHash,input$7.MultiSig=MultiSig,input$7.MultiSigScriptHash=MultiSigScriptHash;var SIGHASH_SINGLE_BUG="0000000000000000000000000000000000000000000000000000000000000001",BITS_64_ON="ffffffffffffffff",sighash=function(e,t,r,n){var i,o=input$7,s=transaction$2.shallowCopy(e);for((n=new script$2(n)).removeCodeseparators(),i=0;i<s.inputs.length;i++)s.inputs[i]=new o(s.inputs[i]).setScript(script$2.empty());if(s.inputs[r]=new o(s.inputs[r]).setScript(n),(31&t)===signature$5.SIGHASH_NONE||(31&t)===signature$5.SIGHASH_SINGLE)for(i=0;i<s.inputs.length;i++)i!==r&&(s.inputs[i].sequenceNumber=0);if((31&t)===signature$5.SIGHASH_NONE)s.outputs=[];else if((31&t)===signature$5.SIGHASH_SINGLE){if(r>=s.outputs.length)return new Buffer(SIGHASH_SINGLE_BUG,"hex");for(s.outputs.length=r+1,i=0;i<r;i++)s.outputs[i]=new output$7({satoshis:bn$2.fromBuffer(new buffer$1.Buffer(BITS_64_ON,"hex")),script:script$2.empty()})}t&signature$5.SIGHASH_ANYONECANPAY&&(s.inputs=[s.inputs[r]]);var a=(new bufferwriter).write(s.toBuffer()).writeInt32LE(t).toBuffer(),c=hash$a.sha256sha256(a);return c=new bufferreader(c).readReverse()};function sign$3(e,t,r,n,i){var o=sighash(e,r,n,i);return ecdsa.sign(o,t,"little").set({nhashtype:r})}function verify$2(e,t,r,n,i){preconditions.checkArgument(!lodash$1.isUndefined(e)),preconditions.checkArgument(!lodash$1.isUndefined(t)&&!lodash$1.isUndefined(t.nhashtype));var o=sighash(e,t.nhashtype,n,i);return ecdsa.verify(o,t,r,"little")}var sighash_1={sighash:sighash,sign:sign$3,verify:verify$2},UNITS={BTC:[1e8,8],mBTC:[1e5,5],uBTC:[100,2],bits:[100,2],satoshis:[1,0]};function Unit(e,t){if(!(this instanceof Unit))return new Unit(e,t);if(lodash$1.isNumber(t)){if(t<=0)throw new errors$g.Unit.InvalidRate(t);e/=t,t=Unit.BTC}this._value=this._from(e,t);var r=this;Object.keys(UNITS).forEach(function(e){Object.defineProperty(r,e,{get:function(){return r.to(e)},enumerable:!0})})}Object.keys(UNITS).forEach(function(e){Unit[e]=e}),Unit.fromObject=function(e){return preconditions.checkArgument(lodash$1.isObject(e),"Argument is expected to be an object"),new Unit(e.amount,e.code)},Unit.fromBTC=function(e){return new Unit(e,Unit.BTC)},Unit.fromMillis=Unit.fromMilis=function(e){return new Unit(e,Unit.mBTC)},Unit.fromMicros=Unit.fromBits=function(e){return new Unit(e,Unit.bits)},Unit.fromSatoshis=function(e){return new Unit(e,Unit.satoshis)},Unit.fromFiat=function(e,t){return new Unit(e,t)},Unit.prototype._from=function(e,t){if(!UNITS[t])throw new errors$g.Unit.UnknownCode(t);return parseInt((e*UNITS[t][0]).toFixed())},Unit.prototype.to=function(e){if(lodash$1.isNumber(e)){if(e<=0)throw new errors$g.Unit.InvalidRate(e);return parseFloat((this.BTC*e).toFixed(2))}if(!UNITS[e])throw new errors$g.Unit.UnknownCode(e);var t=this._value/UNITS[e][0];return parseFloat(t.toFixed(UNITS[e][1]))},Unit.prototype.toBTC=function(){return this.to(Unit.BTC)},Unit.prototype.toMillis=Unit.prototype.toMilis=function(){return this.to(Unit.mBTC)},Unit.prototype.toMicros=Unit.prototype.toBits=function(){return this.to(Unit.bits)},Unit.prototype.toSatoshis=function(){return this.to(Unit.satoshis)},Unit.prototype.atRate=function(e){return this.to(e)},Unit.prototype.toString=function(){return this.satoshis+" satoshis"},Unit.prototype.toObject=Unit.prototype.toJSON=function(){return{amount:this.BTC,code:Unit.BTC}},Unit.prototype.inspect=function(){return"<Unit: "+this.toString()+">"};var unit=Unit;function UnspentOutput(e){if(!(this instanceof UnspentOutput))return new UnspentOutput(e);preconditions.checkArgument(lodash$1.isObject(e),"Must provide an object from where to extract data");var t=e.address?new address$2(e.address):void 0,r=e.txid?e.txid:e.txId;if(!r||!js$2.isHexaString(r)||r.length>64)throw new Error("Invalid TXID in object",e);var n=lodash$1.isUndefined(e.vout)?e.outputIndex:e.vout;if(!lodash$1.isNumber(n))throw new Error("Invalid outputIndex, received "+n);preconditions.checkArgument(!lodash$1.isUndefined(e.scriptPubKey)||!lodash$1.isUndefined(e.script),"Must provide the scriptPubKey for that output!");var i=new script$2(e.scriptPubKey||e.script);preconditions.checkArgument(!lodash$1.isUndefined(e.amount)||!lodash$1.isUndefined(e.satoshis),"Must provide an amount for the output");var o=lodash$1.isUndefined(e.amount)?e.satoshis:new unit.fromBTC(e.amount).toSatoshis();preconditions.checkArgument(lodash$1.isNumber(o),"Amount must be a number"),js$2.defineImmutable(this,{address:t,txId:r,outputIndex:n,script:i,satoshis:o})}UnspentOutput.prototype.inspect=function(){return"<UnspentOutput: "+this.txId+":"+this.outputIndex+", satoshis: "+this.satoshis+", address: "+this.address+">"},UnspentOutput.prototype.toString=function(){return this.txId+":"+this.outputIndex},UnspentOutput.fromObject=function(e){return new UnspentOutput(e)},UnspentOutput.prototype.toObject=UnspentOutput.prototype.toJSON=function(){return{address:this.address?this.address.toString():void 0,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString("hex"),amount:unit.fromSatoshis(this.satoshis).toBTC()}};var unspentoutput=UnspentOutput,G1_PREFIX_MASK=2,G2_PREFIX_MASK=10;function CompressedG1(e){return this instanceof CompressedG1?e?this._fromObject(e):void 0:new CompressedG1(e)}function CompressedG2(e){return this instanceof CompressedG2?e?this._fromObject(e):void 0:new CompressedG2(e)}function ZCProof(e){return this instanceof ZCProof?e?this._fromObject(e):void 0:new ZCProof(e)}CompressedG1.fromObject=function(e){return preconditions.checkArgument(_.isObject(e)),(new CompressedG1)._fromObject(e)},CompressedG1.prototype._fromObject=function(e){return this.y_lsb=e.y_lsb,this.x=new buffer$1.Buffer(e.x,"hex"),this},CompressedG1.prototype.toObject=CompressedG1.prototype.toJSON=function(){return{y_lsb:this.y_lsb,x:this.x.toString("hex")}},CompressedG1.fromBufferReader=function(e){var t=new CompressedG1,r=e.readUInt8();return t.y_lsb=1&r,t.x=e.read(32),t},CompressedG1.prototype.toBufferWriter=function(e){return e||(e=new bufferwriter),e.writeUInt8(G1_PREFIX_MASK|this.y_lsb),e.write(this.x),e},CompressedG2.fromObject=function(e){return preconditions.checkArgument(_.isObject(e)),(new CompressedG2)._fromObject(e)},CompressedG2.prototype._fromObject=function(e){return this.y_gt=e.y_gt,this.x=new buffer$1.Buffer(e.x,"hex"),this},CompressedG2.prototype.toObject=CompressedG2.prototype.toJSON=function(){return{y_gt:this.y_gt,x:this.x.toString("hex")}},CompressedG2.fromBufferReader=function(e){var t=new CompressedG2,r=e.readUInt8();return t.y_gt=1&r,t.x=e.read(64),t},CompressedG2.prototype.toBufferWriter=function(e){return e||(e=new bufferwriter),e.writeUInt8(G2_PREFIX_MASK|this.y_gt),e.write(this.x),e},ZCProof.fromObject=function(e){return preconditions.checkArgument(_.isObject(e)),(new ZCProof)._fromObject(e)},ZCProof.prototype._fromObject=function(e){return this.g_A=CompressedG1.fromObject(e.g_A),this.g_A_prime=CompressedG1.fromObject(e.g_A_prime),this.g_B=CompressedG2.fromObject(e.g_B),this.g_B_prime=CompressedG1.fromObject(e.g_B_prime),this.g_C=CompressedG1.fromObject(e.g_C),this.g_C_prime=CompressedG1.fromObject(e.g_C_prime),this.g_K=CompressedG1.fromObject(e.g_K),this.g_H=CompressedG1.fromObject(e.g_H),this},ZCProof.prototype.toObject=ZCProof.prototype.toJSON=function(){return{g_A:this.g_A.toObject(),g_A_prime:this.g_A_prime.toObject(),g_B:this.g_B.toObject(),g_B_prime:this.g_B_prime.toObject(),g_C:this.g_C.toObject(),g_C_prime:this.g_C_prime.toObject(),g_K:this.g_K.toObject(),g_H:this.g_H.toObject()}},ZCProof.fromBufferReader=function(e){var t=new ZCProof;return t.g_A=CompressedG1.fromBufferReader(e),t.g_A_prime=CompressedG1.fromBufferReader(e),t.g_B=CompressedG2.fromBufferReader(e),t.g_B_prime=CompressedG1.fromBufferReader(e),t.g_C=CompressedG1.fromBufferReader(e),t.g_C_prime=CompressedG1.fromBufferReader(e),t.g_K=CompressedG1.fromBufferReader(e),t.g_H=CompressedG1.fromBufferReader(e),t},ZCProof.prototype.toBufferWriter=function(e){return e||(e=new bufferwriter),this.g_A.toBufferWriter(e),this.g_A_prime.toBufferWriter(e),this.g_B.toBufferWriter(e),this.g_B_prime.toBufferWriter(e),this.g_C.toBufferWriter(e),this.g_C_prime.toBufferWriter(e),this.g_K.toBufferWriter(e),this.g_H.toBufferWriter(e),e};var proof=ZCProof,ZC_NUM_JS_INPUTS=2,ZC_NUM_JS_OUTPUTS=2,ZC_NOTECIPHERTEXT_SIZE=601;function JSDescription(e){return this instanceof JSDescription?(this.nullifiers=[],this.commitments=[],this.ciphertexts=[],this.macs=[],e?this._fromObject(e):void 0):new JSDescription(e)}Object.defineProperty(JSDescription.prototype,"vpub_old",{configurable:!1,enumerable:!0,get:function(){return this._vpub_old},set:function(e){e instanceof bn$2?(this._vpub_oldBN=e,this._vpub_old=e.toNumber()):lodash$1.isString(e)?(this._vpub_old=parseInt(e),this._vpub_oldBN=bn$2.fromNumber(this._vpub_old)):(preconditions.checkArgument(js$2.isNaturalNumber(e),"vpub_old is not a natural number"),this._vpub_oldBN=bn$2.fromNumber(e),this._vpub_old=e),preconditions.checkState(js$2.isNaturalNumber(this._vpub_old),"vpub_old is not a natural number")}}),Object.defineProperty(JSDescription.prototype,"vpub_new",{configurable:!1,enumerable:!0,get:function(){return this._vpub_new},set:function(e){e instanceof bn$2?(this._vpub_newBN=e,this._vpub_new=e.toNumber()):lodash$1.isString(e)?(this._vpub_new=parseInt(e),this._vpub_newBN=bn$2.fromNumber(this._vpub_new)):(preconditions.checkArgument(js$2.isNaturalNumber(e),"vpub_new is not a natural number"),this._vpub_newBN=bn$2.fromNumber(e),this._vpub_new=e),preconditions.checkState(js$2.isNaturalNumber(this._vpub_new),"vpub_new is not a natural number")}}),JSDescription.fromObject=function(e){return preconditions.checkArgument(lodash$1.isObject(e)),(new JSDescription)._fromObject(e)},JSDescription.prototype._fromObject=function(e){var t=[];lodash$1.each(e.nullifiers,function(e){t.push(buffer_1.reverse(new buffer$1.Buffer(e,"hex")))});var r=[];lodash$1.each(e.commitments,function(e){r.push(buffer_1.reverse(new buffer$1.Buffer(e,"hex")))});var n=[];lodash$1.each(e.ciphertexts,function(e){n.push(new buffer$1.Buffer(e,"hex"))});var i=[];return lodash$1.each(e.macs,function(e){i.push(buffer_1.reverse(new buffer$1.Buffer(e,"hex")))}),this.vpub_old=e.vpub_old,this.vpub_new=e.vpub_new,this.anchor=buffer_1.reverse(new buffer$1.Buffer(e.anchor,"hex")),this.nullifiers=t,this.commitments=r,this.ephemeralKey=buffer_1.reverse(new buffer$1.Buffer(e.ephemeralKey,"hex")),this.ciphertexts=n,this.randomSeed=buffer_1.reverse(new buffer$1.Buffer(e.randomSeed,"hex")),this.macs=i,this.proof=proof.fromObject(e.proof),this},JSDescription.prototype.toObject=JSDescription.prototype.toJSON=function(){var e=[];lodash$1.each(this.nullifiers,function(t){e.push(buffer_1.reverse(t).toString("hex"))});var t=[];lodash$1.each(this.commitments,function(e){t.push(buffer_1.reverse(e).toString("hex"))});var r=[];lodash$1.each(this.ciphertexts,function(e){r.push(e.toString("hex"))});var n=[];return lodash$1.each(this.macs,function(e){n.push(buffer_1.reverse(e).toString("hex"))}),{vpub_old:this.vpub_old,vpub_new:this.vpub_new,anchor:buffer_1.reverse(this.anchor).toString("hex"),nullifiers:e,commitments:t,ephemeralKey:buffer_1.reverse(this.ephemeralKey).toString("hex"),ciphertexts:r,randomSeed:buffer_1.reverse(this.randomSeed).toString("hex"),macs:n,proof:this.proof.toObject()}},JSDescription.fromBufferReader=function(e){var t,r=new JSDescription;for(r.vpub_old=e.readUInt64LEBN(),r.vpub_new=e.readUInt64LEBN(),r.anchor=e.read(32),t=0;t<ZC_NUM_JS_INPUTS;t++)r.nullifiers.push(e.read(32));for(t=0;t<ZC_NUM_JS_OUTPUTS;t++)r.commitments.push(e.read(32));for(r.ephemeralKey=e.read(32),r.randomSeed=e.read(32),t=0;t<ZC_NUM_JS_INPUTS;t++)r.macs.push(e.read(32));for(r.proof=proof.fromBufferReader(e),t=0;t<ZC_NUM_JS_OUTPUTS;t++)r.ciphertexts.push(e.read(ZC_NOTECIPHERTEXT_SIZE));return r},JSDescription.prototype.toBufferWriter=function(e){var t;for(e||(e=new bufferwriter),e.writeUInt64LEBN(this._vpub_oldBN),e.writeUInt64LEBN(this._vpub_newBN),e.write(this.anchor),t=0;t<ZC_NUM_JS_INPUTS;t++)e.write(this.nullifiers[t]);for(t=0;t<ZC_NUM_JS_OUTPUTS;t++)e.write(this.commitments[t]);for(e.write(this.ephemeralKey),e.write(this.randomSeed),t=0;t<ZC_NUM_JS_INPUTS;t++)e.write(this.macs[t]);for(this.proof.toBufferWriter(e),t=0;t<ZC_NUM_JS_OUTPUTS;t++)e.write(this.ciphertexts[t]);return e};var jsdescription=JSDescription,compare$5=Buffer.compare||bufferCompare,PublicKeyHashInput$1=input$7.PublicKeyHash,PublicKeyInput$1=input$7.PublicKey,MultiSigScriptHashInput$1=input$7.MultiSigScriptHash,MultiSigInput$1=input$7.MultiSig;function Transaction$1(e){if(!(this instanceof Transaction$1))return new Transaction$1(e);if(this.inputs=[],this.outputs=[],this.joinSplits=[],this._inputAmount=void 0,this._outputAmount=void 0,e){if(e instanceof Transaction$1)return Transaction$1.shallowCopy(e);if(js$2.isHexa(e))this.fromString(e);else if(buffer_1.isBuffer(e))this.fromBuffer(e);else{if(!lodash$1.isObject(e))throw new errors$g.InvalidArgument("Must provide an object or string to deserialize a transaction");this.fromObject(e)}}else this._newTransaction()}var CURRENT_VERSION=1,DEFAULT_NLOCKTIME=0,MAX_BLOCK_SIZE=1e6;Transaction$1.DUST_AMOUNT=546,Transaction$1.FEE_SECURITY_MARGIN=15,Transaction$1.MAX_MONEY=21e14,Transaction$1.NLOCKTIME_BLOCKHEIGHT_LIMIT=5e8,Transaction$1.NLOCKTIME_MAX_VALUE=4294967295,Transaction$1.FEE_PER_KB=1e4,Transaction$1.CHANGE_OUTPUT_MAX_SIZE=62,Transaction$1.MAXIMUM_EXTRA_SIZE=26,Transaction$1.shallowCopy=function(e){return new Transaction$1(e.toBuffer())};var hashProperty={configurable:!1,enumerable:!0,get:function(){return new bufferreader(this._getHash()).readReverse().toString("hex")}};Object.defineProperty(Transaction$1.prototype,"hash",hashProperty),Object.defineProperty(Transaction$1.prototype,"id",hashProperty);var ioProperty={configurable:!1,enumerable:!0,get:function(){return this._getInputAmount()}};Object.defineProperty(Transaction$1.prototype,"inputAmount",ioProperty),ioProperty.get=function(){return this._getOutputAmount()},Object.defineProperty(Transaction$1.prototype,"outputAmount",ioProperty),Transaction$1.prototype._getHash=function(){return hash$a.sha256sha256(this.toBuffer())},Transaction$1.prototype.serialize=function(e){return!0===e||e&&e.disableAll?this.uncheckedSerialize():this.checkedSerialize(e)},Transaction$1.prototype.uncheckedSerialize=Transaction$1.prototype.toString=function(){return this.toBuffer().toString("hex")},Transaction$1.prototype.checkedSerialize=function(e){var t=this.getSerializationError(e);if(t)throw t.message+=" Use Transaction#uncheckedSerialize if you want to skip security checks. See http://bitcore.io/guide/transaction.html#Serialization for more info.",t;return this.uncheckedSerialize()},Transaction$1.prototype.invalidSatoshis=function(){for(var e=!1,t=0;t<this.outputs.length;t++)this.outputs[t].invalidSatoshis()&&(e=!0);return e},Transaction$1.prototype.getSerializationError=function(e){if(e=e||{},this.invalidSatoshis())return new errors$g.Transaction.InvalidSatoshis;var t,r=this._getUnspentValue();return r<0?e.disableMoreOutputThanInput||(t=new errors$g.Transaction.InvalidOutputAmountSum):t=this._hasFeeError(e,r),t||this._hasDustOutputs(e)||this._isMissingSignatures(e)},Transaction$1.prototype._hasFeeError=function(e,t){if(!lodash$1.isUndefined(this._fee)&&this._fee!==t)return new errors$g.Transaction.FeeError.Different("Unspent value is "+t+" but specified fee is "+this._fee);if(!e.disableLargeFees){var r=Math.floor(Transaction$1.FEE_SECURITY_MARGIN*this._estimateFee());if(t>r)return this._missingChange()?new errors$g.Transaction.ChangeAddressMissing("Fee is too large and no change address was provided"):new errors$g.Transaction.FeeError.TooLarge("expected less than "+r+" but got "+t)}if(!e.disableSmallFees){var n=Math.ceil(this._estimateFee()/Transaction$1.FEE_SECURITY_MARGIN);if(t<n)return new errors$g.Transaction.FeeError.TooSmall("expected more than "+n+" but got "+t)}},Transaction$1.prototype._missingChange=function(){return!this._changeScript},Transaction$1.prototype._hasDustOutputs=function(e){var t,r;if(!e.disableDustOutputs)for(t in this.outputs)if((r=this.outputs[t]).satoshis<Transaction$1.DUST_AMOUNT&&!r.script.isDataOut())return new errors$g.Transaction.DustOutputs},Transaction$1.prototype._isMissingSignatures=function(e){if(!e.disableIsFullySigned)return this.isFullySigned()?void 0:new errors$g.Transaction.MissingSignatures},Transaction$1.prototype.inspect=function(){return"<Transaction: "+this.uncheckedSerialize()+">"},Transaction$1.prototype.toBuffer=function(){var e=new bufferwriter;return this.toBufferWriter(e).toBuffer()},Transaction$1.prototype.toBufferWriter=function(e){return e.writeUInt32LE(this.version),e.writeVarintNum(this.inputs.length),lodash$1.each(this.inputs,function(t){t.toBufferWriter(e)}),e.writeVarintNum(this.outputs.length),lodash$1.each(this.outputs,function(t){t.toBufferWriter(e)}),e.writeUInt32LE(this.nLockTime),this.version>=2&&(e.writeVarintNum(this.joinSplits.length),lodash$1.each(this.joinSplits,function(t){t.toBufferWriter(e)}),this.joinSplits.length>0&&(e.write(this.joinSplitPubKey),e.write(this.joinSplitSig))),e},Transaction$1.prototype.fromBuffer=function(e){var t=new bufferreader(e);return this.fromBufferReader(t)},Transaction$1.prototype.fromBufferReader=function(e){var t,r,n,i;for(preconditions.checkArgument(!e.finished(),"No transaction data received"),this.version=e.readUInt32LE(),r=e.readVarintNum(),t=0;t<r;t++){var o=input$7.fromBufferReader(e);this.inputs.push(o)}for(n=e.readVarintNum(),t=0;t<n;t++)this.outputs.push(output$7.fromBufferReader(e));if(this.nLockTime=e.readUInt32LE(),this.version>=2){for(i=e.readVarintNum(),t=0;t<i;t++)this.joinSplits.push(jsdescription.fromBufferReader(e));i>0&&(this.joinSplitPubKey=e.read(32),this.joinSplitSig=e.read(64))}return this},Transaction$1.prototype.toObject=Transaction$1.prototype.toJSON=function(){var e=[];this.inputs.forEach(function(t){e.push(t.toObject())});var t=[];this.outputs.forEach(function(e){t.push(e.toObject())});var r={hash:this.hash,version:this.version,inputs:e,outputs:t,nLockTime:this.nLockTime};if(this.version>=2){var n=[];this.joinSplits.forEach(function(e){n.push(e.toObject())}),r.joinSplits=n,this.joinSplits.length>0&&(r.joinSplitPubKey=buffer_1.reverse(this.joinSplitPubKey).toString("hex"),r.joinSplitSig=this.joinSplitSig.toString("hex"))}return this._changeScript&&(r.changeScript=this._changeScript.toString()),lodash$1.isUndefined(this._changeIndex)||(r.changeIndex=this._changeIndex),lodash$1.isUndefined(this._fee)||(r.fee=this._fee),r},Transaction$1.prototype.fromObject=function(e){preconditions.checkArgument(lodash$1.isObject(e)||e instanceof Transaction$1);var t,r=this;return t=e instanceof Transaction$1?t.toObject():e,lodash$1.each(t.inputs,function(e){if(e.output&&e.output.script){var t,n=new script$2(e.output.script);if(n.isPublicKeyHashOut())t=new input$7.PublicKeyHash(e);else if(n.isScriptHashOut()&&e.publicKeys&&e.threshold)t=new input$7.MultiSigScriptHash(e,e.publicKeys,e.threshold,e.signatures);else{if(!n.isPublicKeyOut())throw new errors$g.Transaction.Input.UnsupportedScript(e.output.script);t=new input$7.PublicKey(e)}r.addInput(t)}else r.uncheckedAddInput(new input$7(e))}),lodash$1.each(t.outputs,function(e){r.addOutput(new output$7(e))}),t.changeIndex&&(this._changeIndex=t.changeIndex),t.changeScript&&(this._changeScript=new script$2(t.changeScript)),t.fee&&(this._fee=t.fee),this.nLockTime=t.nLockTime,this.version=t.version,this.version>=2&&(lodash$1.each(t.joinSplits,function(e){r.joinSplits.push(new jsdescription(e))}),r.joinSplits.length>0&&(r.joinSplitPubKey=buffer_1.reverse(new Buffer(t.joinSplitPubKey,"hex")),r.joinSplitSig=new Buffer(t.joinSplitSig,"hex"))),this._checkConsistency(e),this},Transaction$1.prototype._checkConsistency=function(e){lodash$1.isUndefined(this._changeIndex)||(preconditions.checkState(this._changeScript),preconditions.checkState(this.outputs[this._changeIndex]),preconditions.checkState(this.outputs[this._changeIndex].script.toString()===this._changeScript.toString())),e&&e.hash&&preconditions.checkState(e.hash===this.hash,"Hash in object does not match transaction hash")},Transaction$1.prototype.lockUntilDate=function(e){if(preconditions.checkArgument(e),lodash$1.isNumber(e)&&e<Transaction$1.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new errors$g.Transaction.LockTimeTooEarly;lodash$1.isDate(e)&&(e=e.getTime()/1e3);for(var t=0;t<this.inputs.length;t++)this.inputs[t].sequenceNumber===input$7.DEFAULT_SEQNUMBER&&(this.inputs[t].sequenceNumber=input$7.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=e,this},Transaction$1.prototype.lockUntilBlockHeight=function(e){if(preconditions.checkArgument(lodash$1.isNumber(e)),e>=Transaction$1.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new errors$g.Transaction.BlockHeightTooHigh;if(e<0)throw new errors$g.Transaction.NLockTimeOutOfRange;for(var t=0;t<this.inputs.length;t++)this.inputs[t].sequenceNumber===input$7.DEFAULT_SEQNUMBER&&(this.inputs[t].sequenceNumber=input$7.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=e,this},Transaction$1.prototype.getLockTime=function(){return this.nLockTime?this.nLockTime<Transaction$1.NLOCKTIME_BLOCKHEIGHT_LIMIT?this.nLockTime:new Date(1e3*this.nLockTime):null},Transaction$1.prototype.fromString=function(e){this.fromBuffer(new buffer$1.Buffer(e,"hex"))},Transaction$1.prototype._newTransaction=function(){this.version=CURRENT_VERSION,this.nLockTime=DEFAULT_NLOCKTIME},Transaction$1.prototype.from=function(e,t,r){if(lodash$1.isArray(e)){var n=this;return lodash$1.each(e,function(e){n.from(e,t,r)}),this}return lodash$1.any(this.inputs,function(t){return t.prevTxId.toString("hex")===e.txId&&t.outputIndex===e.outputIndex})?this:(t&&r?this._fromMultisigUtxo(e,t,r):this._fromNonP2SH(e),this)},Transaction$1.prototype._fromNonP2SH=function(e){var t;t=(e=new unspentoutput(e)).script.isPublicKeyHashOut()?PublicKeyHashInput$1:e.script.isPublicKeyOut()?PublicKeyInput$1:input$7,this.addInput(new t({output:new output$7({script:e.script,satoshis:e.satoshis}),prevTxId:e.txId,outputIndex:e.outputIndex,script:script$2.empty()}))},Transaction$1.prototype._fromMultisigUtxo=function(e,t,r){var n;if(preconditions.checkArgument(r<=t.length,"Number of required signatures must be greater than the number of public keys"),(e=new unspentoutput(e)).script.isMultisigOut())n=MultiSigInput$1;else{if(!e.script.isScriptHashOut())throw new Error("@TODO");n=MultiSigScriptHashInput$1}this.addInput(new n({output:new output$7({script:e.script,satoshis:e.satoshis}),prevTxId:e.txId,outputIndex:e.outputIndex,script:script$2.empty()},t,r))},Transaction$1.prototype.addInput=function(e,t,r){if(preconditions.checkArgumentType(e,input$7,"input"),!e.output&&(lodash$1.isUndefined(t)||lodash$1.isUndefined(r)))throw new errors$g.Transaction.NeedMoreInfo("Need information about the UTXO script and satoshis");return e.output||!t||lodash$1.isUndefined(r)||(t=t instanceof script$2?t:new script$2(t),preconditions.checkArgumentType(r,"number","satoshis"),e.output=new output$7({script:t,satoshis:r})),this.uncheckedAddInput(e)},Transaction$1.prototype.uncheckedAddInput=function(e){return preconditions.checkArgumentType(e,input$7,"input"),this.inputs.push(e),this._inputAmount=void 0,this._updateChangeOutput(),this},Transaction$1.prototype.hasAllUtxoInfo=function(){return lodash$1.all(this.inputs.map(function(e){return!!e.output}))},Transaction$1.prototype.fee=function(e){return preconditions.checkArgument(lodash$1.isNumber(e),"amount must be a number"),this._fee=e,this._updateChangeOutput(),this},Transaction$1.prototype.feePerKb=function(e){return preconditions.checkArgument(lodash$1.isNumber(e),"amount must be a number"),this._feePerKb=e,this._updateChangeOutput(),this},Transaction$1.prototype.change=function(e){return preconditions.checkArgument(e,"address is required"),this._changeScript=script$2.fromAddress(e),this._updateChangeOutput(),this},Transaction$1.prototype.getChangeOutput=function(){return lodash$1.isUndefined(this._changeIndex)?null:this.outputs[this._changeIndex]},Transaction$1.prototype.to=function(e,t){if(lodash$1.isArray(e)){var r=this;return lodash$1.each(e,function(e){r.to(e.address,e.satoshis)}),this}return preconditions.checkArgument(js$2.isNaturalNumber(t),"Amount is expected to be a positive integer"),this.addOutput(new output$7({script:script$2(new address$2(e)),satoshis:t})),this},Transaction$1.prototype.addData=function(e){return this.addOutput(new output$7({script:script$2.buildDataOut(e),satoshis:0})),this},Transaction$1.prototype.addOutput=function(e){return preconditions.checkArgumentType(e,output$7,"output"),this._addOutput(e),this._updateChangeOutput(),this},Transaction$1.prototype.clearOutputs=function(){return this.outputs=[],this._clearSignatures(),this._outputAmount=void 0,this._changeIndex=void 0,this._updateChangeOutput(),this},Transaction$1.prototype._addOutput=function(e){this.outputs.push(e),this._outputAmount=void 0},Transaction$1.prototype._getOutputAmount=function(){if(lodash$1.isUndefined(this._outputAmount)){var e=this;this._outputAmount=0,lodash$1.each(this.outputs,function(t){e._outputAmount+=t.satoshis})}return this._outputAmount},Transaction$1.prototype._getInputAmount=function(){if(lodash$1.isUndefined(this._inputAmount)){var e=this;this._inputAmount=0,lodash$1.each(this.inputs,function(t){if(lodash$1.isUndefined(t.output))throw new errors$g.Transaction.Input.MissingPreviousOutput;e._inputAmount+=t.output.satoshis})}return this._inputAmount},Transaction$1.prototype._updateChangeOutput=function(){if(this._changeScript){this._clearSignatures(),lodash$1.isUndefined(this._changeIndex)||this._removeOutput(this._changeIndex);var e=this._getUnspentValue()-this.getFee();e>0?(this._changeIndex=this.outputs.length,this._addOutput(new output$7({script:this._changeScript,satoshis:e}))):this._changeIndex=void 0}},Transaction$1.prototype.getFee=function(){return this.isCoinbase()?0:lodash$1.isUndefined(this._fee)?this._changeScript?this._estimateFee():this._getUnspentValue():this._fee},Transaction$1.prototype._estimateFee=function(){var e=this._estimateSize(),t=this._getUnspentValue();return Transaction$1._estimateFee(e,t,this._feePerKb)},Transaction$1.prototype._getUnspentValue=function(){return this._getInputAmount()-this._getOutputAmount()},Transaction$1.prototype._clearSignatures=function(){lodash$1.each(this.inputs,function(e){e.clearSignatures()})},Transaction$1._estimateFee=function(e,t,r){return t>Math.ceil(e/1e3)*(r||Transaction$1.FEE_PER_KB)&&(e+=Transaction$1.CHANGE_OUTPUT_MAX_SIZE),Math.ceil(e/1e3)*(r||Transaction$1.FEE_PER_KB)},Transaction$1.prototype._estimateSize=function(){var e=Transaction$1.MAXIMUM_EXTRA_SIZE;return lodash$1.each(this.inputs,function(t){e+=t._estimateSize()}),lodash$1.each(this.outputs,function(t){e+=t.script.toBuffer().length+9}),e},Transaction$1.prototype._removeOutput=function(e){var t=this.outputs[e];this.outputs=lodash$1.without(this.outputs,t),this._outputAmount=void 0},Transaction$1.prototype.removeOutput=function(e){this._removeOutput(e),this._updateChangeOutput()},Transaction$1.prototype.sort=function(){return this.sortInputs(function(e){var t=Array.prototype.concat.apply([],e);return t.sort(function(e,t){return compare$5(e.prevTxId,t.prevTxId)||e.outputIndex-t.outputIndex}),t}),this.sortOutputs(function(e){var t=Array.prototype.concat.apply([],e);return t.sort(function(e,t){return e.satoshis-t.satoshis||compare$5(e.script.toBuffer(),t.script.toBuffer())}),t}),this},Transaction$1.prototype.shuffleOutputs=function(){return this.sortOutputs(lodash$1.shuffle)},Transaction$1.prototype.sortOutputs=function(e){var t=e(this.outputs);return this._newOutputOrder(t)},Transaction$1.prototype.sortInputs=function(e){return this.inputs=e(this.inputs),this._clearSignatures(),this},Transaction$1.prototype._newOutputOrder=function(e){if(this.outputs.length!==e.length||0!==lodash$1.difference(this.outputs,e).length)throw new errors$g.Transaction.InvalidSorting;if(!lodash$1.isUndefined(this._changeIndex)){var t=this.outputs[this._changeIndex];this._changeIndex=lodash$1.findIndex(e,t)}return this.outputs=e,this},Transaction$1.prototype.removeInput=function(e,t){var r;if((r=!t&&lodash$1.isNumber(e)?e:lodash$1.findIndex(this.inputs,function(r){return r.prevTxId.toString("hex")===e&&r.outputIndex===t}))<0||r>=this.inputs.length)throw new errors$g.Transaction.InvalidIndex(r,this.inputs.length);var n=this.inputs[r];this.inputs=lodash$1.without(this.inputs,n),this._inputAmount=void 0,this._updateChangeOutput()},Transaction$1.prototype.sign=function(e,t){preconditions.checkState(this.hasAllUtxoInfo());var r=this;return lodash$1.isArray(e)?(lodash$1.each(e,function(e){r.sign(e,t)}),this):(lodash$1.each(this.getSignatures(e,t),function(e){r.applySignature(e)}),this)},Transaction$1.prototype.getSignatures=function(e,t){e=new privatekey(e),t=t||signature$5.SIGHASH_ALL;var r=this,n=[],i=hash$a.sha256ripemd160(e.publicKey.toBuffer());return lodash$1.each(this.inputs,function(o,s){lodash$1.each(o.getSignatures(r,e,s,t,i),function(e){n.push(e)})}),n},Transaction$1.prototype.applySignature=function(e){return this.inputs[e.inputIndex].addSignature(this,e),this},Transaction$1.prototype.isFullySigned=function(){return lodash$1.each(this.inputs,function(e){if(e.isFullySigned===input$7.prototype.isFullySigned)throw new errors$g.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction")}),lodash$1.all(lodash$1.map(this.inputs,function(e){return e.isFullySigned()}))},Transaction$1.prototype.isValidSignature=function(e){if(this.inputs[e.inputIndex].isValidSignature===input$7.prototype.isValidSignature)throw new errors$g.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction");return this.inputs[e.inputIndex].isValidSignature(this,e)},Transaction$1.prototype.verifySignature=function(e,t,r,n){return sighash_1.verify(this,e,t,r,n)},Transaction$1.prototype.verify=function(){if(0===this.inputs.length)return"transaction txins empty";if(0===this.outputs.length)return"transaction txouts empty";for(var e=new bn$2(0),t=0;t<this.outputs.length;t++){var r=this.outputs[t];if(r.invalidSatoshis())return"transaction txout "+t+" satoshis is invalid";if(r._satoshisBN.gt(new bn$2(Transaction$1.MAX_MONEY,10)))return"transaction txout "+t+" greater than MAX_MONEY";if((e=e.add(r._satoshisBN)).gt(new bn$2(Transaction$1.MAX_MONEY)))return"transaction txout "+t+" total output greater than MAX_MONEY"}if(this.toBuffer().length>MAX_BLOCK_SIZE)return"transaction over the maximum block size";var n={};for(t=0;t<this.inputs.length;t++){var i=this.inputs[t],o=i.prevTxId+":"+i.outputIndex;if(!lodash$1.isUndefined(n[o]))return"transaction input "+t+" duplicate input";n[o]=!0}if(this.isCoinbase()){var s=this.inputs[0]._scriptBuffer;if(s.length<2||s.length>100)return"coinbase transaction script size invalid"}else for(t=0;t<this.inputs.length;t++)if(this.inputs[t].isNull())return"transaction input "+t+" has null input";return!0},Transaction$1.prototype.isCoinbase=function(){return 1===this.inputs.length&&this.inputs[0].isNull()},Transaction$1.prototype.isRBF=function(){for(var e=0;e<this.inputs.length;e++){if(this.inputs[e].sequenceNumber<input$7.MAXINT-1)return!0}return!1},Transaction$1.prototype.enableRBF=function(){for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e];t.sequenceNumber>=input$7.MAXINT-1&&(t.sequenceNumber=input$7.DEFAULT_RBF_SEQNUMBER)}return this};var transaction$2=Transaction$1,transaction$3=transaction$2,Input$1=input$7,Output$1=output$7,UnspentOutput$1=unspentoutput,Signature$6=signature$6,Sighash=sighash_1;transaction$3.Input=Input$1,transaction$3.Output=Output$1,transaction$3.UnspentOutput=UnspentOutput$1,transaction$3.Signature=Signature$6,transaction$3.Sighash=Sighash;var Interpreter=function e(t){if(!(this instanceof e))return new e(t);t?(this.initialize(),this.set(t)):this.initialize()};Interpreter.prototype.verify=function(e,t,r,n,i){var o,s=transaction$3;if(lodash$1.isUndefined(r)&&(r=new s),lodash$1.isUndefined(n)&&(n=0),lodash$1.isUndefined(i)&&(i=0),this.set({script:e,tx:r,nin:n,flags:i}),0!=(i&Interpreter.SCRIPT_VERIFY_SIGPUSHONLY)&&!e.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(!this.evaluate())return!1;i&Interpreter.SCRIPT_VERIFY_P2SH&&(o=this.stack.slice());var a=this.stack;if(this.initialize(),this.set({script:t,stack:a,tx:r,nin:n,flags:i}),!this.evaluate())return!1;if(0===this.stack.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_RESULT",!1;var c=this.stack[this.stack.length-1];if(!Interpreter.castToBool(c))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_STACK",!1;if(i&Interpreter.SCRIPT_VERIFY_P2SH&&t.isScriptHashOut()){if(!e.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(0===o.length)throw new Error("internal error - stack copy empty");var u=o[o.length-1],f=script$1.fromBuffer(u);return o.pop(),this.initialize(),this.set({script:f,stack:o,tx:r,nin:n,flags:i}),!!this.evaluate()&&(0===o.length?(this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_P2SH_STACK",!1):!!Interpreter.castToBool(o[o.length-1])||(this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_P2SH_STACK",!1))}return!0};var interpreter=Interpreter;Interpreter.prototype.initialize=function(e){this.stack=[],this.altstack=[],this.pc=0,this.pbegincodehash=0,this.nOpCount=0,this.vfExec=[],this.errstr="",this.flags=0},Interpreter.prototype.set=function(e){this.script=e.script||this.script,this.tx=e.tx||this.tx,this.nin=void 0!==e.nin?e.nin:this.nin,this.stack=e.stack||this.stack,this.altstack=e.altack||this.altstack,this.pc=void 0!==e.pc?e.pc:this.pc,this.pbegincodehash=void 0!==e.pbegincodehash?e.pbegincodehash:this.pbegincodehash,this.nOpCount=void 0!==e.nOpCount?e.nOpCount:this.nOpCount,this.vfExec=e.vfExec||this.vfExec,this.errstr=e.errstr||this.errstr,this.flags=void 0!==e.flags?e.flags:this.flags},Interpreter.true=new Buffer([1]),Interpreter.false=new Buffer([]),Interpreter.MAX_SCRIPT_ELEMENT_SIZE=520,Interpreter.LOCKTIME_THRESHOLD=5e8,Interpreter.LOCKTIME_THRESHOLD_BN=new bn$2(Interpreter.LOCKTIME_THRESHOLD),Interpreter.SCRIPT_VERIFY_NONE=0,Interpreter.SCRIPT_VERIFY_P2SH=1,Interpreter.SCRIPT_VERIFY_STRICTENC=2,Interpreter.SCRIPT_VERIFY_DERSIG=4,Interpreter.SCRIPT_VERIFY_LOW_S=8,Interpreter.SCRIPT_VERIFY_NULLDUMMY=16,Interpreter.SCRIPT_VERIFY_SIGPUSHONLY=32,Interpreter.SCRIPT_VERIFY_MINIMALDATA=64,Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=128,Interpreter.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY=512,Interpreter.castToBool=function(e){for(var t=0;t<e.length;t++)if(0!==e[t])return t!==e.length-1||128!==e[t];return!1},Interpreter.prototype.checkSignatureEncoding=function(e){if(0!=(this.flags&(Interpreter.SCRIPT_VERIFY_DERSIG|Interpreter.SCRIPT_VERIFY_LOW_S|Interpreter.SCRIPT_VERIFY_STRICTENC))&&!signature$5.isTxDER(e))return this.errstr="SCRIPT_ERR_SIG_DER_INVALID_FORMAT",!1;if(0!=(this.flags&Interpreter.SCRIPT_VERIFY_LOW_S)){if(!signature$5.fromTxFormat(e).hasLowS())return this.errstr="SCRIPT_ERR_SIG_DER_HIGH_S",!1}else if(0!=(this.flags&Interpreter.SCRIPT_VERIFY_STRICTENC)&&!signature$5.fromTxFormat(e).hasDefinedHashtype())return this.errstr="SCRIPT_ERR_SIG_HASHTYPE",!1;return!0},Interpreter.prototype.checkPubkeyEncoding=function(e){return!(0!=(this.flags&Interpreter.SCRIPT_VERIFY_STRICTENC)&&!publickey$1.isValid(e))||(this.errstr="SCRIPT_ERR_PUBKEYTYPE",!1)},Interpreter.prototype.evaluate=function(){if(this.script.toBuffer().length>1e4)return this.errstr="SCRIPT_ERR_SCRIPT_SIZE",!1;try{for(;this.pc<this.script.chunks.length;){if(!this.step())return!1}if(this.stack.length+this.altstack.length>1e3)return this.errstr="SCRIPT_ERR_STACK_SIZE",!1}catch(e){return this.errstr="SCRIPT_ERR_UNKNOWN_ERROR: "+e,!1}return!(this.vfExec.length>0)||(this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1)},Interpreter.prototype.checkLockTime=function(e){return!!(this.tx.nLockTime<Interpreter.LOCKTIME_THRESHOLD&&e.lt(Interpreter.LOCKTIME_THRESHOLD_BN)||this.tx.nLockTime>=Interpreter.LOCKTIME_THRESHOLD&&e.gte(Interpreter.LOCKTIME_THRESHOLD_BN))&&(!e.gt(new bn$2(this.tx.nLockTime))&&!!this.tx.inputs[this.nin].isFinal())},Interpreter.prototype.step=function(){var e,t,r,n,i,o,s,a,c,u,f,l,d,h,p,b,m,g=0!=(this.flags&Interpreter.SCRIPT_VERIFY_MINIMALDATA),y=-1===this.vfExec.indexOf(!1),v=this.script.chunks[this.pc];this.pc++;var _=v.opcodenum;if(lodash$1.isUndefined(_))return this.errstr="SCRIPT_ERR_UNDEFINED_OPCODE",!1;if(v.buf&&v.buf.length>Interpreter.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;if(_>opcode.OP_16&&++this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;if(_===opcode.OP_CAT||_===opcode.OP_SUBSTR||_===opcode.OP_LEFT||_===opcode.OP_RIGHT||_===opcode.OP_INVERT||_===opcode.OP_AND||_===opcode.OP_OR||_===opcode.OP_XOR||_===opcode.OP_2MUL||_===opcode.OP_2DIV||_===opcode.OP_MUL||_===opcode.OP_DIV||_===opcode.OP_MOD||_===opcode.OP_LSHIFT||_===opcode.OP_RSHIFT)return this.errstr="SCRIPT_ERR_DISABLED_OPCODE",!1;if(y&&0<=_&&_<=opcode.OP_PUSHDATA4){if(g&&!this.script.checkMinimalPush(this.pc-1))return this.errstr="SCRIPT_ERR_MINIMALDATA",!1;if(v.buf){if(v.len!==v.buf.length)throw new Error("Length of push value not equal to length of data");this.stack.push(v.buf)}else this.stack.push(Interpreter.false)}else if(y||opcode.OP_IF<=_&&_<=opcode.OP_ENDIF)switch(_){case opcode.OP_1NEGATE:case opcode.OP_1:case opcode.OP_2:case opcode.OP_3:case opcode.OP_4:case opcode.OP_5:case opcode.OP_6:case opcode.OP_7:case opcode.OP_8:case opcode.OP_9:case opcode.OP_10:case opcode.OP_11:case opcode.OP_12:case opcode.OP_13:case opcode.OP_14:case opcode.OP_15:case opcode.OP_16:i=_-(opcode.OP_1-1),e=new bn$2(i).toScriptNumBuffer(),this.stack.push(e);break;case opcode.OP_NOP:break;case opcode.OP_NOP2:case opcode.OP_CHECKLOCKTIMEVERIFY:if(!(this.flags&Interpreter.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)){if(this.flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var $=bn$2.fromScriptNumBuffer(this.stack[this.stack.length-1],g,5);if($.lt(new bn$2(0)))return this.errstr="SCRIPT_ERR_NEGATIVE_LOCKTIME",!1;if(!this.checkLockTime($))return this.errstr="SCRIPT_ERR_UNSATISFIED_LOCKTIME",!1;break;case opcode.OP_NOP1:case opcode.OP_NOP3:case opcode.OP_NOP4:case opcode.OP_NOP5:case opcode.OP_NOP6:case opcode.OP_NOP7:case opcode.OP_NOP8:case opcode.OP_NOP9:case opcode.OP_NOP10:if(this.flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break;case opcode.OP_IF:case opcode.OP_NOTIF:if(b=!1,y){if(this.stack.length<1)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;e=this.stack.pop(),b=Interpreter.castToBool(e),_===opcode.OP_NOTIF&&(b=!b)}this.vfExec.push(b);break;case opcode.OP_ELSE:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec[this.vfExec.length-1]=!this.vfExec[this.vfExec.length-1];break;case opcode.OP_ENDIF:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec.pop();break;case opcode.OP_VERIFY:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(e=this.stack[this.stack.length-1],!(b=Interpreter.castToBool(e)))return this.errstr="SCRIPT_ERR_VERIFY",!1;this.stack.pop();break;case opcode.OP_RETURN:return this.errstr="SCRIPT_ERR_OP_RETURN",!1;case opcode.OP_TOALTSTACK:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.altstack.push(this.stack.pop());break;case opcode.OP_FROMALTSTACK:if(this.altstack.length<1)return this.errstr="SCRIPT_ERR_INVALID_ALTSTACK_OPERATION",!1;this.stack.push(this.altstack.pop());break;case opcode.OP_2DROP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop(),this.stack.pop();break;case opcode.OP_2DUP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;t=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1],this.stack.push(t),this.stack.push(r);break;case opcode.OP_3DUP:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;t=this.stack[this.stack.length-3],r=this.stack[this.stack.length-2];var S=this.stack[this.stack.length-1];this.stack.push(t),this.stack.push(r),this.stack.push(S);break;case opcode.OP_2OVER:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;t=this.stack[this.stack.length-4],r=this.stack[this.stack.length-3],this.stack.push(t),this.stack.push(r);break;case opcode.OP_2ROT:if(this.stack.length<6)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;n=this.stack.splice(this.stack.length-6,2),this.stack.push(n[0]),this.stack.push(n[1]);break;case opcode.OP_2SWAP:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;n=this.stack.splice(this.stack.length-4,2),this.stack.push(n[0]),this.stack.push(n[1]);break;case opcode.OP_IFDUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-1],(b=Interpreter.castToBool(e))&&this.stack.push(e);break;case opcode.OP_DEPTH:e=new bn$2(this.stack.length).toScriptNumBuffer(),this.stack.push(e);break;case opcode.OP_DROP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop();break;case opcode.OP_DUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(this.stack[this.stack.length-1]);break;case opcode.OP_NIP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,1);break;case opcode.OP_OVER:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(this.stack[this.stack.length-2]);break;case opcode.OP_PICK:case opcode.OP_ROLL:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(e=this.stack[this.stack.length-1],i=(a=bn$2.fromScriptNumBuffer(e,g)).toNumber(),this.stack.pop(),i<0||i>=this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-i-1],_===opcode.OP_ROLL&&this.stack.splice(this.stack.length-i-1,1),this.stack.push(e);break;case opcode.OP_ROT:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;o=this.stack[this.stack.length-3],s=this.stack[this.stack.length-2];var E=this.stack[this.stack.length-1];this.stack[this.stack.length-3]=s,this.stack[this.stack.length-2]=E,this.stack[this.stack.length-1]=o;break;case opcode.OP_SWAP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;o=this.stack[this.stack.length-2],s=this.stack[this.stack.length-1],this.stack[this.stack.length-2]=s,this.stack[this.stack.length-1]=o;break;case opcode.OP_TUCK:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,0,this.stack[this.stack.length-1]);break;case opcode.OP_SIZE:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;a=new bn$2(this.stack[this.stack.length-1].length),this.stack.push(a.toScriptNumBuffer());break;case opcode.OP_EQUAL:case opcode.OP_EQUALVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;t=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1];var w=t.toString("hex")===r.toString("hex");if(this.stack.pop(),this.stack.pop(),this.stack.push(w?Interpreter.true:Interpreter.false),_===opcode.OP_EQUALVERIFY){if(!w)return this.errstr="SCRIPT_ERR_EQUALVERIFY",!1;this.stack.pop()}break;case opcode.OP_1ADD:case opcode.OP_1SUB:case opcode.OP_NEGATE:case opcode.OP_ABS:case opcode.OP_NOT:case opcode.OP_0NOTEQUAL:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(e=this.stack[this.stack.length-1],a=bn$2.fromScriptNumBuffer(e,g),_){case opcode.OP_1ADD:a=a.add(bn$2.One);break;case opcode.OP_1SUB:a=a.sub(bn$2.One);break;case opcode.OP_NEGATE:a=a.neg();break;case opcode.OP_ABS:a.cmp(bn$2.Zero)<0&&(a=a.neg());break;case opcode.OP_NOT:a=new bn$2((0===a.cmp(bn$2.Zero))+0);break;case opcode.OP_0NOTEQUAL:a=new bn$2((0!==a.cmp(bn$2.Zero))+0)}this.stack.pop(),this.stack.push(a.toScriptNumBuffer());break;case opcode.OP_ADD:case opcode.OP_SUB:case opcode.OP_BOOLAND:case opcode.OP_BOOLOR:case opcode.OP_NUMEQUAL:case opcode.OP_NUMEQUALVERIFY:case opcode.OP_NUMNOTEQUAL:case opcode.OP_LESSTHAN:case opcode.OP_GREATERTHAN:case opcode.OP_LESSTHANOREQUAL:case opcode.OP_GREATERTHANOREQUAL:case opcode.OP_MIN:case opcode.OP_MAX:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(c=bn$2.fromScriptNumBuffer(this.stack[this.stack.length-2],g),u=bn$2.fromScriptNumBuffer(this.stack[this.stack.length-1],g),a=new bn$2(0),_){case opcode.OP_ADD:a=c.add(u);break;case opcode.OP_SUB:a=c.sub(u);break;case opcode.OP_BOOLAND:a=new bn$2((0!==c.cmp(bn$2.Zero)&&0!==u.cmp(bn$2.Zero))+0);break;case opcode.OP_BOOLOR:a=new bn$2((0!==c.cmp(bn$2.Zero)||0!==u.cmp(bn$2.Zero))+0);break;case opcode.OP_NUMEQUAL:case opcode.OP_NUMEQUALVERIFY:a=new bn$2((0===c.cmp(u))+0);break;case opcode.OP_NUMNOTEQUAL:a=new bn$2((0!==c.cmp(u))+0);break;case opcode.OP_LESSTHAN:a=new bn$2((c.cmp(u)<0)+0);break;case opcode.OP_GREATERTHAN:a=new bn$2((c.cmp(u)>0)+0);break;case opcode.OP_LESSTHANOREQUAL:a=new bn$2((c.cmp(u)<=0)+0);break;case opcode.OP_GREATERTHANOREQUAL:a=new bn$2((c.cmp(u)>=0)+0);break;case opcode.OP_MIN:a=c.cmp(u)<0?c:u;break;case opcode.OP_MAX:a=c.cmp(u)>0?c:u}if(this.stack.pop(),this.stack.pop(),this.stack.push(a.toScriptNumBuffer()),_===opcode.OP_NUMEQUALVERIFY){if(!Interpreter.castToBool(this.stack[this.stack.length-1]))return this.errstr="SCRIPT_ERR_NUMEQUALVERIFY",!1;this.stack.pop()}break;case opcode.OP_WITHIN:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;c=bn$2.fromScriptNumBuffer(this.stack[this.stack.length-3],g),u=bn$2.fromScriptNumBuffer(this.stack[this.stack.length-2],g);var C=bn$2.fromScriptNumBuffer(this.stack[this.stack.length-1],g);b=u.cmp(c)<=0&&c.cmp(C)<0,this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(b?Interpreter.true:Interpreter.false);break;case opcode.OP_RIPEMD160:case opcode.OP_SHA1:case opcode.OP_SHA256:case opcode.OP_HASH160:case opcode.OP_HASH256:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var A;e=this.stack[this.stack.length-1],_===opcode.OP_RIPEMD160?A=hash$a.ripemd160(e):_===opcode.OP_SHA1?A=hash$a.sha1(e):_===opcode.OP_SHA256?A=hash$a.sha256(e):_===opcode.OP_HASH160?A=hash$a.sha256ripemd160(e):_===opcode.OP_HASH256&&(A=hash$a.sha256sha256(e)),this.stack.pop(),this.stack.push(A);break;case opcode.OP_CODESEPARATOR:this.pbegincodehash=this.pc;break;case opcode.OP_CHECKSIG:case opcode.OP_CHECKSIGVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;f=this.stack[this.stack.length-2],l=this.stack[this.stack.length-1],d=(new script$1).set({chunks:this.script.chunks.slice(this.pbegincodehash)});var k=(new script$1).add(f);if(d.findAndDelete(k),!this.checkSignatureEncoding(f)||!this.checkPubkeyEncoding(l))return!1;try{h=signature$5.fromTxFormat(f),p=publickey$1.fromBuffer(l,!1),m=this.tx.verifySignature(h,p,this.nin,d)}catch(e){m=!1}if(this.stack.pop(),this.stack.pop(),this.stack.push(m?Interpreter.true:Interpreter.false),_===opcode.OP_CHECKSIGVERIFY){if(!m)return this.errstr="SCRIPT_ERR_CHECKSIGVERIFY",!1;this.stack.pop()}break;case opcode.OP_CHECKMULTISIG:case opcode.OP_CHECKMULTISIGVERIFY:var T=1;if(this.stack.length<T)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var I=bn$2.fromScriptNumBuffer(this.stack[this.stack.length-T],g).toNumber();if(I<0||I>20)return this.errstr="SCRIPT_ERR_PUBKEY_COUNT",!1;if(this.nOpCount+=I,this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;var B=++T;if(T+=I,this.stack.length<T)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var P=bn$2.fromScriptNumBuffer(this.stack[this.stack.length-T],g).toNumber();if(P<0||P>I)return this.errstr="SCRIPT_ERR_SIG_COUNT",!1;var R=++T;if(T+=P,this.stack.length<T)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;d=(new script$1).set({chunks:this.script.chunks.slice(this.pbegincodehash)});for(var O=0;O<P;O++)f=this.stack[this.stack.length-R-O],d.findAndDelete((new script$1).add(f));for(m=!0;m&&P>0;){if(f=this.stack[this.stack.length-R],l=this.stack[this.stack.length-B],!this.checkSignatureEncoding(f)||!this.checkPubkeyEncoding(l))return!1;var N;try{h=signature$5.fromTxFormat(f),p=publickey$1.fromBuffer(l,!1),N=this.tx.verifySignature(h,p,this.nin,d)}catch(e){N=!1}N&&(R++,P--),B++,P>--I&&(m=!1)}for(;T-- >1;)this.stack.pop();if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(this.flags&Interpreter.SCRIPT_VERIFY_NULLDUMMY&&this.stack[this.stack.length-1].length)return this.errstr="SCRIPT_ERR_SIG_NULLDUMMY",!1;if(this.stack.pop(),this.stack.push(m?Interpreter.true:Interpreter.false),_===opcode.OP_CHECKMULTISIGVERIFY){if(!m)return this.errstr="SCRIPT_ERR_CHECKMULTISIGVERIFY",!1;this.stack.pop()}break;default:return this.errstr="SCRIPT_ERR_BAD_OPCODE",!1}return!0};var script$2=script$1,Interpreter$1=interpreter;function Address(e,t,r){if(!(this instanceof Address))return new Address(e,t,r);if(lodash$1.isArray(e)&&lodash$1.isNumber(t))return Address.createMultisig(e,t,r);if(e instanceof Address)return e;if(preconditions.checkArgument(e,"First argument is required, please include address data.","guide/address.html"),t&&!networks_1$2.get(t))throw new TypeError('Second argument must be "livenet" or "testnet".');if(r&&r!==Address.PayToPublicKeyHash&&r!==Address.PayToScriptHash)throw new TypeError('Third argument must be "pubkeyhash" or "scripthash".');var n=this._classifyArguments(e,t,r);return n.network=n.network||networks_1$2.get(t)||networks_1$2.defaultNetwork,n.type=n.type||r||Address.PayToPublicKeyHash,js$2.defineImmutable(this,{hashBuffer:n.hashBuffer,network:n.network,type:n.type}),this}script$2.Interpreter=Interpreter$1,Address.prototype._classifyArguments=function(e,t,r){if((e instanceof Buffer||e instanceof Uint8Array)&&20===e.length)return Address._transformHash(e);if((e instanceof Buffer||e instanceof Uint8Array)&&21===e.length)return Address._transformBuffer(e,t,r);if(e instanceof publickey$1)return Address._transformPublicKey(e);if(e instanceof script$2)return Address._transformScript(e,t);if("string"==typeof e)return Address._transformString(e,t,r);if(lodash$1.isObject(e))return Address._transformObject(e);throw new TypeError("First argument is an unrecognized data format.")},Address.PayToPublicKeyHash="pubkeyhash",Address.PayToScriptHash="scripthash",Address._transformHash=function(e){var t={};if(!(e instanceof Buffer||e instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(20!==e.length)throw new TypeError("Address hashbuffers must be exactly 20 bytes.");return t.hashBuffer=e,t},Address._transformObject=function(e){return preconditions.checkArgument(e.hash||e.hashBuffer,"Must provide a `hash` or `hashBuffer` property"),preconditions.checkArgument(e.type,"Must provide a `type` property"),{hashBuffer:e.hash?new Buffer(e.hash,"hex"):e.hashBuffer,network:networks_1$2.get(e.network)||networks_1$2.defaultNetwork,type:e.type}},Address._classifyFromVersion=function(e){var t={},r=256*e[0]+e[1],n=networks_1$2.get(r,"pubkeyhash"),i=networks_1$2.get(r,"scripthash");return n?(t.network=n,t.type=Address.PayToPublicKeyHash):i&&(t.network=i,t.type=Address.PayToScriptHash),t},Address._transformBuffer=function(e,t,r){var n={};if(!(e instanceof Buffer||e instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(22!==e.length)throw new TypeError("Address buffers must be exactly 22 bytes.");t=networks_1$2.get(t);var i=Address._classifyFromVersion(e);if(!i.network||t&&t!==i.network)throw new TypeError("Address has mismatched network type.");if(!i.type||r&&r!==i.type)throw new TypeError("Address has mismatched type.");return n.hashBuffer=e.slice(2),n.network=i.network,n.type=i.type,n},Address._transformPublicKey=function(e){var t={};if(!(e instanceof publickey$1))throw new TypeError("Address must be an instance of PublicKey.");return t.hashBuffer=hash$a.sha256ripemd160(e.toBuffer()),t.type=Address.PayToPublicKeyHash,t},Address._transformScript=function(e,t){preconditions.checkArgument(e instanceof script$2,"script must be a Script instance");var r=e.getAddressInfo(t);if(!r)throw new errors$g.Script.CantDeriveAddress(e);return r},Address.createMultisig=function(e,t,r){return r=r||e[0].network||networks_1$2.defaultNetwork,Address.payingTo(script$2.buildMultisigOut(e,t),r)},Address._transformString=function(e,t,r){if("string"!=typeof e)throw new TypeError("data parameter supplied is not a string.");e=e.trim();var n=base58check.decode(e);return Address._transformBuffer(n,t,r)},Address.fromPublicKey=function(e,t){var r=Address._transformPublicKey(e);return t=t||networks_1$2.defaultNetwork,new Address(r.hashBuffer,t,r.type)},Address.fromPublicKeyHash=function(e,t){var r=Address._transformHash(e);return new Address(r.hashBuffer,t,Address.PayToPublicKeyHash)},Address.fromScriptHash=function(e,t){preconditions.checkArgument(e,"hash parameter is required");var r=Address._transformHash(e);return new Address(r.hashBuffer,t,Address.PayToScriptHash)},Address.payingTo=function(e,t){return preconditions.checkArgument(e,"script is required"),preconditions.checkArgument(e instanceof script$2,"script must be instance of Script"),Address.fromScriptHash(hash$a.sha256ripemd160(e.toBuffer()),t)},Address.fromScript=function(e,t){preconditions.checkArgument(e instanceof script$2,"script must be a Script instance");var r=Address._transformScript(e,t);return new Address(r.hashBuffer,t,r.type)},Address.fromBuffer=function(e,t,r){var n=Address._transformBuffer(e,t,r);return new Address(n.hashBuffer,n.network,n.type)},Address.fromString=function(e,t,r){var n=Address._transformString(e,t,r);return new Address(n.hashBuffer,n.network,n.type)},Address.fromObject=function(e){return preconditions.checkState(js$2.isHexa(e.hash),'Unexpected hash property, "'+e.hash+'", expected to be hex.'),new Address(new Buffer(e.hash,"hex"),e.network,e.type)},Address.getValidationError=function(e,t,r){var n;try{new Address(e,t,r)}catch(e){n=e}return n},Address.isValid=function(e,t,r){return!Address.getValidationError(e,t,r)},Address.prototype.isPayToPublicKeyHash=function(){return this.type===Address.PayToPublicKeyHash},Address.prototype.isPayToScriptHash=function(){return this.type===Address.PayToScriptHash},Address.prototype.toBuffer=function(){var e=new Buffer(this.network[this.type].toString(16),"hex");return Buffer.concat([e,this.hashBuffer])},Address.prototype.toObject=Address.prototype.toJSON=function(){return{hash:this.hashBuffer.toString("hex"),type:this.type,network:this.network.toString()}},Address.prototype.toString=function(){return base58check.encode(this.toBuffer())},Address.prototype.inspect=function(){return"<Address: "+this.toString()+", type: "+this.type+", network: "+this.network+">"};var address$2=Address;function Random(){}Random.getRandomBuffer=function(e){return process.browser?Random.getRandomBufferBrowser(e):Random.getRandomBufferNode(e)},Random.getRandomBufferNode=function(e){return crypto$l.randomBytes(e)},Random.getRandomBufferBrowser=function(e){if(!window.crypto&&!window.msCrypto)throw new Error("window.crypto not available");if(window.crypto&&window.crypto.getRandomValues)var t=window.crypto;else{if(!window.msCrypto||!window.msCrypto.getRandomValues)throw new Error("window.crypto.getRandomValues not available");t=window.msCrypto}var r=new Uint8Array(e);return t.getRandomValues(r),new Buffer(r)},Random.getPseudoRandomBuffer=function(e){for(var t,r=new Buffer(e),n=0;n<=e;n++){0===n-4*Math.floor(n/4)?(t=4294967296*Math.random(),r[n]=255&t):r[n]=255&(t>>>=8)}return r};var random$3=Random;function PrivateKey$1(e,t){if(!(this instanceof PrivateKey$1))return new PrivateKey$1(e,t);if(e instanceof PrivateKey$1)return e;var r=this._classifyArguments(e,t);if(!r.bn||0===r.bn.cmp(new bn$2(0)))throw new TypeError("Number can not be equal to zero, undefined, null or false");if(!r.bn.lt(point.getN()))throw new TypeError("Number must be less than N");if(void 0===r.network)throw new TypeError('Must specify the network ("livenet" or "testnet")');return js$2.defineImmutable(this,{bn:r.bn,compressed:r.compressed,network:r.network}),Object.defineProperty(this,"publicKey",{configurable:!1,enumerable:!0,get:this.toPublicKey.bind(this)}),this}PrivateKey$1.prototype._classifyArguments=function(e,t){var r={compressed:!0,network:t?networks_1$2.get(t):networks_1$2.defaultNetwork};if(lodash$1.isUndefined(e)||lodash$1.isNull(e))r.bn=PrivateKey$1._getRandomBN();else if(e instanceof bn$2)r.bn=e;else if(e instanceof Buffer||e instanceof Uint8Array)r=PrivateKey$1._transformBuffer(e,t);else if(e.bn&&e.network)r=PrivateKey$1._transformObject(e);else if(!t&&networks_1$2.get(e))r.bn=PrivateKey$1._getRandomBN(),r.network=networks_1$2.get(e);else{if("string"!=typeof e)throw new TypeError("First argument is an unrecognized data type.");js$2.isHexa(e)?r.bn=new bn$2(new Buffer(e,"hex")):r=PrivateKey$1._transformWIF(e,t)}return r},PrivateKey$1._getRandomBN=function(){var e,t;do{var r=random$3.getRandomBuffer(32);e=(t=bn$2.fromBuffer(r)).lt(point.getN())}while(!e);return t},PrivateKey$1._transformBuffer=function(e,t){var r={};if(32===e.length)return PrivateKey$1._transformBNBuffer(e,t);if(r.network=networks_1$2.get(e[0],"privatekey"),!r.network)throw new Error("Invalid network");if(t&&r.network!==networks_1$2.get(t))throw new TypeError("Private key network mismatch");if(34===e.length&&1===e[33])r.compressed=!0;else{if(33!==e.length)throw new Error("Length of buffer must be 33 (uncompressed) or 34 (compressed)");r.compressed=!1}return r.bn=bn$2.fromBuffer(e.slice(1,33)),r},PrivateKey$1._transformBNBuffer=function(e,t){var r={};return r.network=networks_1$2.get(t)||networks_1$2.defaultNetwork,r.bn=bn$2.fromBuffer(e),r.compressed=!1,r},PrivateKey$1._transformWIF=function(e,t){return PrivateKey$1._transformBuffer(base58check.decode(e),t)},PrivateKey$1.fromBuffer=function(e,t){return new PrivateKey$1(e,t)},PrivateKey$1._transformObject=function(e){return{bn:new bn$2(e.bn,"hex"),network:networks_1$2.get(e.network),compressed:e.compressed}},PrivateKey$1.fromString=PrivateKey$1.fromWIF=function(e){return preconditions.checkArgument(lodash$1.isString(e),"First argument is expected to be a string."),new PrivateKey$1(e)},PrivateKey$1.fromObject=function(e){return preconditions.checkArgument(lodash$1.isObject(e),"First argument is expected to be an object."),new PrivateKey$1(e)},PrivateKey$1.fromRandom=function(e){var t=PrivateKey$1._getRandomBN();return new PrivateKey$1(t,e)},PrivateKey$1.getValidationError=function(e,t){var r;try{new PrivateKey$1(e,t)}catch(e){r=e}return r},PrivateKey$1.isValid=function(e,t){return!!e&&!PrivateKey$1.getValidationError(e,t)},PrivateKey$1.prototype.toString=function(){return this.toBuffer().toString("hex")},PrivateKey$1.prototype.toWIF=function(){var e,t=this.network;return e=this.compressed?Buffer.concat([new Buffer([t.privatekey]),this.bn.toBuffer({size:32}),new Buffer([1])]):Buffer.concat([new Buffer([t.privatekey]),this.bn.toBuffer({size:32})]),base58check.encode(e)},PrivateKey$1.prototype.toBigNumber=function(){return this.bn},PrivateKey$1.prototype.toBuffer=function(){return this.bn.toBuffer()},PrivateKey$1.prototype.toPublicKey=function(){return this._pubkey||(this._pubkey=publickey$1.fromPrivateKey(this)),this._pubkey},PrivateKey$1.prototype.toAddress=function(e){var t=this.toPublicKey();return address$2.fromPublicKey(t,e||this.network)},PrivateKey$1.prototype.toObject=PrivateKey$1.prototype.toJSON=function(){return{bn:this.bn.toString("hex"),compressed:this.compressed,network:this.network.toString()}},PrivateKey$1.prototype.inspect=function(){var e=this.compressed?"":", uncompressed";return"<PrivateKey: "+this.toString()+", network: "+this.network+e+">"};var privatekey=PrivateKey$1;function PublicKey$3(e,t){if(!(this instanceof PublicKey$3))return new PublicKey$3(e,t);if(preconditions.checkArgument(e,"First argument is required, please include public key data."),e instanceof PublicKey$3)return e;t=t||{};var r=this._classifyArgs(e,t);return r.point.validate(),js$2.defineImmutable(this,{point:r.point,compressed:r.compressed,network:r.network||networks_1$2.defaultNetwork}),this}PublicKey$3.prototype._classifyArgs=function(e,t){var r={compressed:lodash$1.isUndefined(t.compressed)||t.compressed};if(e instanceof point)r.point=e;else if(e.x&&e.y)r=PublicKey$3._transformObject(e);else if("string"==typeof e)r=PublicKey$3._transformDER(new Buffer(e,"hex"));else if(PublicKey$3._isBuffer(e))r=PublicKey$3._transformDER(e);else{if(!PublicKey$3._isPrivateKey(e))throw new TypeError("First argument is an unrecognized data format.");r=PublicKey$3._transformPrivateKey(e)}return r.network||(r.network=lodash$1.isUndefined(t.network)?void 0:networks_1$2.get(t.network)),r},PublicKey$3._isPrivateKey=function(e){return e instanceof privatekey},PublicKey$3._isBuffer=function(e){return e instanceof Buffer||e instanceof Uint8Array},PublicKey$3._transformPrivateKey=function(e){preconditions.checkArgument(PublicKey$3._isPrivateKey(e),"Must be an instance of PrivateKey");var t={};return t.point=point.getG().mul(e.bn),t.compressed=e.compressed,t.network=e.network,t},PublicKey$3._transformDER=function(e,t){preconditions.checkArgument(PublicKey$3._isBuffer(e),"Must be a hex buffer of DER encoded public key");var r,n,i,o,s={};if(t=!!lodash$1.isUndefined(t)||t,4!==e[0]&&(t||6!==e[0]&&7!==e[0]))if(3===e[0])i=e.slice(1),r=new bn$2(i),(s=PublicKey$3._transformX(!0,r)).compressed=!0;else{if(2!==e[0])throw new TypeError("Invalid DER format public key");i=e.slice(1),r=new bn$2(i),(s=PublicKey$3._transformX(!1,r)).compressed=!0}else{if(i=e.slice(1,33),o=e.slice(33,65),32!==i.length||32!==o.length||65!==e.length)throw new TypeError("Length of x and y must be 32 bytes");r=new bn$2(i),n=new bn$2(o),s.point=new point(r,n),s.compressed=!1}return s},PublicKey$3._transformX=function(e,t){preconditions.checkArgument("boolean"==typeof e,"Must specify whether y is odd or not (true or false)");var r={};return r.point=point.fromX(e,t),r},PublicKey$3._transformObject=function(e){var t=new bn$2(e.x,"hex"),r=new bn$2(e.y,"hex");return new PublicKey$3(new point(t,r),{compressed:e.compressed})},PublicKey$3.fromPrivateKey=function(e){preconditions.checkArgument(PublicKey$3._isPrivateKey(e),"Must be an instance of PrivateKey");var t=PublicKey$3._transformPrivateKey(e);return new PublicKey$3(t.point,{compressed:t.compressed,network:t.network})},PublicKey$3.fromDER=PublicKey$3.fromBuffer=function(e,t){preconditions.checkArgument(PublicKey$3._isBuffer(e),"Must be a hex buffer of DER encoded public key");var r=PublicKey$3._transformDER(e,t);return new PublicKey$3(r.point,{compressed:r.compressed})},PublicKey$3.fromPoint=function(e,t){return preconditions.checkArgument(e instanceof point,"First argument must be an instance of Point."),new PublicKey$3(e,{compressed:t})},PublicKey$3.fromString=function(e,t){var r=new Buffer(e,t||"hex"),n=PublicKey$3._transformDER(r);return new PublicKey$3(n.point,{compressed:n.compressed})},PublicKey$3.fromX=function(e,t){var r=PublicKey$3._transformX(e,t);return new PublicKey$3(r.point,{compressed:r.compressed})},PublicKey$3.getValidationError=function(e){var t;try{new PublicKey$3(e)}catch(e){t=e}return t},PublicKey$3.isValid=function(e){return!PublicKey$3.getValidationError(e)},PublicKey$3.prototype.toObject=PublicKey$3.prototype.toJSON=function(){return{x:this.point.getX().toString("hex",2),y:this.point.getY().toString("hex",2),compressed:this.compressed}},PublicKey$3.prototype.toBuffer=PublicKey$3.prototype.toDER=function(){var e,t=this.point.getX(),r=this.point.getY(),n=t.toBuffer({size:32}),i=r.toBuffer({size:32});return this.compressed?(e=i[i.length-1]%2?new Buffer([3]):new Buffer([2]),Buffer.concat([e,n])):(e=new Buffer([4]),Buffer.concat([e,n,i]))},PublicKey$3.prototype._getID=function(){return hash$a.sha256ripemd160(this.toBuffer())},PublicKey$3.prototype.toAddress=function(e){return address$2.fromPublicKey(this,e||this.network)},PublicKey$3.prototype.toString=function(){return this.toDER().toString("hex")},PublicKey$3.prototype.inspect=function(){return"<PublicKey: "+this.toString()+(this.compressed?"":", uncompressed")+">"};var publickey$1=PublicKey$3,ECDSA=function e(t){if(!(this instanceof e))return new e(t);t&&this.set(t)};ECDSA.prototype.set=function(e){return this.hashbuf=e.hashbuf||this.hashbuf,this.endian=e.endian||this.endian,this.privkey=e.privkey||this.privkey,this.pubkey=e.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=e.sig||this.sig,this.k=e.k||this.k,this.verified=e.verified||this.verified,this},ECDSA.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},ECDSA.prototype.calci=function(){for(var e=0;e<4;e++){var t;this.sig.i=e;try{t=this.toPublicKey()}catch(e){console.error(e);continue}if(t.point.eq(this.pubkey.point))return this.sig.compressed=this.pubkey.compressed,this}throw this.sig.i=void 0,new Error("Unable to find valid recovery factor")},ECDSA.fromString=function(e){var t=JSON.parse(e);return new ECDSA(t)},ECDSA.prototype.randomK=function(){var e,t=point.getN();do{e=bn$2.fromBuffer(random$3.getRandomBuffer(32))}while(!e.lt(t)||!e.gt(bn$2.Zero));return this.k=e,this},ECDSA.prototype.deterministicK=function(e){lodash$1.isUndefined(e)&&(e=0);var t=new Buffer(32);t.fill(1);var r=new Buffer(32);r.fill(0);var n=this.privkey.bn.toBuffer({size:32}),i="little"===this.endian?buffer_1.reverse(this.hashbuf):this.hashbuf;r=hash$a.sha256hmac(Buffer.concat([t,new Buffer([0]),n,i]),r),t=hash$a.sha256hmac(t,r),r=hash$a.sha256hmac(Buffer.concat([t,new Buffer([1]),n,i]),r),t=hash$a.sha256hmac(t,r),t=hash$a.sha256hmac(t,r);for(var o=bn$2.fromBuffer(t),s=point.getN(),a=0;a<e||!o.lt(s)||!o.gt(bn$2.Zero);a++)r=hash$a.sha256hmac(Buffer.concat([t,new Buffer([0])]),r),t=hash$a.sha256hmac(t,r),t=hash$a.sha256hmac(t,r),o=bn$2.fromBuffer(t);return this.k=o,this},ECDSA.prototype.toPublicKey=function(){var e=this.sig.i;preconditions.checkArgument(0===e||1===e||2===e||3===e,new Error("i must be equal to 0, 1, 2, or 3"));var t=bn$2.fromBuffer(this.hashbuf),r=this.sig.r,n=this.sig.s,i=1&e,o=e>>1,s=point.getN(),a=point.getG(),c=o?r.add(s):r,u=point.fromX(i,c);if(!u.mul(s).isInfinity())throw new Error("nR is not a valid curve point");var f=t.neg().mod(s),l=r.invm(s),d=u.mul(n).add(a.mul(f)).mul(l);return publickey$1.fromPoint(d,this.sig.compressed)},ECDSA.prototype.sigError=function(){if(!buffer_1.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return"hashbuf must be a 32 byte buffer";var e=this.sig.r,t=this.sig.s;if(!(e.gt(bn$2.Zero)&&e.lt(point.getN())&&t.gt(bn$2.Zero)&&t.lt(point.getN())))return"r and s not in range";var r=bn$2.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:void 0),n=point.getN(),i=t.invm(n),o=i.mul(r).mod(n),s=i.mul(e).mod(n),a=point.getG().mulAdd(o,this.pubkey.point,s);return a.isInfinity()?"p is infinity":0!==a.getX().mod(n).cmp(e)&&"Invalid signature"},ECDSA.toLowS=function(e){return e.gt(bn$2.fromBuffer(new Buffer("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))&&(e=point.getN().sub(e)),e},ECDSA.prototype._findSignature=function(e,t){var r,n,i,o=point.getN(),s=point.getG(),a=0;do{(!this.k||a>0)&&this.deterministicK(a),a++,r=this.k,n=s.mul(r).x.mod(o),i=r.invm(o).mul(t.add(e.mul(n))).mod(o)}while(n.cmp(bn$2.Zero)<=0||i.cmp(bn$2.Zero)<=0);return{s:i=ECDSA.toLowS(i),r:n}},ECDSA.prototype.sign=function(){var e=this.hashbuf,t=this.privkey,r=t.bn;preconditions.checkState(e&&t&&r,new Error("invalid parameters")),preconditions.checkState(buffer_1.isBuffer(e)&&32===e.length,new Error("hashbuf must be a 32 byte buffer"));var n=bn$2.fromBuffer(e,this.endian?{endian:this.endian}:void 0),i=this._findSignature(r,n);return i.compressed=this.pubkey.compressed,this.sig=new signature$5(i),this},ECDSA.prototype.signRandomK=function(){return this.randomK(),this.sign()},ECDSA.prototype.toString=function(){var e={};return this.hashbuf&&(e.hashbuf=this.hashbuf.toString("hex")),this.privkey&&(e.privkey=this.privkey.toString()),this.pubkey&&(e.pubkey=this.pubkey.toString()),this.sig&&(e.sig=this.sig.toString()),this.k&&(e.k=this.k.toString()),JSON.stringify(e)},ECDSA.prototype.verify=function(){return this.sigError()?this.verified=!1:this.verified=!0,this},ECDSA.sign=function(e,t,r){return ECDSA().set({hashbuf:e,endian:r,privkey:t}).sign().sig},ECDSA.verify=function(e,t,r,n){return ECDSA().set({hashbuf:e,endian:n,sig:t,pubkey:r}).verify().verified};var ecdsa=ECDSA,Varint=function e(t){if(!(this instanceof e))return new e(t);if(Buffer.isBuffer(t))this.buf=t;else if("number"==typeof t){var r=t;this.fromNumber(r)}else if(t instanceof bn$2){var n=t;this.fromBN(n)}else if(t){var i=t;this.set(i)}};Varint.prototype.set=function(e){return this.buf=e.buf||this.buf,this},Varint.prototype.fromString=function(e){return this.set({buf:new Buffer(e,"hex")}),this},Varint.prototype.toString=function(){return this.buf.toString("hex")},Varint.prototype.fromBuffer=function(e){return this.buf=e,this},Varint.prototype.fromBufferReader=function(e){return this.buf=e.readVarintBuf(),this},Varint.prototype.fromBN=function(e){return this.buf=bufferwriter().writeVarintBN(e).concat(),this},Varint.prototype.fromNumber=function(e){return this.buf=bufferwriter().writeVarintNum(e).concat(),this},Varint.prototype.toBuffer=function(){return this.buf},Varint.prototype.toBN=function(){return bufferreader(this.buf).readVarintBN()},Varint.prototype.toNumber=function(){return bufferreader(this.buf).readVarintNum()};var varint$1=Varint,GENESIS_BITS=537133055,BlockHeader=function e(t){if(!(this instanceof e))return new e(t);var r=e._from(t);return this.version=r.version,this.prevHash=r.prevHash,this.merkleRoot=r.merkleRoot,this.reserved=r.reserved,this.time=r.time,this.timestamp=r.time,this.bits=r.bits,this.nonce=r.nonce,this.solution=r.solution,r.hash&&preconditions.checkState(this.hash===r.hash,"Argument object hash property does not match block hash."),this};BlockHeader._from=function(e){var t={};if(buffer_1.isBuffer(e))t=BlockHeader._fromBufferReader(bufferreader(e));else{if(!lodash$1.isObject(e))throw new TypeError("Unrecognized argument for BlockHeader");t=BlockHeader._fromObject(e)}return t},BlockHeader._fromObject=function(e){preconditions.checkArgument(e,"data is required");var t=e.prevHash,r=e.merkleRoot,n=e.reserved,i=e.nonce,o=e.solution;return lodash$1.isString(e.prevHash)&&(t=buffer_1.reverse(new Buffer(e.prevHash,"hex"))),lodash$1.isString(e.merkleRoot)&&(r=buffer_1.reverse(new Buffer(e.merkleRoot,"hex"))),lodash$1.isString(e.reserved)&&(n=buffer_1.reverse(new Buffer(e.reserved,"hex"))),lodash$1.isString(e.nonce)&&(i=buffer_1.reverse(new Buffer(e.nonce,"hex"))),lodash$1.isString(e.solution)&&(o=new Buffer(e.solution,"hex")),{hash:e.hash,version:e.version,prevHash:t,merkleRoot:r,reserved:n,time:e.time,timestamp:e.time,bits:e.bits,nonce:i,solution:o}},BlockHeader.fromObject=function(e){var t=BlockHeader._fromObject(e);return new BlockHeader(t)},BlockHeader.fromRawBlock=function(e){buffer_1.isBuffer(e)||(e=new Buffer(e,"binary"));var t=bufferreader(e);t.pos=BlockHeader.Constants.START_OF_HEADER;var r=BlockHeader._fromBufferReader(t);return new BlockHeader(r)},BlockHeader.fromBuffer=function(e){var t=BlockHeader._fromBufferReader(bufferreader(e));return new BlockHeader(t)},BlockHeader.fromString=function(e){var t=new Buffer(e,"hex");return BlockHeader.fromBuffer(t)},BlockHeader._fromBufferReader=function(e){var t={};t.version=e.readUInt32LE(),t.prevHash=e.read(32),t.merkleRoot=e.read(32),t.reserved=e.read(32),t.time=e.readUInt32LE(),t.bits=e.readUInt32LE(),t.nonce=e.read(32);var r=e.readVarintNum();return t.solution=e.read(r),t},BlockHeader.fromBufferReader=function(e){var t=BlockHeader._fromBufferReader(e);return new BlockHeader(t)},BlockHeader.prototype.toObject=BlockHeader.prototype.toJSON=function(){return{hash:this.hash,version:this.version,prevHash:buffer_1.reverse(this.prevHash).toString("hex"),merkleRoot:buffer_1.reverse(this.merkleRoot).toString("hex"),reserved:buffer_1.reverse(this.reserved).toString("hex"),time:this.time,bits:this.bits,nonce:buffer_1.reverse(this.nonce).toString("hex"),solution:this.solution.toString("hex")}},BlockHeader.prototype.toBuffer=function(){return this.toBufferWriter().concat()},BlockHeader.prototype.toString=function(){return this.toBuffer().toString("hex")},BlockHeader.prototype.toBufferWriter=function(e){return e||(e=new bufferwriter),e.writeUInt32LE(this.version),e.write(this.prevHash),e.write(this.merkleRoot),e.write(this.reserved),e.writeUInt32LE(this.time),e.writeUInt32LE(this.bits),e.write(this.nonce),e.writeVarintNum(this.solution.length),e.write(this.solution),e},BlockHeader.prototype.getTargetDifficulty=function(e){e=e||this.bits;for(var t=new bn$2(16777215&e),r=8*((e>>>24)-3);r-- >0;)t=t.mul(new bn$2(2));return t},BlockHeader.prototype.getDifficulty=function(){var e=this.getTargetDifficulty(GENESIS_BITS).mul(new bn$2(Math.pow(10,8))),t=this.getTargetDifficulty(),r=e.div(t).toString(10),n=r.length-8;return r=r.slice(0,n)+"."+r.slice(n),parseFloat(r)},BlockHeader.prototype._getHash=function(){var e=this.toBuffer();return hash$a.sha256sha256(e)};var idProperty={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=bufferreader(this._getHash()).readReverse().toString("hex")),this._id},set:lodash$1.noop};Object.defineProperty(BlockHeader.prototype,"id",idProperty),Object.defineProperty(BlockHeader.prototype,"hash",idProperty),BlockHeader.prototype.validTimestamp=function(){var e=Math.round((new Date).getTime()/1e3);return!(this.time>e+BlockHeader.Constants.MAX_TIME_OFFSET)},BlockHeader.prototype.validProofOfWork=function(){var e=new bn$2(this.id,"hex"),t=this.getTargetDifficulty();return!(e.cmp(t)>0)},BlockHeader.prototype.inspect=function(){return"<BlockHeader "+this.id+">"},BlockHeader.Constants={START_OF_HEADER:8,MAX_TIME_OFFSET:7200,LARGEST_HASH:new bn$2("10000000000000000000000000000000000000000000000000000000000000000","hex")};var blockheader=BlockHeader;function Block$1(e){return this instanceof Block$1?(lodash$1.extend(this,Block$1._from(e)),this):new Block$1(e)}Block$1.MAX_BLOCK_SIZE=1e6,Block$1._from=function(e){var t={};if(buffer_1.isBuffer(e))t=Block$1._fromBufferReader(bufferreader(e));else{if(!lodash$1.isObject(e))throw new TypeError("Unrecognized argument for Block");t=Block$1._fromObject(e)}return t},Block$1._fromObject=function(e){var t=[];return e.transactions.forEach(function(e){e instanceof transaction$3?t.push(e):t.push(transaction$3().fromObject(e))}),{header:blockheader.fromObject(e.header),transactions:t}},Block$1.fromObject=function(e){var t=Block$1._fromObject(e);return new Block$1(t)},Block$1._fromBufferReader=function(e){var t={};preconditions.checkState(!e.finished(),"No block data received"),t.header=blockheader.fromBufferReader(e);var r=e.readVarintNum();t.transactions=[];for(var n=0;n<r;n++)t.transactions.push(transaction$3().fromBufferReader(e));return t},Block$1.fromBufferReader=function(e){preconditions.checkArgument(e,"br is required");var t=Block$1._fromBufferReader(e);return new Block$1(t)},Block$1.fromBuffer=function(e){return Block$1.fromBufferReader(new bufferreader(e))},Block$1.fromString=function(e){var t=new Buffer(e,"hex");return Block$1.fromBuffer(t)},Block$1.fromRawBlock=function(e){buffer_1.isBuffer(e)||(e=new Buffer(e,"binary"));var t=bufferreader(e);t.pos=Block$1.Values.START_OF_BLOCK;var r=Block$1._fromBufferReader(t);return new Block$1(r)},Block$1.prototype.toObject=Block$1.prototype.toJSON=function(){var e=[];return this.transactions.forEach(function(t){e.push(t.toObject())}),{header:this.header.toObject(),transactions:e}},Block$1.prototype.toBuffer=function(){return this.toBufferWriter().concat()},Block$1.prototype.toString=function(){return this.toBuffer().toString("hex")},Block$1.prototype.toBufferWriter=function(e){e||(e=new bufferwriter),e.write(this.header.toBuffer()),e.writeVarintNum(this.transactions.length);for(var t=0;t<this.transactions.length;t++)this.transactions[t].toBufferWriter(e);return e},Block$1.prototype.getTransactionHashes=function(){var e=[];if(0===this.transactions.length)return[Block$1.Values.NULL_HASH];for(var t=0;t<this.transactions.length;t++)e.push(this.transactions[t]._getHash());return e},Block$1.prototype.getMerkleTree=function(){for(var e=this.getTransactionHashes(),t=0,r=this.transactions.length;r>1;r=Math.floor((r+1)/2)){for(var n=0;n<r;n+=2){var i=Math.min(n+1,r-1),o=Buffer.concat([e[t+n],e[t+i]]);e.push(hash$a.sha256sha256(o))}t+=r}return e},Block$1.prototype.getMerkleRoot=function(){var e=this.getMerkleTree();return e[e.length-1]},Block$1.prototype.validMerkleRoot=function(){var e=new bn$2(this.header.merkleRoot.toString("hex"),"hex"),t=new bn$2(this.getMerkleRoot().toString("hex"),"hex");return 0===e.cmp(t)},Block$1.prototype._getHash=function(){return this.header._getHash()};var idProperty$1={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=this.header.id),this._id},set:lodash$1.noop};Object.defineProperty(Block$1.prototype,"id",idProperty$1),Object.defineProperty(Block$1.prototype,"hash",idProperty$1),Block$1.prototype.inspect=function(){return"<Block "+this.id+">"},Block$1.Values={START_OF_BLOCK:8,NULL_HASH:new Buffer("0000000000000000000000000000000000000000000000000000000000000000","hex")};var block$3=Block$1;function MerkleBlock(e){if(!(this instanceof MerkleBlock))return new MerkleBlock(e);var t={};if(buffer_1.isBuffer(e))t=MerkleBlock._fromBufferReader(bufferreader(e));else{if(!lodash$1.isObject(e))throw new TypeError("Unrecognized argument for MerkleBlock");t={header:e.header instanceof blockheader?e.header:blockheader.fromObject(e.header),numTransactions:e.numTransactions,hashes:e.hashes,flags:e.flags}}return lodash$1.extend(this,t),this._flagBitsUsed=0,this._hashesUsed=0,this}MerkleBlock.fromBuffer=function(e){return MerkleBlock.fromBufferReader(bufferreader(e))},MerkleBlock.fromBufferReader=function(e){return new MerkleBlock(MerkleBlock._fromBufferReader(e))},MerkleBlock.prototype.toBuffer=function(){return this.toBufferWriter().concat()},MerkleBlock.prototype.toBufferWriter=function(e){e||(e=new bufferwriter),e.write(this.header.toBuffer()),e.writeUInt32LE(this.numTransactions),e.writeVarintNum(this.hashes.length);for(var t=0;t<this.hashes.length;t++)e.write(new Buffer(this.hashes[t],"hex"));for(e.writeVarintNum(this.flags.length),t=0;t<this.flags.length;t++)e.writeUInt8(this.flags[t]);return e},MerkleBlock.prototype.toObject=MerkleBlock.prototype.toJSON=function(){return{header:this.header.toObject(),numTransactions:this.numTransactions,hashes:this.hashes,flags:this.flags}},MerkleBlock.prototype.validMerkleTree=function(){if(preconditions.checkState(lodash$1.isArray(this.flags),"MerkleBlock flags is not an array"),preconditions.checkState(lodash$1.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)return!1;if(8*this.flags.length<this.hashes.length)return!1;var e=this._calcTreeHeight(),t={hashesUsed:0,flagBitsUsed:0},r=this._traverseMerkleTree(e,0,t);return t.hashesUsed===this.hashes.length&&buffer_1.equals(r,this.header.merkleRoot)},MerkleBlock.prototype._traverseMerkleTree=function(e,t,r){if((r=r||{}).txs=r.txs||[],r.flagBitsUsed=r.flagBitsUsed||0,r.hashesUsed=r.hashesUsed||0,r.flagBitsUsed>8*this.flags.length)return null;var n=this.flags[r.flagBitsUsed>>3]>>>(7&r.flagBitsUsed++)&1;if(0!==e&&n){var i=this._traverseMerkleTree(e-1,2*t,r),o=i;return 2*t+1<this._calcTreeWidth(e-1)&&(o=this._traverseMerkleTree(e-1,2*t+1,r)),hash$a.sha256sha256(new Buffer.concat([i,o]))}if(r.hashesUsed>=this.hashes.length)return null;var s=this.hashes[r.hashesUsed++];return 0===e&&n&&r.txs.push(s),new Buffer(s,"hex")},MerkleBlock.prototype._calcTreeWidth=function(e){return this.numTransactions+(1<<e)-1>>e},MerkleBlock.prototype._calcTreeHeight=function(){for(var e=0;this._calcTreeWidth(e)>1;)e++;return e},MerkleBlock.prototype.hasTransaction=function(e){preconditions.checkArgument(!lodash$1.isUndefined(e),"tx cannot be undefined"),preconditions.checkArgument(e instanceof transaction$3||"string"==typeof e,'Invalid tx given, tx must be a "string" or "Transaction"');var t=e;e instanceof transaction$3&&(t=buffer_1.reverse(new Buffer(e.id,"hex")).toString("hex"));var r=[],n=this._calcTreeHeight();return this._traverseMerkleTree(n,0,{txs:r}),-1!==r.indexOf(t)},MerkleBlock._fromBufferReader=function(e){preconditions.checkState(!e.finished(),"No merkleblock data received");var t={};t.header=blockheader.fromBufferReader(e),t.numTransactions=e.readUInt32LE();var r=e.readVarintNum();t.hashes=[];for(var n=0;n<r;n++)t.hashes.push(e.read(32).toString("hex"));var i=e.readVarintNum();for(t.flags=[],n=0;n<i;n++)t.flags.push(e.readUInt8());return t},MerkleBlock.fromObject=function(e){return new MerkleBlock(e)};var merkleblock=MerkleBlock,block$4=block$3,BlockHeader$1=blockheader,MerkleBlock$1=merkleblock;block$4.BlockHeader=BlockHeader$1,block$4.MerkleBlock=MerkleBlock$1;var hdkeycache={_cache:{},_count:0,_eraseIndex:0,_usedList:{},_usedIndex:{},_CACHE_SIZE:5e3,get:function(e,t,r){var n=e+"/"+t+"/"+(r=!!r);if(this._cache[n])return this._cacheHit(n),this._cache[n]},set:function(e,t,r,n){var i=e+"/"+t+"/"+(r=!!r);this._cache[i]=n,this._cacheHit(i)},_cacheHit:function(e){this._usedIndex[e]&&delete this._usedList[this._usedIndex[e]],this._usedList[this._count]=e,this._usedIndex[e]=this._count,this._count++,this._cacheRemove()},_cacheRemove:function(){for(;this._eraseIndex<this._count-this._CACHE_SIZE;){if(this._usedList[this._eraseIndex]){var e=this._usedList[this._eraseIndex];delete this._usedIndex[e],delete this._cache[e]}delete this._usedList[this._eraseIndex],this._eraseIndex++}}},errors$h=errors$g,hdErrors=errors$g.HDPublicKey;function HDPublicKey(e){if(e instanceof HDPublicKey)return e;if(!(this instanceof HDPublicKey))return new HDPublicKey(e);if(e){if(lodash$1.isString(e)||buffer_1.isBuffer(e)){var t=HDPublicKey.getSerializedError(e);if(t){if(buffer_1.isBuffer(e)&&!HDPublicKey.getSerializedError(e.toString()))return this._buildFromSerialized(e.toString());if(t instanceof hdErrors.ArgumentIsPrivateExtended)return new hdprivatekey(e).hdPublicKey;throw t}return this._buildFromSerialized(e)}if(lodash$1.isObject(e))return e instanceof hdprivatekey?this._buildFromPrivate(e):this._buildFromObject(e);throw new hdErrors.UnrecognizedArgument(e)}throw new hdErrors.MustSupplyArgument}HDPublicKey.isValidPath=function(e){if(lodash$1.isString(e)){var t=hdprivatekey._getDerivationIndexes(e);return null!==t&&lodash$1.all(t,HDPublicKey.isValidPath)}return!!lodash$1.isNumber(e)&&(e>=0&&e<HDPublicKey.Hardened)},HDPublicKey.prototype.derive=function(e,t){if(lodash$1.isNumber(e))return this._deriveWithNumber(e,t);if(lodash$1.isString(e))return this._deriveFromString(e);throw new hdErrors.InvalidDerivationArgument(e)},HDPublicKey.prototype._deriveWithNumber=function(e,t){if(e>=HDPublicKey.Hardened||t)throw new hdErrors.InvalidIndexCantDeriveHardened;if(e<0)throw new hdErrors.InvalidPath(e);var r=hdkeycache.get(this.xpubkey,e,!1);if(r)return r;var n=buffer_1.integerAsBuffer(e),i=buffer_1.concat([this.publicKey.toBuffer(),n]),o=hash$a.sha512hmac(i,this._buffers.chainCode),s=bn$2.fromBuffer(o.slice(0,32),{size:32}),a=o.slice(32,64),c=publickey$1.fromPoint(point.getG().mul(s).add(this.publicKey.point)),u=new HDPublicKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:e,chainCode:a,publicKey:c});return hdkeycache.set(this.xpubkey,e,!1,u),u},HDPublicKey.prototype._deriveFromString=function(e){if(lodash$1.contains(e,"'"))throw new hdErrors.InvalidIndexCantDeriveHardened;if(!HDPublicKey.isValidPath(e))throw new hdErrors.InvalidPath(e);return hdprivatekey._getDerivationIndexes(e).reduce(function(e,t){return e._deriveWithNumber(t)},this)},HDPublicKey.isValidSerialized=function(e,t){return lodash$1.isNull(HDPublicKey.getSerializedError(e,t))},HDPublicKey.getSerializedError=function(e,t){if(!lodash$1.isString(e)&&!buffer_1.isBuffer(e))return new hdErrors.UnrecognizedArgument("expected buffer or string");if(!base58.validCharacters(e))return new errors$h.InvalidB58Char("(unknown)",e);try{e=base58check.decode(e)}catch(t){return new errors$h.InvalidB58Checksum(e)}if(e.length!==HDPublicKey.DataSize)return new hdErrors.InvalidLength(e);if(!lodash$1.isUndefined(t)){var r=HDPublicKey._validateNetwork(e,t);if(r)return r}var n=buffer_1.integerFromBuffer(e.slice(0,4));return n===networks_1$2.livenet.xprivkey||n===networks_1$2.testnet.xprivkey?new hdErrors.ArgumentIsPrivateExtended:null},HDPublicKey._validateNetwork=function(e,t){var r=networks_1$2.get(t);if(!r)return new errors$h.InvalidNetworkArgument(t);var n=e.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd);return buffer_1.integerFromBuffer(n)!==r.xpubkey?new errors$h.InvalidNetwork(n):null},HDPublicKey.prototype._buildFromPrivate=function(e){var t=lodash$1.clone(e._buffers),r=point.getG().mul(bn$2.fromBuffer(t.privateKey));return t.publicKey=point.pointToCompressed(r),t.version=buffer_1.integerAsBuffer(networks_1$2.get(buffer_1.integerFromBuffer(t.version)).xpubkey),t.privateKey=void 0,t.checksum=void 0,t.xprivkey=void 0,this._buildFromBuffers(t)},HDPublicKey.prototype._buildFromObject=function(e){var t={version:e.network?buffer_1.integerAsBuffer(networks_1$2.get(e.network).xpubkey):e.version,depth:lodash$1.isNumber(e.depth)?buffer_1.integerAsSingleByteBuffer(e.depth):e.depth,parentFingerPrint:lodash$1.isNumber(e.parentFingerPrint)?buffer_1.integerAsBuffer(e.parentFingerPrint):e.parentFingerPrint,childIndex:lodash$1.isNumber(e.childIndex)?buffer_1.integerAsBuffer(e.childIndex):e.childIndex,chainCode:lodash$1.isString(e.chainCode)?buffer_1.hexToBuffer(e.chainCode):e.chainCode,publicKey:lodash$1.isString(e.publicKey)?buffer_1.hexToBuffer(e.publicKey):buffer_1.isBuffer(e.publicKey)?e.publicKey:e.publicKey.toBuffer(),checksum:lodash$1.isNumber(e.checksum)?buffer_1.integerAsBuffer(e.checksum):e.checksum};return this._buildFromBuffers(t)},HDPublicKey.prototype._buildFromSerialized=function(e){var t=base58check.decode(e),r={version:t.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd),depth:t.slice(HDPublicKey.DepthStart,HDPublicKey.DepthEnd),parentFingerPrint:t.slice(HDPublicKey.ParentFingerPrintStart,HDPublicKey.ParentFingerPrintEnd),childIndex:t.slice(HDPublicKey.ChildIndexStart,HDPublicKey.ChildIndexEnd),chainCode:t.slice(HDPublicKey.ChainCodeStart,HDPublicKey.ChainCodeEnd),publicKey:t.slice(HDPublicKey.PublicKeyStart,HDPublicKey.PublicKeyEnd),checksum:t.slice(HDPublicKey.ChecksumStart,HDPublicKey.ChecksumEnd),xpubkey:e};return this._buildFromBuffers(r)},HDPublicKey.prototype._buildFromBuffers=function(e){HDPublicKey._validateBufferArguments(e),js$2.defineImmutable(this,{_buffers:e});var t=[e.version,e.depth,e.parentFingerPrint,e.childIndex,e.chainCode,e.publicKey],r=buffer_1.concat(t),n=base58check.checksum(r);if(e.checksum&&e.checksum.length){if(e.checksum.toString("hex")!==n.toString("hex"))throw new errors$h.InvalidB58Checksum(r,n)}else e.checksum=n;var i,o=networks_1$2.get(buffer_1.integerFromBuffer(e.version));i=base58check.encode(buffer_1.concat(t)),e.xpubkey=new Buffer(i);var s=new publickey$1(e.publicKey,{network:o}),a=HDPublicKey.ParentFingerPrintSize,c=hash$a.sha256ripemd160(s.toBuffer()).slice(0,a);return js$2.defineImmutable(this,{xpubkey:i,network:o,depth:buffer_1.integerFromSingleByteBuffer(e.depth),publicKey:s,fingerPrint:c}),this},HDPublicKey._validateBufferArguments=function(e){var t=function(t,r){var n=e[t];assert$t(buffer_1.isBuffer(n),t+" argument is not a buffer, it's "+typeof n),assert$t(n.length===r,t+" has not the expected size: found "+n.length+", expected "+r)};t("version",HDPublicKey.VersionSize),t("depth",HDPublicKey.DepthSize),t("parentFingerPrint",HDPublicKey.ParentFingerPrintSize),t("childIndex",HDPublicKey.ChildIndexSize),t("chainCode",HDPublicKey.ChainCodeSize),t("publicKey",HDPublicKey.PublicKeySize),e.checksum&&e.checksum.length&&t("checksum",HDPublicKey.CheckSumSize)},HDPublicKey.fromString=function(e){return preconditions.checkArgument(lodash$1.isString(e),"No valid string was provided"),new HDPublicKey(e)},HDPublicKey.fromObject=function(e){return preconditions.checkArgument(lodash$1.isObject(e),"No valid argument was provided"),new HDPublicKey(e)},HDPublicKey.prototype.toString=function(){return this.xpubkey},HDPublicKey.prototype.inspect=function(){return"<HDPublicKey: "+this.xpubkey+">"},HDPublicKey.prototype.toObject=HDPublicKey.prototype.toJSON=function(){return{network:networks_1$2.get(buffer_1.integerFromBuffer(this._buffers.version)).name,depth:buffer_1.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:buffer_1.integerFromBuffer(this.fingerPrint),parentFingerPrint:buffer_1.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:buffer_1.integerFromBuffer(this._buffers.childIndex),chainCode:buffer_1.bufferToHex(this._buffers.chainCode),publicKey:this.publicKey.toString(),checksum:buffer_1.integerFromBuffer(this._buffers.checksum),xpubkey:this.xpubkey}},HDPublicKey.fromBuffer=function(e){return new HDPublicKey(e)},HDPublicKey.prototype.toBuffer=function(){return buffer_1.copy(this._buffers.xpubkey)},HDPublicKey.Hardened=2147483648,HDPublicKey.RootElementAlias=["m","M"],HDPublicKey.VersionSize=4,HDPublicKey.DepthSize=1,HDPublicKey.ParentFingerPrintSize=4,HDPublicKey.ChildIndexSize=4,HDPublicKey.ChainCodeSize=32,HDPublicKey.PublicKeySize=33,HDPublicKey.CheckSumSize=4,HDPublicKey.DataSize=78,HDPublicKey.SerializedByteSize=82,HDPublicKey.VersionStart=0,HDPublicKey.VersionEnd=HDPublicKey.VersionStart+HDPublicKey.VersionSize,HDPublicKey.DepthStart=HDPublicKey.VersionEnd,HDPublicKey.DepthEnd=HDPublicKey.DepthStart+HDPublicKey.DepthSize,HDPublicKey.ParentFingerPrintStart=HDPublicKey.DepthEnd,HDPublicKey.ParentFingerPrintEnd=HDPublicKey.ParentFingerPrintStart+HDPublicKey.ParentFingerPrintSize,HDPublicKey.ChildIndexStart=HDPublicKey.ParentFingerPrintEnd,HDPublicKey.ChildIndexEnd=HDPublicKey.ChildIndexStart+HDPublicKey.ChildIndexSize,HDPublicKey.ChainCodeStart=HDPublicKey.ChildIndexEnd,HDPublicKey.ChainCodeEnd=HDPublicKey.ChainCodeStart+HDPublicKey.ChainCodeSize,HDPublicKey.PublicKeyStart=HDPublicKey.ChainCodeEnd,HDPublicKey.PublicKeyEnd=HDPublicKey.PublicKeyStart+HDPublicKey.PublicKeySize,HDPublicKey.ChecksumStart=HDPublicKey.PublicKeyEnd,HDPublicKey.ChecksumEnd=HDPublicKey.ChecksumStart+HDPublicKey.CheckSumSize,assert$t(HDPublicKey.PublicKeyEnd===HDPublicKey.DataSize),assert$t(HDPublicKey.ChecksumEnd===HDPublicKey.SerializedByteSize);var hdpublickey=HDPublicKey,hdErrors$1=errors$g.HDPrivateKey,MINIMUM_ENTROPY_BITS=128,BITS_TO_BYTES=1/8,MAXIMUM_ENTROPY_BITS=512;function HDPrivateKey(e){if(e instanceof HDPrivateKey)return e;if(!(this instanceof HDPrivateKey))return new HDPrivateKey(e);if(!e)return this._generateRandomly();if(networks_1$2.get(e))return this._generateRandomly(e);if(lodash$1.isString(e)||buffer_1.isBuffer(e))if(HDPrivateKey.isValidSerialized(e))this._buildFromSerialized(e);else if(js$2.isValidJSON(e))this._buildFromJSON(e);else{if(!buffer_1.isBuffer(e)||!HDPrivateKey.isValidSerialized(e.toString()))throw HDPrivateKey.getSerializedError(e);this._buildFromSerialized(e.toString())}else{if(!lodash$1.isObject(e))throw new hdErrors$1.UnrecognizedArgument(e);this._buildFromObject(e)}}HDPrivateKey.isValidPath=function(e,t){if(lodash$1.isString(e)){var r=HDPrivateKey._getDerivationIndexes(e);return null!==r&&lodash$1.all(r,HDPrivateKey.isValidPath)}return!!lodash$1.isNumber(e)&&(e<HDPrivateKey.Hardened&&!0===t&&(e+=HDPrivateKey.Hardened),e>=0&&e<HDPrivateKey.MaxIndex)},HDPrivateKey._getDerivationIndexes=function(e){var t=e.split("/");if(lodash$1.contains(HDPrivateKey.RootElementAlias,e))return[];if(!lodash$1.contains(HDPrivateKey.RootElementAlias,t[0]))return null;var r=t.slice(1).map(function(e){var t="'"===e.slice(-1);if(t&&(e=e.slice(0,-1)),!e||"-"===e[0])return NaN;var r=+e;return t&&(r+=HDPrivateKey.Hardened),r});return lodash$1.any(r,isNaN)?null:r},HDPrivateKey.prototype.derive=function(e,t){if(lodash$1.isNumber(e))return this._deriveWithNumber(e,t);if(lodash$1.isString(e))return this._deriveFromString(e);throw new hdErrors$1.InvalidDerivationArgument(e)},HDPrivateKey.prototype._deriveWithNumber=function(e,t){if(!HDPrivateKey.isValidPath(e,t))throw new hdErrors$1.InvalidPath(e);t=e>=HDPrivateKey.Hardened||t,e<HDPrivateKey.Hardened&&!0===t&&(e+=HDPrivateKey.Hardened);var r=hdkeycache.get(this.xprivkey,e,t);if(r)return r;var n,i=buffer_1.integerAsBuffer(e);n=t?buffer_1.concat([new buffer$1.Buffer([0]),this.privateKey.toBuffer(),i]):buffer_1.concat([this.publicKey.toBuffer(),i]);var o=hash$a.sha512hmac(n,this._buffers.chainCode),s=bn$2.fromBuffer(o.slice(0,32),{size:32}),a=o.slice(32,64),c=s.add(this.privateKey.toBigNumber()).mod(point.getN()).toBuffer({size:32}),u=new HDPrivateKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:e,chainCode:a,privateKey:c});return hdkeycache.set(this.xprivkey,e,t,u),u},HDPrivateKey.prototype._deriveFromString=function(e){if(!HDPrivateKey.isValidPath(e))throw new hdErrors$1.InvalidPath(e);return HDPrivateKey._getDerivationIndexes(e).reduce(function(e,t){return e._deriveWithNumber(t)},this)},HDPrivateKey.isValidSerialized=function(e,t){return!HDPrivateKey.getSerializedError(e,t)},HDPrivateKey.getSerializedError=function(e,t){if(!lodash$1.isString(e)&&!buffer_1.isBuffer(e))return new hdErrors$1.UnrecognizedArgument("Expected string or buffer");if(!base58.validCharacters(e))return new errors$g.InvalidB58Char("(unknown)",e);try{e=base58check.decode(e)}catch(t){return new errors$g.InvalidB58Checksum(e)}if(e.length!==HDPrivateKey.DataLength)return new hdErrors$1.InvalidLength(e);if(!lodash$1.isUndefined(t)){var r=HDPrivateKey._validateNetwork(e,t);if(r)return r}return null},HDPrivateKey._validateNetwork=function(e,t){var r=networks_1$2.get(t);if(!r)return new errors$g.InvalidNetworkArgument(t);var n=e.slice(0,4);return buffer_1.integerFromBuffer(n)!==r.xprivkey?new errors$g.InvalidNetwork(n):null},HDPrivateKey.fromString=function(e){return preconditions.checkArgument(lodash$1.isString(e),"No valid string was provided"),new HDPrivateKey(e)},HDPrivateKey.fromObject=function(e){return preconditions.checkArgument(lodash$1.isObject(e),"No valid argument was provided"),new HDPrivateKey(e)},HDPrivateKey.prototype._buildFromJSON=function(e){return this._buildFromObject(JSON.parse(e))},HDPrivateKey.prototype._buildFromObject=function(e){var t={version:e.network?buffer_1.integerAsBuffer(networks_1$2.get(e.network).xprivkey):e.version,depth:lodash$1.isNumber(e.depth)?buffer_1.integerAsSingleByteBuffer(e.depth):e.depth,parentFingerPrint:lodash$1.isNumber(e.parentFingerPrint)?buffer_1.integerAsBuffer(e.parentFingerPrint):e.parentFingerPrint,childIndex:lodash$1.isNumber(e.childIndex)?buffer_1.integerAsBuffer(e.childIndex):e.childIndex,chainCode:lodash$1.isString(e.chainCode)?buffer_1.hexToBuffer(e.chainCode):e.chainCode,privateKey:lodash$1.isString(e.privateKey)&&js$2.isHexa(e.privateKey)?buffer_1.hexToBuffer(e.privateKey):e.privateKey,checksum:e.checksum?e.checksum.length?e.checksum:buffer_1.integerAsBuffer(e.checksum):void 0};return this._buildFromBuffers(t)},HDPrivateKey.prototype._buildFromSerialized=function(e){var t=base58check.decode(e),r={version:t.slice(HDPrivateKey.VersionStart,HDPrivateKey.VersionEnd),depth:t.slice(HDPrivateKey.DepthStart,HDPrivateKey.DepthEnd),parentFingerPrint:t.slice(HDPrivateKey.ParentFingerPrintStart,HDPrivateKey.ParentFingerPrintEnd),childIndex:t.slice(HDPrivateKey.ChildIndexStart,HDPrivateKey.ChildIndexEnd),chainCode:t.slice(HDPrivateKey.ChainCodeStart,HDPrivateKey.ChainCodeEnd),privateKey:t.slice(HDPrivateKey.PrivateKeyStart,HDPrivateKey.PrivateKeyEnd),checksum:t.slice(HDPrivateKey.ChecksumStart,HDPrivateKey.ChecksumEnd),xprivkey:e};return this._buildFromBuffers(r)},HDPrivateKey.prototype._generateRandomly=function(e){return HDPrivateKey.fromSeed(random$3.getRandomBuffer(64),e)},HDPrivateKey.fromSeed=function(e,t){if(js$2.isHexaString(e)&&(e=buffer_1.hexToBuffer(e)),!Buffer.isBuffer(e))throw new hdErrors$1.InvalidEntropyArgument(e);if(e.length<MINIMUM_ENTROPY_BITS*BITS_TO_BYTES)throw new hdErrors$1.InvalidEntropyArgument.NotEnoughEntropy(e);if(e.length>MAXIMUM_ENTROPY_BITS*BITS_TO_BYTES)throw new hdErrors$1.InvalidEntropyArgument.TooMuchEntropy(e);var r=hash$a.sha512hmac(e,new buffer$1.Buffer("Bitcoin seed"));return new HDPrivateKey({network:networks_1$2.get(t)||networks_1$2.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:r.slice(0,32),chainCode:r.slice(32,64)})},HDPrivateKey.prototype._calcHDPublicKey=function(){if(!this._hdPublicKey){var e=hdpublickey;this._hdPublicKey=new e(this)}},HDPrivateKey.prototype._buildFromBuffers=function(e){HDPrivateKey._validateBufferArguments(e),js$2.defineImmutable(this,{_buffers:e});var t=[e.version,e.depth,e.parentFingerPrint,e.childIndex,e.chainCode,buffer_1.emptyBuffer(1),e.privateKey],r=buffer$1.Buffer.concat(t);if(e.checksum&&e.checksum.length){if(e.checksum.toString()!==base58check.checksum(r).toString())throw new errors$g.InvalidB58Checksum(r)}else e.checksum=base58check.checksum(r);var n,i=networks_1$2.get(buffer_1.integerFromBuffer(e.version));n=base58check.encode(buffer$1.Buffer.concat(t)),e.xprivkey=new Buffer(n);var o=new privatekey(bn$2.fromBuffer(e.privateKey),i),s=o.toPublicKey(),a=HDPrivateKey.ParentFingerPrintSize,c=hash$a.sha256ripemd160(s.toBuffer()).slice(0,a);return js$2.defineImmutable(this,{xprivkey:n,network:i,depth:buffer_1.integerFromSingleByteBuffer(e.depth),privateKey:o,publicKey:s,fingerPrint:c}),this._hdPublicKey=null,Object.defineProperty(this,"hdPublicKey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey}}),Object.defineProperty(this,"xpubkey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey.xpubkey}}),this},HDPrivateKey._validateBufferArguments=function(e){var t=function(t,r){var n=e[t];assert$t(buffer_1.isBuffer(n),t+" argument is not a buffer"),assert$t(n.length===r,t+" has not the expected size: found "+n.length+", expected "+r)};t("version",HDPrivateKey.VersionSize),t("depth",HDPrivateKey.DepthSize),t("parentFingerPrint",HDPrivateKey.ParentFingerPrintSize),t("childIndex",HDPrivateKey.ChildIndexSize),t("chainCode",HDPrivateKey.ChainCodeSize),t("privateKey",HDPrivateKey.PrivateKeySize),e.checksum&&e.checksum.length&&t("checksum",HDPrivateKey.CheckSumSize)},HDPrivateKey.prototype.toString=function(){return this.xprivkey},HDPrivateKey.prototype.inspect=function(){return"<HDPrivateKey: "+this.xprivkey+">"},HDPrivateKey.prototype.toObject=HDPrivateKey.prototype.toJSON=function(){return{network:networks_1$2.get(buffer_1.integerFromBuffer(this._buffers.version),"xprivkey").name,depth:buffer_1.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:buffer_1.integerFromBuffer(this.fingerPrint),parentFingerPrint:buffer_1.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:buffer_1.integerFromBuffer(this._buffers.childIndex),chainCode:buffer_1.bufferToHex(this._buffers.chainCode),privateKey:this.privateKey.toBuffer().toString("hex"),checksum:buffer_1.integerFromBuffer(this._buffers.checksum),xprivkey:this.xprivkey}},HDPrivateKey.fromBuffer=function(e){return new HDPrivateKey(e.toString())},HDPrivateKey.prototype.toBuffer=function(){return buffer_1.copy(this._buffers.xprivkey)},HDPrivateKey.DefaultDepth=0,HDPrivateKey.DefaultFingerprint=0,HDPrivateKey.DefaultChildIndex=0,HDPrivateKey.Hardened=2147483648,HDPrivateKey.MaxIndex=2*HDPrivateKey.Hardened,HDPrivateKey.RootElementAlias=["m","M","m'","M'"],HDPrivateKey.VersionSize=4,HDPrivateKey.DepthSize=1,HDPrivateKey.ParentFingerPrintSize=4,HDPrivateKey.ChildIndexSize=4,HDPrivateKey.ChainCodeSize=32,HDPrivateKey.PrivateKeySize=32,HDPrivateKey.CheckSumSize=4,HDPrivateKey.DataLength=78,HDPrivateKey.SerializedByteSize=82,HDPrivateKey.VersionStart=0,HDPrivateKey.VersionEnd=HDPrivateKey.VersionStart+HDPrivateKey.VersionSize,HDPrivateKey.DepthStart=HDPrivateKey.VersionEnd,HDPrivateKey.DepthEnd=HDPrivateKey.DepthStart+HDPrivateKey.DepthSize,HDPrivateKey.ParentFingerPrintStart=HDPrivateKey.DepthEnd,HDPrivateKey.ParentFingerPrintEnd=HDPrivateKey.ParentFingerPrintStart+HDPrivateKey.ParentFingerPrintSize,HDPrivateKey.ChildIndexStart=HDPrivateKey.ParentFingerPrintEnd,HDPrivateKey.ChildIndexEnd=HDPrivateKey.ChildIndexStart+HDPrivateKey.ChildIndexSize,HDPrivateKey.ChainCodeStart=HDPrivateKey.ChildIndexEnd,HDPrivateKey.ChainCodeEnd=HDPrivateKey.ChainCodeStart+HDPrivateKey.ChainCodeSize,HDPrivateKey.PrivateKeyStart=HDPrivateKey.ChainCodeEnd+1,HDPrivateKey.PrivateKeyEnd=HDPrivateKey.PrivateKeyStart+HDPrivateKey.PrivateKeySize,HDPrivateKey.ChecksumStart=HDPrivateKey.PrivateKeyEnd,HDPrivateKey.ChecksumEnd=HDPrivateKey.ChecksumStart+HDPrivateKey.CheckSumSize,assert$t(HDPrivateKey.ChecksumEnd===HDPrivateKey.SerializedByteSize);var hdprivatekey=HDPrivateKey,URI=function(e,t){if(!(this instanceof URI))return new URI(e,t);if(this.extras={},this.knownParams=t||[],this.address=this.network=this.amount=this.message=null,"string"==typeof e){var r=URI.parse(e);r.amount&&(r.amount=this._parseAmount(r.amount)),this._fromObject(r)}else{if("object"!=typeof e)throw new TypeError("Unrecognized data format.");this._fromObject(e)}};URI.fromString=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return new URI(e)},URI.fromObject=function(e){return new URI(e)},URI.isValid=function(e,t){try{new URI(e,t)}catch(e){return!1}return!0},URI.parse=function(e){var t=Url.parse(e,!0);if("zcash:"!==t.protocol)throw new TypeError("Invalid zcash URI");var r=/[^:]*:\/?\/?([^?]*)/.exec(e);return t.query.address=r&&r[1]||void 0,t.query},URI.Members=["address","amount","message","label","r"],URI.prototype._fromObject=function(e){if(!address$2.isValid(e.address))throw new TypeError("Invalid zcash address");for(var t in this.address=new address$2(e.address),this.network=this.address.network,this.amount=e.amount,e)if("address"!==t&&"amount"!==t){if(/^req-/.exec(t)&&-1===this.knownParams.indexOf(t))throw Error("Unknown required argument "+t);(URI.Members.indexOf(t)>-1?this:this.extras)[t]=e[t]}},URI.prototype._parseAmount=function(e){if(e=Number(e),isNaN(e))throw new TypeError("Invalid amount");return unit.fromBTC(e).toSatoshis()},URI.prototype.toObject=URI.prototype.toJSON=function(){for(var e={},t=0;t<URI.Members.length;t++){var r=URI.Members[t];this.hasOwnProperty(r)&&void 0!==this[r]&&(e[r]=this[r].toString())}return lodash$1.extend(e,this.extras),e},URI.prototype.toString=function(){var e={};return this.amount&&(e.amount=unit.fromSatoshis(this.amount).toBTC()),this.message&&(e.message=this.message),this.label&&(e.label=this.label),this.r&&(e.r=this.r),lodash$1.extend(e,this.extras),Url.format({protocol:"zcash:",host:this.address,query:e})},URI.prototype.inspect=function(){return"<URI: "+this.toString()+">"};var uri=URI,require$$0$8=getCjsExportFromNamespace(_package$7),zcashBitcoreLib=createCommonjsModule(function(e){var t=e.exports;t.version="v"+require$$0$8.version,t.versionGuard=function(e){},t.versionGuard(commonjsGlobal._bitcore),commonjsGlobal._bitcore=t.version,t.crypto={},t.crypto.BN=bn$2,t.crypto.ECDSA=ecdsa,t.crypto.Hash=hash$a,t.crypto.Random=random$3,t.crypto.Point=point,t.crypto.Signature=signature$5,t.encoding={},t.encoding.Base58=base58,t.encoding.Base58Check=base58check,t.encoding.BufferReader=bufferreader,t.encoding.BufferWriter=bufferwriter,t.encoding.Varint=varint$1,t.util={},t.util.buffer=buffer_1,t.util.js=js$2,t.util.preconditions=preconditions,t.errors=errors$g,t.Address=address$2,t.Block=block$4,t.MerkleBlock=merkleblock,t.BlockHeader=blockheader,t.HDPrivateKey=hdprivatekey,t.HDPublicKey=hdpublickey,t.Networks=networks_1$2,t.Opcode=opcode,t.PrivateKey=privatekey,t.PublicKey=publickey$1,t.Script=script$2,t.Transaction=transaction$3,t.URI=uri,t.Unit=unit,t.deps={},t.deps.bnjs=bn$1,t.deps.bs58=bs58$1,t.deps.Buffer=Buffer,t.deps.elliptic=elliptic_1$3,t.deps._=lodash$1,t._HDKeyCache=hdkeycache,t.Transaction.sighash=sighash_1}),sha3$e=createCommonjsModule(function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?n=commonjsGlobal:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new B(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new B(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,o){return S["cshake"+e].update(t,n,i,o)[r]()}},y=function(e,t,r){return function(t,n,i,o){return S["kmac"+e].update(t,n,i,o)[r]()}},v=function(e,t,r,n){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(r,n,o)}return e},_=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new B(e,t,e)},r.update=function(e){return r.create().update(e)},v(r,b,e,t)},$=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new B(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},v(r,m,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,i,o){return i||o?new B(e,t,n).bytepad([i,o],r):S["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},v(n,g,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return new P(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},v(n,y,e,t)}}],S={},E=[],w=0;w<$.length;++w)for(var C=$[w],A=C.bits,k=0;k<A.length;++k){var T=C.name+"_"+A[k];if(E.push(T),S[T]=C.createMethod(A[k],C.padding),"sha3"!==C.name){var I=C.name+A[k];E.push(I),S[I]=S[T]}}function B(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){B.call(this,e,t,r)}B.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,c=this.byteCount,f=e.length,l=this.blockCount,d=0,h=this.s;d<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<l+1;++i)a[i]=0;if(r)for(i=this.start;d<f&&i<c;++d)a[i>>2]|=e[d]<<u[3&i++];else for(i=this.start;d<f&&i<c;++d)(o=e.charCodeAt(d))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[l],i=0;i<l;++i)h[i]^=a[i];R(h),this.reset=!0}else this.start=i}return this},B.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},B.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},B.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];R(n)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,c="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(R(r),o=0)}return i&&(e=r[o],c+=a[e>>4&15]+a[15&e],i>1&&(c+=a[e>>12&15]+a[e>>8&15]),i>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},B.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&R(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&R(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},P.prototype=new B,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var R=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,p,b,m,g,y,v,_,$,S,E,w,C,A,k,T,I,B,P,R,O,N,x,L,M,D,F,j,U,H,K,G,V,z,q,W,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ce,ue,fe;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|p>>>31),r=u^(p<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,b=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,B=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,P=e[33]<<13|e[32]>>>19,R=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,fe=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,O=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,$=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,w=e[49]<<14|e[48]>>>18,e[0]=b^~g&v,e[1]=m^~y&_,e[10]=C^~k&I,e[11]=A^~T&B,e[20]=x^~M&F,e[21]=L^~D&j,e[30]=V^~q&J,e[31]=z^~W&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=g^~v&$,e[3]=y^~_&S,e[12]=k^~I&P,e[13]=T^~B&R,e[22]=M^~F&U,e[23]=D^~j&H,e[32]=q^~J&Y,e[33]=W^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=v^~$&E,e[5]=_^~S&w,e[14]=I^~P&O,e[15]=B^~R&N,e[24]=F^~U&K,e[25]=j^~H&G,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&fe,e[6]=$^~E&b,e[7]=S^~w&m,e[16]=P^~O&C,e[17]=R^~N&A,e[26]=U^~K&x,e[27]=H^~G&L,e[36]=Y^~Q&V,e[37]=Z^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~fe&re,e[8]=E^~b&g,e[9]=w^~m&y,e[18]=O^~C&k,e[19]=N^~A&T,e[28]=K^~x&M,e[29]=G^~L&D,e[38]=Q^~V&q,e[39]=ee^~z&W,e[48]=ue^~te&ne,e[49]=fe^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=S;else for(w=0;w<E.length;++w)n[E[w]]=S[E[w]]}()}),sha$a=e=>async t=>{switch(e){case"sha1":return crypto$l.createHash("sha1").update(t).digest();case"sha2-256":return crypto$l.createHash("sha256").update(t).digest();case"sha2-512":return crypto$l.createHash("sha512").update(t).digest();case"dbl-sha2-256":{const e=crypto$l.createHash("sha256").update(t).digest();return crypto$l.createHash("sha256").update(e).digest()}default:throw new Error(`${e} is not a supported algorithm`)}};const{Buffer:Buffer$_}=buffer$1,fromNumberTo32BitBuf$q=e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return Buffer$_.from(t)};var utils$Y={fromNumberTo32BitBuf:fromNumberTo32BitBuf$q};const{Buffer:Buffer$$}=buffer$1,minB$d=45569,minS$d=45633,blake2b$e={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal},blake2s$e={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal},makeB2Hash$d=(e,t)=>async r=>{const n=t.init(e,null);return t.update(n,r),Buffer$$.from(t.digest(n))};var blake_1$d=e=>{for(let t=0;t<64;t++)e[45569+t]=makeB2Hash$d(t+1,blake2b$e);for(let t=0;t<32;t++)e[45633+t]=makeB2Hash$d(t+1,blake2s$e)};const{Buffer:Buffer$10}=buffer$1,{fromNumberTo32BitBuf:fromNumberTo32BitBuf$r}=utils$Y,hash$b=e=>async t=>{switch(e){case"sha3-224":return Buffer$10.from(sha3$e.sha3_224.arrayBuffer(t));case"sha3-256":return Buffer$10.from(sha3$e.sha3_256.arrayBuffer(t));case"sha3-384":return Buffer$10.from(sha3$e.sha3_384.arrayBuffer(t));case"sha3-512":return Buffer$10.from(sha3$e.sha3_512.arrayBuffer(t));case"shake-128":return Buffer$10.from(sha3$e.shake128.create(128).update(t).arrayBuffer());case"shake-256":return Buffer$10.from(sha3$e.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return Buffer$10.from(sha3$e.keccak224.arrayBuffer(t));case"keccak-256":return Buffer$10.from(sha3$e.keccak256.arrayBuffer(t));case"keccak-384":return Buffer$10.from(sha3$e.keccak384.arrayBuffer(t));case"keccak-512":return Buffer$10.from(sha3$e.keccak512.arrayBuffer(t));case"murmur3-128":return Buffer$10.from(murmurhash3jsRevisited.x64.hash128(t),"hex");case"murmur3-32":return fromNumberTo32BitBuf$r(murmurhash3jsRevisited.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};var crypto$k={sha1:sha$a("sha1"),sha2256:sha$a("sha2-256"),sha2512:sha$a("sha2-512"),dblSha2256:sha$a("dbl-sha2-256"),sha3224:hash$b("sha3-224"),sha3256:hash$b("sha3-256"),sha3384:hash$b("sha3-384"),sha3512:hash$b("sha3-512"),shake128:hash$b("shake-128"),shake256:hash$b("shake-256"),keccak224:hash$b("keccak-224"),keccak256:hash$b("keccak-256"),keccak384:hash$b("keccak-384"),keccak512:hash$b("keccak-512"),murmur3128:hash$b("murmur3-128"),murmur332:hash$b("murmur3-32"),addBlake:blake_1$d};const{Buffer:Buffer$11}=buffer$1;async function Multihashing$d(e,t,r){const n=await Multihashing$d.digest(e,t,r);return src.encode(n,t,r)}Multihashing$d.Buffer=Buffer$11,Multihashing$d.multihash=src,Multihashing$d.digest=async(e,t,r)=>{const n=Multihashing$d.createHash(t),i=await n(e);return r?i.slice(0,r):i},Multihashing$d.createHash=function(e){if(!e)throw errCode("hash algorithm must be specified","ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=src.coerceCode(e),!Multihashing$d.functions[e])throw errCode(`multihash function '${e}' not yet supported`,"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing$d.functions[e]},Multihashing$d.functions={17:crypto$k.sha1,18:crypto$k.sha2256,19:crypto$k.sha2512,20:crypto$k.sha3512,21:crypto$k.sha3384,22:crypto$k.sha3256,23:crypto$k.sha3224,24:crypto$k.shake128,25:crypto$k.shake256,26:crypto$k.keccak224,27:crypto$k.keccak256,28:crypto$k.keccak384,29:crypto$k.keccak512,34:crypto$k.murmur3128,35:crypto$k.murmur332,86:crypto$k.dblSha2256},crypto$k.addBlake(Multihashing$d.functions),Multihashing$d.validate=async(e,t)=>{const r=await Multihashing$d(e,src.decode(t).name);return 0===Buffer$11.compare(t,r)};var src$1X=Multihashing$d;const ZcashBitcoreBlockHeader=zcashBitcoreLib.BlockHeader,ZCASH_BLOCK_HEADER_SIZE=1487,CODEC$1=src$4.ZCASH_BLOCK,DEFAULT_HASH_ALG$2=src$4.DBL_SHA2_256,serialize$2=e=>e.toBuffer(),deserialize$5=e=>{if(1487!==e.length)throw new Error("Zcash block header needs to be 1487 bytes");const t=ZcashBitcoreBlockHeader.fromBuffer(e),r={difficulty:function(){return this.bits},parent:function(){return hashToCid$1(this.prevHash)},tx:function(){return hashToCid$1(this.merkleRoot)}};Object.entries(r).forEach(([e,r])=>{Object.defineProperty(t,e,{enumerable:!0,get:r})});return["bits","merkleRoot","prevHash","time"].forEach(e=>{e in t&&Object.defineProperty(t,e,{enumerable:!1})}),t},cid$2=async(e,t)=>{const r={cidVersion:1,hashAlg:DEFAULT_HASH_ALG$2},n=Object.assign(r,t),i=await src$1X(e,n.hashAlg),o=src$4.print[CODEC$1];return new src$1W(n.cidVersion,o,i)},hashToCid$1=e=>{const t=src.encode(e,DEFAULT_HASH_ALG$2);return new src$1W(1,"zcash-block",t)};var util$i={hashToCid:hashToCid$1,ZCASH_BLOCK_HEADER_SIZE:1487,codec:CODEC$1,defaultHashAlg:DEFAULT_HASH_ALG$2,cid:cid$2,deserialize:deserialize$5,serialize:serialize$2},resolve$9=(e,t)=>{let r=util$i.deserialize(e);const n=t.split("/").filter(Boolean);for(;n.length;){const e=n.shift();if(void 0===r[e])throw new Error(`Object has no property '${e}'`);if(r=r[e],src$1W.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}};const traverse$4=function*(e,t){if(!Buffer.isBuffer(e)&&!src$1W.isCID(e)&&"string"!=typeof e&&null!==e)for(const r of Object.keys(e)){const n=void 0===t?r:t+"/"+r;yield n,yield*traverse$4(e[r],n)}};var tree$5=function*(e){const t=util$i.deserialize(e);yield*traverse$4(t)},resolver$5={resolve:resolve$9,tree:tree$5},src$1Y=createCommonjsModule(function(e,t){t.resolver=resolver$5,t.util=util$i,t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg}),src_1$j=src$1Y.resolver,src_2$h=src$1Y.util,src_3$g=src$1Y.codec,src_4$g=src$1Y.defaultHashAlg;const IpldFormats={get[src$4.BITCOIN_BLOCK](){return src$1P},get[src$4.ETH_ACCOUNT_SNAPSHOT](){return src$1S.ethAccountSnapshot},get[src$4.ETH_BLOCK](){return src$1S.ethBlock},get[src$4.ETH_BLOCK_LIST](){return src$1S.ethBlockList},get[src$4.ETH_STATE_TRIE](){return src$1S.ethStateTrie},get[src$4.ETH_STORAGE_TRIE](){return src$1S.ethStorageTrie},get[src$4.ETH_TX](){return src$1S.ethTx},get[src$4.ETH_TX_TRIE](){return src$1S.ethTxTrie},get[src$4.GIT_RAW](){return src$1V},get[src$4.ZCASH_BLOCK](){return src$1Y}};var ipldNodejs=(e,t={},r)=>mergeOptions.call({concatArrays:!0},{blockService:e,loadFormat:e=>{if(r("Loading IPLD format",e),IpldFormats[e])return IpldFormats[e];throw new Error(`Missing IPLD format "${e}"`)}},t);const log$$=src$z("ipfs:state");log$$.error=src$z("ipfs:state:error");var state$7=e=>{const t=fsmEvent_1("uninitialized",{uninitialized:{init:"initializing",initialized:"stopped"},initializing:{initialized:"stopped"},stopped:{start:"starting"},starting:{started:"running"},running:{stop:"stopping"},stopping:{stopped:"stopped"}});return t.on("error",e=>log$$.error(e)),t.on("done",()=>log$$("-> "+t._state)),t.init=()=>{t("init")},t.initialized=()=>{t("initialized")},t.stop=()=>{t("stop")},t.stopped=()=>{t("stopped")},t.start=()=>{t("start")},t.started=()=>{t("started")},t.state=()=>t._state,t},core$2=createCommonjsModule(function(e){class t extends events$1{constructor(e){super();e=config$1.validate(e||{}),this._options=mergeOptions({init:!0,start:!0,EXPERIMENTAL:{},preload:{enabled:!0,addresses:["/dnsaddr/node0.preload.ipfs.io/https","/dnsaddr/node1.preload.ipfs.io/https"]}},e),!1===e.init&&(this._options.init=!1),!1!==e.start&&(this._options.start=!0),"string"==typeof e.repo||void 0===e.repo?this._repo=repoNodejs(e.repo):this._repo=e.repo,this.log=src$z("ipfs"),this.log.err=src$z("ipfs:err"),this._peerInfoBook=new src$x,this._peerInfo=void 0,this._bitswap=void 0,this._blockService=new src$9(this._repo),this._ipld=new src$o(ipldNodejs(this._blockService,this._options.ipld,this.log)),this._preload=preload_1(this),this._mfsPreload=mfsPreload(this),this._ipns=void 0,this._print=this._options.silent?this.log:console.log,this.init=components.init(this),this.preStart=components.preStart(this),this.start=components.start(this),this.stop=components.stop(this),this.shutdown=this.stop,this.isOnline=components.isOnline(this),Object.assign(this,components.filesRegular(this)),this.version=components.version(this),this.id=components.id(this),this.repo=components.repo(this),this.bootstrap=components.bootstrap(this),this.config=components.config(this),this.block=components.block(this),this.object=components.object(this),this.dag=components.dag(this),this.files=components.filesMFS(this),this.libp2p=null,this.swarm=components.swarm(this),this.name=components.name(this),this.bitswap=components.bitswap(this),this.pin=components.pin(this),this.ping=components.ping(this),this.pingPullStream=components.pingPullStream(this),this.pingReadableStream=components.pingReadableStream(this),this.pubsub=components.pubsub(this),this.dht=components.dht(this),this.dns=components.dns(this),this.key=components.key(this),this.stats=components.stats(this),this.resolve=components.resolve(this),this._options.EXPERIMENTAL.pubsub&&this.log("EXPERIMENTAL pubsub is enabled"),this._options.EXPERIMENTAL.ipnsPubsub&&(this._options.EXPERIMENTAL.pubsub||(this.log("EXPERIMENTAL pubsub is enabled to use IPNS pubsub"),this._options.EXPERIMENTAL.pubsub=!0),this.log("EXPERIMENTAL IPNS pubsub is enabled")),this._options.EXPERIMENTAL.sharding&&this.log("EXPERIMENTAL sharding is enabled"),this.state=state$7(),boot(this)}}e.exports=t;const r=Buffer;Object.assign(e.exports,{crypto:src$u,isIPFS:src$w,Buffer:r,CID:src$v,multiaddr:src$2,multibase:src$1,multihash:src,multihashing:src$y,multicodec:src$4,PeerId:src$s,PeerInfo:src$t}),e.exports.createNode=e=>new t(e)}),core_1=core$2.createNode,ipfsProvider=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(ipfs_settings);t.default=function(e){return{service:async function(){return new core$2({config:n.default,start:!1})},name:constants$3.IPFS_SERVICE}}});unwrapExports(ipfsProvider);var IAkashaModule_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class r{get name(){return this._name()}static async wrapService(e,t){const r=await e();return function(){return console.log(`[info] service < ${t} > was accessed.`),r}}async startServices(e){const t=this._registerServices();for(const n of t){const t=await r.wrapService(n.service,n.name),i=r.getServiceName(this.name,n.name);e.register(i,t)}}static getServiceName(e,t){return`${e}=>${t}`}}t.IAkashaModule=r});unwrapExports(IAkashaModule_1);var IAkashaModule_2=IAkashaModule_1.IAkashaModule,lib$c=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(settings_1),i=r(web3Provider$1),o=r(ipfsProvider);class s extends IAkashaModule_1.IAkashaModule{constructor(){super(...arguments),this.services=[]}init(e){const t={moduleName:constants$4.moduleName,values:n.default};e.getService(constants$3.SETTINGS_SERVICE).setSettings(t),this.services.push(i.default(e)),this.services.push(o.default(e))}_registerServices(){return this.services}_name(){return constants$4.moduleName}}t.CommonsModule=s,t.default=function(){return new s}}),registerCommonModule=unwrapExports(lib$c),lib_1$4=lib$c.CommonsModule;function __awaiter$1(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}c((n=n.apply(e,t||[])).next())})}function __generator$1(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function init$5(){var e=this,t=initDI(),r=registerCommonModule();r.init(t);var n={common:r};return{di:t,Channel:runtime.Transport,modules:n,start:function(){return __awaiter$1(e,void 0,void 0,function(){var e,r;return __generator$1(this,function(i){switch(i.label){case 0:e=0,r=Object.values(n),i.label=1;case 1:return e<r.length?[4,r[e].startServices(t)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}}}var inquirer=require("inquirer"),chalk=require("chalk");!function(){__awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return[4,(e=init$5()).start()];case 1:return r.sent(),console.log(chalk.green("AKASHA-SDK cli is ready!")),[4,inquirer.prompt([{type:"confirm",name:"startIpfs",message:"Start js-ipfs instance?"}])];case 2:return r.sent().startIpfs?[4,(t=e.di.getService(IAkashaModule_2.getServiceName(constants_1$2,constants_5))).start()]:[3,4];case 3:r.sent(),console.log(chalk.cyan("ipfs node started! :D")),r.label=4;case 4:return[4,inquirer.prompt([{type:"confirm",name:"exitCli",message:"exit app?"}])];case 5:return r.sent().exitCli&&t?[4,t.stop()]:[3,7];case 6:r.sent(),r.label=7;case 7:return[2]}})})}();
