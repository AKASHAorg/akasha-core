
fragment UserProfileFragment on Profile{
  id
  did{
    id
  }
  name
  links{
    href
    label
  }
  background {
    alternatives {
      src
      width
      height
    }
    default {
      src
      width
      height
    }
  }
  description
  avatar {
    default {
      src
      width
      height
    }
    alternatives {
      src
      width
      height
    }
  }
  createdAt
}
# id of the profile document
query GetProfileByID($id: ID!) {
  node(id: $id) {
    ...on Profile {
      ...UserProfileFragment
    }
  }
}
# id is the did string of the account
query GetProfileByDid($id: ID!) {
  node(id: $id) {
    ...on CeramicAccount {
      profile {
        ...UserProfileFragment
      }
    }
  }
}

# saved interests for all documents, might be useful at some point
query GetInterests($after: String, $before: String, $first: Int, $last: Int){
  interestsIndex(after: $after, before: $before, first: $first, last: $last ){
    edges {
      node {
        topics {
          value
          labelType
        }
        did {
          id
        }
        id
      }
    }
    pageInfo {
      startCursor
      endCursor
      hasNextPage
      hasPreviousPage
    }
  }
}

# get all interests for a specific DID account
query GetInterestsByDid($id: ID!){
  node(id: $id){
    ... on CeramicAccount{
      interests {
        topics {
          value
          labelType
        }
        did {
          id
        }
        id
      }
    }
  }
}

# get interests from a specific Interests document id
query GetInterestsById($id: ID!){
  node(id: $id){
    ... on Interests{
      topics {
        value
        labelType
      }
      did {
        id
      }
      id
    }
  }
}
# get following
query GetFollowingListByDid($id: ID!, $after: String, $before: String, $first: Int, $last: Int){
  node(id: $id){
    ... on CeramicAccount{
      followList(after: $after, before: $before, first: $first, last: $last){
        edges {
          node {
            isFollowing
            profile {
             ...UserProfileFragment
            }
          }
        }
        pageInfo {
          startCursor
          endCursor
          hasNextPage
          hasPreviousPage
        }
      }
    }
  }
}

# get followers
query GetFollowersListByDid($id: ID!, $after: String, $before: String, $first: Int, $last: Int){
  node(id: $id){
    ... on CeramicAccount{
      profile {
        followers(after: $after, before: $before, first: $first, last: $last){
          edges {
            node {
              isFollowing
              profile {
                ...UserProfileFragment
              }
            }
          }
          pageInfo {
            startCursor
            endCursor
            hasNextPage
            hasPreviousPage
          }
        }
      }
    }
  }

}
# create new Profile document attached to did
mutation CreateProfile($i: CreateProfileInput!){
  createProfile(input: $i){
    document {
      ...UserProfileFragment
    }
    clientMutationId
  }
}

# update an existing Profile document
mutation UpdateProfile($i: UpdateProfileInput!){
  updateProfile(input: $i){
    document {
      ...UserProfileFragment
    }
    clientMutationId
  }
}

# create an Interests document for the authenticated Did account
mutation CreateInterests($i: CreateInterestsInput!){
  createInterests(input: $i){
    document {
      topics {
        value
        labelType
      }
      did {
        id
      }
      id
    }
    clientMutationId
  }
}

# update an existing Interests document for the authenticated Did account
mutation UpdateInterests($i: UpdateInterestsInput!){
  updateInterests(input: $i){
    document {
      topics {
        value
        labelType
      }
      did {
        id
      }
      id
    }
    clientMutationId
  }
}

mutation CreateFollow($i: CreateFollowInput!){
  createFollow(input: $i){
    document {
      isFollowing
      profile {
        ...UserProfileFragment
      }
      did {
        id
      }
      id
    }
  }
}

mutation UpdateFollow($i: UpdateFollowInput!){
  updateFollow(input: $i){
    document {
      isFollowing
      profile {
        ...UserProfileFragment
      }
      did {
        id
      }
      id
    }
  }
}
