fragment DataProviderFragment on DataProvider{
  provider
  property
  value
}

fragment UserProfileFragmentData on UserProfile{
  pubKey
  name
  userName
  avatar
  coverImage
  description
  ethAddress
  totalPosts
  totalFollowers
  totalFollowing
  totalInterests
}

mutation AddProfileProvider($data: [DataProviderInput]) {
  addProfileProvider(data: $data)
}

mutation MakeDefaultProvider($data: [DataProviderInput]) {
  makeDefaultProvider(data: $data)
}

mutation ToggleInterestSub($sub: String!){
  toggleInterestSub(sub: $sub)
}

mutation RegisterUsername($name: String!) {
  registerUserName(name: $name)
}

query ResolveProfile($pubKey: String!) {
  resolveProfile(pubKey: $pubKey) {
    ...UserProfileFragmentData
    providers{
    ...DataProviderFragment
    }
    default{
    ...DataProviderFragment
    }
  }
}

query GetProfile($ethAddress: String!) {
  getProfile(ethAddress: $ethAddress) {
    ...UserProfileFragmentData
    providers{
    ...DataProviderFragment
    }
    default{
    ...DataProviderFragment
    }
  }
}

mutation Follow($pubKey: String!) {
  follow(pubKey: $pubKey)
}

mutation UnFollow($pubKey: String!) {
  unFollow(pubKey: $pubKey)
}

query IsFollowing($follower: String!, $following: String!) {
  isFollowing(follower: $follower, following: $following)
}

mutation SaveMetaData($data: DataProviderInput) {
  saveMetaData(data: $data)
}

query SearchProfiles($name: String!) {
  searchProfiles(name: $name) {
    ...UserProfileFragmentData
  }
}

query GlobalSearch($keyword: String!) {
  globalSearch(keyword: $keyword){
    posts{id}
    profiles{id}
    tags{id name totalPosts}
    comments{id}
  }
}

query GetFollowers($pubKey: String!, $limit: Int, $offset: Int){
  getFollowers(pubKey: $pubKey, limit: $limit, offset: $offset){
    results{...UserProfileFragmentData}
    nextIndex
    total
  }
}

query GetFollowing($pubKey: String!, $limit: Int, $offset: Int){
  getFollowing(pubKey: $pubKey, limit: $limit, offset: $offset){
    results{...UserProfileFragmentData}
    nextIndex
    total
  }
}

query GetInterests($pubKey:String!){
  getInterests(pubKey: $pubKey)
}

query IsUserNameAvailable($userName: String!) {
  isUserNameAvailable(userName: $userName)
}
